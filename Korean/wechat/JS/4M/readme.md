#마이크로 게임 4M 로컬 백과 동적 자원 가재

> author: charley

일반적으로 우리가 개발할 때는 로컬 경로를 직접 사용할 것이며 예를 들면 예시 중 인용한 것은 로컬 경로이고,


```json

Laya.Texture2D.load("res/layabox.png");
```


항목의 디렉토리 중 전체 크기를 합치면 4M을 넘지 않는다면, 로컬 자원을 찾을 수 있다면 아무리 써도 문제가 없다.

하지만

마이크로신의 작은 게임의 로컬 가방은 4M의 제한이 있다. 일단 이 제한을 초과하면 올리지 않는다. 진기 미리 보기 허용하지 않는다.

그래서 우리**항목이 4M보다 크면 어떻게 처리합니까?**

한 가지 방안은 배포, 어려서부터 게임베이스 2.0버전부터 프로필 패키지를 통해 8m에 이른다.분백에 관하여 별도의 문서를 상세하게 소개합니다.여기에서 다른 방안을 강의하다.

또 다른 방안은 인터넷 동태 가재

우리가 로컬 가방에서 JS 코드는 반드시 넣어야 한다. JS 는 인터넷이 동태를 적용하지 않기 때문이다.그래서 로컬 가방 내 JS 가 4M을 넘으면 JS의 부피를 어떻게 최적화하는지 고려해 보면 압축과 UI 코드 분리와 함께 UI 부호 분리된다.아니면 안 되면 작은 게임의 포괄 방안을 통해 해결할 수밖에 없다.JS 가 4M을 넘지 않았다면, 상황을 보고 재활용하는 기초 자원을 더 넣을 수 있다.

요컨대 대다수의 작은 게임에 대해 네트워크 동태 가재는 필수적인 방식이다.

저**네트워크 동적 가재 경로를 어떻게 처리합니까**.로컬`load()`방법 뒤에 사용하기`URL.basePath`방법.

예를 들어:


```java

material.diffuseTexture = Laya.Texture2D.load("res/layabox.png");
box.meshRender.material = material;
Laya.URL.basePath = "https://XXXX.com";//请把XXXX换成自己的真实网址；
//在此之下，再使用load加载资源，都会自动加入URL网址。从网络上动态加载。
```


사용하다`URL.basePath`방법을 사용한 뒤 로컬 경로를 load 로 다운로드하면 URL.basePath 의 주소를 자동으로 추가합니다.이렇게 되면 로케이션과 네트워크 가재의 결합이 이뤄진다.

**이렇게 하면 끝인가요?아니오!**

방금 쓰던 대로`res/layabox.png`이미 위신 게임 로컬 디렉토리에 올렸는데 사용하고 있다면`URL.basePath`그 후 다시 불러오기`res/layabox.png`로컬 로컬 사용이 아니라 네트워크 동태에서 사용된다.이것은 우리가 요구하는 결과는 아니다.

그래서 엔진 사용`URL.basePath`그 후 로컬 카탈로그를 다시 사용해서 진행되었습니다.**특수 디렉터리와 파일 처리**로컬 가방 리스트 메커니즘이다.다음과 같이 제시:


```json

MiniAdpter.nativefiles =  [
    "wxlocal",
    "res/atlas/houzi.atlas",
    "res/atlas/houzi.png",
    "common/tishi.png",
    "common/bg.png",
    "ui.json",
    "newLb/bg031.png"
];
```


**MiniAdpter.nativefiles 에 존재하는 디렉터리 이름이나 파일, 엔진은 자동으로 로컬 디렉토리로 인식됩니다**URL.basePath 를 사용해도 nativefiles 명단에 포함된 디렉터리 이름이나 파일은 네트워크 동태에서 다운로드되지 않고 로컬 로고만 적용됩니다.



이 문서에 의문이 있다면 공식 홈페이지 커뮤니티에 질문해 커뮤니티의 링크를 공식 QQ 군에 보낼 수 있습니다 @ 관리자 charley

커뮤니티 사이트: https://ask.layabox.com/



##본문 칭찬

만약 본문은 당신에게 도움이 된다고 생각하시면, 스코드가 작가님을 환영합니다. 당신의 격려는 우리가 더 우수한 문서의 동력입니다.

![wechatPay](../../../wechatPay.jpg)