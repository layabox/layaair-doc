var window = window || global;
var document = document || (window.document = {});
/***********************************/
/*http://www.layabox.com  2017/3/23*/
/***********************************/
var Laya=window.Laya=(function(window,document){
	var Laya={
		__internals:[],
		__packages:{},
		__classmap:{'Object':Object,'Function':Function,'Array':Array,'String':String},
		__sysClass:{'object':'Object','array':'Array','string':'String','dictionary':'Dictionary'},
		__propun:{writable: true,enumerable: false,configurable: true},
		__presubstr:String.prototype.substr,
		__substr:function(ofs,sz){return arguments.length==1?Laya.__presubstr.call(this,ofs):Laya.__presubstr.call(this,ofs,sz>0?sz:(this.length+sz));},
		__init:function(_classs){_classs.forEach(function(o){o.__init$ && o.__init$();});},
		__isClass:function(o){return o && (o.__isclass || o==Object || o==String || o==Array);},
		__newvec:function(sz,value){
			var d=[];
			d.length=sz;
			for(var i=0;i<sz;i++) d[i]=value;
			return d;
		},
		__extend:function(d,b){
			for (var p in b){
				if (!b.hasOwnProperty(p)) continue;
				var gs=Object.getOwnPropertyDescriptor(b, p);
				var g = gs.get, s = gs.set; 
				if ( g || s ) {
					if ( g && s)
						Object.defineProperty(d,p,gs);
					else{
						g && Object.defineProperty(d, p, g);
						s && Object.defineProperty(d, p, s);
					}
				}
				else d[p] = b[p];
			}
			function __() { Laya.un(this,'constructor',d); }__.prototype=b.prototype;d.prototype=new __();Laya.un(d.prototype,'__imps',Laya.__copy({},b.prototype.__imps));
		},
		__copy:function(dec,src){
			if(!src) return null;
			dec=dec||{};
			for(var i in src) dec[i]=src[i];
			return dec;
		},
		__package:function(name,o){
			if(Laya.__packages[name]) return;
			Laya.__packages[name]=true;
			var p=window,strs=name.split('.');
			if(strs.length>1){
				for(var i=0,sz=strs.length-1;i<sz;i++){
					var c=p[strs[i]];
					p=c?c:(p[strs[i]]={});
				}
			}
			p[strs[strs.length-1]] || (p[strs[strs.length-1]]=o||{});
		},
		__hasOwnProperty:function(name,o){
			o=o ||this;
		    function classHas(name,o){
				if(Object.hasOwnProperty.call(o.prototype,name)) return true;
				var s=o.prototype.__super;
				return s==null?null:classHas(name,s);
			}
			return (Object.hasOwnProperty.call(o,name)) || classHas(name,o.__class);
		},
		__typeof:function(o,value){
			if(!o || !value) return false;
			if(value===String) return (typeof o==='string');
			if(value===Number) return (typeof o==='number');
			if(value.__interface__) value=value.__interface__;
			else if(typeof value!='string')  return (o instanceof value);
			return (o.__imps && o.__imps[value]) || (o.__class==value);
		},
		__as:function(value,type){
			return (this.__typeof(value,type))?value:null;
		},		
		interface:function(name,_super){
			Laya.__package(name,{});
			var ins=Laya.__internals;
			var a=ins[name]=ins[name] || {self:name};
			if(_super)
			{
				var supers=_super.split(',');
				a.extend=[];
				for(var i=0;i<supers.length;i++){
					var nm=supers[i];
					ins[nm]=ins[nm] || {self:nm};
					a.extend.push(ins[nm]);
				}
			}
			var o=window,words=name.split('.');
			for(var i=0;i<words.length-1;i++) o=o[words[i]];
			o[words[words.length-1]]={__interface__:name};
		},
		class:function(o,fullName,_super,miniName){
			_super && Laya.__extend(o,_super);
			if(fullName){
				Laya.__package(fullName,o);
				Laya.__classmap[fullName]=o;
				if(fullName.indexOf('.')>0){
					if(fullName.indexOf('laya.')==0){
						var paths=fullName.split('.');
						miniName=miniName || paths[paths.length-1];
						if(Laya[miniName]) console.log("Warning!,this class["+miniName+"] already exist:",Laya[miniName]);
						Laya[miniName]=o;
					}
				}
				else {
					if(fullName=="Main")
						window.Main=o;
					else{
						if(Laya[fullName]){
							console.log("Error!,this class["+fullName+"] already exist:",Laya[fullName]);
						}
						Laya[fullName]=o;
					}
				}
			}
			var un=Laya.un,p=o.prototype;
			un(p,'hasOwnProperty',Laya.__hasOwnProperty);
			un(p,'__class',o);
			un(p,'__super',_super);
			un(p,'__className',fullName);
			un(o,'__super',_super);
			un(o,'__className',fullName);
			un(o,'__isclass',true);
			un(o,'super',function(o){this.__super.call(o);});
		},
		imps:function(dec,src){
			if(!src) return null;
			var d=dec.__imps|| Laya.un(dec,'__imps',{});
			function __(name){
				var c,exs;
				if(! (c=Laya.__internals[name]) ) return;
				d[name]=true;
				if(!(exs=c.extend)) return;
				for(var i=0;i<exs.length;i++){
					__(exs[i].self);
				}
			}
			for(var i in src) __(i);
		},
		getset:function(isStatic,o,name,getfn,setfn){
			if(!isStatic){
				getfn && Laya.un(o,'_$get_'+name,getfn);
				setfn && Laya.un(o,'_$set_'+name,setfn);
			}
			else{
				getfn && (o['_$GET_'+name]=getfn);
				setfn && (o['_$SET_'+name]=setfn);
			}
			if(getfn && setfn) 
				Object.defineProperty(o,name,{get:getfn,set:setfn,enumerable:false});
			else{
				getfn && Object.defineProperty(o,name,{get:getfn,enumerable:false});
				setfn && Object.defineProperty(o,name,{set:setfn,enumerable:false});
			}
		},
		static:function(_class,def){
				for(var i=0,sz=def.length;i<sz;i+=2){
					if(def[i]=='length') 
						_class.length=def[i+1].call(_class);
					else{
						function tmp(){
							var name=def[i];
							var getfn=def[i+1];
							Object.defineProperty(_class,name,{
								get:function(){delete this[name];return this[name]=getfn.call(this);},
								set:function(v){delete this[name];this[name]=v;},enumerable: true,configurable: true});
						}
						tmp();
					}
				}
		},		
		un:function(obj,name,value){
			value || (value=obj[name]);
			Laya.__propun.value=value;
			Object.defineProperty(obj, name, Laya.__propun);
			return value;
		},
		uns:function(obj,names){
			names.forEach(function(o){Laya.un(obj,o)});
		}
	};

	window.console=window.console || ({log:function(){}});
	window.trace=window.console.log;
	Error.prototype.throwError=function(){throw arguments;};
	//String.prototype.substr=Laya.__substr;
	Object.defineProperty(Array.prototype,'fixed',{enumerable: false});

	return Laya;
})(window,document);

(function(window,document,Laya){
	var __un=Laya.un,__uns=Laya.uns,__static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec;
	Laya.interface('laya.ui.IItem');
	Laya.interface('laya.ui.ISelect');
	Laya.interface('laya.ui.IRender');
	Laya.interface('laya.ui.IComponent');
	Laya.interface('laya.runtime.IMarket');
	Laya.interface('laya.filters.IFilter');
	Laya.interface('laya.display.ILayout');
	Laya.interface('laya.editor.core.IClip');
	Laya.interface('laya.resource.IDispose');
	Laya.interface('laya.runtime.IConchNode');
	Laya.interface('laya.editor.core.IContent');
	Laya.interface('laya.filters.IFilterAction');
	Laya.interface('laya.runtime.ICPlatformClass');
	Laya.interface('laya.resource.ICreateResource');
	Laya.interface('as3analyser.parser.struct.ICodePiece');
	Laya.interface('laya.editor.core.Wraps.xml.IXMLElement');
	Laya.interface('laya.ui.IBox','laya.ui.IComponent');
	/**
	*@private
	*/
	//class laya.utils.RunDriver
	var RunDriver=(function(){
		function RunDriver(){};
		__class(RunDriver,'laya.utils.RunDriver');
		RunDriver.FILTER_ACTIONS=[];
		RunDriver.pixelRatio=-1;
		RunDriver._charSizeTestDiv=null
		RunDriver.now=function(){
			return Date.now();
		}

		RunDriver.getWindow=function(){
			return window;
		}

		RunDriver.getPixelRatio=function(){
			if (RunDriver.pixelRatio < 0){
				var ctx=Browser.context;
				var backingStore=ctx.backingStorePixelRatio || ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;
				RunDriver.pixelRatio=(Browser.window.devicePixelRatio || 1)/ backingStore;
				if(RunDriver.pixelRatio<1)RunDriver.pixelRatio=1;
			}
			return RunDriver.pixelRatio;
		}

		RunDriver.getIncludeStr=function(name){
			return null;
		}

		RunDriver.createShaderCondition=function(conditionScript){
			var fn="(function() {return "+conditionScript+";})";
			return Browser.window.eval(fn);
		}

		RunDriver.fontMap=[];
		RunDriver.measureText=function(txt,font){
			var isChinese=RunDriver.hanzi.test(txt);
			if (isChinese && RunDriver.fontMap[font]){
				return RunDriver.fontMap[font];
			};
			var ctx=Browser.context;
			ctx.font=font;
			var r=ctx.measureText(txt);
			if (isChinese)RunDriver.fontMap[font]=r;
			return r;
		}

		RunDriver.getWebGLContext=function(canvas){
		};

		RunDriver.beginFlush=function(){
		};

		RunDriver.endFinish=function(){
		};

		RunDriver.addToAtlas=null
		RunDriver.flashFlushImage=function(atlasWebGLCanvas){
		};

		RunDriver.drawToCanvas=function(sprite,_renderType,canvasWidth,canvasHeight,offsetX,offsetY){
			var canvas=HTMLCanvas.create("2D");
			var context=new RenderContext(canvasWidth,canvasHeight,canvas);
			RenderSprite.renders[_renderType]._fun(sprite,context,offsetX,offsetY);
			return canvas;
		}

		RunDriver.createParticleTemplate2D=null
		RunDriver.createGLTextur=null;
		RunDriver.createWebGLContext2D=null;
		RunDriver.changeWebGLSize=function(w,h){
		};

		RunDriver.createRenderSprite=function(type,next){
			return new RenderSprite(type,next);
		}

		RunDriver.createFilterAction=function(type){
			return new ColorFilterAction();
		}

		RunDriver.createGraphics=function(){
			return new Graphics();
		}

		RunDriver.clear=function(value){
			Render._context.ctx.clear();
		}

		RunDriver.clearAtlas=function(value){
		};

		RunDriver.addTextureToAtlas=function(value){
		};

		RunDriver.getTexturePixels=function(value,x,y,width,height){
			return null;
		}

		RunDriver.skinAniSprite=function(){
			return null;
		}

		__static(RunDriver,
		['hanzi',function(){return this.hanzi=new RegExp("^[\u4E00-\u9FA5]$");}
		]);
		return RunDriver;
	})()


	/**
	*<code>Laya</code> 是全局对象的引用入口集。
	*Laya类引用了一些常用的全局对象，比如Laya.stage：舞台，Laya.timer：时间管理器，Laya.loader：加载管理器，使用时注意大小写。
	*/
	//class Laya
	var ___Laya=(function(){
		//function Laya(){};
		/**
		*表示是否捕获全局错误并弹出提示。默认为false。
		*适用于移动设备等不方便调试的时候，设置为true后，如有未知错误，可以弹窗抛出详细错误堆栈。
		*/
		__getset(1,Laya,'alertGlobalError',null,function(value){
			var erralert=0;
			if (value){
				Browser.window.onerror=function (msg,url,line,column,detail){
					if (erralert++< 5 && detail)
						alert("出错啦，请把此信息截图给研发商\n"+msg+"\n"+detail.stack);
				}
				}else {
				Browser.window.onerror=null;
			}
		});

		Laya.init=function(width,height,__plugins){
			var plugins=[];for(var i=2,sz=arguments.length;i<sz;i++)plugins.push(arguments[i]);
			if (Laya._isinit)return;
			Laya._isinit=true;
			Browser.__init__();
			Context.__init__();
			Graphics.__init__();
			Laya.timer=new Timer();
			Laya.loader=new LoaderManager();
			for (var i=0,n=plugins.length;i < n;i++){
				if (plugins[i].enable)plugins[i].enable();
			}
			Font.__init__();
			Style.__init__();
			ResourceManager.__init__();
			CacheManger.beginCheck();
			Laya._currentStage=Laya.stage=new Stage();
			Laya.stage.conchModel && Laya.stage.conchModel.setRootNode();
			var location=Browser.window.location;
			var pathName=location.pathname;
			pathName=pathName.charAt(2)==':' ? pathName.substring(1):pathName;
			URL.rootPath=URL.basePath=URL.getPath(location.protocol=="file:" ? pathName :location.protocol+"//"+location.host+location.pathname);
			Laya.render=new Render(0,0);
			Laya.stage.size(width,height);
			RenderSprite.__init__();
			KeyBoardManager.__init__();
			MouseManager.instance.__init__(Laya.stage,Render.canvas);
			Input.__init__();
			SoundManager.autoStopMusic=true;
			LocalStorage.__init__();
			return Render.canvas;
		}

		Laya.stage=null;
		Laya.timer=null;
		Laya.loader=null;
		Laya.version="1.7.2beta";
		Laya.render=null
		Laya._currentStage=null
		Laya._isinit=false;
		__static(Laya,
		['conchMarket',function(){return this.conchMarket=window.conch?conchMarket:null;},'PlatformClass',function(){return this.PlatformClass=window.PlatformClass;}
		]);
		return Laya;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.RunConfig
	var RunConfig=(function(){
		function RunConfig(){}
		__class(RunConfig,'laya.RunConfig');
		RunConfig.filePath="E:/wangwei/codes/LayaAir/trank/Editor/LayaAirJsonMergeTool/bin/h5/data/page";
		RunConfig.outPath="E:/wangwei/codes/LayaAir/trank/Editor/LayaAirJsonMergeTool/bin/h5/out/merge.json";
		RunConfig.fileExtension="json";
		return RunConfig;
	})()


	/**
	*...
	*@author ww
	*/
	//class LayaAirJsonMergeTool
	var LayaAirJsonMergeTool=(function(){
		function LayaAirJsonMergeTool(){
			this.jsonDic=null;
			this.oldDic=null;
			this.init();
			this.parseCMD(NodeJSTools.getArgv());
			DTrace.timeStart("LayaAirJsonMergeTool");
			this.work();
			console.log("work done");
			DTrace.timeEnd("LayaAirJsonMergeTool");
		}

		__class(LayaAirJsonMergeTool,'LayaAirJsonMergeTool');
		var __proto=LayaAirJsonMergeTool.prototype;
		//trace("myPath:",NodeJSTools.getMyPath());
		__proto.parseCMD=function(args){
			NodeJSTools.parseArgToObj(args,1,RunConfig);
		}

		__proto.init=function(){
			Device.Buffer=Buffer;
			SystemSetting.isCMDVer=true;
			OSInfo.init();
			Browser.userAgent=OSInfo.type;
			FileTools.init2();
		}

		__proto.work=function(){
			if (!FileTools.exist(RunConfig.filePath)){
				console.log("path not exist:",RunConfig.filePath);
				return;
			};
			var files;
			files=FileTools.getDirFiles(RunConfig.filePath);
			console.log("filecount:",files.length);
			this.jsonDic={};
			var i=0,len=0;
			len=files.length;
			var fileExtention;
			for (i=0;i < len;i++){
				fileExtention=FileTools.getExtensionName(files[i]);
				if (fileExtention==RunConfig.fileExtension){
					this.workAFile(RunConfig.filePath,files[i]);
				}
			}
			FileManager.createJSONFile(RunConfig.outPath,this.jsonDic);
		}

		__proto.workAFile=function(parent,path){
			console.log("work:",path);
			var filePath;
			filePath=FileManager.getPath(parent,path);
			if (!FileTools.exist(filePath)){
				console.log("file not exist:",filePath);
				return;
			};
			var fileJson;
			fileJson=FileManager.readJSONFile(filePath);
			if (fileJson){
				this.jsonDic[path]=fileJson;
				}else{
				console.log("parse file fail:",filePath);
			}
		}

		LayaAirJsonMergeTool.ExeSign="LayaAirJsonMergeTool";
		return LayaAirJsonMergeTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class nodetool.NodeJSTools
	var NodeJSTools=(function(){
		function NodeJSTools(){}
		__class(NodeJSTools,'nodetool.NodeJSTools');
		NodeJSTools.require=function(str){
			return require(str);;
		}

		NodeJSTools.getArgv=function(){
			var argv;
			argv=process.argv;;
			console.log("argv:",argv);
			return argv;
		}

		NodeJSTools.parseArgToObj=function(args,start,target){
			(start===void 0)&& (start=0);
			var i=0,len=0;
			len=args.length;
			var tParam;
			var pArr;
			for (i=start;i < len;i++){
				tParam=args[i];
				if (tParam.indexOf("=")> 0){
					pArr=tParam.split("=");
					if (target[pArr[0]] && typeof(target[pArr[0]])=="number"){
						pArr[1]=Sys.mParseFloat(pArr[1]);
					}
					console.log(pArr);
					target[pArr[0]]=pArr[1];
				}
			}
		}

		NodeJSTools.getMyPath=function(){
			return __dirname;
		}

		NodeJSTools.eval=function(codeStr){
			return eval(codeStr);
		}

		return NodeJSTools;
	})()


	/**
	*Config 用于配置一些全局参数。如需更改，请在初始化引擎之前设置。
	*/
	//class Config
	var Config=(function(){
		function Config(){};
		__class(Config,'Config');
		Config.WebGLTextCacheCount=500;
		Config.atlasEnable=false;
		Config.showCanvasMark=false;
		Config.animationInterval=50;
		Config.isAntialias=false;
		Config.isAlpha=false;
		Config.premultipliedAlpha=false;
		Config.isStencil=true;
		Config.preserveDrawingBuffer=false;
		return Config;
	})()


	/**
	*<code>EventDispatcher</code> 类是可调度事件的所有类的基类。
	*/
	//class laya.events.EventDispatcher
	var EventDispatcher=(function(){
		var EventHandler;
		function EventDispatcher(){
			this._events=null;
		}

		__class(EventDispatcher,'laya.events.EventDispatcher');
		var __proto=EventDispatcher.prototype;
		/**
		*检查 EventDispatcher 对象是否为特定事件类型注册了任何侦听器。
		*@param type 事件的类型。
		*@return 如果指定类型的侦听器已注册，则值为 true；否则，值为 false。
		*/
		__proto.hasListener=function(type){
			var listener=this._events && this._events[type];
			return !!listener;
		}

		/**
		*派发事件。
		*@param type 事件类型。
		*@param data 回调数据。
		*<b>注意：</b>如果是需要传递多个参数 p1,p2,p3,...可以使用数组结构如：[p1,p2,p3,...] ；如果需要回调单个参数 p 是一个数组，则需要使用结构如：[p]，其他的单个参数 p ，可以直接传入参数 p。
		*@return 此事件类型是否有侦听者，如果有侦听者则值为 true，否则值为 false。
		*/
		__proto.event=function(type,data){
			if (!this._events || !this._events[type])return false;
			var listeners=this._events[type];
			if (listeners.run){
				if (listeners.once)delete this._events[type];
				data !=null ? listeners.runWith(data):listeners.run();
				}else {
				for (var i=0,n=listeners.length;i < n;i++){
					var listener=listeners[i];
					if (listener){
						(data !=null)? listener.runWith(data):listener.run();
					}
					if (!listener || listener.once){
						listeners.splice(i,1);
						i--;
						n--;
					}
				}
				if (listeners.length===0 && this._events)delete this._events[type];
			}
			return true;
		}

		/**
		*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.on=function(type,caller,listener,args){
			return this._createListener(type,caller,listener,args,false);
		}

		/**
		*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知，此侦听事件响应一次后自动移除。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.once=function(type,caller,listener,args){
			return this._createListener(type,caller,listener,args,true);
		}

		/**@private */
		__proto._createListener=function(type,caller,listener,args,once,offBefore){
			(offBefore===void 0)&& (offBefore=true);
			offBefore && this.off(type,caller,listener,once);
			var handler=EventHandler.create(caller || this,listener,args,once);
			this._events || (this._events={});
			var events=this._events;
			if (!events[type])events[type]=handler;
			else {
				if (!events[type].run)events[type].push(handler);
				else events[type]=[events[type],handler];
			}
			return this;
		}

		/**
		*从 EventDispatcher 对象中删除侦听器。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param onceOnly 如果值为 true ,则只移除通过 once 方法添加的侦听器。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.off=function(type,caller,listener,onceOnly){
			(onceOnly===void 0)&& (onceOnly=false);
			if (!this._events || !this._events[type])return this;
			var listeners=this._events[type];
			if (listener !=null){
				if (listeners.run){
					if ((!caller || listeners.caller===caller)&& listeners.method===listener && (!onceOnly || listeners.once)){
						delete this._events[type];
						listeners.recover();
					}
					}else {
					var count=0;
					for (var i=0,n=listeners.length;i < n;i++){
						var item=listeners[i];
						if (item && (!caller || item.caller===caller)&& item.method===listener && (!onceOnly || item.once)){
							count++;
							listeners[i]=null;
							item.recover();
						}
					}
					if (count===n)delete this._events[type];
				}
			}
			return this;
		}

		/**
		*从 EventDispatcher 对象中删除指定事件类型的所有侦听器。
		*@param type 事件类型，如果值为 null，则移除本对象所有类型的侦听器。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.offAll=function(type){
			var events=this._events;
			if (!events)return this;
			if (type){
				this._recoverHandlers(events[type]);
				delete events[type];
				}else {
				for (var name in events){
					this._recoverHandlers(events[name]);
				}
				this._events=null;
			}
			return this;
		}

		__proto._recoverHandlers=function(arr){
			if (!arr)return;
			if (arr.run){
				arr.recover();
				}else {
				for (var i=arr.length-1;i >-1;i--){
					if (arr[i]){
						arr[i].recover();
						arr[i]=null;
					}
				}
			}
		}

		/**
		*检测指定事件类型是否是鼠标事件。
		*@param type 事件的类型。
		*@return 如果是鼠标事件，则值为 true;否则，值为 false。
		*/
		__proto.isMouseEvent=function(type){
			return EventDispatcher.MOUSE_EVENTS[type];
		}

		EventDispatcher.MOUSE_EVENTS={"rightmousedown":true,"rightmouseup":true,"rightclick":true,"mousedown":true,"mouseup":true,"mousemove":true,"mouseover":true,"mouseout":true,"click":true,"doubleclick":true};
		EventDispatcher.__init$=function(){
			Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:false,writable:true});
			/**@private */
			//class EventHandler extends laya.utils.Handler
			EventHandler=(function(_super){
				function EventHandler(caller,method,args,once){
					EventHandler.__super.call(this,caller,method,args,once);
				}
				__class(EventHandler,'',_super);
				var __proto=EventHandler.prototype;
				__proto.recover=function(){
					if (this._id > 0){
						this._id=0;
						EventHandler._pool.push(this.clear());
					}
				}
				EventHandler.create=function(caller,method,args,once){
					(once===void 0)&& (once=true);
					if (EventHandler._pool.length)return EventHandler._pool.pop().setTo(caller,method,args,once);
					return new EventHandler(caller,method,args,once);
				}
				EventHandler._pool=[];
				return EventHandler;
			})(Handler)
		}

		return EventDispatcher;
	})()


	/**
	*<p><code>Handler</code> 是事件处理器类。</p>
	*<p>推荐使用 Handler.create()方法从对象池创建，减少对象创建消耗。</p>
	*<p><b>注意：</b>由于鼠标事件也用本对象池，不正确的回收及调用，可能会影响鼠标事件的执行。</p>
	*/
	//class laya.utils.Handler
	var Handler=(function(){
		function Handler(caller,method,args,once){
			//this.caller=null;
			//this.method=null;
			//this.args=null;
			this.once=false;
			this._id=0;
			(once===void 0)&& (once=false);
			this.setTo(caller,method,args,once);
		}

		__class(Handler,'laya.utils.Handler');
		var __proto=Handler.prototype;
		/**
		*设置此对象的指定属性值。
		*@param caller 执行域(this)。
		*@param method 回调方法。
		*@param args 携带的参数。
		*@param once 是否只执行一次，如果为true，执行后执行recover()进行回收。
		*@return 返回 handler 本身。
		*/
		__proto.setTo=function(caller,method,args,once){
			this._id=Handler._gid++;
			this.caller=caller;
			this.method=method;
			this.args=args;
			this.once=once;
			return this;
		}

		/**
		*执行处理器。
		*/
		__proto.run=function(){
			if (this.method==null)return null;
			var id=this._id;
			var result=this.method.apply(this.caller,this.args);
			this._id===id && this.once && this.recover();
			return result;
		}

		/**
		*执行处理器，携带额外数据。
		*@param data 附加的回调数据，可以是单数据或者Array(作为多参)。
		*/
		__proto.runWith=function(data){
			if (this.method==null)return null;
			var id=this._id;
			if (data==null)
				var result=this.method.apply(this.caller,this.args);
			else if (!this.args && !data.unshift)result=this.method.call(this.caller,data);
			else if (this.args)result=this.method.apply(this.caller,this.args.concat(data));
			else result=this.method.apply(this.caller,data);
			this._id===id && this.once && this.recover();
			return result;
		}

		/**
		*清理对象引用。
		*/
		__proto.clear=function(){
			this.caller=null;
			this.method=null;
			this.args=null;
			return this;
		}

		/**
		*清理并回收到 Handler 对象池内。
		*/
		__proto.recover=function(){
			if (this._id > 0){
				this._id=0;
				Handler._pool.push(this.clear());
			}
		}

		Handler.create=function(caller,method,args,once){
			(once===void 0)&& (once=true);
			if (Handler._pool.length)return Handler._pool.pop().setTo(caller,method,args,once);
			return new Handler(caller,method,args,once);
		}

		Handler._pool=[];
		Handler._gid=1;
		return Handler;
	})()


	/**
	*<code>BitmapFont</code> 是位图字体类，用于定义位图字体信息。
	*/
	//class laya.display.BitmapFont
	var BitmapFont=(function(){
		function BitmapFont(){
			this._texture=null;
			this._fontCharDic={};
			this._fontWidthMap={};
			this._complete=null;
			this._path=null;
			this._maxWidth=0;
			this._spaceWidth=10;
			this._padding=null;
			this.fontSize=12;
			this.autoScaleSize=false;
			this.letterSpacing=0;
		}

		__class(BitmapFont,'laya.display.BitmapFont');
		var __proto=BitmapFont.prototype;
		/**
		*通过指定位图字体文件路径，加载位图字体文件。
		*@param path 位图字体文件的路径。
		*@param complete 加载完成的回调，通知上层字体文件已经完成加载并解析。
		*/
		__proto.loadFont=function(path,complete){
			this._path=path;
			this._complete=complete;
			Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded));
		}

		/**
		*@private
		*/
		__proto.onLoaded=function(){
			this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png")));
			this._complete && this._complete.run();
		}

		/**
		*解析字体文件。
		*@param xml 字体文件XML。
		*@param texture 字体的纹理。
		*/
		__proto.parseFont=function(xml,texture){
			if (xml==null || texture==null)return;
			this._texture=texture;
			var tX=0;
			var tScale=1;
			var tInfo=xml.getElementsByTagName("info");
			this.fontSize=parseInt(tInfo[0].attributes["size"].nodeValue);
			var tPadding=tInfo[0].attributes["padding"].nodeValue;
			var tPaddingArray=tPadding.split(",");
			this._padding=[parseInt(tPaddingArray[0]),parseInt(tPaddingArray[1]),parseInt(tPaddingArray[2]),parseInt(tPaddingArray[3])];
			var chars=xml.getElementsByTagName("char");
			var i=0;
			for (i=0;i < chars.length;i++){
				var tAttribute=chars[i].attributes;
				var tId=parseInt(tAttribute["id"].nodeValue);
				var xOffset=parseInt(tAttribute["xoffset"].nodeValue)/ tScale;
				var yOffset=parseInt(tAttribute["yoffset"].nodeValue)/ tScale;
				var xAdvance=parseInt(tAttribute["xadvance"].nodeValue)/ tScale;
				var region=new Rectangle();
				region.x=parseInt(tAttribute["x"].nodeValue);
				region.y=parseInt(tAttribute["y"].nodeValue);
				region.width=parseInt(tAttribute["width"].nodeValue);
				region.height=parseInt(tAttribute["height"].nodeValue);
				var tTexture=Texture.create(texture,region.x,region.y,region.width,region.height,xOffset,yOffset);
				this._maxWidth=Math.max(this._maxWidth,xAdvance+this.letterSpacing);
				this._fontCharDic[tId]=tTexture;
				this._fontWidthMap[tId]=xAdvance;
			}
		}

		/**
		*获取指定字符的字体纹理对象。
		*@param char 字符。
		*@return 指定的字体纹理对象。
		*/
		__proto.getCharTexture=function(char){
			return this._fontCharDic[char.charCodeAt(0)];
		}

		/**
		*销毁位图字体，调用Text.unregisterBitmapFont 时，默认会销毁。
		*/
		__proto.destroy=function(){
			if (this._texture){
				for (var p in this._fontCharDic){
					var tTexture=this._fontCharDic[p];
					if (tTexture)tTexture.destroy();
				}
				this._texture.destroy();
				this._fontCharDic=null;
				this._fontWidthMap=null;
				this._texture=null;
			}
		}

		/**
		*设置空格的宽（如果字体库有空格，这里就可以不用设置了）。
		*@param spaceWidth 宽度，单位为像素。
		*/
		__proto.setSpaceWidth=function(spaceWidth){
			this._spaceWidth=spaceWidth;
		}

		/**
		*获取指定字符的宽度。
		*@param char 字符。
		*@return 宽度。
		*/
		__proto.getCharWidth=function(char){
			var code=char.charCodeAt(0);
			if (this._fontWidthMap[code])return this._fontWidthMap[code]+this.letterSpacing;
			if (char==" ")return this._spaceWidth+this.letterSpacing;
			return 0;
		}

		/**
		*获取指定文本内容的宽度。
		*@param text 文本内容。
		*@return 宽度。
		*/
		__proto.getTextWidth=function(text){
			var tWidth=0;
			for (var i=0,n=text.length;i < n;i++){
				tWidth+=this.getCharWidth(text.charAt(i));
			}
			return tWidth;
		}

		/**
		*获取最大字符宽度。
		*/
		__proto.getMaxWidth=function(){
			return this._maxWidth;
		}

		/**
		*获取最大字符高度。
		*/
		__proto.getMaxHeight=function(){
			return this.fontSize;
		}

		/**
		*@private
		*将指定的文本绘制到指定的显示对象上。
		*/
		__proto.drawText=function(text,sprite,drawX,drawY,align,width){
			var tWidth=this.getTextWidth(text);
			var tTexture;
			var dx=0;
			align==="center" && (dx=(width-tWidth)/ 2);
			align==="right" && (dx=(width-tWidth));
			var tX=0;
			for (var i=0,n=text.length;i < n;i++){
				tTexture=this.getCharTexture(text.charAt(i));
				if (tTexture){
					sprite.graphics.drawTexture(tTexture,drawX+tX+dx,drawY);
					tX+=this.getCharWidth(text.charAt(i));
				}
			}
		}

		return BitmapFont;
	})()


	/**
	*@private
	*<code>Style</code> 类是元素样式定义类。
	*/
	//class laya.display.css.Style
	var Style=(function(){
		function Style(){
			this.alpha=1;
			this.visible=true;
			this.scrollRect=null;
			this.blendMode=null;
			this._type=0;
			this._tf=Style._TF_EMPTY;
		}

		__class(Style,'laya.display.css.Style');
		var __proto=Style.prototype;
		__proto.getTransform=function(){
			return this._tf;
		}

		__proto.setTransform=function(value){
			this._tf=value==='none' || !value ? Style._TF_EMPTY :value;
		}

		__proto.setTranslateX=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.translateX=value;
		}

		__proto.setTranslateY=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.translateY=value;
		}

		__proto.setScaleX=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.scaleX=value;
		}

		__proto.setScale=function(x,y){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.scaleX=x;
			this._tf.scaleY=y;
		}

		__proto.setScaleY=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.scaleY=value;
		}

		__proto.setRotate=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.rotate=value;
		}

		__proto.setSkewX=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.skewX=value;
		}

		__proto.setSkewY=function(value){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.skewY=value;
		}

		/**销毁此对象。*/
		__proto.destroy=function(){
			this.scrollRect=null;
		}

		/**@private */
		__proto.render=function(sprite,context,x,y){}
		/**@private */
		__proto.getCSSStyle=function(){
			return CSSStyle.EMPTY;
		}

		/**@private */
		__proto._enableLayout=function(){
			return false;
		}

		/**X 轴缩放值。*/
		__getset(0,__proto,'scaleX',function(){
			return this._tf.scaleX;
			},function(value){
			this.setScaleX(value);
		});

		/**元素应用的 2D 或 3D 转换的值。该属性允许我们对元素进行旋转、缩放、移动或倾斜。*/
		__getset(0,__proto,'transform',function(){
			return this.getTransform();
			},function(value){
			this.setTransform(value);
		});

		/**定义转换，只是用 X 轴的值。*/
		__getset(0,__proto,'translateX',function(){
			return this._tf.translateX;
			},function(value){
			this.setTranslateX(value);
		});

		/**定义转换，只是用 Y 轴的值。*/
		__getset(0,__proto,'translateY',function(){
			return this._tf.translateY;
			},function(value){
			this.setTranslateY(value);
		});

		/**Y 轴缩放值。*/
		__getset(0,__proto,'scaleY',function(){
			return this._tf.scaleY;
			},function(value){
			this.setScaleY(value);
		});

		/**表示元素是否显示为块级元素。*/
		__getset(0,__proto,'block',function(){
			return (this._type & 0x1)!=0;
		});

		/**定义沿着 Y 轴的 2D 倾斜转换。*/
		__getset(0,__proto,'skewY',function(){
			return this._tf.skewY;
			},function(value){
			this.setSkewY(value);
		});

		/**定义旋转角度。*/
		__getset(0,__proto,'rotate',function(){
			return this._tf.rotate;
			},function(value){
			this.setRotate(value);
		});

		/**定义沿着 X 轴的 2D 倾斜转换。*/
		__getset(0,__proto,'skewX',function(){
			return this._tf.skewX;
			},function(value){
			this.setSkewX(value);
		});

		/**表示元素的左内边距。*/
		__getset(0,__proto,'paddingLeft',function(){
			return 0;
		});

		/**表示元素的上内边距。*/
		__getset(0,__proto,'paddingTop',function(){
			return 0;
		});

		/**是否为绝对定位。*/
		__getset(0,__proto,'absolute',function(){
			return true;
		});

		Style.__init__=function(){
			Style._TF_EMPTY=new TransformInfo();
			Style.EMPTY=new Style();
		}

		Style.EMPTY=null
		Style._TF_EMPTY=null
		return Style;
	})()


	/**
	*@private
	*<code>Font</code> 类是字体显示定义类。
	*/
	//class laya.display.css.Font
	var Font=(function(){
		function Font(src){
			this._type=0;
			this._weight=0;
			this._decoration=null;
			this._text=null;
			this.indent=0;
			this._color=Color.create(Font.defaultColor);
			this.family=Font.defaultFamily;
			this.stroke=Font._STROKE;
			this.size=Font.defaultSize;
			src && src!==Font.EMPTY && src.copyTo(this);
		}

		__class(Font,'laya.display.css.Font');
		var __proto=Font.prototype;
		/**
		*字体样式字符串。
		*/
		__proto.set=function(value){
			this._text=null;
			var strs=value.split(' ');
			for (var i=0,n=strs.length;i < n;i++){
				var str=strs[i];
				switch (str){
					case 'italic':
						this.italic=true;
						continue ;
					case 'bold':
						this.bold=true;
						continue ;
					}
				if (str.indexOf('px')> 0){
					this.size=parseInt(str);
					this.family=strs[i+1];
					i++;
					continue ;
				}
			}
		}

		/**
		*返回字体样式字符串。
		*@return 字体样式字符串。
		*/
		__proto.toString=function(){
			this._text=""
			this.italic && (this._text+="italic ");
			this.bold && (this._text+="bold ");
			return this._text+=this.size+"px "+this.family;
		}

		/**
		*将当前的属性值复制到传入的 <code>Font</code> 对象。
		*@param dec 一个 Font 对象。
		*/
		__proto.copyTo=function(dec){
			dec._type=this._type;
			dec._text=this._text;
			dec._weight=this._weight;
			dec._color=this._color;
			dec.family=this.family;
			dec.stroke=this.stroke !=Font._STROKE ? this.stroke.slice():Font._STROKE;
			dec.indent=this.indent;
			dec.size=this.size;
		}

		/**
		*表示是否为密码格式。
		*/
		__getset(0,__proto,'password',function(){
			return (this._type & 0x400)!==0;
			},function(value){
			value ? (this._type |=0x400):(this._type &=~0x400);
		});

		/**
		*表示颜色字符串。
		*/
		__getset(0,__proto,'color',function(){
			return this._color.strColor;
			},function(value){
			this._color=Color.create(value);
		});

		/**
		*表示是否为斜体。
		*/
		__getset(0,__proto,'italic',function(){
			return (this._type & 0x200)!==0;
			},function(value){
			value ? (this._type |=0x200):(this._type &=~0x200);
		});

		/**
		*表示是否为粗体。
		*/
		__getset(0,__proto,'bold',function(){
			return (this._type & 0x800)!==0;
			},function(value){
			value ? (this._type |=0x800):(this._type &=~0x800);
		});

		/**
		*文本的粗细。
		*/
		__getset(0,__proto,'weight',function(){
			return ""+this._weight;
			},function(value){
			var weight=0;
			switch (value){
				case 'normal':
					break ;
				case 'bold':
					this.bold=true;
					weight=700;
					break ;
				case 'bolder':
					weight=800;
					break ;
				case 'lighter':
					weight=100;
					break ;
				default :
					weight=parseInt(value);
				}
			this._weight=weight;
			this._text=null;
		});

		/**
		*规定添加到文本的修饰。
		*/
		__getset(0,__proto,'decoration',function(){
			return this._decoration ? this._decoration.value :"none";
			},function(value){
			var strs=value.split(' ');
			this._decoration || (this._decoration={});
			switch (strs[0]){
				case '_':
					this._decoration.type='underline'
					break ;
				case '-':
					this._decoration.type='line-through'
					break ;
				case 'overline':
					this._decoration.type='overline'
					break ;
				default :
					this._decoration.type=strs[0];
				}
			strs[1] && (this._decoration.color=Color.create(strs));
			this._decoration.value=value;
		});

		Font.__init__=function(){
			Font.EMPTY=new Font(null);
		}

		Font.EMPTY=null
		Font.defaultColor="#000000";
		Font.defaultSize=12;
		Font.defaultFamily="Arial";
		Font.defaultFont="12px Arial";
		Font._STROKE=[0,"#000000"];
		Font._ITALIC=0x200;
		Font._PASSWORD=0x400;
		Font._BOLD=0x800;
		return Font;
	})()


	/**
	*@private
	*/
	//class laya.display.css.TransformInfo
	var TransformInfo=(function(){
		function TransformInfo(){
			this.translateX=0;
			this.translateY=0;
			this.scaleX=1;
			this.scaleY=1;
			this.rotate=0;
			this.skewX=0;
			this.skewY=0;
		}

		__class(TransformInfo,'laya.display.css.TransformInfo');
		return TransformInfo;
	})()


	/**
	*<code>Graphics</code> 类用于创建绘图显示对象。Graphics可以同时绘制多个位图或者矢量图，还可以结合save，restore，transform，scale，rotate，translate，alpha等指令对绘图效果进行变化。
	*Graphics以命令流方式存储，可以通过cmds属性访问所有命令流。Graphics是比Sprite更轻量级的对象，合理使用能提高应用性能(比如把大量的节点绘图改为一个节点的Graphics命令集合，能减少大量节点创建消耗)。
	*@see laya.display.Sprite#graphics
	*/
	//class laya.display.Graphics
	var Graphics=(function(){
		function Graphics(){
			//this._sp=null;
			this._one=null;
			this._cmds=null;
			//this._temp=null;
			//this._bounds=null;
			//this._rstBoundPoints=null;
			//this._vectorgraphArray=null;
			this._render=this._renderEmpty;
			if (Render.isConchNode){
				this._nativeObj=new _conchGraphics();;
				this.id=this._nativeObj.conchID;;
			}
		}

		__class(Graphics,'laya.display.Graphics');
		var __proto=Graphics.prototype;
		/**
		*<p>销毁此对象。</p>
		*/
		__proto.destroy=function(){
			this.clear();
			this._temp=null;
			this._bounds=null;
			this._rstBoundPoints=null;
			this._vectorgraphArray=null;
			this._sp && (this._sp._renderType=0);
			this._sp=null;
		}

		/**
		*<p>清空绘制命令。</p>
		*/
		__proto.clear=function(){
			this._one=null;
			this._render=this._renderEmpty;
			this._cmds=null;
			this._temp && (this._temp.length=0);
			this._sp && (this._sp._renderType &=~0x01);
			this._sp && (this._sp._renderType &=~0x200);
			this._repaint();
			if (this._vectorgraphArray){
				for (var i=0,n=this._vectorgraphArray.length;i < n;i++){
					VectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[i]);
				}
				this._vectorgraphArray.length=0;
			}
		}

		/**
		*@private
		*重绘此对象。
		*/
		__proto._repaint=function(){
			this._temp && (this._temp.length=0);
			this._sp && this._sp.repaint();
		}

		/**@private */
		__proto._isOnlyOne=function(){
			return !this._cmds || this._cmds.length===0;
		}

		/**
		*获取位置及宽高信息矩阵(比较耗，尽量少用)。
		*@return 位置与宽高组成的 一个 Rectangle 对象。
		*/
		__proto.getBounds=function(){
			if (!this._bounds || !this._temp || this._temp.length < 1){
				this._bounds=Rectangle._getWrapRec(this.getBoundPoints(),this._bounds)
			}
			return this._bounds;
		}

		/**
		*@private
		*获取端点列表。
		*/
		__proto.getBoundPoints=function(){
			if (!this._temp || this._temp.length < 1)
				this._temp=this._getCmdPoints();
			return this._rstBoundPoints=Utils.copyArray(this._rstBoundPoints,this._temp);
		}

		__proto._addCmd=function(a){
			this._cmds=this._cmds || [];
			a.callee=a.shift();
			this._cmds.push(a);
		}

		__proto._getCmdPoints=function(){
			var context=Render._context;
			var cmds=this._cmds;
			var rst;
			rst=this._temp || (this._temp=[]);
			rst.length=0;
			if (!cmds && this._one !=null){
				Graphics._tempCmds.length=0;
				Graphics._tempCmds.push(this._one);
				cmds=Graphics._tempCmds;
			}
			if (!cmds)
				return rst;
			var matrixs;
			matrixs=Graphics._tempMatrixArrays;
			matrixs.length=0;
			var tMatrix=Graphics._initMatrix;
			tMatrix.identity();
			var tempMatrix=Graphics._tempMatrix;
			var cmd;
			var tex
			for (var i=0,n=cmds.length;i < n;i++){
				cmd=cmds[i];
				switch (cmd.callee){
					case context._save:
					case 7:
						matrixs.push(tMatrix);
						tMatrix=tMatrix.clone();
						break ;
					case context._restore:
					case 8:
						tMatrix=matrixs.pop();
						break ;
					case context._scale:
					case 5:
						tempMatrix.identity();
						tempMatrix.translate(-cmd[2],-cmd[3]);
						tempMatrix.scale(cmd[0],cmd[1]);
						tempMatrix.translate(cmd[2],cmd[3]);
						this._switchMatrix(tMatrix,tempMatrix);
						break ;
					case context._rotate:
					case 3:
						tempMatrix.identity();
						tempMatrix.translate(-cmd[1],-cmd[2]);
						tempMatrix.rotate(cmd[0]);
						tempMatrix.translate(cmd[1],cmd[2]);
						this._switchMatrix(tMatrix,tempMatrix);
						break ;
					case context._translate:
					case 6:
						tempMatrix.identity();
						tempMatrix.translate(cmd[0],cmd[1]);
						this._switchMatrix(tMatrix,tempMatrix);
						break ;
					case context._transform:
					case 4:
						tempMatrix.identity();
						tempMatrix.translate(-cmd[1],-cmd[2]);
						tempMatrix.concat(cmd[0]);
						tempMatrix.translate(cmd[1],cmd[2]);
						this._switchMatrix(tMatrix,tempMatrix);
						break ;
					case 16:
					case 24:
						Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);
						break ;
					case 17:
						tMatrix.copyTo(tempMatrix);
						tempMatrix.concat(cmd[4]);
						Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tempMatrix);
						break ;
					case context._drawTexture:
						tex=cmd[0];
						var offX=tex.offsetX>0?tex.offsetX:0;
						var offY=tex.offsetY>0?tex.offsetY:0;
						if (cmd[3] && cmd[4]){
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,cmd[3]+tex.sourceWidth-tex.width,cmd[4]+tex.sourceHeight-tex.height),tMatrix);
							}else {
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,tex.width+tex.sourceWidth-tex.width,tex.height+tex.sourceHeight-tex.height),tMatrix);
						}
						break ;
					case context._fillTexture:
						if (cmd[3] && cmd[4]){
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix);
							}else {
							tex=cmd[0];
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],tex.width,tex.height),tMatrix);
						}
						break ;
					case context._drawTextureWithTransform:;
						var drawMatrix;
						if (cmd[5]){
							tMatrix.copyTo(tempMatrix);
							tempMatrix.concat(cmd[5]);
							drawMatrix=tempMatrix;
							}else {
							drawMatrix=tMatrix;
						}
						tex=cmd[0];
						offX=tex.offsetX>0?tex.offsetX:0;
						offY=tex.offsetY>0?tex.offsetY:0;
						if (cmd[3] && cmd[4]){
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,cmd[3]+tex.sourceWidth-tex.width,cmd[4]+tex.sourceHeight-tex.height),tMatrix);
							}else {
							Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,tex.width+tex.sourceWidth-tex.width,tex.height+tex.sourceHeight-tex.height),tMatrix);
						}
						break ;
					case context._drawRect:
					case 13:
						Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);
						break ;
					case context._drawCircle:
					case context._fillCircle:
					case 14:
						Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0]-cmd[2],cmd[1]-cmd[2],cmd[2]+cmd[2],cmd[2]+cmd[2]),tMatrix);
						break ;
					case context._drawLine:
					case 20:
						Graphics._tempPoints.length=0;
						var lineWidth=NaN;
						lineWidth=cmd[5] *0.5;
						if (cmd[0]==cmd[2]){
							Graphics._tempPoints.push(cmd[0]+lineWidth,cmd[1],cmd[2]+lineWidth,cmd[3],cmd[0]-lineWidth,cmd[1],cmd[2]-lineWidth,cmd[3]);
							}else if (cmd[1]==cmd[3]){
							Graphics._tempPoints.push(cmd[0],cmd[1]+lineWidth,cmd[2],cmd[3]+lineWidth,cmd[0],cmd[1]-lineWidth,cmd[2],cmd[3]-lineWidth);
							}else {
							Graphics._tempPoints.push(cmd[0],cmd[1],cmd[2],cmd[3]);
						}
						Graphics._addPointArrToRst(rst,Graphics._tempPoints,tMatrix);
						break ;
					case context._drawCurves:
					case 22:
						Graphics._addPointArrToRst(rst,Bezier.I.getBezierPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);
						break ;
					case context._drawPoly:
					case context._drawLines:
					case 18:
						Graphics._addPointArrToRst(rst,cmd[2],tMatrix,cmd[0],cmd[1]);
						break ;
					case context._drawPath:
					case 19:
						Graphics._addPointArrToRst(rst,this._getPathPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);
						break ;
					case context._drawPie:
					case 15:
						Graphics._addPointArrToRst(rst,this._getPiePoints(cmd[0],cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix);
						break ;
					}
			}
			if (rst.length > 200){
				rst=Utils.copyArray(rst,Rectangle._getWrapRec(rst)._getBoundPoints());
			}else if (rst.length > 8)
			rst=GrahamScan.scanPList(rst);
			return rst;
		}

		__proto._switchMatrix=function(tMatix,tempMatrix){
			tempMatrix.concat(tMatix);
			tempMatrix.copyTo(tMatix);
		}

		/**
		*绘制纹理。
		*@param tex 纹理。
		*@param x X 轴偏移量。
		*@param y Y 轴偏移量。
		*@param width 宽度。
		*@param height 高度。
		*@param m 矩阵信息。
		*/
		__proto.drawTexture=function(tex,x,y,width,height,m,alpha){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			(alpha===void 0)&& (alpha=1);
			if (!tex || alpha < 0.01)return;
			if (!width)width=tex.sourceWidth;
			if (!height)height=tex.sourceHeight;
			width=width-tex.sourceWidth+tex.width;
			height=height-tex.sourceHeight+tex.height;
			if (tex.loaded && (width <=0 || height <=0))return;
			x+=tex.offsetX;
			y+=tex.offsetY;
			this._sp && (this._sp._renderType |=0x200);
			var args=[tex,x,y,width,height,m,alpha];
			args.callee=(m || alpha !=1)? Render._context._drawTextureWithTransform :Render._context._drawTexture;
			if (this._one==null && !m && alpha==1){
				this._one=args;
				this._render=this._renderOneImg;
				}else {
				this._saveToCmd(args.callee,args);
			}
			if (!tex.loaded){
				tex.once("loaded",this,this._textureLoaded,[tex,args]);
			}
			this._repaint();
		}

		/**
		*@private 清理贴图并替换为最新的
		*@param tex
		*/
		__proto.cleanByTexture=function(tex,x,y,width,height){
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			if (!tex)return this.clear();
			if (this._one && this._render===this._renderOneImg){
				if (!width)width=tex.sourceWidth;
				if (!height)height=tex.sourceHeight;
				width=width-tex.sourceWidth+tex.width;
				height=height-tex.sourceHeight+tex.height;
				x+=tex.offsetX;
				y+=tex.offsetY;
				this._one[0]=tex;
				this._one[1]=x;
				this._one[2]=y;
				this._one[3]=width;
				this._one[4]=height;
				}else {
				this.clear();
				tex && this.drawTexture(tex,x,y,width,height);
			}
		}

		/**
		*批量绘制同样纹理。
		*@param tex 纹理。
		*@param pos 绘制次数和坐标。
		*/
		__proto.drawTextures=function(tex,pos){
			if (!tex)return;
			this._saveToCmd(Render._context._drawTextures,[tex,pos]);
		}

		/**
		*用texture填充
		*@param tex 纹理。
		*@param x X 轴偏移量。
		*@param y Y 轴偏移量。
		*@param width 宽度。
		*@param height 高度。
		*@param type 填充类型 repeat|repeat-x|repeat-y|no-repeat
		*@param offset 贴图纹理偏移
		*
		*/
		__proto.fillTexture=function(tex,x,y,width,height,type,offset){
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			(type===void 0)&& (type="repeat");
			if (!tex)return;
			var args=[tex,x,y,width,height,type,offset || Point.EMPTY,{}];
			if (!tex.loaded){
				tex.once("loaded",this,this._textureLoaded,[tex,args]);
			}
			this._saveToCmd(Render._context._fillTexture,args);
		}

		__proto._textureLoaded=function(tex,param){
			param[3]=param[3] || tex.width;
			param[4]=param[4] || tex.height;
			this._repaint();
		}

		/**
		*@private
		*保存到命令流。
		*/
		__proto._saveToCmd=function(fun,args){
			this._sp && (this._sp._renderType |=0x200);
			if (this._one==null){
				this._one=args;
				this._render=this._renderOne;
				}else {
				this._sp && (this._sp._renderType &=~0x01);
				this._render=this._renderAll;
				(this._cmds || (this._cmds=[])).length===0 && this._cmds.push(this._one);
				this._cmds.push(args);
			}
			args.callee=fun;
			this._temp && (this._temp.length=0);
			this._repaint();
			return args;
		}

		/**
		*设置剪裁区域，超出剪裁区域的坐标不显示。
		*@param x X 轴偏移量。
		*@param y Y 轴偏移量。
		*@param width 宽度。
		*@param height 高度。
		*/
		__proto.clipRect=function(x,y,width,height){
			this._saveToCmd(Render._context._clipRect,[x,y,width,height]);
		}

		/**
		*在画布上绘制文本。
		*@param text 在画布上输出的文本。
		*@param x 开始绘制文本的 x 坐标位置（相对于画布）。
		*@param y 开始绘制文本的 y 坐标位置（相对于画布）。
		*@param font 定义字号和字体，比如"20px Arial"。
		*@param color 定义文本颜色，比如"#ff0000"。
		*@param textAlign 文本对齐方式，可选值："left"，"center"，"right"。
		*/
		__proto.fillText=function(text,x,y,font,color,textAlign){
			this._saveToCmd(Render._context._fillText,[text,x,y,font || Font.defaultFont,color,textAlign]);
		}

		/**
		*在画布上绘制“被填充且镶边的”文本。
		*@param text 在画布上输出的文本。
		*@param x 开始绘制文本的 x 坐标位置（相对于画布）。
		*@param y 开始绘制文本的 y 坐标位置（相对于画布）。
		*@param font 定义字体和字号，比如"20px Arial"。
		*@param fillColor 定义文本颜色，比如"#ff0000"。
		*@param borderColor 定义镶边文本颜色。
		*@param lineWidth 镶边线条宽度。
		*@param textAlign 文本对齐方式，可选值："left"，"center"，"right"。
		*/
		__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){
			this._saveToCmd(Render._context._fillBorderText,[text,x,y,font || Font.defaultFont,fillColor,borderColor,lineWidth,textAlign]);
		}

		/**
		*在画布上绘制文本（没有填色）。文本的默认颜色是黑色。
		*@param text 在画布上输出的文本。
		*@param x 开始绘制文本的 x 坐标位置（相对于画布）。
		*@param y 开始绘制文本的 y 坐标位置（相对于画布）。
		*@param font 定义字体和字号，比如"20px Arial"。
		*@param color 定义文本颜色，比如"#ff0000"。
		*@param lineWidth 线条宽度。
		*@param textAlign 文本对齐方式，可选值："left"，"center"，"right"。
		*/
		__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){
			this._saveToCmd(Render._context._strokeText,[text,x,y,font || Font.defaultFont,color,lineWidth,textAlign]);
		}

		/**
		*设置透明度。
		*@param value 透明度。
		*/
		__proto.alpha=function(value){
			this._saveToCmd(Render._context._alpha,[value]);
		}

		/**
		*替换绘图的当前转换矩阵。
		*@param mat 矩阵。
		*@param pivotX 水平方向轴心点坐标。
		*@param pivotY 垂直方向轴心点坐标。
		*/
		__proto.transform=function(matrix,pivotX,pivotY){
			(pivotX===void 0)&& (pivotX=0);
			(pivotY===void 0)&& (pivotY=0);
			this._saveToCmd(Render._context._transform,[matrix,pivotX,pivotY]);
		}

		/**
		*旋转当前绘图。(推荐使用transform，性能更高)
		*@param angle 旋转角度，以弧度计。
		*@param pivotX 水平方向轴心点坐标。
		*@param pivotY 垂直方向轴心点坐标。
		*/
		__proto.rotate=function(angle,pivotX,pivotY){
			(pivotX===void 0)&& (pivotX=0);
			(pivotY===void 0)&& (pivotY=0);
			this._saveToCmd(Render._context._rotate,[angle,pivotX,pivotY]);
		}

		/**
		*缩放当前绘图至更大或更小。(推荐使用transform，性能更高)
		*@param scaleX 水平方向缩放值。
		*@param scaleY 垂直方向缩放值。
		*@param pivotX 水平方向轴心点坐标。
		*@param pivotY 垂直方向轴心点坐标。
		*/
		__proto.scale=function(scaleX,scaleY,pivotX,pivotY){
			(pivotX===void 0)&& (pivotX=0);
			(pivotY===void 0)&& (pivotY=0);
			this._saveToCmd(Render._context._scale,[scaleX,scaleY,pivotX,pivotY]);
		}

		/**
		*重新映射画布上的 (0,0)位置。
		*@param x 添加到水平坐标（x）上的值。
		*@param y 添加到垂直坐标（y）上的值。
		*/
		__proto.translate=function(x,y){
			this._saveToCmd(Render._context._translate,[x,y]);
		}

		/**
		*保存当前环境的状态。
		*/
		__proto.save=function(){
			this._saveToCmd(Render._context._save,[]);
		}

		/**
		*返回之前保存过的路径状态和属性。
		*/
		__proto.restore=function(){
			this._saveToCmd(Render._context._restore,[]);
		}

		/**
		*@private
		*替换文本内容。
		*@param text 文本内容。
		*@return 替换成功则值为true，否则值为flase。
		*/
		__proto.replaceText=function(text){
			this._repaint();
			var cmds=this._cmds;
			if (!cmds){
				if (this._one && this._isTextCmd(this._one.callee)){
					if (this._one[0].toUpperCase)this._one[0]=text;
					else this._one[0].setText(text);
					return true;
				}
				}else {
				for (var i=cmds.length-1;i >-1;i--){
					if (this._isTextCmd(cmds[i].callee)){
						if (cmds[i][0].toUpperCase)cmds[i][0]=text;
						else cmds[i][0].setText(text);
						return true;
					}
				}
			}
			return false;
		}

		/**@private */
		__proto._isTextCmd=function(fun){
			return fun===Render._context._fillText || fun===Render._context._fillBorderText || fun===Render._context._strokeText;
		}

		/**
		*@private
		*替换文本颜色。
		*@param color 颜色。
		*/
		__proto.replaceTextColor=function(color){
			this._repaint();
			var cmds=this._cmds;
			if (!cmds){
				if (this._one && this._isTextCmd(this._one.callee)){
					this._one[4]=color;
					if (!this._one[0].toUpperCase)this._one[0].changed=true;
				}
				}else {
				for (var i=cmds.length-1;i >-1;i--){
					if (this._isTextCmd(cmds[i].callee)){
						cmds[i][4]=color;
						if (!cmds[i][0].toUpperCase)cmds[i][0].changed=true;
					}
				}
			}
		}

		/**
		*加载并显示一个图片。
		*@param url 图片地址。
		*@param x 显示图片的x位置。
		*@param y 显示图片的y位置。
		*@param width 显示图片的宽度，设置为0表示使用图片默认宽度。
		*@param height 显示图片的高度，设置为0表示使用图片默认高度。
		*@param complete 加载完成回调。
		*/
		__proto.loadImage=function(url,x,y,width,height,complete){
			var _$this=this;
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			var tex=Loader.getRes(url);
			if (tex)onloaded(tex);
			else Laya.loader.load(url,Handler.create(null,onloaded),null,"image");
			function onloaded (tex){
				if (tex){
					_$this.drawTexture(tex,x,y,width,height);
					if (complete !=null)complete.call(_$this._sp,tex);
				}
			}
		}

		/**
		*@private
		*/
		__proto._renderEmpty=function(sprite,context,x,y){}
		/**
		*@private
		*/
		__proto._renderAll=function(sprite,context,x,y){
			var cmds=this._cmds,cmd;
			for (var i=0,n=cmds.length;i < n;i++){
				(cmd=cmds[i]).callee.call(context,x,y,cmd);
			}
		}

		/**
		*@private
		*/
		__proto._renderOne=function(sprite,context,x,y){
			this._one.callee.call(context,x,y,this._one);
		}

		/**
		*@private
		*/
		__proto._renderOneImg=function(sprite,context,x,y){
			this._one.callee.call(context,x,y,this._one);
			if (sprite._renderType!==2305){
				sprite._renderType |=0x01;
			}
		}

		/**
		*绘制一条线。
		*@param fromX X 轴开始位置。
		*@param fromY Y 轴开始位置。
		*@param toX X 轴结束位置。
		*@param toY Y 轴结束位置。
		*@param lineColor 颜色。
		*@param lineWidth 线条宽度。
		*/
		__proto.drawLine=function(fromX,fromY,toX,toY,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var tId=0;
			if (Render.isWebGL){
				tId=VectorGraphManager.getInstance().getId();
				if (this._vectorgraphArray==null)this._vectorgraphArray=[];
				this._vectorgraphArray.push(tId);
			};
			var offset=lineWidth % 2===0 ? 0 :0.5;
			var arr=[fromX+offset,fromY+offset,toX+offset,toY+offset,lineColor,lineWidth,tId];
			this._saveToCmd(Render._context._drawLine,arr);
		}

		/**
		*绘制一系列线段。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param points 线段的点集合。格式:[x1,y1,x2,y2,x3,y3...]。
		*@param lineColor 线段颜色，或者填充绘图的渐变对象。
		*@param lineWidth 线段宽度。
		*/
		__proto.drawLines=function(x,y,points,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var tId=0;
			if (Render.isWebGL){
				tId=VectorGraphManager.getInstance().getId();
				if (this._vectorgraphArray==null)this._vectorgraphArray=[];
				this._vectorgraphArray.push(tId);
			};
			var offset=lineWidth % 2===0 ? 0 :0.5;
			var arr=[x+offset,y+offset,points,lineColor,lineWidth,tId];
			this._saveToCmd(Render._context._drawLines,arr);
		}

		/**
		*绘制一系列曲线。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param points 线段的点集合，格式[startx,starty,ctrx,ctry,startx,starty...]。
		*@param lineColor 线段颜色，或者填充绘图的渐变对象。
		*@param lineWidth 线段宽度。
		*/
		__proto.drawCurves=function(x,y,points,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var arr=[x,y,points,lineColor,lineWidth];
			this._saveToCmd(Render._context._drawCurves,arr);
		}

		/**
		*绘制矩形。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param width 矩形宽度。
		*@param height 矩形高度。
		*@param fillColor 填充颜色，或者填充绘图的渐变对象。
		*@param lineColor 边框颜色，或者填充绘图的渐变对象。
		*@param lineWidth 边框宽度。
		*/
		__proto.drawRect=function(x,y,width,height,fillColor,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var offset=lineColor ? lineWidth / 2 :0;
			var lineOffset=lineColor ? lineWidth :0;
			var arr=[x+offset,y+offset,width-lineOffset,height-lineOffset,fillColor,lineColor,lineWidth];
			this._saveToCmd(Render._context._drawRect,arr);
		}

		/**
		*绘制圆形。
		*@param x 圆点X 轴位置。
		*@param y 圆点Y 轴位置。
		*@param radius 半径。
		*@param fillColor 填充颜色，或者填充绘图的渐变对象。
		*@param lineColor 边框颜色，或者填充绘图的渐变对象。
		*@param lineWidth 边框宽度。
		*/
		__proto.drawCircle=function(x,y,radius,fillColor,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var offset=lineColor ? lineWidth / 2 :0;
			var tId=0;
			if (Render.isWebGL){
				tId=VectorGraphManager.getInstance().getId();
				if (this._vectorgraphArray==null)this._vectorgraphArray=[];
				this._vectorgraphArray.push(tId);
			};
			var arr=[x,y,radius-offset,fillColor,lineColor,lineWidth,tId];
			this._saveToCmd(Render._context._drawCircle,arr);
		}

		/**
		*绘制扇形。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param radius 扇形半径。
		*@param startAngle 开始角度。
		*@param endAngle 结束角度。
		*@param fillColor 填充颜色，或者填充绘图的渐变对象。
		*@param lineColor 边框颜色，或者填充绘图的渐变对象。
		*@param lineWidth 边框宽度。
		*/
		__proto.drawPie=function(x,y,radius,startAngle,endAngle,fillColor,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var offset=lineColor ? lineWidth / 2 :0;
			var lineOffset=lineColor ? lineWidth :0;
			var tId=0;
			if (Render.isWebGL){
				tId=VectorGraphManager.getInstance().getId();
				if (this._vectorgraphArray==null)this._vectorgraphArray=[];
				this._vectorgraphArray.push(tId);
			};
			var arr=[x+offset,y+offset,radius-lineOffset,startAngle,endAngle,fillColor,lineColor,lineWidth,tId];
			arr[3]=Utils.toRadian(startAngle);
			arr[4]=Utils.toRadian(endAngle);
			this._saveToCmd(Render._context._drawPie,arr);
		}

		__proto._getPiePoints=function(x,y,radius,startAngle,endAngle){
			var rst=Graphics._tempPoints;
			Graphics._tempPoints.length=0;
			rst.push(x,y);
			var dP=Math.PI / 10;
			var i=NaN;
			for (i=startAngle;i < endAngle;i+=dP){
				rst.push(x+radius *Math.cos(i),y+radius *Math.sin(i));
			}
			if (endAngle !=i){
				rst.push(x+radius *Math.cos(endAngle),y+radius *Math.sin(endAngle));
			}
			return rst;
		}

		/**
		*绘制多边形。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param points 多边形的点集合。
		*@param fillColor 填充颜色，或者填充绘图的渐变对象。
		*@param lineColor 边框颜色，或者填充绘图的渐变对象。
		*@param lineWidth 边框宽度。
		*/
		__proto.drawPoly=function(x,y,points,fillColor,lineColor,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var tId=0;
			if (Render.isWebGL){
				tId=VectorGraphManager.getInstance().getId();
				if (this._vectorgraphArray==null)this._vectorgraphArray=[];
				this._vectorgraphArray.push(tId);
				var tIsConvexPolygon=false;
				if (points.length > 6){
					tIsConvexPolygon=false;
					}else {
					tIsConvexPolygon=true;
				}
			};
			var offset=lineColor ? (lineWidth % 2===0 ? 0 :0.5):0;
			var arr=[x+offset,y+offset,points,fillColor,lineColor,lineWidth,tId,tIsConvexPolygon];
			this._saveToCmd(Render._context._drawPoly,arr);
		}

		__proto._getPathPoints=function(paths){
			var i=0,len=0;
			var rst=Graphics._tempPoints;
			rst.length=0;
			len=paths.length;
			var tCMD;
			for (i=0;i < len;i++){
				tCMD=paths[i];
				if (tCMD.length > 1){
					rst.push(tCMD[1],tCMD[2]);
					if (tCMD.length > 3){
						rst.push(tCMD[3],tCMD[4]);
					}
				}
			}
			return rst;
		}

		/**
		*绘制路径。
		*@param x 开始绘制的 X 轴位置。
		*@param y 开始绘制的 Y 轴位置。
		*@param paths 路径集合，路径支持以下格式：[["moveTo",x,y],["lineTo",x,y,x,y,x,y],["arcTo",x1,y1,x2,y2,r],["closePath"]]。
		*@param brush 刷子定义，支持以下设置{fillStyle}。
		*@param pen 画笔定义，支持以下设置{strokeStyle,lineWidth,lineJoin,lineCap,miterLimit}。
		*/
		__proto.drawPath=function(x,y,paths,brush,pen){
			var arr=[x,y,paths,brush,pen];
			this._saveToCmd(Render._context._drawPath,arr);
		}

		/**
		*@private
		*命令流。存储了所有绘制命令。
		*/
		__getset(0,__proto,'cmds',function(){
			return this._cmds;
			},function(value){
			this._sp && (this._sp._renderType |=0x200);
			this._cmds=value;
			this._render=this._renderAll;
			this._repaint();
		});

		Graphics.__init__=function(){
			if (Render.isConchNode){
				var from=laya.display.Graphics.prototype;
				var to=ConchGraphics.prototype;
				var list=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"];
				for (var i=0,len=list.length;i <=len;i++){
					var temp=list[i];
					from[temp]=to[temp];
				}
				from._saveToCmd=null;
				if (to.drawImageS){
					from.drawTextures=function (tex,pos){
						if (!tex)return;
						if (!(tex.loaded && tex.bitmap && tex.source)){
							return;
						};
						var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;
						this.drawImageS(tex.bitmap.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,tex.offsetX,tex.offsetY,tex.width,tex.height,pos);
					}
				}
				from.drawTexture=function (tex,x,y,width,height,m,alpha){
					(x===void 0)&& (x=0);
					(y===void 0)&& (y=0);
					(width===void 0)&& (width=0);
					(height===void 0)&& (height=0);
					(alpha===void 0)&& (alpha=1);
					if (!tex)return;
					if (!tex.loaded){
						tex.once("loaded",this,function(){
							this.drawTexture(tex,x,y,width,height,m);
						});
						return;
					}
					if (!(tex.loaded && tex.bitmap && tex.source)){
						return;
					}
					if (!width)width=tex.sourceWidth;
					if (!height)height=tex.sourceHeight;
					width=width-tex.sourceWidth+tex.width;
					height=height-tex.sourceHeight+tex.height;
					if (width <=0 || height <=0)return;
					x+=tex.offsetX;
					y+=tex.offsetY;
					var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;
					this.drawImageM(tex.bitmap.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x,y,width,height,m);
					this._repaint();
				}
				from.fillTexture=function (tex,x,y,width,height,type,offset){
					(width===void 0)&& (width=0);
					(height===void 0)&& (height=0);
					(type===void 0)&& (type="repeat");
					if (!tex)return;
					if (tex.loaded){
						var ctxi=Render._context.ctx;
						var w=tex.bitmap.width,h=tex.bitmap.height,uv=tex.uv;
						var pat;
						if (tex.uv !=Texture.DEF_UV){
							pat=ctxi.createPattern(tex.bitmap.source,type,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h);
							}else {
							pat=ctxi.createPattern(tex.bitmap.source,type);
						};
						var sX=0,sY=0;
						if (offset){
							x+=offset.x % tex.width;
							y+=offset.y % tex.height;
							sX-=offset.x % tex.width;
							sY-=offset.y % tex.height;
						}
						this._fillImage(pat,x,y,sX,sY,width,height);
					}
				}
			}
		}

		Graphics._addPointArrToRst=function(rst,points,matrix,dx,dy){
			(dx===void 0)&& (dx=0);
			(dy===void 0)&& (dy=0);
			var i=0,len=0;
			len=points.length;
			for (i=0;i < len;i+=2){
				Graphics._addPointToRst(rst,points[i]+dx,points[i+1]+dy,matrix);
			}
		}

		Graphics._addPointToRst=function(rst,x,y,matrix){
			var _tempPoint=Point.TEMP;
			_tempPoint.setTo(x ? x :0,y ? y :0);
			matrix.transformPoint(_tempPoint);
			rst.push(_tempPoint.x,_tempPoint.y);
		}

		Graphics._tempPoints=[];
		Graphics._tempMatrixArrays=[];
		Graphics._tempCmds=[];
		__static(Graphics,
		['_tempMatrix',function(){return this._tempMatrix=new Matrix();},'_initMatrix',function(){return this._initMatrix=new Matrix();}
		]);
		return Graphics;
	})()


	/**
	*<code>Event</code> 是事件类型的集合。
	*/
	//class laya.events.Event
	var Event=(function(){
		function Event(){
			//this.type=null;
			//this.nativeEvent=null;
			//this.target=null;
			//this.currentTarget=null;
			//this._stoped=false;
			//this.touchId=0;
			//this.keyCode=0;
			//this.delta=0;
		}

		__class(Event,'laya.events.Event');
		var __proto=Event.prototype;
		/**
		*设置事件数据。
		*@param type 事件类型。
		*@param currentTarget 事件目标触发对象。
		*@param target 事件当前冒泡对象。
		*@return 返回当前 Event 对象。
		*/
		__proto.setTo=function(type,currentTarget,target){
			this.type=type;
			this.currentTarget=currentTarget;
			this.target=target;
			return this;
		}

		/**
		*防止对事件流中当前节点的后续节点中的所有事件侦听器进行处理。
		*/
		__proto.stopPropagation=function(){
			this._stoped=true;
		}

		/**鼠标在 Stage 上的 Y 轴坐标*/
		__getset(0,__proto,'stageY',function(){
			return Laya.stage.mouseY;
		});

		/**
		*包含按下或释放的键的字符代码值。字符代码值为英文键盘值。
		*/
		__getset(0,__proto,'charCode',function(){
			return this.nativeEvent.charCode;
		});

		/**
		*触摸点列表。
		*/
		__getset(0,__proto,'touches',function(){
			var arr=this.nativeEvent.touches;
			if (arr){
				var stage=Laya.stage;
				for (var i=0,n=arr.length;i < n;i++){
					var e=arr[i];
					var point=Point.TEMP;
					point.setTo(e.clientX,e.clientY);
					stage._canvasTransform.invertTransformPoint(point);
					stage.transform.invertTransformPoint(point);
					e.stageX=point.x;
					e.stageY=point.y;
				}
			}
			return arr;
		});

		/**
		*表示键在键盘上的位置。这对于区分在键盘上多次出现的键非常有用。<br>
		*例如，您可以根据此属性的值来区分左 Shift 键和右 Shift 键：左 Shift 键的值为 KeyLocation.LEFT，右 Shift 键的值为 KeyLocation.RIGHT。另一个示例是区分标准键盘 (KeyLocation.STANDARD)与数字键盘 (KeyLocation.NUM_PAD)上按下的数字键。
		*/
		__getset(0,__proto,'keyLocation',function(){
			return this.nativeEvent.keyLocation;
		});

		/**
		*表示 Ctrl 键是处于活动状态 (true)还是非活动状态 (false)。
		*/
		__getset(0,__proto,'ctrlKey',function(){
			return this.nativeEvent.ctrlKey;
		});

		/**
		*表示 Alt 键是处于活动状态 (true)还是非活动状态 (false)。
		*/
		__getset(0,__proto,'altKey',function(){
			return this.nativeEvent.altKey;
		});

		/**
		*表示 Shift 键是处于活动状态 (true)还是非活动状态 (false)。
		*/
		__getset(0,__proto,'shiftKey',function(){
			return this.nativeEvent.shiftKey;
		});

		/**鼠标在 Stage 上的 X 轴坐标*/
		__getset(0,__proto,'stageX',function(){
			return Laya.stage.mouseX;
		});

		Event.EMPTY=new Event();
		Event.MOUSE_DOWN="mousedown";
		Event.MOUSE_UP="mouseup";
		Event.CLICK="click";
		Event.RIGHT_MOUSE_DOWN="rightmousedown";
		Event.RIGHT_MOUSE_UP="rightmouseup";
		Event.RIGHT_CLICK="rightclick";
		Event.MOUSE_MOVE="mousemove";
		Event.MOUSE_OVER="mouseover";
		Event.MOUSE_OUT="mouseout";
		Event.MOUSE_WHEEL="mousewheel";
		Event.ROLL_OVER="mouseover";
		Event.ROLL_OUT="mouseout";
		Event.DOUBLE_CLICK="doubleclick";
		Event.CHANGE="change";
		Event.CHANGED="changed";
		Event.RESIZE="resize";
		Event.ADDED="added";
		Event.REMOVED="removed";
		Event.DISPLAY="display";
		Event.UNDISPLAY="undisplay";
		Event.ERROR="error";
		Event.COMPLETE="complete";
		Event.LOADED="loaded";
		Event.PROGRESS="progress";
		Event.INPUT="input";
		Event.RENDER="render";
		Event.OPEN="open";
		Event.MESSAGE="message";
		Event.CLOSE="close";
		Event.KEY_DOWN="keydown";
		Event.KEY_PRESS="keypress";
		Event.KEY_UP="keyup";
		Event.FRAME="enterframe";
		Event.DRAG_START="dragstart";
		Event.DRAG_MOVE="dragmove";
		Event.DRAG_END="dragend";
		Event.ENTER="enter";
		Event.SELECT="select";
		Event.BLUR="blur";
		Event.FOCUS="focus";
		Event.VISIBILITY_CHANGE="visibilitychange";
		Event.FOCUS_CHANGE="focuschange";
		Event.PLAYED="played";
		Event.PAUSED="paused";
		Event.STOPPED="stopped";
		Event.START="start";
		Event.END="end";
		Event.ENABLE_CHANGED="enablechanged";
		Event.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged";
		Event.COMPONENT_ADDED="componentadded";
		Event.COMPONENT_REMOVED="componentremoved";
		Event.LAYER_CHANGED="layerchanged";
		Event.HIERARCHY_LOADED="hierarchyloaded";
		Event.RECOVERING="recovering";
		Event.RECOVERED="recovered";
		Event.RELEASED="released";
		Event.LINK="link";
		Event.LABEL="label";
		Event.FULL_SCREEN_CHANGE="fullscreenchange";
		Event.DEVICE_LOST="devicelost";
		Event.MESH_CHANGED="meshchanged";
		Event.MATERIAL_CHANGED="materialchanged";
		Event.RENDERQUEUE_CHANGED="renderqueuechanged";
		Event.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged";
		Event.ANIMATION_CHANGED="animationchanged";
		return Event;
	})()


	/**
	*<code>Keyboard</code> 类的属性是一些常数，这些常数表示控制游戏时最常用的键。
	*/
	//class laya.events.Keyboard
	var Keyboard=(function(){
		function Keyboard(){};
		__class(Keyboard,'laya.events.Keyboard');
		Keyboard.NUMBER_0=48;
		Keyboard.NUMBER_1=49;
		Keyboard.NUMBER_2=50;
		Keyboard.NUMBER_3=51;
		Keyboard.NUMBER_4=52;
		Keyboard.NUMBER_5=53;
		Keyboard.NUMBER_6=54;
		Keyboard.NUMBER_7=55;
		Keyboard.NUMBER_8=56;
		Keyboard.NUMBER_9=57;
		Keyboard.A=65;
		Keyboard.B=66;
		Keyboard.C=67;
		Keyboard.D=68;
		Keyboard.E=69;
		Keyboard.F=70;
		Keyboard.G=71;
		Keyboard.H=72;
		Keyboard.I=73;
		Keyboard.J=74;
		Keyboard.K=75;
		Keyboard.L=76;
		Keyboard.M=77;
		Keyboard.N=78;
		Keyboard.O=79;
		Keyboard.P=80;
		Keyboard.Q=81;
		Keyboard.R=82;
		Keyboard.S=83;
		Keyboard.T=84;
		Keyboard.U=85;
		Keyboard.V=86;
		Keyboard.W=87;
		Keyboard.X=88;
		Keyboard.Y=89;
		Keyboard.Z=90;
		Keyboard.F1=112;
		Keyboard.F2=113;
		Keyboard.F3=114;
		Keyboard.F4=115;
		Keyboard.F5=116;
		Keyboard.F6=117;
		Keyboard.F7=118;
		Keyboard.F8=119;
		Keyboard.F9=120;
		Keyboard.F10=121;
		Keyboard.F11=122;
		Keyboard.F12=123;
		Keyboard.F13=124;
		Keyboard.F14=125;
		Keyboard.F15=126;
		Keyboard.NUMPAD=21;
		Keyboard.NUMPAD_0=96;
		Keyboard.NUMPAD_1=97;
		Keyboard.NUMPAD_2=98;
		Keyboard.NUMPAD_3=99;
		Keyboard.NUMPAD_4=100;
		Keyboard.NUMPAD_5=101;
		Keyboard.NUMPAD_6=102;
		Keyboard.NUMPAD_7=103;
		Keyboard.NUMPAD_8=104;
		Keyboard.NUMPAD_9=105;
		Keyboard.NUMPAD_ADD=107;
		Keyboard.NUMPAD_DECIMAL=110;
		Keyboard.NUMPAD_DIVIDE=111;
		Keyboard.NUMPAD_ENTER=108;
		Keyboard.NUMPAD_MULTIPLY=106;
		Keyboard.NUMPAD_SUBTRACT=109;
		Keyboard.SEMICOLON=186;
		Keyboard.EQUAL=187;
		Keyboard.COMMA=188;
		Keyboard.MINUS=189;
		Keyboard.PERIOD=190;
		Keyboard.SLASH=191;
		Keyboard.BACKQUOTE=192;
		Keyboard.LEFTBRACKET=219;
		Keyboard.BACKSLASH=220;
		Keyboard.RIGHTBRACKET=221;
		Keyboard.QUOTE=222;
		Keyboard.ALTERNATE=18;
		Keyboard.BACKSPACE=8;
		Keyboard.CAPS_LOCK=20;
		Keyboard.COMMAND=15;
		Keyboard.CONTROL=17;
		Keyboard.DELETE=46;
		Keyboard.ENTER=13;
		Keyboard.ESCAPE=27;
		Keyboard.PAGE_UP=33;
		Keyboard.PAGE_DOWN=34;
		Keyboard.END=35;
		Keyboard.HOME=36;
		Keyboard.LEFT=37;
		Keyboard.UP=38;
		Keyboard.RIGHT=39;
		Keyboard.DOWN=40;
		Keyboard.SHIFT=16;
		Keyboard.SPACE=32;
		Keyboard.TAB=9;
		Keyboard.INSERT=45;
		return Keyboard;
	})()


	/**
	*<p><code>KeyBoardManager</code> 是键盘事件管理类。</p>
	*<p>该类从浏览器中接收键盘事件，并派发该事件。
	*派发事件时若 Stage.focus 为空则只从 Stage 上派发该事件，否则将从 Stage.focus 对象开始一直冒泡派发该事件。
	*所以在 Laya.stage 上监听键盘事件一定能够收到，如果在其他地方监听，则必须处在Stage.focus的冒泡链上才能收到该事件。</p>
	*<p>用户可以通过代码 Laya.stage.focus=someNode 的方式来设置focus对象。</p>
	*<p>用户可统一的根据事件对象中 e.keyCode 来判断按键类型，该属性兼容了不同浏览器的实现。</p>
	*/
	//class laya.events.KeyBoardManager
	var KeyBoardManager=(function(){
		function KeyBoardManager(){};
		__class(KeyBoardManager,'laya.events.KeyBoardManager');
		KeyBoardManager.__init__=function(){
			KeyBoardManager._addEvent("keydown");
			KeyBoardManager._addEvent("keypress");
			KeyBoardManager._addEvent("keyup");
		}

		KeyBoardManager._addEvent=function(type){
			Browser.document.addEventListener(type,function(e){
				laya.events.KeyBoardManager._dispatch(e,type);
			},true);
		}

		KeyBoardManager._dispatch=function(e,type){
			if (!KeyBoardManager.enabled)return;
			KeyBoardManager._event._stoped=false;
			KeyBoardManager._event.nativeEvent=e;
			KeyBoardManager._event.keyCode=e.keyCode || e.which || e.charCode;
			if (type==="keydown")KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=true;
			else if (type==="keyup")KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=null;
			var target=(Laya.stage.focus && (Laya.stage.focus.event !=null)&&Laya.stage.focus.displayedInStage)? Laya.stage.focus :Laya.stage;
			var ct=target;
			while (ct){
				ct.event(type,KeyBoardManager._event.setTo(type,ct,target));
				ct=ct.parent;
			}
		}

		KeyBoardManager.hasKeyDown=function(key){
			return KeyBoardManager._pressKeys[key];
		}

		KeyBoardManager._pressKeys={};
		KeyBoardManager.enabled=true;
		__static(KeyBoardManager,
		['_event',function(){return this._event=new Event();}
		]);
		return KeyBoardManager;
	})()


	/**
	*<code>MouseManager</code> 是鼠标、触摸交互管理器。
	*/
	//class laya.events.MouseManager
	var MouseManager=(function(){
		function MouseManager(){
			this.mouseX=0;
			this.mouseY=0;
			this.disableMouseEvent=false;
			this.mouseDownTime=0;
			this.mouseMoveAccuracy=2;
			this._stage=null;
			this._target=null;
			this._lastOvers=[];
			this._currOvers=[];
			this._lastClickTimer=0;
			this._lastMoveTimer=0;
			this._isDoubleClick=false;
			this._isLeftMouse=false;
			this._eventList=[];
			this._touchIDs={};
			this._id=1;
			this._event=new Event();
			this._matrix=new Matrix();
			this._point=new Point();
			this._rect=new Rectangle();
			this._prePoint=new Point();
		}

		__class(MouseManager,'laya.events.MouseManager');
		var __proto=MouseManager.prototype;
		/**
		*@private
		*初始化。
		*/
		__proto.__init__=function(stage,canvas){
			this._stage=stage;
			var _this=this;
			var list=this._eventList;
			canvas.oncontextmenu=function (e){
				if (MouseManager.enabled)return false;
			}
			canvas.addEventListener('mousedown',function(e){
				if (MouseManager.enabled){
					e.preventDefault();
					list.push(e);
					_this.mouseDownTime=Browser.now();
				}
			});
			canvas.addEventListener('mouseup',function(e){
				if (MouseManager.enabled){
					e.preventDefault();
					list.push(e);
					_this.mouseDownTime=-Browser.now();
				}
			},true);
			canvas.addEventListener('mousemove',function(e){
				if (MouseManager.enabled){
					e.preventDefault();
					var now=Browser.now();
					if (now-_this._lastMoveTimer < 10)return;
					_this._lastMoveTimer=now;
					list.push(e);
				}
			},true);
			canvas.addEventListener("mouseout",function(e){
				if (MouseManager.enabled)list.push(e);
			})
			canvas.addEventListener("mouseover",function(e){
				if (MouseManager.enabled)list.push(e);
			})
			canvas.addEventListener("touchstart",function(e){
				if (MouseManager.enabled){
					list.push(e);
					if (!Input.isInputting)e.preventDefault();
					_this.mouseDownTime=Browser.now();
				}
			});
			canvas.addEventListener("touchend",function(e){
				if (MouseManager.enabled){
					if (!Input.isInputting)e.preventDefault();
					list.push(e);
					_this.mouseDownTime=-Browser.now();
				}
			},true);
			canvas.addEventListener("touchmove",function(e){
				if (MouseManager.enabled){
					e.preventDefault();
					list.push(e);
				}
			},true);
			canvas.addEventListener('mousewheel',function(e){
				if (MouseManager.enabled)list.push(e);
			});
			canvas.addEventListener('DOMMouseScroll',function(e){
				if (MouseManager.enabled)list.push(e);
			});
		}

		__proto.initEvent=function(e,nativeEvent){
			var _this=this;
			_this._event._stoped=false;
			_this._event.nativeEvent=nativeEvent || e;
			_this._target=null;
			this._point.setTo(e.clientX,e.clientY);
			this._stage._canvasTransform.invertTransformPoint(this._point);
			_this.mouseX=this._point.x;
			_this.mouseY=this._point.y;
			_this._event.touchId=e.identifier || 0;
		}

		__proto.checkMouseWheel=function(e){
			this._event.delta=e.wheelDelta ? e.wheelDelta *0.025 :-e.detail;
			for (var i=0,n=this._lastOvers.length;i < n;i++){
				var ele=this._lastOvers[i];
				ele.event("mousewheel",this._event.setTo("mousewheel",ele,this._target));
			}
			this._stage.event("mousewheel",this._event.setTo("mousewheel",this._stage,this._target));
		}

		__proto.checkMouseOut=function(){
			if (this.disableMouseEvent)return;
			for (var i=0,n=this._lastOvers.length;i < n;i++){
				var ele=this._lastOvers[i];
				if (!ele.destroyed && this._currOvers.indexOf(ele)< 0){
					ele._set$P("$_MOUSEOVER",false);
					ele.event("mouseout",this._event.setTo("mouseout",ele,ele));
				}
			};
			var temp=this._lastOvers;
			this._lastOvers=this._currOvers;
			this._currOvers=temp;
			this._currOvers.length=0;
		}

		__proto.onMouseMove=function(ele){
			this.sendMouseMove(ele);
			this._event._stoped=false;
			this.sendMouseOver(this._target);
		}

		__proto.sendMouseMove=function(ele){
			ele.event("mousemove",this._event.setTo("mousemove",ele,this._target));
			!this._event._stoped && ele.parent && this.sendMouseMove(ele.parent);
		}

		__proto.sendMouseOver=function(ele){
			if (ele.parent || ele===this._stage){
				if (!ele._get$P("$_MOUSEOVER")){
					ele._set$P("$_MOUSEOVER",true);
					ele.event("mouseover",this._event.setTo("mouseover",ele,this._target));
				}
				this._currOvers.push(ele);
			}
			!this._event._stoped && ele.parent && this.sendMouseOver(ele.parent);
		}

		__proto.onMouseDown=function(ele){
			if (Input.isInputting && Laya.stage.focus && Laya.stage.focus["focus"] && !Laya.stage.focus.contains(this._target)){
				Laya.stage.focus["focus"]=false;
			}
			this._onMouseDown(ele);
		}

		__proto._onMouseDown=function(ele){
			if (this._isLeftMouse){
				ele._set$P("$_MOUSEDOWN",this._touchIDs[this._event.touchId]);
				ele.event("mousedown",this._event.setTo("mousedown",ele,this._target));
				}else {
				ele._set$P("$_RIGHTMOUSEDOWN",this._touchIDs[this._event.touchId]);
				ele.event("rightmousedown",this._event.setTo("rightmousedown",ele,this._target));
			}
			!this._event._stoped && ele.parent && this.onMouseDown(ele.parent);
		}

		__proto.onMouseUp=function(ele){
			var type=this._isLeftMouse ? "mouseup" :"rightmouseup";
			this.sendMouseUp(ele,type);
			this._event._stoped=false;
			this.sendClick(this._target,type);
		}

		__proto.sendMouseUp=function(ele,type){
			ele.event(type,this._event.setTo(type,ele,this._target));
			!this._event._stoped && ele.parent && this.sendMouseUp(ele.parent,type);
		}

		__proto.sendClick=function(ele,type){
			if (ele.destroyed)return;
			if (type==="mouseup" && ele._get$P("$_MOUSEDOWN")===this._touchIDs[this._event.touchId]){
				ele._set$P("$_MOUSEDOWN",-1);
				ele.event("click",this._event.setTo("click",ele,this._target));
				this._isDoubleClick && ele.event("doubleclick",this._event.setTo("doubleclick",ele,this._target));
				}else if (type==="rightmouseup" && ele._get$P("$_RIGHTMOUSEDOWN")===this._touchIDs[this._event.touchId]){
				ele._set$P("$_RIGHTMOUSEDOWN",-1);
				ele.event("rightclick",this._event.setTo("rightclick",ele,this._target));
			}
			!this._event._stoped && ele.parent && this.sendClick(ele.parent,type);
		}

		__proto.check=function(sp,mouseX,mouseY,callBack){
			this._point.setTo(mouseX,mouseY);
			sp.fromParentPoint(this._point);
			mouseX=this._point.x;
			mouseY=this._point.y;
			var scrollRect=sp.scrollRect;
			if (scrollRect){
				this._rect.setTo(scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height);
				var isHit=this._rect.contains(mouseX,mouseY);
				if (!isHit)return false;
			}
			if (!this.disableMouseEvent){
				var flag=false;
				if (sp.hitTestPrior && !sp.mouseThrough && !this.hitTest(sp,mouseX,mouseY)){
					return false;
				}
				for (var i=sp._childs.length-1;i >-1;i--){
					var child=sp._childs[i];
					if (!child.destroyed && child.mouseEnabled && child.visible){
						flag=this.check(child,mouseX ,mouseY ,callBack);
						if (flag)return true;
					}
				}
			}
			isHit=this.hitTest(sp,scrollRect ? mouseX-scrollRect.x :mouseX,scrollRect ? mouseY-scrollRect.y :mouseY);
			if (isHit){
				this._target=sp;
				callBack.call(this,sp);
				}else if (callBack===this.onMouseUp && sp===this._stage){
				this._target=this._stage;
				callBack.call(this,this._target);
			}
			return isHit;
		}

		__proto.hitTest=function(sp,mouseX,mouseY){
			var isHit=false;
			if ((sp.hitArea instanceof laya.utils.HitArea )){
				return sp.hitArea.isHit(mouseX,mouseY);
			}
			if (sp.width > 0 && sp.height > 0 || sp.mouseThrough || sp.hitArea){
				var hitRect=this._rect;
				if (!sp.mouseThrough){
					if (sp.hitArea)hitRect=sp.hitArea;
					else hitRect.setTo(0,0,sp.width,sp.height);
					isHit=hitRect.contains(mouseX,mouseY);
					}else {
					isHit=sp.getGraphicBounds().contains(mouseX,mouseY);
				}
			}
			return isHit;
		}

		/**
		*执行事件处理。
		*/
		__proto.runEvent=function(){
			var len=this._eventList.length;
			if (!len)return;
			var _this=this;
			var i=0;
			while (i < len){
				var evt=this._eventList[i];
				if (evt.type!=='mousemove')this._prePoint.x=this._prePoint.y=-1000000;
				switch (evt.type){
					case 'mousedown':
						this._touchIDs[0]=this._id++;
						if (!MouseManager._isTouchRespond){
							_this._isLeftMouse=evt.button===0;
							_this.initEvent(evt);
							_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown);
						}else
						MouseManager._isTouchRespond=false;
						break ;
					case 'mouseup':
						_this._isLeftMouse=evt.button===0;
						var now=Browser.now();
						_this._isDoubleClick=(now-_this._lastClickTimer)< 300;
						_this._lastClickTimer=now;
						_this.initEvent(evt);
						_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);
						break ;
					case 'mousemove':
						if ((Math.abs(this._prePoint.x-evt.clientX)+Math.abs(this._prePoint.y-evt.clientY))>=this.mouseMoveAccuracy){
							this._prePoint.x=evt.clientX;
							this._prePoint.y=evt.clientY;
							_this.initEvent(evt);
							_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove);
							_this.checkMouseOut();
						}
						break ;
					case "touchstart":
						MouseManager._isTouchRespond=true;
						_this._isLeftMouse=true;
						var touches=evt.changedTouches;
						for (var j=0,n=touches.length;j < n;j++){
							var touch=touches[j];
							if (this._id % 200===0)this._touchIDs={};
							this._touchIDs[touch.identifier]=this._id++;
							_this.initEvent(touch,evt);
							_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown);
						}
						break ;
					case "touchend":
						MouseManager._isTouchRespond=true;
						_this._isLeftMouse=true;
						now=Browser.now();
						_this._isDoubleClick=(now-_this._lastClickTimer)< 300;
						_this._lastClickTimer=now;
						var touchends=evt.changedTouches;
						for (j=0,n=touchends.length;j < n;j++){
							_this.initEvent(touchends[j],evt);
							_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);
						}
						break ;
					case "touchmove":;
						var touchemoves=evt.changedTouches;
						for (j=0,n=touchemoves.length;j < n;j++){
							_this.initEvent(touchemoves[j],evt);
							_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove);
						}
						_this.checkMouseOut();
						break ;
					case "wheel":
					case "mousewheel":
					case "DOMMouseScroll":
						_this.checkMouseWheel(evt);
						break ;
					case "mouseout":
						_this._stage.event("mouseout",_this._event.setTo("mouseout",_this._stage,_this._stage));
						break ;
					case "mouseover":
						_this._stage.event("mouseover",_this._event.setTo("mouseover",_this._stage,_this._stage));
						break ;
					}
				i++;
			}
			this._eventList.length=0;
		}

		MouseManager.enabled=true;
		MouseManager._isTouchRespond=false;
		__static(MouseManager,
		['instance',function(){return this.instance=new MouseManager();}
		]);
		return MouseManager;
	})()


	/**
	*<code>Filter</code> 是滤镜基类。
	*/
	//class laya.filters.Filter
	var Filter=(function(){
		function Filter(){
			this._action=null;
		}

		__class(Filter,'laya.filters.Filter');
		var __proto=Filter.prototype;
		Laya.imps(__proto,{"laya.filters.IFilter":true})
		/**@private */
		__proto.callNative=function(sp){}
		/**@private 滤镜类型。*/
		__getset(0,__proto,'type',function(){return-1});
		/**@private 滤镜动作。*/
		__getset(0,__proto,'action',function(){return this._action });
		Filter.BLUR=0x10;
		Filter.COLOR=0x20;
		Filter.GLOW=0x08;
		Filter._filterStart=null
		Filter._filterEnd=null
		Filter._EndTarget=null
		Filter._recycleScope=null
		Filter._filter=null
		Filter._useSrc=null
		Filter._endSrc=null
		Filter._useOut=null
		Filter._endOut=null
		return Filter;
	})()


	/**
	*<code>ColorFilterAction</code> 是一个颜色滤镜应用类。
	*/
	//class laya.filters.ColorFilterAction
	var ColorFilterAction=(function(){
		function ColorFilterAction(){
			this.data=null;
		}

		__class(ColorFilterAction,'laya.filters.ColorFilterAction');
		var __proto=ColorFilterAction.prototype;
		Laya.imps(__proto,{"laya.filters.IFilterAction":true})
		/**
		*给指定的对象应用颜色滤镜。
		*@param srcCanvas 需要应用画布对象。
		*@return 应用了滤镜后的画布对象。
		*/
		__proto.apply=function(srcCanvas){
			var ctx=srcCanvas.ctx.ctx;
			var canvas=srcCanvas.ctx.ctx.canvas;
			if (canvas.width==0 || canvas.height==0)return canvas;
			var imgdata=ctx.getImageData(0,0,canvas.width,canvas.height);
			var data=imgdata.data;
			var nData;
			for (var i=0,n=data.length;i < n;i+=4){
				nData=this.getColor(data[i],data[i+1],data[i+2],data[i+3]);
				if (data[i+3]==0)continue ;
				data[i]=nData[0];
				data[i+1]=nData[1];
				data[i+2]=nData[2];
				data[i+3]=nData[3];
			}
			ctx.putImageData(imgdata,0,0);
			return srcCanvas;
		}

		__proto.getColor=function(red,green,blue,alpha){
			var rst=[];
			if (this.data._mat && this.data._alpha){
				var mat=this.data._mat;
				var tempAlpha=this.data._alpha;
				rst[0]=mat[0] *red+mat[1] *green+mat[2] *blue+mat[3] *alpha+tempAlpha[0];
				rst[1]=mat[4] *red+mat[5] *green+mat[6] *blue+mat[7] *alpha+tempAlpha[1];
				rst[2]=mat[8] *red+mat[9] *green+mat[10] *blue+mat[11] *alpha+tempAlpha[2];
				rst[3]=mat[12] *red+mat[13] *green+mat[14] *blue+mat[15] *alpha+tempAlpha[3];
			}
			return rst;
		}

		return ColorFilterAction;
	})()


	/**
	*@private
	*计算贝塞尔曲线的工具类。
	*/
	//class laya.maths.Bezier
	var Bezier=(function(){
		function Bezier(){
			this._controlPoints=[new Point(),new Point(),new Point()];
			this._calFun=this.getPoint2;
		}

		__class(Bezier,'laya.maths.Bezier');
		var __proto=Bezier.prototype;
		/**@private */
		__proto._switchPoint=function(x,y){
			var tPoint=this._controlPoints.shift();
			tPoint.setTo(x,y);
			this._controlPoints.push(tPoint);
		}

		/**
		*计算二次贝塞尔点。
		*@param t
		*@param rst
		*
		*/
		__proto.getPoint2=function(t,rst){
			var p1=this._controlPoints[0];
			var p2=this._controlPoints[1];
			var p3=this._controlPoints[2];
			var lineX=Math.pow((1-t),2)*p1.x+2 *t *(1-t)*p2.x+Math.pow(t,2)*p3.x;
			var lineY=Math.pow((1-t),2)*p1.y+2 *t *(1-t)*p2.y+Math.pow(t,2)*p3.y;
			rst.push(lineX,lineY);
		}

		/**
		*计算三次贝塞尔点
		*@param t
		*@param rst
		*
		*/
		__proto.getPoint3=function(t,rst){
			var p1=this._controlPoints[0];
			var p2=this._controlPoints[1];
			var p3=this._controlPoints[2];
			var p4=this._controlPoints[3];
			var lineX=Math.pow((1-t),3)*p1.x+3 *p2.x *t *(1-t)*(1-t)+3 *p3.x *t *t *(1-t)+p4.x *Math.pow(t,3);
			var lineY=Math.pow((1-t),3)*p1.y+3 *p2.y *t *(1-t)*(1-t)+3 *p3.y *t *t *(1-t)+p4.y *Math.pow(t,3);
			rst.push(lineX,lineY);
		}

		/**
		*计算贝塞尔点序列
		*@param count
		*@param rst
		*
		*/
		__proto.insertPoints=function(count,rst){
			var i=NaN;
			count=count > 0 ? count :5;
			var dLen=NaN;
			dLen=1 / count;
			for (i=0;i <=1;i+=dLen){
				this._calFun(i,rst);
			}
		}

		/**
		*获取贝塞尔曲线上的点。
		*@param pList 控制点[x0,y0,x1,y1...]
		*@param inSertCount 每次曲线的插值数量
		*@return
		*
		*/
		__proto.getBezierPoints=function(pList,inSertCount,count){
			(inSertCount===void 0)&& (inSertCount=5);
			(count===void 0)&& (count=2);
			var i=0,len=0;
			len=pList.length;
			if (len < (count+1)*2)return [];
			var rst;
			rst=[];
			switch (count){
				case 2:
					this._calFun=this.getPoint2;
					break ;
				case 3:
					this._calFun=this.getPoint3;
					break ;
				default :
					return [];
				}
			while(this._controlPoints.length<=count){
				this._controlPoints.push(new Point());
			}
			for (i=0;i < count *2;i+=2){
				this._switchPoint(pList[i],pList[i+1]);
			}
			for (i=count *2;i < len;i+=2){
				this._switchPoint(pList[i],pList[i+1]);
				if ((i / 2)% count==0)
					this.insertPoints(inSertCount,rst);
			}
			return rst;
		}

		__static(Bezier,
		['I',function(){return this.I=new Bezier();}
		]);
		return Bezier;
	})()


	/**
	*@private
	*凸包算法。
	*/
	//class laya.maths.GrahamScan
	var GrahamScan=(function(){
		function GrahamScan(){};
		__class(GrahamScan,'laya.maths.GrahamScan');
		GrahamScan.multiply=function(p1,p2,p0){
			return ((p1.x-p0.x)*(p2.y-p0.y)-(p2.x-p0.x)*(p1.y-p0.y));
		}

		GrahamScan.dis=function(p1,p2){
			return (p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y);
		}

		GrahamScan._getPoints=function(count,tempUse,rst){
			(tempUse===void 0)&& (tempUse=false);
			if (!GrahamScan._mPointList)GrahamScan._mPointList=[];
			while (GrahamScan._mPointList.length < count)GrahamScan._mPointList.push(new Point());
			if (!rst)rst=[];
			rst.length=0;
			if (tempUse){
				GrahamScan.getFrom(rst,GrahamScan._mPointList,count);
				}else {
				GrahamScan.getFromR(rst,GrahamScan._mPointList,count);
			}
			return rst;
		}

		GrahamScan.getFrom=function(rst,src,count){
			var i=0;
			for (i=0;i < count;i++){
				rst.push(src[i]);
			}
			return rst;
		}

		GrahamScan.getFromR=function(rst,src,count){
			var i=0;
			for (i=0;i < count;i++){
				rst.push(src.pop());
			}
			return rst;
		}

		GrahamScan.pListToPointList=function(pList,tempUse){
			(tempUse===void 0)&& (tempUse=false);
			var i=0,len=pList.length / 2,rst=GrahamScan._getPoints(len,tempUse,GrahamScan._tempPointList);
			for (i=0;i < len;i++){
				rst[i].setTo(pList[i+i],pList[i+i+1]);
			}
			return rst;
		}

		GrahamScan.pointListToPlist=function(pointList){
			var i=0,len=pointList.length,rst=GrahamScan._temPList,tPoint;
			rst.length=0;
			for (i=0;i < len;i++){
				tPoint=pointList[i];
				rst.push(tPoint.x,tPoint.y);
			}
			return rst;
		}

		GrahamScan.scanPList=function(pList){
			return Utils.copyArray(pList,GrahamScan.pointListToPlist(GrahamScan.scan(GrahamScan.pListToPointList(pList,true))));
		}

		GrahamScan.scan=function(PointSet){
			var i=0,j=0,k=0,top=2,tmp,n=PointSet.length,ch;
			var _tmpDic={};
			var key;
			ch=GrahamScan._temArr;
			ch.length=0;
			n=PointSet.length;
			for (i=n-1;i >=0;i--){
				tmp=PointSet[i];
				key=tmp.x+"_"+tmp.y;
				if (!_tmpDic.hasOwnProperty(key)){
					_tmpDic[key]=true;
					ch.push(tmp);
				}
			}
			n=ch.length;
			Utils.copyArray(PointSet,ch);
			for (i=1;i < n;i++)
			if ((PointSet[i].y < PointSet[k].y)|| ((PointSet[i].y==PointSet[k].y)&& (PointSet[i].x < PointSet[k].x)))
				k=i;
			tmp=PointSet[0];
			PointSet[0]=PointSet[k];
			PointSet[k]=tmp;
			for (i=1;i < n-1;i++){
				k=i;
				for (j=i+1;j < n;j++)
				if ((GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])> 0)|| ((GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])==0)&& (GrahamScan.dis(PointSet[0],PointSet[j])< GrahamScan.dis(PointSet[0],PointSet[k]))))
					k=j;
				tmp=PointSet[i];
				PointSet[i]=PointSet[k];
				PointSet[k]=tmp;
			}
			ch=GrahamScan._temArr;
			ch.length=0;
			if (PointSet.length < 3){
				return Utils.copyArray(ch,PointSet);
			}
			ch.push(PointSet[0],PointSet[1],PointSet[2]);
			for (i=3;i < n;i++){
				while (ch.length >=2 && GrahamScan.multiply(PointSet[i],ch[ch.length-1],ch[ch.length-2])>=0)ch.pop();
				PointSet[i] && ch.push(PointSet[i]);
			}
			return ch;
		}

		GrahamScan._mPointList=null
		GrahamScan._tempPointList=[];
		GrahamScan._temPList=[];
		GrahamScan._temArr=[];
		return GrahamScan;
	})()


	/**
	*@private
	*<code>MathUtil</code> 是一个数据处理工具类。
	*/
	//class laya.maths.MathUtil
	var MathUtil=(function(){
		function MathUtil(){};
		__class(MathUtil,'laya.maths.MathUtil');
		MathUtil.subtractVector3=function(l,r,o){
			o[0]=l[0]-r[0];
			o[1]=l[1]-r[1];
			o[2]=l[2]-r[2];
		}

		MathUtil.lerp=function(left,right,amount){
			return left *(1-amount)+right *amount;
		}

		MathUtil.scaleVector3=function(f,b,e){
			e[0]=f[0] *b;
			e[1]=f[1] *b;
			e[2]=f[2] *b;
		}

		MathUtil.lerpVector3=function(l,r,t,o){
			var ax=l[0],ay=l[1],az=l[2];
			o[0]=ax+t *(r[0]-ax);
			o[1]=ay+t *(r[1]-ay);
			o[2]=az+t *(r[2]-az);
		}

		MathUtil.lerpVector4=function(l,r,t,o){
			var ax=l[0],ay=l[1],az=l[2],aw=l[3];
			o[0]=ax+t *(r[0]-ax);
			o[1]=ay+t *(r[1]-ay);
			o[2]=az+t *(r[2]-az);
			o[3]=aw+t *(r[3]-aw);
		}

		MathUtil.slerpQuaternionArray=function(a,Offset1,b,Offset2,t,out,Offset3){
			var ax=a[Offset1+0],ay=a[Offset1+1],az=a[Offset1+2],aw=a[Offset1+3],bx=b[Offset2+0],by=b[Offset2+1],bz=b[Offset2+2],bw=b[Offset2+3];
			var omega,cosom,sinom,scale0,scale1;
			cosom=ax *bx+ay *by+az *bz+aw *bw;
			if (cosom < 0.0){
				cosom=-cosom;
				bx=-bx;
				by=-by;
				bz=-bz;
				bw=-bw;
			}
			if ((1.0-cosom)> 0.000001){
				omega=Math.acos(cosom);
				sinom=Math.sin(omega);
				scale0=Math.sin((1.0-t)*omega)/ sinom;
				scale1=Math.sin(t *omega)/ sinom;
				}else {
				scale0=1.0-t;
				scale1=t;
			}
			out[Offset3+0]=scale0 *ax+scale1 *bx;
			out[Offset3+1]=scale0 *ay+scale1 *by;
			out[Offset3+2]=scale0 *az+scale1 *bz;
			out[Offset3+3]=scale0 *aw+scale1 *bw;
			return out;
		}

		MathUtil.getRotation=function(x0,y0,x1,y1){
			return Math.atan2(y1-y0,x1-x0)/ Math.PI *180;
		}

		MathUtil.sortBigFirst=function(a,b){
			if (a==b)
				return 0;
			return b > a ? 1 :-1;
		}

		MathUtil.sortSmallFirst=function(a,b){
			if (a==b)
				return 0;
			return b > a ?-1 :1;
		}

		MathUtil.sortNumBigFirst=function(a,b){
			return parseFloat(b)-parseFloat(a);
		}

		MathUtil.sortNumSmallFirst=function(a,b){
			return parseFloat(a)-parseFloat(b);
		}

		MathUtil.sortByKey=function(key,bigFirst,forceNum){
			(bigFirst===void 0)&& (bigFirst=false);
			(forceNum===void 0)&& (forceNum=true);
			var _sortFun;
			if (bigFirst){
				_sortFun=forceNum ? MathUtil.sortNumBigFirst :MathUtil.sortBigFirst;
				}else {
				_sortFun=forceNum ? MathUtil.sortNumSmallFirst :MathUtil.sortSmallFirst;
			}
			return function (a,b){
				return _sortFun(a[key],b[key]);
			}
		}

		return MathUtil;
	})()


	/**
	*<code>Matrix</code> 类表示一个转换矩阵，它确定如何将点从一个坐标空间映射到另一个坐标空间。
	*/
	//class laya.maths.Matrix
	var Matrix=(function(){
		function Matrix(a,b,c,d,tx,ty){
			//this.a=NaN;
			//this.b=NaN;
			//this.c=NaN;
			//this.d=NaN;
			//this.tx=NaN;
			//this.ty=NaN;
			this.inPool=false;
			this.bTransform=false;
			(a===void 0)&& (a=1);
			(b===void 0)&& (b=0);
			(c===void 0)&& (c=0);
			(d===void 0)&& (d=1);
			(tx===void 0)&& (tx=0);
			(ty===void 0)&& (ty=0);
			this.a=a;
			this.b=b;
			this.c=c;
			this.d=d;
			this.tx=tx;
			this.ty=ty;
			this._checkTransform();
		}

		__class(Matrix,'laya.maths.Matrix');
		var __proto=Matrix.prototype;
		/**
		*为每个矩阵属性设置一个值。
		*@return 返回当前矩形。
		*/
		__proto.identity=function(){
			this.a=this.d=1;
			this.b=this.tx=this.ty=this.c=0;
			this.bTransform=false;
			return this;
		}

		/**@private*/
		__proto._checkTransform=function(){
			return this.bTransform=(this.a!==1 || this.b!==0 || this.c!==0 || this.d!==1);
		}

		/**
		*设置沿 x 、y 轴平移每个点的距离。
		*@param x 沿 x 轴平移每个点的距离。
		*@param y 沿 y 轴平移每个点的距离。
		*@return 返回对象本身
		*/
		__proto.setTranslate=function(x,y){
			this.tx=x;
			this.ty=y;
			return this;
		}

		/**
		*沿 x 和 y 轴平移矩阵，由 x 和 y 参数指定。
		*@param x 沿 x 轴向右移动的量（以像素为单位）。
		*@param y 沿 y 轴向下移动的量（以像素为单位）。
		*@return 返回此矩形。
		*/
		__proto.translate=function(x,y){
			this.tx+=x;
			this.ty+=y;
			return this;
		}

		/**
		*对矩阵应用缩放转换。
		*@param x 用于沿 x 轴缩放对象的乘数。
		*@param y 用于沿 y 轴缩放对象的乘数。
		*/
		__proto.scale=function(x,y){
			this.a *=x;
			this.d *=y;
			this.c *=x;
			this.b *=y;
			this.tx *=x;
			this.ty *=y;
			this.bTransform=true;
		}

		/**
		*对 Matrix 对象应用旋转转换。
		*@param angle 以弧度为单位的旋转角度。
		*/
		__proto.rotate=function(angle){
			var cos=Math.cos(angle);
			var sin=Math.sin(angle);
			var a1=this.a;
			var c1=this.c;
			var tx1=this.tx;
			this.a=a1 *cos-this.b *sin;
			this.b=a1 *sin+this.b *cos;
			this.c=c1 *cos-this.d *sin;
			this.d=c1 *sin+this.d *cos;
			this.tx=tx1 *cos-this.ty *sin;
			this.ty=tx1 *sin+this.ty *cos;
			this.bTransform=true;
		}

		/**
		*对 Matrix 对象应用倾斜转换。
		*@param x 沿着 X 轴的 2D 倾斜弧度。
		*@param y 沿着 Y 轴的 2D 倾斜弧度。
		*@return 当前 Matrix 对象。
		*/
		__proto.skew=function(x,y){
			var tanX=Math.tan(x);
			var tanY=Math.tan(y);
			var a1=this.a;
			var b1=this.b;
			this.a+=tanY *this.c;
			this.b+=tanY *this.d;
			this.c+=tanX *a1;
			this.d+=tanX *b1;
			return this;
		}

		/**
		*对指定的点应用当前矩阵的逆转化并返回此点。
		*@param out 待转化的点 Point 对象。
		*@return 返回out
		*/
		__proto.invertTransformPoint=function(out){
			var a1=this.a;
			var b1=this.b;
			var c1=this.c;
			var d1=this.d;
			var tx1=this.tx;
			var n=a1 *d1-b1 *c1;
			var a2=d1 / n;
			var b2=-b1 / n;
			var c2=-c1 / n;
			var d2=a1 / n;
			var tx2=(c1 *this.ty-d1 *tx1)/ n;
			var ty2=-(a1 *this.ty-b1 *tx1)/ n;
			return out.setTo(a2 *out.x+c2 *out.y+tx2,b2 *out.x+d2 *out.y+ty2);
		}

		/**
		*将 Matrix 对象表示的几何转换应用于指定点。
		*@param out 用来设定输出结果的点。
		*@return 返回out
		*/
		__proto.transformPoint=function(out){
			return out.setTo(this.a *out.x+this.c *out.y+this.tx,this.b *out.x+this.d *out.y+this.ty);
		}

		/**
		*将 Matrix 对象表示的几何转换应用于指定点忽略tx ty。
		*@param out 用来设定输出结果的点。
		*@return 返回out
		*/
		__proto.transformPointN=function(out){
			return out.setTo(this.a *out.x+this.c *out.y ,this.b *out.x+this.d *out.y);
		}

		/**
		*@private
		*将 Matrix 对象表示的几何转换应用于指定点。
		*@param data 点集合。
		*@param out 存储应用转化的点的列表。
		*@return 返回out数组
		*/
		__proto.transformPointArray=function(data,out){
			var len=data.length;
			for (var i=0;i < len;i+=2){
				var x=data[i],y=data[i+1];
				out[i]=this.a *x+this.c *y+this.tx;
				out[i+1]=this.b *x+this.d *y+this.ty;
			}
			return out;
		}

		/**
		*@private
		*将 Matrix 对象表示的几何缩放转换应用于指定点。
		*@param data 点集合。
		*@param out 存储应用转化的点的列表。
		*@return 返回out数组
		*/
		__proto.transformPointArrayScale=function(data,out){
			var len=data.length;
			for (var i=0;i < len;i+=2){
				var x=data[i],y=data[i+1];
				out[i]=this.a *x+this.c *y;
				out[i+1]=this.b *x+this.d *y;
			}
			return out;
		}

		/**
		*获取 X 轴缩放值。
		*@return X 轴缩放值。
		*/
		__proto.getScaleX=function(){
			return this.b===0 ? this.a :Math.sqrt(this.a *this.a+this.b *this.b);
		}

		/**
		*获取 Y 轴缩放值。
		*@return Y 轴缩放值。
		*/
		__proto.getScaleY=function(){
			return this.c===0 ? this.d :Math.sqrt(this.c *this.c+this.d *this.d);
		}

		/**
		*执行原始矩阵的逆转换。
		*@return 当前矩阵对象。
		*/
		__proto.invert=function(){
			var a1=this.a;
			var b1=this.b;
			var c1=this.c;
			var d1=this.d;
			var tx1=this.tx;
			var n=a1 *d1-b1 *c1;
			this.a=d1 / n;
			this.b=-b1 / n;
			this.c=-c1 / n;
			this.d=a1 / n;
			this.tx=(c1 *this.ty-d1 *tx1)/ n;
			this.ty=-(a1 *this.ty-b1 *tx1)/ n;
			return this;
		}

		/**
		*将 Matrix 的成员设置为指定值。
		*@param a 缩放或旋转图像时影响像素沿 x 轴定位的值。
		*@param b 旋转或倾斜图像时影响像素沿 y 轴定位的值。
		*@param c 旋转或倾斜图像时影响像素沿 x 轴定位的值。
		*@param d 缩放或旋转图像时影响像素沿 y 轴定位的值。
		*@param tx 沿 x 轴平移每个点的距离。
		*@param ty 沿 y 轴平移每个点的距离。
		*@return 当前矩阵对象。
		*/
		__proto.setTo=function(a,b,c,d,tx,ty){
			this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty;
			return this;
		}

		/**
		*将指定矩阵与当前矩阵连接，从而将这两个矩阵的几何效果有效地结合在一起。
		*@param matrix 要连接到源矩阵的矩阵。
		*@return 当前矩阵。
		*/
		__proto.concat=function(matrix){
			var a=this.a;
			var c=this.c;
			var tx=this.tx;
			this.a=a *matrix.a+this.b *matrix.c;
			this.b=a *matrix.b+this.b *matrix.d;
			this.c=c *matrix.a+this.d *matrix.c;
			this.d=c *matrix.b+this.d *matrix.d;
			this.tx=tx *matrix.a+this.ty *matrix.c+matrix.tx;
			this.ty=tx *matrix.b+this.ty *matrix.d+matrix.ty;
			return this;
		}

		/**
		*对矩阵应用缩放转换。反向相乘
		*@param x 用于沿 x 轴缩放对象的乘数。
		*@param y 用于沿 y 轴缩放对象的乘数。
		*/
		__proto.scaleEx=function(x,y){
			var ba=this.a,bb=this.b,bc=this.c,bd=this.d;
			if (bb!==0 || bc!==0){
				this.a=x *ba;
				this.b=x *bb;
				this.c=y *bc;
				this.d=y *bd;
			}
			else{
				this.a=x *ba;
				this.b=0 *bd;
				this.c=0 *ba;
				this.d=y *bd;
			}
			this.bTransform=true;
		}

		/**
		*对 Matrix 对象应用旋转转换。反向相乘
		*@param angle 以弧度为单位的旋转角度。
		*/
		__proto.rotateEx=function(angle){
			var cos=Math.cos(angle);
			var sin=Math.sin(angle);
			var ba=this.a,bb=this.b,bc=this.c,bd=this.d;
			if (bb!==0 || bc!==0){
				this.a=cos *ba+sin *bc;
				this.b=cos *bb+sin *bd;
				this.c=-sin *ba+cos *bc;
				this.d=-sin *bb+cos *bd;
			}
			else{
				this.a=cos *ba;
				this.b=sin *bd;
				this.c=-sin *ba;
				this.d=cos *bd;
			}
			this.bTransform=true;
		}

		/**
		*返回一个新的 Matrix 对象，它是此矩阵的克隆，带有与所含对象完全相同的副本。
		*@return 一个 Matrix 对象。
		*/
		__proto.clone=function(){
			var no=Matrix._cache;
			var dec=!no._length ? (new Matrix()):no[--no._length];
			dec.a=this.a;
			dec.b=this.b;
			dec.c=this.c;
			dec.d=this.d;
			dec.tx=this.tx;
			dec.ty=this.ty;
			dec.bTransform=this.bTransform;
			return dec;
		}

		/**
		*将当前 Matrix 对象中的所有矩阵数据复制到指定的 Matrix 对象中。
		*@param dec 要复制当前矩阵数据的 Matrix 对象。
		*@return 已复制当前矩阵数据的 Matrix 对象。
		*/
		__proto.copyTo=function(dec){
			dec.a=this.a;
			dec.b=this.b;
			dec.c=this.c;
			dec.d=this.d;
			dec.tx=this.tx;
			dec.ty=this.ty;
			dec.bTransform=this.bTransform;
			return dec;
		}

		/**
		*返回列出该 Matrix 对象属性的文本值。
		*@return 一个字符串，它包含 Matrix 对象的属性值：a、b、c、d、tx 和 ty。
		*/
		__proto.toString=function(){
			return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty;
		}

		/**
		*销毁此对象。
		*/
		__proto.destroy=function(){
			if (this.inPool)return;
			var cache=Matrix._cache;
			this.inPool=true;
			cache._length || (cache._length=0);
			cache[cache._length++]=this;
			this.a=this.d=1;
			this.b=this.c=this.tx=this.ty=0;
			this.bTransform=false;
		}

		Matrix.mul=function(m1,m2,out){
			var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;
			var ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;
			if (bb!==0 || bc!==0){
				out.a=aa *ba+ab *bc;
				out.b=aa *bb+ab *bd;
				out.c=ac *ba+ad *bc;
				out.d=ac *bb+ad *bd;
				out.tx=ba *atx+bc *aty+btx;
				out.ty=bb *atx+bd *aty+bty;
				}else {
				out.a=aa *ba;
				out.b=ab *bd;
				out.c=ac *ba;
				out.d=ad *bd;
				out.tx=ba *atx+btx;
				out.ty=bd *aty+bty;
			}
			return out;
		}

		Matrix.mul16=function(m1,m2,out){
			var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;
			var ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;
			if (bb!==0 || bc!==0){
				out[0]=aa *ba+ab *bc;
				out[1]=aa *bb+ab *bd;
				out[4]=ac *ba+ad *bc;
				out[5]=ac *bb+ad *bd;
				out[12]=ba *atx+bc *aty+btx;
				out[13]=bb *atx+bd *aty+bty;
				}else {
				out[0]=aa *ba;
				out[1]=ab *bd;
				out[4]=ac *ba;
				out[5]=ad *bd;
				out[12]=ba *atx+btx;
				out[13]=bd *aty+bty;
			}
			return out;
		}

		Matrix.mulPre=function(m1,ba,bb,bc,bd,btx,bty,out){
			var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;
			if (bb!==0 || bc!==0){
				out.a=aa *ba+ab *bc;
				out.b=aa *bb+ab *bd;
				out.c=ac *ba+ad *bc;
				out.d=ac *bb+ad *bd;
				out.tx=ba *atx+bc *aty+btx;
				out.ty=bb *atx+bd *aty+bty;
				}else {
				out.a=aa *ba;
				out.b=ab *bd;
				out.c=ac *ba;
				out.d=ad *bd;
				out.tx=ba *atx+btx;
				out.ty=bd *aty+bty;
			}
			return out;
		}

		Matrix.mulPos=function(m1,aa,ab,ac,ad,atx,aty,out){
			var ba=m1.a,bb=m1.b,bc=m1.c,bd=m1.d,btx=m1.tx,bty=m1.ty;
			if (bb!==0 || bc!==0){
				out.a=aa *ba+ab *bc;
				out.b=aa *bb+ab *bd;
				out.c=ac *ba+ad *bc;
				out.d=ac *bb+ad *bd;
				out.tx=ba *atx+bc *aty+btx;
				out.ty=bb *atx+bd *aty+bty;
				}else {
				out.a=aa *ba;
				out.b=ab *bd;
				out.c=ac *ba;
				out.d=ad *bd;
				out.tx=ba *atx+btx;
				out.ty=bd *aty+bty;
			}
			return out;
		}

		Matrix.preMul=function(parent,self,out){
			var pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d;
			var na=self.a,nb=self.b,nc=self.c,nd=self.d,ntx=self.tx,nty=self.ty;
			out.a=na *pa;
			out.b=out.c=0;
			out.d=nd *pd;
			out.tx=ntx *pa+parent.tx;
			out.ty=nty *pd+parent.ty;
			if (nb!==0 || nc!==0 || pb!==0 || pc!==0){
				out.a+=nb *pc;
				out.d+=nc *pb;
				out.b+=na *pb+nb *pd;
				out.c+=nc *pa+nd *pc;
				out.tx+=nty *pc;
				out.ty+=ntx *pb;
			}
			return out;
		}

		Matrix.preMulXY=function(parent,x,y,out){
			var pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d;
			out.a=pa;
			out.b=pb;
			out.c=pc;
			out.d=pd;
			out.tx=x *pa+parent.tx+y *pc;
			out.ty=y *pd+parent.ty+x *pb;
			return out;
		}

		Matrix.create=function(){
			var cache=Matrix._cache;
			var mat=!cache._length ? (new Matrix()):cache[--cache._length];
			mat.inPool=false;
			return mat;
		}

		Matrix.EMPTY=new Matrix();
		Matrix.TEMP=new Matrix();
		Matrix._cache=[];
		return Matrix;
	})()


	/**
	*<code>Point</code> 对象表示二维坐标系统中的某个位置，其中 x 表示水平轴，y 表示垂直轴。
	*/
	//class laya.maths.Point
	var Point=(function(){
		function Point(x,y){
			//this.x=NaN;
			//this.y=NaN;
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			this.x=x;
			this.y=y;
		}

		__class(Point,'laya.maths.Point');
		var __proto=Point.prototype;
		/**
		*将 <code>Point</code> 的成员设置为指定值。
		*@param x 水平坐标。
		*@param y 垂直坐标。
		*@return 当前 Point 对象。
		*/
		__proto.setTo=function(x,y){
			this.x=x;
			this.y=y;
			return this;
		}

		/**
		*计算当前点和目标x，y点的距离
		*@param x 水平坐标。
		*@param y 垂直坐标。
		*@return 返回之间的距离
		*/
		__proto.distance=function(x,y){
			return Math.sqrt((this.x-x)*(this.x-x)+(this.y-y)*(this.y-y));
		}

		/**返回包含 x 和 y 坐标的值的字符串。*/
		__proto.toString=function(){
			return this.x+","+this.y;
		}

		/**
		*标准化向量
		*/
		__proto.normalize=function(){
			var d=Math.sqrt(this.x *this.x+this.y *this.y);
			if (d > 0){
				var id=1.0 / d;
				this.x *=id;
				this.y *=id;
			}
		}

		Point.TEMP=new Point();
		Point.EMPTY=new Point();
		return Point;
	})()


	/**
	*<code>Rectangle</code> 对象是按其位置（由它左上角的点 (x,y)确定）以及宽度和高度定义的区域。
	*/
	//class laya.maths.Rectangle
	var Rectangle=(function(){
		function Rectangle(x,y,width,height){
			//this.x=NaN;
			//this.y=NaN;
			//this.width=NaN;
			//this.height=NaN;
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			this.x=x;
			this.y=y;
			this.width=width;
			this.height=height;
		}

		__class(Rectangle,'laya.maths.Rectangle');
		var __proto=Rectangle.prototype;
		/**
		*将 Rectangle 的属性设置为指定值。
		*@param x x 矩形左上角的 X 轴坐标。
		*@param y x 矩形左上角的 Y 轴坐标。
		*@param width 矩形的宽度。
		*@param height 矩形的高。
		*@return 返回属性值修改后的矩形对象本身。
		*/
		__proto.setTo=function(x,y,width,height){
			this.x=x;
			this.y=y;
			this.width=width;
			this.height=height;
			return this;
		}

		/**
		*复制 source 对象的属性值到此矩形对象中。
		*@param sourceRect 源 Rectangle 对象。
		*@return 返回属性值修改后的矩形对象本身。
		*/
		__proto.copyFrom=function(source){
			this.x=source.x;
			this.y=source.y;
			this.width=source.width;
			this.height=source.height;
			return this;
		}

		/**
		*检测此矩形对象是否包含指定的点。
		*@param x 点的 X 轴坐标值（水平位置）。
		*@param y 点的 Y 轴坐标值（垂直位置）。
		*@return 如果 Rectangle 对象包含指定的点，则值为 true；否则为 false。
		*/
		__proto.contains=function(x,y){
			if (this.width <=0 || this.height <=0)return false;
			if (x >=this.x && x < this.right){
				if (y >=this.y && y < this.bottom){
					return true;
				}
			}
			return false;
		}

		/**
		*检测传入的矩形对象是否与此对象相交。
		*@param rect Rectangle 对象。
		*@return 如果传入的矩形对象与此对象相交，则返回 true 值，否则返回 false。
		*/
		__proto.intersects=function(rect){
			return !(rect.x > (this.x+this.width)|| (rect.x+rect.width)< this.x || rect.y > (this.y+this.height)|| (rect.y+rect.height)< this.y);
		}

		/**
		*获取此对象与传入的矩形对象的相交区域。并将相交区域赋值给传入的输出矩形对象。
		*@param rect 待比较的矩形区域。
		*@param out 待输出的矩形区域。如果为空则创建一个新的。建议：尽量复用对象，减少对象创建消耗。
		*@return 返回相交的矩形区域对象。
		*/
		__proto.intersection=function(rect,out){
			if (!this.intersects(rect))return null;
			out || (out=new Rectangle());
			out.x=Math.max(this.x,rect.x);
			out.y=Math.max(this.y,rect.y);
			out.width=Math.min(this.right,rect.right)-out.x;
			out.height=Math.min(this.bottom,rect.bottom)-out.y;
			return out;
		}

		/**
		*矩形联合，通过填充两个矩形之间的水平和垂直空间，将这两个矩形组合在一起以创建一个新的 Rectangle 对象。
		*@param 目标矩形对象。
		*@param out 待输出结果的矩形对象。如果为空则创建一个新的。建议：尽量复用对象，减少对象创建消耗。
		*@return 两个矩形后联合的 Rectangle 对象 out 。
		*/
		__proto.union=function(source,out){
			out || (out=new Rectangle());
			this.clone(out);
			if (source.width <=0 || source.height <=0)return out;
			out.addPoint(source.x,source.y);
			out.addPoint(source.right,source.bottom);
			return this;
		}

		/**
		*返回一个 Rectangle 对象，其 x、y、width 和 height 属性的值与当前 Rectangle 对象的对应值相同。
		*@param out 待输出的矩形对象。如果为空则创建一个新的。建议：尽量复用对象，减少对象创建消耗。
		*@return Rectangle 对象 out ，其 x、y、width 和 height 属性的值与当前 Rectangle 对象的对应值相同。
		*/
		__proto.clone=function(out){
			out || (out=new Rectangle());
			out.x=this.x;
			out.y=this.y;
			out.width=this.width;
			out.height=this.height;
			return out;
		}

		/**
		*当前 Rectangle 对象的水平位置 x 和垂直位置 y 以及高度 width 和宽度 height 以逗号连接成的字符串。
		*/
		__proto.toString=function(){
			return this.x+","+this.y+","+this.width+","+this.height;
		}

		/**
		*检测传入的 Rectangle 对象的属性是否与当前 Rectangle 对象的属性 x、y、width、height 属性值都相等。
		*@param rect 待比较的 Rectangle 对象。
		*@return 如果判断的属性都相等，则返回 true ,否则返回 false。
		*/
		__proto.equals=function(rect){
			if (!rect || rect.x!==this.x || rect.y!==this.y || rect.width!==this.width || rect.height!==this.height)return false;
			return true;
		}

		/**
		*在当前矩形区域中加一个点。
		*@param x 点的 X 坐标。
		*@param y 点的 Y 坐标。
		*@return 返回此 Rectangle 对象。
		*/
		__proto.addPoint=function(x,y){
			this.x > x && (this.width+=this.x-x,this.x=x);
			this.y > y && (this.height+=this.y-y,this.y=y);
			if (this.width < x-this.x)this.width=x-this.x;
			if (this.height < y-this.y)this.height=y-this.y;
			return this;
		}

		/**
		*@private
		*返回代表当前矩形的顶点数据。
		*@return 顶点数据。
		*/
		__proto._getBoundPoints=function(){
			var rst=Rectangle._temB;
			rst.length=0;
			if (this.width==0 || this.height==0)return rst;
			rst.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height);
			return rst;
		}

		/**确定此 Rectangle 对象是否为空。*/
		__proto.isEmpty=function(){
			if (this.width <=0 || this.height <=0)return true;
			return false;
		}

		/**此矩形的右边距。 x 和 width 属性的和。*/
		__getset(0,__proto,'right',function(){
			return this.x+this.width;
		});

		/**此矩形的底边距。y 和 height 属性的和。*/
		__getset(0,__proto,'bottom',function(){
			return this.y+this.height;
		});

		Rectangle._getBoundPointS=function(x,y,width,height){
			var rst=Rectangle._temA;
			rst.length=0;
			if (width==0 || height==0)return rst;
			rst.push(x,y,x+width,y,x,y+height,x+width,y+height);
			return rst;
		}

		Rectangle._getWrapRec=function(pointList,rst){
			if (!pointList || pointList.length < 1)return rst ? rst.setTo(0,0,0,0):Rectangle.TEMP.setTo(0,0,0,0);
			rst=rst ? rst :new Rectangle();
			var i,len=pointList.length,minX,maxX,minY,maxY,tPoint=Point.TEMP;
			minX=minY=99999;
			maxX=maxY=-minX;
			for (i=0;i < len;i+=2){
				tPoint.x=pointList[i];
				tPoint.y=pointList[i+1];
				minX=minX < tPoint.x ? minX :tPoint.x;
				minY=minY < tPoint.y ? minY :tPoint.y;
				maxX=maxX > tPoint.x ? maxX :tPoint.x;
				maxY=maxY > tPoint.y ? maxY :tPoint.y;
			}
			return rst.setTo(minX,minY,maxX-minX,maxY-minY);
		}

		Rectangle.EMPTY=new Rectangle();
		Rectangle.TEMP=new Rectangle();
		Rectangle._temB=[];
		Rectangle._temA=[];
		return Rectangle;
	})()


	/**
	*<code>SoundManager</code> 是一个声音管理类。
	*/
	//class laya.media.SoundManager
	var SoundManager=(function(){
		function SoundManager(){};
		__class(SoundManager,'laya.media.SoundManager');
		/**
		*设置是否失去焦点后自动停止背景音乐。
		*@param v Boolean 值。
		*
		*/
		/**
		*表示是否失去焦点后自动停止背景音乐。
		*@return
		*/
		__getset(1,SoundManager,'autoStopMusic',function(){
			return SoundManager._autoStopMusic;
			},function(v){
			Laya.stage.off("blur",null,SoundManager._stageOnBlur);
			Laya.stage.off("focus",null,SoundManager._stageOnFocus);
			Laya.stage.off("visibilitychange",null,SoundManager._visibilityChange);
			SoundManager._autoStopMusic=v;
			if (v){
				Laya.stage.on("blur",null,SoundManager._stageOnBlur);
				Laya.stage.on("focus",null,SoundManager._stageOnFocus);
				Laya.stage.on("visibilitychange",null,SoundManager._visibilityChange);
			}
		});

		/**
		*表示是否静音。
		*/
		__getset(1,SoundManager,'muted',function(){
			return SoundManager._muted;
			},function(value){
			if (value){
				SoundManager.stopAllSound();
			}
			SoundManager.musicMuted=value;
			SoundManager._muted=value;
		});

		/**表示是否使背景音乐静音。*/
		__getset(1,SoundManager,'musicMuted',function(){
			return SoundManager._musicMuted;
			},function(value){
			if (value){
				if (SoundManager._tMusic)
					SoundManager.stopSound(SoundManager._tMusic);
				SoundManager._musicMuted=value;
				}else {
				SoundManager._musicMuted=value;
				if (SoundManager._tMusic){
					SoundManager.playMusic(SoundManager._tMusic);
				}
			}
		});

		/**表示是否使音效静音。*/
		__getset(1,SoundManager,'soundMuted',function(){
			return SoundManager._soundMuted;
			},function(value){
			SoundManager._soundMuted=value;
		});

		SoundManager.addChannel=function(channel){
			if (SoundManager._channels.indexOf(channel)>=0)return;
			SoundManager._channels.push(channel);
		}

		SoundManager.removeChannel=function(channel){
			var i=0;
			for (i=SoundManager._channels.length-1;i >=0;i--){
				if (SoundManager._channels[i]==channel){
					SoundManager._channels.splice(i,1);
				}
			}
		}

		SoundManager._visibilityChange=function(){
			if (Laya.stage.isVisibility){
				SoundManager._stageOnFocus();
				}else {
				SoundManager._stageOnBlur();
			}
		}

		SoundManager._stageOnBlur=function(){
			if (SoundManager._musicChannel){
				if (!SoundManager._musicChannel.isStopped){
					SoundManager._blurPaused=true;
					SoundManager._musicLoops=SoundManager._musicChannel.loops;
					SoundManager._musicCompleteHandler=SoundManager._musicChannel.completeHandler;
					SoundManager._musicPosition=SoundManager._musicChannel.position;
					SoundManager._musicChannel.stop();
					Laya.stage.once("mousedown",null,SoundManager._stageOnFocus);
				}
			}
		}

		SoundManager._stageOnFocus=function(){
			Laya.stage.off("mousedown",null,SoundManager._stageOnFocus);
			if (SoundManager._blurPaused){
				if (SoundManager._tMusic){
					SoundManager.playMusic(SoundManager._tMusic,SoundManager._musicLoops,SoundManager._musicCompleteHandler,SoundManager._musicPosition);
				}
				SoundManager._blurPaused=false;
			}
		}

		SoundManager.playSound=function(url,loops,complete,soundClass,startTime){
			(loops===void 0)&& (loops=1);
			(startTime===void 0)&& (startTime=0);
			if (SoundManager._muted)return null;
			if (url==SoundManager._tMusic){
				if (SoundManager._musicMuted)return null;
				}else {
				if (SoundManager._soundMuted)return null;
			};
			var tSound=Laya.loader.getRes(url);
			if (!soundClass)soundClass=SoundManager._soundClass;
			if (!tSound){
				tSound=new soundClass();
				tSound.load(url);
				Loader.cacheRes(url,tSound);
			};
			var channel;
			channel=tSound.play(startTime,loops);
			channel.url=url;
			channel.volume=(url==SoundManager._tMusic)? SoundManager.musicVolume :SoundManager.soundVolume;
			channel.completeHandler=complete;
			return channel;
		}

		SoundManager.destroySound=function(url){
			var tSound=Laya.loader.getRes(url);
			if (tSound){
				Loader.clearRes(url);
				tSound.dispose();
			}
		}

		SoundManager.playMusic=function(url,loops,complete,startTime){
			(loops===void 0)&& (loops=0);
			(startTime===void 0)&& (startTime=0);
			SoundManager._tMusic=url;
			if (SoundManager._musicChannel)SoundManager._musicChannel.stop();
			return SoundManager._musicChannel=SoundManager.playSound(url,loops,complete,null,startTime);
		}

		SoundManager.stopSound=function(url){
			var i=0;
			var channel;
			for (i=SoundManager._channels.length-1;i >=0;i--){
				channel=SoundManager._channels[i];
				if (channel.url==url){
					channel.stop();
				}
			}
		}

		SoundManager.stopAll=function(){
			SoundManager._tMusic=null;
			var i=0;
			var channel;
			for (i=SoundManager._channels.length-1;i >=0;i--){
				channel=SoundManager._channels[i];
				channel.stop();
			}
		}

		SoundManager.stopAllSound=function(){
			var i=0;
			var channel;
			for (i=SoundManager._channels.length-1;i >=0;i--){
				channel=SoundManager._channels[i];
				if (channel.url !=SoundManager._tMusic){
					channel.stop();
				}
			}
		}

		SoundManager.stopMusic=function(){
			SoundManager._tMusic=null;
			if (SoundManager._musicChannel)SoundManager._musicChannel.stop();
		}

		SoundManager.setSoundVolume=function(volume,url){
			if (url){
				SoundManager._setVolume(url,volume);
				}else {
				SoundManager.soundVolume=volume;
				var i=0;
				var channel;
				for (i=SoundManager._channels.length-1;i >=0;i--){
					channel=SoundManager._channels[i];
					if (channel.url !=SoundManager._tMusic){
						channel.volume=volume;
					}
				}
			}
		}

		SoundManager.setMusicVolume=function(volume){
			SoundManager.musicVolume=volume;
			SoundManager._setVolume(SoundManager._tMusic,volume);
		}

		SoundManager._setVolume=function(url,volume){
			var i=0;
			var channel;
			for (i=SoundManager._channels.length-1;i >=0;i--){
				channel=SoundManager._channels[i];
				if (channel.url==url){
					channel.volume=volume;
				}
			}
		}

		SoundManager.musicVolume=1;
		SoundManager.soundVolume=1;
		SoundManager.playbackRate=1;
		SoundManager._muted=false;
		SoundManager._soundMuted=false;
		SoundManager._musicMuted=false;
		SoundManager._tMusic=null;
		SoundManager._musicChannel=null;
		SoundManager._channels=[];
		SoundManager._autoStopMusic=false;
		SoundManager._blurPaused=false;
		SoundManager._musicLoops=0;
		SoundManager._musicPosition=0;
		SoundManager._musicCompleteHandler=null;
		SoundManager._soundClass=null
		return SoundManager;
	})()


	/**
	*<p> <code>LocalStorage</code> 类用于没有时间限制的数据存储。</p>
	*/
	//class laya.net.LocalStorage
	var LocalStorage=(function(){
		var Storage;
		function LocalStorage(){};
		__class(LocalStorage,'laya.net.LocalStorage');
		LocalStorage.__init__=function(){
			if (!LocalStorage._baseClass){
				LocalStorage._baseClass=Storage;
				Storage.init();
			}
			LocalStorage.items=LocalStorage._baseClass.items;
			LocalStorage.support=LocalStorage._baseClass.support;
		}

		LocalStorage.setItem=function(key,value){
			LocalStorage._baseClass.setItem(key,value);
		}

		LocalStorage.getItem=function(key){
			return LocalStorage._baseClass.getItem(key);
		}

		LocalStorage.setJSON=function(key,value){
			LocalStorage._baseClass.setJSON(key,value);
		}

		LocalStorage.getJSON=function(key){
			return LocalStorage._baseClass.getJSON(key);
		}

		LocalStorage.removeItem=function(key){
			LocalStorage._baseClass.removeItem(key);
		}

		LocalStorage.clear=function(){
			LocalStorage._baseClass.clear();
		}

		LocalStorage._baseClass=null
		LocalStorage.items=null
		LocalStorage.support=false;
		LocalStorage.__init$=function(){
			//class Storage
			Storage=(function(){
				function Storage(){};
				__class(Storage,'');
				Storage.init=function(){
					try{Storage.items=window.localStorage;Storage.setItem('laya','1');Storage.removeItem('laya');Storage.support=true;}catch(e){}if(!Storage.support)console.log('LocalStorage is not supprot or browser is private mode.');
				}
				Storage.setItem=function(key,value){
					try {
						Storage.support && Storage.items.setItem(key,value);
						}catch (e){
						console.warn("set localStorage failed",e);
					}
				}
				Storage.getItem=function(key){
					return Storage.support ? Storage.items.getItem(key):null;
				}
				Storage.setJSON=function(key,value){
					try {
						Storage.support && Storage.items.setItem(key,JSON.stringify(value));
						}catch (e){
						console.warn("set localStorage failed",e);
					}
				}
				Storage.getJSON=function(key){
					return JSON.parse(Storage.support ? Storage.items.getItem(key):null);
				}
				Storage.removeItem=function(key){
					Storage.support && Storage.items.removeItem(key);
				}
				Storage.clear=function(){
					Storage.support && Storage.items.clear();
				}
				Storage.items=null
				Storage.support=true;
				return Storage;
			})()
		}

		return LocalStorage;
	})()


	/**
	*<p> <code>URL</code> 类用于定义地址信息。</p>
	*/
	//class laya.net.URL
	var URL=(function(){
		function URL(url){
			this._url=null;
			this._path=null;
			this._url=URL.formatURL(url);
			this._path=URL.getPath(url);
		}

		__class(URL,'laya.net.URL');
		var __proto=URL.prototype;
		/**地址的路径。*/
		__getset(0,__proto,'path',function(){
			return this._path;
		});

		/**格式化后的地址。*/
		__getset(0,__proto,'url',function(){
			return this._url;
		});

		URL.formatURL=function(url,base){
			if (!url)return "null path";
			if (URL.customFormat !=null)url=URL.customFormat(url,base);
			var char1=url.charAt(0);
			if (char1==="h" || char1==="f"){
				if (url.indexOf(":")> 0)return url;
				}else if (char1==="."){
				URL.formatRelativePath((base || URL.basePath)+url);
				}else if (char1==='~'){
				return URL.rootPath+url.substring(1);
				}else if (char1==="d"){
				if (url.indexOf("data:image")===0)return url;
				}else if (char1==="/" || url.indexOf(":")> 0){
				return url;
			}
			return (base || URL.basePath)+url;
		}

		URL.formatRelativePath=function(value){
			var parts=value.split("/");
			for (var i=0,len=parts.length;i < len;i++){
				if (parts[i]=='..'){
					parts.splice(i-1,2);
					i-=2;
				}
			}
			return parts.join('/');
		}

		URL.isAbsolute=function(url){
			return url.indexOf(":")> 0 || url.charAt(0)=='/';
		}

		URL.getPath=function(url){
			var ofs=url.lastIndexOf('/');
			return ofs > 0 ? url.substr(0,ofs+1):"";
		}

		URL.getFileName=function(url){
			var ofs=url.lastIndexOf('/');
			return ofs > 0 ? url.substr(ofs+1):url;
		}

		URL.version={};
		URL.basePath="";
		URL.rootPath="";
		URL.customFormat=function(url){
			var newUrl=URL.version[url];
			if (!Render.isConchApp && newUrl)url+="?v="+newUrl;
			return url;
		}

		return URL;
	})()


	/**
	*@private
	*<code>Render</code> 是渲染管理类。它是一个单例，可以使用 Laya.render 访问。
	*/
	//class laya.renders.Render
	var Render=(function(){
		function Render(width,height){
			this._timeId=0;
			var style=Render._mainCanvas.source.style;
			style.position='absolute';
			style.top=style.left="0px";
			style.background="#000000";
			Render._mainCanvas.source.id="layaCanvas";
			var isWebGl=laya.renders.Render.isWebGL;
			Render._mainCanvas.source.width=width;
			Render._mainCanvas.source.height=height;
			isWebGl && Render.WebGL.init(Render._mainCanvas,width,height);
			Browser.container.appendChild(Render._mainCanvas.source);
			Render._context=new RenderContext(width,height,isWebGl ? null :Render._mainCanvas);
			Render._context.ctx.setIsMainContext();
			Browser.window.requestAnimationFrame(loop);
			function loop (){
				Laya.stage._loop();
				Browser.window.requestAnimationFrame(loop);
			}
			Laya.stage.on("visibilitychange",this,this._onVisibilitychange);
		}

		__class(Render,'laya.renders.Render');
		var __proto=Render.prototype;
		/**@private */
		__proto._onVisibilitychange=function(){
			if (Laya.stage.isVisibility){
				this._timeId=Browser.window.setInterval(this._enterFrame,1000);
				}else if (this._timeId !=0){
				Browser.window.clearInterval(this._timeId);
			}
		}

		/**@private */
		__proto._enterFrame=function(e){
			Laya.stage._loop();
		}

		/**目前使用的渲染器。*/
		__getset(1,Render,'context',function(){
			return Render._context;
		});

		/**渲染使用的原生画布引用。 */
		__getset(1,Render,'canvas',function(){
			return Render._mainCanvas.source;
		});

		Render._context=null
		Render._mainCanvas=null
		Render.WebGL=null
		Render.isConchNode=false;
		Render.isConchApp=false;
		Render.isConchWebGL=false;
		Render.isWebGL=false;
		Render.is3DMode=false;
		Render.optimizeTextureMemory=function(url,texture){
			return true;
		}

		Render.__init$=function(){
			window.ConchRenderType=window.ConchRenderType||1;
			window.ConchRenderType|=(!window.conch?0:0x04);;{
				Render.isConchNode=(window.ConchRenderType & 5)==5;
				Render.isConchApp=(window.ConchRenderType & 0x04)==0x04;
				Render.isConchWebGL=window.ConchRenderType==6;
			};;
		}

		return Render;
	})()


	/**
	*@private
	*渲染环境
	*/
	//class laya.renders.RenderContext
	var RenderContext=(function(){
		function RenderContext(width,height,canvas){
			this.x=0;
			this.y=0;
			//this.canvas=null;
			//this.ctx=null;
			this._drawTexture=function(x,y,args){
				if (args[0].loaded)this.ctx.drawTexture(args[0],args[1],args[2],args[3],args[4],x,y);
			}
			this._fillTexture=function(x,y,args){
				if (args[0].loaded)this.ctx.fillTexture(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7]);
			}
			this._drawTextureWithTransform=function(x,y,args){
				if (args[0].loaded)this.ctx.drawTextureWithTransform(args[0],args[1],args[2],args[3],args[4],args[5],x,y,args[6]);
			}
			this._fillQuadrangle=function(x,y,args){
				this.ctx.fillQuadrangle(args[0],args[1],args[2],args[3],args[4]);
			}
			this._drawRect=function(x,y,args){
				var ctx=this.ctx;
				if (args[4] !=null){
					ctx.fillStyle=args[4];
					ctx.fillRect(x+args[0],y+args[1],args[2],args[3],null);
				}
				if (args[5] !=null){
					ctx.strokeStyle=args[5];
					ctx.lineWidth=args[6];
					ctx.strokeRect(x+args[0],y+args[1],args[2],args[3],args[6]);
				}
			}
			this._drawPie=function(x,y,args){
				var ctx=this.ctx;
				Render.isWebGL && ctx.setPathId(args[8]);
				ctx.beginPath();
				if (Render.isWebGL){
					ctx.movePath(args[0]+x,args[1]+y);
					ctx.moveTo(0,0);
					}else {
					ctx.moveTo(x+args[0],y+args[1]);
				}
				ctx.arc(x+args[0],y+args[1],args[2],args[3],args[4]);
				ctx.closePath();
				this._fillAndStroke(args[5],args[6],args[7],true);
			}
			this._clipRect=function(x,y,args){
				this.ctx.clipRect(x+args[0],y+args[1],args[2],args[3]);
			}
			this._fillRect=function(x,y,args){
				this.ctx.fillRect(x+args[0],y+args[1],args[2],args[3],args[4]);
			}
			this._drawCircle=function(x,y,args){
				var ctx=this.ctx;
				Render.isWebGL && ctx.setPathId(args[6]);
				Stat.drawCall++;
				ctx.beginPath();
				Render.isWebGL && ctx.movePath(args[0]+x,args[1]+y);
				ctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2);
				ctx.closePath();
				this._fillAndStroke(args[3],args[4],args[5],true);
			}
			this._fillCircle=function(x,y,args){
				Stat.drawCall++;
				var ctx=this.ctx;
				ctx.beginPath();
				ctx.fillStyle=args[3];
				ctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2);
				ctx.fill();
			}
			this._setShader=function(x,y,args){
				this.ctx.setShader(args[0]);
			}
			this._drawLine=function(x,y,args){
				var ctx=this.ctx;
				Render.isWebGL && ctx.setPathId(args[6]);
				ctx.beginPath();
				ctx.strokeStyle=args[4];
				ctx.lineWidth=args[5];
				if (Render.isWebGL){
					ctx.movePath(x,y);
					ctx.moveTo(args[0],args[1]);
					ctx.lineTo(args[2],args[3]);
					}else {
					ctx.moveTo(x+args[0],y+args[1]);
					ctx.lineTo(x+args[2],y+args[3]);
				}
				ctx.stroke();
			}
			this._drawLines=function(x,y,args){
				var ctx=this.ctx;
				Render.isWebGL && ctx.setPathId(args[5]);
				ctx.beginPath();
				x+=args[0],y+=args[1];
				Render.isWebGL && ctx.movePath(x,y);
				ctx.strokeStyle=args[3];
				ctx.lineWidth=args[4];
				var points=args[2];
				var i=2,n=points.length;
				if (Render.isWebGL){
					ctx.moveTo(points[0],points[1]);
					while (i < n){
						ctx.lineTo(points[i++],points[i++]);
					}
					}else {
					ctx.moveTo(x+points[0],y+points[1]);
					while (i < n){
						ctx.lineTo(x+points[i++],y+points[i++]);
					}
				}
				ctx.stroke();
			}
			this._drawLinesWebGL=function(x,y,args){
				this.ctx.drawLines(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4]);
			}
			this._drawCurves=function(x,y,args){
				this.ctx.drawCurves(x,y,args);
			}
			this._draw=function(x,y,args){
				args[0].call(null,this,x,y);
			}
			this._transformByMatrix=function(x,y,args){
				this.ctx.transformByMatrix(args[0]);
			}
			this._setTransform=function(x,y,args){
				this.ctx.setTransform(args[0],args[1],args[2],args[3],args[4],args[5]);
			}
			this._setTransformByMatrix=function(x,y,args){
				this.ctx.setTransformByMatrix(args[0]);
			}
			this._save=function(x,y,args){
				this.ctx.save();
			}
			this._restore=function(x,y,args){
				this.ctx.restore();
			}
			this._translate=function(x,y,args){
				this.ctx.translate(args[0],args[1]);
			}
			this._transform=function(x,y,args){
				this.ctx.translate(args[1]+x,args[2]+y);
				var mat=args[0];
				this.ctx.transform(mat.a,mat.b,mat.c,mat.d,mat.tx,mat.ty);
				this.ctx.translate(-x-args[1],-y-args[2]);
			}
			this._rotate=function(x,y,args){
				this.ctx.translate(args[1]+x,args[2]+y);
				this.ctx.rotate(args[0]);
				this.ctx.translate(-x-args[1],-y-args[2]);
			}
			this._scale=function(x,y,args){
				this.ctx.translate(args[2]+x,args[3]+y);
				this.ctx.scale(args[0],args[1]);
				this.ctx.translate(-x-args[2],-y-args[3]);
			}
			this._alpha=function(x,y,args){
				this.ctx.globalAlpha *=args[0];
			}
			this._setAlpha=function(x,y,args){
				this.ctx.globalAlpha=args[0];
			}
			this._fillText=function(x,y,args){
				this.ctx.fillText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5]);
			}
			this._strokeText=function(x,y,args){
				this.ctx.strokeText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6]);
			}
			this._fillBorderText=function(x,y,args){
				this.ctx.fillBorderText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7]);
			}
			this._blendMode=function(x,y,args){
				this.ctx.globalCompositeOperation=args[0];
			}
			this._beginClip=function(x,y,args){
				this.ctx.beginClip && this.ctx.beginClip(x+args[0],y+args[1],args[2],args[3]);
			}
			this._setIBVB=function(x,y,args){
				this.ctx.setIBVB(args[0]+x,args[1]+y,args[2],args[3],args[4],args[5],args[6],args[7]);
			}
			this._fillTrangles=function(x,y,args){
				this.ctx.fillTrangles(args[0],args[1]+x,args[2]+y,args[3],args[4]);
			}
			this._drawPath=function(x,y,args){
				var ctx=this.ctx;
				Render.isWebGL && ctx.setPathId(-1);
				ctx.beginPath();
				x+=args[0],y+=args[1];
				var paths=args[2];
				for (var i=0,n=paths.length;i < n;i++){
					var path=paths[i];
					switch (path[0]){
						case "moveTo":
							ctx.moveTo(x+path[1],y+path[2]);
							break ;
						case "lineTo":
							ctx.lineTo(x+path[1],y+path[2]);
							break ;
						case "arcTo":
							ctx.arcTo(x+path[1],y+path[2],x+path[3],y+path[4],path[5]);
							break ;
						case "closePath":
							ctx.closePath();
							break ;
						}
				};
				var brush=args[3];
				if (brush !=null){
					ctx.fillStyle=brush.fillStyle;
					ctx.fill();
				};
				var pen=args[4];
				if (pen !=null){
					ctx.strokeStyle=pen.strokeStyle;
					ctx.lineWidth=pen.lineWidth || 1;
					ctx.lineJoin=pen.lineJoin;
					ctx.lineCap=pen.lineCap;
					ctx.miterLimit=pen.miterLimit;
					ctx.stroke();
				}
			}
			this.drawPoly=function(x,y,args){
				this.ctx.drawPoly(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4],args[5],args[6]);
			}
			this._drawPoly=function(x,y,args){
				var ctx=this.ctx;
				var points=args[2];
				var i=2,n=points.length;
				if (Render.isWebGL){
					ctx.setPathId(args[6]);
					ctx.beginPath();
					x+=args[0],y+=args[1];
					ctx.movePath(x,y);
					ctx.moveTo(points[0],points[1]);
					while (i < n){
						ctx.lineTo(points[i++],points[i++]);
					}
					}else {
					ctx.beginPath();
					x+=args[0],y+=args[1];
					ctx.moveTo(x+points[0],y+points[1]);
					while (i < n){
						ctx.lineTo(x+points[i++],y+points[i++]);
					}
				}
				ctx.closePath();
				this._fillAndStroke(args[3],args[4],args[5],args[7]);
			}
			this._drawSkin=function(x,y,args){
				var tSprite=args[0];
				if (tSprite){
					var ctx=this.ctx;
					tSprite.render(ctx,x,y);
				}
			}
			this._drawParticle=function(x,y,args){
				this.ctx.drawParticle(x+this.x,y+this.y,args[0]);
			}
			if (canvas){
				this.ctx=canvas.getContext('2d');
				}else {
				canvas=HTMLCanvas.create("3D");
				this.ctx=RunDriver.createWebGLContext2D(canvas);
				canvas._setContext(this.ctx);
			}
			canvas.size(width,height);
			this.canvas=canvas;
		}

		__class(RenderContext,'laya.renders.RenderContext');
		var __proto=RenderContext.prototype;
		/**销毁当前渲染环境*/
		__proto.destroy=function(){
			if (this.canvas){
				this.canvas.destroy();
				this.canvas=null;
			}
			if (this.ctx){
				this.ctx.destroy();
				this.ctx=null;
			}
		}

		__proto.drawTexture=function(tex,x,y,width,height){
			if (tex.loaded)this.ctx.drawTexture(tex,x,y,width,height,this.x,this.y);
		}

		__proto._drawTextures=function(x,y,args){
			if (args[0].loaded)this.ctx.drawTextures(args[0],args[1],x+this.x,y+this.y);
		}

		__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,alpha){
			if (tex.loaded)this.ctx.drawTextureWithTransform(tex,x,y,width,height,m,this.x,this.y,alpha);
		}

		__proto.fillQuadrangle=function(tex,x,y,point4,m){
			this.ctx.fillQuadrangle(tex,x,y,point4,m);
		}

		__proto.drawCanvas=function(canvas,x,y,width,height){
			this.ctx.drawCanvas(canvas,x+this.x,y+this.y,width,height);
		}

		__proto.drawRect=function(x,y,width,height,color,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var ctx=this.ctx;
			ctx.strokeStyle=color;
			ctx.lineWidth=lineWidth;
			ctx.strokeRect(x+this.x,y+this.y,width,height,lineWidth);
		}

		__proto._fillAndStroke=function(fillColor,strokeColor,lineWidth,isConvexPolygon){
			(isConvexPolygon===void 0)&& (isConvexPolygon=false);
			var ctx=this.ctx;
			if (fillColor !=null){
				ctx.fillStyle=fillColor;
				if (Render.isWebGL){
					ctx.fill(isConvexPolygon);
					}else {
					ctx.fill();
				}
			}
			if (strokeColor !=null && lineWidth > 0){
				ctx.strokeStyle=strokeColor;
				ctx.lineWidth=lineWidth;
				ctx.stroke();
			}
		}

		//ctx.translate(-x-args[0],-y-args[1]);
		__proto.clipRect=function(x,y,width,height){
			this.ctx.clipRect(x+this.x,y+this.y,width,height);
		}

		__proto.fillRect=function(x,y,width,height,fillStyle){
			this.ctx.fillRect(x+this.x,y+this.y,width,height,fillStyle);
		}

		__proto.drawCircle=function(x,y,radius,color,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			Stat.drawCall++;
			var ctx=this.ctx;
			ctx.beginPath();
			ctx.strokeStyle=color;
			ctx.lineWidth=lineWidth;
			ctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2);
			ctx.stroke();
		}

		__proto.fillCircle=function(x,y,radius,color){
			Stat.drawCall++;
			var ctx=this.ctx;
			ctx.beginPath();
			ctx.fillStyle=color;
			ctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2);
			ctx.fill();
		}

		__proto.setShader=function(shader){
			this.ctx.setShader(shader);
		}

		__proto.drawLine=function(fromX,fromY,toX,toY,color,lineWidth){
			(lineWidth===void 0)&& (lineWidth=1);
			var ctx=this.ctx;
			ctx.beginPath();
			ctx.strokeStyle=color;
			ctx.lineWidth=lineWidth;
			ctx.moveTo(this.x+fromX,this.y+fromY);
			ctx.lineTo(this.x+toX,this.y+toY);
			ctx.stroke();
		}

		__proto.clear=function(){
			this.ctx.clear();
		}

		__proto.transformByMatrix=function(value){
			this.ctx.transformByMatrix(value);
		}

		__proto.setTransform=function(a,b,c,d,tx,ty){
			this.ctx.setTransform(a,b,c,d,tx,ty);
		}

		__proto.setTransformByMatrix=function(value){
			this.ctx.setTransformByMatrix(value);
		}

		__proto.save=function(){
			this.ctx.save();
		}

		__proto.restore=function(){
			this.ctx.restore();
		}

		__proto.translate=function(x,y){
			this.ctx.translate(x,y);
		}

		__proto.transform=function(a,b,c,d,tx,ty){
			this.ctx.transform(a,b,c,d,tx,ty);
		}

		__proto.rotate=function(angle){
			this.ctx.rotate(angle);
		}

		__proto.scale=function(scaleX,scaleY){
			this.ctx.scale(scaleX,scaleY);
		}

		__proto.alpha=function(value){
			this.ctx.globalAlpha *=value;
		}

		__proto.setAlpha=function(value){
			this.ctx.globalAlpha=value;
		}

		__proto.fillWords=function(words,x,y,font,color){
			this.ctx.fillWords(words,x,y,font,color);
		}

		/***@private */
		__proto.fillBorderWords=function(words,x,y,font,fillColor,borderColor,lineWidth){
			this.ctx.fillBorderWords(words,x,y,font,fillColor,borderColor,lineWidth);
		}

		__proto.fillText=function(text,x,y,font,color,textAlign){
			this.ctx.fillText(text,x+this.x,y+this.y,font,color,textAlign);
		}

		__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){
			this.ctx.strokeText(text,x+this.x,y+this.y,font,color,lineWidth,textAlign);
		}

		__proto.blendMode=function(type){
			this.ctx.globalCompositeOperation=type;
		}

		__proto.flush=function(){
			this.ctx.flush && this.ctx.flush();
		}

		__proto.addRenderObject=function(o){
			this.ctx.addRenderObject(o);
		}

		__proto.beginClip=function(x,y,w,h){
			this.ctx.beginClip && this.ctx.beginClip(x,y,w,h);
		}

		__proto.endClip=function(){
			this.ctx.endClip && this.ctx.endClip();
		}

		__proto.fillTrangles=function(x,y,args){
			this.ctx.fillTrangles(args[0],args[1],args[2],args[3],args.length > 4 ? args[4] :null);
		}

		RenderContext.PI2=2 *Math.PI;
		return RenderContext;
	})()


	/**
	*@private
	*精灵渲染器
	*/
	//class laya.renders.RenderSprite
	var RenderSprite=(function(){
		function RenderSprite(type,next){
			//this._next=null;
			//this._fun=null;
			this._next=next || RenderSprite.NORENDER;
			switch (type){
				case 0:
					this._fun=this._no;
					return;
				case 0x01:
					this._fun=this._image;
					return;
				case 0x02:
					this._fun=this._alpha;
					return;
				case 0x04:
					this._fun=this._transform;
					return;
				case 0x08:
					this._fun=this._blend;
					return;
				case 0x10:
					this._fun=this._canvas;
					return;
				case 0x40:
					this._fun=this._mask;
					return;
				case 0x80:
					this._fun=this._clip;
					return;
				case 0x100:
					this._fun=this._style;
					return;
				case 0x200:
					this._fun=this._graphics;
					return;
				case 0x800:
					this._fun=this._childs;
					return;
				case 0x400:
					this._fun=this._custom;
					return;
				case 0x01 | 0x200:
					this._fun=this._image2;
					return;
				case 0x01 | 0x04 | 0x200:
					this._fun=this._image2;
					return;
				case 0x20:
					this._fun=Filter._filter;
					return;
				case 0x11111:
					this._fun=RenderSprite._initRenderFun;
					return;
				}
			this.onCreate(type);
		}

		__class(RenderSprite,'laya.renders.RenderSprite');
		var __proto=RenderSprite.prototype;
		__proto.onCreate=function(type){}
		__proto._style=function(sprite,context,x,y){
			sprite._style.render(sprite,context,x,y);
			var next=this._next;
			next._fun.call(next,sprite,context,x,y);
		}

		__proto._no=function(sprite,context,x,y){}
		__proto._custom=function(sprite,context,x,y){
			sprite.customRender(context,x,y);
			var tf=sprite._style._tf;
			this._next._fun.call(this._next,sprite,context,x-tf.translateX,y-tf.translateY);
		}

		__proto._clip=function(sprite,context,x,y){
			var next=this._next;
			if (next==RenderSprite.NORENDER)return;
			var r=sprite._style.scrollRect;
			context.ctx.save();
			context.ctx.clipRect(x,y,r.width,r.height);
			next._fun.call(next,sprite,context,x-r.x,y-r.y);
			context.ctx.restore();
		}

		__proto._blend=function(sprite,context,x,y){
			var style=sprite._style;
			if (style.blendMode){
				context.ctx.globalCompositeOperation=style.blendMode;
			};
			var next=this._next;
			next._fun.call(next,sprite,context,x,y);
			context.ctx.globalCompositeOperation="source-over";
		}

		__proto._mask=function(sprite,context,x,y){
			var next=this._next;
			next._fun.call(next,sprite,context,x,y);
			var mask=sprite.mask;
			if (mask){
				context.ctx.globalCompositeOperation="destination-in";
				if (mask.numChildren > 0 || !mask.graphics._isOnlyOne()){
					mask.cacheAsBitmap=true;
				}
				mask.render(context,x,y);
			}
			context.ctx.globalCompositeOperation="source-over";
		}

		__proto._graphics=function(sprite,context,x,y){
			var tf=sprite._style._tf;
			sprite._graphics && sprite._graphics._render(sprite,context,x-tf.translateX,y-tf.translateY);
			var next=this._next;
			next._fun.call(next,sprite,context,x,y);
		}

		__proto._image=function(sprite,context,x,y){
			var style=sprite._style;
			context.ctx.drawTexture2(x,y,style._tf.translateX,style._tf.translateY,sprite.transform,style.alpha,style.blendMode,sprite._graphics._one);
		}

		__proto._image2=function(sprite,context,x,y){
			var tf=sprite._style._tf;
			context.ctx.drawTexture2(x,y,tf.translateX,tf.translateY,sprite.transform,1,null,sprite._graphics._one);
		}

		__proto._alpha=function(sprite,context,x,y){
			var style=sprite._style;
			var alpha;
			if ((alpha=style.alpha)> 0.01){
				var temp=context.ctx.globalAlpha;
				context.ctx.globalAlpha *=alpha;
				var next=this._next;
				next._fun.call(next,sprite,context,x,y);
				context.ctx.globalAlpha=temp;
			}
		}

		__proto._transform=function(sprite,context,x,y){
			var transform=sprite.transform,_next=this._next;
			if (transform && _next !=RenderSprite.NORENDER){
				context.save();
				context.transform(transform.a,transform.b,transform.c,transform.d,transform.tx+x,transform.ty+y);
				_next._fun.call(_next,sprite,context,0,0);
				context.restore();
			}else
			_next._fun.call(_next,sprite,context,x,y);
		}

		__proto._childs=function(sprite,context,x,y){
			var style=sprite._style;
			x+=-style._tf.translateX+style.paddingLeft;
			y+=-style._tf.translateY+style.paddingTop;
			if (style._calculation){
				var words=sprite._getWords();
				if (words){
					var tStyle=style;
					if (tStyle){
						if (tStyle.stroke){
							context.fillBorderWords(words,x,y,tStyle.font,tStyle.color,tStyle.strokeColor,tStyle.stroke);
							}else{
							context.fillWords(words,x,y,tStyle.font,tStyle.color);
						}
					}
				}
			};
			var childs=sprite._childs,n=childs.length,ele;
			if (sprite.viewport || (sprite.optimizeScrollRect && sprite._style.scrollRect)){
				var rect=sprite.viewport || sprite._style.scrollRect;
				var left=rect.x;
				var top=rect.y;
				var right=rect.right;
				var bottom=rect.bottom;
				var _x=NaN,_y=NaN;
				for (i=0;i < n;++i){
					if ((ele=childs [i]).visible && ((_x=ele._x)< right && (_x+ele.width)> left && (_y=ele._y)< bottom && (_y+ele.height)> top)){
						ele.render(context,x,y);
					}
				}
				}else {
				for (var i=0;i < n;++i)
				(ele=(childs [i]))._style.visible && ele.render(context,x,y);
			}
		}

		__proto._canvas=function(sprite,context,x,y){
			var _cacheCanvas=sprite._$P.cacheCanvas;
			var _next=this._next;
			if (!_cacheCanvas){
				_next._fun.call(_next,sprite,tx,x,y);
				return;
			};
			var tx=_cacheCanvas.ctx;
			var _repaint=sprite._needRepaint()|| (!tx);
			var canvas;
			var left;
			var top;
			var tRec;
			_cacheCanvas.type==='bitmap' ? (Stat.canvasBitmap++):(Stat.canvasNormal++);
			if (_repaint){
				if (!_cacheCanvas._cacheRec)
					_cacheCanvas._cacheRec=new Rectangle();
				var w,h;
				if (!Render.isWebGL || _cacheCanvas.type==="bitmap"){
					tRec=sprite.getSelfBounds();
					tRec.x-=sprite.pivotX;
					tRec.y-=sprite.pivotY;
					tRec.x-=16;
					tRec.y-=16;
					tRec.width+=32;
					tRec.height+=32;
					tRec.x=Math.floor(tRec.x+x)-x;
					tRec.y=Math.floor(tRec.y+y)-y;
					tRec.width=Math.floor(tRec.width);
					tRec.height=Math.floor(tRec.height);
					_cacheCanvas._cacheRec.copyFrom(tRec);
					}else{
					_cacheCanvas._cacheRec.setTo(-sprite.pivotX,-sprite.pivotY,1,1);
				}
				tRec=_cacheCanvas._cacheRec;
				var scaleX=Render.isWebGL ? 1 :Browser.pixelRatio *Laya.stage.clientScaleX;
				var scaleY=Render.isWebGL ? 1 :Browser.pixelRatio *Laya.stage.clientScaleY;
				if (!Render.isWebGL){
					var chainScaleX=1;
					var chainScaleY=1;
					var tar;
					tar=sprite;
					while (tar && tar !=Laya.stage){
						chainScaleX *=tar.scaleX;
						chainScaleY *=tar.scaleY;
						tar=tar.parent;
					}
					if (Render.isWebGL){
						if (chainScaleX < 1)scaleX *=chainScaleX;
						if (chainScaleY < 1)scaleY *=chainScaleY;
						}else {
						if (chainScaleX > 1)scaleX *=chainScaleX;
						if (chainScaleY > 1)scaleY *=chainScaleY;
					}
				}
				w=tRec.width *scaleX;
				h=tRec.height *scaleY;
				left=tRec.x;
				top=tRec.y;
				if (Render.isWebGL && _cacheCanvas.type==='bitmap' && (w > 2048 || h > 2048)){
					console.warn("cache bitmap size larger than 2048,cache ignored");
					if (_cacheCanvas.ctx){
						Pool.recover("RenderContext",_cacheCanvas.ctx);
						_cacheCanvas.ctx.canvas.size(0,0);
						_cacheCanvas.ctx=null;
					}
					_next._fun.call(_next,sprite,context,x,y);
					return;
				}
				if (!tx){
					tx=_cacheCanvas.ctx=Pool.getItem("RenderContext")|| new RenderContext(w,h,HTMLCanvas.create("AUTO"));
				}
				tx.ctx.sprite=sprite;
				canvas=tx.canvas;
				canvas.clear();
				(canvas.width !=w || canvas.height !=h)&& canvas.size(w,h);
				if (_cacheCanvas.type==='bitmap')canvas.context.asBitmap=true;
				else if(_cacheCanvas.type==='normal')canvas.context.asBitmap=false;
				var t;
				if (scaleX !=1 || scaleY !=1){
					var ctx=(tx).ctx;
					ctx.save();
					ctx.scale(scaleX,scaleY);
					if (!Render.isConchWebGL && Render.isConchApp){
						t=sprite._$P.cf;
						t && ctx.setFilterMatrix && ctx.setFilterMatrix(t._mat,t._alpha);
					}
					_next._fun.call(_next,sprite,tx,-left,-top);
					ctx.restore();
					if (!Render.isConchApp || Render.isConchWebGL)sprite._applyFilters();
					}else {
					ctx=(tx).ctx;
					if (!Render.isConchWebGL && Render.isConchApp){
						t=sprite._$P.cf;
						t && ctx.setFilterMatrix && ctx.setFilterMatrix(t._mat,t._alpha);
					}
					_next._fun.call(_next,sprite,tx,-left,-top);
					if (!Render.isConchApp || Render.isConchWebGL)sprite._applyFilters();
				}
				if (sprite._$P.staticCache)_cacheCanvas.reCache=false;
				Stat.canvasReCache++;
				}else {
				tRec=_cacheCanvas._cacheRec;
				left=tRec.x;
				top=tRec.y;
				canvas=tx.canvas;
			}
			context.drawCanvas(canvas,x+left,y+top,tRec.width,tRec.height);
		}

		RenderSprite.__init__=function(){
			var i=0,len=0;
			var initRender;
			initRender=RunDriver.createRenderSprite(0x11111,null);
			len=RenderSprite.renders.length=0x800 *2;
			for (i=0;i < len;i++)
			RenderSprite.renders[i]=initRender;
			RenderSprite.renders[0]=RunDriver.createRenderSprite(0,null);
			function _initSame (value,o){
				var n=0;
				for (var i=0;i < value.length;i++){
					n |=value[i];
					RenderSprite.renders[n]=o;
				}
			}
			_initSame([0x01,0x200,0x04,0x02],new RenderSprite(0x01,null));
			RenderSprite.renders[0x01 | 0x200]=RunDriver.createRenderSprite(0x01 | 0x200,null);
			RenderSprite.renders[0x01 | 0x04 | 0x200]=new RenderSprite(0x01 | 0x04 | 0x200,null);
		}

		RenderSprite._initRenderFun=function(sprite,context,x,y){
			var type=sprite._renderType;
			var r=RenderSprite.renders[type]=RenderSprite._getTypeRender(type);
			r._fun(sprite,context,x,y);
		}

		RenderSprite._getTypeRender=function(type){
			var rst=null;
			var tType=0x800;
			while (tType > 1){
				if (tType & type)
					rst=RunDriver.createRenderSprite(tType,rst);
				tType=tType >> 1;
			}
			return rst;
		}

		RenderSprite.IMAGE=0x01;
		RenderSprite.ALPHA=0x02;
		RenderSprite.TRANSFORM=0x04;
		RenderSprite.BLEND=0x08;
		RenderSprite.CANVAS=0x10;
		RenderSprite.FILTERS=0x20;
		RenderSprite.MASK=0x40;
		RenderSprite.CLIP=0x80;
		RenderSprite.STYLE=0x100;
		RenderSprite.GRAPHICS=0x200;
		RenderSprite.CUSTOM=0x400;
		RenderSprite.CHILDS=0x800;
		RenderSprite.INIT=0x11111;
		RenderSprite.renders=[];
		RenderSprite.NORENDER=new RenderSprite(0,null);
		return RenderSprite;
	})()


	/**
	*@private
	*Context扩展类
	*/
	//class laya.resource.Context
	var Context=(function(){
		function Context(){
			//this._canvas=null;
			this._repaint=false;
		}

		__class(Context,'laya.resource.Context');
		var __proto=Context.prototype;
		__proto.setIsMainContext=function(){}
		__proto.drawTextures=function(tex,pos,tx,ty){
			Stat.drawCall+=pos.length / 2;
			var w=tex.width;
			var h=tex.height;
			for (var i=0,sz=pos.length;i < sz;i+=2){
				this.drawTexture(tex,pos[i],pos[i+1],w,h,tx,ty);
			}
		}

		/***@private */
		__proto.drawCanvas=function(canvas,x,y,width,height){
			Stat.drawCall++;
			this.drawImage(canvas.source,x,y,width,height);
		}

		/***@private */
		__proto.fillRect=function(x,y,width,height,style){
			Stat.drawCall++;
			style && (this.fillStyle=style);
			this.__fillRect(x,y,width,height);
		}

		/***@private */
		__proto.fillText=function(text,x,y,font,color,textAlign){
			Stat.drawCall++;
			if (arguments.length > 3 && font !=null){
				this.font=font;
				this.fillStyle=color;
				this.textAlign=textAlign;
				this.textBaseline="top";
			}
			this.__fillText(text,x,y);
		}

		/***@private */
		__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){
			Stat.drawCall++;
			this.font=font;
			this.fillStyle=fillColor;
			this.textBaseline="top";
			this.strokeStyle=borderColor;
			this.lineWidth=lineWidth;
			this.textAlign=textAlign;
			this.__strokeText(text,x,y);
			this.__fillText(text,x,y);
		}

		/***@private */
		__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){
			Stat.drawCall++;
			if (arguments.length > 3 && font !=null){
				this.font=font;
				this.strokeStyle=color;
				this.lineWidth=lineWidth;
				this.textAlign=textAlign;
				this.textBaseline="top";
			}
			this.__strokeText(text,x,y);
		}

		/***@private */
		__proto.transformByMatrix=function(value){
			this.transform(value.a,value.b,value.c,value.d,value.tx,value.ty);
		}

		/***@private */
		__proto.setTransformByMatrix=function(value){
			this.setTransform(value.a,value.b,value.c,value.d,value.tx,value.ty);
		}

		/***@private */
		__proto.clipRect=function(x,y,width,height){
			Stat.drawCall++;
			this.beginPath();
			this.rect(x,y,width,height);
			this.clip();
		}

		/***@private */
		__proto.drawTexture=function(tex,x,y,width,height,tx,ty){
			Stat.drawCall++;
			var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;
			this.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx,y+ty,width,height);
		}

		/***@private */
		__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,tx,ty,alpha){
			Stat.drawCall++;
			var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;
			this.save();
			alpha !=1 && (this.globalAlpha *=alpha);
			if (m){
				this.transform(m.a,m.b,m.c,m.d,m.tx+tx,m.ty+ty);
				this.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x ,y,width,height);
				}else {
				this.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx ,y+ty,width,height);
			}
			this.restore();
		}

		/***@private */
		__proto.drawTexture2=function(x,y,pivotX,pivotY,m,alpha,blendMode,args2){
			'use strict';
			var tex=args2[0];
			if (!(tex.loaded && tex.bitmap && tex.source)){
				return;
			}
			Stat.drawCall++;
			var alphaChanged=alpha!==1;
			if (alphaChanged){
				var temp=this.globalAlpha;
				this.globalAlpha *=alpha;
			};
			var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;
			if (m){
				this.save();
				this.transform(m.a,m.b,m.c,m.d,m.tx+x,m.ty+y);
				this.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX ,args2[2]-pivotY,args2[3],args2[4]);
				this.restore();
				}else {
				this.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX+x ,args2[2]-pivotY+y,args2[3],args2[4]);
			}
			if (alphaChanged)this.globalAlpha=temp;
		}

		__proto.fillTexture=function(texture,x,y,width,height,type,offset,other){
			if (!other.pat){
				if (texture.uv !=Texture.DEF_UV){
					var canvas=new HTMLCanvas("2D");
					canvas.getContext('2d');
					canvas.size(texture.width,texture.height);
					canvas.context.drawTexture(texture,0,0,texture.width,texture.height,0,0);
					texture=new Texture(canvas);
				}
				other.pat=this.createPattern(texture.bitmap.source,type);
			};
			var oX=x,oY=y;
			var sX=0,sY=0;
			if (offset){
				oX+=offset.x % texture.width;
				oY+=offset.y % texture.height;
				sX-=offset.x % texture.width;
				sY-=offset.y % texture.height;
			}
			this.translate(oX,oY);
			this.fillRect(sX,sY,width,height,other.pat);
			this.translate(-oX,-oY);
		}

		/***@private */
		__proto.flush=function(){
			return 0;
		}

		/***@private */
		__proto.fillWords=function(words,x,y,font,color){
			font && (this.font=font);
			color && (this.fillStyle=color);
			var _this=this;
			this.textBaseline="top";
			this.textAlign='left';
			for (var i=0,n=words.length;i < n;i++){
				var a=words[i];
				this.__fillText(a.char,a.x+x,a.y+y);
			}
		}

		/***@private */
		__proto.fillBorderWords=function(words,x,y,font,color,borderColor,lineWidth){
			font && (this.font=font);
			color && (this.fillStyle=color);
			this.textBaseline="top";
			this.lineWidth=lineWidth;
			this.textAlign='left';
			this.strokeStyle=borderColor;
			for (var i=0,n=words.length;i < n;i++){
				var a=words[i];
				this.__strokeText(a.char,a.x+x,a.y+y);
				this.__fillText(a.char,a.x+x,a.y+y);
			}
		}

		/***@private */
		__proto.destroy=function(){
			this.canvas.width=this.canvas.height=0;
		}

		/***@private */
		__proto.clear=function(){
			this.clearRect(0,0,this._canvas.width,this._canvas.height);
			this._repaint=false;
		}

		__proto.drawCurves=function(x,y,args){
			this.beginPath();
			this.strokeStyle=args[3];
			this.lineWidth=args[4];
			var points=args[2];
			x+=args[0],y+=args[1];
			this.moveTo(x+points[0],y+points[1]);
			var i=2,n=points.length;
			while (i < n){
				this.quadraticCurveTo(x+points[i++],y+points[i++],x+points[i++],y+points[i++]);
			}
			this.stroke();
		}

		Context.__init__=function(to){
			var from=laya.resource.Context.prototype;
			to=to || CanvasRenderingContext2D.prototype;
			to.__fillText=to.fillText;
			to.__fillRect=to.fillRect;
			to.__strokeText=to.strokeText;
			var funs=['drawTextures','fillWords','fillBorderWords','setIsMainContext','fillRect','strokeText','fillTexture','fillText','transformByMatrix','setTransformByMatrix','clipRect','drawTexture','drawTexture2','drawTextureWithTransform','flush','clear','destroy','drawCanvas','fillBorderText','drawCurves'];
			funs.forEach(function(i){
				to[i]=from[i];
			});
		}

		Context._default=new Context();
		return Context;
	})()


	/**
	*<code>ResourceManager</code> 是资源管理类。它用于资源的载入、获取、销毁。
	*/
	//class laya.resource.ResourceManager
	var ResourceManager=(function(){
		function ResourceManager(){
			this._id=0;
			this._name=null;
			this._resources=null;
			this._memorySize=0;
			this._garbageCollectionRate=NaN;
			this._isOverflow=false;
			this.autoRelease=false;
			this.autoReleaseMaxSize=0;
			this._id=++ResourceManager._uniqueIDCounter;
			this._name="Content Manager";
			ResourceManager._isResourceManagersSorted=false;
			this._memorySize=0;
			this._isOverflow=false;
			this.autoRelease=false;
			this.autoReleaseMaxSize=1024 *1024 *512;
			this._garbageCollectionRate=0.2;
			ResourceManager._resourceManagers.push(this);
			this._resources=[];
		}

		__class(ResourceManager,'laya.resource.ResourceManager');
		var __proto=ResourceManager.prototype;
		Laya.imps(__proto,{"laya.resource.IDispose":true})
		/**
		*获取指定索引的资源 Resource 对象。
		*@param 索引。
		*@return 资源 Resource 对象。
		*/
		__proto.getResourceByIndex=function(index){
			return this._resources[index];
		}

		/**
		*获取此管理器所管理的资源个数。
		*@return 资源个数。
		*/
		__proto.getResourcesLength=function(){
			return this._resources.length;
		}

		/**
		*添加指定资源。
		*@param resource 需要添加的资源 Resource 对象。
		*@return 是否添加成功。
		*/
		__proto.addResource=function(resource){
			if (resource.resourceManager)
				resource.resourceManager.removeResource(resource);
			var index=this._resources.indexOf(resource);
			if (index===-1){
				resource._resourceManager=this;
				this._resources.push(resource);
				this.addSize(resource.memorySize);
				return true;
			}
			return false;
		}

		/**
		*移除指定资源。
		*@param resource 需要移除的资源 Resource 对象
		*@return 是否移除成功。
		*/
		__proto.removeResource=function(resource){
			var index=this._resources.indexOf(resource);
			if (index!==-1){
				this._resources.splice(index,1);
				resource._resourceManager=null;
				this._memorySize-=resource.memorySize;
				return true;
			}
			return false;
		}

		/**
		*卸载此资源管理器载入的资源。
		*/
		__proto.unload=function(){
			var tempResources=this._resources.slice(0,this._resources.length);
			for (var i=0;i < tempResources.length;i++){
				var resource=tempResources[i];
				resource.dispose();
			}
			tempResources.length=0;
		}

		/**
		*设置唯一名字。
		*@param newName 名字，如果名字重复则自动加上“-copy”。
		*/
		__proto.setUniqueName=function(newName){
			var isUnique=true;
			for (var i=0;i < ResourceManager._resourceManagers.length;i++){
				if (ResourceManager._resourceManagers[i]._name!==newName || ResourceManager._resourceManagers[i]===this)
					continue ;
				isUnique=false;
				return;
			}
			if (isUnique){
				if (this.name !=newName){
					this.name=newName;
					ResourceManager._isResourceManagersSorted=false;
				}
				}else{
				this.setUniqueName(newName.concat("-copy"));
			}
		}

		/**释放资源。*/
		__proto.dispose=function(){
			if (this===ResourceManager._systemResourceManager)
				throw new Error("systemResourceManager不能被释放！");
			ResourceManager._resourceManagers.splice(ResourceManager._resourceManagers.indexOf(this),1);
			ResourceManager._isResourceManagersSorted=false;
			var tempResources=this._resources.slice(0,this._resources.length);
			for (var i=0;i < tempResources.length;i++){
				var resource=tempResources[i];
				resource.resourceManager.removeResource(resource);
				resource.dispose();
			}
			tempResources.length=0;
		}

		/**
		*增加内存。
		*@param add 需要增加的内存大小。
		*/
		__proto.addSize=function(add){
			if (add){
				if (this.autoRelease && add > 0)
					((this._memorySize+add)> this.autoReleaseMaxSize)&& (this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize));
				this._memorySize+=add;
			}
		}

		/**
		*垃圾回收。
		*@param reserveSize 保留尺寸。
		*/
		__proto.garbageCollection=function(reserveSize){
			var all=this._resources;
			all=all.slice();
			all.sort(function(a,b){
				if (!a || !b)
					throw new Error("a或b不能为空！");
				if (a.released && b.released)
					return 0;
				else if (a.released)
				return 1;
				else if (b.released)
				return-1;
				return a.lastUseFrameCount-b.lastUseFrameCount;
			});
			var currentFrameCount=Stat.loopCount;
			for (var i=0,n=all.length;i < n;i++){
				var resou=all[i];
				if (currentFrameCount-resou.lastUseFrameCount > 1){
					resou.releaseResource();
					}else {
					if (this._memorySize >=reserveSize)
						this._isOverflow=true;
					return;
				}
				if (this._memorySize < reserveSize){
					this._isOverflow=false;
					return;
				}
			}
		}

		/**
		*唯一标识 ID 。
		*/
		__getset(0,__proto,'id',function(){
			return this._id;
		});

		/**
		*名字。
		*/
		__getset(0,__proto,'name',function(){
			return this._name;
			},function(value){
			if ((value || value!=="")&& this._name!==value){
				this._name=value;
				ResourceManager._isResourceManagersSorted=false;
			}
		});

		/**
		*此管理器所管理资源的累计内存，以字节为单位。
		*/
		__getset(0,__proto,'memorySize',function(){
			return this._memorySize;
		});

		/**
		*系统资源管理器。
		*/
		__getset(1,ResourceManager,'systemResourceManager',function(){
			(ResourceManager._systemResourceManager===null)&& (ResourceManager._systemResourceManager=new ResourceManager(),ResourceManager._systemResourceManager._name="System Resource Manager");
			return ResourceManager._systemResourceManager;
		});

		/**
		*排序后的资源管理器列表。
		*/
		__getset(1,ResourceManager,'sortedResourceManagersByName',function(){
			if (!ResourceManager._isResourceManagersSorted){
				ResourceManager._isResourceManagersSorted=true;
				ResourceManager._resourceManagers.sort(ResourceManager.compareResourceManagersByName);
			}
			return ResourceManager._resourceManagers;
		});

		ResourceManager.__init__=function(){
			ResourceManager.currentResourceManager=ResourceManager.systemResourceManager;
		}

		ResourceManager.getLoadedResourceManagerByIndex=function(index){
			return ResourceManager._resourceManagers[index];
		}

		ResourceManager.getLoadedResourceManagersCount=function(){
			return ResourceManager._resourceManagers.length;
		}

		ResourceManager.recreateContentManagers=function(force){
			(force===void 0)&& (force=false);
			var temp=ResourceManager.currentResourceManager;
			for (var i=0;i < ResourceManager._resourceManagers.length;i++){
				ResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];
				for (var j=0;j < ResourceManager.currentResourceManager._resources.length;j++){
					ResourceManager.currentResourceManager._resources[j].releaseResource(force);
					ResourceManager.currentResourceManager._resources[j].activeResource(force);
				}
			}
			ResourceManager.currentResourceManager=temp;
		}

		ResourceManager.releaseContentManagers=function(force){
			(force===void 0)&& (force=false);
			var temp=ResourceManager.currentResourceManager;
			for (var i=0;i < ResourceManager._resourceManagers.length;i++){
				ResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];
				for (var j=0;j < ResourceManager.currentResourceManager._resources.length;j++){
					var resource=ResourceManager.currentResourceManager._resources[j];
					(!resource.released)&& (resource.releaseResource(force));
				}
			}
			ResourceManager.currentResourceManager=temp;
		}

		ResourceManager.compareResourceManagersByName=function(left,right){
			if (left==right)
				return 0;
			var x=left._name;
			var y=right._name;
			if (x==null){
				if (y==null)
					return 0;
				else
				return-1;
				}else {
				if (y==null)
					return 1;
				else {
					var retval=x.localeCompare(y);
					if (retval !=0)
						return retval;
					else {
						right.setUniqueName(y);
						y=right._name;
						return x.localeCompare(y);
					}
				}
			}
		}

		ResourceManager._uniqueIDCounter=0;
		ResourceManager._systemResourceManager=null
		ResourceManager._isResourceManagersSorted=false;
		ResourceManager._resourceManagers=[];
		ResourceManager.currentResourceManager=null
		return ResourceManager;
	})()


	SoundManager;
	/**
	*<code>Browser</code> 是浏览器代理类。封装浏览器及原生 js 提供的一些功能。
	*/
	//class laya.utils.Browser
	var Browser=(function(){
		function Browser(){};
		__class(Browser,'laya.utils.Browser');
		/**设备像素比。*/
		__getset(1,Browser,'pixelRatio',function(){
			Browser.__init__();
			if (Browser.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1)return 2;
			return RunDriver.getPixelRatio();
		});

		/**浏览器物理高度。*/
		__getset(1,Browser,'height',function(){
			Browser.__init__();
			return ((Laya.stage && Laya.stage.canvasRotation)? Browser.clientWidth :Browser.clientHeight)*Browser.pixelRatio;
		});

		/**浏览器可视宽度。*/
		__getset(1,Browser,'clientWidth',function(){
			Browser.__init__();
			return Browser.window.innerWidth || Browser.document.body.clientWidth;
		});

		/**浏览器原生 window 对象的引用。*/
		__getset(1,Browser,'window',function(){
			Browser.__init__();
			return Browser._window;
		});

		/**浏览器可视高度。*/
		__getset(1,Browser,'clientHeight',function(){
			Browser.__init__();
			return Browser.window.innerHeight || Browser.document.body.clientHeight || Browser.document.documentElement.clientHeight;
		});

		/**浏览器物理宽度，。*/
		__getset(1,Browser,'width',function(){
			Browser.__init__();
			return ((Laya.stage && Laya.stage.canvasRotation)? Browser.clientHeight :Browser.clientWidth)*Browser.pixelRatio;
		});

		/**画布容器，用来盛放画布的容器。方便对画布进行控制*/
		__getset(1,Browser,'container',function(){
			Browser.__init__();
			if (!Browser._container){
				Browser._container=Browser.createElement("div");
				Browser._container.id="layaContainer";
				Browser.document.body.appendChild(Browser._container);
			}
			return Browser._container;
			},function(value){
			Browser._container=value;
		});

		/**浏览器原生 document 对象的引用。*/
		__getset(1,Browser,'document',function(){
			Browser.__init__();
			return Browser._document;
		});

		Browser.__init__=function(){
			SoundManager;
			if (Browser._window)return;
			Browser._window=RunDriver.getWindow();
			Browser._document=Browser.window.document;
			Browser._window.addEventListener('message',function(e){
				laya.utils.Browser._onMessage(e);
			},false);
			Browser.document.__createElement=Browser.document.createElement;
			window.requestAnimationFrame=window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (c){return window.setTimeout(c,1000 / 60);};;
			var $BS=window.document.body.style;$BS.margin=0;$BS.overflow='hidden';;
			var metas=window.document.getElementsByTagName('meta');;
			var i=0,flag=false,content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no';;
			while(i<metas.length){var meta=metas[i];if(meta.name=='viewport'){meta.content=content;flag=true;break;}i++;};
			if(!flag){meta=document.createElement('meta');meta.name='viewport',meta.content=content;document.getElementsByTagName('head')[0].appendChild(meta);};
			Browser.userAgent=/*[SAFE]*/ Browser.window.navigator.userAgent;
			Browser.u=/*[SAFE]*/ Browser.userAgent;
			Browser.onIOS=/*[SAFE]*/ !!Browser.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/);
			Browser.onMobile=/*[SAFE]*/ Browser.u.indexOf("Mobile")>-1;
			Browser.onIPhone=/*[SAFE]*/ Browser.u.indexOf("iPhone")>-1;
			Browser.onIPad=/*[SAFE]*/ Browser.u.indexOf("iPad")>-1;
			Browser.onAndriod=/*[SAFE]*/ Browser.u.indexOf('Android')>-1 || Browser.u.indexOf('Adr')>-1;
			Browser.onWP=/*[SAFE]*/ Browser.u.indexOf("Windows Phone")>-1;
			Browser.onQQBrowser=/*[SAFE]*/ Browser.u.indexOf("QQBrowser")>-1;
			Browser.onMQQBrowser=/*[SAFE]*/ Browser.u.indexOf("MQQBrowser")>-1;
			Browser.onWeiXin=/*[SAFE]*/ Browser.u.indexOf('MicroMessenger')>-1;
			Browser.onPC=/*[SAFE]*/ !Browser.onMobile;
			Browser.onSafari=/*[SAFE]*/ !!Browser.u.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/);
			Browser.httpProtocol=/*[SAFE]*/ Browser.window.location.protocol=="http:";
			Browser.webAudioEnabled=/*[SAFE]*/ Browser.window["AudioContext"] || Browser.window["webkitAudioContext"] || Browser.window["mozAudioContext"] ? true :false;
			Browser.soundType=/*[SAFE]*/ Browser.webAudioEnabled ? "WEBAUDIOSOUND" :"AUDIOSOUND";
			Sound=Browser.webAudioEnabled?WebAudioSound:AudioSound;;
			if (Browser.webAudioEnabled)WebAudioSound.initWebAudio();;
			Browser.enableTouch=(('ontouchstart' in window)|| window.DocumentTouch && document instanceof DocumentTouch);
			window.focus();
			SoundManager._soundClass=Sound;;
			Render._mainCanvas=Render._mainCanvas || HTMLCanvas.create('2D');
			if (Browser.canvas)return;
			Browser.canvas=HTMLCanvas.create('2D');
			Browser.context=Browser.canvas.getContext('2d');
		}

		Browser._onMessage=function(e){
			if (!e.data)return;
			if (e.data.name=="size"){
				Browser.window.innerWidth=e.data.width;
				Browser.window.innerHeight=e.data.height;
				Browser.window.__innerHeight=e.data.clientHeight;
				if (!Browser.document.createEvent){
					console.warn("no document.createEvent");
					return;
				};
				var evt=Browser.document.createEvent("HTMLEvents");
				evt.initEvent("resize",false,false);
				Browser.window.dispatchEvent(evt);
				return;
			}
		}

		Browser.createElement=function(type){
			Browser.__init__();
			return Browser.document.__createElement(type);
		}

		Browser.getElementById=function(type){
			Browser.__init__();
			return Browser.document.getElementById(type);
		}

		Browser.removeElement=function(ele){
			if (ele && ele.parentNode)ele.parentNode.removeChild(ele);
		}

		Browser.now=function(){
			return RunDriver.now();
		}

		Browser._window=null
		Browser._document=null
		Browser._container=null
		Browser.userAgent=null
		Browser.u=null
		Browser.onIOS=false;
		Browser.onMobile=false;
		Browser.onIPhone=false;
		Browser.onIPad=false;
		Browser.onAndriod=false;
		Browser.onWP=false;
		Browser.onQQBrowser=false;
		Browser.onMQQBrowser=false;
		Browser.onSafari=false;
		Browser.onWeiXin=false;
		Browser.onPC=false;
		Browser.httpProtocol=false;
		Browser.webAudioEnabled=false;
		Browser.soundType=null
		Browser.enableTouch=false;
		Browser.canvas=null
		Browser.context=null
		Browser.__init$=function(){
			AudioSound;
			WebAudioSound;
		}

		return Browser;
	})()


	/**
	*
	*<code>Byte</code> 类提供用于优化读取、写入以及处理二进制数据的方法和属性。
	*/
	//class laya.utils.Byte
	var Byte=(function(){
		function Byte(data){
			this._xd_=true;
			this._allocated_=8;
			//this._d_=null;
			//this._u8d_=null;
			this._pos_=0;
			this._length=0;
			if (data){
				this._u8d_=new Uint8Array(data);
				this._d_=new DataView(this._u8d_.buffer);
				this._length=this._d_.byteLength;
				}else {
				this.___resizeBuffer(this._allocated_);
			}
		}

		__class(Byte,'laya.utils.Byte');
		var __proto=Byte.prototype;
		/**@private */
		__proto.___resizeBuffer=function(len){
			try {
				var newByteView=new Uint8Array(len);
				if (this._u8d_ !=null){
					if (this._u8d_.length <=len)newByteView.set(this._u8d_);
					else newByteView.set(this._u8d_.subarray(0,len));
				}
				this._u8d_=newByteView;
				this._d_=new DataView(newByteView.buffer);
				}catch (err){
				throw "___resizeBuffer err:"+len;
			}
		}

		/**
		*读取字符型值。
		*@return
		*/
		__proto.getString=function(){
			return this.rUTF(this.getUint16());
		}

		/**
		*从指定的位置读取指定长度的数据用于创建一个 Float32Array 对象并返回此对象。
		*@param start 开始位置。
		*@param len 需要读取的字节长度。
		*@return 读出的 Float32Array 对象。
		*/
		__proto.getFloat32Array=function(start,len){
			var v=new Float32Array(this._d_.buffer.slice(start,start+len));
			this._pos_+=len;
			return v;
		}

		/**
		*从指定的位置读取指定长度的数据用于创建一个 Uint8Array 对象并返回此对象。
		*@param start 开始位置。
		*@param len 需要读取的字节长度。
		*@return 读出的 Uint8Array 对象。
		*/
		__proto.getUint8Array=function(start,len){
			var v=new Uint8Array(this._d_.buffer.slice(start,start+len));
			this._pos_+=len;
			return v;
		}

		/**
		*从指定的位置读取指定长度的数据用于创建一个 Int16Array 对象并返回此对象。
		*@param start 开始位置。
		*@param len 需要读取的字节长度。
		*@return 读出的 Uint8Array 对象。
		*/
		__proto.getInt16Array=function(start,len){
			var v=new Int16Array(this._d_.buffer.slice(start,start+len));
			this._pos_+=len;
			return v;
		}

		/**
		*在指定字节偏移量位置处读取 Float32 值。
		*@return Float32 值。
		*/
		__proto.getFloat32=function(){
			var v=this._d_.getFloat32(this._pos_,this._xd_);
			this._pos_+=4;
			return v;
		}

		__proto.getFloat64=function(){
			var v=this._d_.getFloat64(this._pos_,this._xd_);
			this._pos_+=8;
			return v;
		}

		/**
		*在当前字节偏移量位置处写入 Float32 值。
		*@param value 需要写入的 Float32 值。
		*/
		__proto.writeFloat32=function(value){
			this.ensureWrite(this._pos_+4);
			this._d_.setFloat32(this._pos_,value,this._xd_);
			this._pos_+=4;
		}

		__proto.writeFloat64=function(value){
			this.ensureWrite(this._pos_+8);
			this._d_.setFloat64(this._pos_,value,this._xd_);
			this._pos_+=8;
		}

		/**
		*在当前字节偏移量位置处读取 Int32 值。
		*@return Int32 值。
		*/
		__proto.getInt32=function(){
			var float=this._d_.getInt32(this._pos_,this._xd_);
			this._pos_+=4;
			return float;
		}

		/**
		*在当前字节偏移量位置处读取 Uint32 值。
		*@return Uint32 值。
		*/
		__proto.getUint32=function(){
			var v=this._d_.getUint32(this._pos_,this._xd_);
			this._pos_+=4;
			return v;
		}

		/**
		*在当前字节偏移量位置处写入 Int32 值。
		*@param value 需要写入的 Int32 值。
		*/
		__proto.writeInt32=function(value){
			this.ensureWrite(this._pos_+4);
			this._d_.setInt32(this._pos_,value,this._xd_);
			this._pos_+=4;
		}

		/**
		*在当前字节偏移量位置处写入 Uint32 值。
		*@param value 需要写入的 Uint32 值。
		*/
		__proto.writeUint32=function(value){
			this.ensureWrite(this._pos_+4);
			this._d_.setUint32(this._pos_,value,this._xd_);
			this._pos_+=4;
		}

		/**
		*在当前字节偏移量位置处读取 Int16 值。
		*@return Int16 值。
		*/
		__proto.getInt16=function(){
			var us=this._d_.getInt16(this._pos_,this._xd_);
			this._pos_+=2;
			return us;
		}

		/**
		*在当前字节偏移量位置处读取 Uint16 值。
		*@return Uint16 值。
		*/
		__proto.getUint16=function(){
			var us=this._d_.getUint16(this._pos_,this._xd_);
			this._pos_+=2;
			return us;
		}

		/**
		*在当前字节偏移量位置处写入 Uint16 值。
		*@param value 需要写入的Uint16 值。
		*/
		__proto.writeUint16=function(value){
			this.ensureWrite(this._pos_+2);
			this._d_.setUint16(this._pos_,value,this._xd_);
			this._pos_+=2;
		}

		/**
		*在当前字节偏移量位置处写入 Int16 值。
		*@param value 需要写入的 Int16 值。
		*/
		__proto.writeInt16=function(value){
			this.ensureWrite(this._pos_+2);
			this._d_.setInt16(this._pos_,value,this._xd_);
			this._pos_+=2;
		}

		/**
		*在当前字节偏移量位置处读取 Uint8 值。
		*@return Uint8 值。
		*/
		__proto.getUint8=function(){
			return this._d_.getUint8(this._pos_++);
		}

		/**
		*在当前字节偏移量位置处写入 Uint8 值。
		*@param value 需要写入的 Uint8 值。
		*/
		__proto.writeUint8=function(value){
			this.ensureWrite(this._pos_+1);
			this._d_.setUint8(this._pos_,value);
			this._pos_++;
		}

		/**
		*@private
		*在指定位置处读取 Uint8 值。
		*@param pos 字节读取位置。
		*@return Uint8 值。
		*/
		__proto._getUInt8=function(pos){
			return this._d_.getUint8(pos);
		}

		/**
		*@private
		*在指定位置处读取 Uint16 值。
		*@param pos 字节读取位置。
		*@return Uint16 值。
		*/
		__proto._getUint16=function(pos){
			return this._d_.getUint16(pos,this._xd_);
		}

		/**
		*@private
		*使用 getFloat32()读取6个值，用于创建并返回一个 Matrix 对象。
		*@return Matrix 对象。
		*/
		__proto._getMatrix=function(){
			var rst=new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());
			return rst;
		}

		/**
		*@private
		*读取指定长度的 UTF 型字符串。
		*@param len 需要读取的长度。
		*@return 读出的字符串。
		*/
		__proto.rUTF=function(len){
			var v="",max=this._pos_+len,c=0,c2=0,c3=0,f=String.fromCharCode;
			var u=this._u8d_,i=0;
			while (this._pos_ < max){
				c=u[this._pos_++];
				if (c < 0x80){
					if (c !=0){
						v+=f(c);
					}
					}else if (c < 0xE0){
					v+=f(((c & 0x3F)<< 6)| (u[this._pos_++] & 0x7F));
					}else if (c < 0xF0){
					c2=u[this._pos_++];
					v+=f(((c & 0x1F)<< 12)| ((c2 & 0x7F)<< 6)| (u[this._pos_++] & 0x7F));
					}else {
					c2=u[this._pos_++];
					c3=u[this._pos_++];
					v+=f(((c & 0x0F)<< 18)| ((c2 & 0x7F)<< 12)| ((c3 << 6)& 0x7F)| (u[this._pos_++] & 0x7F));
				}
				i++;
			}
			return v;
		}

		/**
		*字符串读取。
		*@param len
		*@return
		*/
		__proto.getCustomString=function(len){
			var v="",ulen=0,c=0,c2=0,f=String.fromCharCode;
			var u=this._u8d_,i=0;
			while (len > 0){
				c=u[this._pos_];
				if (c < 0x80){
					v+=f(c);
					this._pos_++;
					len--;
					}else {
					ulen=c-0x80;
					this._pos_++;
					len-=ulen;
					while (ulen > 0){
						c=u[this._pos_++];
						c2=u[this._pos_++];
						v+=f((c2 << 8)| c);
						ulen--;
					}
				}
			}
			return v;
		}

		/**
		*清除数据。
		*/
		__proto.clear=function(){
			this._pos_=0;
			this.length=0;
		}

		/**
		*@private
		*获取此对象的 ArrayBuffer 引用。
		*@return
		*/
		__proto.__getBuffer=function(){
			return this._d_.buffer;
		}

		/**
		*写入字符串，该方法写的字符串要使用 readUTFBytes 方法读取。
		*@param value 要写入的字符串。
		*/
		__proto.writeUTFBytes=function(value){
			value=value+"";
			for (var i=0,sz=value.length;i < sz;i++){
				var c=value.charCodeAt(i);
				if (c <=0x7F){
					this.writeByte(c);
					}else if (c <=0x7FF){
					this.writeByte(0xC0 | (c >> 6));
					this.writeByte(0x80 | (c & 63));
					}else if (c <=0xFFFF){
					this.writeByte(0xE0 | (c >> 12));
					this.writeByte(0x80 | ((c >> 6)& 63));
					this.writeByte(0x80 | (c & 63));
					}else {
					this.writeByte(0xF0 | (c >> 18));
					this.writeByte(0x80 | ((c >> 12)& 63));
					this.writeByte(0x80 | ((c >> 6)& 63));
					this.writeByte(0x80 | (c & 63));
				}
			}
		}

		/**
		*将 UTF-8 字符串写入字节流。
		*@param value 要写入的字符串值。
		*/
		__proto.writeUTFString=function(value){
			var tPos=0;
			tPos=this.pos;
			this.writeUint16(1);
			this.writeUTFBytes(value);
			var dPos=0;
			dPos=this.pos-tPos-2;
			this._d_.setUint16(tPos,dPos,this._xd_);
		}

		/**
		*@private
		*读取 UTF-8 字符串。
		*@return 读出的字符串。
		*/
		__proto.readUTFString=function(){
			var tPos=0;
			tPos=this.pos;
			var len=0;
			len=this.getUint16();
			return this.readUTFBytes(len);
		}

		/**
		*读取 UTF-8 字符串。
		*@return 读出的字符串。
		*/
		__proto.getUTFString=function(){
			return this.readUTFString();
		}

		/**
		*@private
		*读字符串，必须是 writeUTFBytes 方法写入的字符串。
		*@param len 要读的buffer长度,默认将读取缓冲区全部数据。
		*@return 读取的字符串。
		*/
		__proto.readUTFBytes=function(len){
			(len===void 0)&& (len=-1);
			if(len==0)return "";
			len=len > 0 ? len :this.bytesAvailable;
			return this.rUTF(len);
		}

		/**
		*读字符串，必须是 writeUTFBytes 方法写入的字符串。
		*@param len 要读的buffer长度,默认将读取缓冲区全部数据。
		*@return 读取的字符串。
		*/
		__proto.getUTFBytes=function(len){
			(len===void 0)&& (len=-1);
			return this.readUTFBytes(len);
		}

		/**
		*在字节流中写入一个字节。
		*@param value
		*/
		__proto.writeByte=function(value){
			this.ensureWrite(this._pos_+1);
			this._d_.setInt8(this._pos_,value);
			this._pos_+=1;
		}

		/**
		*@private
		*在字节流中读一个字节。
		*/
		__proto.readByte=function(){
			return this._d_.getInt8(this._pos_++);
		}

		/**
		*在字节流中读一个字节。
		*/
		__proto.getByte=function(){
			return this.readByte();
		}

		/**
		*指定该字节流的长度。
		*@param lengthToEnsure 指定的长度。
		*/
		__proto.ensureWrite=function(lengthToEnsure){
			if (this._length < lengthToEnsure)this._length=lengthToEnsure;
			if (this._allocated_ < lengthToEnsure)this.length=lengthToEnsure;
		}

		/**
		*写入指定的 Arraybuffer 对象。
		*@param arraybuffer 需要写入的 Arraybuffer 对象。
		*@param offset 偏移量（以字节为单位）
		*@param length 长度（以字节为单位）
		*/
		__proto.writeArrayBuffer=function(arraybuffer,offset,length){
			(offset===void 0)&& (offset=0);
			(length===void 0)&& (length=0);
			if (offset < 0 || length < 0)throw "writeArrayBuffer error - Out of bounds";
			if (length==0)length=arraybuffer.byteLength-offset;
			this.ensureWrite(this._pos_+length);
			var uint8array=new Uint8Array(arraybuffer);
			this._u8d_.set(uint8array.subarray(offset,offset+length),this._pos_);
			this._pos_+=length;
		}

		/**
		*获取此对象的 ArrayBuffer数据,数据只包含有效数据部分 。
		*/
		__getset(0,__proto,'buffer',function(){
			var rstBuffer=this._d_.buffer;
			if (rstBuffer.byteLength==this.length)return rstBuffer;
			return rstBuffer.slice(0,this.length);
		});

		/**
		*字节顺序。
		*/
		__getset(0,__proto,'endian',function(){
			return this._xd_ ? "littleEndian" :"bigEndian";
			},function(endianStr){
			this._xd_=(endianStr=="littleEndian");
		});

		/**
		*字节长度。
		*/
		__getset(0,__proto,'length',function(){
			return this._length;
			},function(value){
			if (this._allocated_ < value)
				this.___resizeBuffer(this._allocated_=Math.floor(Math.max(value,this._allocated_ *2)));
			else if (this._allocated_ > value)
			this.___resizeBuffer(this._allocated_=value);
			this._length=value;
		});

		/**
		*当前读取到的位置。
		*/
		__getset(0,__proto,'pos',function(){
			return this._pos_;
			},function(value){
			this._pos_=value;
			this._d_.byteOffset=value;
		});

		/**
		*可从字节流的当前位置到末尾读取的数据的字节数。
		*/
		__getset(0,__proto,'bytesAvailable',function(){
			return this.length-this._pos_;
		});

		Byte.getSystemEndian=function(){
			if (!Byte._sysEndian){
				var buffer=new ArrayBuffer(2);
				new DataView(buffer).setInt16(0,256,true);
				Byte._sysEndian=(new Int16Array(buffer))[0]===256 ? "littleEndian" :"bigEndian";
			}
			return Byte._sysEndian;
		}

		Byte.BIG_ENDIAN="bigEndian";
		Byte.LITTLE_ENDIAN="littleEndian";
		Byte._sysEndian=null;
		return Byte;
	})()


	/**
	*对象缓存统一管理类
	*/
	//class laya.utils.CacheManger
	var CacheManger=(function(){
		function CacheManger(){}
		__class(CacheManger,'laya.utils.CacheManger');
		CacheManger.regCacheByFunction=function(disposeFunction,getCacheListFunction){
			CacheManger.unRegCacheByFunction(disposeFunction,getCacheListFunction);
			var cache;
			cache={
				tryDispose:disposeFunction,
				getCacheList:getCacheListFunction
			};
			CacheManger._cacheList.push(cache);
		}

		CacheManger.unRegCacheByFunction=function(disposeFunction,getCacheListFunction){
			var i=0,len=0;
			len=CacheManger._cacheList.length;
			for (i=0;i < len;i++){
				if (CacheManger._cacheList[i].tryDispose==disposeFunction && CacheManger._cacheList[i].getCacheList==getCacheListFunction){
					CacheManger._cacheList.splice(i,1);
					return;
				}
			}
		}

		CacheManger.forceDispose=function(){
			var i=0,len=CacheManger._cacheList.length;
			for(i=0;i<len;i++){
				CacheManger._cacheList[i].tryDispose(true);
			}
		}

		CacheManger.beginCheck=function(waitTime){
			(waitTime===void 0)&& (waitTime=15000);
			Laya.timer.loop(waitTime,null,CacheManger._checkLoop);
		}

		CacheManger.stopCheck=function(){
			Laya.timer.clear(null,CacheManger._checkLoop);
		}

		CacheManger._checkLoop=function(){
			var cacheList=CacheManger._cacheList;
			if (cacheList.length < 1)return;
			var tTime=Browser.now();
			var count=0;
			var len=0;
			len=count=cacheList.length;
			while (count > 0){
				CacheManger._index++;
				CacheManger._index=CacheManger._index % len;
				cacheList[CacheManger._index].tryDispose(false);
				if (Browser.now()-tTime > CacheManger.loopTimeLimit)break ;
				count--;
			}
		}

		CacheManger.loopTimeLimit=2;
		CacheManger._cacheList=[];
		CacheManger._index=0;
		return CacheManger;
	})()


	/**
	*<code>ClassUtils</code> 是一个类工具类。
	*/
	//class laya.utils.ClassUtils
	var ClassUtils=(function(){
		function ClassUtils(){};
		__class(ClassUtils,'laya.utils.ClassUtils');
		ClassUtils.regClass=function(className,classDef){
			ClassUtils._classMap[className]=classDef;
		}

		ClassUtils.getRegClass=function(className){
			return ClassUtils._classMap[className];
		}

		ClassUtils.getInstance=function(className){
			var compClass=ClassUtils.getClass(className);
			if (compClass)
				return new compClass();
			else
			console.warn("[error] Undefined class:",className);
			return null;
		}

		ClassUtils.createByJson=function(json,node,root,customHandler,instanceHandler){
			if ((typeof json=='string'))
				json=JSON.parse(json);
			var props=json.props;
			if (!node){
				node=instanceHandler ? instanceHandler.runWith(json):ClassUtils.getInstance(props.runtime || json.type);
				if (!node)
					return null;
			};
			var child=json.child;
			if (child){
				for (var i=0,n=child.length;i < n;i++){
					var data=child[i];
					if ((data.props.name==="render" || data.props.renderType==="render")&& node["_$set_itemRender"])
						node.itemRender=data;
					else {
						if (data.type=="Graphic"){
							ClassUtils.addGraphicsToSprite(data,node);
							}else if (ClassUtils.isDrawType(data.type)){
							ClassUtils.addGraphicToSprite(data,node,true);
							}else {
							var tChild=ClassUtils.createByJson(data,null,root,customHandler,instanceHandler)
							if (data.type=="Script"){
								if (tChild.hasOwnProperty("owner")){
									tChild["owner"]=node;
									}else if (tChild.hasOwnProperty("target")){
									tChild["target"]=node;
								}
								}else if (data.props.renderType=="mask"){
								node.mask=tChild;
								}else {
								node.addChild(tChild);
							}
						}
					}
				}
			}
			if (props){
				for (var prop in props){
					var value=props[prop];
					if (prop==="var" && root){
						root[value]=node;
						}else if ((value instanceof Array)&& (typeof (node[prop])=='function')){
						node[prop].apply(node,value);
						}else {
						node[prop]=value;
					}
				}
			}
			if (customHandler && json.customProps){
				customHandler.runWith([node,json]);
			}
			if (node["created"])
				node.created();
			return node;
		}

		ClassUtils.addGraphicsToSprite=function(graphicO,sprite){
			var graphics;
			graphics=graphicO.child;
			if (!graphics || graphics.length < 1)
				return;
			var g;
			g=ClassUtils._getGraphicsFromSprite(graphicO,sprite);
			var ox=0;
			var oy=0;
			if (graphicO.props){
				ox=ClassUtils._getObjVar(graphicO.props,"x",0);
				oy=ClassUtils._getObjVar(graphicO.props,"y",0);
			}
			if (ox !=0 && oy !=0){
				g.translate(ox,oy);
			};
			var i=0,len=0;
			len=graphics.length;
			for (i=0;i < len;i++){
				ClassUtils._addGraphicToGraphics(graphics[i],g);
			}
			if (ox !=0 && oy !=0){
				g.translate(-ox,-oy);
			}
		}

		ClassUtils.addGraphicToSprite=function(graphicO,sprite,isChild){
			(isChild===void 0)&& (isChild=false);
			var g;
			g=isChild ? ClassUtils._getGraphicsFromSprite(graphicO,sprite):sprite.graphics;
			ClassUtils._addGraphicToGraphics(graphicO,g);
		}

		ClassUtils._getGraphicsFromSprite=function(dataO,sprite){
			var g;
			if (!dataO || !dataO.props)
				return sprite.graphics;
			var propsName;
			propsName=dataO.props.renderType;
			switch (propsName){
				case "hit":
				case "unHit":;
					var hitArea;
					if (!sprite.hitArea){
						sprite.hitArea=new HitArea();
					}
					hitArea=sprite.hitArea;
					if (!hitArea[propsName]){
						hitArea[propsName]=new Graphics();
					}
					g=hitArea[propsName];
					break ;
				default :
				}
			if (!g)
				g=sprite.graphics;
			return g;
		}

		ClassUtils._getTransformData=function(propsO){
			var m;
			if (propsO.hasOwnProperty("pivotX")|| propsO.hasOwnProperty("pivotY")){
				m=m || new Matrix();
				m.translate(-ClassUtils._getObjVar(propsO,"pivotX",0),-ClassUtils._getObjVar(propsO,"pivotY",0));
			};
			var sx=ClassUtils._getObjVar(propsO,"scaleX",1),sy=ClassUtils._getObjVar(propsO,"scaleY",1);
			var rotate=ClassUtils._getObjVar(propsO,"rotation",0);
			var skewX=ClassUtils._getObjVar(propsO,"skewX",0);
			var skewY=ClassUtils._getObjVar(propsO,"skewY",0);
			if (sx !=1 || sy !=1 || rotate !=0){
				m=m || new Matrix();
				m.scale(sx,sy);
				m.rotate(rotate *0.0174532922222222);
			}
			return m;
		}

		ClassUtils._addGraphicToGraphics=function(graphicO,graphic){
			var propsO;
			propsO=graphicO.props;
			if (!propsO)
				return;
			var drawConfig;
			drawConfig=ClassUtils.DrawTypeDic[graphicO.type];
			if (!drawConfig)
				return;
			var g;
			g=graphic;
			var m;
			var params=ClassUtils._getParams(propsO,drawConfig[1],drawConfig[2],drawConfig[3]);
			m=ClassUtils._tM;
			if (m || ClassUtils._alpha !=1){
				g.save();
				if (m)
					g.transform(m);
				if (ClassUtils._alpha !=1)
					g.alpha(ClassUtils._alpha);
			}
			g[drawConfig[0]].apply(g,params);
			if (m || ClassUtils._alpha !=1){
				g.restore();
			}
		}

		ClassUtils._adptLineData=function(params){
			params[2]=parseFloat(params[0])+parseFloat(params[2]);
			params[3]=parseFloat(params[1])+parseFloat(params[3]);
			return params;
		}

		ClassUtils._adptTextureData=function(params){
			params[0]=Loader.getRes(params[0]);
			return params;
		}

		ClassUtils._adptLinesData=function(params){
			params[2]=ClassUtils._getPointListByStr(params[2]);
			return params;
		}

		ClassUtils.isDrawType=function(type){
			if (type=="Image")
				return false;
			return ClassUtils.DrawTypeDic.hasOwnProperty(type);
		}

		ClassUtils._getParams=function(obj,params,xPos,adptFun){
			(xPos===void 0)&& (xPos=0);
			var rst;
			rst=ClassUtils._temParam;
			rst.length=params.length;
			var i=0,len=0;
			len=params.length;
			for (i=0;i < len;i++){
				rst[i]=ClassUtils._getObjVar(obj,params[i][0],params[i][1]);
			}
			ClassUtils._alpha=ClassUtils._getObjVar(obj,"alpha",1);
			var m;
			m=ClassUtils._getTransformData(obj);
			if (m){
				if (!xPos)xPos=0;
				m.translate(rst[xPos],rst[xPos+1]);
				rst[xPos]=rst[xPos+1]=0;
				ClassUtils._tM=m;
				}else {
				ClassUtils._tM=null;
			}
			if (adptFun && ClassUtils[adptFun]){
				rst=ClassUtils[adptFun](rst);
			}
			return rst;
		}

		ClassUtils._getPointListByStr=function(str){
			var pointArr;
			pointArr=str.split(",");
			var i=0,len=0;
			len=pointArr.length;
			for (i=0;i < len;i++){
				pointArr[i]=parseFloat(pointArr[i]);
			}
			return pointArr;
		}

		ClassUtils._getObjVar=function(obj,key,noValue){
			if (obj.hasOwnProperty(key)){
				return obj[key];
			}
			return noValue;
		}

		ClassUtils._temParam=[];
		ClassUtils._classMap={'Sprite':'laya.display.Sprite','Text':'laya.display.Text','Animation':'laya.display.Animation','Skeleton':'laya.ani.bone.Skeleton','Particle2D':'laya.particle.Particle2D','div':'laya.html.dom.HTMLDivElement','p':'laya.html.dom.HTMLElement','img':'laya.html.dom.HTMLImageElement','span':'laya.html.dom.HTMLElement','br':'laya.html.dom.HTMLBrElement','style':'laya.html.dom.HTMLStyleElement','font':'laya.html.dom.HTMLElement','a':'laya.html.dom.HTMLElement','#text':'laya.html.dom.HTMLElement'};
		ClassUtils.getClass=function(className){
			var classObject=ClassUtils._classMap[className] || className;
			if ((typeof classObject=='string'))
				return Laya["__classmap"][classObject];
			return classObject;
		}

		ClassUtils._tM=null
		ClassUtils._alpha=NaN
		__static(ClassUtils,
		['DrawTypeDic',function(){return this.DrawTypeDic={"Rect":["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],"Circle":["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],"Pie":["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],"Image":["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],"Texture":["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],"FillTexture":["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],"FillText":["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],"Line":["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],"Lines":["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],"Curves":["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],"Poly":["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]};}
		]);
		return ClassUtils;
	})()


	/**
	*<code>Color</code> 是一个颜色值处理类。
	*/
	//class laya.utils.Color
	var Color=(function(){
		function Color(str){
			this._color=[];
			//this.strColor=null;
			//this.numColor=0;
			//this._drawStyle=null;
			if ((typeof str=='string')){
				this.strColor=str;
				if (str===null)str="#000000";
				str.charAt(0)=='#' && (str=str.substr(1));
				var len=str.length;
				if (len==3 || len==4){
					var temp="";
					for (var i=0;i < len;i++){
						temp+=(str[i]+str[i]);
					}
					str=temp;
				};
				var color=this.numColor=parseInt(str,16);
				var flag=(str.length==8);
				if (flag){
					this._color=[parseInt(str.substr(0,2),16)/ 255,((0x00FF0000 & color)>> 16)/ 255,((0x0000FF00 & color)>> 8)/ 255,(0x000000FF & color)/ 255];
					return;
				}
				}else {
				color=this.numColor=str;
				this.strColor=Utils.toHexColor(color);
			}
			this._color=[((0xFF0000 & color)>> 16)/ 255,((0xFF00 & color)>> 8)/ 255,(0xFF & color)/ 255,1];
			(this._color).__id=++Color._COLODID;
		}

		__class(Color,'laya.utils.Color');
		Color._initDefault=function(){
			Color._DEFAULT={};
			for (var i in Color._COLOR_MAP)Color._SAVE[i]=Color._DEFAULT[i]=new Color(Color._COLOR_MAP[i]);
			return Color._DEFAULT;
		}

		Color._initSaveMap=function(){
			Color._SAVE_SIZE=0;
			Color._SAVE={};
			for (var i in Color._DEFAULT)Color._SAVE[i]=Color._DEFAULT[i];
		}

		Color.create=function(str){
			var color=Color._SAVE[str+""];
			if (color !=null)return color;
			(Color._SAVE_SIZE < 1000)|| Color._initSaveMap();
			return Color._SAVE[str+""]=new Color(str);
		}

		Color._SAVE={};
		Color._SAVE_SIZE=0;
		Color._COLOR_MAP={"white":'#FFFFFF',"red":'#FF0000',"green":'#00FF00',"blue":'#0000FF',"black":'#000000',"yellow":'#FFFF00','gray':'#AAAAAA'};
		Color._DEFAULT=Color._initDefault();
		Color._COLODID=1;
		return Color;
	})()


	/**
	*<code>Dragging</code> 类是触摸滑动控件。
	*/
	//class laya.utils.Dragging
	var Dragging=(function(){
		function Dragging(){
			//this.target=null;
			this.ratio=0.92;
			this.maxOffset=60;
			//this.area=null;
			//this.hasInertia=false;
			//this.elasticDistance=NaN;
			//this.elasticBackTime=NaN;
			//this.data=null;
			this._dragging=false;
			this._clickOnly=true;
			//this._elasticRateX=NaN;
			//this._elasticRateY=NaN;
			//this._lastX=NaN;
			//this._lastY=NaN;
			//this._offsetX=NaN;
			//this._offsetY=NaN;
			//this._offsets=null;
			//this._disableMouseEvent=false;
			//this._tween=null;
			//this._parent=null;
		}

		__class(Dragging,'laya.utils.Dragging');
		var __proto=Dragging.prototype;
		/**
		*开始拖拽。
		*@param target 待拖拽的 <code>Sprite</code> 对象。
		*@param area 滑动范围。
		*@param hasInertia 拖动是否有惯性。
		*@param elasticDistance 橡皮筋最大值。
		*@param elasticBackTime 橡皮筋回弹时间，单位为毫秒。
		*@param data 事件携带数据。
		*@param disableMouseEvent 鼠标事件是否有效。
		*@param ratio 惯性阻尼系数
		*/
		__proto.start=function(target,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){
			(ratio===void 0)&& (ratio=0.92);
			this.clearTimer();
			this.target=target;
			this.area=area;
			this.hasInertia=hasInertia;
			this.elasticDistance=area ? elasticDistance :0;
			this.elasticBackTime=elasticBackTime;
			this.data=data;
			this._disableMouseEvent=disableMouseEvent;
			this.ratio=ratio;
			if (target.globalScaleX !=1 || target.globalScaleY !=1){
				this._parent=target.parent;
				}else {
				this._parent=Laya.stage;
			}
			this._clickOnly=true;
			this._dragging=true;
			this._elasticRateX=this._elasticRateY=1;
			this._lastX=this._parent.mouseX;
			this._lastY=this._parent.mouseY;
			Laya.stage.on("mouseup",this,this.onStageMouseUp);
			Laya.stage.on("mouseout",this,this.onStageMouseUp);
			Laya.timer.frameLoop(1,this,this.loop);
		}

		/**
		*清除计时器。
		*/
		__proto.clearTimer=function(){
			Laya.timer.clear(this,this.loop);
			Laya.timer.clear(this,this.tweenMove);
			if (this._tween){
				this._tween.recover();
				this._tween=null;
			}
		}

		/**
		*停止拖拽。
		*/
		__proto.stop=function(){
			if (this._dragging){
				MouseManager.instance.disableMouseEvent=false;
				Laya.stage.off("mouseup",this,this.onStageMouseUp);
				Laya.stage.off("mouseout",this,this.onStageMouseUp);
				this._dragging=false;
				this.target && this.area && this.backToArea();
				this.clear();
			}
		}

		/**
		*拖拽的循环处理函数。
		*/
		__proto.loop=function(){
			var point=this._parent.getMousePoint();
			var mouseX=point.x;
			var mouseY=point.y;
			var offsetX=mouseX-this._lastX;
			var offsetY=mouseY-this._lastY;
			if (this._clickOnly){
				if (Math.abs(offsetX *Laya.stage._canvasTransform.getScaleX())> 1 || Math.abs(offsetY *Laya.stage._canvasTransform.getScaleY())> 1){
					this._clickOnly=false;
					this._offsets || (this._offsets=[]);
					this._offsets.length=0;
					this.target.event("dragstart",this.data);
					MouseManager.instance.disableMouseEvent=this._disableMouseEvent;
					this.target._set$P("$_MOUSEDOWN",false);
				}else return;
				}else {
				this._offsets.push(offsetX,offsetY);
			}
			if (offsetX===0 && offsetY===0)return;
			this._lastX=mouseX;
			this._lastY=mouseY;
			this.target.x+=offsetX *this._elasticRateX;
			this.target.y+=offsetY *this._elasticRateY;
			this.area && this.checkArea();
			this.target.event("dragmove",this.data);
		}

		/**
		*拖拽区域检测。
		*/
		__proto.checkArea=function(){
			if (this.elasticDistance <=0){
				this.backToArea();
				}else {
				if (this.target.x < this.area.x){
					var offsetX=this.area.x-this.target.x;
					}else if (this.target.x > this.area.x+this.area.width){
					offsetX=this.target.x-this.area.x-this.area.width;
					}else {
					offsetX=0;
				}
				this._elasticRateX=Math.max(0,1-(offsetX / this.elasticDistance));
				if (this.target.y < this.area.y){
					var offsetY=this.area.y-this.target.y;
					}else if (this.target.y > this.area.y+this.area.height){
					offsetY=this.target.y-this.area.y-this.area.height;
					}else {
					offsetY=0;
				}
				this._elasticRateY=Math.max(0,1-(offsetY / this.elasticDistance));
			}
		}

		/**
		*移动至设定的拖拽区域。
		*/
		__proto.backToArea=function(){
			this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width);
			this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);
		}

		/**
		*舞台的抬起事件侦听函数。
		*@param e Event 对象。
		*/
		__proto.onStageMouseUp=function(e){
			MouseManager.instance.disableMouseEvent=false;
			Laya.stage.off("mouseup",this,this.onStageMouseUp);
			Laya.stage.off("mouseout",this,this.onStageMouseUp);
			Laya.timer.clear(this,this.loop);
			if (this._clickOnly || !this.target)return;
			if (this.hasInertia){
				if (this._offsets.length < 1){
					this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY);
				}
				this._offsetX=this._offsetY=0;
				var len=this._offsets.length;
				var n=Math.min(len,6);
				var m=this._offsets.length-n;
				for (var i=len-1;i > m;i--){
					this._offsetY+=this._offsets[i--];
					this._offsetX+=this._offsets[i];
				}
				this._offsetX=this._offsetX / n *2;
				this._offsetY=this._offsetY / n *2;
				if (Math.abs(this._offsetX)> this.maxOffset)this._offsetX=this._offsetX > 0 ? this.maxOffset :-this.maxOffset;
				if (Math.abs(this._offsetY)> this.maxOffset)this._offsetY=this._offsetY > 0 ? this.maxOffset :-this.maxOffset;
				Laya.timer.frameLoop(1,this,this.tweenMove);
				}else if (this.elasticDistance > 0){
				this.checkElastic();
				}else {
				this.clear();
			}
		}

		/**
		*橡皮筋效果检测。
		*/
		__proto.checkElastic=function(){
			var tx=NaN;
			var ty=NaN;
			if (this.target.x < this.area.x)tx=this.area.x;
			else if (this.target.x > this.area.x+this.area.width)tx=this.area.x+this.area.width;
			if (this.target.y < this.area.y)ty=this.area.y;
			else if (this.target.y > this.area.y+this.area.height)ty=this.area.y+this.area.height;
			if (!isNaN(tx)|| !isNaN(ty)){
				var obj={};
				if (!isNaN(tx))obj.x=tx;
				if (!isNaN(ty))obj.y=ty;
				this._tween=Tween.to(this.target,obj,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,false,false);
				}else {
				this.clear();
			}
		}

		/**
		*移动。
		*/
		__proto.tweenMove=function(){
			this._offsetX *=this.ratio *this._elasticRateX;
			this._offsetY *=this.ratio *this._elasticRateY;
			this.target.x+=this._offsetX;
			this.target.y+=this._offsetY;
			this.area && this.checkArea();
			this.target.event("dragmove",this.data);
			if ((Math.abs(this._offsetX)< 1 && Math.abs(this._offsetY)< 1)|| this._elasticRateX < 0.5 || this._elasticRateY < 0.5){
				Laya.timer.clear(this,this.tweenMove);
				if (this.elasticDistance > 0)this.checkElastic();
				else this.clear();
			}
		}

		/**
		*结束拖拽。
		*/
		__proto.clear=function(){
			if (this.target){
				this.clearTimer();
				var sp=this.target;
				this.target=null;
				this._parent=null;
				sp.event("dragend",this.data);
			}
		}

		return Dragging;
	})()


	/**
	*<code>Ease</code> 类定义了缓动函数，以便实现 <code>Tween</code> 动画的缓动效果。
	*/
	//class laya.utils.Ease
	var Ease=(function(){
		function Ease(){};
		__class(Ease,'laya.utils.Ease');
		Ease.linearNone=function(t,b,c,d){
			return c *t / d+b;
		}

		Ease.linearIn=function(t,b,c,d){
			return c *t / d+b;
		}

		Ease.linearInOut=function(t,b,c,d){
			return c *t / d+b;
		}

		Ease.linearOut=function(t,b,c,d){
			return c *t / d+b;
		}

		Ease.bounceIn=function(t,b,c,d){
			return c-Ease.bounceOut(d-t,0,c,d)+b;
		}

		Ease.bounceInOut=function(t,b,c,d){
			if (t < d *0.5)return Ease.bounceIn(t *2,0,c,d)*.5+b;
			else return Ease.bounceOut(t *2-d,0,c,d)*.5+c *.5+b;
		}

		Ease.bounceOut=function(t,b,c,d){
			if ((t /=d)< (1 / 2.75))return c *(7.5625 *t *t)+b;
			else if (t < (2 / 2.75))return c *(7.5625 *(t-=(1.5 / 2.75))*t+.75)+b;
			else if (t < (2.5 / 2.75))return c *(7.5625 *(t-=(2.25 / 2.75))*t+.9375)+b;
			else return c *(7.5625 *(t-=(2.625 / 2.75))*t+.984375)+b;
		}

		Ease.backIn=function(t,b,c,d,s){
			(s===void 0)&& (s=1.70158);
			return c *(t /=d)*t *((s+1)*t-s)+b;
		}

		Ease.backInOut=function(t,b,c,d,s){
			(s===void 0)&& (s=1.70158);
			if ((t /=d *0.5)< 1)return c *0.5 *(t *t *(((s *=(1.525))+1)*t-s))+b;
			return c / 2 *((t-=2)*t *(((s *=(1.525))+1)*t+s)+2)+b;
		}

		Ease.backOut=function(t,b,c,d,s){
			(s===void 0)&& (s=1.70158);
			return c *((t=t / d-1)*t *((s+1)*t+s)+1)+b;
		}

		Ease.elasticIn=function(t,b,c,d,a,p){
			(a===void 0)&& (a=0);
			(p===void 0)&& (p=0);
			var s;
			if (t==0)return b;
			if ((t /=d)==1)return b+c;
			if (!p)p=d *.3;
			if (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){
				a=c;
				s=p / 4;
			}else s=p / Ease.PI2 *Math.asin(c / a);
			return-(a *Math.pow(2,10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p))+b;
		}

		Ease.elasticInOut=function(t,b,c,d,a,p){
			(a===void 0)&& (a=0);
			(p===void 0)&& (p=0);
			var s;
			if (t==0)return b;
			if ((t /=d *0.5)==2)return b+c;
			if (!p)p=d *(.3 *1.5);
			if (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){
				a=c;
				s=p / 4;
			}else s=p / Ease.PI2 *Math.asin(c / a);
			if (t < 1)return-.5 *(a *Math.pow(2,10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p))+b;
			return a *Math.pow(2,-10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p)*.5+c+b;
		}

		Ease.elasticOut=function(t,b,c,d,a,p){
			(a===void 0)&& (a=0);
			(p===void 0)&& (p=0);
			var s;
			if (t==0)return b;
			if ((t /=d)==1)return b+c;
			if (!p)p=d *.3;
			if (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){
				a=c;
				s=p / 4;
			}else s=p / Ease.PI2 *Math.asin(c / a);
			return (a *Math.pow(2,-10 *t)*Math.sin((t *d-s)*Ease.PI2 / p)+c+b);
		}

		Ease.strongIn=function(t,b,c,d){
			return c *(t /=d)*t *t *t *t+b;
		}

		Ease.strongInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t *t+b;
			return c *0.5 *((t-=2)*t *t *t *t+2)+b;
		}

		Ease.strongOut=function(t,b,c,d){
			return c *((t=t / d-1)*t *t *t *t+1)+b;
		}

		Ease.sineInOut=function(t,b,c,d){
			return-c *0.5 *(Math.cos(Math.PI *t / d)-1)+b;
		}

		Ease.sineIn=function(t,b,c,d){
			return-c *Math.cos(t / d *Ease.HALF_PI)+c+b;
		}

		Ease.sineOut=function(t,b,c,d){
			return c *Math.sin(t / d *Ease.HALF_PI)+b;
		}

		Ease.quintIn=function(t,b,c,d){
			return c *(t /=d)*t *t *t *t+b;
		}

		Ease.quintInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t *t+b;
			return c *0.5 *((t-=2)*t *t *t *t+2)+b;
		}

		Ease.quintOut=function(t,b,c,d){
			return c *((t=t / d-1)*t *t *t *t+1)+b;
		}

		Ease.quartIn=function(t,b,c,d){
			return c *(t /=d)*t *t *t+b;
		}

		Ease.quartInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t+b;
			return-c *0.5 *((t-=2)*t *t *t-2)+b;
		}

		Ease.quartOut=function(t,b,c,d){
			return-c *((t=t / d-1)*t *t *t-1)+b;
		}

		Ease.cubicIn=function(t,b,c,d){
			return c *(t /=d)*t *t+b;
		}

		Ease.cubicInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return c *0.5 *t *t *t+b;
			return c *0.5 *((t-=2)*t *t+2)+b;
		}

		Ease.cubicOut=function(t,b,c,d){
			return c *((t=t / d-1)*t *t+1)+b;
		}

		Ease.quadIn=function(t,b,c,d){
			return c *(t /=d)*t+b;
		}

		Ease.quadInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return c *0.5 *t *t+b;
			return-c *0.5 *((--t)*(t-2)-1)+b;
		}

		Ease.quadOut=function(t,b,c,d){
			return-c *(t /=d)*(t-2)+b;
		}

		Ease.expoIn=function(t,b,c,d){
			return (t==0)? b :c *Math.pow(2,10 *(t / d-1))+b-c *0.001;
		}

		Ease.expoInOut=function(t,b,c,d){
			if (t==0)return b;
			if (t==d)return b+c;
			if ((t /=d *0.5)< 1)return c *0.5 *Math.pow(2,10 *(t-1))+b;
			return c *0.5 *(-Math.pow(2,-10 *--t)+2)+b;
		}

		Ease.expoOut=function(t,b,c,d){
			return (t==d)? b+c :c *(-Math.pow(2,-10 *t / d)+1)+b;
		}

		Ease.circIn=function(t,b,c,d){
			return-c *(Math.sqrt(1-(t /=d)*t)-1)+b;
		}

		Ease.circInOut=function(t,b,c,d){
			if ((t /=d *0.5)< 1)return-c *0.5 *(Math.sqrt(1-t *t)-1)+b;
			return c *0.5 *(Math.sqrt(1-(t-=2)*t)+1)+b;
		}

		Ease.circOut=function(t,b,c,d){
			return c *Math.sqrt(1-(t=t / d-1)*t)+b;
		}

		Ease.HALF_PI=Math.PI *0.5;
		Ease.PI2=Math.PI *2;
		return Ease;
	})()


	/**
	*鼠标点击区域，可以设置绘制一系列矢量图作为点击区域和非点击区域（目前只支持圆形，矩形，多边形）
	*/
	//class laya.utils.HitArea
	var HitArea=(function(){
		function HitArea(){
			this._hit=null;
			this._unHit=null;
		}

		__class(HitArea,'laya.utils.HitArea');
		var __proto=HitArea.prototype;
		/**
		*是否包含某个点
		*@param x x坐标
		*@param y y坐标
		*@return 是否点击到
		*/
		__proto.isHit=function(x,y){
			if (!HitArea.isHitGraphic(x,y,this.hit))return false;
			return !HitArea.isHitGraphic(x,y,this.unHit);
		}

		/**
		*检测对象是否包含指定的点。
		*@param x 点的 X 轴坐标值（水平位置）。
		*@param y 点的 Y 轴坐标值（垂直位置）。
		*@return 如果包含指定的点，则值为 true；否则为 false。
		*/
		__proto.contains=function(x,y){
			return this.isHit(x,y);
		}

		/**
		*可点击区域，可以设置绘制一系列矢量图作为点击区域（目前只支持圆形，矩形，多边形）
		*/
		__getset(0,__proto,'hit',function(){
			if (!this._hit)this._hit=new Graphics();
			return this._hit;
			},function(value){
			this._hit=value;
		});

		/**
		*不可点击区域，可以设置绘制一系列矢量图作为非点击区域（目前只支持圆形，矩形，多边形）
		*/
		__getset(0,__proto,'unHit',function(){
			if (!this._unHit)this._unHit=new Graphics();
			return this._unHit;
			},function(value){
			this._unHit=value;
		});

		HitArea.isHitGraphic=function(x,y,graphic){
			if (!graphic)return false;
			var cmds;
			cmds=graphic.cmds;
			if (!cmds && graphic._one){
				cmds=HitArea._cmds;
				cmds.length=1;
				cmds[0]=graphic._one;
			}
			if (!cmds)return false;
			var i=0,len=0;
			len=cmds.length;
			var cmd;
			for (i=0;i < len;i++){
				cmd=cmds[i];
				if (!cmd)continue ;
				var context=Render._context;
				switch (cmd.callee){
					case context._translate:
					case 6:
						x-=cmd[0];
						y-=cmd[1];
					default :
					}
				if (HitArea.isHitCmd(x,y,cmd))return true;
			}
			return false;
		}

		HitArea.isHitCmd=function(x,y,cmd){
			if (!cmd)return false;
			var context=Render._context;
			var rst=false;
			switch (cmd["callee"]){
				case context._drawRect:
				case 13:
					HitArea._rec.setTo(cmd[0],cmd[1],cmd[2],cmd[3]);
					rst=HitArea._rec.contains(x,y);
					break ;
				case context._drawCircle:
				case context._fillCircle:
				case 14:;
					var d=NaN;
					x-=cmd[0];
					y-=cmd[1];
					d=x *x+y *y;
					rst=d < cmd[2] *cmd[2];
					break ;
				case context._drawPoly:
				case 18:
					x-=cmd[0];
					y-=cmd[1];
					rst=HitArea.ptInPolygon(x,y,cmd[2]);
					break ;
				default :
					break ;
				}
			return rst;
		}

		HitArea.ptInPolygon=function(x,y,areaPoints){
			var p;
			p=HitArea._ptPoint;
			p.setTo(x,y);
			var nCross=0;
			var p1x=NaN,p1y=NaN,p2x=NaN,p2y=NaN;
			var len=0;
			len=areaPoints.length;
			for (var i=0;i < len;i+=2){
				p1x=areaPoints[i];
				p1y=areaPoints[i+1];
				p2x=areaPoints[(i+2)% len];
				p2y=areaPoints[(i+3)% len];
				if (p1y==p2y)
					continue ;
				if (p.y < Math.min(p1y,p2y))
					continue ;
				if (p.y >=Math.max(p1y,p2y))
					continue ;
				var tx=(p.y-p1y)*(p2x-p1x)/ (p2y-p1y)+p1x;
				if (tx > p.x){
					nCross++;
				}
			}
			return (nCross % 2==1);
		}

		HitArea._cmds=[];
		__static(HitArea,
		['_rec',function(){return this._rec=new Rectangle();},'_ptPoint',function(){return this._ptPoint=new Point();}
		]);
		return HitArea;
	})()


	/**
	*<code>HTMLChar</code> 是一个 HTML 字符类。
	*/
	//class laya.utils.HTMLChar
	var HTMLChar=(function(){
		function HTMLChar(char,w,h,style){
			//this._sprite=null;
			//this._x=NaN;
			//this._y=NaN;
			//this._w=NaN;
			//this._h=NaN;
			//this.isWord=false;
			//this.char=null;
			//this.charNum=NaN;
			//this.style=null;
			this.char=char;
			this.charNum=char.charCodeAt(0);
			this._x=this._y=0;
			this.width=w;
			this.height=h;
			this.style=style;
			this.isWord=!HTMLChar._isWordRegExp.test(char);
		}

		__class(HTMLChar,'laya.utils.HTMLChar');
		var __proto=HTMLChar.prototype;
		Laya.imps(__proto,{"laya.display.ILayout":true})
		/**
		*设置与此对象绑定的显示对象 <code>Sprite</code> 。
		*@param sprite 显示对象 <code>Sprite</code> 。
		*/
		__proto.setSprite=function(sprite){
			this._sprite=sprite;
		}

		/**
		*获取与此对象绑定的显示对象 <code>Sprite</code>。
		*@return
		*/
		__proto.getSprite=function(){
			return this._sprite;
		}

		/**@private */
		__proto._isChar=function(){
			return true;
		}

		/**@private */
		__proto._getCSSStyle=function(){
			return this.style;
		}

		/**
		*宽度。
		*/
		__getset(0,__proto,'width',function(){
			return this._w;
			},function(value){
			this._w=value;
		});

		/**
		*此对象存储的 X 轴坐标值。
		*当设置此值时，如果此对象有绑定的 Sprite 对象，则改变 Sprite 对象的属性 x 的值。
		*/
		__getset(0,__proto,'x',function(){
			return this._x;
			},function(value){
			if (this._sprite){
				this._sprite.x=value;
			}
			this._x=value;
		});

		/**
		*此对象存储的 Y 轴坐标值。
		*当设置此值时，如果此对象有绑定的 Sprite 对象，则改变 Sprite 对象的属性 y 的值。
		*/
		__getset(0,__proto,'y',function(){
			return this._y;
			},function(value){
			if (this._sprite){
				this._sprite.y=value;
			}
			this._y=value;
		});

		/**
		*高度。
		*/
		__getset(0,__proto,'height',function(){
			return this._h;
			},function(value){
			this._h=value;
		});

		HTMLChar._isWordRegExp=new RegExp("[\\w\.]","");
		return HTMLChar;
	})()


	/**
	*<code>Pool</code> 是对象池类，用于对象的存贮、重复使用。
	*/
	//class laya.utils.Pool
	var Pool=(function(){
		function Pool(){};
		__class(Pool,'laya.utils.Pool');
		Pool.getPoolBySign=function(sign){
			return Pool._poolDic[sign] || (Pool._poolDic[sign]=[]);
		}

		Pool.clearBySign=function(sign){
			if (Pool._poolDic[sign])Pool._poolDic[sign].length=0;
		}

		Pool.recover=function(sign,item){
			if (item["__InPool"])return;
			item["__InPool"]=true;
			Pool.getPoolBySign(sign).push(item);
		}

		Pool.getItemByClass=function(sign,cls){
			var pool=Pool.getPoolBySign(sign);
			var rst=pool.length ? pool.pop():new cls();
			rst["__InPool"]=false;
			return rst;
		}

		Pool.getItemByCreateFun=function(sign,createFun){
			var pool=Pool.getPoolBySign(sign);
			var rst=pool.length ? pool.pop():createFun();
			rst["__InPool"]=false;
			return rst;
		}

		Pool.getItem=function(sign){
			var pool=Pool.getPoolBySign(sign);
			var rst=pool.length ? pool.pop():null;
			if (rst){
				rst["__InPool"]=false;
			}
			return rst;
		}

		Pool._poolDic={};
		Pool.InPoolSign="__InPool";
		return Pool;
	})()


	/**
	*<code>Stat</code> 用于显示帧率统计信息。
	*/
	//class laya.utils.Stat
	var Stat=(function(){
		function Stat(){};
		__class(Stat,'laya.utils.Stat');
		/**
		*点击帧频显示区域的处理函数。
		*/
		__getset(1,Stat,'onclick',null,function(fn){
			Stat._canvas.source.onclick=fn;
			Stat._canvas.source.style.pointerEvents='';
		});

		Stat.show=function(x,y){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			if (Render.isConchApp){
				conch.showFPS&&conch.showFPS(x,y);
				return;
			};
			var pixel=Browser.pixelRatio;
			Stat._width=pixel *130;
			Stat._vx=pixel *75;
			Stat._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"};
			Stat._view[1]={title:"Sprite",value:"spriteCount",color:"white",units:"int"};
			Stat._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"};
			Stat._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"};
			if (Render.isWebGL){
				Stat._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"};
				if (!Render.is3DMode){
					Stat._view[0].title="FPS(WebGL)";
					Stat._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};
					}else {
					Stat._view[0].title="FPS(3D)";
					Stat._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"};
					Stat._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"};
					Stat._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"};
				}
				}else {
				Stat._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};
			}
			Stat._fontSize=12 *pixel;
			for (var i=0;i < Stat._view.length;i++){
				Stat._view[i].x=4;
				Stat._view[i].y=i *Stat._fontSize+2 *pixel;
			}
			Stat._height=pixel *(Stat._view.length *12+3 *pixel);
			if (!Stat._canvas){
				Stat._canvas=new HTMLCanvas('2D');
				Stat._canvas.size(Stat._width,Stat._height);
				Stat._ctx=Stat._canvas.getContext('2d');
				Stat._ctx.textBaseline="top";
				Stat._ctx.font=Stat._fontSize+"px Sans-serif";
				Stat._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;left:"+x+"px;top:"+y+"px;width:"+(Stat._width / pixel)+"px;height:"+(Stat._height / pixel)+"px;";
			}
			Stat._first=true;
			Stat.loop();
			Stat._first=false;
			Browser.container.appendChild(Stat._canvas.source);
			Stat.enable();
		}

		Stat.enable=function(){
			Laya.timer.frameLoop(1,Stat,Stat.loop);
		}

		Stat.hide=function(){
			Browser.removeElement(Stat._canvas.source);
			Laya.timer.clear(Stat,Stat.loop);
		}

		Stat.clear=function(){
			Stat.trianglesFaces=Stat.drawCall=Stat.shaderCall=Stat.spriteCount=Stat.treeNodeCollision=Stat.treeSpriteCollision=Stat.canvasNormal=Stat.canvasBitmap=Stat.canvasReCache=0;
		}

		Stat.loop=function(){
			Stat._count++;
			var timer=Browser.now();
			if (timer-Stat._timer < 1000)return;
			var count=Stat._count;
			Stat.FPS=Math.round((count *1000)/ (timer-Stat._timer));
			if (Stat._canvas){
				Stat.trianglesFaces=Math.round(Stat.trianglesFaces / count);
				Stat.drawCall=Math.round(Stat.drawCall / count)-2;
				Stat.shaderCall=Math.round(Stat.shaderCall / count);
				Stat.spriteCount=Math.round(Stat.spriteCount / count)-1;
				Stat.canvasNormal=Math.round(Stat.canvasNormal / count);
				Stat.canvasBitmap=Math.round(Stat.canvasBitmap / count);
				Stat.canvasReCache=Math.ceil(Stat.canvasReCache / count);
				Stat.treeNodeCollision=Math.round(Stat.treeNodeCollision / count);
				Stat.treeSpriteCollision=Math.round(Stat.treeSpriteCollision / count);
				var delay=Stat.FPS > 0?Math.floor(1000 / Stat.FPS).toString():" ";
				Stat._fpsStr=Stat.FPS+(Stat.renderSlow ? " slow" :"")+" "+delay;
				Stat._canvasStr=Stat.canvasReCache+"/"+Stat.canvasNormal+"/"+Stat.canvasBitmap;
				Stat.currentMemorySize=ResourceManager.systemResourceManager.memorySize;
				var ctx=Stat._ctx;
				ctx.clearRect(Stat._first ? 0 :Stat._vx,0,Stat._width,Stat._height);
				for (var i=0;i < Stat._view.length;i++){
					var one=Stat._view[i];
					if (Stat._first){
						ctx.fillStyle="white";
						ctx.fillText(one.title,one.x,one.y,null,null,null);
					}
					ctx.fillStyle=one.color;
					var value=Stat[one.value];
					(one.units=="M")&& (value=Math.floor(value / (1024 *1024)*100)/ 100+" M");
					ctx.fillText(value+"",one.x+Stat._vx,one.y,null,null,null);
				}
				Stat.clear();
			}
			Stat._count=0;
			Stat._timer=timer;
		}

		Stat.FPS=0;
		Stat.loopCount=0;
		Stat.shaderCall=0;
		Stat.drawCall=0;
		Stat.trianglesFaces=0;
		Stat.spriteCount=0;
		Stat.treeNodeCollision=0;
		Stat.treeSpriteCollision=0;
		Stat.canvasNormal=0;
		Stat.canvasBitmap=0;
		Stat.canvasReCache=0;
		Stat.renderSlow=false;
		Stat.currentMemorySize=0;
		Stat._fpsStr=null
		Stat._canvasStr=null
		Stat._canvas=null
		Stat._ctx=null
		Stat._timer=0;
		Stat._count=0;
		Stat._width=0;
		Stat._height=100;
		Stat._view=[];
		Stat._fontSize=12;
		Stat._first=false;
		Stat._vx=NaN
		return Stat;
	})()


	/**
	*<code>Timer</code> 是时钟管理类。它是一个单例，可以通过 Laya.timer 访问。
	*/
	//class laya.utils.Timer
	var Timer=(function(){
		var TimerHandler;
		function Timer(){
			this._delta=0;
			this.scale=1;
			this.currFrame=0;
			this._mid=1;
			this._map=[];
			this._laters=[];
			this._handlers=[];
			this._temp=[];
			this._count=0;
			this.currTimer=Browser.now();
			this._lastTimer=Browser.now();
			Laya.timer && Laya.timer.frameLoop(1,this,this._update);
		}

		__class(Timer,'laya.utils.Timer');
		var __proto=Timer.prototype;
		/**
		*@private
		*帧循环处理函数。
		*/
		__proto._update=function(){
			if (this.scale <=0){
				this._lastTimer=Browser.now();
				return;
			};
			var frame=this.currFrame=this.currFrame+this.scale;
			var now=Browser.now();
			this._delta=(now-this._lastTimer)*this.scale;
			var timer=this.currTimer=this.currTimer+this._delta;
			this._lastTimer=now;
			var handlers=this._handlers;
			this._count=0;
			for (i=0,n=handlers.length;i < n;i++){
				handler=handlers[i];
				if (handler.method!==null){
					var t=handler.userFrame ? frame :timer;
					if (t >=handler.exeTime){
						if (handler.repeat){
							if (t > handler.exeTime){
								handler.exeTime+=handler.delay;
								handler.run(false);
								if (t > handler.exeTime){
									handler.exeTime+=Math.ceil((t-handler.exeTime)/ handler.delay)*handler.delay;
								}
							}
							}else {
							handler.run(true);
						}
					}
					}else {
					this._count++;
				}
			}
			if (this._count > 30 || frame % 200===0)this._clearHandlers();
			var laters=this._laters;
			for (var i=0,n=laters.length-1;i <=n;i++){
				var handler=laters[i];
				if (handler.method!==null){
					this._map[handler.key]=null;
					handler.run(false);
				}
				this._recoverHandler(handler);
				i===n && (n=laters.length-1);
			}
			laters.length=0;
		}

		/**@private */
		__proto._clearHandlers=function(){
			var handlers=this._handlers;
			for (var i=0,n=handlers.length;i < n;i++){
				var handler=handlers[i];
				if (handler.method!==null)this._temp.push(handler);
				else this._recoverHandler(handler);
			}
			this._handlers=this._temp;
			this._temp=handlers;
			this._temp.length=0;
		}

		/**@private */
		__proto._recoverHandler=function(handler){
			this._map[handler.key]=null;
			handler.clear();
			Timer._pool.push(handler);
		}

		/**@private */
		__proto._create=function(useFrame,repeat,delay,caller,method,args,coverBefore){
			if (!delay){
				method.apply(caller,args);
				return;
			}
			if (coverBefore){
				var handler=this._getHandler(caller,method);
				if (handler){
					handler.repeat=repeat;
					handler.userFrame=useFrame;
					handler.delay=delay;
					handler.caller=caller;
					handler.method=method;
					handler.args=args;
					handler.exeTime=delay+(useFrame ? this.currFrame :this.currTimer+Browser.now()-this._lastTimer);
					return;
				}
			}
			handler=Timer._pool.length > 0 ? Timer._pool.pop():new TimerHandler();
			handler.repeat=repeat;
			handler.userFrame=useFrame;
			handler.delay=delay;
			handler.caller=caller;
			handler.method=method;
			handler.args=args;
			handler.exeTime=delay+(useFrame ? this.currFrame :this.currTimer+Browser.now()-this._lastTimer);
			this._indexHandler(handler);
			this._handlers.push(handler);
		}

		/**@private */
		__proto._indexHandler=function(handler){
			var caller=handler.caller;
			var method=handler.method;
			var cid=caller ? caller.$_GID || (caller.$_GID=Utils.getGID()):0;
			var mid=method.$_TID || (method.$_TID=(this._mid++)*100000);
			handler.key=cid+mid;
			this._map[handler.key]=handler;
		}

		/**
		*定时执行一次。
		*@param delay 延迟时间(单位为毫秒)。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。
		*/
		__proto.once=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this._create(false,false,delay,caller,method,args,coverBefore);
		}

		/**
		*定时重复执行。
		*@param delay 间隔时间(单位毫秒)。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。
		*/
		__proto.loop=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this._create(false,true,delay,caller,method,args,coverBefore);
		}

		/**
		*定时执行一次(基于帧率)。
		*@param delay 延迟几帧(单位为帧)。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。
		*/
		__proto.frameOnce=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this._create(true,false,delay,caller,method,args,coverBefore);
		}

		/**
		*定时重复执行(基于帧率)。
		*@param delay 间隔几帧(单位为帧)。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。
		*/
		__proto.frameLoop=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this._create(true,true,delay,caller,method,args,coverBefore);
		}

		/**返回统计信息。*/
		__proto.toString=function(){
			return "callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+Timer._pool.length;
		}

		/**
		*清理定时器。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*/
		__proto.clear=function(caller,method){
			var handler=this._getHandler(caller,method);
			if (handler){
				this._map[handler.key]=null;handler.key=0;
				handler.clear();
			}
		}

		/**
		*清理对象身上的所有定时器。
		*@param caller 执行域(this)。
		*/
		__proto.clearAll=function(caller){
			if (!caller)return;
			for (var i=0,n=this._handlers.length;i < n;i++){
				var handler=this._handlers[i];
				if (handler.caller===caller){
					this._map[handler.key]=null;handler.key=0;
					handler.clear();
				}
			}
		}

		/**@private */
		__proto._getHandler=function(caller,method){
			var cid=caller ? caller.$_GID || (caller.$_GID=Utils.getGID()):0;
			var mid=method.$_TID || (method.$_TID=(this._mid++)*100000);
			return this._map[cid+mid];
		}

		/**
		*延迟执行。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*/
		__proto.callLater=function(caller,method,args){
			if (this._getHandler(caller,method)==null){
				if (Timer._pool.length)
					var handler=Timer._pool.pop();
				else handler=new TimerHandler();
				handler.caller=caller;
				handler.method=method;
				handler.args=args;
				this._indexHandler(handler);
				this._laters.push(handler);
			}
		}

		/**
		*立即执行 callLater 。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*/
		__proto.runCallLater=function(caller,method){
			var handler=this._getHandler(caller,method);
			if (handler && handler.method !=null){
				this._map[handler.key]=null;
				handler.run(true);
			}
		}

		/**
		*立即提前执行定时器，执行之后从队列中删除
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*/
		__proto.runTimer=function(caller,method){
			this.runCallLater(caller,method);
		}

		/**
		*两帧之间的时间间隔,单位毫秒。
		*/
		__getset(0,__proto,'delta',function(){
			return this._delta;
		});

		Timer._pool=[];
		Timer.__init$=function(){
			/**@private */
			//class TimerHandler
			TimerHandler=(function(){
				function TimerHandler(){
					this.key=0;
					this.repeat=false;
					this.delay=0;
					this.userFrame=false;
					this.exeTime=0;
					this.caller=null;
					this.method=null;
					this.args=null;
				}
				__class(TimerHandler,'');
				var __proto=TimerHandler.prototype;
				__proto.clear=function(){
					this.caller=null;
					this.method=null;
					this.args=null;
				}
				__proto.run=function(withClear){
					var caller=this.caller;
					if (caller && caller.destroyed)return this.clear();
					var method=this.method;
					var args=this.args;
					withClear && this.clear();
					if (method==null)return;
					args ? method.apply(caller,args):method.call(caller);
				}
				return TimerHandler;
			})()
		}

		return Timer;
	})()


	/**
	*<code>Tween</code> 是一个缓动类。使用实现目标对象属性的渐变。
	*/
	//class laya.utils.Tween
	var Tween=(function(){
		function Tween(){
			//this._complete=null;
			//this._target=null;
			//this._ease=null;
			//this._props=null;
			//this._duration=0;
			//this._delay=0;
			//this._startTimer=0;
			//this._usedTimer=0;
			//this._usedPool=false;
			this.gid=0;
			//this.update=null;
		}

		__class(Tween,'laya.utils.Tween');
		var __proto=Tween.prototype;
		/**
		*缓动对象的props属性到目标值。
		*@param target 目标对象(即将更改属性值的对象)。
		*@param props 变化的属性列表，比如{x:100,y:20,ease:Ease.backOut,complete:Handler.create(this,onComplete),update:new Handler(this,onComplete)}。
		*@param duration 花费的时间，单位毫秒。
		*@param ease 缓动类型，默认为匀速运动。
		*@param complete 结束回调函数。
		*@param delay 延迟执行时间。
		*@param coverBefore 是否覆盖之前的缓动。
		*@return 返回Tween对象。
		*/
		__proto.to=function(target,props,duration,ease,complete,delay,coverBefore){
			(delay===void 0)&& (delay=0);
			(coverBefore===void 0)&& (coverBefore=false);
			return this._create(target,props,duration,ease,complete,delay,coverBefore,true,false,true);
		}

		/**
		*从props属性，缓动到当前状态。
		*@param target 目标对象(即将更改属性值的对象)。
		*@param props 变化的属性列表，比如{x:100,y:20,ease:Ease.backOut,complete:Handler.create(this,onComplete),update:new Handler(this,onComplete)}。
		*@param duration 花费的时间，单位毫秒。
		*@param ease 缓动类型，默认为匀速运动。
		*@param complete 结束回调函数。
		*@param delay 延迟执行时间。
		*@param coverBefore 是否覆盖之前的缓动。
		*@return 返回Tween对象。
		*/
		__proto.from=function(target,props,duration,ease,complete,delay,coverBefore){
			(delay===void 0)&& (delay=0);
			(coverBefore===void 0)&& (coverBefore=false);
			return this._create(target,props,duration,ease,complete,delay,coverBefore,false,false,true);
		}

		/**@private */
		__proto._create=function(target,props,duration,ease,complete,delay,coverBefore,isTo,usePool,runNow){
			if (!target)throw new Error("Tween:target is null");
			this._target=target;
			this._duration=duration;
			this._ease=ease || props.ease || Tween.easeNone;
			this._complete=complete || props.complete;
			this._delay=delay;
			this._props=[];
			this._usedTimer=0;
			this._startTimer=Browser.now();
			this._usedPool=usePool;
			this.update=props.update;
			var gid=(target.$_GID || (target.$_GID=Utils.getGID()));
			if (!Tween.tweenMap[gid]){
				Tween.tweenMap[gid]=[this];
				}else {
				if (coverBefore)Tween.clearTween(target);
				Tween.tweenMap[gid].push(this);
			}
			if (runNow){
				if (delay <=0)this.firstStart(target,props,isTo);
				else Laya.timer.once(delay,this,this.firstStart,[target,props,isTo]);
				}else {
				this._initProps(target,props,isTo);
			}
			return this;
		}

		__proto.firstStart=function(target,props,isTo){
			if (target.destroyed){
				this.clear();
				return;
			}
			this._initProps(target,props,isTo);
			this._beginLoop();
		}

		__proto._initProps=function(target,props,isTo){
			for (var p in props){
				if ((typeof (target[p])=='number')){
					var start=isTo ? target[p] :props[p];
					var end=isTo ? props[p] :target[p];
					this._props.push([p,start,end-start]);
					if (!isTo)target[p]=start;
				}
			}
		}

		__proto._beginLoop=function(){
			Laya.timer.frameLoop(1,this,this._doEase);
		}

		/**执行缓动**/
		__proto._doEase=function(){
			this._updateEase(Browser.now());
		}

		/**@private */
		__proto._updateEase=function(time){
			var target=this._target;
			if (!target)return;
			if (target.destroyed)return Tween.clearTween(target);
			var usedTimer=this._usedTimer=time-this._startTimer-this._delay;
			if (usedTimer < 0)return;
			if (usedTimer >=this._duration)return this.complete();
			var ratio=usedTimer > 0 ? this._ease(usedTimer,0,1,this._duration):0;
			var props=this._props;
			for (var i=0,n=props.length;i < n;i++){
				var prop=props[i];
				target[prop[0]]=prop[1]+(ratio *prop[2]);
			}
			if (this.update)this.update.run();
		}

		/**
		*立即结束缓动并到终点。
		*/
		__proto.complete=function(){
			if (!this._target)return;
			Laya.timer.runTimer(this,this.firstStart);
			var target=this._target;
			var props=this._props;
			var handler=this._complete;
			for (var i=0,n=props.length;i < n;i++){
				var prop=props[i];
				target[prop[0]]=prop[1]+prop[2];
			}
			if (this.update)this.update.run();
			this.clear();
			handler && handler.run();
		}

		/**
		*暂停缓动，可以通过resume或restart重新开始。
		*/
		__proto.pause=function(){
			Laya.timer.clear(this,this._beginLoop);
			Laya.timer.clear(this,this._doEase);
		}

		/**
		*设置开始时间。
		*@param startTime 开始时间。
		*/
		__proto.setStartTime=function(startTime){
			this._startTimer=startTime;
		}

		/**
		*停止并清理当前缓动。
		*/
		__proto.clear=function(){
			if (this._target){
				this._remove();
				this._clear();
			}
		}

		/**
		*@private
		*/
		__proto._clear=function(){
			this.pause();
			Laya.timer.clear(this,this.firstStart);
			this._complete=null;
			this._target=null;
			this._ease=null;
			this._props=null;
			if (this._usedPool){
				this.update=null;
				Pool.recover("tween",this);
			}
		}

		/**回收到对象池。*/
		__proto.recover=function(){
			this._usedPool=true;
			this._clear();
		}

		__proto._remove=function(){
			var tweens=Tween.tweenMap[this._target.$_GID];
			if (tweens){
				for (var i=0,n=tweens.length;i < n;i++){
					if (tweens[i]===this){
						tweens.splice(i,1);
						break ;
					}
				}
			}
		}

		/**
		*重新开始暂停的缓动。
		*/
		__proto.restart=function(){
			this.pause();
			this._usedTimer=0;
			this._startTimer=Browser.now();
			var props=this._props;
			for (var i=0,n=props.length;i < n;i++){
				var prop=props[i];
				this._target[prop[0]]=prop[1];
			}
			Laya.timer.once(this._delay,this,this._beginLoop);
		}

		/**
		*恢复暂停的缓动。
		*/
		__proto.resume=function(){
			if (this._usedTimer >=this._duration)return;
			this._startTimer=Browser.now()-this._usedTimer-this._delay;
			this._beginLoop();
		}

		/**设置当前执行比例**/
		__getset(0,__proto,'progress',null,function(v){
			var uTime=v *this._duration;
			this._startTimer=Browser.now()-this._delay-uTime;
		});

		Tween.to=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){
			(delay===void 0)&& (delay=0);
			(coverBefore===void 0)&& (coverBefore=false);
			(autoRecover===void 0)&& (autoRecover=true);
			return Pool.getItemByClass("tween",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,true,autoRecover,true);
		}

		Tween.from=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){
			(delay===void 0)&& (delay=0);
			(coverBefore===void 0)&& (coverBefore=false);
			(autoRecover===void 0)&& (autoRecover=true);
			return Pool.getItemByClass("tween",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,false,autoRecover,true);
		}

		Tween.clearAll=function(target){
			if (!target || !target.$_GID)return;
			var tweens=Tween.tweenMap[target.$_GID];
			if (tweens){
				for (var i=0,n=tweens.length;i < n;i++){
					tweens[i]._clear();
				}
				tweens.length=0;
			}
		}

		Tween.clear=function(tween){
			tween.clear();
		}

		Tween.clearTween=function(target){
			Tween.clearAll(target);
		}

		Tween.easeNone=function(t,b,c,d){
			return c *t / d+b;
		}

		Tween.tweenMap={};
		return Tween;
	})()


	/**
	*<code>Utils</code> 是工具类。
	*/
	//class laya.utils.Utils
	var Utils=(function(){
		function Utils(){};
		__class(Utils,'laya.utils.Utils');
		Utils.toRadian=function(angle){
			return angle *Utils._pi2;
		}

		Utils.toAngle=function(radian){
			return radian *Utils._pi;
		}

		Utils.toHexColor=function(color){
			if (color < 0 || isNaN(color))return null;
			var str=color.toString(16);
			while (str.length < 6)str="0"+str;
			return "#"+str;
		}

		Utils.getGID=function(){
			return Utils._gid++;
		}

		Utils.concatArray=function(source,array){
			if (!array)return source;
			if (!source)return array;
			var i=0,len=array.length;
			for (i=0;i < len;i++){
				source.push(array[i]);
			}
			return source;
		}

		Utils.clearArray=function(array){
			if (!array)return array;
			array.length=0;
			return array;
		}

		Utils.copyArray=function(source,array){
			source || (source=[]);
			if (!array)return source;
			source.length=array.length;
			var i=0,len=array.length;
			for (i=0;i < len;i++){
				source[i]=array[i];
			}
			return source;
		}

		Utils.getGlobalRecByPoints=function(sprite,x0,y0,x1,y1){
			var newLTPoint;
			newLTPoint=new Point(x0,y0);
			newLTPoint=sprite.localToGlobal(newLTPoint);
			var newRBPoint;
			newRBPoint=new Point(x1,y1);
			newRBPoint=sprite.localToGlobal(newRBPoint);
			return Rectangle._getWrapRec([newLTPoint.x,newLTPoint.y,newRBPoint.x,newRBPoint.y]);
		}

		Utils.getGlobalPosAndScale=function(sprite){
			return Utils.getGlobalRecByPoints(sprite,0,0,1,1);
		}

		Utils.bind=function(fun,scope){
			var rst=fun;
			rst=fun.bind(scope);;
			return rst;
		}

		Utils.measureText=function(txt,font){
			return RunDriver.measureText(txt,font);
		}

		Utils.updateOrder=function(array){
			if (!array || array.length < 2)return false;
			var i=1,j=0,len=array.length,key=NaN,c;
			while (i < len){
				j=i;
				c=array[j];
				key=array[j]._zOrder;
				while (--j >-1){
					if (array[j]._zOrder > key)array[j+1]=array[j];
					else break ;
				}
				array[j+1]=c;
				i++;
			};
			var model=c.parent.conchModel;
			if (model){
				if (model.updateZOrder !=null){
					model.updateZOrder();
				}
				else{
					for (i=0;i < len;i++){
						model.removeChild(array[i].conchModel);
					}
					for (i=0;i < len;i++){
						model.addChildAt(array[i].conchModel,i);
					}
				}
			}
			return true;
		}

		Utils.transPointList=function(points,x,y){
			var i=0,len=points.length;
			for (i=0;i < len;i+=2){
				points[i]+=x;
				points[i+1]+=y;
			}
		}

		Utils.parseInt=function(str,radix){
			(radix===void 0)&& (radix=0);
			var result=Browser.window.parseInt(str,radix);
			if (isNaN(result))return 0;
			return result;
		}

		Utils.getFileExtension=function(path){
			Utils._extReg.lastIndex=path.lastIndexOf(".");
			var result=Utils._extReg.exec(path);
			if (result && result.length > 1){
				return result[1].toLowerCase();
			}
			return null;
		}

		Utils._gid=1;
		Utils._pi=180 / Math.PI;
		Utils._pi2=Math.PI / 180;
		Utils._extReg=/\.(\w+)\??/g;
		Utils.parseXMLFromString=function(value){
			var rst;
			value=value.replace(/>\s+</g,'><');
			rst=(new DOMParser()).parseFromString(value,'text/xml');
			if (rst.firstChild.textContent.indexOf("This page contains the following errors")>-1){
				throw new Error(rst.firstChild.firstChild.textContent);
			}
			return rst;
		}

		return Utils;
	})()


	/**
	*@private
	*/
	//class laya.utils.VectorGraphManager
	var VectorGraphManager=(function(){
		function VectorGraphManager(){
			this.useDic={};
			this.shapeDic={};
			this.shapeLineDic={};
			this._id=0;
			this._checkKey=false;
			this._freeIdArray=[];
			if (Render.isWebGL){
				CacheManger.regCacheByFunction(Utils.bind(this.startDispose,this),Utils.bind(this.getCacheList,this));
			}
		}

		__class(VectorGraphManager,'laya.utils.VectorGraphManager');
		var __proto=VectorGraphManager.prototype;
		/**
		*得到个空闲的ID
		*@return
		*/
		__proto.getId=function(){
			return this._id++;
		}

		/**
		*添加一个图形到列表中
		*@param id
		*@param shape
		*/
		__proto.addShape=function(id,shape){
			this.shapeDic[id]=shape;
			if (!this.useDic[id]){
				this.useDic[id]=true;
			}
		}

		/**
		*添加一个线图形到列表中
		*@param id
		*@param Line
		*/
		__proto.addLine=function(id,Line){
			this.shapeLineDic[id]=Line;
			if (!this.shapeLineDic[id]){
				this.shapeLineDic[id]=true;
			}
		}

		/**
		*检测一个对象是否在使用中
		*@param id
		*/
		__proto.getShape=function(id){
			if (this._checkKey){
				if (this.useDic[id] !=null){
					this.useDic[id]=true;
				}
			}
		}

		/**
		*删除一个图形对象
		*@param id
		*/
		__proto.deleteShape=function(id){
			if (this.shapeDic[id]){
				this.shapeDic[id]=null;
				delete this.shapeDic[id];
			}
			if (this.shapeLineDic[id]){
				this.shapeLineDic[id]=null;
				delete this.shapeLineDic[id];
			}
			if (this.useDic[id] !=null){
				delete this.useDic[id];
			}
		}

		/**
		*得到缓存列表
		*@return
		*/
		__proto.getCacheList=function(){
			var str;
			var list=[];
			for (str in this.shapeDic){
				list.push(this.shapeDic[str]);
			}
			for (str in this.shapeLineDic){
				list.push(this.shapeLineDic[str]);
			}
			return list;
		}

		/**
		*开始清理状态，准备销毁
		*/
		__proto.startDispose=function(key){
			var str;
			for (str in this.useDic){
				this.useDic[str]=false;
			}
			this._checkKey=true;
		}

		/**
		*确认销毁
		*/
		__proto.endDispose=function(){
			if (this._checkKey){
				var str;
				for (str in this.useDic){
					if (!this.useDic[str]){
						this.deleteShape(str);
					}
				}
				this._checkKey=false;
			}
		}

		VectorGraphManager.getInstance=function(){
			return VectorGraphManager.instance=VectorGraphManager.instance|| new VectorGraphManager();
		}

		VectorGraphManager.instance=null
		return VectorGraphManager;
	})()


	/**
	*@private
	*/
	//class laya.utils.WordText
	var WordText=(function(){
		function WordText(){
			this.id=NaN;
			this.save=[];
			this.toUpperCase=null;
			this.changed=false;
			this._text=null;
		}

		__class(WordText,'laya.utils.WordText');
		var __proto=WordText.prototype;
		__proto.setText=function(txt){
			this.changed=true;
			this._text=txt;
		}

		__proto.toString=function(){
			return this._text;
		}

		__proto.charCodeAt=function(i){
			return this._text ? this._text.charCodeAt(i):NaN;
		}

		__proto.charAt=function(i){
			return this._text ? this._text.charAt(i):null;
		}

		__getset(0,__proto,'length',function(){
			return this._text ? this._text.length :0;
		});

		return WordText;
	})()


	/**
	*<code>LayoutStyle</code> 是一个布局样式类。
	*/
	//class laya.ui.LayoutStyle
	var LayoutStyle=(function(){
		function LayoutStyle(){
			this.enable=false;
			this.top=NaN;
			this.bottom=NaN;
			this.left=NaN;
			this.right=NaN;
			this.centerX=NaN;
			this.centerY=NaN;
			this.anchorX=NaN;
			this.anchorY=NaN;
		}

		__class(LayoutStyle,'laya.ui.LayoutStyle');
		__static(LayoutStyle,
		['EMPTY',function(){return this.EMPTY=new LayoutStyle();}
		]);
		return LayoutStyle;
	})()


	/**
	*<code>Styles</code> 定义了组件常用的样式属性。
	*/
	//class laya.ui.Styles
	var Styles=(function(){
		function Styles(){};
		__class(Styles,'laya.ui.Styles');
		Styles.labelColor="#000000";
		Styles.buttonStateNum=3;
		Styles.scrollBarMinNum=15;
		Styles.scrollBarDelayTime=500;
		__static(Styles,
		['defaultSizeGrid',function(){return this.defaultSizeGrid=[4,4,4,4,0];},'labelPadding',function(){return this.labelPadding=[2,2,2,2];},'inputLabelPadding',function(){return this.inputLabelPadding=[1,1,1,3];},'buttonLabelColors',function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"];},'comboBoxItemColors',function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"];}
		]);
		return Styles;
	})()


	/**
	*<code>UIUtils</code> 是文本工具集。
	*/
	//class laya.ui.UIUtils
	var UIUtils=(function(){
		function UIUtils(){};
		__class(UIUtils,'laya.ui.UIUtils');
		UIUtils.fillArray=function(arr,str,type){
			var temp=arr.concat();
			if (str){
				var a=str.split(",");
				for (var i=0,n=Math.min(temp.length,a.length);i < n;i++){
					var value=a[i];
					temp[i]=(value=="true" ? true :(value=="false" ? false :value));
					if (type !=null)temp[i]=type(value);
				}
			}
			return temp;
		}

		UIUtils.toColor=function(color){
			return Utils.toHexColor(color);
		}

		UIUtils.gray=function(traget,isGray){
			(isGray===void 0)&& (isGray=true);
			if (isGray){
				UIUtils.addFilter(traget,UIUtils.grayFilter);
				}else {
				UIUtils.clearFilter(traget,ColorFilter);
			}
		}

		UIUtils.addFilter=function(target,filter){
			var filters=target.filters || [];
			filters.push(filter);
			target.filters=filters;
		}

		UIUtils.clearFilter=function(target,filterType){
			var filters=target.filters;
			if (filters !=null && filters.length > 0){
				for (var i=filters.length-1;i >-1;i--){
					var filter=filters[i];
					if (Laya.__typeof(filter,filterType))filters.splice(i,1);
				}
				target.filters=filters;
			}
		}

		__static(UIUtils,
		['grayFilter',function(){return this.grayFilter=new ColorFilter([0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0,0,0,1,0]);}
		]);
		return UIUtils;
	})()


	/**全局配置*/
	//class UIConfig
	var UIConfig=(function(){
		function UIConfig(){};
		__class(UIConfig,'UIConfig');
		UIConfig.touchScrollEnable=true;
		UIConfig.mouseWheelEnable=true;
		UIConfig.showButtons=true;
		UIConfig.popupBgColor="#000000";
		UIConfig.popupBgAlpha=0.5;
		UIConfig.closeDialogOnSide=true;
		return UIConfig;
	})()


	//class laya.debug.data.Base64AtlasManager
	var Base64AtlasManager=(function(){
		function Base64AtlasManager(){}
		__class(Base64AtlasManager,'laya.debug.data.Base64AtlasManager');
		Base64AtlasManager.replaceRes=function(uiO){
			Base64AtlasManager.base64.replaceRes(uiO);
		}

		__static(Base64AtlasManager,
		['dataO',function(){return this.dataO={"comp/button1.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABRCAYAAAApS3MNAAABSUlEQVR4Xu3a0QmFMADFUJ1JXM0h3moPZ6qg4AoNeLqAIenFn65jjLE40w2sQkxvcAMI0eggRKSDEEJUDEQ4/COEiBiIYFiEEBEDEQyLECJiIIJhEUJEDEQwLEKIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggnEvYvv9IzjfxDiP/XlgJsTcCyDEXP/v14UQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBYhBARAxEMixAiYiCCYRFCRAxEMCxCiIiBCMa7iAjPpzG8fY3kF0KIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBcGJiOHTRZjZAAAAAASUVORK5CYII=","comp/line2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAAG0lEQVQYV2NkoDJgpLJ5DIxtra3/qWko1V0IAJvgApS1libIAAAAAElFTkSuQmCC","view/create.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAdElEQVQ4T2NkwAIWLFjwH5t4QkICIyM2CXQxmAHka/j///9mXDYxMjL6YtgwBDUg+w8crIT8MBQ0oEca55JvWNPS9xgu4tISzADyNfz///8MnrRkgmHDENSALWng9fRQ0DA40xLecglbWhpqGoZCMUNKUQkANAHAJVkE5XwAAAAASUVORK5CYII=","view/rendertime.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAABeUlEQVQ4T+2Uv0tCURSAvyNdcwiXBlsaaomWFgeHlqAtCPsDJHwIiUtDSxERtErtmQ6CjkHo4FpDBQ0tbVFR0BYE0eQvOnFF7T17QlOTd3m88873OD8+rtA9uVzOBIPBlIisAwvd8B1QajQahXQ63bIx6QHFYrEEJHrv7qeqZhzHOfYA+Xw+Yow5B+YHoGwymdxW1QAQEFWNAk8i8uEDuZM3gUcLZIEJYNcNqWrVcZyd7p9t8jLwYIFTYBx47UHlcjmcSCQ+B5JtpU0LnAFj3br7kE+yTalb4BCYczVqoT3AjteW4T73FlgFNgY+1IGQz4hPLGCAI2DGbweu2Auw1Vmcqk4C+8DsEOgZOBCR9/6mVdU2vgIsAdOuIVwANRFpezatuahpTYVSop1m+y6pasm8NQqSvvW61KwslkSHuCRkgvErr0taiUXaal1Sr0siWRO/9HfpF+RN9nfpB/qqmrXrv7mktVhYVm5GLo1cct9LI5e8d84/3UvfAgdlKH0EO7MAAAAASUVORK5CYII=","view/cache.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAkCAYAAABSSLCCAAAAcElEQVQ4T2NcsGDB/4SEBEYGBgYGYtmMxCpENhhsA6mA8f///5tHNTEwkBcQpIYcSD15kUtWigi51vR/jVYdOGUQy2YkViGywWSnvTOkhiAonkY1gZIRqSEHTntkRe4g10RWQIyWe5Bgo2O5R7dkBADztyP+yFzirAAAAABJRU5ErkJggg==","comp/clip_selectBox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAoCAYAAAAIeF9DAAAAsElEQVRoQ+3ZQQ0AMQzEwAuqEgh/Sj2pKObhIrBsrfLonHPu12MMTEGYFg+kIFaPgmA9ClIQzQDG0w0pCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCCoIZwHBmd/tTh6IUBIrx/tRbiFWkIFaPFoL1KEhBNAMYTzekIJgBDKeFFAQzgOG0kIJgBjCcFlIQzACG00IKghnAcFpIQTADGE4LwYL8U/BE1dCJ3PsAAAAASUVORK5CYII=","comp/label.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAASCAYAAACQCxruAAAAmElEQVRoQ+3aMQqAQBBDUef+hx4Zq1mrbPnhWylECHmghVZ397OOqqp97TlugdNzgEXFIaaFuwROt0LmBEay5aXb920+FjIpMJItLy1wvhUyKTCSLS8tcL4VMikwki0vLXC+FTIpMJItLy1wvhUyKTCSLS89wPP1Qeh8M0zy+84gMMbruqjA15OxbtjAu7mPa5bj0fb/A8cLgD4n/wQKNiIAAAAASUVORK5CYII=","comp/clip_tree_arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAwUlEQVQoU5WRPRKCMBCFWUt6vYQeB06RUDpoBbFDa7yDwm30FGi9dHnOMiQDBgvT5c3b7+0PRVEUlVV9A3NmzL6T//SRfMz5CgCdtVafjlmzaHAigAbM2tE8YVo1pf0yvABoc9D3wACgBbMKIgD4qqDJsqqlMV8VGL5n/88geCJKlijSMBXFZUNx/CSi9WwX1r7R99thzKKqkxXRbMUWSE2u2sEwHsxHCbrMVSq6N4xRD9HAvJstylEkarhurlqnfQC58YP5+CvQNwAAAABJRU5ErkJggg==","view/bg_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMGZk/l2CDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ4oyStBhXcy5AAAAABJRU5ErkJggg==","view/bg_top.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMKZp/rWBDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ6WyDMhXMLeQgAAAABJRU5ErkJggg==","view/clickselect.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAACfElEQVRIS8WVO2iTYRSGn5OWqpMOurg0VRBdVVCsg7GgDjpZECyirl4GEYfSgBlaB5VSpApdxCJIoeKgg7dKC21ALahIiyiKKUjxAiI4qCH1lRP/hPhfAnHpGZPv+c4573nP95ukO/xHmINmtq8RtswsPiipB/gAPAFem5nCbcSWKukIsD84/A2YBh4DL8ysWLkk0qOkDcD5GLF+Ac+Ap35ZHGjAdWB5gtJvgZFYVSWdBHaFwBlg1Mw8K0ngFiAbAm+a2XBij/6HpBbgBrAEmAVeAZ1AFU40QDCWrcBZL0/S4Vq4HtgB7DWzU5XyauDBMhhWz70ryVVdb2ZuhGpI2g1MODjfiMFrxZk3s9WNwJ6snHFxQUlXgXfAPeC5mf2O2Y5oqZLcMceCw1+AseCSSTP7mSiOpM3A7RixfvgYgAd+WUQcSSnfPWBlgtIvgf5YVSVdBA6GQF/mS2bmWcvbERmHJF+payFw0MzO1TWApKXBViwL3h5/Pk4AVTjRAMFY9njJXl6wLccrcD3wAHDUzBwuRw18JtbkbkFJruomM7sf2o4u4Jals/mFRgxeFcfBQm97UyOwM+WMiwums/k3QnMps+HWpuLIRC5TCrcRW2pbT35MRiY4XDRsVmiU5uJQIZfxb0k5Ij229eQPySJ287MLGO8Rd1M0XY6AO3LjzYVSy3fAH+VICL4a6o9VtTWbnzbYGKI+IrtQ6Ns2EFuq/5jOTnWD9f4DikeFvvbqhyg2Yzo3voJSy2fAjfEJMYPRQQ2caAAfC7AW2WkvrzU79dCwnRW4Hjgg6JrrbV9VKbkKw1Csyd2Ca7on1y2krHOub3t16//2n79SarbsH7BKtfejoCjmAAAAAElFTkSuQmCC","view/resize.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABeUlEQVRIS+2UvUpdURCFvxXRKJpIEBURsVAIiiBoaaGCjY2VLyH4MBaCPoWlnQlpI6SxsQmkURQL5eK/6JK57iuRnMPZtxAkuOFUhzWz96xvjcg8tluAT5LOQqJMHba/AgPAD0nOEtruAOaB6Lon6U+ucAoYTLe7Bb5XCm1/BCaAXqAVOAHyOkYn27PA5/TGWmXHxvBeT2i7TVIM4MUp7ZhGPlY3V/pVKUxEjAIjyac74LIAjK70PwCoyfYXYDJwyqDoHtiRdFOfql0naBgIrILF/ZIi1yH6h1XbYXCPpKOq7s34GEX7JB00m445YBzYlPSQ1dF2N7CaWN2W9DNXuJxAj1uGVeuVQtvh32LyuR34DexWCv+CfAXoBzYkHb8Boe1OSRcFkBdfNY18IQiUtFUpTJjNAPEFHVfAaQFyjZ3zNBzbQ8BSWkZViEbk1uIpjXR8AKbT7jwEvpVUqEk6L0pHLN5hSWWxeq7XjI/v6Sgz0vZ7Ov7DdDwCkcb1m86tSukAAAAASUVORK5CYII=","view/clickanalyse.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAC7UlEQVRIS5WWT2hUZxTFfyfGFolkoUVKrHQiEaX+IfgHa54UQzUqpWYhLbQU6ULNwgYXuog6yiiTgK2LgtAu6yqbFkpRBEURQzJEBN200NqKkxoDLnQhFUrizJU7vje8SSbzZr7FwDy+c75z7z3nfU80uMxMDin9JC0zewvYAHwIrAH65wWaWQuwOdy8CVgUHnBd0sUKoJktBbYC24B1QHMVNeck3ZWZrYhtXpUg/3/gS0kzDnT2/cDqpFqBUUnnK5pjZutDgo01Tr0g6XbVrprZypBgO9AUU/EK+ErSyzLQzC5XkTkCfBR7fl/Smeh/qasOlPRp9DAkOgp8H5P9o6SriUAnMrOzgNdswNeSntcL9IYNAQ8kHYuXU5Y6u8ZIupldAO5I+nkOsNb8wjk/ljTZKFCSvMbSMrPSiOpNx9uAz3UP4IbfWSsdrcDH4eZuYHF46LCk47PT8S6wG9gbJmRhlfoPSLrhJvdERJs7E+S73dZKmnagsx8JB50UEHdY3+x0dIUEO2qcekTSr/OlY21I4N5dEJMwA6yX9CKejqkqGn8DemPPb0v6YrZXpyS1xYbsRD3AtZjsk5IuJQKdyMyGAa/ZnbNR0tN6gd6wXwAP8SfV0jGnxki6mV1xyf4ubdTkPue/Jf3TEJCMNZFRMQLtyNwqvaTrSkdHZry1MFM8bLLPgY5U8/SyeYHvncotb5b1A/t8c2QGg3sT2WBLBbD95PiGogr9Ej0Gbap8r4ZJ5kR+MPhW7WdGd5npEFaa15IE+YWW5uklf2S6/1N7OnfasG+Ad5KiAfyVzwYfVDQnlc71YTaA8Ntrvtq/y2eDgapdTZ0a60UMhjdvmcCgWDClJge7npSBqfRYYY5M6U/M/NqO1mQ+G7xf4VUH5rNBOXtviLQfzH0afizop0fZroOJQCdKpcfyUKrZFhTpfDgU/F4nMNcH9gPwLJ8Nls3xarUaI+mp9NhTg5GJbPBZQyb3OReayP17rutmHPga1PpCOk+zrlEAAAAASUVORK5CYII=","view/res.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAADwUlEQVRIS+3WT2gcdRQH8O/b2SwNC7l4MAEPvbilUkoPOUmLjSDrZn4hxYKH/kGwyB4tQogiu/N+GymyoWguhVBQKKkHQTHsW9fUQwqKp4AgtMXkInhILl4CkoTdmSe/6XZp2pntLli8uMedt9/3mze/33yW8Jw+9Jxy0TeYmV8FcFVVTxPRiwA6AP5U1TvZbHapUqn8nrawxGBVJWvtNVWdJ6K05h1V/dhaW08KT/wRM1sAVQCRqn5JRLdyudw9Iora7faJKIrKqnrBNSWiahAEC0+GHwpm5utEdD+KopsuBMDbzPxt0oqstRdV9Za7lslkzlar1Z8erzsUHATBJhG93C34fmJi4ly5XG6nzTEIgjoRzanqkrX2amowM98F8Fq3wK34PWb+Ii14cXExv7e3V6hWq78+axQrANwt/kVEl5j5h0G2IzMfUdWCtfa3R/VPzvhTAG8AOM/MfwwYehTANwB+ZOYPE4ODIDhJRJvMvD9IqLW2GEXRbSJ6AcBtZr6UGPzoS2Y+lc/nt+bm5v5Oa2CtvaKqywC8bs06M7+eGszMn7nTBqDOzPNpwcvLyyPb29vfAZh2Naq6Za0tpAbXarUzURS53eGKL1trv0oKZ+a3AHytqplMJlOOoui4tfaDvqOw1lZUtabubBOtqOqN0dHRB/v7++62XwHwDoB33dkAUGPmoO92e/yitXZeVT8BkE1acbdpPQiCj4hIBw52hQsLC8c6nc77AN4E8FK3yQ4R/Qzgc2b+Je0ZDPU+fjiZp1eXFD5U8CB7u+/DGybgXxnFMA3/m1GISGwegNMAeuYBuON53lKpVBrePBG5RkTuSPc1b2ZmZnDzRKRnHoDYvIODg3u5XM69/E8AKAO40G1aNcb0N6/ZbF5X1fsAbjpInXnGmETzGo3GRdew+0DPGmPSzRORTQA988bHx89NTk6mmtdoNGLziGjJ9/1085rN5l1VPWSeMSbVvLW1tXwYhoXp6en+5olIbB6A2Dzf9wcyb319/cju7m5hdnY22TwRic3zPO98qVQayLxWq3U0DMPYPGNMsnmrq6snx8bGNqempgYyT0SKzjoAsXnGmP7mNZvNU9lsdqtYLKaaJyJXABwyzxiTbp6IxOYRUd33/VTzNjY2RnZ2dnrmAdgyxqSbJyJnAMTmEdFl3/cTzROR2DzHk6qWiei4Maa/eSJScZY99FRXPM+7MTIy8iAMQ6/dbsfmEVHPPGPM4OaJiBtDqnmuqfuL4Pv+8Oa1Wq1jYRg+ZR6A2DxjzP/mPRupfwAf56Q4urCh6QAAAABJRU5ErkJggg==","view/tab_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAABICAYAAADyMAW8AAAAcUlEQVRYR+3WsQ3AMAhE0TCMeyTvP1tShRQo7lxYegxA8fUPLuac97VhwuKXKhTlFxRQ9GPDClawYvGEDwxIZu7pFRZXr4ACinY1ghWsYMX/NxWQr22edyvGGHt6hcV1NqGAon8QVrCCFYteISDnBuQB3xJuQcDkEngAAAAASUVORK5CYII=","view/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAACmUlEQVRIS7WWS0/bUBCFz7mJmyZxENm06mNVoVZC7LqGn9FNqy55/BSWSEhs2/4uuqFVoA150JLKJvGdaiIH2TfXNoKQpeP5PHPO3GMTK/5xxTwsAUWkBeBZ+qAByb/Zh4pIA8CL9NqY5Dj7vw9YA/ABwDsAfwB8ITnUIhF5CuATgNcAfgH4RnJSCkwLl6AA/lXBtLZQQxFxoTr6q6LOFl2WmuJAtcY7ZuXIixsczfRyTlPfhpSN7BpwBeBtFdQLFJE2gI8AXi7GBBBl3Fdnv5L87XbpWxuFfQbw3NXM0dQLLdrDIH3ylGTiLLYB8CS9lpCc3tmU+xzL1Z9lEXl/n06KavjowCiK1uM4fqMd1Ov1s3a7fZntZjabtSeTiQYHgiC4aLVavZwpbofT6TQYDAaH1tod3bMwDHc7nc5PLZrNZmG/3z8WkS1jzGm32z1oNBqjUqD+6YM2m81xFWyeNkUaulAAlyKyWdTZbdqUmZKFakEVrLRDV7P5zY6m3rQp6tA1AMC5tXY7he51Op0fdwbGcdwdDodHWc2MMdcL9wGM1tbW9sMw/L6UNm6HChuNRifW2g1XM0dTL3TJZS1KkkTDFbVaLQqCIJcm6k0URRpxuvg39Xo9rtzDh5zt1Z/lXq+32rR5dKC1dt0YM08bAGd65BxN1ZB52ojIBcl82rgdWmsDkocAdgDoW22X5DxtSIZJkhyT3AJwCuCAZD5tfCP7oMaYcRVs/tAiDT1QHX2zqLPbtCkzxYFqjXfM3GKXAR3NtC6nqTccioAeA84BbCuU5B4Af9r4gCLSBXCU1UxErjPuj0Rk3xiznDYuMIWdANhwNXM09UKXXNai9LtQ9y4yxuS/XUijr9L0lXBDMp82j370HhJdWvsftiHJYFPSIqEAAAAASUVORK5CYII=","comp/combobox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABCCAYAAAA476rKAAACfElEQVR4Xu3bMYsTURQF4PMmExgIWkgEU5hskyJYxGYKY5VS7NzCylL8Bftj3NbKQjuxTBWbaUwhKdIYLCJotlACA5m8kQTZZZkkeN9dbuNJOXPPu/DN5ZHkMa7dbpfgx0TAEdvEedeE2HbWxDa0JjaxLQUMe3HPJrahQECrNE3RarUOJheLBbIsq9znZAdgJ0mC4XCIer1eSa/Xa4xGI+R5TuwA272RTqeDfr9fuTeZTDCfz/dmONkK/cFggGazebnCcrnEeDw+uCKxFdiNRmO3nURRBO/9bvtYrVbEVpgejXa7XfR6PUynU8xms6O1nGzlU3DO7fbu7V5dlsf/0yO2ElsSJ7ZES1lLbCWgJE5siZaylthKQEmc2BItZS2xlYCSOLElWspaYisBJXFiS7SUtcRWAkrixJZoKWuJrQSUxIkt0VLWElsJKIkTW6L1t5an6wFooRGerofKBeZ4uh4IFxrj6XqoXECOp+sBaJoIT9c1esIsT9eFYFbl/J5tJc13agyliU1sWwHDbtyziW0oYNiKk22JfXJ6xnfXjcDdFttnb43a/b9tovQ5iG30/IltBL1tQ2xiGwoYtuJkE9tQILBV/ugl4rh2MF1sPJJP59fuc7IDsTe37mHz8Bki+MoKHhFqn9+j9vs7sQN9K7G89xRx837levHzG5Lph8p1TrZK3iF//ApxdLVI4YFk/BpA9Uc5sVXYwObOCfyDJ3AoUcIh+vIRtYuve1clthJ7G8/7p4hv30Xx6weSybuDKxL7BrARxcjTF0iyN4AviH0Tpto1ONlaQUGe2AIsbSmxtYKCPLEFWNpSYmsFBXliC7C0pZfY2oWY/zeBP8uaLni/AFTVAAAAAElFTkSuQmCC","comp/textinput.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAWCAYAAACv8OArAAAAZElEQVRYR+3UQQkAMAwEwcZI/LtsoSL2NTGwMByZ3b3HJQIDO3H+EdidNezQGjbsUiBs+dmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4Ew9QBe0R29X9x+dwAAAABJRU5ErkJggg==","comp/vscroll.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAhCAYAAAA/F0BXAAAAOklEQVRIS2N8+OzVf2YWFgYmJiYGcgHjqCEYQTcaJpipaTRMRsOEmDJmNJ2MppPRdEJMCIymE2JCCQAYonwDuu2VMAAAAABJRU5ErkJggg==","comp/vscroll$down.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAAC/klEQVRIS+2WS0wTURSG/zszBcrLFVvjio0LiAqRRDAmGpRodFE1MQQQkOKGqBujRo3ExLjB4MaKgDzUaGQhvoJGYwAjYoioERcuDGxYEIwPkBY6nWvObXuLnXZaSklYOIu5M/fxzZn/nvPPsInJKa5qGhRFQaIH+w8xSbcymtTd+gBFYXAdyjM9sf7ORxgGR0t5/j9jpkhq2t5B0xQwBrgqNsnJ9V0j4BzQdQNtNYXWkKz0NDiaXkBTFTCFoaWmCHVtQ+AGh+4z0HNiO2bmPNYQGiXQvkuPoaqqiIgi8Pl8eHBqtwlA86MKS6Cy8z1gjIFzjqcXHBEBlpBgRNuOd+HVlYqogJiQIChcg/BtW5k8SaSSkxPJ5PRPTttHfkI7kcghIpn8NYfp33NLXp+TnYG1OWvA3ox9499nPSjdkCsgHJxOIjc43VMrugL9dEUD4Oj/PA4CsUfDX/jOjbmisHTDCCzi4t4QgLDrQF+qTYOmqhgYGw9BvLpv0ZNjQwieaU9b7ZCDriFhSt3VBSZNartHA6aUJ7SK+jqO5n5pSp1HiqSw1e3Di0ypwBpiU1XsudwnTanraDEqrg2GmZLbGkJh2jQVZY29JlPqPe03JX/uxLE7Nk3DjjP3pCn1Ne7HrNsjdYoLQsmWYtNQ3NCBgeZKzLrn/foEoogbQgvSUmz4454P7VQikGhpHzGSZdVOUqqYTGli6gemZ9yJ+0lSTalk/TrxtQOYaBnESbTinokev4UG+p+9/xoyJQKQn8x7vf7JjEFZ1FJBBvuC12RINIdAwtkIQuksnxgHhKBUZ6scQtLSNyiWJpav47z9STjbjfJ8k5iVN0eEs911bhZjUTWpbR+RztZ6uFBERNCq1rfS2e43lFhDsjPscDS9lM7W4dyCquuvpbM9PFkq0iHm7mSl2yP+bj05uxdeXZe5FHOL6Xdr17nQ79bziwew4NXFqwUTMiaEtKBPwtZjnRi8WgXPglfqsyQITc60pwpAeNpH1GRZtRM0pWVVcTJM6S+dYaRsIf025wAAAABJRU5ErkJggg==","comp/vscroll$bar.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAA/CAYAAAAGyyO8AAABYElEQVRYR+2Wv0sDMRTH30tarCg6dRWnQnFT6OiqoP+tk+Cig+AiHayDiNSlg+jgD47K1US+Lwm5s4o/mkElN1xy73KfcF/efTi+Ht3Y0X1Btw8FffdoLy3QSnuZ+HhwZe+exrS13hGGJYsTWSszN0rJ1zHDDbJ0eDYkgHjv5Nxub3TIGEsTY/xDVq6NAN7MfW2u2aCG1nQ0GEZIOXmp7Pw5BPDF+VaGIGQfbM6k0ng5kw8/wF/eJzP5JInZkjg2CSS8zk6vCys7Wb8r5qqsncAP+pdR1Lu9rvgVT4uYg+3F+PCtAzjzu/taKdKKBSS2/wkEMBg/Q+rB50zqzZb7ZPoD/GeZ1HySxGxJHJsEEl5nc22VmCFalpFJTjLKNUtFxlDfP72IogYAP8PPZekWM5OqjErFWpjjbxprABJRA/JYjOOOX4Bgo6bWGYKsfMg5k+lmy5n8uUxm8kkSs6Vw7Cstibc9Fv5vWQAAAABJRU5ErkJggg==","comp/vscroll$up.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAADF0lEQVRIS92WTUhUURTHz31vPv0KKmkXrtxUGNomkCANLdCUpEatJFuIClIEFRl9kGH0BYWQElLpotGKEJXAtKQooYUFpi1axLQZMCyyZJqv926cM2/uTM288emoUHfx3v16v3fuuef+72Hume/c7/cBAwaLKWaLBZjLPc0Zk0CSJGBs4SDOObDP7i9ckuXkIbLJRJDFFrJk2SGNvZNwy7ExoZEJLWnqfQ+4SlUFaHNs0gXpQhq6x0GWGe0Y7oCicGivyYsLigup7XgFJlkCJjFwNm2HqrZR4CqHoKLC3fr8GFAMpPLqEJhMoZjpay6Bnx4vpKfYoLx1kCwKBlXoOV78BygGsudCH1nwtNVBgHBBUFFzL1n0+Gx5YghOxhINiAbFG1uZODESxf+bJShKrulv8HUusp1G/IBz1qTZIGvdamBjU584Aopzs+lbDhwfFFgc2/imLq0fazgAHF5MumBtuh3YwJsPfGdeNqgY1qqqfcSprRLgr7rWZzWbwCTL8HLKFYEEgkrUn+eHIDzNbltBSG33O+jcnxNZmrYcw5Yc7hoXotRenRPyz0IgBzrGYkTp9qEtxiEV10eEKD08Wgh7bzwTonSvIV/soK5jd53rE6I0eGY3/PL5wWYxQ+nFgShRKqK6LqTwhJNEafRKNQHCcWK3WmDHqR5NlMoSQzAWUV+9vkBMsKXYLCSbs3Oe+SGqqupGrIL3h3YclifYkjo7yZ7izIzUUGrhnvXAzA+PURkR8xCwPnMVsCUVpW0bsiCUKOH9S0980JvaLJSQUTal9Q+9/RgRJQSgnvgCgdBkxkCKektSpC9cR0HCOQgiZUMI3njijwYg+COzLP9rkLr7E3Dn4Gbhp7BPDC+n0TkhlK2zJpccuSBIfVdsutVdt9U4pLbjtVC2B0cKYN/N50LZHh0rFGGguztV14aFsvWfLiVhSrVboaSlXyjbk/NlBNKFVLT0k7INX3KAx+sXfkBlKzjpJItGLlcmhmSkptAB83h9MTuCICxBRUkMwUmY5+uFPY7LmJ7GW05SZycsSos9xUsmSr8BfgGeWI6+BgEAAAAASUVORK5CYII=","comp/button.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAABFCAYAAAAPWmvdAAABA0lEQVR4Xu3ZMRGDUBRFwXwfKSgxFhfRgAbUxEakkCEO3qmX+p9m5w7NW9v7cz18I4EFbeT1fwxtbgYtmEGDVgRC458GLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJZW0Pbj64Q3hFvQhmL3CQ8atLlAKCwNWhAIiaVBCwIhsTRoQSAklgYtCITE0qAFgZBYGrQgEBJLgxYEQmJp0IJASCwNWhAIiaUVtOfrdMIbwi1oQ7H7hAcN2lwgFJYGLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJYGLQiExNIC2g/MxaMp6CSauwAAAABJRU5ErkJggg==","view/bg_tool.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMklEQVRYR+3QQREAAAjDMCYG/DsEGXxSBb2ke7YeiwECBAgQIECAAAECBAgQIEDgW+AAAeIuAVS/mngAAAAASUVORK5CYII=","comp/minBtn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAArUlEQVRYR+3X0QmAMAwE0GQN19B9nM193CmiIH7ZXOAoRc/fpjl8jVDdOj/eOc8USBcXqUjLAtDQRMSOdHb3JatTYCZUXodIy10bGxTI1Lx6/YA0Ima6W2tKFcjmdpGKtCow7NBAdxozy+804Gfx/cDqbLzWDzs0ekNY4B9nOMEehMKTVIEEyKeFSKmc18+MppRtipJuYPCa1SkwEyqvo6Tlxm8bFEijvBt9n/QA/fOPydLHcUIAAAAASUVORK5CYII=","view/zoom_out.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACy0lEQVRIS92WQU8TQRTH/28oQkj0CL0QOMAJQkz4DkS6A+GA+A00Hrhj0uy8NiTwEdBPAOrB0Fnq3U8g6gkOSjxUjpCQCu08M5u2qaVAt7YmOqfNZPa3b9/+Z35L6NOgPnHx98Gbm5sTlUplA0AGQBpACcBBKpXazmaz3+5607YVM/MjEXlNRPdbASJyTkRrzPz+Nvg1MDNPAvgI4AGA10qpvHPuSCk17ZwLAazV4HPM/PUmeDvwSwBPAbxl5sf+RmYWZo7XMvOehwPYYebnScAnAMaVUrNhGH5pBefz+Rnn3GcAJ8w8kQT8E8A9AEMA/HXrqM9fMrO/bjvataJvFdd7/IaZfS9/67ExZpeIngB4xczPklQ8KSKHPmoispdKpXKjo6PHp6enU5VKxXhoV6moVXhnjpVS5wDOwjD81K7qG7e033lXV1cviMjvvDEAP0TkYHBwcKtarT4UkXcALolo1RhTaIV3dVYYY9aIyOfZDw9fMcYUm+FdgWvtYgCmBisrpRbCMPxQh3cNbgM3zJzvCdhDcrncuojMA8gy8/eegTvO8U0Lk87/UY9ve9h/BI6iyJ+1GyLScB4RHQDYDoKgO+dFURSfFQCuOQ9A7LwgCJI5r1gsTlar1YbznHP5crl8NDw8PK2Uip3n4QMDA3OLi4udO89a23Ce1jp2nrVWtNbxh7bWxs4jop0gCDp3XhRFJyIy7pybXV5ejp3XDN7f359RSsXO01p37jxrbey8i4uLoZGRkWvOa5q/1Fp37rx+VtxwntY6dl5zK6Io2hWR2Hla686dV0vFoY+aP8xFJJdOp49LpdIUEZkaNHkqfIWd5JiIzkXkLAiCZM7zO09EYueJyBgRxc4joi0ADeeJyOrS0lJvnBdFkf8xbDhPKbWSyWR647xCocC+53XnAVjQWvfGeS1wo7XunfOstesA5pVS2Uwm8w877xeHf444cscwYAAAAABJRU5ErkJggg==","view/refresh2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAEIElEQVRYR+2XTUhjVxTH/+fGpBrGT/xoBQdFFMMQLNLNbLooLbaFzqKMUhCSZwsuhGG6KCNd6DuRLgqzmGVxUd8LUrpoYWZTKO1yNi2F1oVtceEHflSLqNEav8bklPuqgsl75sUPSsucTQj33v895+R/7y+XcA1B16CJ/6GoYRiDItKfzWZjExMTv5/XtoLlx2Kxm0qp1wH0AHgTwC4RfWRZ1mdewp6ig4ODN9Lp9CMieh+AchH41Lbtj92EXUUHBgaCh4eH3wJ4zSObGSLqtSzrZ9+ihmF8CODR8YIflFL3MplMNxF9IiJWIBC4Pz4+/ldR5RuG8QuAlwGsAWi3bTsVj8dvAWhOJpPfFPK2a/mGYewDeAHAV7Zt9+aK9PX1VYRCoVcApNxa4CX6J4B6AE9t2341V9QwjO8AvAFg27btytxxL9EvAbynJxNRj2VZX58sjMfjd4joyT9D9NiyrHf9iup+/gggBCALQPfxVwARAO8cWywD4LZt2z/5EtWT+vv774rIBIBSlx/mmT5dyWTyC9+WOpkYi8XalVIPRKQbwItEpHv9PRE9tCzrt6IsVcgyhcYLnv1CAkWXfxFBxzEXXXipq+8imz7P9CJdO3+N754y86A+vYFAIDY8PHw58DHzTQB54DNNs3jwMfONY6R4go+Z/YNvbGwsuLKyci74APQys3/wMfMZ8InIPaVUt4g44AuHw/eHhoaKAx8znwEfM6dGR0dviUizaZoXA59pmvtE5ICPmfPAx8wVABzwubXA1VLM7IBPRJ4mEok88DHzKfiY2R/4mPkUfCLSk0gkTsHHzHdE5Immnog8TiQS/sDHzK7gE5EIEZ2CTyl1e2RkxD/4TNO8S0Su4BORZ0qpftM0iwefaZrtAB4QkQM+AA74ADxk5ufgc78CfV99xdy61yMajUbfAvA5gJeKycZj7gqADygajf5xRYIn+6xoUbmCDM9I/LuidXV1qK2txdzcHPb39ZPAOwpmGgqFUFFRgerqauczm81iaWkJa2v64eLhU6+eKqXQ1NTkZOcWq6urWF5edh1zzZSI0NbWhvLyctdFBwcHmJ2dxe7urn/R+vp6J0sd6XQaCwsLqKysRGNjI9bX17G4uIhMRr8jiig/EokgHA7j6OgIU1NTjkBZWRl0f7e2tgo60LX8rq4u/UjC5uamU2ZuBAIBZ1O9mVsLXEU7OztRUlKCnZ0dTE9P54nqfmsnaNHJycm8cVfRlpYW1NTUOJN1pjrjk6iqqkJra6vzNZVKYWZmxp+oLq2jo8NpgQ7dx729PZSWlkKL6hARpwr9Q+aGp/m12Zubm6H9mhtacH5+HhsbG/4tdTJTZ9bQ0OD0LxgMOm7Y3t6GNv55R7XgMS3oH5cJ/y3Rq775V3X5bx8zSv8DuWzoa2vgb5tumbHGlerDAAAAAElFTkSuQmCC","view/settings2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAD2ElEQVRYR+1Xz08bRxT+ZjAGYQoH4rS9IBJBQJEsUC8VKNdQtamUE0fLayqhKHeOaGbFkT8gFVLZtXzk1qqKSs4NUg8RXCIQVoOQ2jRFHHCwBRj2VW+zttY/14BXVaPOyR7NfPN9771536xACEOEgImPDHRhYaHv/Pz8kEMVjUbjq6urxVZhayo/lUo9chzndTabfWMYxkMAGx7QrG3bL5LJ5B0p5f1MJvNz7QENQdPp9LdE9CMAZrcHYAaoxJ8AvARwD8AtAI9t2/7JD9wQdH5+/q7jOLzx04DqeCelnFlbW/s9EJQXGIbxq8eQ//4mhPieiJjlEwBf8qQQYtOyLFZRNeqYJpPJWCQSeUBEzz3JrwqFwvT6+vo575ybm4vGYrFNAF8AICnlbKlU2sxms4Uych2oYRh5AJ9UFggxb1mW5aeSTqfTRLTmm3tv2/bAVUCfWpb1zA9qGAaHwD/XGjQU+WVGHU0Ug4ZSUjXFnwMwXVP8nP1RAPG2i5/Z+q9pKpWaFUL8wvNE9FUmk9m48jWtLWavofztNZTb124oN2neH1mTvmoo/pcfHDGtdZ9nLbw4rrW+nvGZpvlISvl6aWnpjWmaD4nINT4hxKxS6sXy8vIdx3HuK6XaMz6ttWt8QohDInKNTwjhJtWzlJdCiHtEdEtK+VgpFWx8Wuu7RMQbWxofEb0TQsxordszPq11Q+MjoidCCNf4AGxqrYONb2VlJVYsFh84jvPck/yKW5/W2jU+rXWUwdj4OBQcYzbCxcXF5sanlMoLIaqMTylVZXymaVYZHxG9N02zufE1AH2qlKoyPqUUh6AyFwgaivzyVehoorxkdL6k/MUPIEdE0/7i5zcUGx8Rxdsufmbrv6ZKqSrjM01z48rXtLbFeA3FNT4At6/dUIJ7V/MV/6HOn0gkvgbwA4DPbyLZ2/sWwHcikUj82SHAMqe3DMrv+I6Ofw9USonJyUlXzfb2NhzHaamsKdPBwUGcnp7i7OwMAwMDGBsbc4H29vaQz+fR09OD3t5eHB8f1x3QEJQBR0dHcXFx4QL39/dXbTw5OXEBI5EIcrlcHXBDUGYxPj6O7u7uljJLpRJ2d3ddNf7RVD6DlhkWCgUcHrof0YjH44jFYu5vnt/Z2QmWz0lhsHIMi8Wiu/HDF6T7mMDExAT6+vjR8iHGHA5/8uqYTk1Noaurq3L6/v4+jo6OqtgMDQ1hZGSkMnd5eYmtra3K/0DQg4ODivTyLg7B8PBw+6ChyC8f39FEMWgoJRVK8TPbjl/T2mruWEO5SYMNo/P/xaDfeB712U3YeXv/ALDwD+TbY8Dbd9BBAAAAAElFTkSuQmCC","view/setting.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACAklEQVQ4T5XUS4iOcRTH8c9xCeVeiiiXhSJRJFIusRO2lEtZKFlgY6GxZDUrk2TFwii22JJLlERRLKRQJmXBkHIb8+hM/2d6ememed93957n93v+55zf9/mHll9VVTNxopTPR8T3piTyT1VVs7AL9zEd+4roOn5gK25HxLfacAjL8A8TWw6ta28jorc2LMLhIu7Ds2Jah4XlRVci4mNUVTUDadiLFF/G5GL4iyOYjxsYMnQ1BDfxujk0VmJPecFAO4bV2Nk05Bqzz3Za6ut86JJDx2vN4Hbj3hjBbcOt4eCaQZXUj5daT4pGoNFimI1zpdYVEf2jsTQX+5MX5NaOFdFFJHzJ2bWI+FJv6SRWYACTWliqa68ioqc2LMWpwtJ7PCymzVhSWOqOiHeZdPachqNIcXdBJV/2B6cLa5cwZLjQYOkqnuNsOeEM1uJgE43xDBsaH9QQfJ21VNBoHfpBaWHLiKGLoeO1ZnAHkpcxgkvOeoeDa0FjTnNLEfF1PJamYkcR3YmIX6OxNA35Kb7BFKwvoqf4jeV4GRE/azQ2Yh4GMaGFpbr2OSKe1Ibse1MRJ84fimkxMqc0Pc55MrjsOYvZRoofNW6/vPUSwEQ+2+tPQ14h9fX4Ap+aQ2MB1pQTB9sx5K24qmnorKWCRvtDF0PHa+0suBaW0ry91O5mus3n/wHmQwUTIH+tVgAAAABJRU5ErkJggg==","view/refresh.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACiElEQVQ4T4WVS4iPYRTGf4/7/X6XcivXcktEUhTKQkqyYCOKjWyUhezFThbIlJ3LYrIRkoWGUhhhTMko4zJujYRpxgxHj9737/P3zfh239c57/uc5/zO+UQ3T0QsBRYCtZI+5jBVx0fEcGA6MA+YCXQCVyXddWwlISL6ARuARcXvhQPrJF3/nRARvYHtwLRuFLYCFyW15ITl6XTHvwIuJzlrgHrgiqSOiqSI2ANMAL4BxyW1R8RYYKSkp8Vb8w2HgD7AE0kXSozoD0wC2nPCAWAw0CyppiRhBzAD6MgJW4D5KdDFNeSkiJgFbEvONeYE698N2K0ArPsDMAZwguN+AmeKfZgLbAb6llj7A7gk6eFfnY6I0cDKpNc1tQFNwG1JvvFPp0sKXQ2sAGokveuJpVHAHGBJ4ul76vLNapbs9dYk6R8oU7driyztA2Z3w5L1n5LUnBPWptMd/xw4l+RscsHAeeNSZMloTAG+AIcltUXERPdB0qMylk4klu5LOlni2ABgqm3Oko4BQ4Fnko6WJOxPzlXg2wV4hv2czuOYhmsBsDf1rD7fYP0HkyyzZN0twHjACZmlI0WWFgM7e2DprKQ71SyNA9YDBnFYcq0RuOZ5/h9LdsVS6yV97YmlgYDn2X3wjUa7QdKLapY8015ePrWMJVtembhewLI0YWU4eZvck/Q525pXo4M/AY+TLMP40u+SuooseVjsitm/IakzItz5QcXhKSZsBCyrpdjlwuZwfSO8mLOkdYAHqFXSrRKWvErtXFdOcJcnp0AX96ZwuldQ5uxtTrD+VUmWWXqfujwk8eQ4f68rsuRG+d/gZVb9eIk9kPS6miXvIv91rNc12TXPc5MkTyO/AFhJCujHqZlCAAAAAElFTkSuQmCC","comp/checkbox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABbUlEQVRIS+2TP0gCURzHv88GRYsrExyOo5cEQVEtWdQQpE4N0R+HxmirXXCrKYigqMF2IRqCQByaLJqNIFpyUIzu4rIwpExODy88ITD/cJ603Rsf7/OGz+/zI5TSEAE20cZRgBMySKni8XrbwICrWAwG2ESZIadFS53J0R25brCyHZNud1vbcRuPV7fDAOu9GXJatNSZHN2R6wb/PfJCrxOZCR8Gbk6hWc6Xg8PrcgBETMIVPdIGSjYG/NoOSHcfkLqDK3qsBSRIrgRAuBF1quUPEUPhYGMwb2dhywrqQ3F0Dt++jSokJMBdhmDO52pB2WwFP7OK8rgH9os99IgppNf3QWwMFP4RNHKALrmoflIj53l6CaWpRcBkgiIkYHl6gDTrh5JJg57v/kJ1YOUixw7jfWELxMpAKUmAXAR7tg3LZ7am3IbjKDBOvPiDqkUmcoj+9H1d7k3nmHdweBubB70ON9wRzQH8pVVQb+Q/zZAEfpwDCU4AAAAASUVORK5CYII=","comp/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAE6UlEQVRYR+3Y30+bVRgH8G/T0t/0Jy0USrIsC0E2GMKAVYcRpmSbEzIGZhqyxCxeceGVF3pjvJl/wYyJWZYY4hZBFnBuBBUW2ewYAxlsSMiyLKH8aEt/0vZtSxvM+562We15C6jlxr53zfO8z+ec5z2nOTmCk598tY19fAQs+Hlvz76QX1zpAwd+1NMNXzieU1QtFeKbvn4CXvqgC95wLKegRirC1e8GCPjh+53wMnRwedkG54aLG4yhSI/ycnPawHaKJ5M1MhGuXR8k4MX3OnjBx3NPcLX3DPfepSu3odfrYC4r5X7bVlbhcrnT4kdrjlA7xYLffj9EwJ6udnhCW9TEJ08XUgWTqE6n5XLdbk9G7MjhKmodrbwAfQPDBLxw7h1ecH3dDq/Xm1GYrZqceXIgGo0GJSXFvOCNmz8RsLv9NNyhKO+icTqc8Pl8acDLyWyr1Wo1DEYDbw2dXIz+4TsE7DzbBneQH2SruDZc8Pv9GSiLqVQq6Iv0WVe5TiHG4K1RAnaceguuYCTrCx63G4FAgAoqlUpodbqs7+sVEgyN/ELAs20t2Ajwgz6vF6FgMGtL5QoF1BoNL1qklODW6DgBT518gxcM+P1gQqFdLRqZXA6lSkVFWXDk198I2NZyAs7NMDXR7XRmYBKZjMuNMEzmljHQF46hUIrR8XsEbG228IJ+T/rGFkskkMoVHBgOBRGNRNI2vkpL/5YsODZhJeCbJ47D4WeoM4wyDLai5PsWiCUQJ2aXTN4pnswzqmS4e+8BAZstDbxg1qW3hyALTlinCPh6Uz1C0Rg2w/S/tz3UpaYWSgsgF4twf3IagvOXr297PR5YGuv+bd2s71sfzkCj1ULQe+3u9vraGlg0lw+LlZhMEIzUNu7vmYYFmz/9LJeTS9We+PIymaGl6wLizo2cokJDEawDNxLg+W7EHTkGjUWw/tBPwOMdnYg7nNQZep4/Q2B9jYspS0zQHjyUlrdTPJksNBrwYGiQgE3vtiNup4O2SSuOzk5y7z2ubYKyuBiaAwe5394XzxGw29Pi5iYLdeDCYgMmfxxOgKfPIG53UBNt049SBVNo4g864HRmxMz1x3hAIybv3CZg49ttiK/bqYneFRuCLldGYTY5OfPkQBR6PTRl6cfIVEtLivHw51ECNrS2Ir62zrtKfWtrCHo8acDLyWyrFVot1CYTbw2hqQRTY2MJsLk5K8hW8TkcCPp8GSiHqdVQG41ZtxUHTkwQ8NhrFsRXyUrke3wuF0L+TSooVxVCrc9+iBKWmvDodysB65saEFtZ5cX8Hi+YQDBrS2VKBVRa/jONqKwU05NTBKyrexWxlRUquOnfBBNidrVoZHIZClWF1DqisjLMzPxBwNraasRsdHDD6c7ApDIJVzTMRDJiRQb6EUNkLsPs7DwBa6qrELPZqCNzu/1pG1siEUOhkHK5wWAYkUg0La7T0U9tIrMZc/MLBKw+XImtZTrIMBFEouQkIBEXQJaYXXJ0O8WTeQXlZsw/XSRg1SsVvGDWpbuHIAsu/LlEwMrKCsQDAcQ93j2U2H2qUKuBUKnE4uISBF9f/Hj7wJwVhyordl/hH2Q+W1zCixoLOdNUj98Ei+byYbH5lnPkmJhL6O+18/c0/1m38/c0qVbm72nYVuTvadgu5O9pUtsif0+Tv6dhF8P/657mLz4NfQVdLmZiAAAAAElFTkSuQmCC","comp/textarea.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAXCAYAAABkrDOOAAAA4klEQVRoQ+3ZvQrCMBiF4e9rU+sPOErRqxDRe/KG9Fp0EAc3VzuIg1ML4uDmlkaaquDenMUTyJoDD+8W3ZyKlaoshSeogHOy1m1euOmoI1EU+auqQUf/8XHnnBzLp3jsWdaVJEnEGEPsADXU2Ifro8Gej/uSpqnHruvmaVegqirZX+4N9mIy8Nh13XEct7vE18RaK7vzjdiIFoiNUH5vEJvYQAHgFMsmNlAAOMWyiQ0UAE6xbGIDBYBTLJvYQAHgFMsmNlAAOMWyiQ0UAE79lM2fmrDy358a/q6Hhf68ng175QueKdEXxUGVVwAAAABJRU5ErkJggg==","view/re.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACpklEQVRIS+WWPUgcQRiG3+8O70QEUwTB1EJgsTGdRRrhOMjOtEtSRbBIBMFKuCtkZleES2uRQoWQJggKKW7Of7GyTRvBLkVShhS73OXMfWGOU85Es7uXs0m2XeZh+OZ95xnCHX10R1ykBvu+P5fP59+VSqVvf9pUarBS6jWAR0Q0rbWOboP3BCaiOQAHAKTW+vtN8L8BW96W4zjPPM/78Ss8FlypVEYajYbHzALAJIAHALJdoDWl1Esi4m74rWBmpiAI5pk5AHAvJj0VrXU5Fmyhvu+/AfA8YRxfaa1LsWDf92eZeSMJlJnXtdYvEo1Ca30G4GEH/ImI1lqt1nE+nz9vNBrLnVTY39uO4zxNdHgrKytjzWbzs13FzKfDw8PFxcXF8HL3Nscd8BEAN3HcgiCYbLVaHyyIiGaUUm+7R9JzQZRSo0T0BUCGmRd831/tBttK53K5zXK5/DV1pZVSG0Q0C2BXa/0kySEmKojWeoiZD4hoKpvNTiwtLX1MC7+1IFrrQWZeJaJxx3EKN5186lF0LwiC4DEz31dKvU+z69i7Ig0stnm9wv4zsDGm7bxCodBf5xlj2s5j5mkpZf+c1wHPEdFBGIbS87z+OO8S3EnAVhRFvTnv8PBwpF6ve0QkiGiSmX9znuu66ZxXq9XmAcQ6j5krUspkzqvVaqmcJ4SId54xxl6ZiZwHYN113WTOq1arZ0R05TwAa5lM5rher5/ncrllAPYl1HZeFEXJnLe3tzd2cXHRdh6A04GBgWKxWLxyXlcqjqIochPHbWdn58p5AGaEENec13NB9vf3R5vNZtt5RLTguu4159lKA9gUQqR3njHGHpx9tOxKKfvnvGq1OmQrC2AKwIQQon/OOzk5GQzD0I5hPIqi/jvPGNN2npTyH3feTzoJOzgswwlqAAAAAElFTkSuQmCC","view/search.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAqCAYAAABcOxDuAAABX0lEQVRIS+3VsUrEQBAG4H9HiDZiJQg+gJVaiKAoWClYXWeZ7D6CtbWFr5Ai2ayQxkLQRgsLGwtBUQsRC6sDCxHxEIvIZSRwxRGSu83pNUe23c0H+89kR2AISwzBxAiinuctCSH2AawD+AFwRkR7QRC85CO0ur5SaoOZzwGM54A3IlrJw1aolPIewEJJUY+01jvde31RKeUMgNceXdLSWk9VQl3XnSWiZhnKzF9RFE1WQrPDUsonAHNFsBDiJAzDRmXUdd1tIjoFMJaDW0KI1TAMH61RpdQ0Mx8z8zMzHxLRAYBlAG0Al2ma7hpjHqxbqgNeAJgHcKW1XutEMeE4Ttv3/axXC1dh9XPgbZqmW8aYd9t3ohCVUt4BWARwkyTJZhzHH7Zgdq4MvQbw7ThOw/f9zypgKVoVsS7UX+C+v+kgeI0Oklrvb0Yw03rwlZW8Hnz14OvqjXrw1e/pPyfwCww91CttlMG7AAAAAElFTkSuQmCC","view/save.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAA1klEQVRIS+2VzQ3DIAyFwxwdoMMAA/VQ8ZByyEBhmA7QOVxxKLIaOcIoSZUfrlifHw/wM91Ky6zE7SZgANTaDEDhzYJ5odSMC7nA5U7+b4X2dVQr3ic4hHCTlMcY33xPZUUGcwBvdEJwjcfGGIQQ4rd2qenWA3hyAUuABwCP31NtN+i1v02qP4DicRybM885J2ceB/NCyUupfuLxBS4WbmKF9rNUv4p9gq21d0l5SunF91RWZDAH8EYnBNd4nDPPWitnXst0I6Leez+feVowEQ3e+wNk3ge7C/Qp3GfwkgAAAABJRU5ErkJggg=="};},'base64',function(){return this.base64=new Base64Atlas(Base64AtlasManager.dataO);}
		]);
		return Base64AtlasManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-24 下午3:00:38
	*/
	//class laya.debug.DebugTool
	var DebugTool=(function(){
		function DebugTool(){}
		__class(DebugTool,'laya.debug.DebugTool');
		__getset(1,DebugTool,'target',function(){
			return DebugTool._target;
			},function(v){
			DebugTool._target=v;
		});

		__getset(1,DebugTool,'isThisShow',function(){
			return false;
		});

		/**
		*设置是否显示帧率信息
		*@param value 是否显示true|false
		*/
		__getset(1,DebugTool,'showStatu',null,function(value){
			if (value){
				Stat.show();
			}
			else{
				Stat.hide();
				DebugTool.clearDebugLayer();
			}
		});

		/**
		*是否自动显示点击对象的边框
		*@param value
		*/
		__getset(1,DebugTool,'showBound',function(){
			return DebugTool._showBound;
			},function(value){
			DebugTool._showBound=value;
			if (!DebugTool._showBound){
				DebugTool.clearDebugLayer();
			}
		});

		DebugTool.getMenuShowEvent=function(){
			if (Browser.onMobile){
				return "doubleclick";
				}else{
				return "rightclick";
			}
		}

		DebugTool.init=function(cacheAnalyseEnable,loaderAnalyseEnable,createAnalyseEnable,renderAnalyseEnable,showCacheRec){
			(cacheAnalyseEnable===void 0)&& (cacheAnalyseEnable=true);
			(loaderAnalyseEnable===void 0)&& (loaderAnalyseEnable=true);
			(createAnalyseEnable===void 0)&& (createAnalyseEnable=true);
			(renderAnalyseEnable===void 0)&& (renderAnalyseEnable=true);
			(showCacheRec===void 0)&& (showCacheRec=false);
			DebugTool.enableCacheAnalyse=cacheAnalyseEnable;
			if (DebugTool.enableCacheAnalyse){
				RenderSpriteHook.init();
			}
			if (renderAnalyseEnable){
				SpriteRenderHook.init();
			}
			DebugTool.enableNodeCreateAnalyse=createAnalyseEnable;
			if (DebugTool.enableNodeCreateAnalyse){
				ClassCreateHook.I.hookClass(Node);
			}
			if (loaderAnalyseEnable){
				LoaderHook.init();
			}
			CacheAnalyser.showCacheSprite=showCacheRec;
			NodeInfoPanel.init();
			DebugTool.initBasicFunctions();
		}

		DebugTool.initBasicFunctions=function(){
			DisplayHook.initMe();
			if (!DebugTool.debugLayer){
				DebugInfoLayer.init();
				DebugTool.debugLayer=DebugInfoLayer.I.graphicLayer;
				DebugTool.debugLayer.mouseEnabled=false;
				DebugTool.debugLayer.mouseThrough=true;
				DebugTool.showStatu=true;
				Laya.stage.on("keydown",null,DebugTool.keyHandler);
				DebugTool.cmdToTypeO[0x01]="IMAGE";
				DebugTool.cmdToTypeO[0x02]="ALPHA";
				DebugTool.cmdToTypeO[0x04]="TRANSFORM";
				DebugTool.cmdToTypeO[0x10]="CANVAS";
				DebugTool.cmdToTypeO[0x200]="GRAPHICS";
				DebugTool.cmdToTypeO[0x400]="CUSTOM";
				DebugTool.cmdToTypeO[0x800]="CHILDS";
				DebugExport.export();
			}
		}

		DebugTool.dTrace=function(str){
			if (DebugTool._traceFun !=null){
				DebugTool._traceFun(str);
			}
			console.log(str);
		}

		DebugTool.keyHandler=function(e){
			var key;
			key=String.fromCharCode(e.keyCode);
			if (!e.altKey)
				return;
			switch (e.keyCode){
				case 38:
					DebugTool.showParent();
					break ;
				case 40:
					DebugTool.showChild();
					break ;
				case 37:
					DebugTool.showBrother(DebugTool.target,1);
					break ;
				case 39:
					DebugTool.showBrother(DebugTool.target,-1);
					break ;
				}
			DebugTool.dealCMDKey(key);
		}

		DebugTool.dealCMDKey=function(key){
			switch (key){
				case "上":
					DebugTool.showParent();
					break ;
				case "下":
					DebugTool.showChild();
					break ;
				case "左":
					DebugTool.showBrother(DebugTool.target,1);
					break ;
				case "右":
					DebugTool.showBrother(DebugTool.target,-1);
					break ;
				case "B":
					DebugTool.showAllBrother();
					break ;
				case "C":
					DebugTool.showAllChild();
					break ;
				case "E":
					DebugTool.traceDisMouseEnable();
					break ;
				case "S":
					DebugTool.traceDisSizeChain();
					break ;
				case "D":
					DisControlTool.downDis(DebugTool.target);
					break ;
				case "U":
					DisControlTool.upDis(DebugTool.target);
					break ;
				case "N":
					DebugTool.getNodeInfo();
					break ;
				case "M":
					DebugTool.showAllUnderMosue();
					break ;
				case "I":
					break ;
				case "O":
					ObjectCreateView.I.show();
					break ;
				case "L":
					DisController.I.switchType();
					break ;
				case "Q":
					DebugTool.showNodeInfo();
					break ;
				case "F":
					DebugTool.showToolPanel();
					break ;
				case "P":
					DebugTool.showToolFilter();
					break ;
				case "V":
					DebugTool.selectNodeUnderMouse();
					break ;
				case "A":
					if (NodeToolView.I.target){
						MouseEventAnalyser.analyseNode(NodeToolView.I.target);
					}
					break ;
				case "K":
					NodeUtils.traceStage();
					break ;
				case "T":
					DebugTool.switchNodeTree();
					break ;
				case "R":
					RenderCostRankView.I.show();
					break ;
				case "X":
					NodeTree.I.fresh();
					break ;
				case "mCMD":
					DebugTool.traceCMD();
					break ;
				case "allCMD":
					DebugTool.traceCMDR();
					break ;
				}
		}

		DebugTool.switchNodeTree=function(){
			ToolPanel.I.switchShow("Tree");
		}

		DebugTool.analyseMouseHit=function(){
			if (DebugTool.target)
				MouseEventAnalyser.analyseNode(DebugTool.target);
		}

		DebugTool.selectNodeUnderMouse=function(){
			DisplayHook.instance.selectDisUnderMouse();
			DebugTool.showDisBound();
			return;
		}

		DebugTool.showToolPanel=function(){
			ToolPanel.I.switchShow("Find");
		}

		DebugTool.showToolFilter=function(){
			ToolPanel.I.switchShow("Filter");
		}

		DebugTool.showNodeInfo=function(){
			if (NodeInfoPanel.I.isWorkState){
				NodeInfoPanel.I.recoverNodes();
			}
			else{
				NodeInfoPanel.I.showDisInfo(DebugTool.target);
			}
		}

		DebugTool.switchDisController=function(){
			if (DisController.I.target){
				DisController.I.target=null;
			}
			else{
				if (DebugTool.target){
					DisController.I.target=DebugTool.target;
				}
			}
		}

		DebugTool.showParent=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			DebugTool.target=sprite.parent;
			DebugTool.autoWork();
		}

		DebugTool.showChild=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			if (sprite.numChildren > 0){
				DebugTool.target=sprite.getChildAt(0);
				DebugTool.autoWork();
			}
		}

		DebugTool.showAllChild=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			DebugTool.selectedNodes=DisControlTool.getAllChild(sprite);
			DebugTool.showSelected();
		}

		DebugTool.showAllUnderMosue=function(){
			DebugTool.selectedNodes=DisControlTool.getObjectsUnderGlobalPoint(Laya.stage);
			DebugTool.showSelected();
		}

		DebugTool.showParentChain=function(sprite){
			if (!sprite)
				return;
			DebugTool.selectedNodes=[];
			var tar;
			tar=sprite.parent;
			while (tar){
				DebugTool.selectedNodes.push(tar);
				tar=tar.parent;
			}
			DebugTool.showSelected();
		}

		DebugTool.showAllBrother=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			if (!sprite.parent)
				return;
			DebugTool.selectedNodes=DisControlTool.getAllChild(sprite.parent);
			DebugTool.showSelected();
		}

		DebugTool.showBrother=function(sprite,dID){
			(dID===void 0)&& (dID=1);
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			};
			var p;
			p=sprite.parent;
			if (!p)
				return;
			var n=0;
			n=p.getChildIndex(sprite);
			n+=dID;
			if (n < 0)
				n+=p.numChildren;
			if (n >=p.numChildren)
				n-=p.numChildren;
			DebugTool.target=p.getChildAt(n);
			DebugTool.autoWork();
		}

		DebugTool.clearDebugLayer=function(){
			if (DebugTool.debugLayer.graphics)
				DebugTool.debugLayer.graphics.clear();
		}

		DebugTool.showSelected=function(){
			if (!DebugTool.autoShowSelected)
				return;
			if (!DebugTool.selectedNodes || DebugTool.selectedNodes.length < 1)
				return;
			console.log("selected:");
			console.log(DebugTool.selectedNodes);
			var i=0;
			var len=0;
			len=DebugTool.selectedNodes.length;
			DebugTool.clearDebugLayer();
			for (i=0;i < len;i++){
				DebugTool.showDisBound(DebugTool.selectedNodes[i],false);
			}
		}

		DebugTool.getClassCreateInfo=function(className){
			return RunProfile.getRunInfo(className);
		}

		DebugTool.autoWork=function(){
			if (!DebugTool.isThisShow)
				return;
			if (DebugTool.showBound)
				DebugTool.showDisBound();
			if (DebugTool.autoTraceSpriteInfo && DebugTool.target){
				TraceTool.traceSpriteInfo(DebugTool.target,DebugTool.autoTraceBounds,DebugTool.autoTraceSize,DebugTool.autoTraceTree);
			}
			if (!DebugTool.target)
				return;
			if (DebugTool.autoTraceCMD){
				DebugTool.traceCMD();
			}
			if (DebugTool.autoTraceCMDR){
				DebugTool.traceCMDR();
			}
			if (DebugTool.autoTraceEnable){
				DebugTool.traceDisMouseEnable(DebugTool.target);
			}
		}

		DebugTool.traceDisMouseEnable=function(tar){
			console.log("traceDisMouseEnable:");
			if (!tar)
				tar=DebugTool.target;
			if (!tar){
				console.log("no targetAvalible");
				return null;
			};
			var strArr;
			strArr=["TraceDisMouseEnable"];
			DebugTool.selectedNodes=[];
			while (tar){
				strArr.push(ClassTool.getNodeClassAndName(tar)+":"+tar.mouseEnabled+" hitFirst:"+tar.hitTestPrior);
				DebugTool.selectedNodes.push(tar);
				tar=tar.parent;
			}
			DebugTool.showSelected();
			return strArr.join("\n");
		}

		DebugTool.traceDisSizeChain=function(tar){
			console.log("traceDisSizeChain:");
			if (!tar)
				tar=DebugTool.target;
			if (!tar){
				console.log("no targetAvalible");
				return null;
			}
			DebugTool.selectedNodes=[];
			var strArr;
			strArr=["traceDisSizeChain"];
			while (tar){
				DebugTool.dTrace(TraceTool.getClassName(tar)+":");
				strArr.push(ClassTool.getNodeClassAndName(tar)+":");
				strArr.push("Size: x:"+tar.x+" y:"+tar.y+" w:"+tar.width+" h:"+tar.height+" scaleX:"+tar.scaleX+" scaleY:"+tar.scaleY);
				TraceTool.traceSize(tar);
				DebugTool.selectedNodes.push(tar);
				tar=tar.parent;
			}
			DebugTool.showSelected();
			return strArr.join("\n");
		}

		DebugTool.showDisBound=function(sprite,clearPre,color){
			(clearPre===void 0)&& (clearPre=true);
			(color===void 0)&& (color="#ff0000");
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			if (clearPre)
				DebugTool.clearDebugLayer();
			var pointList;
			pointList=sprite._getBoundPointsM(true);
			if (!pointList || pointList.length < 1)
				return;
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,sprite.localToGlobal,sprite);
			pointList=GrahamScan.pointListToPlist(pointList);
			DebugTool._disBoundRec=Rectangle._getWrapRec(pointList,DebugTool._disBoundRec);
			DebugTool.debugLayer.graphics.drawRect(DebugTool._disBoundRec.x,DebugTool._disBoundRec.y,DebugTool._disBoundRec.width,DebugTool._disBoundRec.height,null,color);
			DebugInfoLayer.I.setTop();
		}

		DebugTool.showDisBoundToSprite=function(sprite,graphicSprite,color,lineWidth){
			(color===void 0)&& (color="#ff0000");
			(lineWidth===void 0)&& (lineWidth=1);
			var pointList;
			pointList=sprite._getBoundPointsM(true);
			if (!pointList || pointList.length < 1)
				return;
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,sprite.localToGlobal,sprite);
			pointList=GrahamScan.pointListToPlist(pointList);
			DebugTool._disBoundRec=Rectangle._getWrapRec(pointList,DebugTool._disBoundRec);
			graphicSprite.graphics.drawRect(DebugTool._disBoundRec.x,DebugTool._disBoundRec.y,DebugTool._disBoundRec.width,DebugTool._disBoundRec.height,null,color,lineWidth);
		}

		DebugTool.getNodeInfo=function(){
			DebugTool.counter.reset();
			WalkTools.walkTarget(Laya.stage,DebugTool.addNodeInfo);
			console.log("node info:");
			DebugTool.counter.traceSelf();
			return DebugTool.counter.data;
		}

		DebugTool.findByClass=function(className){
			DebugTool._classList=[];
			DebugTool._tFindClass=className;
			WalkTools.walkTarget(Laya.stage,DebugTool.addClassNode);
			DebugTool.selectedNodes=DebugTool._classList;
			DebugTool.showSelected();
			return DebugTool._classList;
		}

		DebugTool.addClassNode=function(node){
			var type;
			type=node["constructor"].name;
			if (type==DebugTool._tFindClass){
				DebugTool._classList.push(node);
			}
		}

		DebugTool.traceCMD=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return null;
			}
			console.log("self CMDs:");
			console.log(sprite.graphics.cmds);
			var renderSprite;
			renderSprite=RenderSprite.renders[sprite._renderType];
			console.log("renderSprite:",renderSprite);
			DebugTool._rSpList.length=0;
			while (renderSprite && renderSprite["_sign"] > 0){
				DebugTool._rSpList.push(DebugTool.cmdToTypeO[renderSprite["_sign"]]);
				renderSprite=renderSprite._next;
			}
			console.log("fun:",DebugTool._rSpList.join(","));
			DebugTool.counter.reset();
			DebugTool.addCMDs(sprite.graphics.cmds);
			DebugTool.counter.traceSelf();
			return DebugTool.counter.data;
		}

		DebugTool.addCMDs=function(cmds){
			WalkTools.walkArr(cmds,DebugTool.addCMD);
		}

		DebugTool.addCMD=function(cmd){
			DebugTool.counter.add(cmd.callee);
		}

		DebugTool.traceCMDR=function(sprite){
			if (!sprite)
				sprite=DebugTool.target;
			if (!sprite){
				console.log("no targetAvalible");
				return 0;
			}
			DebugTool.counter.reset();
			WalkTools.walkTarget(sprite,DebugTool.getCMdCount);
			console.log("cmds include children");
			DebugTool.counter.traceSelf();
			return DebugTool.counter.data;
		}

		DebugTool.getCMdCount=function(target){
			if (!target)
				return 0;
			if (! (target instanceof laya.display.Sprite ))
				return 0;
			if (!target.graphics.cmds)
				return 0;
			DebugTool.addCMDs(target.graphics.cmds);
			var rst=target.graphics.cmds.length;
			return rst;
		}

		DebugTool.addNodeInfo=function(node){
			var type;
			type=node["constructor"].name;
			DebugTool.counter.add(type);
		}

		DebugTool.find=function(filter,ifShowSelected){
			(ifShowSelected===void 0)&& (ifShowSelected=true);
			var rst;
			rst=DebugTool.findTarget(Laya.stage,filter);
			DebugTool.selectedNodes=rst;
			if (DebugTool.selectedNodes){
				DebugTool.target=DebugTool.selectedNodes[0];
			}
			if (ifShowSelected)
				DebugTool.showSelected();
			return rst;
		}

		DebugTool.findByName=function(name){
			DebugTool.nameFilter.name=name;
			return DebugTool.find(DebugTool.nameFilter);
		}

		DebugTool.findNameStartWith=function(startStr){
			DebugTool.nameFilter.name=DebugTool.getStartWithFun(startStr);
			return DebugTool.find(DebugTool.nameFilter);
		}

		DebugTool.findNameHas=function(hasStr,showSelected){
			(showSelected===void 0)&& (showSelected=true);
			DebugTool.nameFilter.name=DebugTool.getHasFun(hasStr);
			return DebugTool.find(DebugTool.nameFilter,showSelected);
		}

		DebugTool.getStartWithFun=function(startStr){
			var rst=function (str){
				if (!str)
					return false;
				if (str.indexOf(startStr)==0)
					return true;
				return false;
			};
			return rst;
		}

		DebugTool.getHasFun=function(hasStr){
			var rst=function (str){
				if (!str)
					return false;
				if (str.indexOf(hasStr)>=0)
					return true;
				return false;
			};
			return rst;
		}

		DebugTool.findTarget=function(target,filter){
			var rst=[];
			if (DebugTool.isFit(target,filter))
				rst.push(target);
			var i=0;
			var len=0;
			var tChild;
			len=target.numChildren;
			for (i=0;i < len;i++){
				tChild=target.getChildAt(i);
				if ((tChild instanceof laya.display.Sprite )){
					rst=rst.concat(DebugTool.findTarget(tChild,filter));
				}
			}
			return rst;
		}

		DebugTool.findClassHas=function(target,str){
			var rst=[];
			if (ClassTool.getClassName(target).indexOf(str)>=0)
				rst.push(target);
			var i=0;
			var len=0;
			var tChild;
			len=target.numChildren;
			for (i=0;i < len;i++){
				tChild=target.getChildAt(i);
				if ((tChild instanceof laya.display.Sprite )){
					rst=rst.concat(DebugTool.findClassHas(tChild,str));
				}
			}
			return rst;
		}

		DebugTool.isFit=function(tar,filter){
			if (!tar)
				return false;
			if (!filter)
				return true;
			if ((typeof filter=='function')){
				return (filter)(tar);
			};
			var key;
			for (key in filter){
				if ((typeof (filter[key])=='function')){
					if (!filter[key](tar[key]))
						return false;
				}
				else{
					if (tar[key] !=filter[key])
						return false;
				}
			}
			return true;
		}

		DebugTool.log=function(__args){
			var args=arguments;
			var arr;
			arr=DTrace.getArgArr(args);
			if (DebugTool._logFun!=null){
				DebugTool._logFun(arr.join(" "));
			}
		}

		DebugTool.enableCacheAnalyse=false;
		DebugTool.enableNodeCreateAnalyse=true;
		DebugTool._traceFun=null
		DebugTool.debugLayer=null
		DebugTool._target=null
		DebugTool.selectedNodes=[];
		DebugTool.autoShowSelected=true;
		DebugTool._showBound=true;
		DebugTool._disBoundRec=null
		DebugTool.autoTraceEnable=false;
		DebugTool.autoTraceBounds=false;
		DebugTool.autoTraceSize=false;
		DebugTool.autoTraceTree=true;
		DebugTool.autoTraceCMD=true;
		DebugTool.autoTraceCMDR=false;
		DebugTool.autoTraceSpriteInfo=true;
		DebugTool._classList=null
		DebugTool._tFindClass=null
		DebugTool._rSpList=[];
		DebugTool._logFun=null
		__static(DebugTool,
		['text',function(){return this.text=new Stat();},'cmdToTypeO',function(){return this.cmdToTypeO={
		};},'counter',function(){return this.counter=new CountTool();},'nameFilter',function(){return this.nameFilter={"name":"name"};}

		]);
		return DebugTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.Base64Atlas
	var Base64Atlas=(function(){
		function Base64Atlas(data,idKey){
			this.data=null;
			this.replaceO=null;
			this.idKey=null;
			this._loadedHandler=null;
			this.data=data;
			if (!idKey)idKey=Math.random()+"key";
			this.idKey=idKey;
			this.init();
		}

		__class(Base64Atlas,'laya.debug.tools.Base64Atlas');
		var __proto=Base64Atlas.prototype;
		//preLoad();
		__proto.init=function(){
			this.replaceO={};
			var key;
			for (key in this.data){
				this.replaceO[key]=this.idKey+"/"+key;
			}
		}

		__proto.getAdptUrl=function(url){
			return this.replaceO[url];
		}

		__proto.preLoad=function(completeHandler){
			this._loadedHandler=completeHandler;
			Laya.loader.load(Base64ImageTool.getPreloads(this.data),new Handler(this,this.preloadEnd));
		}

		__proto.preloadEnd=function(){
			var key;
			for (key in this.data){
				var tx;
				tx=Laya.loader.getRes(this.data[key]);
				Loader.cacheRes(this.replaceO[key],tx);
			}
			if (this._loadedHandler){
				this._loadedHandler.run();
			}
		}

		__proto.replaceRes=function(uiObj){
			ObjectTools.replaceValue(uiObj,this.replaceO);
		}

		return Base64Atlas;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.Base64ImageTool
	var Base64ImageTool=(function(){
		function Base64ImageTool(){}
		__class(Base64ImageTool,'laya.debug.tools.Base64ImageTool');
		Base64ImageTool.getCanvasPic=function(img){
			img=img.bitmap;
			var canvas=Browser.createElement("canvas");
			var ctx=canvas.getContext('2d');
			canvas.height=img.height;
			canvas.width=img.width;
			ctx.drawImage(img.source,0,0);
			return canvas;
		}

		Base64ImageTool.getBase64Pic=function(img){
			return Base64ImageTool.getCanvasPic(img).toDataURL("image/png");
		}

		Base64ImageTool.getPreloads=function(base64Data){
			var rst;
			rst=[];
			var key;
			for (key in base64Data){
				rst.push({url:base64Data[key],type:"image" });
			}
			return rst;
		}

		return Base64ImageTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.CacheAnalyser
	var CacheAnalyser=(function(){
		function CacheAnalyser(){}
		__class(CacheAnalyser,'laya.debug.tools.CacheAnalyser');
		var __proto=CacheAnalyser.prototype;
		__proto.renderCanvas=function(sprite,time){
			(time===void 0)&& (time=0);
			if (!CacheAnalyser.showCacheSprite)return;
			if (DebugInfoLayer.I.isDebugItem(sprite))return;
			DebugTool.showDisBoundToSprite(sprite,DebugInfoLayer.I.cacheViewLayer,DebugConsts.CANVAS_REC_COLOR,4);
		}

		__proto.reCacheCanvas=function(sprite,time){
			(time===void 0)&& (time=0);
			if (!CacheAnalyser.showRecacheSprite)return;
			if (DebugInfoLayer.I.isDebugItem(sprite))return;
			var info;
			info=CacheAnalyser.getNodeInfoByNode(sprite);
			info.addCount(time);
			CacheAnalyser.counter.addTime(sprite,time);
			if (!info.parent){
				DebugInfoLayer.I.nodeRecInfoLayer.addChild(info);
			}
		}

		CacheAnalyser.renderLoopBegin=function(){
			DebugInfoLayer.I.cacheViewLayer.graphics.clear();
		}

		CacheAnalyser.getNodeInfoByNode=function(node){
			IDTools.idObj(node);
			var key=0;
			key=IDTools.getObjID(node);
			if (!CacheAnalyser._nodeInfoDic[key]){
				CacheAnalyser._nodeInfoDic[key]=new ReCacheRecInfo();
			}
			(CacheAnalyser._nodeInfoDic [key]).setTarget(node);
			return CacheAnalyser._nodeInfoDic[key];
		}

		CacheAnalyser._nodeInfoDic={};
		CacheAnalyser.showCacheSprite=false;
		CacheAnalyser.showRecacheSprite=true;
		__static(CacheAnalyser,
		['counter',function(){return this.counter=new ObjTimeCountTool();},'I',function(){return this.I=new CacheAnalyser();}
		]);
		return CacheAnalyser;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-3-2 下午12:11:59
	*/
	//class laya.debug.tools.CallLaterTool
	var CallLaterTool=(function(){
		function CallLaterTool(){
			this._getHandler=null;
			this._indexHandler=null;
			this._pool=null;
			this._laters=null;
		}

		__class(CallLaterTool,'laya.debug.tools.CallLaterTool');
		var __proto=CallLaterTool.prototype;
		/**
		*延迟执行。
		*@param caller 执行域(this)。
		*@param method 定时器回调函数。
		*@param args 回调参数。
		*/
		__proto.callLater=function(caller,method,args){
			if (this._getHandler(caller,method)==null){
				CallLaterTool.oldCallLater.call(this,caller,method,args);
				if(CallLaterTool._isRecording){
					CallLaterTool._recordedCallLaters.push(this._laters[this._laters.length-1]);
				}
			}
		}

		CallLaterTool.initCallLaterRecorder=function(){
			if(CallLaterTool.oldCallLater)return;
			CallLaterTool.oldCallLater=Laya.timer["callLater"];
			Laya.timer["callLater"]=CallLaterTool["prototype"]["callLater"];
		}

		CallLaterTool.beginRecordCallLater=function(){
			CallLaterTool.initCallLaterRecorder();
			CallLaterTool._isRecording=true;
		}

		CallLaterTool.runRecordedCallLaters=function(){
			CallLaterTool._isRecording=false;
			var timer;
			timer=Laya.timer;
			var laters=timer["_laters"];
			laters=CallLaterTool._recordedCallLaters;
			for (var i=0,n=laters.length-1;i <=n;i++){
				var handler=laters[i];
				if(CallLaterTool._recordedCallLaters.indexOf(handler)<0)continue ;
				handler.method!==null && handler.run(false);
				timer["_recoverHandler"](handler);
				laters.splice(i,1);
			}
			CallLaterTool._recordedCallLaters.length=0;
		}

		CallLaterTool._recordedCallLaters=[];
		CallLaterTool._isRecording=false;
		CallLaterTool.oldCallLater=null
		return CallLaterTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.CanvasTools
	var CanvasTools=(function(){
		function CanvasTools(){}
		__class(CanvasTools,'laya.debug.tools.CanvasTools');
		CanvasTools.createCanvas=function(width,height){
			var rst=new HTMLCanvas("2D");
			rst.getContext('2d');
			rst.size(width,height);
			return rst;
		}

		CanvasTools.renderSpriteToCanvas=function(sprite,canvas,offsetX,offsetY){
			RenderSprite.renders[sprite._renderType]._fun(sprite,canvas.context,offsetX,offsetY);
		}

		CanvasTools.getImageDataFromCanvas=function(canvas,x,y,width,height){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			if (width <=0)
				width=canvas.width;
			if (height <=0)
				height=canvas.height;
			var imgdata=canvas.context.getImageData(x,y,width,height);
			return imgdata;
		}

		CanvasTools.getImageDataFromCanvasByRec=function(canvas,rec){
			var imgdata=canvas.context.getImageData(rec.x,rec.y,rec.width,rec.height);
			return imgdata;
		}

		CanvasTools.getDifferCount=function(imageData1,imageData2){
			var data1=imageData1.data;
			var data2=imageData2.data;
			var differCount=0;
			differCount=0;
			CanvasTools.walkImageData(imageData1,myWalkFun);
			return differCount;
			function myWalkFun (i,j,tarPos,data){
				if (!CanvasTools.isPoinSame(tarPos,data1,data2))differCount++;
			}
		}

		CanvasTools.getDifferRate=function(imageData1,imageData2){
			return CanvasTools.getDifferCount(imageData1,imageData2)/(imageData1.width *imageData1.height);
		}

		CanvasTools.getCanvasDisRec=function(canvas){
			var rst;
			rst=new Rectangle;
			var imgdata;
			imgdata=CanvasTools.getImageDataFromCanvas(canvas,0,0);
			var maxX=0;
			var minX=0;
			var maxY=0;
			var minY=0;
			maxX=maxY=0;
			minX=imgdata.width;
			minY=imgdata.height;
			var i=0,iLen=0;
			var j=0,jLen=0;
			iLen=imgdata.width;
			jLen=imgdata.height;
			var data;
			data=imgdata.data;
			var tarPos=0;
			for (j=0;j < jLen;j++){
				for (i=0;i < iLen;i++){
					if (!CanvasTools.isEmptyPoint(data,tarPos)){
						if (minX > i)
							minX=i;
						if (maxX < i)
							maxX=i;
						if (minY > j)
							minY=j;
						if (maxY < j)
							maxY=j;
					}
					tarPos+=4;
				}
			}
			rst.setTo(minX,minY,maxX-minX+1,maxY-minY+1);
			return rst;
		}

		CanvasTools.fillCanvasRec=function(canvas,rec,color){
			var ctx=canvas.context;
			ctx.fillStyle=color;
			ctx.fillRect(rec.x,rec.y,rec.width,rec.height);
		}

		CanvasTools.isEmptyPoint=function(data,pos){
			if (data[pos]==0 && data[pos+1]==0 && data[pos+2]==0 && data[pos+3]==0){
				return true;
			}
			else{
				return false;
			}
		}

		CanvasTools.isPoinSame=function(pos,data1,data2){
			if (data1[pos]==data2[pos] && data1[pos+1]==data2[pos+1] && data1[pos+2]==data2[pos+2] && data1[pos+3]==data2[pos+3]){
				return true;
			}
			else{
				return false;
			}
		}

		CanvasTools.walkImageData=function(imgdata,walkFun){
			var i=0,iLen=0;
			var j=0,jLen=0;
			iLen=imgdata.width;
			jLen=imgdata.height;
			var tarPos=0;
			var data=imgdata.data;
			for (i=0;i < iLen;i++){
				for (j=0;j < jLen;j++){
					walkFun(i,j,tarPos,data);
					tarPos+=4;
				}
			}
		}

		CanvasTools.getSpriteByCanvas=function(canvas){
			var rst;
			rst=new Sprite();
			rst.graphics.drawTexture(new Texture(canvas),0,0,canvas.width,canvas.height);
			return rst;
		}

		CanvasTools.renderSpritesToCanvas=function(canvas,sprites,offx,offy,startIndex){
			(offx===void 0)&& (offx=0);
			(offy===void 0)&& (offy=0);
			(startIndex===void 0)&& (startIndex=0);
			var i=0,len=0;
			len=sprites.length;
			for (i=startIndex;i < len;i++){
				CanvasTools.renderSpriteToCanvas(sprites[i],canvas,offx,offy);
			}
		}

		CanvasTools.clearCanvas=function(canvas){
			var preWidth=NaN;
			var preHeight=NaN;
			preWidth=canvas.width;
			preHeight=canvas.height;
			canvas.size(preWidth+1,preHeight);
			canvas.size(preWidth,preHeight);
		}

		CanvasTools.getImagePixels=function(x,y,width,data,colorLen){
			(colorLen===void 0)&& (colorLen=4);
			var pos=0;
			pos=(x *width+y)*colorLen;
			var i=0,len=0;
			var rst;
			rst=[];
			len=colorLen;
			for (i=0;i < len;i++){
				rst.push(data[pos+i]);
			}
			return rst;
		}

		return CanvasTools;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-23 下午2:24:04
	*/
	//class laya.debug.tools.ClassTool
	var ClassTool=(function(){
		function ClassTool(){}
		__class(ClassTool,'laya.debug.tools.ClassTool');
		ClassTool.defineProperty=function(obj,name,des){
			Object.defineProperty(obj,name,des);;
		}

		ClassTool.getOwnPropertyDescriptor=function(obj,name){
			var rst;
			rst=Object.getOwnPropertyDescriptor(obj,name);;
			return rst;
		}

		ClassTool.getOwnPropertyDescriptors=function(obj){
			var rst;
			rst=Object.getOwnPropertyDescriptors(obj);;
			return rst;
		}

		ClassTool.getOwnPropertyNames=function(obj){
			var rst;
			rst=Object.getOwnPropertyNames(obj);;
			return rst;
		}

		ClassTool.getObjectGetSetKeys=function(obj,rst){
			if (!rst)rst=[];
			var keys;
			keys=laya.debug.tools.ClassTool.getOwnPropertyNames(obj);
			var key;
			for (key in keys){
				key=keys[key];
				if (key.indexOf("_$get_")>=0){
					key=key.replace("_$get_","");
					rst.push(key);
				}
			}
			if (obj["__proto__"]){
				ClassTool.getObjectGetSetKeys(obj["__proto__"],rst);
			}
			return rst;
		}

		ClassTool.getObjectDisplayAbleKeys=function(obj,rst){
			if (!rst)rst=[];
			var key;
			var tValue;
			var tType;
			for (key in obj){
				tValue=obj[key];
				tType=typeof(tValue);
				if (key.charAt(0)=="_")continue ;
				rst.push(key);
			}
			ClassTool.getObjectGetSetKeys(obj,rst);
			rst=ObjectTools.getNoSameArr(rst);
			return rst;
		}

		ClassTool.getClassName=function(tar){
			if ((typeof tar=='function'))return tar.name;
			return tar["constructor"].name;
		}

		ClassTool.getNodeClassAndName=function(tar){
			if (!tar)return "null";
			var rst;
			if (tar.name){
				rst=ClassTool.getClassName(tar)+"("+tar.name+")";
				}else{
				rst=ClassTool.getClassName(tar);
			}
			return rst;
		}

		ClassTool.getClassNameByClz=function(clz){
			return clz["name"];
		}

		ClassTool.getClassByName=function(className){
			var rst;
			rst=eval(className);
			return rst;
		}

		ClassTool.createObjByName=function(className){
			var clz;
			clz=ClassTool.getClassByName(className);
			return new clz();
		}

		__static(ClassTool,
		['displayTypes',function(){return this.displayTypes={"boolean":true,"number":true,"string":true };}
		]);
		return ClassTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.ColorTool
	var ColorTool=(function(){
		function ColorTool(){
			this.red=NaN;
			this.green=NaN;
			this.blue=NaN;
		}

		__class(ColorTool,'laya.debug.tools.ColorTool');
		ColorTool.toHexColor=function(color){
			return Utils.toHexColor(color);
		}

		ColorTool.getRGBByRGBStr=function(str){
			str.charAt(0)=='#' && (str=str.substr(1));
			var color=parseInt(str,16);
			var flag=(str.length==8);
			var _color;
			_color=[((0x00FF0000 & color)>> 16),((0x0000FF00 & color)>> 8),(0x000000FF & color)];
			return _color;
		}

		ColorTool.getColorBit=function(value){
			var rst;
			rst=Math.floor(value).toString(16);
			rst=rst.length > 1 ? rst :"0"+rst;
			return rst;
		}

		ColorTool.getRGBStr=function(rgb){
			return "#"+ColorTool.getColorBit(rgb[0])+ColorTool.getColorBit(rgb[1])+ColorTool.getColorBit(rgb[2]);
		}

		ColorTool.traseHSB=function(hsb){
			console.log("hsb:",hsb[0],hsb[1],hsb[2]);
		}

		ColorTool.rgb2hsb=function(rgbR,rgbG,rgbB){
			var rgb=[rgbR,rgbG,rgbB];
			rgb.sort(MathTools.sortNumSmallFirst);
			var max=rgb[2];
			var min=rgb[0];
			var hsbB=max / 255.0;
			var hsbS=max==0 ? 0 :(max-min)/ max;
			var hsbH=0;
			if(max==min){
				hsbH=1;
			}
			else
			if (rgbR==0 && rgbG==0&&rgbB==0){
			}else
			if (max==rgbR && rgbG >=rgbB){
				hsbH=(rgbG-rgbB)*60 / (max-min)+0;
			}
			else if (max==rgbR && rgbG < rgbB){
				hsbH=(rgbG-rgbB)*60 / (max-min)+360;
			}
			else if (max==rgbG){
				hsbH=(rgbB-rgbR)*60 / (max-min)+120;
			}
			else if (max==rgbB){
				hsbH=(rgbR-rgbG)*60 / (max-min)+240;
			}
			return [hsbH,hsbS,hsbB];
		}

		ColorTool.hsb2rgb=function(h,s,v){
			var r=0,g=0,b=0;
			var i=Math.floor((h / 60)% 6);
			var f=(h / 60)-i;
			var p=v *(1-s);
			var q=v *(1-f *s);
			var t=v *(1-(1-f)*s);
			switch (i){
				case 0:
					r=v;
					g=t;
					b=p;
					break ;
				case 1:
					r=q;
					g=v;
					b=p;
					break ;
				case 2:
					r=p;
					g=v;
					b=t;
					break ;
				case 3:
					r=p;
					g=q;
					b=v;
					break ;
				case 4:
					r=t;
					g=p;
					b=v;
					break ;
				case 5:
					r=v;
					g=p;
					b=q;
					break ;
				default :
					break ;
				}
			return [Math.floor(r *255.0),Math.floor(g *255.0),Math.floor(b *255.0)];
		}

		return ColorTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-24 下午6:37:56
	*/
	//class laya.debug.tools.CountTool
	var CountTool=(function(){
		function CountTool(){
			this.data={};
			this.preO={};
			this.changeO={};
			this.count=0;
		}

		__class(CountTool,'laya.debug.tools.CountTool');
		var __proto=CountTool.prototype;
		__proto.reset=function(){
			this.data={};
			this.count=0;
		}

		__proto.add=function(name,num){
			(num===void 0)&& (num=1);
			this.count++;
			if(!this.data.hasOwnProperty(name)){
				this.data[name]=0;
			}
			this.data[name]=this.data[name]+num;
		}

		__proto.getKeyCount=function(key){
			if(!this.data.hasOwnProperty(key)){
				this.data[key]=0;
			}
			return this.data[key];
		}

		__proto.getKeyChange=function(key){
			if (!this.changeO[key])return 0;
			return this.changeO[key];
		}

		__proto.record=function(){
			var key;
			for (key in this.changeO){
				this.changeO[key]=0;
			}
			for (key in this.data){
				if (!this.preO[key])this.preO[key]=0;
				this.changeO[key]=this.data[key]-this.preO[key];
				this.preO[key]=this.data[key]
			}
		}

		__proto.getCount=function(dataO){
			var rst=0;
			var key;
			for (key in dataO){
				rst+=dataO[key];
			}
			return rst;
		}

		__proto.traceSelf=function(dataO){
			if (!dataO)dataO=this.data;
			var tCount=0;
			tCount=this.getCount(dataO);
			console.log("total:"+tCount);
			return "total:"+tCount+"\n"+TraceTool.traceObj(dataO);
		}

		__proto.traceSelfR=function(dataO){
			if (!dataO)dataO=this.data;
			var tCount=0;
			tCount=this.getCount(dataO);
			console.log("total:"+tCount);
			return "total:"+tCount+"\n"+TraceTool.traceObjR(dataO);
		}

		return CountTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.DebugConsts
	var DebugConsts=(function(){
		function DebugConsts(){}
		__class(DebugConsts,'laya.debug.tools.DebugConsts');
		DebugConsts.CLICK_SELECT_COLOR="#ff0000";
		DebugConsts.CANVAS_REC_COLOR="#FF00FF";
		DebugConsts.RECACHE_REC_COLOR="#00ff00";
		DebugConsts.SPRITE_REC_COLOR="#ff0000";
		DebugConsts.SPRITE_REC_LINEWIDTH=2;
		return DebugConsts;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-31 下午3:35:16
	*/
	//class laya.debug.tools.DebugExport
	var DebugExport=(function(){
		function DebugExport(){}
		__class(DebugExport,'laya.debug.tools.DebugExport');
		DebugExport.export=function(){
			var _window;
			_window=window;;
			var key;
			for(key in DebugExport._exportsDic){
				_window[key]=DebugExport._exportsDic[key];
			}
		}

		__static(DebugExport,
		['_exportsDic',function(){return this._exportsDic={
				"DebugTool":DebugTool,
				"Watcher":Watcher
		};}

		]);
		return DebugExport;
	})()


	/**
	*本类用于显示对象值变化过程
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-23 上午10:41:50
	*/
	//class laya.debug.tools.DifferTool
	var DifferTool=(function(){
		function DifferTool(sign,autoTrace){
			this.autoTrace=true;
			this.sign="";
			this.obj=null;
			(sign===void 0)&& (sign="");
			(autoTrace===void 0)&& (autoTrace=true);
			this.sign=sign;
			this.autoTrace=autoTrace;
		}

		__class(DifferTool,'laya.debug.tools.DifferTool');
		var __proto=DifferTool.prototype;
		__proto.update=function(data,msg){
			if(msg){
				console.log(msg);
			};
			var tObj=ObjectTools.copyObj(data);
			if(!this.obj)this.obj={};
			var rst;
			rst=ObjectTools.differ(this.obj,tObj);
			this.obj=tObj;
			if(this.autoTrace){
				console.log(this.sign+" differ:");
				ObjectTools.traceDifferObj(rst);
			}
			return rst;
		}

		DifferTool.differ=function(sign,data,msg){
			if(!DifferTool._differO[sign])DifferTool._differO[sign]=new DifferTool(sign,true);
			var tDiffer;
			tDiffer=DifferTool._differO[sign];
			return tDiffer.update(data,msg);
		}

		DifferTool._differO={};
		return DifferTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-1-14 下午4:32:47
	*/
	//class laya.debug.tools.DisController
	var DisController=(function(){
		function DisController(){
			this.arrowAxis=null;
			this._target=null;
			this.recInfo=null;
			DisController.init();
			this.arrowAxis=new Axis();
			this.arrowAxis.mouseEnabled=true;
		}

		__class(DisController,'laya.debug.tools.DisController');
		var __proto=DisController.prototype;
		__proto.switchType=function(){
			this.arrowAxis.switchType();
		}

		__proto.updateMe=function(){
			if(!this._target)return;
			this.recInfo=RecInfo.getGlobalRecInfo(this._target,0,0,1,0,0,1);
			console.log("rotation:",this.recInfo.rotation);
			console.log("pos:",this.recInfo.x,this.recInfo.y);
			console.log("scale:",this.recInfo.width,this.recInfo.height);
			this.arrowAxis.x=this.recInfo.x;
			this.arrowAxis.y=this.recInfo.y;
			this.arrowAxis.rotation=this.recInfo.rotation;
			this.arrowAxis.yAxis.rotation=this.recInfo.rotationV-this.recInfo.rotation;
		}

		__getset(0,__proto,'target',function(){
			return this._target;
			},function(target){
			this._target=target;
			if(target){
				DisController._container.addChild(this.arrowAxis);
				Laya.timer.loop(100,this,this.updateMe);
				}else{
				this.arrowAxis.removeSelf();
				Laya.timer.clear(this,this.updateMe);
			}
			this.arrowAxis.target=target;
			this.updateMe();
		});

		__getset(0,__proto,'type',function(){
			return this.arrowAxis.type;
			},function(lenType){
			this.arrowAxis.type=lenType;
		});

		DisController.init=function(){
			if (DisController._container){
				DisControlTool.setTop(DisController._container);
				return;
			};
			DisController._container=new Sprite();
			DisController._container.mouseEnabled=true;
			Laya.stage.addChild(DisController._container);
		}

		DisController._container=null
		__static(DisController,
		['I',function(){return this.I=new DisController();}
		]);
		return DisController;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-25 下午7:19:44
	*/
	//class laya.debug.tools.DisControlTool
	var DisControlTool=(function(){
		function DisControlTool(){}
		__class(DisControlTool,'laya.debug.tools.DisControlTool');
		DisControlTool.getObjectsUnderPoint=function(sprite,x,y,rst,filterFun){
			rst=rst?rst:[];
			if(filterFun!=null&&!filterFun(sprite))return rst;
			if (sprite.getBounds().contains(x,y)){
				rst.push(sprite);
				var tS;
				var tempP=new Point();
				tempP.setTo(x,y);
				tempP=sprite.fromParentPoint(tempP);
				x=tempP.x;
				y=tempP.y;
				for (var i=sprite._childs.length-1;i >-1;i--){
					var child=sprite._childs[i];
					if((child instanceof laya.display.Sprite ))
						DisControlTool.getObjectsUnderPoint(child,x,y,rst,filterFun);
				}
			}
			return rst;
		}

		DisControlTool.getObjectsUnderGlobalPoint=function(sprite,filterFun){
			var point=new Point();
			point.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			if(sprite.parent)
				point=(sprite.parent).globalToLocal(point);
			return DisControlTool.getObjectsUnderPoint(sprite,point.x,point.y,null,filterFun);
		}

		DisControlTool.findFirstObjectsUnderGlobalPoint=function(){
			var disList;
			disList=DisControlTool.getObjectsUnderGlobalPoint(Laya.stage);
			if (!disList)return null;
			var i=0,len=0;
			var tDis;
			len=disList.length;
			for (i=len-1;i>=0;i--){
				tDis=disList[i];
				if (tDis && tDis.numChildren < 1){
					return tDis;
				}
			}
			return tDis;
		}

		DisControlTool.visibleAndEnableObjFun=function(tar){
			return tar.visible&&tar.mouseEnabled;
		}

		DisControlTool.visibleObjFun=function(tar){
			return tar.visible;
		}

		DisControlTool.getMousePoint=function(sprite){
			var point=new Point();
			point.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			point=sprite.globalToLocal(point);
			return point;
		}

		DisControlTool.isChildE=function(parent,child){
			if (!parent)return false;
			while (child){
				if (child.parent==parent)return true;
				child=child.parent;
			}
			return false;
		}

		DisControlTool.isInTree=function(pNode,child){
			return pNode==child || DisControlTool.isChildE(pNode,child);
		}

		DisControlTool.setTop=function(tar){
			if(tar&&tar.parent){
				var tParent;
				tParent=tar.parent;
				tParent.setChildIndex(tar,tParent.numChildren-1);
			}
		}

		DisControlTool.clearItemRelativeInfo=function(item){
			var Nan="NaN";
			item.getLayout().left=Nan;
			item.getLayout().right=Nan;
			item.getLayout().top=Nan;
			item.getLayout().bottom=Nan;
		}

		DisControlTool.swap=function(tarA,tarB){
			if (tarA==tarB)return;
			var iA=0;
			iA=tarA.parent.getChildIndex(tarA);
			var iB=0;
			iB=tarB.parent.getChildIndex(tarB);
			var bP;
			bP=tarB.parent;
			tarA.parent.addChildAt(tarB,iA);
			bP.addChildAt(tarA,iB);
		}

		DisControlTool.insertToTarParent=function(tarA,tars,after){
			(after===void 0)&& (after=false);
			var tIndex=0;
			var parent;
			if(!tarA)return;
			parent=tarA.parent;
			if(!parent)return;
			tIndex=parent.getChildIndex(tarA);
			if(after)tIndex++;
			DisControlTool.insertToParent(parent,tars,tIndex);
		}

		DisControlTool.insertToParent=function(parent,tars,index){
			(index===void 0)&& (index=-1);
			if(!parent)return;
			if(index<0)index=parent.numChildren;
			var i=0,len=0;
			len=tars.length;
			for(i=0;i<len;i++){
				DisControlTool.transParent(tars[i],parent);
				parent.addChildAt(tars[i],index);
			}
		}

		DisControlTool.transParent=function(tar,newParent){
			if(!tar||!newParent)return;
			if(!tar.parent)return;
			var preParent;
			preParent=tar.parent;
			var pos;
			pos=new Point(tar.x,tar.y);
			pos=preParent.localToGlobal(pos);
			pos=newParent.globalToLocal(pos);
			tar.pos(pos.x,pos.y);
		}

		DisControlTool.transPoint=function(nowParent,tarParent,point){
			point=nowParent.localToGlobal(point);
			point=tarParent.globalToLocal(point);
			return point;
		}

		DisControlTool.removeItems=function(itemList){
			var i=0,len=0;
			len=itemList.length;
			for (i=0;i < len;i++){
				(itemList [i]).removeSelf();
			}
		}

		DisControlTool.addItems=function(itemList,parent){
			var i=0,len=0;
			len=itemList.length;
			for (i=0;i < len;i++){
				parent.addChild(itemList[i]);
			}
		}

		DisControlTool.getAllChild=function(tar){
			if(!tar)return [];
			var i=0;
			var len=0;
			var rst=[];
			len=tar.numChildren;
			for(i=0;i<len;i++){
				rst.push(tar.getChildAt(i));
			}
			return rst;
		}

		DisControlTool.upDis=function(child){
			if(child&&child.parent){
				var tParent;
				tParent=child.parent;
				var newIndex=0;
				newIndex=tParent.getChildIndex(child)+1;
				if(newIndex>=tParent.numChildren){
					newIndex=tParent.numChildren-1;
				}
				console.log("setChildIndex:"+newIndex);
				tParent.setChildIndex(child,newIndex);
			}
		}

		DisControlTool.downDis=function(child){
			if(child&&child.parent){
				var tParent;
				tParent=child.parent;
				var newIndex=0;
				newIndex=tParent.getChildIndex(child)-1;
				if(newIndex<0)newIndex=0;
				console.log("setChildIndex:"+newIndex);
				tParent.setChildIndex(child,newIndex);
			}
		}

		DisControlTool.setResizeAbleEx=function(node){
			var clickItem;
			clickItem=node.getChildByName("resizeBtn");
			if (clickItem){
				SimpleResizer.setResizeAble(clickItem,node);
			}
		}

		DisControlTool.setResizeAble=function(node){
			node.on("click",null,DisControlTool.resizeHandler,[node]);
		}

		DisControlTool.resizeHandler=function(tar){
			DisResizer.setUp(tar);
		}

		DisControlTool.setDragingItem=function(dragBar,tar){
			dragBar.on("mousedown",null,DisControlTool.dragingHandler,[tar]);
			tar.on("dragend",null,DisControlTool.dragingEnd,[tar]);
		}

		DisControlTool.dragingHandler=function(tar){
			if (tar){
				tar.startDrag();
			}
		}

		DisControlTool.dragingEnd=function(tar){
			DisControlTool.intFyDisPos(tar);
			console.log(tar.x,tar.y);
		}

		DisControlTool.showToStage=function(dis,offX,offY){
			(offX===void 0)&& (offX=0);
			(offY===void 0)&& (offY=0);
			var rec=dis.getBounds();
			dis.x=Laya.stage.mouseX+offX;
			dis.y=Laya.stage.mouseY+offY;
			if (dis.x+rec.width > Laya.stage.width){
				dis.x-=rec.width+offX;
			}
			if (dis.y+rec.height > Laya.stage.height){
				dis.y-=rec.height+offY;
			}
			DisControlTool.intFyDisPos(dis);
		}

		DisControlTool.intFyDisPos=function(dis){
			if (!dis)return;
			dis.x=Math.round(dis.x);
			dis.y=Math.round(dis.y);
		}

		DisControlTool.showOnly=function(disList,showItem){
			var i=0,len=0;
			len=disList.length;
			for (i=0;i < len;i++){
				disList[i].visible=disList[i]==showItem;
			}
		}

		DisControlTool.showOnlyByIndex=function(disList,index){
			DisControlTool.showOnly(disList,disList[index]);
		}

		DisControlTool.addOnly=function(disList,showItem,parent){
			var i=0,len=0;
			len=disList.length;
			for (i=0;i < len;i++){
				if (disList[i] !=showItem){
					disList[i].removeSelf();
					}else{
					parent.addChild(disList[i]);
				}
			}
		}

		DisControlTool.addOnlyByIndex=function(disList,index,parent){
			DisControlTool.addOnly(disList,disList[index],parent);
		}

		__static(DisControlTool,
		['tempP',function(){return this.tempP=new Point();}
		]);
		return DisControlTool;
	})()


	/**
	*调试拾取显示对象类
	*@author ww
	*/
	//class laya.debug.tools.DisplayHook
	var DisplayHook=(function(){
		function DisplayHook(){
			this.mouseX=NaN;
			this.mouseY=NaN;
			this._stage=null;
			this._target=null;
			this.isGetting=false;
			this._matrix=new Matrix();
			this._point=new Point();
			this._rect=new Rectangle();
			this._event=Event.EMPTY;
			this._stage=Laya.stage;
			this.init(Render.context.canvas);
		}

		__class(DisplayHook,'laya.debug.tools.DisplayHook');
		var __proto=DisplayHook.prototype;
		__proto.init=function(canvas){
			var _$this=this;
			if (Browser.window.navigator.msPointerEnabled){
				canvas.style['-ms-content-zooming']='none';
				canvas.style['-ms-touch-action']='none';
			};
			var _this=this;
			Browser.document.addEventListener('mousedown',function(e){
				_$this._event._stoped=false;
				DisplayHook.isFirst=true;
				_this.check(_this._stage,e.offsetX,e.offsetY,_this.onMouseDown,true,false);
			},true);
			Browser.document.addEventListener('touchstart',function(e){
				_$this._event._stoped=false;
				DisplayHook.isFirst=true;
				var touches=e.changedTouches;
				for (var i=0,n=touches.length;i < n;i++){
					var touch=touches[i];
					initEvent(touch,e);
					_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown,true,false);
				}
			},true);
			function initEvent (e,event){
				_this._event._stoped=false;
				_this._event.nativeEvent=event || e;
				_this._target=null;
				if (e.offsetX){
					_this.mouseX=e.offsetX;
					_this.mouseY=e.offsetY;
					}else {
					_this.mouseX=e.clientX-Laya.stage.offset.x;
					_this.mouseY=e.clientY-Laya.stage.offset.y;
				}
			}
		}

		__proto.onMouseMove=function(ele,hit){
			this.sendEvent(ele,"mousemove");
			return;
			if (hit && ele !=this._stage && ele!==this._target){
				if (this._target){
					if (this._target.$_MOUSEOVER){
						this._target.$_MOUSEOVER=false;
						this._target.event("mouseout");
					}
				}
				this._target=ele;
				if (!ele.$_MOUSEOVER){
					ele.$_MOUSEOVER=true;
					this.sendEvent(ele,"mouseover");
				}
				}else if (!hit && this._target && ele===this._target){
				this._target=null;
				if (ele.$_MOUSEOVER){
					ele.$_MOUSEOVER=false;
					this.sendEvent(ele,"mouseout");
				}
			}
		}

		__proto.onMouseUp=function(ele,hit){
			hit && this.sendEvent(ele,"mouseup");
		}

		__proto.onMouseDown=function(ele,hit){
			if (hit){
				ele.$_MOUSEDOWN=true;
				this.sendEvent(ele,"mousedown");
			}
		}

		__proto.sendEvent=function(ele,type){
			if (!this._event._stoped){
				ele.event(type,this._event.setTo(type,ele,ele));
				if (type==="mouseup" && ele.$_MOUSEDOWN){
					ele.$_MOUSEDOWN=false;
					ele.event("click",this._event.setTo("click",ele,ele));
				}
			}
		}

		__proto.selectDisUnderMouse=function(){
			DisplayHook.isFirst=true;
			this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,true,false);
			SelectInfosView.I.setSelectTarget(DebugTool.target);
		}

		__proto.getDisUnderMouse=function(){
			this.isGetting=true;
			DisplayHook.isFirst=true;
			DebugTool.target=null;
			this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,true,false);
			this.isGetting=false;
			return DebugTool.target;
		}

		__proto.check=function(sp,mouseX,mouseY,callBack,hitTest,mouseEnable){
			if (sp==DebugTool.debugLayer)return false;
			if (sp==DebugInfoLayer.I)return false;
			if (this.isGetting && sp==DebugInfoLayer.I)return false;
			if (!sp.visible || sp.getSelfBounds().width<=0)return false;
			var isHit=false;
			mouseEnable=true
			if (mouseEnable){
				var graphicHit=false;
				if (hitTest){
					this._rect=sp.getBounds();
					isHit=this._rect.contains(mouseX,mouseY);
					this._point.setTo(mouseX,mouseY);
					sp.fromParentPoint(this._point);
					mouseX=this._point.x;
					mouseY=this._point.y;
				}
				if (isHit){
					var flag=false;
					for (var i=sp._childs.length-1;i >-1;i--){
						var child=sp._childs[i];
						(flag=this.check(child,mouseX,mouseY,callBack,hitTest,true));
						if (flag)break ;
					}
					graphicHit=sp.getGraphicBounds().contains(mouseX,mouseY);
					isHit=flag||graphicHit;
					if(isHit&&!flag&&DisplayHook.isFirst){
						DisplayHook.isFirst=false;
						if(! ((sp instanceof laya.debug.tools.debugUI.DButton ))){
							DebugTool.target=sp;
							if (!this.isGetting){
								DebugTool.autoWork();
								Notice.notify("ItemClicked",sp);
							}
						}
					}
				}
			}
			return isHit;
		}

		DisplayHook.initMe=function(){
			if(!DisplayHook.instance){
				DisplayHook.instance=new DisplayHook();
			}
		}

		DisplayHook.ITEM_CLICKED="ItemClicked";
		DisplayHook.instance=null
		DisplayHook.isFirst=false;
		return DisplayHook;
	})()


	/**
	*简单的显示对象对象池
	*从父容器上移除时即被视为可被重用
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-13 下午8:05:13
	*/
	//class laya.debug.tools.DisPool
	var DisPool=(function(){
		function DisPool(){}
		__class(DisPool,'laya.debug.tools.DisPool');
		DisPool.getDis=function(clz){
			var clzName;
			clzName=ClassTool.getClassNameByClz(clz);
			if(!DisPool._objDic[clzName]){
				DisPool._objDic[clzName]=[];
			};
			var disList;
			disList=DisPool._objDic[clzName];
			var i=0,len=0;
			len=disList.length;
			for(i=0;i<len;i++){
				if(!disList[i].parent){
					return disList[i];
				}
			}
			disList.push(new clz());
			return disList[disList.length-1];
		}

		DisPool._objDic={};
		return DisPool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-28 上午10:39:47
	*/
	//class laya.debug.tools.DTrace
	var DTrace=(function(){
		function DTrace(){}
		__class(DTrace,'laya.debug.tools.DTrace');
		DTrace.getArgArr=function(arg){
			var rst;
			rst=[];
			var i=0,len=arg.length;
			for(i=0;i<len;i++){
				rst.push(arg[i]);
			}
			return rst;
		}

		DTrace.dTrace=function(__arg){
			var arg=arguments;
			arg=DTrace.getArgArr(arg);
			arg.push(TraceTool.getCallLoc(2));
			console.log.apply(console,arg);
			var str;
			str=arg.join(" ");
		}

		DTrace.timeStart=function(sign){
			console.time(sign);;
		}

		DTrace.timeEnd=function(sign){
			console.timeEnd(sign);;
		}

		DTrace.traceTable=function(data){
			console.table(data);;
		}

		return DTrace;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.enginehook.ClassCreateHook
	var ClassCreateHook=(function(){
		function ClassCreateHook(){
			this.createInfo={};
		}

		__class(ClassCreateHook,'laya.debug.tools.enginehook.ClassCreateHook');
		var __proto=ClassCreateHook.prototype;
		__proto.hookClass=function(clz){
			var _$this=this;
			if (ClassCreateHook.isInited)return;
			ClassCreateHook.isInited=true;
			var createFun=function (sp){
				_$this.classCreated(sp,clz);
			}
			FunHook.hook(clz,"call",createFun);
		}

		__proto.classCreated=function(clz,oClass){
			var key;
			key=ClassTool.getNodeClassAndName(clz);
			var depth=0;
			var tClz;
			tClz=clz;
			while (tClz && tClz !=oClass){
				tClz=tClz.__super;
				depth++;
			}
			if (!ClassCreateHook.I.createInfo[key]){
				ClassCreateHook.I.createInfo[key]=0;
			}
			ClassCreateHook.I.createInfo[key]=ClassCreateHook.I.createInfo[key]+1;
			RunProfile.run(key,depth+6);
		}

		__proto.getClassCreateInfo=function(clz){
			var key;
			key=ClassTool.getClassName(clz);
			return RunProfile.getRunInfo(key);
		}

		ClassCreateHook.isInited=false;
		__static(ClassCreateHook,
		['I',function(){return this.I=new ClassCreateHook();}
		]);
		return ClassCreateHook;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.enginehook.RenderSpriteHook
	var RenderSpriteHook=(function(){
		function RenderSpriteHook(){
			//this._next=null;
			//this._fun=null;
			//this._oldCanvas=null;
		}

		__class(RenderSpriteHook,'laya.debug.tools.enginehook.RenderSpriteHook');
		var __proto=RenderSpriteHook.prototype;
		__proto.createRenderSprite=function(type,next){
			var rst;
			rst=RenderSpriteHook._preCreateFun(type,next);
			if (type==0x10){
				rst["_oldCanvas"]=rst._fun;
				rst._fun=RenderSpriteHook.I._canvas;
			}
			return rst;
		}

		__proto._canvas=function(sprite,context,x,y){
			if (!SpriteRenderForVisibleAnalyse.allowRendering)return;
			var _cacheCanvas=sprite._$P.cacheCanvas;
			var _next=this._next;
			if (!_cacheCanvas||SpriteRenderForVisibleAnalyse.isVisibleTesting){
				_next._fun.call(_next,sprite,context,x,y);
				return;
			};
			var preTime;
			preTime=Browser.now();
			var tx=_cacheCanvas.ctx;
			var _repaint=sprite._needRepaint()|| (!tx);
			this._oldCanvas(sprite,context,x,y);
			if (Config.showCanvasMark){
			}
			if (_repaint){
				CacheAnalyser.I.reCacheCanvas(sprite,Browser.now()-preTime);
				}else{
				CacheAnalyser.I.renderCanvas(sprite,Browser.now()-preTime);
			}
		}

		RenderSpriteHook.init=function(){
			if (RenderSpriteHook.I)return;
			RenderSpriteHook.I=new RenderSpriteHook();
			RenderSpriteHook._preCreateFun=RunDriver.createRenderSprite;
			RunDriver.createRenderSprite=RenderSpriteHook.I.createRenderSprite;
		}

		RenderSpriteHook.IMAGE=0x01;
		RenderSpriteHook.FILTERS=0x02;
		RenderSpriteHook.ALPHA=0x04;
		RenderSpriteHook.TRANSFORM=0x08;
		RenderSpriteHook.CANVAS=0x10;
		RenderSpriteHook.BLEND=0x20;
		RenderSpriteHook.CLIP=0x40;
		RenderSpriteHook.STYLE=0x80;
		RenderSpriteHook.GRAPHICS=0x100;
		RenderSpriteHook.CUSTOM=0x200;
		RenderSpriteHook.ENABLERENDERMERGE=0x400;
		RenderSpriteHook.CHILDS=0x800;
		RenderSpriteHook.INIT=0x11111;
		RenderSpriteHook.renders=[];
		RenderSpriteHook.I=null
		RenderSpriteHook._preCreateFun=null
		return RenderSpriteHook;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse
	var SpriteRenderForVisibleAnalyse=(function(){
		function SpriteRenderForVisibleAnalyse(){
			this._repaint=1;
			this._renderType=1;
			this._x=0;
			this._y=0;
			this.target=null;
			this.isTargetRenderd=false;
			this.preFun=null;
			this._next=null;
			this.pgraphic=RenderSprite["prototype"]["_graphics"];
			this.pimage=RenderSprite["prototype"]["_image"];
			this.pimage2=RenderSprite["prototype"]["_image2"];
		}

		__class(SpriteRenderForVisibleAnalyse,'laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse');
		var __proto=SpriteRenderForVisibleAnalyse.prototype;
		__proto.setRenderHook=function(){
			Sprite["prototype"]["render"]=SpriteRenderForVisibleAnalyse.I.render;
		}

		/**
		*更新、呈现显示对象。
		*@param context 渲染的上下文引用。
		*@param x X轴坐标。
		*@param y Y轴坐标。
		*/
		__proto.render=function(context,x,y){
			var me;
			me=this;
			if (DebugInfoLayer.I.isDebugItem(me))return;
			if (me==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target){
				laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering=true;
				laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.isTargetRenderd=true;
				CanvasTools.clearCanvas(SpriteRenderForVisibleAnalyse.mainCanvas);
			}
			RenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y);
			if (me==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target){
				SpriteRenderForVisibleAnalyse.tarRec=CanvasTools.getCanvasDisRec(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.mainCanvas);
				console.log("rec",SpriteRenderForVisibleAnalyse.tarRec.toString());
				if (SpriteRenderForVisibleAnalyse.tarRec.width >0&& SpriteRenderForVisibleAnalyse.tarRec.height > 0){
					SpriteRenderForVisibleAnalyse.isTarRecOK=true;
					SpriteRenderForVisibleAnalyse.preImageData=CanvasTools.getImageDataFromCanvasByRec(SpriteRenderForVisibleAnalyse.mainCanvas,SpriteRenderForVisibleAnalyse.tarRec);
					SpriteRenderForVisibleAnalyse.tarImageData=CanvasTools.getImageDataFromCanvasByRec(SpriteRenderForVisibleAnalyse.mainCanvas,SpriteRenderForVisibleAnalyse.tarRec);
					}else{
					console.log("tarRec Not OK:",SpriteRenderForVisibleAnalyse.tarRec);
				}
				}else{
				if (SpriteRenderForVisibleAnalyse.isTarRecOK){
					SpriteRenderForVisibleAnalyse.tImageData=CanvasTools.getImageDataFromCanvasByRec(SpriteRenderForVisibleAnalyse.mainCanvas,SpriteRenderForVisibleAnalyse.tarRec);
					var dRate=NaN;
					dRate=CanvasTools.getDifferRate(SpriteRenderForVisibleAnalyse.preImageData,SpriteRenderForVisibleAnalyse.tImageData);
					SpriteRenderForVisibleAnalyse.preImageData=SpriteRenderForVisibleAnalyse.tImageData;
					if (dRate > 0){
						VisibleAnalyser.addCoverNode(me,dRate);
					}
				}
			}
		}

		__proto.analyseNode=function(node){
			VisibleAnalyser.resetCoverList();
			if (Sprite["prototype"]["render"] !=SpriteRenderForVisibleAnalyse.I.render){
				this.preFun=Sprite["prototype"]["render"];
			}
			this.target=node;
			Sprite["prototype"]["render"]=this.render;
			if (!SpriteRenderForVisibleAnalyse.tarCanvas)
				SpriteRenderForVisibleAnalyse.tarCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height);
			if (!SpriteRenderForVisibleAnalyse.mainCanvas)
				SpriteRenderForVisibleAnalyse.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height);
			this.isTargetRenderd=false;
			SpriteRenderForVisibleAnalyse.isVisibleTesting=true;
			SpriteRenderForVisibleAnalyse.allowRendering=false;
			CanvasTools.clearCanvas(SpriteRenderForVisibleAnalyse.mainCanvas);
			CanvasTools.clearCanvas(SpriteRenderForVisibleAnalyse.tarCanvas);
			SpriteRenderForVisibleAnalyse.isTarRecOK=false;
			var ctx=new RenderContext(SpriteRenderForVisibleAnalyse.mainCanvas.width,SpriteRenderForVisibleAnalyse.mainCanvas.height,SpriteRenderForVisibleAnalyse.mainCanvas);
			SpriteRenderForVisibleAnalyse.mainCanvas=ctx.canvas;
			this.render.call(Laya.stage,ctx,0,0);
			if (!SpriteRenderForVisibleAnalyse.isTarRecOK){
				SpriteRenderForVisibleAnalyse.coverRate=0;
				}else{
				SpriteRenderForVisibleAnalyse.coverRate=CanvasTools.getDifferRate(SpriteRenderForVisibleAnalyse.preImageData,SpriteRenderForVisibleAnalyse.tarImageData);
			}
			VisibleAnalyser.coverRate=SpriteRenderForVisibleAnalyse.coverRate;
			VisibleAnalyser.isTarRecOK=SpriteRenderForVisibleAnalyse.isTarRecOK;
			console.log("coverRate:",SpriteRenderForVisibleAnalyse.coverRate);
			this.isTargetRenderd=false;
			SpriteRenderForVisibleAnalyse.isVisibleTesting=false;
			SpriteRenderForVisibleAnalyse.allowRendering=true;
			Sprite["prototype"]["render"]=this.preFun;
		}

		__proto.noRenderMode=function(){
			return;
			RenderSprite["prototype"]["_graphics"]=this.m_graphics;
			RenderSprite["prototype"]["_image"]=this.m_image;
			RenderSprite["prototype"]["_image2"]=this.m_image2;
		}

		__proto.normalMode=function(){
			RenderSprite["prototype"]["_graphics"]=this.pgraphic;
			RenderSprite["prototype"]["_image"]=this.pimage;
			RenderSprite["prototype"]["_image2"]=this.pimage2;
		}

		__proto.inits=function(){
			this.noRenderMode();
		}

		__proto.m_graphics=function(sprite,context,x,y){
			if (laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){
				var tf=sprite._style._tf;
				sprite._graphics && sprite._graphics._render(sprite,context,x-tf.translateX,y-tf.translateY);
			};
			var next=this._next;
			next._fun.call(next,sprite,context,x,y);
		}

		__proto.m_image=function(sprite,context,x,y){
			if (laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){
				var style=sprite._style;
				context.ctx.drawTexture2(x,y,style._tf.translateX,style._tf.translateY,sprite.transform,style.alpha,style.blendMode,sprite._graphics._one);
			}
		}

		__proto.m_image2=function(sprite,context,x,y){
			if (laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){
				var tf=sprite._style._tf;
				context.ctx.drawTexture2(x,y,tf.translateX,tf.translateY,sprite.transform,1,null,sprite._graphics._one);
			}
		}

		SpriteRenderForVisibleAnalyse.tarCanvas=null
		SpriteRenderForVisibleAnalyse.mainCanvas=null
		SpriteRenderForVisibleAnalyse.preImageData=null
		SpriteRenderForVisibleAnalyse.tImageData=null
		SpriteRenderForVisibleAnalyse.tarImageData=null
		SpriteRenderForVisibleAnalyse.tarRec=null
		SpriteRenderForVisibleAnalyse.isTarRecOK=false;
		SpriteRenderForVisibleAnalyse.isVisibleTesting=false;
		SpriteRenderForVisibleAnalyse.allowRendering=true;
		SpriteRenderForVisibleAnalyse.coverRate=NaN
		__static(SpriteRenderForVisibleAnalyse,
		['I',function(){return this.I=new SpriteRenderForVisibleAnalyse();}
		]);
		return SpriteRenderForVisibleAnalyse;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.enginehook.SpriteRenderHook
	var SpriteRenderHook=(function(){
		function SpriteRenderHook(){
			this._repaint=1;
			this._renderType=1;
			this._x=0;
			this._y=0;
		}

		__class(SpriteRenderHook,'laya.debug.tools.enginehook.SpriteRenderHook');
		var __proto=SpriteRenderHook.prototype;
		/**
		*更新、呈现显示对象。
		*@param context 渲染的上下文引用。
		*@param x X轴坐标。
		*@param y Y轴坐标。
		*/
		__proto.render=function(context,x,y){
			if ((this)==Laya.stage){
				CacheAnalyser.renderLoopBegin();
			};
			var preTime=0;
			preTime=Browser.now();
			Stat.spriteCount++;
			if (this["ShowBorderSign"]){
				DebugTool.showDisBoundToSprite(this,DebugInfoLayer.I.cacheViewLayer,DebugConsts.SPRITE_REC_COLOR,DebugConsts.SPRITE_REC_LINEWIDTH);
			}
			RenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y);
			this._repaint=0;
			RenderAnalyser.I.render(this,Browser.now()-preTime);
		}

		SpriteRenderHook.init=function(){
			if (SpriteRenderHook.I)return;
			SpriteRenderHook.I=new SpriteRenderHook();
			SpriteRenderHook.setRenderHook();
		}

		SpriteRenderHook.setRenderHook=function(){
			Sprite["prototype"]["render"]=SpriteRenderHook.I.render;
		}

		SpriteRenderHook.showDisplayBorder=function(sprite,ifShowBorder){
			(ifShowBorder===void 0)&& (ifShowBorder=true);
			sprite["ShowBorderSign"]=ifShowBorder;
		}

		SpriteRenderHook.isDisplayShowBorder=function(sprite){
			return sprite["ShowBorderSign"];
		}

		SpriteRenderHook.I=null
		SpriteRenderHook.ShowBorderSign="ShowBorderSign";
		return SpriteRenderHook;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-30 下午1:06:56
	*/
	//class laya.debug.tools.FilterTool
	var FilterTool=(function(){
		function FilterTool(){}
		__class(FilterTool,'laya.debug.tools.FilterTool');
		FilterTool.getArrByFilter=function(arr,filterFun){
			var i=0,len=arr.length;
			var rst=[];
			for(i=0;i<len;i++){
				if(filterFun(arr[i]))rst.push(arr[i]);
			}
			return rst;
		}

		FilterTool.getArr=function(arr,sign,value){
			var i=0,len=arr.length;
			var rst=[];
			for(i=0;i<len;i++){
				if(arr[i][sign]==value)rst.push(arr[i]);
			}
			return rst;
		}

		return FilterTool;
	})()


	/**
	*本类用于在对象的函数上挂钩子
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-23 下午1:13:13
	*/
	//class laya.debug.tools.hook.FunHook
	var FunHook=(function(){
		function FunHook(){}
		__class(FunHook,'laya.debug.tools.hook.FunHook');
		FunHook.hook=function(obj,funName,preFun,aftFun){
			FunHook.hookFuns(obj,funName,[preFun,obj[funName],aftFun],1);
		}

		FunHook.hookAllFun=function(obj){
			var key;
			var arr;
			arr=ClassTool.getOwnPropertyNames(obj);
			for(key in arr){
				key=arr[key];
				if (FunHook.special[key])continue ;
				console.log("try hook:",key);
				if((typeof (obj[key])=='function')){
					console.log("hook:",key);
					FunHook.hookFuns(obj,key,[FunHook.getTraceMsg("call:"+key),obj[key]],1);
				}
			}
			if(obj["__proto__"]){
				FunHook.hookAllFun(obj["__proto__"]);
				}else{
				console.log("end:",obj);
			}
		}

		FunHook.getTraceMsg=function(msg){
			var rst;
			rst=function (){
				console.log(msg);
			}
			return rst;
		}

		FunHook.hookFuns=function(obj,funName,funList,rstI){
			(rstI===void 0)&& (rstI=-1);
			var _preFun=obj[funName];
			var newFun;
			newFun=function (__args){
				var args=arguments;
				var rst;
				var i=0;
				var len=0;
				len=funList.length;
				for(i=0;i<len;i++){
					if(!funList[i])continue ;
					if(i==rstI){
						rst=funList[i].apply(this,args);
						}else{
						funList[i].apply(this,args);
					}
				}
				return rst;
			};
			newFun["pre"]=_preFun;
			obj[funName]=newFun;
		}

		FunHook.removeHook=function(obj,funName){
			if(obj[funName].pre!=null){
				obj[funName]=obj[funName].pre;
			}
		}

		FunHook.debugHere=function(){
			debugger;;
		}

		FunHook.traceLoc=function(level,msg){
			(level===void 0)&& (level=0);
			(msg===void 0)&& (msg="");
			console.log(msg,"fun loc:",TraceTool.getCallLoc(3+level));
		}

		FunHook.getLocFun=function(level,msg){
			(level===void 0)&& (level=0);
			(msg===void 0)&& (msg="");
			level+=1;
			var rst;
			rst=function (){
				FunHook.traceLoc(level,msg);
			}
			return rst;
		}

		__static(FunHook,
		['special',function(){return this.special={
				"length":true,
				"name":true,
				"arguments":true,
				"caller":true,
				"prototype":true,
				"is":true,
				"isExtensible":true,
				"isFrozen":true,
				"isSealed":true,
				"preventExtensions":true,
				"seal":true,
				"unobserve":true,
				"apply":true,
				"call":true,
				"bind":true,
				"freeze":true,
				"unobserve":true
		};}

		]);
		return FunHook;
	})()


	/**
	*本类用于监控对象 set get 函数的调用
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-23 下午2:52:48
	*/
	//class laya.debug.tools.hook.VarHook
	var VarHook=(function(){
		function VarHook(){}
		__class(VarHook,'laya.debug.tools.hook.VarHook');
		VarHook.hookVar=function(obj,name,setHook,getHook){
			if(!setHook)setHook=[];
			if(!getHook)getHook=[];
			var preO=obj;
			var preValue=obj[name];
			var des;
			des=ClassTool.getOwnPropertyDescriptor(obj,name);
			var ndes={};
			var mSet=function (value){
				console.log("var hook set "+name+":",value);
				preValue=value;
			};
			var mGet=function (){
				console.log("var hook get"+name+":",preValue);
				return preValue;
			}
			if(des){
				ndes.set=mSet;
				ndes.get=mGet;
				ndes.enumerable=des.enumerable;
				setHook.push(ndes.set);
				getHook.push(ndes.get);
				FunHook.hookFuns(ndes,"set",setHook);
				FunHook.hookFuns(ndes,"get",getHook,getHook.length-1);
				ClassTool.defineProperty(obj,name,ndes);
				return;
			}
			while(!des&&obj["__proto__"]){
				obj=obj["__proto__"];
				des=ClassTool.getOwnPropertyDescriptor(obj,name);
			}
			if (des){
				ndes.set=des.set?des.set:mSet;
				ndes.get=des.get?des.get:mGet;
				ndes.enumerable=des.enumerable;
				setHook.push(ndes.set);
				getHook.push(ndes.get);
				FunHook.hookFuns(ndes,"set",setHook);
				FunHook.hookFuns(ndes,"get",getHook,getHook.length-1);
				ClassTool.defineProperty(preO,name,ndes);
			}
			if(!des){
				console.log("get des fail add directly");
				ndes.set=mSet;
				ndes.get=mGet;
				setHook.push(ndes.set);
				getHook.push(ndes.get);
				FunHook.hookFuns(ndes,"set",setHook);
				FunHook.hookFuns(ndes,"get",getHook,getHook.length-1);
				ClassTool.defineProperty(obj,name,ndes);
			}
		}

		VarHook.getLocFun=function(msg,level){
			(msg===void 0)&& (msg="");
			(level===void 0)&& (level=0);
			level+=1;
			var rst;
			rst=function (){
				FunHook.traceLoc(level,msg);
			}
			return rst;
		}

		return VarHook;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-29 上午9:45:33
	*/
	//class laya.debug.tools.IDTools
	var IDTools=(function(){
		function IDTools(){
			this.tID=1;
		}

		__class(IDTools,'laya.debug.tools.IDTools');
		var __proto=IDTools.prototype;
		__proto.getID=function(){
			return this.tID++;
		}

		IDTools.getAID=function(){
			return IDTools._ID.getID();
		}

		IDTools.idObjE=function(obj,sign){
			(sign===void 0)&& (sign="default");
			if (obj["_M_id_"])return obj;
			if(!sign){
				sign="default";
			}
			if(!IDTools._idDic[sign]){
				IDTools._idDic[sign]=new IDTools();
			}
			obj["_M_id_"]=IDTools._idDic[sign].getAID();
			return obj;
		}

		IDTools.setObjID=function(obj,id){
			obj["_M_id_"]=id;
			return obj;
		}

		IDTools.idObj=function(obj){
			if (obj["_M_id_"])return obj;
			obj["_M_id_"]=IDTools.getAID();
			return obj;
		}

		IDTools.getObjID=function(obj){
			if(!obj)return-1;
			return obj["_M_id_"];
		}

		IDTools.idSign="_M_id_";
		__static(IDTools,
		['_ID',function(){return this._ID=new IDTools();},'_idDic',function(){return this._idDic={"default":new IDTools()};}
		]);
		return IDTools;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-27 上午9:58:59
	*/
	//class laya.debug.tools.JsonTool
	var JsonTool=(function(){
		function JsonTool(){}
		__class(JsonTool,'laya.debug.tools.JsonTool');
		JsonTool.getJsonString=function(obj,singleLine,split,depth,Width){
			(singleLine===void 0)&& (singleLine=true);
			(split===void 0)&& (split="\n");
			(depth===void 0)&& (depth=0);
			(Width===void 0)&& (Width=4);
			var preStr="";
			preStr=JsonTool.getEmptyStr(depth*Width);
			var rst;
			var keyValues;
			keyValues={};
			var tKey;
			var tValue;
			var type;
			var keys;
			keys=[];
			for(tKey in obj){
				keys.push(tKey);
				tValue=obj[tKey];
				if(JsonTool.singleLineKey[tKey]){
					keyValues[tKey]=JsonTool.getValueStr(tValue,true,split,depth+1,Width);
					}else{
					keyValues[tKey]=JsonTool.getValueStr(tValue,singleLine,split,depth+1,Width);
				}
			};
			var i=0,len=0;
			len=keys.length;
			keys.sort();
			keys=keys.reverse();
			var keyPreStr;
			keyPreStr=JsonTool.getEmptyStr((depth+1)*Width);
			if(singleLine){
				split="";
				preStr="";
				keyPreStr="";
			};
			var keyValueStrArr;
			keyValueStrArr=[];
			for(i=0;i<len;i++){
				tKey=keys[i];
				keyValueStrArr.push(keyPreStr+JsonTool.wrapValue(tKey)+":"+keyValues[tKey]);
			}
			rst="{"+split+keyValueStrArr.join(","+split)+split+preStr+"}";
			return rst;
		}

		JsonTool.wrapValue=function(value,wraper){
			(wraper===void 0)&& (wraper="\"");
			return wraper+value+wraper;
		}

		JsonTool.getArrStr=function(arr,singleLine,split,depth,Width){
			(singleLine===void 0)&& (singleLine=true);
			(split===void 0)&& (split="\n");
			(depth===void 0)&& (depth=0);
			(Width===void 0)&& (Width=4);
			var rst;
			var i=0,len=0;
			len=arr.length;
			var valueStrArr;
			valueStrArr=[];
			for(i=0;i<len;i++){
				valueStrArr.push(JsonTool.getValueStr(arr[i],singleLine,split,depth+1,Width));
			};
			var preStr="";
			preStr=JsonTool.getEmptyStr((depth+1)*Width);
			if(singleLine){
				split="";
				preStr="";
			}
			rst="["+split+preStr+valueStrArr.join(","+split+preStr)+"]";
			return rst;
		}

		JsonTool.quote=function(string){
			JsonTool.escapable.lastIndex=0;
			return JsonTool.escapable.test(string)? '"'+string.replace(JsonTool.escapable,function(a){
				var c=JsonTool.meta[a];
				return typeof c==='string' ? c :
				'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);
			})+'"' :'"'+string+'"';
		}

		JsonTool.getValueStr=function(tValue,singleLine,split,depth,Width){
			(singleLine===void 0)&& (singleLine=true);
			(split===void 0)&& (split="\n");
			(depth===void 0)&& (depth=0);
			(Width===void 0)&& (Width=0);
			var rst;
			if((typeof tValue=='string')){
				rst=JsonTool.quote(tValue);
				}else if(tValue==null){
				rst="null";
				}else if((typeof tValue=='number')|| ((typeof tValue=='number')&& Math.floor(tValue)==tValue)|| (typeof tValue=='boolean')){
				rst=tValue;
				}else if((tValue instanceof Array)){
				rst=JsonTool.getArrStr(tValue,singleLine,split,depth,Width);
				}else if((typeof tValue=='object')){
				rst=JsonTool.getJsonString(tValue,singleLine,split,depth,Width);
				}else{
				rst=tValue;
			}
			return rst;
		}

		JsonTool.getEmptyStr=function(width){
			if(!JsonTool.emptyDic.hasOwnProperty(width)){
				var i=0;
				var len=0;
				len=width;
				var rst;
				rst="";
				for(i=0;i<len;i++){
					rst+=" ";
				}
				JsonTool.emptyDic[width]=rst;
			}
			return JsonTool.emptyDic[width];
		}

		JsonTool.emptyDic={};
		__static(JsonTool,
		['singleLineKey',function(){return this.singleLineKey={
				"props":true
			};},'escapable',function(){return this.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;},'meta',function(){return this.meta = {   
			'\b':'\\b',
			'\t':'\\t',
			'\n':'\\n',
			'\f':'\\f',
			'\r':'\\r',
			'"' :'\\"',
			'\\':'\\\\'
	};}


	]);
	return JsonTool;
	})()


	/**
	*本类用于操作html对象
	*@author ww
	*/
	//class laya.debug.tools.JSTools
	var JSTools=(function(){
		function JSTools(){}
		__class(JSTools,'laya.debug.tools.JSTools');
		JSTools.showToBody=function(el,x,y){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			Browser.document.body.appendChild(el);
			var style;
			style=el.style;
			style.position="absolute";
			style.top=y+"px";
			style.left=x+"px";
		}

		JSTools.showToParent=function(el,x,y,parent){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			parent.appendChild(el);
			var style;
			style=el.style;
			style.position="absolute";
			style.top=y+"px";
			style.left=x+"px";
		}

		JSTools.addToBody=function(el){
			Browser.document.body.appendChild(el);
		}

		JSTools.setPos=function(el,x,y){
			var style;
			style=el.style;
			style.top=y+"px";
			style.left=x+"px";
		}

		JSTools.setSize=function(el,width,height){
			var style;
			style=el.style;
			style.width=width+"px";
			style.height=height+"px";
		}

		JSTools.setTransform=function(el,mat){
			var style;
			style=el.style;
			style.transformOrigin=style.webkitTransformOrigin=style.msTransformOrigin=style.mozTransformOrigin=style.oTransformOrigin="0px 0px 0px";
			style.transform=style.webkitTransform=style.msTransform=style.mozTransform=style.oTransform="matrix("+mat.toString()+")";
		}

		JSTools.noMouseEvent=function(el){
			var style;
			style=el.style;
			style["pointer-events"]="none";
		}

		JSTools.setMouseEnable=function(el,enable){
			var style;
			style=el.style;
			style["pointer-events"]=enable?"auto":"none";
		}

		JSTools.setZIndex=function(el,zIndex){
			var style;
			style=el.style;
			style["z-index"]=zIndex;
		}

		JSTools.showAboveSprite=function(el,sprite,dx,dy){
			(dx===void 0)&& (dx=0);
			(dy===void 0)&& (dy=0);
			var pos;
			pos=new Point();
			pos=sprite.localToGlobal(pos);
			pos.x+=dx;
			pos.y+=dy;
			pos.x+=Laya.stage.offset.x;
			pos.y+=Laya.stage.offset.y;
			JSTools.showToBody(el,pos.x,pos.y);
		}

		JSTools.removeElement=function(el){
			Browser.removeElement(el);
		}

		JSTools.isElementInDom=function(el){
			return el && el.parentNode;
		}

		JSTools.getImageSpriteByFile=function(file,width,height){
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			var reader;
			reader=new FileReader();;
			reader.readAsDataURL(file);
			var sprite;
			sprite=new Sprite();
			reader.onload=function (e){
				var txt;
				txt=new Texture();
				txt.load(reader.result);
				sprite.graphics.drawTexture(txt,0,0,width,height);
			}
			return sprite;
		}

		JSTools.getPixelRatio=function(){
			if (JSTools._pixelRatio > 0)return JSTools._pixelRatio;
			var canvas=Browser.createElement("canvas");
			var context=canvas.getContext('2d');
			var devicePixelRatio=Browser.window.devicePixelRatio || 1;
			var backingStoreRatio=context.webkitBackingStorePixelRatio ||
			context.mozBackingStorePixelRatio ||
			context.msBackingStorePixelRatio ||
			context.oBackingStorePixelRatio ||
			context.backingStorePixelRatio || 1;
			var ratio=devicePixelRatio / backingStoreRatio;
			console.log("pixelRatioc:",ratio);
			JSTools._pixelRatio=ratio;
			return ratio;
		}

		JSTools._pixelRatio=-1;
		return JSTools;
	})()


	/**
	*布局工具类,目前只支持水平方向布局
	*@author ww
	*/
	//class laya.debug.tools.layout.Layouter
	var Layouter=(function(){
		function Layouter(){
			this.data=null;
			this._items=null;
			this.layoutFun=null;
			this._sX=0;
			this._width=0;
		}

		__class(Layouter,'laya.debug.tools.layout.Layouter');
		var __proto=Layouter.prototype;
		__proto.layout=function(){
			this.layoutFun(this._width,this._items,this.data,this._sX);
		}

		/**
		*重新布局
		*
		*/
		__proto.changed=function(){
			Laya.timer.callLater(this,this.layout);
		}

		/**
		*根据当前的对象状态计算位置大小
		*
		*/
		__proto.calSize=function(){
			var i=0,len=0;
			var tItem;
			tItem=this.items[0];
			this._sX=tItem.x;
			var maxX=NaN;
			maxX=this._sX+tItem.width;
			len=this.items.length;
			for (i=1;i < len;i++){
				tItem=this.items[i];
				if (this._sX > tItem.x){
					this._sX=tItem.x;
				}
				if (maxX < tItem.x+tItem.width){
					maxX=tItem.x+tItem.width;
				}
			}
			this._width=maxX-this._sX;
		}

		__getset(0,__proto,'width',function(){
			return this._width;
			},function(v){
			this._width=v;
			this.changed();
		});

		__getset(0,__proto,'x',function(){
			return this._sX;
			},function(v){
			this._sX=v;
			this.changed();
		});

		__getset(0,__proto,'items',function(){
			return this._items;
			},function(arr){
			this._items=arr;
			this.calSize();
		});

		return Layouter;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.layout.LayoutFuns
	var LayoutFuns=(function(){
		function LayoutFuns(){}
		__class(LayoutFuns,'laya.debug.tools.layout.LayoutFuns');
		LayoutFuns.sameWidth=function(totalWidth,items,data,sX){
			(sX===void 0)&& (sX=0);
			var dWidth=0;
			if (data && data.dWidth)
				dWidth=data.dWidth;
			var perWidth=NaN;
			perWidth=(totalWidth-(items.length-1)*dWidth)/ items.length;
			var tItem;
			var i=0,len=0;
			var tX=NaN;
			tX=sX;
			len=items.length;
			for (i=0;i < len;i++){
				tItem=items[i];
				tItem.x=tX;
				tItem.width=perWidth;
				tX+=dWidth+perWidth;
			}
		}

		LayoutFuns.getSameWidthLayout=function(items,dWidth){
			var data;
			data={};
			data.dWidth=dWidth;
			return LayoutFuns.getLayouter(items,data,laya.debug.tools.layout.LayoutFuns.sameWidth);
		}

		LayoutFuns.getLayouter=function(items,data,fun){
			var layouter;
			layouter=new Layouter();
			layouter.items=items;
			layouter.data=data;
			layouter.layoutFun=fun;
			return layouter;
		}

		LayoutFuns.sameDis=function(totalWidth,items,data,sX){
			(sX===void 0)&& (sX=0);
			var dWidth=NaN;
			dWidth=totalWidth;
			var tItem;
			var i=0,len=0;
			len=items.length;
			LayoutFuns.prepareForLayoutWidth(totalWidth,items);
			for (i=0;i < len;i++){
				tItem=items[i];
				dWidth-=tItem.width;
			}
			if (items.length > 1)
				dWidth=dWidth / (items.length-1);
			var tX=NaN;
			tX=sX;
			len=items.length;
			for (i=0;i < len;i++){
				tItem=items[i];
				tItem.x=tX;
				tX+=dWidth+tItem.width;
			}
		}

		LayoutFuns.getSameDisLayout=function(items,rateSame){
			(rateSame===void 0)&& (rateSame=false);
			var data;
			data={};
			if (rateSame){
				var i=0,len=0;
				len=items.length;
				var tItem;
				var totalWidth=NaN;
				totalWidth=0;
				for (i=0;i < len;i++){
					tItem=items[i];
					totalWidth+=tItem.width;
				}
				totalWidth=tItem.x+tItem.width;
				for (i=0;i < len;i++){
					tItem=items[i];
					LayoutFuns.setItemRate(tItem,tItem.width / totalWidth);
				}
			}
			return LayoutFuns.getLayouter(items,data,laya.debug.tools.layout.LayoutFuns.sameDis);
		}

		LayoutFuns.fullFill=function(totalWidth,items,data,sX){
			(sX===void 0)&& (sX=0);
			var dL=0,dR=0;
			if (data){
				if (data.dL)
					dL=data.dL;
				if (data.dR)
					dR=data.dR;
			};
			var item;
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				item=items[i];
				item.x=sX+dL;
				item.width=totalWidth-dL-dR;
			}
		}

		LayoutFuns.getFullFillLayout=function(items,dL,dR){
			(dL===void 0)&& (dL=0);
			(dR===void 0)&& (dR=0);
			var data;
			data={};
			data.dL=dL;
			data.dR=dR;
			return LayoutFuns.getLayouter(items,data,laya.debug.tools.layout.LayoutFuns.fullFill);
		}

		LayoutFuns.fixPos=function(totalWidth,items,data,sX){
			(sX===void 0)&& (sX=0);
			var dLen=0;
			var poss=[];
			var isRate=false;
			if (data){
				if (data.dLen)
					dLen=data.dLen;
				if (data.poss)
					poss=data.poss;
				if (data.isRate)
					isRate=data.isRate;
			};
			var item;
			var i=0,len=0;
			len=poss.length;
			var tX=NaN;
			tX=sX;
			var tValue=NaN;
			var preItem;
			preItem=null;
			for (i=0;i < len;i++){
				item=items[i];
				tValue=sX+poss[i];
				if (isRate){
					tValue=sX+poss[i] *totalWidth;
				}
				item.x=tValue;
				if (preItem){
					preItem.width=item.x-dLen-preItem.x;
				}
				preItem=item;
			};
			var lastItem;
			lastItem=items[items.length-1];
			lastItem.width=sX+totalWidth-dLen-lastItem.x;
		}

		LayoutFuns.getFixPos=function(items,dLen,isRate,poss){
			(dLen===void 0)&& (dLen=0);
			(isRate===void 0)&& (isRate=false);
			var data;
			data={};
			var layout;
			layout=LayoutFuns.getLayouter(items,data,LayoutFuns.fixPos);
			var i=0,len=0;
			var sX=NaN;
			var totalWidth=NaN;
			sX=layout.x;
			totalWidth=layout.width;
			if (!poss){
				poss=[];
				len=items.length;
				var tValue=NaN;
				for (i=0;i < len;i++){
					tValue=items[i].x-sX;
					if (isRate){
						tValue=tValue / totalWidth;
					}
					else{
					}
					poss.push(tValue);
				}
			}
			data.dLen=dLen;
			data.poss=poss;
			data.isRate=isRate;
			return layout;
		}

		LayoutFuns.clearItemsRelativeInfo=function(items){
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				LayoutFuns.clearItemRelativeInfo(items[i]);
			}
		}

		LayoutFuns.clearItemRelativeInfo=function(item){
			var Nan="NaN";
			item.getLayout().left=Nan;
			item.getLayout().right=Nan;
		}

		LayoutFuns.prepareForLayoutWidth=function(totalWidth,items){
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				LayoutFuns.prepareItemForLayoutWidth(totalWidth,items[i]);
			}
		}

		LayoutFuns.getSumWidth=function(items){
			var sum=NaN;
			sum=0;
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				sum+=items[i].width;
			}
			return sum;
		}

		LayoutFuns.prepareItemForLayoutWidth=function(totalWidth,item){
			if (LayoutFuns.getItemRate(item)> 0){
				item.width=totalWidth *LayoutFuns.getItemRate(item);
			}
		}

		LayoutFuns.setItemRate=function(item,rate){
			item["layoutRate"]=rate;
		}

		LayoutFuns.getItemRate=function(item){
			return item["layoutRate"] ? item["layoutRate"] :-1;
		}

		LayoutFuns.setItemFreeSize=function(item,free){
			(free===void 0)&& (free=true);
			item["layoutFreeSize"]=free;
		}

		LayoutFuns.isItemFreeSize=function(item){
			return item["layoutFreeSize"];
		}

		LayoutFuns.lockedDis=function(totalWidth,items,data,sX){
			(sX===void 0)&& (sX=0);
			var dists;
			dists=data.dists;
			var sumDis=NaN;
			sumDis=data.sumDis;
			var sumWidth=NaN;
			var i=0,len=0;
			var tItem;
			var preItem;
			LayoutFuns.prepareForLayoutWidth(totalWidth,items);
			sumWidth=LayoutFuns.getSumWidth(items);
			var dWidth=NaN;
			dWidth=totalWidth-sumDis-sumWidth;
			var freeItem;
			freeItem=LayoutFuns.getFreeItem(items);
			if(freeItem){
				freeItem.width+=dWidth;
			}
			preItem=items[0];
			preItem.x=sX;
			len=items.length;
			for(i=1;i<len;i++){
				tItem=items[i];
				tItem.x=preItem.x+preItem.width+dists[i-1];
				preItem=tItem;
			}
		}

		LayoutFuns.getFreeItem=function(items){
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				if(LayoutFuns.isItemFreeSize(items[i])){
					return items[i];
				}
			}
			return null;
		}

		LayoutFuns.getLockedDis=function(items){
			var data;
			data={};
			var dists;
			var i=0,len=0;
			var tItem;
			var preItem;
			var sumDis=NaN;
			sumDis=0;
			var tDis=NaN;
			preItem=items[0];
			dists=[];
			len=items.length;
			for(i=1;i<len;i++){
				tItem=items[i];
				tDis=tItem.x-preItem.x-preItem.width;
				dists.push(tDis);
				sumDis+=tDis;
				preItem=tItem;
			}
			data.dists=dists;
			data.sumDis=sumDis;
			return LayoutFuns.getLayouter(items,data,laya.debug.tools.layout.LayoutFuns.lockedDis);
		}

		LayoutFuns.RateSign="layoutRate";
		LayoutFuns.FreeSizeSign="layoutFreeSize";
		return LayoutFuns;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-9 下午3:26:01
	*/
	//class laya.debug.tools.LayoutTools
	var LayoutTools=(function(){
		function LayoutTools(){}
		__class(LayoutTools,'laya.debug.tools.LayoutTools');
		LayoutTools.layoutToXCount=function(items,xCount,dx,dY,sx,sy){
			(xCount===void 0)&& (xCount=1);
			(dx===void 0)&& (dx=0);
			(dY===void 0)&& (dY=0);
			(sx===void 0)&& (sx=0);
			(sy===void 0)&& (sy=0);
			var tX=NaN,tY=NaN;
			var tItem;
			var i=0,len=0;
			var tCount=0;
			var maxHeight=0;
			tCount=0;
			maxHeight=0;
			tX=sx;
			tY=sy;
			len=items.length;
			for (i=0;i < len;i++){
				tItem=items[i];
				tItem.x=tX;
				tItem.y=tY;
				if (tItem.height > maxHeight){
					maxHeight=tItem.height;
				}
				tCount++;
				if (tCount >=xCount){
					tCount=tCount % xCount;
					tItem.y+=maxHeight+dY;
					maxHeight=0;
					}else{
					tX+=tItem.width+dx;
				}
			}
		}

		LayoutTools.layoutToWidth=function(items,width,dX,dY,sx,sy){
			var tX=NaN,tY=NaN;
			var tItem;
			var i=0,len=0;
			tX=sx;
			tY=sy;
			len=items.length;
			for(i=0;i<len;i++){
				tItem=items[i];
				if(tX+tItem.width+dX>width){
					tX=sx;
					tY+=dY+tItem.height;
					}else{
				}
				tItem.x=tX;
				tItem.y=tY;
				tX+=dX+tItem.width;
			}
		}

		return LayoutTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.MathTools
	var MathTools=(function(){
		function MathTools(){}
		__class(MathTools,'laya.debug.tools.MathTools');
		MathTools.sortBigFirst=function(a,b){
			if (a==b)
				return 0;
			return b > a ? 1 :-1;
		}

		MathTools.sortSmallFirst=function(a,b){
			if (a==b)
				return 0;
			return b > a ?-1 :1;
		}

		MathTools.sortNumBigFirst=function(a,b){
			return parseFloat(b)-parseFloat(a);
		}

		MathTools.sortNumSmallFirst=function(a,b){
			return parseFloat(a)-parseFloat(b);
		}

		MathTools.sortByKey=function(key,bigFirst,forceNum){
			(bigFirst===void 0)&& (bigFirst=false);
			(forceNum===void 0)&& (forceNum=true);
			var _sortFun;
			if (bigFirst){
				_sortFun=forceNum ? MathTools.sortNumBigFirst :MathTools.sortBigFirst;
				}else {
				_sortFun=forceNum ? MathTools.sortNumSmallFirst :MathTools.sortSmallFirst;
			}
			return function (a,b){
				return _sortFun(a[key],b[key]);
			};
		}

		return MathTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.MouseEventAnalyser
	var MouseEventAnalyser=(function(){
		function MouseEventAnalyser(){}
		__class(MouseEventAnalyser,'laya.debug.tools.MouseEventAnalyser');
		MouseEventAnalyser.analyseNode=function(node){
			DebugTool.showDisBound(node,true);
			var _node;
			_node=node;
			ObjectTools.clearObj(MouseEventAnalyser.infoO);
			ObjectTools.clearObj(MouseEventAnalyser.nodeO);
			ObjectTools.clearObj(MouseEventAnalyser.hitO);
			var nodeList;
			nodeList=[];
			while (node){
				IDTools.idObj(node);
				MouseEventAnalyser.nodeO[IDTools.getObjID(node)]=node;
				nodeList.push(node);
				node=node.parent;
			}
			MouseEventAnalyser.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null);
			var canStr;
			if (MouseEventAnalyser.hitO[IDTools.getObjID(_node)]){
				console.log("can hit");
				canStr="can hit";
			}
			else{
				console.log("can't hit");
				canStr="can't hit";
			};
			var i=0,len=0;
			nodeList=nodeList.reverse();
			len=nodeList.length;
			var rstTxts;
			rstTxts=["[分析对象]:"+ClassTool.getNodeClassAndName(_node)+":"+canStr];
			for (i=0;i < len;i++){
				node=nodeList[i];
				if (MouseEventAnalyser.hitO[IDTools.getObjID(node)]){
					console.log("can hit:",ClassTool.getNodeClassAndName(node));
					console.log("原因:",MouseEventAnalyser.infoO[IDTools.getObjID(node)]);
					rstTxts.push("can hit:"+" "+ClassTool.getNodeClassAndName(node));
					rstTxts.push("原因:"+" "+MouseEventAnalyser.infoO[IDTools.getObjID(node)]);
				}
				else{
					console.log("can't hit:"+ClassTool.getNodeClassAndName(node));
					console.log("原因:",MouseEventAnalyser.infoO[IDTools.getObjID(node)] ? MouseEventAnalyser.infoO[IDTools.getObjID(node)] :"鼠标事件在父级已停止派发");
					rstTxts.push("can't hit:"+" "+ClassTool.getNodeClassAndName(node));
					rstTxts.push("原因:"+" "+(MouseEventAnalyser.infoO[IDTools.getObjID(node)] ? MouseEventAnalyser.infoO[IDTools.getObjID(node)] :"鼠标事件在父级已停止派发"));
				}
			};
			var rstStr;
			rstStr=rstTxts.join("\n");
			ToolPanel.I.showTxtInfo(rstStr);
		}

		MouseEventAnalyser.check=function(sp,mouseX,mouseY,callBack){
			IDTools.idObj(sp);
			var isInAnlyseChain=false;
			isInAnlyseChain=MouseEventAnalyser.nodeO[IDTools.getObjID(sp)];
			MouseEventAnalyser._point.setTo(mouseX,mouseY);
			sp.fromParentPoint(MouseEventAnalyser._point);
			mouseX=MouseEventAnalyser._point.x;
			mouseY=MouseEventAnalyser._point.y;
			var scrollRect=sp.scrollRect;
			if (scrollRect){
				MouseEventAnalyser._rect.setTo(scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height);
				var isHit=MouseEventAnalyser._rect.contains(mouseX,mouseY);
				if (!isHit){
					if (isInAnlyseChain){
						MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="scrollRect没有包含鼠标"+MouseEventAnalyser._rect.toString()+":"+mouseX+","+mouseY;
					}
					return false;
				}
			};
			var i=0,len=0;
			var cList;
			cList=sp._childs;
			len=cList.length;
			var child;
			var childInChain;
			childInChain=null;
			for (i=0;i < len;i++){
				child=cList[i];
				IDTools.idObj(child);
				if (MouseEventAnalyser.nodeO[IDTools.getObjID(child)]){
					childInChain=child;
					break ;
				}
			};
			var coverByOthers=false;
			coverByOthers=childInChain ? true :false;
			var flag=false;
			if (sp.hitTestPrior && !sp.mouseThrough && !MouseEventAnalyser.hitTest(sp,mouseX,mouseY)){
				MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="hitTestPrior=true，宽高区域不包含鼠标:"+":"+mouseX+","+mouseY+" size:"+sp.width+","+sp.height;
				return false;
			}
			for (i=sp._childs.length-1;i >-1;i--){
				child=sp._childs[i];
				if (child==childInChain){
					if (!childInChain.mouseEnabled){
						MouseEventAnalyser.infoO[IDTools.getObjID(childInChain)]="mouseEnabled=false";
					}
					if (!childInChain.visible){
						MouseEventAnalyser.infoO[IDTools.getObjID(childInChain)]="visible=false";
					}
					coverByOthers=false;
				}
				if (child.mouseEnabled && child.visible){
					flag=MouseEventAnalyser.check(child,mouseX ,mouseY,callBack);
					if (flag){
						MouseEventAnalyser.hitO[IDTools.getObjID(sp)]=true;
						MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="子对象被击中";
						if (child==childInChain){
							MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="子对象被击中,"+"击中对象在分析链中";
						}
						else{
							MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="子对象被击中,"+"击中对象不在分析链中";
							if (coverByOthers){
								MouseEventAnalyser.infoO[IDTools.getObjID(childInChain)]="被兄弟节点挡住,兄弟节点信息:"+ClassTool.getNodeClassAndName(child)+","+child.getBounds().toString();
								DebugTool.showDisBound(child,false,"#ffff00");
							}
						}
						return true;
					}
					else{
						if (child==childInChain){
							coverByOthers=false;
						}
					}
				}
			};
			var mHitRect=new Rectangle();
			var graphicHit=false;
			graphicHit=sp.getGraphicBounds().contains(mouseX,mouseY);
			if (sp.width > 0 && sp.height > 0){
				var hitRect=MouseEventAnalyser._rect;
				if (!sp.mouseThrough){
					if (sp.hitArea)
						hitRect=sp.hitArea;
					else
					hitRect.setTo(0,0,sp.width,sp.height);
					mHitRect.copyFrom(hitRect);
					isHit=hitRect.contains(mouseX,mouseY);
				}
				else{
					isHit=graphicHit;
					mHitRect.copyFrom(sp.getGraphicBounds());
				}
				if (isHit){
					MouseEventAnalyser.hitO[IDTools.getObjID(sp)]=true;
				}
				}else{
			}
			if (!isHit){
				if (graphicHit){
					MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="子对象未包含鼠标，实际绘图区域包含鼠标，设置的宽高区域不包含鼠标:"+":"+mouseX+","+mouseY+" hitRec:"+mHitRect.toString()+" graphicBounds:"+sp.getGraphicBounds().toString()+"，设置mouseThrough=true或将宽高设置到实际绘图区域可解决问题";
					}else{
					MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="子对象未包含鼠标，实际绘图区域不包含鼠标，设置的宽高区域不包含鼠标:"+":"+mouseX+","+mouseY+" hitRec:"+mHitRect.toString()+" graphicBounds:"+sp.getGraphicBounds().toString();
				}
			}
			else{
				MouseEventAnalyser.infoO[IDTools.getObjID(sp)]="自身区域被击中";
			}
			return isHit;
		}

		MouseEventAnalyser.hitTest=function(sp,mouseX,mouseY){
			var isHit=false;
			if ((sp.hitArea instanceof laya.utils.HitArea )){
				return sp.hitArea.isHit(mouseX,mouseY);
			}
			if (sp.width > 0 && sp.height > 0 || sp.mouseThrough || sp.hitArea){
				var hitRect=MouseEventAnalyser._rect;
				if (!sp.mouseThrough){
					if (sp.hitArea)hitRect=sp.hitArea;
					else hitRect.setTo(0,0,sp.width,sp.height);
					isHit=hitRect.contains(mouseX,mouseY);
					}else {
					isHit=sp.getGraphicBounds().contains(mouseX,mouseY);
				}
			}
			return isHit;
		}

		MouseEventAnalyser.infoO={};
		MouseEventAnalyser.nodeO={};
		MouseEventAnalyser.hitO={};
		__static(MouseEventAnalyser,
		['_matrix',function(){return this._matrix=new Matrix();},'_point',function(){return this._point=new Point();},'_rect',function(){return this._rect=new Rectangle();}
		]);
		return MouseEventAnalyser;
	})()


	/**
	*本类提供obj相关的一些操作
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-21 下午2:03:36
	*/
	//class laya.debug.tools.ObjectTools
	var ObjectTools=(function(){
		function ObjectTools(){}
		__class(ObjectTools,'laya.debug.tools.ObjectTools');
		ObjectTools.getFlatKey=function(tKey,aKey){
			if(tKey=="")return aKey;
			return tKey+ObjectTools.sign+aKey;
		}

		ObjectTools.flatObj=function(obj,rst,tKey){
			(tKey===void 0)&& (tKey="");
			rst=rst?rst:{};
			var key;
			var tValue;
			for(key in obj){
				if((typeof (obj[key])=='object')){
					ObjectTools.flatObj(obj[key],rst,ObjectTools.getFlatKey(tKey,key));
					}else{
					tValue=obj[key];
					rst[ObjectTools.getFlatKey(tKey,key)]=obj[key];
				}
			}
			return rst;
		}

		ObjectTools.recoverObj=function(obj){
			var rst={};
			var tKey;
			for(tKey in obj){
				ObjectTools.setKeyValue(rst,tKey,obj[tKey]);
			}
			return rst;
		}

		ObjectTools.differ=function(objA,objB){
			var tKey;
			var valueA;
			var valueB;
			objA=ObjectTools.flatObj(objA);
			objB=ObjectTools.flatObj(objB);
			var rst={};
			for(tKey in objA){
				if(!objB.hasOwnProperty(tKey)){
					rst[tKey]="被删除";
				}
			}
			for(tKey in objB){
				if(objB[tKey]!=objA[tKey]){
					rst[tKey]={"pre":objA[tKey],"now":objB[tKey]};
				}
			}
			return rst;
		}

		ObjectTools.traceDifferObj=function(obj){
			var key;
			var tO;
			for(key in obj){
				if((typeof (obj[key])=='string')){
					console.log(key+":",obj[key]);
					}else{
					tO=obj[key];
					console.log(key+":","now:",tO["now"],"pre:",tO["pre"]);
				}
			}
		}

		ObjectTools.setKeyValue=function(obj,flatKey,value){
			if(flatKey.indexOf(ObjectTools.sign)>=0){
				var keys=flatKey.split(ObjectTools.sign);
				var tKey;
				while(keys.length>1){
					tKey=keys.shift();
					if(!obj[tKey]){
						obj[tKey]={};
						console.log("addKeyObj:",tKey);
					}
					obj=obj[tKey];
					if(!obj){
						console.log("wrong flatKey:",flatKey);
						return;
					}
				}
				obj[keys.shift()]=value;
				}else{
				obj[flatKey]=value;
			}
		}

		ObjectTools.clearObj=function(obj){
			var key;
			for (key in obj){
				delete obj[key];
			}
		}

		ObjectTools.copyObjFast=function(obj){
			var jsStr;
			jsStr=laya.debug.tools.ObjectTools.getJsonString(obj);
			return laya.debug.tools.ObjectTools.getObj(jsStr);
		}

		ObjectTools.copyObj=function(obj){
			if((obj instanceof Array))return ObjectTools.copyArr(obj);
			var rst={};
			var key;
			for(key in obj){
				if(obj[key]===null||obj[key]===undefined){
					rst[key]=obj[key];
				}else
				if(((obj[key])instanceof Array)){
					rst[key]=ObjectTools.copyArr(obj[key]);
				}
				else
				if((typeof (obj[key])=='object')){
					rst[key]=ObjectTools.copyObj(obj[key]);
					}else{
					rst[key]=obj[key];
				}
			}
			return rst;
		}

		ObjectTools.copyArr=function(arr){
			var rst;
			rst=[];
			var i=0,len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				rst.push(ObjectTools.copyObj(arr[i]));
			}
			return rst;
		}

		ObjectTools.concatArr=function(src,a){
			if (!a)return src;
			if (!src)return a;
			var i=0,len=a.length;
			for (i=0;i < len;i++){
				src.push(a[i]);
			}
			return src;
		}

		ObjectTools.insertArrToArr=function(src,insertArr,pos){
			(pos===void 0)&& (pos=0);
			if (pos < 0)pos=0;
			if (pos > src.length)pos=src.length;
			var preLen=src.length;
			var i=0,len=0;
			src.length+=insertArr.length;
			var moveLen=0;
			moveLen=insertArr.length;
			for (i=src.length-1;i >=pos;i--){
				src[i]=src[i-moveLen];
			}
			len=insertArr.length;
			for (i=0;i < len;i++){
				src[pos+i]=insertArr[i];
			}
			return src;
		}

		ObjectTools.clearArr=function(arr){
			if (!arr)return arr;
			arr.length=0;
			return arr;
		}

		ObjectTools.removeFromArr=function(arr,item){
			var i=0,len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				if(arr[i]==item){
					arr[i].splice(i,1);
					return;
				}
			}
		}

		ObjectTools.setValueArr=function(src,v){
			src || (src=[]);
			src.length=0;
			return ObjectTools.concatArr(src,v);
		}

		ObjectTools.getFrom=function(rst,src,count){
			var i=0;
			for (i=0;i < count;i++){
				rst.push(src[i]);
			}
			return rst;
		}

		ObjectTools.getFromR=function(rst,src,count){
			var i=0;
			for (i=0;i < count;i++){
				rst.push(src.pop());
			}
			return rst;
		}

		ObjectTools.enableDisplayTree=function(dis){
			while (dis){
				dis.mouseEnabled=true;
				dis=dis.parent;
			}
		}

		ObjectTools.getJsonString=function(obj){
			var rst;
			rst=JSON.stringify(obj);
			return rst;
		}

		ObjectTools.getObj=function(jsonStr){
			var rst;
			rst=JSON.parse(jsonStr);
			return rst;
		}

		ObjectTools.getKeyArr=function(obj){
			var rst;
			var key;
			rst=[];
			for(key in obj){
				rst.push(key);
			}
			return rst;
		}

		ObjectTools.getObjValues=function(dataList,key){
			var rst;
			var i=0,len=0;
			len=dataList.length;
			rst=[];
			for(i=0;i<len;i++){
				rst.push(dataList[i][key]);
			}
			return rst;
		}

		ObjectTools.hasKeys=function(obj,keys){
			var i=0,len=0;
			len=keys.length;
			for(i=0;i<len;i++){
				if(!obj.hasOwnProperty(keys[i]))return false;
			}
			return true;
		}

		ObjectTools.copyValueByArr=function(tar,src,keys){
			var i=0,len=keys.length;
			for(i=0;i<len;i++){
				if(!(src[keys[i]]===null))
					tar[keys[i]]=src[keys[i]];
			}
		}

		ObjectTools.getNoSameArr=function(arr){
			var i=0,len=0;
			var rst;
			rst=[];
			var tItem;
			len=arr.length;
			for (i=0;i < len;i++){
				tItem=arr[i];
				if (rst.indexOf(tItem)< 0){
					rst.push(tItem);
				}
			}
			return rst;
		}

		ObjectTools.insertValue=function(tar,src){
			var key;
			for (key in src){
				tar[key]=src[key];
			}
		}

		ObjectTools.replaceValue=function(obj,replaceO){
			var key;
			for(key in obj){
				if(replaceO.hasOwnProperty(obj[key])){
					obj[key]=replaceO[obj[key]];
				}
				if((typeof (obj[key])=='object')){
					ObjectTools.replaceValue(obj[key],replaceO);
				}
			}
		}

		ObjectTools.setKeyValues=function(items,key,value){
			var i=0,len=0;
			len=items.length;
			for(i=0;i<len;i++){
				items[i][key]=value;
			}
		}

		ObjectTools.findItemPos=function(items,sign,value){
			var i=0,len=0;
			len=items.length;
			for(i=0;i<len;i++){
				if(items[i][sign]==value){
					return i;
				}
			}
			return-1;
		}

		ObjectTools.setObjValue=function(obj,key,value){
			obj[key]=value;
			return obj;
		}

		ObjectTools.setAutoTypeValue=function(obj,key,value){
			if(obj.hasOwnProperty(key)){
				if(ObjectTools.isNumber(obj[key])){
					obj[key]=parseFloat(value);
					}else{
					obj[key]=value;
				}
				}else{
				obj[key]=value;
			}
			return obj;
		}

		ObjectTools.getAutoValue=function(value){
			if (parseFloat(value)==value)return parseFloat(value);
			return value;
		}

		ObjectTools.isNumber=function(value){
			return (parseFloat(value)==value);
		}

		ObjectTools.isNaNS=function(value){
			return (value.toString()=="NaN");
		}

		ObjectTools.isNaN=function(value){
			if(typeof(value)=="number")return false;
			if(typeof(value)=="string"){
				if(parseFloat(value).toString()!="NaN"){
					if(parseFloat(value)==value){
						return false;
					}
				}
			}
			return true;
		}

		ObjectTools.getStrTypedValue=function(value){
			if(value=="false"){
				return false;
			}else
			if(value=="true"){
				return true;
			}else
			if(value=="null"){
				return null;
			}else
			if(value=="undefined"){
				return null;
				}else{
				return ObjectTools.getAutoValue(value);
			}
		}

		ObjectTools.createKeyValueDic=function(dataList,keySign){
			var rst;
			rst={};
			var i=0,len=0;
			len=dataList.length;
			var tItem;
			var tKey;
			for(i=0;i<len;i++){
				tItem=dataList[i];
				tKey=tItem[keySign];
				rst[tKey]=tItem;
			}
			return rst;
		}

		ObjectTools.sign="_";
		return ObjectTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.ObjTimeCountTool
	var ObjTimeCountTool=(function(){
		function ObjTimeCountTool(){
			this.timeDic={};
			this.resultDic={};
			this.countDic={};
			this.resultCountDic={};
			this.nodeDic={};
			this.resultNodeDic={};
		}

		__class(ObjTimeCountTool,'laya.debug.tools.ObjTimeCountTool');
		var __proto=ObjTimeCountTool.prototype;
		__proto.addTime=function(sprite,time){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			if (!this.timeDic.hasOwnProperty(key)){
				this.timeDic[key]=0;
			}
			this.timeDic[key]=this.timeDic[key]+time;
			if (!this.countDic.hasOwnProperty(key)){
				this.countDic[key]=0;
			}
			this.countDic[key]=this.countDic[key]+1;
			this.nodeDic[key]=sprite;
		}

		__proto.getTime=function(sprite){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			if (!this.resultDic[key])return 0;
			return this.resultDic[key];
		}

		__proto.getCount=function(sprite){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			return this.resultCountDic[key];
		}

		__proto.reset=function(){
			var key;
			for (key in this.timeDic){
				this.timeDic[key]=0;
				this.countDic[key]=0;
			}
			ObjectTools.clearObj(this.nodeDic);
		}

		__proto.updates=function(){
			ObjectTools.clearObj(this.resultDic);
			ObjectTools.insertValue(this.resultDic,this.timeDic);
			ObjectTools.clearObj(this.resultCountDic);
			ObjectTools.insertValue(this.resultCountDic,this.countDic);
			ObjectTools.insertValue(this.resultNodeDic,this.nodeDic);
			this.reset();
		}

		return ObjTimeCountTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-23 下午12:00:48
	*/
	//class laya.debug.tools.RecInfo
	var RecInfo=(function(){
		function RecInfo(){
			this.oX=0;
			this.oY=0;
			this.hX=1;
			this.hY=0;
			this.vX=0;
			this.vY=1;
		}

		__class(RecInfo,'laya.debug.tools.RecInfo');
		var __proto=RecInfo.prototype;
		__proto.initByPoints=function(oPoint,ePoint,vPoint){
			this.oX=oPoint.x;
			this.oY=oPoint.y;
			this.hX=ePoint.x;
			this.hY=ePoint.y;
			this.vX=vPoint.x;
			this.vY=vPoint.y;
		}

		__getset(0,__proto,'rotation',function(){
			return this.rotationRad/Math.PI*180;
		});

		__getset(0,__proto,'width',function(){
			return Math.sqrt((this.hX-this.oX)*(this.hX-this.oX)+(this.hY-this.oY)*(this.hY-this.oY));
		});

		__getset(0,__proto,'x',function(){
			return this.oX;
		});

		__getset(0,__proto,'rotationRadV',function(){
			var dx=this.vX-this.oX;
			var dy=this.vY-this.oY;
			return Math.atan2(dy,dx);
		});

		__getset(0,__proto,'y',function(){
			return this.oY;
		});

		__getset(0,__proto,'rotationRad',function(){
			var dx=this.hX-this.oX;
			var dy=this.hY-this.oY;
			return Math.atan2(dy,dx);
		});

		__getset(0,__proto,'height',function(){
			return Math.sqrt((this.vX-this.oX)*(this.vX-this.oX)+(this.vY-this.oY)*(this.vY-this.oY));
		});

		__getset(0,__proto,'rotationV',function(){
			return this.rotationRadV/Math.PI*180;
		});

		RecInfo.createByPoints=function(oPoint,ePoint,vPoint){
			var rst;
			rst=new RecInfo();
			rst.initByPoints(oPoint,ePoint,vPoint);
			return rst;
		}

		RecInfo.getGlobalPoints=function(sprite,x,y){
			return sprite.localToGlobal(new Point(x,y));
		}

		RecInfo.getGlobalRecInfo=function(sprite,x0,y0,x1,y1,x2,y2){
			(x0===void 0)&& (x0=0);
			(y0===void 0)&& (y0=0);
			(x1===void 0)&& (x1=1);
			(y1===void 0)&& (y1=0);
			(x2===void 0)&& (x2=0);
			(y2===void 0)&& (y2=1);
			return RecInfo.createByPoints(RecInfo.getGlobalPoints(sprite,x0,y0),RecInfo.getGlobalPoints(sprite,x1,y1),RecInfo.getGlobalPoints(sprite,x2,y2));
		}

		return RecInfo;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.RenderAnalyser
	var RenderAnalyser=(function(){
		function RenderAnalyser(){
			this.timeDic={};
			this.resultDic={};
			this.countDic={};
			this.resultCountDic={};
			this.nodeDic={};
			this.isWorking=false;
			this.working=true;
		}

		__class(RenderAnalyser,'laya.debug.tools.RenderAnalyser');
		var __proto=RenderAnalyser.prototype;
		__proto.render=function(sprite,time){
			this.addTime(sprite,time);
		}

		__proto.addTime=function(sprite,time){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			if (!this.timeDic.hasOwnProperty(key)){
				this.timeDic[key]=0;
			}
			this.timeDic[key]=this.timeDic[key]+time;
			if (!this.countDic.hasOwnProperty(key)){
				this.countDic[key]=0;
			}
			this.countDic[key]=this.countDic[key]+1;
			this.nodeDic[key]=sprite;
		}

		__proto.getTime=function(sprite){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			if (!this.resultDic[key])return 0;
			return this.resultDic[key];
		}

		__proto.getCount=function(sprite){
			IDTools.idObj(sprite);
			var key=0;
			key=IDTools.getObjID(sprite);
			return this.resultCountDic[key];
		}

		__proto.reset=function(){
			var key;
			for (key in this.timeDic){
				this.timeDic[key]=0;
				this.countDic[key]=0;
			}
			ObjectTools.clearObj(this.nodeDic);
		}

		__proto.updates=function(){
			ObjectTools.clearObj(this.resultDic);
			ObjectTools.insertValue(this.resultDic,this.timeDic);
			ObjectTools.clearObj(this.resultCountDic);
			ObjectTools.insertValue(this.resultCountDic,this.countDic);
			this.reset();
		}

		__getset(0,__proto,'working',null,function(v){
			this.isWorking=v;
			if (v){
				Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.updates);
				}else{
				Laya.timer.clear(this,this.updates);
			}
		});

		__static(RenderAnalyser,
		['I',function(){return this.I=new RenderAnalyser();}
		]);
		return RenderAnalyser;
	})()


	/**
	*本类用于调整对象的宽高以及坐标
	*@author ww
	*/
	//class laya.debug.tools.resizer.DisResizer
	var DisResizer=(function(){
		function DisResizer(){}
		__class(DisResizer,'laya.debug.tools.resizer.DisResizer');
		DisResizer.init=function(){
			if (DisResizer._up)return;
			DisResizer._up=new AutoFillRec("T");
			DisResizer._up.height=2;
			DisResizer._up.type=0;
			DisResizer._down=new AutoFillRec("T");
			DisResizer._down.height=2;
			DisResizer._down.type=0;
			DisResizer._left=new AutoFillRec("R");
			DisResizer._left.width=2;
			DisResizer._left.type=1;
			DisResizer._right=new AutoFillRec("R");
			DisResizer._right.width=2;
			DisResizer._right.type=1;
			DisResizer._barList=[DisResizer._up,DisResizer._down,DisResizer._left,DisResizer._right];
			DisResizer.addEvent();
		}

		DisResizer.stageDown=function(e){
			var target;
			target=e.target;
			if (DisResizer._tar && DisControlTool.isInTree(DisResizer._tar,target)){
				return;
			}
			DisResizer.clear();
		}

		DisResizer.clear=function(){
			DisResizer._tar=null;
			Laya.stage.off("mouseup",null,DisResizer.stageDown);
			DisControlTool.removeItems(DisResizer._barList);
			DisResizer.clearDragEvents();
		}

		DisResizer.addEvent=function(){
			var i=0,len=0;
			var tBar;
			len=DisResizer._barList.length;
			for (i=0;i < len;i++){
				tBar=DisResizer._barList[i];
				tBar.on("mousedown",null,DisResizer.barDown);
			}
		}

		DisResizer.barDown=function(e){
			DisResizer.clearDragEvents();
			DisResizer.tBar=e.target;
			if (!DisResizer.tBar)return;
			var area;
			area=new Rectangle();
			if (DisResizer.tBar.type==0){
				area.x=DisResizer.tBar.x;
				area.width=0;
				area.y=DisResizer.tBar.y-200;
				area.height=400;
				}else{
				area.x=DisResizer.tBar.x-200;
				area.width=400;
				area.y=0;
				area.height=0;
			};
			var option;
			option={};
			option.area=area;
			DisResizer.tBar.record();
			DisResizer.tBar.startDrag(area);
			DisResizer.tBar.on("dragmove",null,DisResizer.draging);
			DisResizer.tBar.on("dragend",null,DisResizer.dragEnd);
		}

		DisResizer.draging=function(e){
			console.log("draging");
			if (!DisResizer.tBar)return;
			if (!DisResizer._tar)return;
			switch(DisResizer.tBar){
				case DisResizer._left:
					DisResizer._tar.x+=DisResizer.tBar.getDx();
					DisResizer._tar.width-=DisResizer.tBar.getDx();
					DisResizer._up.width-=DisResizer.tBar.getDx();
					DisResizer._down.width-=DisResizer.tBar.getDx();
					DisResizer._right.x-=DisResizer.tBar.getDx();
					DisResizer.tBar.x-=DisResizer.tBar.getDx();
					break ;
				case DisResizer._right:
					DisResizer._tar.width+=DisResizer.tBar.getDx();
					DisResizer._up.width+=DisResizer.tBar.getDx();
					DisResizer._down.width+=DisResizer.tBar.getDx();
					break ;
				case DisResizer._up:
					DisResizer._tar.y+=DisResizer.tBar.getDy();
					DisResizer._tar.height-=DisResizer.tBar.getDy();
					DisResizer._right.height-=DisResizer.tBar.getDy();
					DisResizer._left.height-=DisResizer.tBar.getDy();
					DisResizer._down.y-=DisResizer.tBar.getDy();
					DisResizer.tBar.y-=DisResizer.tBar.getDy();
					break ;
				case DisResizer._down:
					DisResizer._tar.height+=DisResizer.tBar.getDy();
					DisResizer._right.height+=DisResizer.tBar.getDy();
					DisResizer._left.height+=DisResizer.tBar.getDy();
					break ;
				}
			DisResizer.tBar.record();
		}

		DisResizer.dragEnd=function(e){
			console.log("dragEnd");
			DisResizer.clearDragEvents();
			DisResizer.updates();
		}

		DisResizer.clearDragEvents=function(){
			if (!DisResizer.tBar)return;
			DisResizer.tBar.off("dragmove",null,DisResizer.draging);
			DisResizer.tBar.off("dragend",null,DisResizer.dragEnd);
		}

		DisResizer.setUp=function(dis,force){
			(force===void 0)&& (force=false);
			if (force && dis==DisResizer._tar){
				return;
			};
			DisControlTool.removeItems(DisResizer._barList);
			if (DisResizer._tar==dis){
				DisResizer._tar=null;
				DisResizer.clearDragEvents();
				if(!force)
					return;
			}
			DisResizer._tar=dis;
			DisResizer.updates();
			DisControlTool.addItems(DisResizer._barList,dis);
			Laya.stage.off("mouseup",null,DisResizer.stageDown);
			Laya.stage.on("mouseup",null,DisResizer.stageDown);
		}

		DisResizer.updates=function(){
			var dis;
			dis=DisResizer._tar;
			if(!dis)return;
			var bounds;
			bounds=new Rectangle(0,0,dis.width,dis.height);
			DisResizer._up.x=bounds.x;
			DisResizer._up.y=bounds.y;
			DisResizer._up.width=bounds.width;
			DisResizer._down.x=bounds.x;
			DisResizer._down.y=bounds.y+bounds.height-2;
			DisResizer._down.width=bounds.width;
			DisResizer._left.x=bounds.x;
			DisResizer._left.y=bounds.y;
			DisResizer._left.height=bounds.height;
			DisResizer._right.x=bounds.x+bounds.width-2;
			DisResizer._right.y=bounds.y;
			DisResizer._right.height=bounds.height;
		}

		DisResizer.Side=2;
		DisResizer.Vertical=1;
		DisResizer.Horizon=0;
		DisResizer._up=null
		DisResizer._down=null
		DisResizer._left=null
		DisResizer._right=null
		DisResizer._barList=null
		DisResizer._tar=null
		DisResizer.barWidth=2;
		DisResizer.useGetBounds=false;
		DisResizer.tBar=null
		return DisResizer;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.resizer.SimpleResizer
	var SimpleResizer=(function(){
		function SimpleResizer(){}
		__class(SimpleResizer,'laya.debug.tools.resizer.SimpleResizer');
		SimpleResizer.setResizeAble=function(clickItem,tar,minWidth,minHeight){
			(minWidth===void 0)&& (minWidth=150);
			(minHeight===void 0)&& (minHeight=150);
			clickItem.on("mousedown",null,SimpleResizer.onMouseDown,[tar,minWidth,minHeight]);
		}

		SimpleResizer.onMouseDown=function(tar,minWidth,minHeight,e){
			SimpleResizer.clearEvents();
			if (!tar)return;
			SimpleResizer.preMousePoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			SimpleResizer.preTarSize.setTo(tar.width,tar.height);
			SimpleResizer.preScale.setTo(1,1);
			var rTar;
			rTar=tar;
			while (rTar&&rTar!=Laya.stage){
				SimpleResizer.preScale.x *=rTar.scaleX;
				SimpleResizer.preScale.y *=rTar.scaleY;
				rTar=rTar.parent;
			}
			Laya.stage.on("mouseup",null,SimpleResizer.onMouseMoveEnd);
			Laya.timer.loop(100,null,SimpleResizer.onMouseMoving,[tar,minWidth,minHeight]);
		}

		SimpleResizer.onMouseMoving=function(tar,minWidth,minHeight,e){
			var tWidth=(Laya.stage.mouseX-SimpleResizer.preMousePoint.x)/ SimpleResizer.preScale.x+SimpleResizer.preTarSize.x;
			var tHeight=(Laya.stage.mouseY-SimpleResizer.preMousePoint.y)/SimpleResizer.preScale.y+SimpleResizer.preTarSize.y;
			tar.width=tWidth > minWidth?tWidth:minWidth;
			tar.height=tHeight>minHeight?tHeight:minHeight;
		}

		SimpleResizer.onMouseMoveEnd=function(e){
			SimpleResizer.clearEvents();
		}

		SimpleResizer.clearEvents=function(){
			Laya.timer.clear(null,SimpleResizer.onMouseMoving);
			Laya.stage.off("mouseup",null,SimpleResizer.onMouseMoveEnd);
		}

		__static(SimpleResizer,
		['preMousePoint',function(){return this.preMousePoint=new Point();},'preTarSize',function(){return this.preTarSize=new Point();},'preScale',function(){return this.preScale=new Point();}
		]);
		return SimpleResizer;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.ResTools
	var ResTools=(function(){
		function ResTools(){}
		__class(ResTools,'laya.debug.tools.ResTools');
		ResTools.getCachedResList=function(){
			if (Render.isWebGL){
				return ResTools.getWebGlResList();
				}else{
				return ResTools.getCanvasResList();
			}
		}

		ResTools.getWebGlResList=function(){
			var rst;
			rst=[];
			var tResource;
			var _resources;
			_resources=ResourceManager.currentResourceManager["_resources"];
			for(var i=0;i <_resources.length;i++){
				tResource=_resources[i];
				if(ClassTool.getClassName(tResource)=="WebGLImage"){
					var url=tResource["src"];
					if(url&&url.indexOf("data:image/png;base64")<0)
						rst.push(url);
				}
			}
			return rst;
		}

		ResTools.getCanvasResList=function(){
			var picDic;
			picDic={};
			var dataO;
			dataO=Loader.loadedMap;
			ResTools.collectPics(dataO,picDic);
			return ResTools.getArrFromDic(picDic);
		}

		ResTools.getArrFromDic=function(dic){
			var key;
			var rst;
			rst=[];
			for (key in dic){
				rst.push(key);
			}
			return rst;
		}

		ResTools.collectPics=function(dataO,picDic){
			if (!dataO)return;
			var key;
			var tTexture;
			for (key in dataO){
				tTexture=dataO[key];
				if (tTexture){
					if (tTexture.bitmap&&tTexture.bitmap.src){
						var url=tTexture.bitmap.src;
						if(url.indexOf("data:image/png;base64")<0)
							picDic[tTexture.bitmap.src]=true;
					}
				}
			}
		}

		return ResTools;
	})()


	/**
	*类实例创建分析工具
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-25 下午3:31:46
	*/
	//class laya.debug.tools.RunProfile
	var RunProfile=(function(){
		function RunProfile(){}
		__class(RunProfile,'laya.debug.tools.RunProfile');
		RunProfile.run=function(funName,callLen){
			(callLen===void 0)&& (callLen=3);
			var tCount;
			if(!RunProfile.infoDic.hasOwnProperty(funName)){
				RunProfile.infoDic[funName]=new CountTool();
			}
			tCount=RunProfile.infoDic[funName];
			var msg;
			msg=TraceTool.getCallLoc(callLen)+"\n"+TraceTool.getCallStack(1,callLen-3);
			tCount.add(msg);
			if(RunProfile._runShowDic[funName]){
				console.log("Create:"+funName);
				console.log(msg);
			}
		}

		RunProfile.showClassCreate=function(funName){
			RunProfile._runShowDic[funName]=true;
		}

		RunProfile.hideClassCreate=function(funName){
			RunProfile._runShowDic[funName]=false;
		}

		RunProfile.getRunInfo=function(funName){
			var rst;
			rst=RunProfile.infoDic[funName];
			if(rst){
			}
			return RunProfile.infoDic[funName];
		}

		RunProfile.runTest=function(fun,count,sign){
			(sign===void 0)&& (sign="runTest");
			DTrace.timeStart(sign);
			var i=0;
			for(i=0;i<count;i++){
				fun();
			}
			DTrace.timeEnd(sign);
		}

		RunProfile.infoDic={};
		RunProfile._runShowDic={};
		return RunProfile;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-24 下午6:07:30
	*/
	//class laya.debug.tools.SingleTool
	var SingleTool=(function(){
		function SingleTool(){
			this._objDic={};
		}

		__class(SingleTool,'laya.debug.tools.SingleTool');
		var __proto=SingleTool.prototype;
		__proto.getArr=function(sign){
			var dic;
			dic=this.getTypeDic("Array");
			if(!dic[sign])dic[sign]=[];
			return dic[sign];
		}

		__proto.getObject=function(sign){
			var dic;
			dic=this.getTypeDic("Object");
			if(!dic[sign])dic[sign]={};
			return dic[sign];
		}

		__proto.getByClass=function(sign,clzSign,clz){
			var dic;
			dic=this.getTypeDic(clzSign);
			if(!dic[sign])dic[sign]=new clz();
			return dic[sign];
		}

		__proto.getTypeDic=function(type){
			if(!this._objDic[type])this._objDic[type]={};
			return this._objDic[type];
		}

		__static(SingleTool,
		['I',function(){return this.I=new SingleTool();}
		]);
		return SingleTool;
	})()


	/**
	*一些字符串操作函数
	*@author ww
	*
	*/
	//class laya.debug.tools.StringTool
	var StringTool=(function(){
		function StringTool(){}
		__class(StringTool,'laya.debug.tools.StringTool');
		StringTool.toUpCase=function(str){
			return str.toUpperCase();
		}

		StringTool.toLowCase=function(str){
			return str.toLowerCase();
		}

		StringTool.toUpHead=function(str){
			var rst;
			if(str.length<=1)return str.toUpperCase();
			rst=str.charAt(0).toUpperCase()+str.substr(1);
			return rst;
		}

		StringTool.toLowHead=function(str){
			var rst;
			if(str.length<=1)return str.toLowerCase();
			rst=str.charAt(0).toLowerCase()+str.substr(1);
			return rst;
		}

		StringTool.packageToFolderPath=function(packageName){
			var rst;
			rst=packageName.replace(".","/");
			return rst;
		}

		StringTool.insert=function(str,iStr,index){
			return str.substring(0,index)+iStr+str.substr(index);
		}

		StringTool.insertAfter=function(str,iStr,tarStr,isLast){
			(isLast===void 0)&& (isLast=false);
			var i=0;
			if(isLast){
				i=str.lastIndexOf(tarStr);
				}else{
				i=str.indexOf(tarStr);
			}
			if(i>=0){
				return StringTool.insert(str,iStr,i+tarStr.length);
			}
			return str;
		}

		StringTool.insertBefore=function(str,iStr,tarStr,isLast){
			(isLast===void 0)&& (isLast=false);
			var i=0;
			if(isLast){
				i=str.lastIndexOf(tarStr);
				}else{
				i=str.indexOf(tarStr);
			}
			if(i>=0){
				return StringTool.insert(str,iStr,i);
			}
			return str;
		}

		StringTool.insertParamToFun=function(funStr,params){
			var oldParam;
			oldParam=StringTool.getParamArr(funStr);
			var inserStr;
			inserStr=params.join(",");
			if(oldParam.length>0){
				inserStr=","+inserStr;
			}
			return StringTool.insertBefore(funStr,inserStr,")",true);
		}

		StringTool.trim=function(str,vList){
			if(!vList){
				vList=[" ","\r","\n","\t",String.fromCharCode(65279)];
			};
			var rst;
			var i=0;
			var len=0;
			rst=str;
			len=vList.length;
			for(i=0;i<len;i++){
				rst=StringTool.getReplace(rst,vList[i],"");
			}
			return rst;
		}

		StringTool.isEmpty=function(str){
			if(str.length<1)return true;
			return StringTool.emptyStrDic.hasOwnProperty(str);
		}

		StringTool.trimLeft=function(str){
			var i=0;
			i=0;
			var len=0;
			len=str.length;
			while(StringTool.isEmpty(str.charAt(i))&&i<len){
				i++;
			}
			if(i<len){
				return str.substr(i);
			}
			return "";
		}

		StringTool.trimRight=function(str){
			var i=0;
			i=str.length-1;
			while(StringTool.isEmpty(str.charAt(i))&&i>=0){
				i--;
			};
			var rst;
			rst=str.substring(0,i)
			if(i>=0){
				return str.substring(0,i+1);
			}
			return "";
		}

		StringTool.trimSide=function(str){
			var rst;
			rst=StringTool.trimLeft(str);
			rst=StringTool.trimRight(rst);
			return rst;
		}

		StringTool.isOkFileName=function(fileName){
			if(laya.debug.tools.StringTool.trimSide(fileName)=="")return false;
			var i=0,len=0;
			len=fileName.length;
			for(i=0;i<len;i++){
				if(StringTool.specialChars[fileName.charAt(i)])return false;
			}
			return true;
		}

		StringTool.trimButEmpty=function(str){
			return StringTool.trim(str,["\r","\n","\t"]);
		}

		StringTool.removeEmptyStr=function(strArr){
			var i=0;
			i=strArr.length-1;
			var str;
			for(i=i;i>=0;i--){
				str=strArr[i];
				str=laya.debug.tools.StringTool.trimSide(str);
				if(StringTool.isEmpty(str)){
					strArr.splice(i,1);
					}else{
					strArr[i]=str;
				}
			}
			return strArr;
		}

		StringTool.ifNoAddToTail=function(str,sign){
			if(str.indexOf(sign)>=0){
				return str;
			}
			return str+sign;
		}

		StringTool.trimEmptyLine=function(str){
			var i=0;
			var len=0;
			var tLines;
			var tLine;
			tLines=str.split("\n");
			for(i=tLines.length-1;i>=0;i--){
				tLine=tLines[i];
				if(StringTool.isEmptyLine(tLine)){
					tLines.splice(i,1);
				}
			}
			return tLines.join("\n");
		}

		StringTool.isEmptyLine=function(str){
			str=laya.debug.tools.StringTool.trim(str);
			if(str=="")return true;
			return false;
		}

		StringTool.removeCommentLine=function(lines){
			var rst;
			rst=[];
			var i=0;
			var tLine;
			var adptLine;
			i=0;
			var len=0;
			var index=0;
			len=lines.length;
			while(i<len){
				adptLine=tLine=lines[i];
				index=tLine.indexOf("/**");
				if(index>=0){
					adptLine=tLine.substring(0,index-1);
					StringTool.addIfNotEmpty(rst,adptLine);
					while(i<len){
						tLine=lines[i];
						index=tLine.indexOf("*/");
						if(index>=0){
							adptLine=tLine.substring(index+2);
							StringTool.addIfNotEmpty(rst,adptLine);
							break ;
						}
						i++;
					}
					}else if(tLine.indexOf("//")>=0){
					if(laya.debug.tools.StringTool.trim(tLine).indexOf("//")==0){
						}else{
						StringTool.addIfNotEmpty(rst,adptLine);
					}
					}else{
					StringTool.addIfNotEmpty(rst,adptLine);
				}
				i++;
			}
			return rst;
		}

		StringTool.addIfNotEmpty=function(arr,str){
			if(!str)return;
			var tStr;
			tStr=StringTool.trim(str);
			if(tStr!=""){
				arr.push(str);
			}
		}

		StringTool.trimExt=function(str,vars){
			var rst;
			rst=StringTool.trim(str);
			var i=0;
			var len=0;
			len=vars.length;
			for(i=0;i<len;i++){
				rst=StringTool.getReplace(rst,vars[i],"");
			}
			return rst;
		}

		StringTool.getBetween=function(str,left,right,ifMax){
			(ifMax===void 0)&& (ifMax=false);
			if(!str)return "";
			if(!left)return "";
			if(!right)return "";
			var lId=0;
			var rId=0;
			lId=str.indexOf(left);
			if(lId<0)return"";
			if(ifMax){
				rId=str.lastIndexOf(right);
				if(rId<lId)return "";
				}else{
				rId=str.indexOf(right,lId+1);
			}
			if(rId<0)return "";
			return str.substring(lId+left.length,rId);
		}

		StringTool.getSplitLine=function(line,split){
			(split===void 0)&& (split=" ");
			return line.split(split);
		}

		StringTool.getLeft=function(str,sign){
			var i=0;
			i=str.indexOf(sign);
			return str.substr(0,i);
		}

		StringTool.getRight=function(str,sign){
			var i=0;
			i=str.indexOf(sign);
			return str.substr(i+1);
		}

		StringTool.delelteItem=function(arr){
			while (arr.length>0){
				if(arr[0]==""){
					arr.shift();
					}else{
					break ;
				}
			}
		}

		StringTool.getWords=function(line){
			var rst=StringTool.getSplitLine(line);
			StringTool.delelteItem(rst);
			return rst;
		}

		StringTool.getLinesI=function(startLine,endLine,lines){
			var i=0;
			var rst=[];
			for(i=startLine;i<=endLine;i++){
				rst.push(lines[i]);
			}
			return rst;
		}

		StringTool.structfy=function(str,inWidth,removeEmpty){
			(inWidth===void 0)&& (inWidth=4);
			(removeEmpty===void 0)&& (removeEmpty=true);
			if(removeEmpty){
				str=laya.debug.tools.StringTool.trimEmptyLine(str);
			};
			var lines;
			var tIn=0;
			tIn=0;
			var tInStr;
			tInStr=StringTool.getEmptyStr(0);
			lines=str.split("\n");
			var i=0;
			var len=0;
			var tLineStr;
			len=lines.length;
			for(i=0;i<len;i++){
				tLineStr=lines[i];
				tLineStr=laya.debug.tools.StringTool.trimLeft(tLineStr);
				tLineStr=laya.debug.tools.StringTool.trimRight(tLineStr);
				tIn+=StringTool.getPariCount(tLineStr);
				if(tLineStr.indexOf("}")>=0){
					tInStr=StringTool.getEmptyStr(tIn*inWidth);
				}
				tLineStr=tInStr+tLineStr;
				lines[i]=tLineStr;
				tInStr=StringTool.getEmptyStr(tIn*inWidth);
			}
			return lines.join("\n");
		}

		StringTool.getEmptyStr=function(width){
			if(!StringTool.emptyDic.hasOwnProperty(width)){
				var i=0;
				var len=0;
				len=width;
				var rst;
				rst="";
				for(i=0;i<len;i++){
					rst+=" ";
				}
				StringTool.emptyDic[width]=rst;
			}
			return StringTool.emptyDic[width];
		}

		StringTool.getPariCount=function(str,inChar,outChar){
			(inChar===void 0)&& (inChar="{");
			(outChar===void 0)&& (outChar="}");
			var varDic;
			varDic={};
			varDic[inChar]=1;
			varDic[outChar]=-1;
			var i=0;
			var len=0;
			var tChar;
			len=str.length;
			var rst=0;
			rst=0;
			for(i=0;i<len;i++){
				tChar=str.charAt(i);
				if(varDic.hasOwnProperty(tChar)){
					rst+=varDic[tChar];
				}
			}
			return rst;
		}

		StringTool.readInt=function(str,startI){
			(startI===void 0)&& (startI=0);
			var rst=NaN;
			rst=0;
			var tNum=0;
			var tC;
			var i=0;
			var isBegin=false;
			isBegin=false;
			var len=0;
			len=str.length;
			for(i=startI;i<len;i++){
				tC=str.charAt(i);
				if(Number(tC)>0||tC=="0"){
					rst=10*rst+Number(tC);
					if(rst>0)isBegin=true;
					}else{
					if(isBegin)return rst;
				}
			}
			return rst;
		}

		StringTool.getReplace=function(str,oStr,nStr){
			if(!str)return "";
			var rst;
			rst=str.replace(new RegExp(oStr,"g"),nStr);
			return rst;
		}

		StringTool.getWordCount=function(str,findWord){
			var rg=new RegExp(findWord,"g")
			return str.match(rg).length;
		}

		StringTool.getResolvePath=function(path,basePath){
			if(StringTool.isAbsPath(path)){
				return path;
			};
			var tSign;
			tSign="\\";
			if(basePath.indexOf("/")>=0){
				tSign="/";
			}
			if(basePath.charAt(basePath.length-1)==tSign){
				basePath=basePath.substr(0,basePath.length-1);
			};
			var parentSign;
			parentSign=".."+tSign;
			var tISign;
			tISign="."+tSign;
			var pCount=0;
			pCount=StringTool.getWordCount(path,parentSign);
			path=laya.debug.tools.StringTool.getReplace(path,parentSign,"");
			path=laya.debug.tools.StringTool.getReplace(path,tISign,"");
			var i=0;
			var len=0;
			len=pCount;
			var iPos=0;
			for(i=0;i<len;i++){
				basePath=StringTool.removeLastSign(path,tSign);
			}
			return basePath+tSign+path;
		}

		StringTool.isAbsPath=function(path){
			if(path.indexOf(":")>=0)return true;
			return false;
		}

		StringTool.removeLastSign=function(str,sign){
			var iPos=0;
			iPos=str.lastIndexOf(sign);
			str=str.substring(0,iPos);
			return str;
		}

		StringTool.getParamArr=function(str){
			var paramStr;
			paramStr=laya.debug.tools.StringTool.getBetween(str,"(",")",true);
			if(StringTool.trim(paramStr).length<1)return [];
			return paramStr.split(",");
		}

		StringTool.copyStr=function(str){
			return str.substring();
		}

		StringTool.ArrayToString=function(arr){
			var rst;
			rst="[{items}]".replace(new RegExp("\\{items\\}","g"),StringTool.getArrayItems(arr));
			return rst;
		}

		StringTool.getArrayItems=function(arr){
			var rst;
			if(arr.length<1)return "";
			rst=StringTool.parseItem(arr[0]);
			var i=0;
			var len=0;
			len=arr.length;
			for(i=1;i<len;i++){
				rst+=","+StringTool.parseItem(arr[i]);
			}
			return rst;
		}

		StringTool.parseItem=function(item){
			var rst;
			rst="\""+item+"\"";
			return "";
		}

		StringTool.initAlphaSign=function(){
			if (StringTool.alphaSigns)return;
			StringTool.alphaSigns={};
			StringTool.addSign("a","z",StringTool.alphaSigns);
			StringTool.addSign("A","Z",StringTool.alphaSigns);
			StringTool.addSign("0","9",StringTool.alphaSigns);
		}

		StringTool.addSign=function(ss,e,tar){
			var i=0;
			var len=0;
			var s=0;
			s=ss.charCodeAt(0);
			len=e.charCodeAt(0);
			for(i=s;i<=len;i++){
				tar[String.fromCharCode(i)]=true;
				console.log("add :"+String.fromCharCode(i));
			}
		}

		StringTool.isPureAlphaNum=function(str){
			StringTool.initAlphaSign();
			if (!str)return true;
			var i=0,len=0;
			len=str.length;
			for (i=0;i < len;i++){
				if (!StringTool.alphaSigns[str.charAt(i)])return false;
			}
			return true;
		}

		StringTool.emptyDic={};
		StringTool.alphaSigns=null;
		__static(StringTool,
		['emptyStrDic',function(){return this.emptyStrDic={
				" ":true,
				"\r":true,
				"\n":true,
				"\t":true
		};},'specialChars',function(){return this.specialChars={"*":true,"&":true,"%":true,"#":true,"?":true};}

		]);
		return StringTool;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.TimeTool
	var TimeTool=(function(){
		function TimeTool(){}
		__class(TimeTool,'laya.debug.tools.TimeTool');
		TimeTool.getTime=function(sign,update){
			(update===void 0)&& (update=true);
			if (!TimeTool.timeDic[sign]){
				TimeTool.timeDic[sign]=0;
			};
			var tTime=NaN;
			tTime=Browser.now();
			var rst=NaN;
			rst=tTime-TimeTool.timeDic[sign];
			TimeTool.timeDic[sign]=tTime;
			return rst;
		}

		TimeTool.runAllCallLater=function(){
			var timer;
			timer=Laya.timer;
			var laters=timer["_laters"];
			for (var i=0,n=laters.length-1;i <=n;i++){
				var handler=laters[i];
				handler.method!==null && handler.run(false);
				timer["_recoverHandler"](handler);
				i===n && (n=laters.length-1);
			}
			laters.length=0;
		}

		TimeTool.timeDic={};
		return TimeTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-25 上午10:48:54
	*/
	//class laya.debug.tools.TraceTool
	var TraceTool=(function(){
		function TraceTool(){}
		__class(TraceTool,'laya.debug.tools.TraceTool');
		TraceTool.closeAllLog=function(){
			var logFun;
			logFun=TraceTool.emptyLog;
			Browser.window.console.log=logFun;
		}

		TraceTool.emptyLog=function(){}
		TraceTool.traceObj=function(obj){
			TraceTool.tempArr.length=0;
			var key;
			for(key in obj){
				TraceTool.tempArr.push(key+":"+obj[key]);
			};
			var rst;
			rst=TraceTool.tempArr.join("\n");
			console.log(rst);
			return rst;
		}

		TraceTool.traceObjR=function(obj){
			TraceTool.tempArr.length=0;
			var key;
			for(key in obj){
				TraceTool.tempArr.push(obj[key]+":"+key);
			};
			var rst;
			rst=TraceTool.tempArr.join("\n");
			console.log(rst);
			return rst;
		}

		TraceTool.traceSize=function(tar){
			DebugTool.dTrace("Size: x:"+tar.x+" y:"+tar.y+" w:"+tar.width+" h:"+tar.height+" scaleX:"+tar.scaleX+" scaleY:"+tar.scaleY);
		}

		TraceTool.traceSplit=function(msg){
			console.log("---------------------"+msg+"---------------------------");
		}

		TraceTool.group=function(gName){
			console.group(gName);;
		}

		TraceTool.groupEnd=function(){
			console.groupEnd();;
		}

		TraceTool.getCallStack=function(life,s){
			(life===void 0)&& (life=1);
			(s===void 0)&& (s=1);
			var caller;
			caller=TraceTool.getCallStack;
			caller=caller.caller.caller;
			var msg;
			msg="";
			while(caller&&life>0){
				if(s<=0){
					msg+=caller+"<-";
					life--;
					}else{
				}
				caller=caller.caller;
				s--;
			}
			return msg;
		}

		TraceTool.getCallLoc=function(index){
			(index===void 0)&& (index=2);
			var loc;
			try {
				TraceTool.Erroer.i++;
				}catch (e){
				var arr;
				arr=e.stack.replace(/Error\n/).split(/\n/);
				if (arr[index]){
					loc=arr[index].replace(/^\s+|\s+$/,"");
					}else{
					loc="unknow";
				}
			}
			return loc;
		}

		TraceTool.traceCallStack=function(){
			var loc;
			try {
				TraceTool.Erroer.i++;
				}catch (e){
				loc=e.stack;
			}
			console.log(loc);
			return loc;
		}

		TraceTool.getPlaceHolder=function(len){
			if(!TraceTool.holderDic.hasOwnProperty(len)){
				var rst;
				rst="";
				var i=0;
				for(i=0;i<len;i++){
					rst+="-";
				}
				TraceTool.holderDic[len]=rst;
			}
			return TraceTool.holderDic[len];
		}

		TraceTool.traceTree=function(tar,depth,isFirst){
			(depth===void 0)&& (depth=0);
			(isFirst===void 0)&& (isFirst=true);
			if(isFirst){
				console.log("traceTree");
			}
			if(!tar)return;
			var i=0;
			var len=0;
			if(tar.numChildren<1){
				console.log(tar);
				return;
			}
			TraceTool.group(tar);
			len=tar.numChildren;
			depth++;
			for(i=0;i<len;i++){
				TraceTool.traceTree(tar.getChildAt(i),depth,false);
			}
			TraceTool.groupEnd();
		}

		TraceTool.getClassName=function(tar){
			return tar["constructor"].name;
		}

		TraceTool.traceSpriteInfo=function(tar,showBounds,showSize,showTree){
			(showBounds===void 0)&& (showBounds=true);
			(showSize===void 0)&& (showSize=true);
			(showTree===void 0)&& (showTree=true);
			if(!((tar instanceof laya.display.Sprite ))){
				console.log("not Sprite");
				return;
			}
			if(!tar){
				console.log("null Sprite");
				return;
			}
			TraceTool.traceSplit("traceSpriteInfo");
			DebugTool.dTrace(laya.debug.tools.TraceTool.getClassName(tar)+":"+tar.name);
			if(showTree){
				TraceTool.traceTree(tar);
				}else{
				console.log(tar);
			}
			if(showSize){
				TraceTool.traceSize(tar);
			}
			if(showBounds){
				console.log("bounds:"+tar.getBounds());
			}
		}

		TraceTool.tempArr=[];
		TraceTool.Erroer=null;
		TraceTool.holderDic={};
		return TraceTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-30 下午5:12:53
	*/
	//class laya.debug.tools.ValueChanger
	var ValueChanger=(function(){
		function ValueChanger(){
			this.target=null;
			this.key=null;
			this._tValue=NaN;
			this.preValue=0;
		}

		__class(ValueChanger,'laya.debug.tools.ValueChanger');
		var __proto=ValueChanger.prototype;
		__proto.record=function(){
			this.preValue=this.value;
		}

		__proto.showValueByAdd=function(addValue){
			this.value=this.preValue+addValue;
		}

		__proto.showValueByScale=function(scale){
			this.value=this.preValue *scale;
		}

		__proto.recover=function(){
			this.value=this.preValue;
		}

		__proto.dispose=function(){
			this.target=null;
		}

		__getset(0,__proto,'value',function(){
			if(this.target){
				this._tValue=this.target[this.key];
			}
			return this._tValue;
			},function(nValue){
			this._tValue=nValue;
			if(this.target){
				this.target[this.key]=nValue;
			}
		});

		__getset(0,__proto,'dValue',function(){
			return this.value-this.preValue;
		});

		__getset(0,__proto,'scaleValue',function(){
			return this.value/this.preValue;
		});

		ValueChanger.create=function(target,key){
			var rst;
			rst=new ValueChanger();
			rst.target=target;
			rst.key=key;
			return rst;
		}

		return ValueChanger;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.VisibleAnalyser
	var VisibleAnalyser=(function(){
		function VisibleAnalyser(){}
		__class(VisibleAnalyser,'laya.debug.tools.VisibleAnalyser');
		VisibleAnalyser.analyseTarget=function(node){
			var isInstage=false;
			isInstage=node.displayedInStage;
			var gRec;
			gRec=NodeUtils.getGRec(node);
			var stageRec=new Rectangle();
			stageRec.setTo(0,0,Laya.stage.width,Laya.stage.height);
			var isInVisibleRec=false;
			var visibleRec;
			visibleRec=stageRec.intersection(gRec);
			if (visibleRec.width > 0 && visibleRec.height > 0){
				isInVisibleRec=true;
			}
			else{
				isInVisibleRec=false;
			};
			var gAlpha=NaN;
			gAlpha=NodeUtils.getGAlpha(node);
			var gVisible=false;
			gVisible=NodeUtils.getGVisible(node);
			var msg;
			msg="";
			msg+="isInstage:"+isInstage+"\n";
			msg+="isInVisibleRec:"+isInVisibleRec+"\n";
			msg+="gVisible:"+gVisible+"\n";
			msg+="gAlpha:"+gAlpha+"\n";
			if (isInstage && isInVisibleRec && gVisible && gAlpha > 0){
				if (Render.isWebGL){
					VisibleAnalyser.anlyseRecVisible(node);
					}else{
					SpriteRenderForVisibleAnalyse.I.analyseNode(node);
				}
				msg+="coverRate:"+VisibleAnalyser.coverRate+"\n";
				if (VisibleAnalyser._coverList.length > 0){
					Laya.timer.once(1000,null,VisibleAnalyser.showListLater);
				}
			}
			console.log(msg);
			OutPutView.I.showTxt(msg);
		}

		VisibleAnalyser.showListLater=function(){
			NodeListPanelView.I.showList(VisibleAnalyser._coverList);
		}

		VisibleAnalyser.isCoverByBrother=function(node){
			var parent=node.parent;
			if (!parent)
				return;
			var _childs;
			_childs=parent._childs;
			var index=0;
			index=_childs.indexOf(node);
			if (index < 0)
				return;
			var i=0,len=0;
			var canvas;
			var rec;
			rec=parent.getSelfBounds();
			if (rec.width <=0 || rec.height <=0)
				return;
		}

		VisibleAnalyser.anlyseRecVisible=function(node){
			VisibleAnalyser.isNodeWalked=false;
			VisibleAnalyser._analyseTarget=node;
			if (!VisibleAnalyser.mainCanvas)
				VisibleAnalyser.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height);
			CanvasTools.clearCanvas(VisibleAnalyser.mainCanvas);
			VisibleAnalyser.tColor=1;
			VisibleAnalyser.resetCoverList();
			WalkTools.walkTargetEX(Laya.stage,VisibleAnalyser.recVisibleWalker,null,VisibleAnalyser.filterFun);
			if (!VisibleAnalyser.isTarRecOK){
				VisibleAnalyser.coverRate=0;
			}
			else{
				VisibleAnalyser.coverRate=CanvasTools.getDifferRate(VisibleAnalyser.preImageData,VisibleAnalyser.tarImageData);
			}
			console.log("coverRate:",VisibleAnalyser.coverRate);
		}

		VisibleAnalyser.getRecArea=function(rec){
			return rec.width *rec.height;
		}

		VisibleAnalyser.addCoverNode=function(node,coverRate){
			var data;
			data={};
			data.path=node;
			data.label=ClassTool.getNodeClassAndName(node)+":"+coverRate;
			data.coverRate=coverRate;
			VisibleAnalyser._coverList.push(data);
			console.log("coverByNode:",node,coverRate);
		}

		VisibleAnalyser.resetCoverList=function(){
			VisibleAnalyser._coverList.length=0;
		}

		VisibleAnalyser.recVisibleWalker=function(node){
			if (node==VisibleAnalyser._analyseTarget){
				VisibleAnalyser.isNodeWalked=true;
				VisibleAnalyser.tarRec.copyFrom(NodeUtils.getGRec(node));
				console.log("tarRec:",VisibleAnalyser.tarRec.toString());
				if (VisibleAnalyser.tarRec.width > 0 && VisibleAnalyser.tarRec.height > 0){
					VisibleAnalyser.isTarRecOK=true;
					VisibleAnalyser.tColor++;
					CanvasTools.fillCanvasRec(VisibleAnalyser.mainCanvas,VisibleAnalyser.tarRec,ColorTool.toHexColor(VisibleAnalyser.tColor));
					VisibleAnalyser.preImageData=CanvasTools.getImageDataFromCanvasByRec(VisibleAnalyser.mainCanvas,VisibleAnalyser.tarRec);
					VisibleAnalyser.tarImageData=CanvasTools.getImageDataFromCanvasByRec(VisibleAnalyser.mainCanvas,VisibleAnalyser.tarRec);
				}
				else{
					console.log("tarRec Not OK:",VisibleAnalyser.tarRec);
				}
			}
			else{
				if (VisibleAnalyser.isTarRecOK){
					var tRec;
					tRec=NodeUtils.getGRec(node);
					VisibleAnalyser.interRec=VisibleAnalyser.tarRec.intersection(tRec,VisibleAnalyser.interRec);
					if (VisibleAnalyser.interRec && VisibleAnalyser.interRec.width > 0 && VisibleAnalyser.interRec.height > 0){
						VisibleAnalyser.tColor++;
						CanvasTools.fillCanvasRec(VisibleAnalyser.mainCanvas,tRec,ColorTool.toHexColor(VisibleAnalyser.tColor));
						VisibleAnalyser.tImageData=CanvasTools.getImageDataFromCanvasByRec(VisibleAnalyser.mainCanvas,VisibleAnalyser.tarRec);
						var dRate=NaN;
						dRate=CanvasTools.getDifferRate(VisibleAnalyser.preImageData,VisibleAnalyser.tImageData);
						VisibleAnalyser.preImageData=VisibleAnalyser.tImageData;
						VisibleAnalyser.addCoverNode(node,dRate);
					}
				}
			}
		}

		VisibleAnalyser.filterFun=function(node){
			if (node.visible==false)
				return false;
			if (node.alpha < 0)
				return false;
			if (DebugInfoLayer.I.isDebugItem(node))return false;
			return true;
		}

		VisibleAnalyser.isNodeWalked=false;
		VisibleAnalyser._analyseTarget=null
		VisibleAnalyser.isTarRecOK=false;
		VisibleAnalyser.mainCanvas=null
		VisibleAnalyser.preImageData=null
		VisibleAnalyser.tImageData=null
		VisibleAnalyser.tarImageData=null
		VisibleAnalyser.coverRate=NaN
		VisibleAnalyser.tColor=0;
		VisibleAnalyser._coverList=[];
		__static(VisibleAnalyser,
		['tarRec',function(){return this.tarRec=new Rectangle();},'interRec',function(){return this.interRec=new Rectangle();}
		]);
		return VisibleAnalyser;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-24 下午6:15:01
	*/
	//class laya.debug.tools.WalkTools
	var WalkTools=(function(){
		function WalkTools(){}
		__class(WalkTools,'laya.debug.tools.WalkTools');
		WalkTools.walkTarget=function(target,fun,_this){
			fun.apply(_this,[target]);
			var i=0;
			var len=0;
			var tChild;
			len=target.numChildren;
			for(i=0;i<len;i++){
				tChild=target.getChildAt(i);
				WalkTools.walkTarget(tChild,fun,tChild);
			}
		}

		WalkTools.walkTargetEX=function(target,fun,_this,filterFun){
			if (filterFun !=null && !filterFun(target))return;
			fun.apply(_this,[target]);
			var i=0;
			var len=0;
			var tChild;
			var childs;
			childs=target._childs;
			len=childs.length;
			for(i=0;i<len;i++){
				tChild=childs[i];
				WalkTools.walkTarget(tChild,fun,tChild);
			}
		}

		WalkTools.walkChildren=function(target,fun,_this){
			if(!target||target.numChildren<1)return;
			WalkTools.walkArr(DisControlTool.getAllChild(target),fun,_this);
		}

		WalkTools.walkArr=function(arr,fun,_this){
			if(!arr)return;
			var i=0;
			var len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				fun.apply(_this,[arr[i],i]);
			}
		}

		return WalkTools;
	})()


	/**
	*本类用于监控对象值变化
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-23 下午4:18:27
	*/
	//class laya.debug.tools.Watcher
	var Watcher=(function(){
		function Watcher(){}
		__class(Watcher,'laya.debug.tools.Watcher');
		Watcher.watch=function(obj,name,funs){
			VarHook.hookVar(obj,name,funs);
		}

		Watcher.traceChange=function(obj,name,sign){
			(sign===void 0)&& (sign="var changed:");
			VarHook.hookVar(obj,name,[Watcher.getTraceValueFun(name),VarHook.getLocFun(sign)]);
		}

		Watcher.debugChange=function(obj,name){
			VarHook.hookVar(obj,name,[VarHook.getLocFun("debug loc"),FunHook.debugHere]);
		}

		Watcher.differChange=function(obj,name,sign,msg){
			(msg===void 0)&& (msg="");
			VarHook.hookVar(obj,name,[Watcher.getDifferFun(obj,name,sign,msg)]);
		}

		Watcher.getDifferFun=function(obj,name,sign,msg){
			(msg===void 0)&& (msg="");
			var rst;
			rst=function (){
				DifferTool.differ(sign,obj[name],msg);
			}
			return rst;
		}

		Watcher.traceValue=function(value){
			console.log("value:",value);
		}

		Watcher.getTraceValueFun=function(name){
			var rst;
			rst=function (value){
				console.log("set "+name+" :",value);
			}
			return rst;
		}

		return Watcher;
	})()


	/**
	*XML转Object类
	*@author ww
	*
	*/
	//class laya.debug.tools.XML2Object
	var XML2Object=(function(){
		function XML2Object(){};
		__class(XML2Object,'laya.debug.tools.XML2Object');
		__getset(1,XML2Object,'arrays',function(){
			if(!XML2Object._arrays){
				XML2Object._arrays=[];
			}
			return XML2Object._arrays;
			},function(a){
			XML2Object._arrays=a;
		});

		XML2Object.parse=function(node,isFirst){
			(isFirst===void 0)&& (isFirst=true);
			var obj={};
			if(isFirst)
				obj.Name=node.localName;
			var numOfChilds=node.children.length;
			var childs=[];
			var children={};
			obj.c=children;
			obj.cList=childs;
			for(var i=0;i<numOfChilds;i++){
				var childNode=node.children[i];
				var childNodeName=childNode.localName;
				var value;
				var numOfAttributes
				value=XML2Object.parse(childNode,true);
				childs.push(value);
				if(children[childNodeName]){
					if(XML2Object.getTypeof(children[childNodeName])=="array"){
						children[childNodeName].push(value);
						}else {
						children[childNodeName]=[children[childNodeName],value];
					}
					}else if(XML2Object.isArray(childNodeName)){
					children[childNodeName]=[value];
					}else {
					children[childNodeName]=value;
				}
			}
			numOfAttributes=0;
			if(node.attributes){
				numOfAttributes=node.attributes.length;
				var prop={};
				obj.p=prop;
				for(i=0;i<numOfAttributes;i++){
					prop[node.attributes[i].name.toString()]=String(node.attributes[i].nodeValue);
				}
			}
			if(numOfChilds==0){
				if(numOfAttributes==0){
					obj="";
				}else {}
			}
			return obj;
		}

		XML2Object.getArr=function(v){
			if(!v)return [];
			if(XML2Object.getTypeof(v)=="array")return v;
			return [v];
		}

		XML2Object.isArray=function(nodeName){
			var numOfArrays=XML2Object._arrays ? XML2Object._arrays.length :0;
			for(var i=0;i<numOfArrays;i++){
				if(nodeName==XML2Object._arrays[i]){
					return true;
				}
			}
			return false;
		}

		XML2Object.getTypeof=function(o){
			if(typeof(o)=="object"){
				if(o.length==null){
					return "object";
					}else if(typeof(o.length)=="number"){
					return "array";
					}else {
					return "object";
				}
				}else {
				return typeof(o);
			}
		}

		XML2Object._arrays=null
		return XML2Object;
	})()


	/**
	*XML转Object类
	*@author ww
	*
	*/
	//class laya.debug.tools.XML2ObjectNodejs
	var XML2ObjectNodejs=(function(){
		function XML2ObjectNodejs(){};
		__class(XML2ObjectNodejs,'laya.debug.tools.XML2ObjectNodejs');
		__getset(1,XML2ObjectNodejs,'arrays',function(){
			if(!XML2ObjectNodejs._arrays){
				XML2ObjectNodejs._arrays=[];
			}
			return XML2ObjectNodejs._arrays;
			},function(a){
			XML2ObjectNodejs._arrays=a;
		});

		XML2ObjectNodejs.parse=function(node,isFirst){
			(isFirst===void 0)&& (isFirst=true);
			var obj={};
			if(isFirst)
				obj.Name=node.localName;
			var numOfChilds=node[XML2ObjectNodejs.ChildrenSign]?node[XML2ObjectNodejs.ChildrenSign].length:0;
			var childs=[];
			var children={};
			obj.c=children;
			obj.cList=childs;
			for(var i=0;i<numOfChilds;i++){
				var childNode=node[XML2ObjectNodejs.ChildrenSign][i];
				var childNodeName=childNode.localName;
				var value;
				var numOfAttributes=0
				if (!childNodeName)continue ;
				value=XML2ObjectNodejs.parse(childNode,true);
				childs.push(value);
				if(children[childNodeName]){
					if(XML2ObjectNodejs.getTypeof(children[childNodeName])=="array"){
						children[childNodeName].push(value);
						}else {
						children[childNodeName]=[children[childNodeName],value];
					}
					}else if(XML2ObjectNodejs.isArray(childNodeName)){
					children[childNodeName]=[value];
					}else {
					children[childNodeName]=value;
				}
			}
			numOfAttributes=0;
			if(node.attributes){
				numOfAttributes=node.attributes.length;
				var prop={};
				obj.p=prop;
				for(i=0;i<numOfAttributes;i++){
					prop[node.attributes[i].name.toString()]=String(node.attributes[i].nodeValue);
				}
			}
			if(numOfChilds==0){
				if(numOfAttributes==0){
				}else {}
			}
			return obj;
		}

		XML2ObjectNodejs.getArr=function(v){
			if(!v)return [];
			if(XML2ObjectNodejs.getTypeof(v)=="array")return v;
			return [v];
		}

		XML2ObjectNodejs.isArray=function(nodeName){
			var numOfArrays=XML2ObjectNodejs._arrays ? XML2ObjectNodejs._arrays.length :0;
			for(var i=0;i<numOfArrays;i++){
				if(nodeName==XML2ObjectNodejs._arrays[i]){
					return true;
				}
			}
			return false;
		}

		XML2ObjectNodejs.getTypeof=function(o){
			if(typeof(o)=="object"){
				if(o.length==null){
					return "object";
					}else if(typeof(o.length)=="number"){
					return "array";
					}else {
					return "object";
				}
				}else {
				return typeof(o);
			}
		}

		XML2ObjectNodejs._arrays=null
		XML2ObjectNodejs.ChildrenSign="childNodes";
		return XML2ObjectNodejs;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.menus.NodeMenu
	var NodeMenu=(function(){
		function NodeMenu(){
			this._tar=null;
			this._menu=null;
			this._shareBtns=[
			"信息面板",
			"边框",
			"进入节点",
			"树定位",
			"Enable链",
			"Size链",
			"节点工具",
			"可见分析",
			"输出到控制台"];
			this._menuItems=["隐藏节点"];
			this._menuHide=null;
			this._menuItemsHide=["显示节点"];
			this._menu1=null;
			this._menuItems1=["输出到控制台"];
		}

		__class(NodeMenu,'laya.debug.view.nodeInfo.menus.NodeMenu');
		var __proto=NodeMenu.prototype;
		__proto.showNodeMenu=function(node){
			if (!node._style){
				DebugTool.log("该节点已不存在，请刷新列表");
				return;
			}
			this._tar=node;
			if (!this._menu){
				this._menuItems=this._menuItems.concat(this._shareBtns);
				this._menu=ContextMenu.createMenuByArray(this._menuItems);
				this._menu.on("select",this,this.onEmunSelect);
				this._menuItemsHide=this._menuItemsHide.concat(this._shareBtns);
				this._menuHide=ContextMenu.createMenuByArray(this._menuItemsHide);
				this._menuHide.on("select",this,this.onEmunSelect);
			}
			if (node.visible){
				this._menu.show();
			}
			else{
				this._menuHide.show();
			}
		}

		__proto.nodeDoubleClick=function(node){
			NodeToolView.I.showByNode(node);
		}

		__proto.setNodeListDoubleClickAction=function(list){
			if (Browser.onMobile)return;
			list.on("doubleclick",this,this.onListDoubleClick,[list]);
		}

		__proto.onListDoubleClick=function(list){
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				laya.debug.view.nodeInfo.menus.NodeMenu.I.nodeDoubleClick(tarNode);
			}
		}

		__proto.setNodeListAction=function(list){
			list.on(DebugTool.getMenuShowEvent(),this,this.onListRightClick,[list]);
		}

		//setNodeListDoubleClickAction(list);
		__proto.onListRightClick=function(list){
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				laya.debug.view.nodeInfo.menus.NodeMenu.I.objRightClick(tarNode);
			}
		}

		__proto.objRightClick=function(obj){
			if ((obj instanceof laya.display.Sprite )){
				laya.debug.view.nodeInfo.menus.NodeMenu.I.showNodeMenu(obj);
			}
			else if ((typeof obj=='object')){
				laya.debug.view.nodeInfo.menus.NodeMenu.I.showObjectMenu(obj);
			}
		}

		__proto.showObjectMenu=function(obj){
			this._tar=obj;
			if (!this._menu1){
				this._menu1=ContextMenu.createMenuByArray(this._menuItems1);
				this._menu1.on("select",this,this.onEmunSelect);
			}
			this._menu1.show();
		}

		__proto.onEmunSelect=function(e){
			var data=(e.target).data;
			if ((typeof data=='string')){
				var key;
				key=data;
				switch (key){
					case "信息面板":
						ObjectInfoView.showObject(this._tar);
						break ;
					case "边框":
						DebugTool.showDisBound(this._tar);
						break ;
					case "输出到控制台":
						console.log(this._tar);
						break ;
					case "树节点":
						ToolPanel.I.showNodeTree(this._tar);
						break ;
					case "进入节点":
						ToolPanel.I.showNodeTree(this._tar);
						break ;
					case "树定位":
						ToolPanel.I.showSelectInStage(this._tar);
						break ;
					case "Enable链":
						OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar));
						SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
						break ;
					case "Size链":
						OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar));
						SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
						break ;
					case "节点工具":
						NodeToolView.I.showByNode(this._tar);
						break ;
					case "显示节点":
						this._tar.visible=true;
						break ;
					case "隐藏节点":
						this._tar.visible=false;
						break ;
					case "可见分析":
						if (this._tar){
							VisibleAnalyser.analyseTarget(this._tar);
						}
						break ;
					}
			}
		}

		__getset(1,NodeMenu,'I',function(){
			if (!NodeMenu._I)
				NodeMenu._I=new NodeMenu();
			return NodeMenu._I;
		});

		NodeMenu._I=null
		return NodeMenu;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.NodeConsts
	var NodeConsts=(function(){
		function NodeConsts(){}
		__class(NodeConsts,'laya.debug.view.nodeInfo.NodeConsts');
		NodeConsts.defaultFitlerStr="x,y,width,height,scaleX,scaleY,alpha,renderCost";
		NodeConsts.RenderCostMaxTime=3000;
		return NodeConsts;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.NodeUtils
	var NodeUtils=(function(){
		function NodeUtils(){}
		__class(NodeUtils,'laya.debug.view.nodeInfo.NodeUtils');
		NodeUtils.getFilterdTree=function(sprite,keys){
			if (!keys)
				keys=NodeUtils.defaultKeys;
			var me;
			me={};
			var key;
			var i=0,len=0;
			len=keys.length;
			for (i=0;i < len;i++){
				key=keys[i];
				me[key]=sprite[key];
			};
			var cList;
			var tChild;
			cList=sprite._childs;
			len=cList.length;
			var mClist;
			mClist=[];
			for (i=0;i < len;i++){
				tChild=cList[i];
				mClist.push(NodeUtils.getFilterdTree(tChild,keys));
			}
			me.childs=mClist;
			return me;
		}

		NodeUtils.getPropertyDesO=function(tValue,keys){
			if (!keys)
				keys=NodeUtils.defaultKeys;
			var rst={};
			if ((typeof tValue=='object')){
				rst.label=""+ClassTool.getNodeClassAndName(tValue);
			}
			else{
				rst.label=""+tValue;
			}
			rst.type="";
			rst.path=tValue;
			rst.childs=[];
			rst.isDirectory=false;
			var key;
			var i=0,len=0;
			var tChild;
			if ((tValue instanceof laya.display.Node )){
				rst.des=ClassTool.getNodeClassAndName(tValue);
				rst.isDirectory=true;
				len=keys.length;
				for (i=0;i < len;i++){
					key=keys[i];
					tChild=NodeUtils.getPropertyDesO(tValue[key],keys);
					if (tValue.hasOwnProperty(key)){
						tChild.label=""+key+":"+tChild.des;
					}
					else{
						tChild.label=""+key+":"+ObjectInfoView.getNodeValue(tValue,key);
					}
					rst.childs.push(tChild);
				}
				key="_childs";
				tChild=NodeUtils.getPropertyDesO(tValue[key],keys);
				tChild.label=""+key+":"+tChild.des;
				tChild.isChilds=true;
				rst.childs.push(tChild);
			}
			else if ((tValue instanceof Array)){
				rst.des="Array["+(tValue).length+"]";
				rst.isDirectory=true;
				var tList;
				tList=tValue;
				len=tList.length;
				for (i=0;i < len;i++){
					tChild=NodeUtils.getPropertyDesO(tList[i],keys);
					tChild.label=""+i+":"+tChild.des;
					rst.childs.push(tChild);
				}
			}
			else if ((typeof tValue=='object')){
				rst.des=ClassTool.getNodeClassAndName(tValue);
				rst.isDirectory=true;
				for (key in tValue){
					tChild=NodeUtils.getPropertyDesO(tValue[key],keys);
					tChild.label=""+key+":"+tChild.des;
					rst.childs.push(tChild);
				}
			}
			else{
				rst.des=""+tValue;
			}
			rst.hasChild=rst.childs.length > 0;
			return rst;
		}

		NodeUtils.adptShowKeys=function(keys){
			var i=0,len=0;
			len=keys.length;
			for (i=len-1;i >=0;i--){
				keys[i]=StringTool.trimSide(keys[i]);
				if (keys[i].length < 1){
					keys.splice(i,1);
				}
			}
			return keys;
		}

		NodeUtils.getNodeTreeData=function(sprite,keys){
			NodeUtils.adptShowKeys(keys);
			var treeO;
			treeO=NodeUtils.getPropertyDesO(sprite,keys);
			var treeArr;
			treeArr=[];
			NodeUtils.getTreeArr(treeO,treeArr);
			return treeArr;
		}

		NodeUtils.getTreeArr=function(treeO,arr,add){
			(add===void 0)&& (add=true);
			if (add)
				arr.push(treeO);
			var tArr=treeO.childs;
			var i=0,len=tArr.length;
			for (i=0;i < len;i++){
				if (!add){
					tArr[i].nodeParent=null;
				}
				else{
					tArr[i].nodeParent=treeO;
				}
				if (tArr[i].isDirectory){
					NodeUtils.getTreeArr(tArr[i],arr);
				}
				else{
					arr.push(tArr[i]);
				}
			}
		}

		NodeUtils.traceStage=function(){
			console.log(NodeUtils.getFilterdTree(Laya.stage,null));
			console.log("treeArr:",NodeUtils.getNodeTreeData(Laya.stage,null));
		}

		NodeUtils.getNodeCount=function(node,visibleRequire){
			(visibleRequire===void 0)&& (visibleRequire=false);
			if (visibleRequire){
				if (!node.visible)return 0;
			};
			var rst=0;
			rst=1;
			var i=0,len=0;
			var cList;
			cList=node._childs;
			len=cList.length;
			for (i=0;i < len;i++){
				rst+=NodeUtils.getNodeCount(cList[i],visibleRequire);
			}
			return rst;
		}

		NodeUtils.getGVisible=function(node){
			while (node){
				if (!node.visible)return false;
				node=node.parent;
			}
			return true;
		}

		NodeUtils.getGAlpha=function(node){
			var rst=NaN;
			rst=1;
			while (node){
				rst *=node.alpha;
				node=node.parent;
			}
			return rst;
		}

		NodeUtils.getGPos=function(node){
			var point;
			point=new Point();
			node.localToGlobal(point);
			return point;
		}

		NodeUtils.getGRec=function(node){
			var pointList;
			pointList=node._getBoundPointsM(true);
			if (!pointList || pointList.length < 1)
				return Rectangle.TEMP.setTo(0,0,0,0);
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,node.localToGlobal,node);
			pointList=GrahamScan.pointListToPlist(pointList);
			var _disBoundRec;
			_disBoundRec=Rectangle._getWrapRec(pointList,_disBoundRec);
			return _disBoundRec;
		}

		NodeUtils.getGGraphicRec=function(node){
			var pointList;
			pointList=node.getGraphicBounds()._getBoundPoints();
			if (!pointList || pointList.length < 1)
				return Rectangle.TEMP.setTo(0,0,0,0);
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,node.localToGlobal,node);
			pointList=GrahamScan.pointListToPlist(pointList);
			var _disBoundRec;
			_disBoundRec=Rectangle._getWrapRec(pointList,_disBoundRec);
			return _disBoundRec;
		}

		NodeUtils.getNodeCmdCount=function(node){
			var rst=0;
			if (node.graphics){
				if (node.graphics.cmds){
					rst=node.graphics.cmds.length;
				}
				else{
					if (node.graphics._one){
						rst=1;
					}
					else{
						rst=0;
					}
				}
			}
			else{
				rst=0;
			}
			return rst;
		}

		NodeUtils.getNodeCmdTotalCount=function(node){
			var rst=0;
			var i=0,len=0;
			var cList;
			cList=node._childs;
			len=cList.length;
			rst=NodeUtils.getNodeCmdCount(node);
			for (i=0;i < len;i++){
				rst+=NodeUtils.getNodeCmdTotalCount(cList[i]);
			}
			return rst;
		}

		NodeUtils.getRenderNodeCount=function(node){
			if (node.cacheAs !="none")return 1;
			var rst=0;
			var i=0,len=0;
			var cList;
			cList=node._childs;
			len=cList.length;
			rst=1;
			for (i=0;i < len;i++){
				rst+=NodeUtils.getRenderNodeCount(cList[i]);
			}
			return rst;
		}

		NodeUtils.getReFreshRenderNodeCount=function(node){
			var rst=0;
			var i=0,len=0;
			var cList;
			cList=node._childs;
			len=cList.length;
			rst=1;
			for (i=0;i < len;i++){
				rst+=NodeUtils.getRenderNodeCount(cList[i]);
			}
			return rst;
		}

		NodeUtils.showCachedSpriteRecs=function(){
			NodeUtils.g=DebugInfoLayer.I.graphicLayer.graphics;
			NodeUtils.g.clear();
			WalkTools.walkTarget(Laya.stage,NodeUtils.drawCachedBounds,null);
		}

		NodeUtils.drawCachedBounds=function(sprite){
			if (sprite.cacheAs=="none")return;
			if (DebugInfoLayer.I.isDebugItem(sprite))return;
			var rec;
			rec=NodeUtils.getGRec(sprite);
			NodeUtils.g.drawRect(rec.x,rec.y,rec.width,rec.height,null,"#0000ff",2);
		}

		NodeUtils.g=null
		__static(NodeUtils,
		['defaultKeys',function(){return this.defaultKeys=["x","y","width","height"];}
		]);
		return NodeUtils;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.StyleConsts
	var StyleConsts=(function(){
		function StyleConsts(){}
		__class(StyleConsts,'laya.debug.view.StyleConsts');
		StyleConsts.setViewScale=function(view){
			view.scaleX=view.scaleY=StyleConsts.PanelScale;
		}

		__static(StyleConsts,
		['PanelScale',function(){return this.PanelScale=Browser.onPC?1:Browser.pixelRatio;}
		]);
		return StyleConsts;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-30 上午9:49:01
	*/
	//class as3analyser.As3ParserTool
	var As3ParserTool=(function(){
		function As3ParserTool(){}
		__class(As3ParserTool,'as3analyser.As3ParserTool');
		As3ParserTool.parserAsFile=function(path){
			var parser;
			parser=new AsFileParser();
			parser.setFile(path);
			console.log("parser:",parser);
		}

		return As3ParserTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-8-31 下午7:38:09
	*/
	//class as3analyser.parser.AsFileParser
	var AsFileParser=(function(){
		function AsFileParser(){
			this.oTxt=null;
			this.adptTxt=null;
			this.lines=null;
			this.rawLines=null;
			this.path=null;
			this.functionList=[];
			this.packageName=null;
			this.className=null;
			this.classNameFull=null;
			this.importList=null;
			this.importListRaw=null;
			this.memberDic={};
			this.allMemberDic={};
			this.parentClass=null;
			this.interfaces=[];
			this.type=null;
			this.pType=null;
			this.dependClassDic={};
			this.directReferDic={};
			this.varDic={};
			this.functionDic={};
			this.notUsedImportList=[];
			this.codeT=null;
			this.code=null;
			this.isWorkFile=true;
			ASLex.init();
		}

		__class(AsFileParser,'as3analyser.parser.AsFileParser');
		var __proto=AsFileParser.prototype;
		__proto.reset=function(){}
		__proto.setFile=function(path){
			this.path=path;
			this.oTxt=ToolFuns.readTxtFile(path);
			if(!this.oTxt)return;
			console.log("work:"+path);
			this.setClassStr(this.oTxt);
		}

		__proto.setClassStr=function(oTxt){
			this.rawLines=LineItem.getLineItems(oTxt,true,true);
			this.lines=StringTool$1.removeCommentLineS(this.rawLines);
			this.parse();
			if(this.type=="class")
				this.build();
		}

		__proto.parse=function(){
			var i=0;
			var len=0;
			var tline;
			var tmpStr;
			len=this.lines.length;
			i=this.findFirstMatchLine("package");
			tline=this.lines[i];
			this.packageName=StringTool$1.trimExt(tline.lineStr,["package",";","{"]);
			i++;
			i=this.findFirstMatchLine("class ",i);
			this.type="class";
			if(i<0){
				i=this.findFirstMatchLine("interface ",i);
				this.type="interface";
			}
			if(i<0){
				i=this.findFirstMatchLine("function ",i);
				this.type="function";
			}
			if(i<0){
				i=this.findFirstMatchLine("var ",i);
				this.type="var";
			}
			if(i<0){
				i=this.findFirstMatchLine("namespace",i);
				this.type="namespace";
			}
			tline=this.lines[i];
			var tLineWords;
			tLineWords=StringTool$1.getSplitLine(tline.lineStr);
			this.parseClassInfo(tLineWords,this.type);
			this.traceMyInfo();
			if(this.type=="class")
				this.parseClassBody(i);
			this.importList=[];
			this.importListRaw=[];
			len=this.lines.length;
			for(i=0;i<len;i++){
				tmpStr=this.lines[i].lineStr;
				tmpStr=StringTool$1.trimButEmpty(tmpStr);
				tLineWords=StringTool$1.getWords(tmpStr);
				if(tLineWords[0]=="import"){
					tmpStr=StringTool$1.trimExt(tmpStr,["import",";"]);
					this.importList.push(tmpStr);
					this.importListRaw.push(tline);
				}
			}
		}

		__proto.parseClassBody=function(i){
			var cCount=0;
			var len=0;
			var tLine;
			var tCIndex=0;
			var lineLen=0;
			var lineStr;
			var tPair;
			var tPos;
			len=this.lines.length;
			i=this.findFirstMatchLine("{",i);
			i++;
			tPos=new PosItem(i,0);
			var sPos;
			var preLine=0;
			preLine=0;
			tPos.line=this.findFirstMatchLine(" function ",i);
			tPair=StringTool$1.findPair("{","}",tPos,this.lines);
			this.codeT="";
			var tFun;
			while(tPair&&tPair.length>1){
				tFun=this.parseFunction(tPair);
				tPos=tPair[tPair.length-1];
				sPos=tPair[0];
				tPos.index++;
				if(tFun.hasAsy||1){
					this.codeT+="\n"+StringTool$1.getSelectLinesStr(this.rawLines,preLine-1,tFun.posStart.line-2)+"\n"+this.getFunctionHold(this.functionList.length-1)+"\n";
					preLine=tFun.posEnd.line+1;
				}
				tPos.line=this.findFirstMatchLine(" function ",tPos.line);
				if(tPos.line<0)break ;
				tPair=StringTool$1.findPair("{","}",tPos,this.lines);
			}
			if(preLine<this.rawLines.length){
				this.codeT+="\n"+StringTool$1.getSelectLinesStr(this.rawLines,preLine-1,this.rawLines.length);
			}
			this.parseClassMembers();
		}

		__proto.parseClassMembers=function(){
			var codeLines;
			codeLines=LineItem.getLineItems(this.codeT,true,true);
			var i=0;
			var len=0;
			var tLine;
			var tStr;
			len=codeLines.length;
			for(i=0;i<len;i++){
				tLine=codeLines[i];
				tStr=tLine.lineStr;
				this.addMember(tStr);
			}
		}

		__proto.addMember=function(tStr){
			var tMember;
			if(SingleMemberParser.getMemberType(tStr)){
				tMember=SingleMemberParser.parseMember(tStr);
				this.addMemberOne(tMember);
			}
		}

		__proto.addMemberOne=function(tMember){
			this.allMemberDic[tMember.name]=tMember;
			if(!tMember.modifiesO["static"]){
				this.memberDic[tMember.name]=tMember;
			}
			console.log("add mem:"+tMember.name+" type:"+tMember.type);
		}

		__proto.getFunctionHold=function(funID){
			return "{functionHolder_"+funID+"}";
		}

		__proto.build=function(){}
		// }
		__proto.parseFunction=function(pari){
			var functionLinePos;
			functionLinePos=this.traceBack(pari[0]," function");
			if(functionLinePos){
				var tFunctionDefineLine;
				var lineStr;
				tFunctionDefineLine=this.lines[functionLinePos.line];
				this.addMember(tFunctionDefineLine.lineStr);
				var tFun;
				tFun=new FunctionItem();
				tFun.setData(tFunctionDefineLine,StringTool$1.getLines(functionLinePos,pari[pari.length-1],this.lines,this.rawLines));
				this.functionList.push(tFun);
				return tFun;
			}
			return null;
		}

		__proto.traceBack=function(pos,str){
			var tLineItem;
			var len=0;
			len=pos.line;
			var i=0;
			var lineStr;
			var tIndex=0;
			for(i=len;i>=0;i--){
				tLineItem=this.lines[i];
				lineStr=tLineItem.lineStr;
				tIndex=lineStr.indexOf(str);
				if(tIndex>=0){
					var rst;
					rst=new PosItem();
					rst.line=i;
					rst.index=tIndex;
					rst.str=str;
					rst.oLine=tLineItem.lineIndex;
					return rst;
				}
			}
			return null;
		}

		__proto.setFullName=function(fullName){
			this.classNameFull=fullName;
			var i=0;
			i=fullName.lastIndexOf(".");
			if(i>=0){
				this.className=fullName.substr(i+1);
				this.packageName=fullName.substr(0,i-1);
				}else{
				this.className=fullName;
			}
		}

		__proto.traceMyInfo=function(){
			console.log("package:"+this.packageName);
			console.log("className:"+this.className);
			console.log("classNameFull:"+this.classNameFull);
			console.log("parentClass:"+this.parentClass);
			console.log("interfaces:"+this.interfaces.join("|"));
		}

		__proto.parseClassInfo=function(words,type){
			(type===void 0)&& (type="class");
			this.type=type;
			var i=0;
			var word;
			i=words.indexOf(type);
			if(i>0){
				this.pType=words[i-1];
				}else{
				this.pType="internal";
			}
			i++;
			this.className=StringTool$1.trim(words[i]);
			if(type=="var"){
				this.className=this.className.split(":")[0];
			}
			if(type=="function"){
				this.className=this.className.split("(")[0];
			};
			var len=0;
			len=words.length;
			i++;
			while(i<len){
				word=words[i];
				switch(word){
					case "extends":
						i++;
						this.parentClass=StringTool$1.trim(words[i]);
						break ;
					case "implements":
						i++;
						words[i]=StringTool$1.trim(words[i]);
						this.interfaces=words[i].split(",");
						break ;
					}
				i++;
			}
			if(this.packageName!=""){
				this.classNameFull=this.packageName+"."+this.className;
				}else{
				this.classNameFull=this.className;
			}
		}

		__proto.findFirstMatchLine=function(str,startLine){
			(startLine===void 0)&& (startLine=0);
			var i=0;
			var len=0;
			var tLine;
			len=this.lines.length;
			if(startLine<0)startLine=0;
			for(i=startLine;i<len;i++){
				tLine=this.lines[i].lineStr;
				if(tLine.indexOf(str)>=0){
					return i;
				}
			}
			return-1;
		}

		AsFileParser.workAFile=function(filePath,outPutPath){
			if(!outPutPath)outPutPath=filePath;
			var asfile;
			asfile=new AsFileParser();
			asfile.setFile(filePath);
			if(asfile.isWorkFile){
				var data;
				data=asfile.code;
				if(data.indexOf("/*[COMPILER OPTIONS:DISABLE2SYNC]*/")<0){
					Tracer.myTrace("insertSign:"+filePath);
					data=StringTool$1.insertAfter(data,"\n"+"/*[COMPILER OPTIONS:DISABLE2SYNC]*/","{");
				}
				data=StringTool$1.structfy(data);
				ToolFuns.saveTxtFile(outPutPath,data);
				Tracer.myTrace("done:"+filePath);
			}
		}

		AsFileParser.workFileList=function(fileList){
			Tracer.myTrace("workAsFile:"+fileList.length);
			var i=0;
			var len=0;
			len=fileList.length;
			for(i=0;i<len;i++){
				AsFileParser.workAFile(fileList[i]);
			}
			Tracer.myTrace("workFileList done");
		}

		AsFileParser.insertSign="/*[COMPILER OPTIONS:DISABLE2SYNC]*/";
		return AsFileParser;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-1 上午9:37:34
	*/
	//class as3analyser.parser.Defines
	var Defines=(function(){
		function Defines(){}
		__class(Defines,'as3analyser.parser.Defines');
		Defines.getParam=function(line){
			Defines.commonParam[1]=line;
			return Defines.commonParam;
		}

		Defines.isBWrap=function(str){
			return str=="{"||str=="}";
		}

		Defines.isNoWrapLine=function(line){
			var tStr;
			tStr=line.lineStr;
			if(tStr.indexOf("case ")>=0)return true;
			if(tStr.indexOf("break;")>=0)return true;
			if(tStr.indexOf("default")>=0)return true;
			return false;
		}

		Defines.Var="var";
		Defines.Expression="Expression";
		Defines.FunctionDefine="FunctionDefine";
		Defines.CallFun="CallFun";
		Defines.Block="Block";
		Defines.While="While";
		Defines.For="For";
		__static(Defines,
		['specialCallList',function(){return this.specialCallList=
			[
			"Sync.wait",
			"Sync.sleep",
			"Sync.load",
			"Sync::work.connectTo",
			"Far::netObj"];},'FunParams',function(){return this.FunParams={
				"Sync.wait":["null","null","_$this"],
				"Sync.sleep":["1000"],
				"Sync.load":["null","null"],
				"Sync::work.connectTo":["null"],
				"Far::netObj":[],
				"Sync::work.getFarObject":[]
		};},'commonParam',function(){return this.commonParam=["__$",0];}

		]);
		return Defines;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-1 下午5:18:21
	*/
	//class as3analyser.parser.struct.CodePiece
	var CodePiece=(function(){
		function CodePiece(){
			this.lines=null;
			this.posStart=null;
			this.posEnd=null;
			this.type=null;
			this.code=null;
			this.oCode=null;
			this.hasAsy=false;
			this.posStart=new PosItem();
			this.posEnd=new PosItem();
		}

		__class(CodePiece,'as3analyser.parser.struct.CodePiece');
		var __proto=CodePiece.prototype;
		Laya.imps(__proto,{"as3analyser.parser.struct.ICodePiece":true})
		__proto.dealContinue=function(){
			this.code=StringTool$1.getReplace(this.code,"continue","{__line=0;continue}");
		}

		__proto.isAsy=function(){
			return this.hasAsy;
		}

		__proto.setLines=function(lines){
			this.lines=lines;
			var i=0;
			var len=0;
			var tPiece;
			len=lines.length;
			for(i=0;i<len;i++){
				tPiece=lines[i];
				if(tPiece.isAsy()){
					this.hasAsy=true;
					break ;
				}
			}
			this.oCode=StringTool$1.getPiecesCode(lines);
			console.log("oCode:",this.oCode);
			this.posStart.line=(lines [0]).getStartLine();
			this.posEnd.line=(lines [lines.length-1]).getEndLine();
		}

		__proto.getCode=function(){
			if(!this.hasAsy)return this.oCode;
			return this.code;
		}

		__proto.getEndLine=function(){
			return this.posEnd.line;
		}

		__proto.getStartLine=function(){
			return this.posStart.line;
		}

		return CodePiece;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-23 下午5:10:24
	*/
	//class as3analyser.parser.lex.ASLex
	var ASLex=(function(){
		function ASLex(){}
		__class(ASLex,'as3analyser.parser.lex.ASLex');
		ASLex.isWordBegin=function(s){
			return ASLex.alphaSigns[s]||ASLex.extSigns[s];
		}

		ASLex.isWordBody=function(s){
			return ASLex.isWordBegin(s)||ASLex.numSigns[s];
		}

		ASLex.init=function(){
			ASLex.addSign("a","z",ASLex.alphaSigns);
			ASLex.addSign("A","Z",ASLex.alphaSigns);
			ASLex.addSign("0","9",ASLex.numSigns);
		}

		ASLex.addSign=function(ss,e,tar){
			var i=0;
			var len=0;
			var s=0;
			s=ss.charCodeAt(0);
			len=e.charCodeAt(0);
			for(i=s;i<=len;i++){
				tar[String.fromCharCode(i)]=true;
				console.log("add :"+String.fromCharCode(i));
			}
		}

		ASLex.toWords=function(str){
			var i=0;
			var tWord;
			var len=0;
			len=str.length;
			var rst=[];
			var tch;
			for(i=0;i<len;i++){
				tch=str.charAt(i);
				if(!tWord){
					createNewWord();
					}else{
					if(tWord.type=="Word"&&ASLex.isWordBody(tch)){
						tWord.str+=tch;
						}else{
						savePre();
						createNewWord();
					}
				}
			}
			savePre();
			return rst;
			function savePre (){
				if(tWord){
					tWord.endPos=i-1;
					rst.push(tWord);
				}
			}
			function createNewWord (){
				tWord=new ASWord();
				tWord.str=tch;
				tWord.sPos=i;
				if(ASLex.isWordBegin(tch)){
					tWord.type="Word";
					}else{
					tWord.type="Other";
				}
			}
		}

		ASLex.numSigns={};
		__static(ASLex,
		['alphaSigns',function(){return this.alphaSigns={
		};},'extSigns',function(){return this.extSigns={"_":true,"$":true};}

		]);
		return ASLex;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-23 下午5:12:46
	*/
	//class as3analyser.parser.lex.ASWord
	var ASWord=(function(){
		function ASWord(){
			this.str="";
			this.sPos=0;
			this.endPos=0;
			this.type="Other";
		}

		__class(ASWord,'as3analyser.parser.lex.ASWord');
		ASWord.wordListToStr=function(wordList){
			var strs=[];
			var i=0;
			var len=0;
			len=wordList.length;
			for(i=0;i<len;i++){
				strs.push(wordList[i].str);
			}
			return strs.join("");
		}

		ASWord.Word="Word";
		ASWord.Other="Other";
		return ASWord;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-8-31 下午7:41:04
	*/
	//class as3analyser.parser.LineItem
	var LineItem=(function(){
		function LineItem(){
			this.lineIndex=0;
			this.lineStr=null;
			this.lineType=null;
			this.paramed=false;
			this.data=null;
			this.hasAsy=false;
		}

		__class(LineItem,'as3analyser.parser.LineItem');
		var __proto=LineItem.prototype;
		Laya.imps(__proto,{"as3analyser.parser.struct.ICodePiece":true})
		__proto.isAsy=function(){
			return this.data||this.hasAsy;
		}

		__proto.getCode=function(){
			if(this.data){
				return "return "+this.lineStr;
				}else{
				return this.lineStr;
			}
		}

		__proto.getEndLine=function(){
			return this.lineIndex;
		}

		__proto.getStartLine=function(){
			return this.lineIndex;
		}

		LineItem.create=function(str,lineIndex){
			var rst;
			rst=new LineItem();
			rst.lineStr=str;
			rst.lineIndex=lineIndex;
			return rst;
		}

		LineItem.getLineItems=function(str,ifTrim,reStruct){
			(ifTrim===void 0)&& (ifTrim=false);
			(reStruct===void 0)&& (reStruct=false);
			var lines;
			var i=0;
			var len=0;
			var tLine;
			var rst;
			var daptStr;
			var nLine;
			rst=[];
			lines=str.split("\n");
			len=lines.length;
			for(i=0;i<len;i++){
				tLine=new LineItem();
				tLine.lineIndex=1+i;
				tLine.lineStr=lines[i];
				rst.push(tLine);
				if(ifTrim){
					tLine.lineStr=StringTool$1.trimLeft(tLine.lineStr);
				}
				if(reStruct&&0){
					daptStr=StringTool$1.trimSide(tLine.lineStr);
					if(daptStr.length<2)continue ;
					var tSign;
					while(daptStr.length>0&&Defines.isBWrap(daptStr.charAt(daptStr.length-1))){
						nLine=new LineItem();
						nLine.lineStr=daptStr.charAt(daptStr.length-1);
						nLine.lineIndex=tLine.lineIndex+1;
						rst.push(nLine);
						daptStr=daptStr.substr(0,daptStr.length-1);
					}
				}
			}
			return rst;
		}

		return LineItem;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-8-31 下午8:23:44
	*/
	//class as3analyser.parser.PosItem
	var PosItem=(function(){
		function PosItem(line,index){
			this.line=0;
			this.index=0;
			this.str=null;
			this.oLine=0;
			(line===void 0)&& (line=0);
			(index===void 0)&& (index=0);
			this.line=line;
			this.index=index;
		}

		__class(PosItem,'as3analyser.parser.PosItem');
		PosItem.pre=function(a,b){
			if(a.line<b.line)return true;
			if(a.line>b.line)return false;
			return a.index<b.index;
		}

		return PosItem;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-23 下午4:01:43
	*/
	//class as3analyser.parser.SingleMemberParser
	var SingleMemberParser=(function(){
		function SingleMemberParser(){
			this.type=null;
			this.name=null;
			this.varType=null;
			this.modifiesO={};
			this.params=null;
			this.exType=null;
			this.defaultV=null;
		}

		__class(SingleMemberParser,'as3analyser.parser.SingleMemberParser');
		var __proto=SingleMemberParser.prototype;
		__proto.setLine=function(str){
			this.type=SingleMemberParser.getMemberType(str);
			str=this.getModifies(str);
			var arr;
			switch(this.type){
				case "function":
					this.name=StringTool$1.getBetween(str,this.type,"(",false);
					if(str.indexOf(" set ")>=0){
						this.exType="set";
					}
					if(str.indexOf(" get ")>=0){
						this.exType="get";
					};
					var i=0;
					i=str.lastIndexOf(")");
					if(i>=0){
						var tail;
						tail=str.substr(i);
						if(this.exType=="set"){
							tail=StringTool$1.getBetween(str,"(",")",false);
						}
						i=tail.indexOf(":");
						if(i>=0){
							arr=tail.split(":");
							if(arr[1]){
								this.varType=StringTool$1.trim(arr[1],SingleMemberParser.trimArr);
							}
						}
					}
					break ;
				default :
					if(str.indexOf(":")>=0){
						arr=str.split(":");
						str=arr[0];
						this.varType=arr[1];
						this.varType=StringTool$1.trim(this.varType,SingleMemberParser.trimArr);
					}
					str=str.replace(this.type,"");
					str=StringTool$1.trim(str,SingleMemberParser.trimArr);
					this.name=str;
				}
			if(this.varType&&this.varType.indexOf("=")>=0){
				arr=this.varType.split("=");
				this.varType=StringTool$1.trim(arr[0],SingleMemberParser.trimArr);
				this.defaultV=StringTool$1.trim(arr[0],SingleMemberParser.trimArr);
			}
			this.name=StringTool$1.trim(this.name);
		}

		__proto.getModifies=function(str){
			var i=0;
			var len=0;
			len=SingleMemberParser.modifies.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=SingleMemberParser.modifies[i];
				if(str.indexOf(tKey+" ")>=0){
					this.modifiesO[tKey]=true;
					str=str.replace(tKey,"");
				}
			}
			return str;
		}

		SingleMemberParser.getMemberType=function(str){
			var i=0;
			var len=0;
			len=SingleMemberParser.keyWords.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=SingleMemberParser.keyWords[i];
				if(str.indexOf(tKey+" ")>=0)return tKey;
			}
			return null;
		}

		SingleMemberParser.parseMember=function(lineStr){
			var rst;
			rst=new SingleMemberParser();
			rst.setLine(lineStr);
			return rst;
		}

		SingleMemberParser.parseMembers=function(lineStr){
			if(lineStr.indexOf(",")>=0)return [SingleMemberParser.parseMember(lineStr)];
			var type;
			type=SingleMemberParser.getMemberType(lineStr);
			var mStr;
			var arr;
			var dStr;
			arr=lineStr.split(type);
			mStr=arr[0];
			dStr=arr[1];
			var i=0;
			var len=0;
			var strs;
			strs=dStr.split(",");
			len=strs.length;
			var rst=[];
			for(i=0;i<len;i++){
				rst.push(SingleMemberParser.parseMember(mStr+" "+type+" "+strs[i]));
			}
			return rst;
		}

		__static(SingleMemberParser,
		['trimArr',function(){return this.trimArr=[";"," ","\r","\n","\t",String.fromCharCode(65279)];},'modifies',function(){return this.modifies=["public","private","protected","internal","static","override"];},'keyWords',function(){return this.keyWords=["var","const","function"];}
		]);
		return SingleMemberParser;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-2 下午7:09:11
	*/
	//class as3analyser.parser.VarParser
	var VarParser=(function(){
		function VarParser(){
			this.name=null;
			this.type=null;
			this.init=null;
			this.oStr=null;
			this.noType=null;
		}

		__class(VarParser,'as3analyser.parser.VarParser');
		var __proto=VarParser.prototype;
		__proto.getDefineStr=function(){
			var rst;
			rst="var "+this.name;
			if(this.type){
				rst+=":"+this.type;
			}
			return StringTool$1.ifNoAddToTail(rst,";");
		}

		__proto.getInitStr=function(){
			var rst;
			return StringTool$1.ifNoAddToTail(this.name+"="+this.init,";");
		}

		__proto.getNoType=function(oStr){
			var notype;
			notype=oStr;
			notype=StringTool$1.getReplace(notype,this.type,"");
			notype=StringTool$1.getReplace(notype,":","");
			return notype;
		}

		VarParser.getVar=function(str,parser){
			if(!parser)parser=new VarParser();
			parser.name=null;
			parser.init=null;
			parser.type=null;
			parser.oStr=str;
			var tArr;
			if(str.indexOf("=")>=0){
				parser.init=StringTool$1.getRight(str,"=");
				str=StringTool$1.getLeft(str,"=");
			}
			if(str.indexOf(":")>=0){
				parser.type=StringTool$1.getRight(str,":");
				str=StringTool$1.getLeft(str,":");
			}
			parser.name=str;
			var notype;
			notype=parser.oStr;
			notype=StringTool$1.getReplace(notype,parser.type,"");
			notype=StringTool$1.getReplace(notype,":","");
			parser.noType=notype;
			return parser;
		}

		VarParser.parseValueLine=function(line){
			var lineStr;
			lineStr=line.lineStr;
			var defines;
			defines=lineStr.split("var ");
			defines.splice(0,1);
			defines=StringTool$1.removeEmptyStr(defines);
			var singleVars;
			var i=0;
			var len=0;
			len=defines.length;
			var tVars;
			var tUnit;
			singleVars=[];
			for(i=0;i<len;i++){
				tUnit=defines[i];
				tVars=tUnit.split(",");
				tVars=StringTool$1.removeEmptyStr(tVars);
				singleVars=singleVars.concat(tVars);
			}
			len=singleVars.length;
			var tVarStr;
			var tParser;
			var defineList;
			defineList=[];
			var initList;
			var lineCount=0;
			lineCount=line.lineIndex;
			initList=[];
			for(i=0;i<len;i++){
				tVarStr=singleVars[i];
				tParser=VarParser.getVar(tVarStr,tParser);
				defineList.push(LineItem.create(tParser.getDefineStr(),lineCount));
				if(tParser.init){
					initList.push(LineItem.create(tParser.getInitStr(),lineCount));
					lineStr=tParser.getNoType(lineStr);
					}else{
					lineStr=StringTool$1.getReplace(lineStr,tParser.oStr,"");
				}
			}
			lineStr=StringTool$1.getReplace(lineStr,"var ","");
			line.lineStr=lineStr;
			return [defineList,initList];
		}

		return VarParser;
	})()


	/**
	*一些字符串操作函数
	*@author ww
	*
	*/
	//class as3analyser.tools.StringTool
	var StringTool$1=(function(){
		function StringTool(){}
		__class(StringTool,'as3analyser.tools.StringTool',null,'StringTool$1');
		StringTool.toUpCase=function(str){
			return str.toUpperCase();
		}

		StringTool.toLowCase=function(str){
			return str.toLowerCase();
		}

		StringTool.toUpHead=function(str){
			var rst;
			if(str.length<=1)return str.toUpperCase();
			rst=str.charAt(0).toUpperCase()+str.substr(1);
			return rst;
		}

		StringTool.toLowHead=function(str){
			var rst;
			if(str.length<=1)return str.toLowerCase();
			rst=str.charAt(0).toLowerCase()+str.substr(1);
			return rst;
		}

		StringTool.packageToFolderPath=function(packageName){
			var rst;
			rst=packageName.replace(".","/");
			return rst;
		}

		StringTool.insert=function(str,iStr,index){
			return str.substring(0,index)+iStr+str.substr(index);
		}

		StringTool.insertAfter=function(str,iStr,tarStr,isLast){
			(isLast===void 0)&& (isLast=false);
			var i=0;
			if(isLast){
				i=str.lastIndexOf(tarStr);
				}else{
				i=str.indexOf(tarStr);
			}
			if(i>=0){
				return StringTool.insert(str,iStr,i+tarStr.length);
			}
			return str;
		}

		StringTool.insertBefore=function(str,iStr,tarStr,isLast){
			(isLast===void 0)&& (isLast=false);
			var i=0;
			if(isLast){
				i=str.lastIndexOf(tarStr);
				}else{
				i=str.indexOf(tarStr);
			}
			if(i>=0){
				return StringTool.insert(str,iStr,i);
			}
			return str;
		}

		StringTool.insertParamToFun=function(funStr,params){
			var oldParam;
			oldParam=StringTool.getParamArr(funStr);
			var inserStr;
			inserStr=params.join(",");
			if(oldParam.length>0){
				inserStr=","+inserStr;
			}
			return StringTool.insertBefore(funStr,inserStr,")",true);
		}

		StringTool.trim=function(str,vList){
			if(!vList){
				vList=[" ","\r","\n","\t",String.fromCharCode(65279)];
			};
			var rst;
			var i=0;
			var len=0;
			rst=str;
			len=vList.length;
			for(i=0;i<len;i++){
				rst=StringTool.getReplace(rst,vList[i],"");
			}
			return rst;
		}

		StringTool.isEmpty=function(str){
			if(str.length<1)return true;
			return StringTool.emptyStrDic.hasOwnProperty(str);
		}

		StringTool.trimLeft=function(str){
			var i=0;
			i=0;
			var len=0;
			len=str.length;
			while(StringTool.isEmpty(str.charAt(i))&&i<len){
				i++;
			}
			if(i<len){
				return str.substr(i);
			}
			return "";
		}

		StringTool.trimRight=function(str){
			var i=0;
			i=str.length-1;
			while(StringTool.isEmpty(str.charAt(i))&&i>=0){
				i--;
			};
			var rst;
			rst=str.substring(0,i)
			if(i>=0){
				return str.substring(0,i+1);
			}
			return "";
		}

		StringTool.trimSide=function(str){
			var rst;
			rst=StringTool.trimLeft(str);
			rst=StringTool.trimRight(rst);
			return rst;
		}

		StringTool.trimButEmpty=function(str){
			return StringTool.trim(str,["\r","\n","\t"]);
		}

		StringTool.removeEmptyStr=function(strArr){
			var i=0;
			i=strArr.length-1;
			var str;
			for(i=i;i>=0;i--){
				str=strArr[i];
				str=as3analyser.tools.StringTool.trimSide(str);
				if(StringTool.isEmpty(str)){
					strArr.splice(i,1);
					}else{
					strArr[i]=str;
				}
			}
			return strArr;
		}

		StringTool.ifNoAddToTail=function(str,sign){
			if(str.indexOf(sign)>=0){
				return str;
			}
			return str+sign;
		}

		StringTool.getSelectLinesStr=function(lines,startLine,endLine){
			var i=0;
			var rLines;
			rLines=[];
			if(startLine<0)startLine=0;
			if(endLine>lines.length-1)endLine=lines.length-1;
			var tLine;
			for(i=startLine;i<=endLine;i++){
				tLine=lines[i];
				rLines.push(tLine.lineStr);
			}
			return rLines.join("\n");
		}

		StringTool.getPiecesCode=function(pieces,ifTrim){
			(ifTrim===void 0)&& (ifTrim=true);
			var pArr;
			pArr=[];
			var i=0;
			var len=0;
			var tPiece;
			len=pieces.length;
			for(i=0;i<len;i++){
				tPiece=pieces[i];
				pArr.push(tPiece.getCode());
			}
			if(ifTrim){
				StringTool.trimLines(pieces);
			}
			return pArr.join("\n");
		}

		StringTool.trimEmptyLine=function(str){
			var i=0;
			var len=0;
			var tLines;
			var tLine;
			tLines=str.split("\n");
			for(i=tLines.length-1;i>=0;i--){
				tLine=tLines[i];
				if(StringTool.isEmptyLine(tLine)){
					tLines.splice(i,1);
				}
			}
			return tLines.join("\n");
		}

		StringTool.trimLines=function(lines){
			var i=0;
			i=0;
			while(lines.length>0&&StringTool.isEmptyFunLineStr(lines[0])){
				lines.shift();
			}
			while(lines.length>0&&StringTool.isEmptyFunLineStr(lines[lines.length-1])){
				lines.pop();
			}
			return lines;
		}

		StringTool.isEmptyFunLineStr=function(str){
			str=as3analyser.tools.StringTool.trim(str);
			if(Defines.isBWrap(str)){
				return true;
			}
			if(str=="")return true;
			return false;
		}

		StringTool.isEmptyLine=function(str){
			str=as3analyser.tools.StringTool.trim(str);
			if(str=="")return true;
			return false;
		}

		StringTool.removeCommentLine=function(lines){
			var rst;
			rst=[];
			var i=0;
			var tLine;
			var adptLine;
			i=0;
			var len=0;
			var index=0;
			len=lines.length;
			while(i<len){
				adptLine=tLine=lines[i];
				if((index=tLine.indexOf("/**"))&&(index>=0)){
					adptLine=tLine.substring(0,index-1);
					StringTool.addIfNotEmpty(rst,adptLine);
					while(i<len){
						tLine=lines[i];
						if((index=tLine.indexOf("*/"))&&(index>=0)){
							adptLine=tLine.substring(index+2);
							StringTool.addIfNotEmpty(rst,adptLine);
							break ;
						}
						i++;
					}
					}else if(tLine.indexOf("//")>=0){
					if(as3analyser.tools.StringTool.trim(tLine).indexOf("//")==0){
						}else{
						StringTool.addIfNotEmpty(rst,adptLine);
					}
					}else{
					StringTool.addIfNotEmpty(rst,adptLine);
				}
				i++;
			}
			return rst;
		}

		StringTool.removeCommentLineS=function(lines){
			var rst;
			rst=[];
			var i=0;
			var tLine;
			var adptLine;
			i=0;
			var len=0;
			var index=0;
			var tLineItem;
			len=lines.length;
			while(i<len){
				tLineItem=lines[i];
				adptLine=tLine=tLineItem.lineStr;
				if((index=tLine.indexOf("/*"))&&(index>=0)){
					adptLine=tLine.substring(0,index-1);
					StringTool.addIfNotEmptyS(rst,adptLine,tLineItem);
					while(i<len){
						tLineItem=lines[i];
						adptLine=tLine=tLineItem.lineStr;
						if((index=tLine.indexOf("*/"))&&(index>=0)){
							adptLine=tLine.substring(index+2);
							StringTool.addIfNotEmptyS(rst,adptLine,tLineItem);
							break ;
						}
						i++;
					}
					}else if(tLine.indexOf("//")>=0){
					if(as3analyser.tools.StringTool.trim(tLine).indexOf("//")==0){
						}else{
						StringTool.addIfNotEmptyS(rst,adptLine,tLineItem);
					}
					}else{
					StringTool.addIfNotEmptyS(rst,adptLine,tLineItem);
				}
				i++;
			}
			return rst;
		}

		StringTool.addIfNotEmptyS=function(arr,str,lineItem){
			if(!str)return;
			var tStr;
			tStr=StringTool.trim(str);
			if(tStr!=""){
				arr.push(lineItem);
			}
		}

		StringTool.addIfNotEmpty=function(arr,str){
			if(!str)return;
			var tStr;
			tStr=StringTool.trim(str);
			if(tStr!=""){
				arr.push(str);
			}
		}

		StringTool.trimExt=function(str,vars){
			var rst;
			rst=StringTool.trim(str);
			var i=0;
			var len=0;
			len=vars.length;
			for(i=0;i<len;i++){
				rst=StringTool.getReplace(rst,vars[i],"");
			}
			return rst;
		}

		StringTool.getBetween=function(str,left,right,ifMax){
			(ifMax===void 0)&& (ifMax=false);
			if(!str)return "";
			if(!left)return "";
			if(!right)return "";
			var lId=0;
			var rId=0;
			lId=str.indexOf(left);
			if(lId<0)return"";
			if(ifMax){
				rId=str.lastIndexOf(right);
				if(rId<lId)return "";
				}else{
				rId=str.indexOf(right,lId);
			}
			if(rId<0)return "";
			return str.substring(lId+left.length,rId);
		}

		StringTool.getSplitLine=function(line,split){
			(split===void 0)&& (split=" ");
			return line.split(split);
		}

		StringTool.getLeft=function(str,sign){
			var i=0;
			i=str.indexOf(sign);
			return str.substr(0,i);
		}

		StringTool.getRight=function(str,sign){
			var i=0;
			i=str.indexOf(sign);
			return str.substr(i+1);
		}

		StringTool.delelteItem=function(arr){
			while (arr.length>0){
				if(arr[0]==""){
					arr.shift();
					}else{
					break ;
				}
			}
		}

		StringTool.getWords=function(line){
			var rst=StringTool.getSplitLine(line);
			StringTool.delelteItem(rst);
			return rst;
		}

		StringTool.getOLine=function(pos,lines,oLines){
			var tLine=lines[pos.line];
			return oLines.indexOf(tLine);
		}

		StringTool.getLines=function(posS,posE,lines,rawLines){
			var startLine=0;
			startLine=posS.line;
			var endLine=0;
			endLine=posE.line;
			if(rawLines){
				startLine=StringTool.getOLine(posS,lines,rawLines);
				endLine=StringTool.getOLine(posE,lines,rawLines);
				lines=rawLines;
			}
			return StringTool.getLinesI(startLine,endLine,lines);
		}

		StringTool.getLinesI=function(startLine,endLine,lines){
			var i=0;
			var rst=[];
			for(i=startLine;i<=endLine;i++){
				rst.push(lines[i]);
			}
			return rst;
		}

		StringTool.structfy=function(str,inWidth,removeEmpty){
			(inWidth===void 0)&& (inWidth=4);
			(removeEmpty===void 0)&& (removeEmpty=true);
			if(removeEmpty){
				str=as3analyser.tools.StringTool.trimEmptyLine(str);
			};
			var lines;
			var tIn=0;
			tIn=0;
			var tInStr;
			tInStr=StringTool.getEmptyStr(0);
			lines=str.split("\n");
			var i=0;
			var len=0;
			var tLineStr;
			len=lines.length;
			for(i=0;i<len;i++){
				tLineStr=lines[i];
				tLineStr=as3analyser.tools.StringTool.trimLeft(tLineStr);
				tLineStr=as3analyser.tools.StringTool.trimRight(tLineStr);
				tIn+=StringTool.getPariCount(tLineStr);
				if(tLineStr.indexOf("}")>=0){
					tInStr=StringTool.getEmptyStr(tIn*inWidth);
				}
				tLineStr=tInStr+tLineStr;
				lines[i]=tLineStr;
				tInStr=StringTool.getEmptyStr(tIn*inWidth);
			}
			return lines.join("\n");
		}

		StringTool.getEmptyStr=function(width){
			if(!StringTool.emptyDic.hasOwnProperty(width)){
				var i=0;
				var len=0;
				len=width;
				var rst;
				rst="";
				for(i=0;i<len;i++){
					rst+=" ";
				}
				StringTool.emptyDic[width]=rst;
			}
			return StringTool.emptyDic[width];
		}

		StringTool.getPariCount=function(str,inChar,outChar){
			(inChar===void 0)&& (inChar="{");
			(outChar===void 0)&& (outChar="}");
			var varDic;
			varDic={};
			varDic[inChar]=1;
			varDic[outChar]=-1;
			var i=0;
			var len=0;
			var tChar;
			len=str.length;
			var rst=0;
			rst=0;
			for(i=0;i<len;i++){
				tChar=str.charAt(i);
				if(varDic.hasOwnProperty(tChar)){
					rst+=varDic[tChar];
				}
			}
			return rst;
		}

		StringTool.readInt=function(str,startI){
			(startI===void 0)&& (startI=0);
			var rst=NaN;
			rst=0;
			var tNum=0;
			var tC;
			var i=0;
			var isBegin=false;
			isBegin=false;
			var len=0;
			len=str.length;
			for(i=startI;i<len;i++){
				tC=str.charAt(i);
				if(Number(tC)>0||tC=="0"){
					rst=10*rst+Number(tC);
					if(rst>0)isBegin=true;
					}else{
					if(isBegin)return rst;
				}
			}
			return rst;
		}

		StringTool.getReplace=function(str,oStr,nStr){
			if(!str)return "";
			str+="";
			var rst;
			rst=str.replace(new RegExp(oStr,"g"),nStr);
			return rst;
		}

		StringTool.getWordCount=function(str,findWord){
			var rg=new RegExp(findWord,"g")
			return str.match(rg).length;
		}

		StringTool.getResolvePath=function(path,basePath){
			if(StringTool.isAbsPath(path)){
				return path;
			};
			var tSign;
			tSign="\\";
			if(basePath.indexOf("/")>=0){
				tSign="/";
			}
			if(basePath.charAt(basePath.length-1)==tSign){
				basePath=basePath.substr(0,basePath.length-1);
			};
			var parentSign;
			parentSign=".."+tSign;
			var tISign;
			tISign="."+tSign;
			var pCount=0;
			pCount=StringTool.getWordCount(path,parentSign);
			path=as3analyser.tools.StringTool.getReplace(path,parentSign,"");
			path=as3analyser.tools.StringTool.getReplace(path,tISign,"");
			var i=0;
			var len=0;
			len=pCount;
			var iPos=0;
			for(i=0;i<len;i++){
				basePath=StringTool.removeLastSign(path,tSign);
			}
			return basePath+tSign+path;
		}

		StringTool.isAbsPath=function(path){
			if(path.indexOf(":")>=0)return true;
			return false;
		}

		StringTool.removeLastSign=function(str,sign){
			var iPos=0;
			iPos=str.lastIndexOf(sign);
			str=str.substring(0,iPos);
			return str;
		}

		StringTool.getParamArr=function(str){
			var paramStr;
			paramStr=as3analyser.tools.StringTool.getBetween(str,"(",")",true);
			if(StringTool.trim(paramStr).length<1)return [];
			return paramStr.split(",");
		}

		StringTool.nextIS=function(str,pos,lines){
			var tStr;
			var tLine;
			var i=0;
			var len=0;
			var tIndex=0;
			tIndex=pos.index;
			len=lines.length;
			tStr="";
			for(i=pos.line;i<len;i++){
				tLine=lines[i];
				tStr+=StringTool.trimLeft(tLine.lineStr.substr(tIndex));
				tIndex=0;
				if(tStr.indexOf(str)==0){
					return true;
					}else{
					if(tStr.length>0){
						return false;
					}
				}
			}
			return false;
		}

		StringTool.findFirstMatchLineS=function(str,pos,lines){
			var i=0;
			var len=0;
			var tLine;
			var rst;
			len=lines.length;
			var tIndex=0;
			if(!pos)pos=new PosItem();
			tIndex=pos.index;
			for(i=pos.line;i<len;i++){
				tLine=lines[i].lineStr;
				tIndex=tLine.indexOf(str,tIndex);
				if(tIndex>=0){
					rst=new PosItem();
					rst.line=i;
					rst.index=tIndex;
					rst.oLine=lines[i].lineIndex;
					return rst;
				}
				tIndex=0;
			}
			return rst;
		}

		StringTool.copyStr=function(str){
			return str.substring();
		}

		StringTool.findPair=function(l,r,pos,lines){
			var tCount=0;
			var first=0;
			var tPos;
			var rPos;
			var lPos;
			var valueDic;
			valueDic={};
			valueDic[l]=1;
			valueDic[r]=-1;
			tPos=StringTool.findFirstMatchLineS(l,pos,lines);
			var posList;
			posList=[];
			if(tPos){
				setTPos(tPos,l);
				while(tCount>0){
					lPos=StringTool.findFirstMatchLineS(l,tPos,lines);
					rPos=StringTool.findFirstMatchLineS(r,tPos,lines);
					if(!lPos&&!rPos){
						break ;
					}
					if(!lPos){
						setTPos(rPos,r);
						continue ;
					}
					if(!rPos){
						setTPos(lPos,l);
						continue ;
					}
					if(PosItem.pre(rPos,lPos)){
						setTPos(rPos,r);
						}else{
						setTPos(lPos,l);
					}
				}
				if(tCount==0){
					return posList;
					}else{
					return null;
				}
			}
			return null;
			function setTPos (pos,str){
				tPos=pos;
				tPos.str=str;
				tPos.index++;
				posList.push(tPos);
				tCount+=valueDic[str];
			}
		}

		StringTool.ArrayToString=function(arr){
			var rst;
			rst="[{items}]".replace(new RegExp("\\{items\\}","g"),StringTool.getArrayItems(arr));
			return rst;
		}

		StringTool.getArrayItems=function(arr){
			var rst;
			if(arr.length<1)return "";
			rst=StringTool.parseItem(arr[0]);
			var i=0;
			var len=0;
			len=arr.length;
			for(i=1;i<len;i++){
				rst+=","+StringTool.parseItem(arr[i]);
			}
			return rst;
		}

		StringTool.parseItem=function(item){
			var rst;
			rst="\""+item+"\"";
			return "";
		}

		StringTool.emptyDic={};
		__static(StringTool,
		['emptyStrDic',function(){return this.emptyStrDic={
				" ":true,
				"\r":true,
				"\n":true,
				"\t":true
		};}

		]);
		return StringTool;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-7-30 下午4:49:08
	*/
	//class as3analyser.tools.ToolFuns
	var ToolFuns=(function(){
		function ToolFuns(){}
		__class(ToolFuns,'as3analyser.tools.ToolFuns');
		ToolFuns.saveTxtFile=function(fileName,fileContent){
			FileManager.createTxtFile(fileName,fileContent);
		}

		ToolFuns.readTxtFile=function(fileName){
			return FileManager.readTxtFile(fileName);
		}

		ToolFuns.getArrFromDic=function(dic){
			var rst;
			rst=[];
			var key;
			for(key in dic){
				rst.push(key);
			}
			return rst;
		}

		ToolFuns.getArrFromObj=function(obj){
			var rst;
			rst=[];
			var key;
			for(key in obj){
				rst.push(obj[key]);
			}
			return rst;
		}

		ToolFuns.getNotIn=function(oA,oB){
			var rst;
			rst={};
			var key;
			for (key in oA){
				if(!oB.hasOwnProperty(key)){
					rst[key]=true;
				}
			}
			return rst;
		}

		ToolFuns.mergeO=function(oA,oB){
			var rst;
			rst={};
			var key;
			for (key in oA){
				rst[key]=true;
			}
			for (key in oB){
				rst[key]=true;
			}
			return rst;
		}

		ToolFuns.getSimpleFileName=function(filePath){
			return filePath.substr(filePath.lastIndexOf("\\")+1);
		}

		ToolFuns.myTrace=function(msg){
			console.log(msg);
		}

		return ToolFuns;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-8-31 下午7:19:15
	*/
	//class as3analyser.Tracer
	var Tracer=(function(){
		function Tracer(){}
		__class(Tracer,'as3analyser.Tracer');
		Tracer.myTrace=function(msg){}
		return Tracer;
	})()


	/**
	*本类用于节点数据不同格式间的转换
	*@author ww
	*/
	//class laya.editor.core.design.DesignInfo
	var DesignInfo=(function(){
		function DesignInfo(){
			this.type=null;
			this.child=null;
			this.props=null;
			this.compId=0;
		}

		__class(DesignInfo,'laya.editor.core.design.DesignInfo');
		DesignInfo.uiObjToXml=function(uiObj,aniXml){
			var xml;
			xml=new XMLElement();
			xml.setLocalName(uiObj.type);
			if(!aniXml){
				aniXml=new XMLElement();
				aniXml.setLocalName("Ani");
			};
			var key;
			var props;
			props=uiObj.props;
			for(key in props){
				xml.setAttribute(key,props[key]);
			};
			var childs;
			childs=uiObj.child;
			if(!childs)childs=[];
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				xml.appendChild(DesignInfo.uiObjToXml(childs[i],aniXml));
			}
			xml.setAttribute("editorInfo",DesignInfo.getIDEValue(uiObj));
			var frames;
			frames=uiObj.frames;
			if(!frames)frames=[];
			var frameXml;
			frameXml=new XMLElement();
			frameXml.setLocalName("tarAni");
			frameXml.setAttribute("target",uiObj.compId);
			len=frames.length;
			var tFrame;
			var tFrameO;
			for(i=0;i<len;i++){
				tFrameO=frames[i];
				tFrame=new XMLElement();
				tFrame.setLocalName("frame");
				props=tFrameO.props;
				for(key in props){
					tFrame.setAttribute(key,props[key]);
				}
				tFrame.setAttribute("editorInfo",DesignInfo.getIDEValue(tFrameO,DesignInfo.frameSaveKeys));
				frameXml.appendChild(tFrame);
			}
			return xml;
		}

		DesignInfo.getIDEValue=function(node,saveKeys){
			if(!saveKeys)saveKeys=DesignInfo.saveEmpty;
			var rst;
			var key;
			var KeyValues;
			KeyValues=[];
			for(key in node){
				if(!DesignInfo.specialKeys.hasOwnProperty(key)||saveKeys.hasOwnProperty(key)){
					if(key=="compId")
						KeyValues.push(key+"="+node[key]);
					if(key=="source"){
						KeyValues.push(key+"="+node[key]);
					}
				}
			}
			rst=KeyValues.join(";");
			return rst;
		}

		DesignInfo.xmlStrToUIObj=function(xmlString){
			return DesignInfo.uiXmlToObj(Utils.parseXMLFromString(xmlString));
		}

		DesignInfo.uiXmlToObj=function(xml){
			var xmlObj;
			xmlObj=XML2Object.parse(xml);
			var rst;
			var aniDic;
			aniDic=DesignInfo.parseFramesData(xmlObj.cList[0]);
			rst=DesignInfo.getUIObjByXmlObj(xmlObj.cList[0],aniDic);
			return rst;
		}

		DesignInfo.parseFramesData=function(data){
			var aniDic;
			aniDic={};
			var ani;
			ani=data.cList[0];
			if(!ani)return aniDic;
			var frames;
			frames=ani.c["tarAni"];
			if(!frames)frames=[];
			var i=0,len=0;
			len=frames.length;
			var tAni;
			var tarFrames;
			for(i=0;i<len;i++){
				tAni=frames[i];
				tarFrames=tAni.c.frame;
				if(!tarFrames)tarFrames=[];
				if(! (tarFrames instanceof Array)){
					tarFrames=[tarFrames];
				}
				aniDic[tAni.p["target"]]=DesignInfo.parseTarFrames(tarFrames);
			}
			return aniDic;
		}

		DesignInfo.parseTarFrames=function(tarFrames){
			var i=0,len=0;
			len=tarFrames.length;
			var tFrame;
			var rst;
			rst=[];
			for(i=0;i<len;i++){
				rst.push(DesignInfo.createNodeObj(tarFrames[i]));
			}
			return rst;
		}

		DesignInfo.getUIObjByXmlObj=function(xmlObj,aniDic){
			var rst;
			var cList;
			rst=DesignInfo.createNodeObj(xmlObj);
			var props;
			var key;
			var i=0,len=0;
			cList=xmlObj.cList;
			var frames;
			frames=[];
			if(cList)
				len=cList.length;
			var tObj;
			var childs;
			childs=[];
			for(i=0;i<len;i++){
				tObj=cList[i];
				if(tObj.Name=="parsererror"){
					throw new Error();
					continue ;
				}
				if(tObj.Name=="Ani")continue ;
				if(!tObj.Name)continue ;
				if(tObj.Name=="")continue ;
				if(tObj.Name=="frame"){
					frames.push(DesignInfo.createNodeObj(tObj));
					}else{
					childs.push(DesignInfo.getUIObjByXmlObj(tObj,aniDic));
				}
			}
			rst.child=childs;
			if(aniDic[rst.compId])
				rst.frames=aniDic[rst.compId];
			return rst;
		}

		DesignInfo.createNodeObj=function(data){
			var rst;
			rst={};
			rst.type=data.Name;
			rst.props={};
			if(rst.type=="UIView"&&!rst.source){
				rst.source=data.p.source;
			}
			if(!rst.type){
				debugger;
			}
			DesignInfo.createValueObj(data.p,rst.props);
			delete rst["frame"];
			DesignInfo.solveEditorInfo(rst);
			return rst;
		}

		DesignInfo.createValueObj=function(srcProps,rst){
			if(!rst)
				rst={};
			var key;
			for(key in srcProps){
				rst[key]=ObjectTools.getStrTypedValue(srcProps[key]);
			}
			return rst;
		}

		DesignInfo.solveEditorInfo=function(node){
			var keyValueStr;
			keyValueStr=node.props["editorInfo"];
			delete node.props["editorInfo"];
			var keyvalueStrs;
			if(keyValueStr){
				keyvalueStrs=keyValueStr.split(";");
				var i=0,len=0;
				var tArr;
				len=keyvalueStrs.length;
				for(i=0;i<len;i++){
					tArr=keyvalueStrs[i].split("=");
					node[tArr[0]]=ObjectTools.getStrTypedValue(tArr[1]);
				}
			}
		}

		DesignInfo.EditorInfo="editorInfo";
		DesignInfo.Frame="frame";
		DesignInfo.Ani="Ani";
		DesignInfo.TarAni="tarAni";
		DesignInfo.Target="target";
		DesignInfo.saveEmpty={};
		__static(DesignInfo,
		['specialKeys',function(){return this.specialKeys={
				type:true,
				child:true,
				props:true,
				editorInfo:true,
				frames:true
				};},'frameSaveKeys',function(){return this.frameSaveKeys={
				type:true
		};}

		]);
		return DesignInfo;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-15 下午2:55:24
	*/
	//class laya.editor.core.design.TreeData
	var TreeData=(function(){
		function TreeData(){
			this._nodeDic=null;
			this._root=null;
			this._nodeList=null;
		}

		__class(TreeData,'laya.editor.core.design.TreeData');
		var __proto=TreeData.prototype;
		__proto.addChild=function(child,parent){
			TreeData.getNodeChilds(parent).push(child);
			this.setNodeParent(child,parent);
			return child;
		}

		__proto.removeSelf=function(child){
			this.removeChild(child,this.getNodeParent(child));
		}

		__proto.removeChild=function(child,parent){
			child.nodeParent=null;
			if(!parent)return child;
			var childList;
			childList=TreeData.getNodeChilds(parent);
			var i=0,len=0;
			len=childList.length;
			for(i=len-1;i>=0;i--){
				if(this.isNodeSame(childList[i],child)){
					childList.splice(i,1);
				}
			}
			return child;
		}

		__proto.isChildE=function(parent,child){
			if (!parent)return false;
			while (child){
				if (this.getNodeParent(child)==parent)return true;
				child=this.getNodeParent(child);
			}
			return false;
		}

		__proto.isInTree=function(pNode,child){
			return pNode==child || this.isChildE(pNode,child);
		}

		__proto.insertToTarParent=function(tarA,tars,after){
			(after===void 0)&& (after=false);
			var tIndex=0;
			var parent;
			if(!tarA)return;
			parent=this.getNodeParent(tarA);
			if(!parent)return;
			this.transTarsParent(parent,tars);
			var i=0,len=0;
			len=tars.length;
			for(i=0;i<len;i++){
				this.removeSelf(tars[i]);
				tIndex=this.getChildIndex(tarA,parent);
				if(after)tIndex++;
				this.addChildAt(tars[i],tIndex,parent);
			}
		}

		//insertToParent(parent,tars,tIndex);
		__proto.insertToParent=function(parent,tars,index){
			(index===void 0)&& (index=-1);
			if(!parent)return;
			this.transTarsParent(parent,tars);
			this.removeItemFromParent(tars);
			if(index<0)index=this.numChildren(parent);
			var i=0,len=0;
			len=tars.length;
			for(i=0;i<len;i++){
				this.transParent(tars[i],parent);
				this.addChildAt(tars[i],index,parent);
			}
		}

		__proto.transTarsParent=function(parent,tars){
			var i=0,len=0;
			len=tars.length;
			for(i=0;i<len;i++){
				this.transParent(tars[i],parent);
			}
		}

		__proto.removeItemFromParent=function(tars){
			var i=0,len=0;
			len=tars.length;
			for(i=0;i<len;i++){
				this.removeSelf(tars[i]);
			}
		}

		__proto.transParent=function(tar,newParent){
			Notice$1.notify("Display_transParent",[tar,newParent]);
		}

		__proto.addChildAt=function(child,index,parent){
			if(child==parent){
				throw new Error("appendChildAt:add self to self");
			}
			this.removeSelf(child);
			var childs;
			childs=TreeData.getNodeChilds(parent);
			if (index >=0 && index <=childs.length){
				childs.splice(index,0,child);
				this.setNodeParent(child,parent);
				return child;
				}else {
				throw new Error("appendChildAt:The index is out of bounds");
			}
			return child;
		}

		__proto.isNodeSame=function(nodeA,nodeB){
			if(!nodeA||!nodeB)return false;
			return nodeA==nodeB||nodeA.compId==nodeB.compId;
		}

		__proto.numChildren=function(parent){
			return TreeData.getNodeChilds(parent).length;
		}

		__proto.getChildIndex=function(child,parent){
			var i=0,len=0;
			var childs;
			childs=TreeData.getNodeChilds(parent);
			len=childs.length;
			for(i=0;i<len;i++){
				if(this.isNodeSame(childs[i],child))return i;
			}
			return TreeData.getNodeChilds(parent).indexOf(child);
		}

		__proto.getNodeByID=function(id){
			return this._nodeDic[id];
		}

		__proto.getNodeParent=function(child){
			return this.getNodeByID(child.nodeParent);
		}

		__proto.setNodeParent=function(child,parent){
			if(TreeData.getNodeID(child)==TreeData.getNodeID(parent)){
				debugger;
			}
			child.nodeParent=TreeData.getNodeID(parent);
		}

		__proto.getNodeLabel=function(node){
			var str;
			if(node.type=="Script"){
				str=AppendPropGroupTool.getScriptName(node.source);
			}else
			if(node.props["var"]){
				str=node.type+"("+node.props["var"]+")";
			}else
			if(node.props.name){
				str=node.type+"("+node.props.name+")";
			}else
			if(node.props.preset){
				var presetName;
				presetName=node.props.preset.split("/").pop();
				presetName=StringTool.getReplace(presetName,".prefab","");
				str=node.type+"("+presetName+")";
				}else{
				str=node.type
			}
			return str;
		}

		__proto.reset=function(){
			this._root=null;
			this._nodeDic={};
			this._nodeList=[];
		}

		__proto.setData=function(uiObj){
			this.reset();
			this._root=uiObj;
			this.modifyNode(this._root,null);
		}

		__proto.modifyNode=function(node,parent,isAniNode){
			(isAniNode===void 0)&& (isAniNode=true);
			this._nodeList.push(node);
			delete node.x;
			delete node.y;
			if(!node.compId){
				debugger;
			}
			node.isAniNode=isAniNode;
			this._nodeDic[node.compId]=node;
			this.setNodeParent(node,parent);
			node.label=this.getNodeLabel(node);
			var i=0,len=0;
			var childs;
			childs=TreeData.getNodeChilds(node);
			len=childs.length;
			var childAni=false;
			childAni=isAniNode&&(!FilterFuns.isUnAnimationAbleType(node.type));
			for(i=0;i<len;i++){
				this.modifyNode(childs[i],node,childAni);
			}
			node.hasChild=node.isDirectory=childs.length>0;
			delete node["frames"];
		}

		__proto.getTreeArr=function(){
			return this._nodeList;
		}

		__proto.recordFrameData=function(node,frame,workChild){
			(workChild===void 0)&& (workChild=false);
			if(!node)node=this._root;
			TreeData.recordTreeFrame(node,frame);
		}

		__proto.getMaxFrame=function(){
			var maxFrame=0;
			var i=0,len=0;
			var nodes;
			var tFrameCount=0;
			nodes=this._nodeList;
			len=nodes.length;
			maxFrame=0;
			for(i=0;i<len;i++){
				tFrameCount=TreeData.getNodeMaxFrame(nodes[i]);
				if(maxFrame<tFrameCount){
					maxFrame=tFrameCount;
				}
			}
			return maxFrame;
		}

		__getset(0,__proto,'root',function(){
			return this._root;
		});

		TreeData.getNodeID=function(node){
			if(!node)return-1;
			return node.compId;
		}

		TreeData.getNodeChilds=function(node){
			if(!node.child){
				node.child=[];
			}
			return node.child;
		}

		TreeData.cleanNode=function(node){
			var i=0,len=0;
			len=TreeData._cleanNames.length;
			for(i=0;i<len;i++){
				delete node[TreeData._cleanNames[i]];
			};
			var childs;
			childs=TreeData.getNodeChilds(node);
			len=childs.length;
			for(i=0;i<len;i++){
				TreeData.cleanNode(childs[i]);
			}
		}

		TreeData.recordTreeFrame=function(node,frame,workChild){
			(workChild===void 0)&& (workChild=false);
			TreeData.recordFrame(node,frame,false);
			if(!workChild)return;
			var i=0,len=0;
			var childs;
			childs=TreeData.getNodeChilds(node);
			len=childs.length;
			for(i=0;i<len;i++){
				TreeData.recordTreeFrame(childs[i],frame,workChild);
			}
		}

		TreeData.isNodeFrameChanged=function(node,frame){
			return true;
		}

		TreeData.recordFrame=function(node,frame,autoCreate){
			(autoCreate===void 0)&& (autoCreate=false);
			var frameData;
			frameData=TreeData.getFrameData(node,frame,autoCreate);
			if(!frameData){
				return;
			}
			TreeData.copyAniValues(frameData.props,node.props);
		}

		TreeData.getNodeMaxFrame=function(node){
			var frames;
			frames=TreeData.getNodeFrames(node);
			if(frames.length<1)return 0;
			return frames[frames.length-1].frame;
		}

		TreeData.getFrameProps=function(frameData){
			if(!frameData.props){
				frameData.props={};
			}
			return frameData.props;
		}

		TreeData.copyAniValues=function(dest,src){
			var key;
			for(key in src){
				if((typeof (src[key])=='object')){
					debugger;
				}
				dest[key]=src[key];
				if(ObjectTools.isNaN(dest[key])){
					debugger;
				}
			}
		}

		TreeData.getFrameData=function(node,frame,autoCreate){
			(autoCreate===void 0)&& (autoCreate=true);
			var frames;
			frames=TreeData.getNodeFrames(node);
			var pos=0;
			pos=ObjectTools.findItemPos(frames,"frame",frame);
			if(pos<0){
				if(!autoCreate){
					return null;
					}else{
					return TreeData.addFrame(node,frame);
				}
				}else{
				return frames[pos];
			}
		}

		TreeData.getWrapFrame=function(node,frame,autoCreate){
			(autoCreate===void 0)&& (autoCreate=true);
			TreeData.sortNodeFrames(node);
			var i=0,len=0;
			var frames;
			frames=TreeData.getNodeFrames(node);
			len=frames.length;
			var tFrame;
			for(i=0;i<len;i++){
				tFrame=frames[i];
				if(tFrame.frame==frame){
					return [tFrame];
				}
				if(tFrame.frame>frame){
					break ;
				}
			}
			if(tFrame&&tFrame.frame>=frame){
				if(tFrame.frame==frame){
					return [tFrame];
				}else
				if(tFrame.frame>frame){
					return [frames[i-1],tFrame];
				}
				}else{
				var frameProps;
				frameProps=tFrame?ObjectTools.copyObj(tFrame.props):ObjectTools.copyObj(node.props);
				tFrame=TimeFrameData.create(frame,frameProps);
				if(autoCreate){
					TreeData.addFrameToNode(tFrame,node);
					}else{
				}
				return [tFrame];
			}
			return null;
		}

		TreeData.getNodeFrameProps=function(node,frame){
			var wrapsFrames;
			wrapsFrames=TreeData.getWrapFrame(node,frame,false);
			var rst;
			if(wrapsFrames.length==1){
				rst=wrapsFrames[0].props;
				}else{
				rst=TreeData.getFrameProp(wrapsFrames[0],wrapsFrames[1],frame);
			}
			return ObjectTools.copyObj(rst);
		}

		TreeData.setDefaultValues=function(propA,propB){
			TreeData.setDefaultValueTo(propA,propB);
			TreeData.setDefaultValueTo(propB,propA);
		}

		TreeData.setDefaultValueTo=function(propA,propB){
			var key;
			for(key in propA){
				if(!propB.hasOwnProperty(key)){
					if(TreeData.defaultValueDic.hasOwnProperty(key)){
						propB[key]=TreeData.defaultValueDic[key];
						}else{
						propB[key]=propA[key];
					}
				}
			}
		}

		TreeData.getFrameProp=function(leftFrame,rightFrame,frame){
			var left=0;
			var right=0;
			var props;
			props={};
			left=leftFrame.frame;
			right=rightFrame.frame;
			var percent=NaN;
			percent=(frame-left)/(right-left);
			var key;
			var leftProps;
			var rightProps;
			leftProps=leftFrame.props;
			rightProps=rightFrame.props;
			TreeData.setDefaultValues(rightProps,leftProps);
			var leftValue=NaN;
			var rightValue=NaN;
			for(key in leftProps){
				if(ObjectTools.isNumber(leftProps[key])){
					leftValue=parseFloat(leftProps[key]);
					rightValue=parseFloat(rightProps[key]);
					props[key]=leftValue+percent*(rightValue-leftValue);
					}else{
					props[key]=leftProps[key];
				}
				if(ObjectTools.isNaN(props[key])){
					debugger;
				}
			}
			return props;
		}

		TreeData.sortNodeFrames=function(node){
			var frames=TreeData.getNodeFrames(node);
			frames.sort(MathUtil.sortByKey("frame"));
		}

		TreeData.getNodeFrames=function(node){
			if(!node.frames){
				var frameData;
				frameData=TimeFrameData.create(0,ObjectTools.copyObj(node.props));
				node.frames=[frameData];
			}
			return node.frames;
		}

		TreeData.displayFrame=function(node,frame){
			var disProps;
			disProps=TreeData.getNodeFrameProps(node,frame);
			TreeData.copyAniValues(node.props,disProps);
		}

		TreeData.displayTreeToFrame=function(node,frame,self,child){
			(self===void 0)&& (self=true);
			(child===void 0)&& (child=true);
			if(self){
				TreeData.displayFrame(node,frame);
			}
			if(!child)return;
			var i=0,len=0;
			var childs;
			childs=TreeData.getNodeChilds(node);
			len=childs.length;
			for(i=0;i<len;i++){
				TreeData.displayTreeToFrame(childs[i],frame,true,true);
			}
		}

		TreeData.addFrame=function(node,frame,props){
			if(!props){
				props={};
				var wrapFrames;
				wrapFrames=TreeData.getWrapFrame(node,frame);
				TreeData.copyAniValues(props,wrapFrames[0].props);
			};
			var frameData;
			frameData=TimeFrameData.create(frame,props);
			TreeData.addFrameToNode(frameData,node);
			return frameData;
		}

		TreeData.addFrameToNode=function(frameData,node){
			var preFrameData;
			preFrameData=TreeData.getFrameData(node,frameData.frame,false);
			if(preFrameData){
				TreeData.copyAniValues(preFrameData.props,frameData.props);
				}else{
				var frames;
				frames=TreeData.getNodeFrames(node);
				frames.push(frameData);
				TreeData.sortNodeFrames(node);
			}
		}

		TreeData.moveFrame=function(node,preFrame,newFrame){}
		TreeData.createByUIObj=function(uiObj){
			var treeData;
			treeData=new TreeData();
			treeData.setData(uiObj);
			return treeData;
		}

		__static(TreeData,
		['_cleanNames',function(){return this._cleanNames=
			[
			"label",
			"nodeParent"];},'defaultValueDic',function(){return this.defaultValueDic={
				x:0,
				y:0,
				scaleX:1,
				scaleY:1,
				rotation:0
				};},'defaultValueSameDic',function(){return this.defaultValueSameDic={
				width:0,
				height:0
		};}

		]);
		return TreeData;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-15 下午2:42:50
	*/
	//class laya.editor.core.design.TreeDataTool
	var TreeDataTool=(function(){
		function TreeDataTool(){}
		__class(TreeDataTool,'laya.editor.core.design.TreeDataTool');
		TreeDataTool.getNodeData=function(){
			var rst;
			rst={};
			rst.nodeParent=null;
			rst.name="node";
			rst.data={};
			rst.childs=[];
			return rst;
		}

		TreeDataTool.deleteNodePropKeyBut=function(node,keyDic,isBut){
			(isBut===void 0)&& (isBut=true);
			var prop;
			prop=node.props;
			var key;
			if(isBut){
				for(key in prop){
					if(!keyDic[key]){
						delete prop[key];
					}
				}
				}else{
				for(key in keyDic){
					delete prop[key];
				}
			}
		}

		TreeDataTool.deleteAllKeyBut=function(node,keyDic,isBut){
			(isBut===void 0)&& (isBut=true);
			TreeDataTool.deleteNodePropKeyBut(node,keyDic,isBut);
			var childs;
			childs=node.child;
			if(!childs)return;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				TreeDataTool.deleteAllKeyBut(childs[i],keyDic,isBut);
			}
		}

		TreeDataTool.deleteNodeKey=function(node,key){
			delete node[key];
			var childs;
			childs=node.child;
			if(!childs)return;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				TreeDataTool.deleteNodeKey(childs[i],key);
			}
		}

		TreeDataTool.setNodeValue=function(node,key,value){
			if(!node||!node.props)return;
			node.props[key]=value;
		}

		TreeDataTool.setNodeKey=function(node,key,value){
			TreeDataTool.setNodeValue(node,key,value);
			var childs;
			childs=node.child;
			if(!childs)return;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				TreeDataTool.setNodeKey(childs[i],key,value);
			}
		}

		TreeDataTool.changeOneNodeKey=function(node,key,newKey){
			if(!node||!node.props)return;
			var props;
			props=node.props;
			if(props.hasOwnProperty(key)){
				props[newKey]=props[key];
				delete props[key];
				}else{
				delete props[newKey];
			}
		}

		TreeDataTool.changeNodeKey=function(node,key,newKey){
			TreeDataTool.changeOneNodeKey(node,key,newKey);
			var childs;
			childs=node.child;
			if(!childs)return;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				TreeDataTool.changeNodeKey(childs[i],key,newKey);
			}
		}

		TreeDataTool.setNodeID=function(node,key,start){
			if(!node||!node.props)return start;
			node.props[key]=start;
			start++;
			return start;
		}

		TreeDataTool.resetNodeID=function(node,key,start){
			(start===void 0)&& (start=1);
			start=TreeDataTool.setNodeID(node,key,start);
			var childs;
			childs=node.child;
			if(!childs)return start;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				start=TreeDataTool.resetNodeID(childs[i],key,start);
			}
			return start;
		}

		TreeDataTool.getNodeKeyValue=function(node,key,isProp){
			(isProp===void 0)&& (isProp=true);
			if(!node)return null;
			if(!isProp)return node[key];
			if(!node.props)return null;
			return node.props[key];
		}

		TreeDataTool.saveNodeToDic=function(node,dic,idKey,isProp){
			(isProp===void 0)&& (isProp=true);
			var key;
			key=TreeDataTool.getNodeKeyValue(node,idKey,isProp);
			if(!key)return;
			dic[key]=node;
		}

		TreeDataTool.buildNode=function(node,dic,idKey,isProp){
			(isProp===void 0)&& (isProp=true);
			if(!dic)dic={};
			TreeDataTool.saveNodeToDic(node,dic,idKey,isProp);
			var childs;
			childs=node.child;
			if(!childs)return dic;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				TreeDataTool.buildNode(childs[i],dic,idKey,isProp);
			}
			return dic;
		}

		return TreeDataTool;
	})()


	/**拖动管理类*/
	//class laya.editor.core.managers.DragManager
	var DragManager=(function(){
		function DragManager(){
			this._dragInitiator=null;
			this._dragImage=null;
			this._offSet=new Point();
			Laya.stage.on("keydown",this,this.onStageKeyDown);
		}

		__class(DragManager,'laya.editor.core.managers.DragManager');
		var __proto=DragManager.prototype;
		__proto.onStageKeyDown=function(e){
			switch(e.keyCode){
				case 27:
					this.clears();
					break ;
				}
		}

		/**开始拖动
		*@param dragInitiator 拖动的源对象
		*@param dragImage 显示拖动的图片，如果为null，则是源对象本身
		*@param data 拖动传递的数据
		*@param offset 鼠标居拖动图片的偏移*/
		__proto.doDrag=function(dragInitiator,dragImage,data,offset){
			this.clears();
			DragManager.prePos.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			this._dragInitiator=dragInitiator;
			this._dragImage=dragImage ? dragImage :dragInitiator;
			if((this._dragImage instanceof laya.ui.Clip )){
				this._dragImage.width*=0.5;
				this._dragImage.height*=0.5;
			}
			DragManager._data=data || {};
			offset=null;
			if(offset){
				this._offSet.setTo(offset.x,offset.y);
				}else{
				this._offSet.setTo(this._dragImage.width*0.5,this._dragImage.height*0.5);
			}
			if (this._dragImage !=this._dragInitiator){
				if (!this._dragImage.parent){
					Laya._currentStage.addChild(this._dragImage);
				}
				offset=offset || new Point();
				var p=this._dragImage.globalToLocal(new Point(Laya.stage.mouseX,Laya.stage.mouseY));
				this._dragImage.x=p.x-offset.x;
				this._dragImage.y=p.y-offset.y;
				this._dragImage.visible=false;
				this._dragImage.mouseEnabled=false;
			}
			Laya.stage.on("mousemove",this,this.onStageMouseMove);
			Laya.stage.on("mouseup",this,this.onStageMouseUp);
		}

		/**放置把拖动条拖出显示区域*/
		__proto.onStageMouseMove=function(e){
			if (Math.abs(DragManager.prePos.x-Laya.stage.mouseX)+Math.abs(DragManager.prePos.y-Laya.stage.mouseY)<8){
				return;
			}
			if(!this._dragImage)return;
			if (!DragManager.isDraging){
				this._dragImage.visible=true;
				this._dragImage.x=Laya.stage.mouseX-this._offSet.x;
				this._dragImage.y=Laya.stage.mouseY-this._offSet.y;
				this._dragImage.startDrag();
				this._dragImage.on("dragmove",this,this.onDraging);
				this._dragInitiator.event("dragStart",[ this._dragInitiator,DragManager._data]);
				DragManager.isDraging=true;
				this._dragImage.mouseEnabled=false;
			}
			this.sendDragEvent("Draging_Hit");
		}

		__proto.onDraging=function(){
			if(!this._dragImage)return;
			this._dragImage.x=Laya.stage.mouseX-this._offSet.x;
			this._dragImage.y=Laya.stage.mouseY-this._offSet.y;
		}

		__proto.onStageMouseUp=function(e){
			Laya.stage.off("mousemove",this,this.onStageMouseMove);
			Laya.stage.off("mouseup",this,this.onStageMouseUp);
			DragManager.dPos.setTo(Laya.stage.mouseX-DragManager.prePos.x,Laya.stage.mouseY-DragManager.prePos.y);
			if (Math.abs(DragManager.prePos.x-Laya.stage.mouseX)+Math.abs(DragManager.prePos.y-Laya.stage.mouseY)<8){
				this.clears();
				return;
			}
			this.getTarList();
			if(!this._dragInitiator)return;
			this._dragInitiator.event("dragComplete",[ this._dragInitiator,DragManager._data]);
			this.clears();
		}

		__proto.clears=function(){
			if(this._dragImage){
				this._dragImage.off("dragmove",this,this.onDraging);
				this._dragImage.mouseEnabled=true;
				if(this._dragImage!=this._dragInitiator)
					this._dragImage.removeSelf();
			}
			this._dragInitiator=null;
			DragManager._data=null;
			this._dragImage=null;
			DragManager.isDraging=false;
			FocusManager.clearFocus();
		}

		__proto.sendDragEvent=function(type){
			this.getTarList(type);
		}

		__proto.getTarList=function(type){
			(type===void 0)&& (type="dragDrop");
			DragManager.sendDragEventByData(type,this._dragInitiator,DragManager._data);
			return;
			var rst;
			rst=DisControlTool.getObjectsUnderPoint(Laya.stage,Laya.stage.mouseX*Browser.pixelRatio,Laya.stage.mouseY*Browser.pixelRatio,null,DisControlTool.visibleAndEnableObjFun);
			var i=0,len=0;
			var tTar;
			len=rst.length;
			var tEvent=DragEvent.TEMP;
			tEvent.dragInitiator=this._dragInitiator;
			tEvent.data=DragManager._data;
			tEvent.hitList=rst;
			for (i=0;i < len;i++){
				tTar=rst[i];
				if ((tTar instanceof laya.events.EventDispatcher )){
					if (tTar.hasListener(type)){
						tEvent.target=tTar;
						tTar.event(type,tEvent);
					}
				}
			}
		}

		DragManager.getDragType=function(){
			if (!DragManager._data||!DragManager._data.type)return null;
			return DragManager._data.type;
		}

		DragManager.getDragTarget=function(){
			if (!DragManager._data || !DragManager._data.target)return null;
			return DragManager._data.target;
		}

		DragManager.sendDragEventByData=function(type,_dragInitiator,_data,x,y){
			(x===void 0)&& (x="s");
			(y===void 0)&& (y="s");
			if(x=="s"){
				x=Laya.stage.mouseX;
			}
			if(y=="s"){
				y=Laya.stage.mouseY;
			};
			var rst;
			rst=DisControlTool.getObjectsUnderPoint(Laya.stage,x*Browser.pixelRatio,y*Browser.pixelRatio,null,DisControlTool.visibleAndEnableObjFun);
			var i=0,len=0;
			var tTar;
			len=rst.length;
			var tEvent=DragEvent.TEMP;
			tEvent.dragInitiator=_dragInitiator;
			tEvent.data=_data;
			tEvent.hitList=rst;
			for (i=0;i < len;i++){
				tTar=rst[i];
				if ((tTar instanceof laya.events.EventDispatcher )){
					if (tTar.hasListener(type)){
						tEvent.target=tTar;
						tTar.event(type,tEvent);
					}
				}
			}
		}

		DragManager._data=null
		DragManager.isDraging=false;
		__static(DragManager,
		['dragOffset',function(){return this.dragOffset=new Point(7,7);},'prePos',function(){return this.prePos=new Point();},'dPos',function(){return this.dPos=new Point();}
		]);
		return DragManager;
	})()


	/**语言管理器*/
	//class laya.editor.core.managers.LangManager
	var LangManager=(function(){
		function LangManager(){
			this._data={};
		}

		__class(LangManager,'laya.editor.core.managers.LangManager');
		var __proto=LangManager.prototype;
		/**获取语言
		*@param code 索引key
		*@param ...args 参数*/
		__proto.getLang=function(code,__args){
			var args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);
			var str=this._data[code] || code;
			if (args.length > 0){
				for (var i=0,n=args.length;i < n;i++){
					str=str.replace("{"+i+"}",args[i]);
				}
			}
			return str;
		}

		/**语言包(key:value方式)*/
		__getset(0,__proto,'data',function(){
			return this._data;
			},function(value){
			this._data=value;
		});

		return LangManager;
	})()


	/**对象工具集*/
	//class laya.editor.core.utils.ObjectUtils
	var ObjectUtils=(function(){
		function ObjectUtils(){};
		__class(ObjectUtils,'laya.editor.core.utils.ObjectUtils');
		ObjectUtils.addFilter=function(target,filter){
			var filters=target.filters || [];
			filters.push(filter);
			target.filters=filters;
		}

		ObjectUtils.clearFilter=function(target,filterType){
			var filters=target.filters;
			if (filters !=null && filters.length > 0){
				for (var i=filters.length-1;i >-1;i--){
					var filter=filters[i];
					if (Laya.__typeof(filter,filterType)){
						filters.splice(i,1);
					}
				}
				target.filters=filters;
			}
		}

		ObjectUtils.getTextField=function(format,text){
			(text===void 0)&& (text="Test");
			ObjectUtils._tf.align="left";
			ObjectUtils._tf.text=text;
			return ObjectUtils._tf;
		}

		ObjectUtils.measureTextWidth=function(format,text){
			(text===void 0)&& (text="Test");
			return ObjectUtils.getTextField(format,text).width;
		}

		__static(ObjectUtils,
		['_tf',function(){return this._tf=new TextField();}
		]);
		return ObjectUtils;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-16 上午11:09:00
	*/
	//class laya.editor.core.Wraps.Dictionary
	var Dictionary$1=(function(){
		function Dictionary(){
			this.itemList=[];
		}

		__class(Dictionary,'laya.editor.core.Wraps.Dictionary',null,'Dictionary$1');
		var __proto=Dictionary.prototype;
		__proto.add=function(key,value){
			var item;
			item=this.getValue(key);
			if(!item){
				item={key:key,value:value};
				this.itemList.push(item);
				}else{
				item.value=value;
			}
		}

		__proto.getValue=function(key){
			var i=0,len=this.itemList.length;
			for(i=0;i<len;i++){
				if(this.itemList[i].key==key)return this.itemList[i].value;
			}
			return null;
		}

		__proto.deleteKey=function(key){
			var i=0,len=this.itemList.length;
			for(i=0;i<len;i++){
				if(this.itemList[i].key==key)return this.itemList.splice(i,1);
			}
		}

		__proto.reset=function(){
			this.itemList.length=0;
		}

		return Dictionary;
	})()


	//class laya.editor.core.Wraps.Keyboard
	var Keyboard$1=(function(){
		function Keyboard(){
			;
		}

		__class(Keyboard,'laya.editor.core.Wraps.Keyboard',null,'Keyboard$1');
		__getset(1,Keyboard,'capsLock',function(){return false});
		__getset(1,Keyboard,'numLock',function(){return false});
		__getset(1,Keyboard,'hasVirtualKeyboard',function(){return false});
		__getset(1,Keyboard,'physicalKeyboardType',function(){return ""});
		Keyboard.isAccessible=function(){return false}
		Keyboard.KEYNAME_UPARROW="Up";
		Keyboard.KEYNAME_DOWNARROW="Down";
		Keyboard.KEYNAME_LEFTARROW="Left";
		Keyboard.KEYNAME_RIGHTARROW="Right";
		Keyboard.KEYNAME_F1="F1";
		Keyboard.KEYNAME_F2="F2";
		Keyboard.KEYNAME_F3="F3";
		Keyboard.KEYNAME_F4="F4";
		Keyboard.KEYNAME_F5="F5";
		Keyboard.KEYNAME_F6="F6";
		Keyboard.KEYNAME_F7="F7";
		Keyboard.KEYNAME_F8="F8";
		Keyboard.KEYNAME_F9="F9";
		Keyboard.KEYNAME_F10="F10";
		Keyboard.KEYNAME_F11="F11";
		Keyboard.KEYNAME_F12="F12";
		Keyboard.KEYNAME_F13="F13";
		Keyboard.KEYNAME_F14="F14";
		Keyboard.KEYNAME_F15="F15";
		Keyboard.KEYNAME_F16="F16";
		Keyboard.KEYNAME_F17="F17";
		Keyboard.KEYNAME_F18="F18";
		Keyboard.KEYNAME_F19="F19";
		Keyboard.KEYNAME_F20="F20";
		Keyboard.KEYNAME_F21="F21";
		Keyboard.KEYNAME_F22="F22";
		Keyboard.KEYNAME_F23="F23";
		Keyboard.KEYNAME_F24="F24";
		Keyboard.KEYNAME_F25="F25";
		Keyboard.KEYNAME_F26="F26";
		Keyboard.KEYNAME_F27="F27";
		Keyboard.KEYNAME_F28="F28";
		Keyboard.KEYNAME_F29="F29";
		Keyboard.KEYNAME_F30="F30";
		Keyboard.KEYNAME_F31="F31";
		Keyboard.KEYNAME_F32="F32";
		Keyboard.KEYNAME_F33="F33";
		Keyboard.KEYNAME_F34="F34";
		Keyboard.KEYNAME_F35="F35";
		Keyboard.KEYNAME_INSERT="Insert";
		Keyboard.KEYNAME_DELETE="Delete";
		Keyboard.KEYNAME_HOME="Home";
		Keyboard.KEYNAME_BEGIN="Begin";
		Keyboard.KEYNAME_END="End";
		Keyboard.KEYNAME_PAGEUP="PgUp";
		Keyboard.KEYNAME_PAGEDOWN="PgDn";
		Keyboard.KEYNAME_PRINTSCREEN="PrntScrn";
		Keyboard.KEYNAME_SCROLLLOCK="ScrlLck";
		Keyboard.KEYNAME_PAUSE="Pause";
		Keyboard.KEYNAME_SYSREQ="SysReq";
		Keyboard.KEYNAME_BREAK="Break";
		Keyboard.KEYNAME_RESET="Reset";
		Keyboard.KEYNAME_STOP="Stop";
		Keyboard.KEYNAME_MENU="Menu";
		Keyboard.KEYNAME_USER="User";
		Keyboard.KEYNAME_SYSTEM="Sys";
		Keyboard.KEYNAME_PRINT="Print";
		Keyboard.KEYNAME_CLEARLINE="ClrLn";
		Keyboard.KEYNAME_CLEARDISPLAY="ClrDsp";
		Keyboard.KEYNAME_INSERTLINE="InsLn";
		Keyboard.KEYNAME_DELETELINE="DelLn";
		Keyboard.KEYNAME_INSERTCHAR="InsChr";
		Keyboard.KEYNAME_DELETECHAR="DelChr";
		Keyboard.KEYNAME_PREV="Prev";
		Keyboard.KEYNAME_NEXT="Next";
		Keyboard.KEYNAME_SELECT="Select";
		Keyboard.KEYNAME_EXECUTE="Exec";
		Keyboard.KEYNAME_UNDO="Undo";
		Keyboard.KEYNAME_REDO="Redo";
		Keyboard.KEYNAME_FIND="Find";
		Keyboard.KEYNAME_HELP="Help";
		Keyboard.KEYNAME_MODESWITCH="ModeSw";
		Keyboard.NUMBER_0=48;
		Keyboard.NUMBER_1=49;
		Keyboard.NUMBER_2=50;
		Keyboard.NUMBER_3=51;
		Keyboard.NUMBER_4=52;
		Keyboard.NUMBER_5=53;
		Keyboard.NUMBER_6=54;
		Keyboard.NUMBER_7=55;
		Keyboard.NUMBER_8=56;
		Keyboard.NUMBER_9=57;
		Keyboard.A=65;
		Keyboard.B=66;
		Keyboard.C=67;
		Keyboard.D=68;
		Keyboard.E=69;
		Keyboard.F=70;
		Keyboard.G=71;
		Keyboard.H=72;
		Keyboard.I=73;
		Keyboard.J=74;
		Keyboard.K=75;
		Keyboard.L=76;
		Keyboard.M=77;
		Keyboard.N=78;
		Keyboard.O=79;
		Keyboard.P=80;
		Keyboard.Q=81;
		Keyboard.R=82;
		Keyboard.S=83;
		Keyboard.T=84;
		Keyboard.U=85;
		Keyboard.V=86;
		Keyboard.W=87;
		Keyboard.X=88;
		Keyboard.Y=89;
		Keyboard.Z=90;
		Keyboard.SEMICOLON=186;
		Keyboard.EQUAL=187;
		Keyboard.COMMA=188;
		Keyboard.MINUS=189;
		Keyboard.PERIOD=190;
		Keyboard.SLASH=191;
		Keyboard.BACKQUOTE=192;
		Keyboard.LEFTBRACKET=219;
		Keyboard.BACKSLASH=220;
		Keyboard.RIGHTBRACKET=221;
		Keyboard.QUOTE=222;
		Keyboard.ALTERNATE=18;
		Keyboard.BACKSPACE=8;
		Keyboard.CAPS_LOCK=20;
		Keyboard.COMMAND=15;
		Keyboard.CONTROL=17;
		Keyboard.DELETE=46;
		Keyboard.MacDELETE=8;
		Keyboard.DOWN=40;
		Keyboard.END=35;
		Keyboard.ENTER=13;
		Keyboard.ESCAPE=27;
		Keyboard.F1=112;
		Keyboard.F2=113;
		Keyboard.F3=114;
		Keyboard.F4=115;
		Keyboard.F5=116;
		Keyboard.F6=117;
		Keyboard.F7=118;
		Keyboard.F8=119;
		Keyboard.F9=120;
		Keyboard.F10=121;
		Keyboard.F11=122;
		Keyboard.F12=123;
		Keyboard.F13=124;
		Keyboard.F14=125;
		Keyboard.F15=126;
		Keyboard.HOME=36;
		Keyboard.INSERT=45;
		Keyboard.LEFT=37;
		Keyboard.NUMPAD=21;
		Keyboard.NUMPAD_0=96;
		Keyboard.NUMPAD_1=97;
		Keyboard.NUMPAD_2=98;
		Keyboard.NUMPAD_3=99;
		Keyboard.NUMPAD_4=100;
		Keyboard.NUMPAD_5=101;
		Keyboard.NUMPAD_6=102;
		Keyboard.NUMPAD_7=103;
		Keyboard.NUMPAD_8=104;
		Keyboard.NUMPAD_9=105;
		Keyboard.NUMPAD_ADD=107;
		Keyboard.NUMPAD_DECIMAL=110;
		Keyboard.NUMPAD_DIVIDE=111;
		Keyboard.NUMPAD_ENTER=108;
		Keyboard.NUMPAD_MULTIPLY=106;
		Keyboard.NUMPAD_SUBTRACT=109;
		Keyboard.PAGE_DOWN=34;
		Keyboard.PAGE_UP=33;
		Keyboard.RIGHT=39;
		Keyboard.SHIFT=16;
		Keyboard.SPACE=32;
		Keyboard.TAB=9;
		Keyboard.UP=38;
		Keyboard.RED=16777216;
		Keyboard.GREEN=16777217;
		Keyboard.YELLOW=16777218;
		Keyboard.BLUE=16777219;
		Keyboard.CHANNEL_UP=16777220;
		Keyboard.CHANNEL_DOWN=16777221;
		Keyboard.RECORD=16777222;
		Keyboard.PLAY=16777223;
		Keyboard.PAUSE=16777224;
		Keyboard.STOP=16777225;
		Keyboard.FAST_FORWARD=16777226;
		Keyboard.REWIND=16777227;
		Keyboard.SKIP_FORWARD=16777228;
		Keyboard.SKIP_BACKWARD=16777229;
		Keyboard.NEXT=16777230;
		Keyboard.PREVIOUS=16777231;
		Keyboard.LIVE=16777232;
		Keyboard.LAST=16777233;
		Keyboard.MENU=16777234;
		Keyboard.INFO=16777235;
		Keyboard.GUIDE=16777236;
		Keyboard.EXIT=16777237;
		Keyboard.BACK=16777238;
		Keyboard.AUDIO=16777239;
		Keyboard.SUBTITLE=16777240;
		Keyboard.DVR=16777241;
		Keyboard.VOD=16777242;
		Keyboard.INPUT=16777243;
		Keyboard.SETUP=16777244;
		Keyboard.HELP=16777245;
		Keyboard.MASTER_SHELL=16777246;
		Keyboard.SEARCH=16777247;
		__static(Keyboard,
		['CharCodeStrings',function(){return this.CharCodeStrings=["Up","Down","Left","Right","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","F25","F26","F27","F28","F29","F30","F31","F32","F33","F34","F35","Insert","Delete","Home","Begin","End","PgUp","PgDn","PrntScrn","ScrlLck","Pause","SysReq","Break","Reset","Stop","Menu","User","Sys","Print","ClrLn","ClrDsp","InsLn","DelLn","InsChr","DelChr","Prev","Next","Select","Exec","Undo","Redo","Find","Help","ModeSw"];}
		]);
		return Keyboard;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-23 下午2:33:23
	*/
	//class laya.editor.core.Wraps.MenuManager
	var MenuManager=(function(){
		function MenuManager(){}
		__class(MenuManager,'laya.editor.core.Wraps.MenuManager');
		MenuManager.showMenu=function(menuStr,thisO,fun){
			var tMenu;
			if(!MenuManager._menuDic[menuStr]){
				tMenu=ContextMenu$1.createMenuByArray2(menuStr.split(","));
				MenuManager._menuDic[menuStr]=tMenu;
			}
			tMenu=MenuManager._menuDic[menuStr];
			tMenu.offAll("select");
			tMenu.once("select",thisO,fun);
			tMenu.show();
		}

		MenuManager._menuDic={};
		return MenuManager;
	})()


	//class laya.editor.core.Wraps.xml.XMLElement
	var XMLElement=(function(){
		function XMLElement(value){
			this._nodeName=null;
			this._nodeType=null;
			this._nodeValue=null;
			this._parentNode=null;
			this._attributes=[];
			this._childNodes=[];
			this._nestCount=0;
			if((value instanceof laya.editor.core.Wraps.xml.XMLElement )){return value}
				else if ((value instanceof laya.editor.core.Wraps.xml.XMLElementList )){if (value.lengths()==1){return value[0]}else {return value;}}
			if (value){
				if(value && value['_data_']){value=value.toString();}
					if (value){
					XMLElement.create(value,this);
				}
			}
		}

		__class(XMLElement,'laya.editor.core.Wraps.xml.XMLElement');
		var __proto=XMLElement.prototype;
		Laya.imps(__proto,{"laya.editor.core.Wraps.xml.IXMLElement":true})
		__proto.addNamespace=function(ns){
			return this;
		}

		/**同xml.@name=value*/
		__proto.setAttribute=function(name,value){
			var o;
			for(var $each_o in this._attributes){
				o=this._attributes[$each_o];
				if (o.key==name){
					o.val=value;
					return value;
				}
			}
			this._attributes.push({key:name,val:value});
			return value;
		}

		/**同xml.attributes()*/
		__proto.getAttributes=function(){
			return this.getAttribute("*");
		}

		/**同xml.attributes()*/
		__proto.attributes=function(){
			return this.getAttribute("*");
		}

		/**同xml.@name*/
		__proto.getAttribute=function(name){
			var attributes=this._attributes;
			var arr=[];
			for (var j=0;j < attributes.length;j++){
				var value=attributes[j]['key'];
				if (name=="*" || value==name){
					arr.push({"key":attributes[j]['key'],"val":attributes[j]['val']});
				}
			}
			if (name!="*"){
				return arr.length>0?arr[0].val:undefined;
			}
			return XMLElementList.createFromAttribute(arr);
		}

		/**同xml..@name*/
		__proto.getAllAttribute=function(name){
			var arr=[];
			this._getAllAttribute_(arr,this,name);
			return XMLElementList.createFromAttribute(arr);
		}

		__proto._getAllAttribute_=function(arr,xml,name){
			var len=xml._childNodes ? xml._childNodes.length :0;
			for (var i=0;i < len;i++){
				var node=xml._childNodes [i];
				for (var j=0;j < node._attributes.length;j++){
					var key=node._attributes[j]['key'];
					var val=node._attributes[j]['val'];
					if (name=="*"){
						arr.push({"key":key,"val":val});
						}else if (key==name){
						arr.push({"key":key,"val":val});
					}
				}
				this._getAllAttribute_(arr,node,name);
			}
		}

		/**同xml.@name*/
		__proto.attribute=function(name){
			return this.getAttribute(name);
		}

		/**同xml.name*/
		__proto.getChildByName=function(name){
			return this.child(name);
		}

		/**同xml..name*/
		__proto.getAllChildByName=function(name){
			var arr=[];
			this._getAllChildByName_(arr,this,name);
			return XMLElementList.create(arr);
		}

		__proto._getAllChildByName_=function(arr,xml,name){
			var len=xml._childNodes ? xml._childNodes.length :0;
			for (var i=0;i < len;i++){
				var node=xml._childNodes [i];
				if(name=="*"){
					arr.push(node);
					}else if (node._nodeName==name){
					arr.push(node);
				}
				this._getAllChildByName_(arr,node,name);
			}
		}

		__proto.nodeKind=function(){
			return this._nodeType;
		}

		/**同xml.(@attribute==value);或者xml.(@attribute!=value)*/
		__proto.getChildByAttribute=function(attribute,value,equal){
			(equal===void 0)&& (equal=true);
			if (attribute=="" || attribute==null)
				return null;
			if (value=="" || value==null)
				return null;
			var ar=[],len=this._childNodes ? this._childNodes.length :0;
			for (var i=0;i < len;i++){
				var n=this._childNodes [i];
				for (var j=0;j < n._attributes.length;j++){
					if (n._attributes[j]['key']==attribute){
						if (equal && n._attributes[j]['val']==value){
							ar.push(n);
							}else if (!equal && n._attributes[j]['val'] !=value){
							ar.push(n);
						}
					}
				}
			}
			return XMLElementList.create(ar);
		}

		/**xml.children()*/
		__proto.children=function(){
			var l=XMLElementList.create(this._childNodes);
			if(!l.length)
				if((typeof this._nodeValue=='string')&& this._nodeValue !=""){
				l.push(this._nodeValue);
			}
			return l;
		}

		/**xml[0];same with XMLElementList,different in with XMLElement;
		*In Flash XML class xml[0] return self,xml[1] return undefined;
		**/
		__proto.getChildAt=function(index){
			if (!this._childNodes || index > this._childNodes.length)
				return null;
			return this._childNodes[index];
		}

		/**同xml.element(*)*/
		__proto.elements=function(name){
			(name===void 0)&& (name="*");
			if (name=='*')
				return XMLElementList.create(this._childNodes);
			return this.child(name);
		}

		/**同xml.appendchild(value)*/
		__proto.appendChild=function(value){
			if ((typeof value=='string')){
				value=laya.editor.core.Wraps.xml.XMLElement.create(String(value));
			}
			if ((value instanceof laya.editor.core.Wraps.xml.XMLElement )){
				var name=value._nodeName;
				var list=this[name];
				if (!list){
					this[name]=list=new XMLElementList();
				}
				(((typeof list=='function'))!=true)&&(list.__addChild__(value));
				this._childNodes.push(value);
				}else if ((value instanceof laya.editor.core.Wraps.xml.XMLElementList )){
				var len=value.lengths();
				for (var i=0;i < len;i++){
					this.appendChild(value[i]);
				}
			}
			value._parentNode=this;
			return value;
		}

		__proto.prependChild=function(value){
			var xml=this.appendChild(value);
			var nodes=this._childNodes;
			nodes.pop();
			nodes.splice(0,0,xml);
			return xml;
		}

		/**同xml.name=value*/
		__proto.setChildByName=function(nName,value){
			var c=this.getChildByName(nName);
			if (!c)
				return null;
			var spliceIndex=this._childNodes.length;
			for (var i=this._childNodes.length-1;i >=0;i--){
				if (this._childNodes[i].localName==nName){
					this._childNodes.splice(i,1);
					spliceIndex=i;
				}
			}
			if ((value instanceof laya.editor.core.Wraps.xml.XMLElementList )){
				for (i=0;i < value.lengths();i++){
					this._childNodes.splice(spliceIndex,0,value[i]);
					spliceIndex++;
				}
				}else if ((value instanceof laya.editor.core.Wraps.xml.XMLElement )){
				this._childNodes.splice(spliceIndex,0,value);
				}else {
				return null;
			}
			return c;
		}

		/**同xml.copy()*/
		__proto.copy=function(){
			var xml=new XMLElement(this.toXMLString());
			return xml;
		}

		__proto.copyFrom=function(source){
			if ((source instanceof laya.editor.core.Wraps.xml.XMLElement )){
				var value=source;
				this._nodeName=value._nodeName;
				this._nodeValue=value._nodeValue;
				this._attributes=value._attributes;
				this._childNodes=value._childNodes;
				return this;
			}
			return null;
		}

		/**同xml.setName(name)*/
		__proto.setName=function(str){
			this._nodeName=str;
		}

		/**同xml.hasOwnProperty(p)*/
		__proto.hasOwnProperty=function(pName){
			var len=0,i=0;
			if(pName.indexOf("@")!=-1){
				var tmpPName=pName.substring(1);
				len=this._attributes.length;
				for (i=0;i < len;i++){
					if (this._attributes[i].key==tmpPName)
						return true;
				}
				}else{
				len=this._childNodes.length;
				for (i=0;i < len;i++){
					if (this._childNodes[i]._nodeName==pName)
						return true;
				}
			}
			return false;
		}

		/**同xml.hasSimpleContent()*/
		__proto.hasSimpleContent=function(){
			if (this._childNodes.length > 0){
				return false;
				}else if (this._childNodes.length==1){
				if (!this._childNodes[0].localName)
					return true;
				return false;
			}
			return true;
		}

		/**同xml.hasComplexContent()*/
		__proto.hasComplexContent=function(){
			return this._childNodes.length > 0
		}

		/**同xml.length()*/
		__proto.lengths=function(){
			return 1
		}

		/**同xml.name()*/
		__proto.name=function(){
			return this._nodeName;
		}

		/**同xml.parent()*/
		__proto.parent=function(){
			return this._parentNode;
		}

		/**同xml.toString()*/
		__proto.toString=function(){
			var str="";
			if (this._childNodes.length){
				str=this.toXMLString();
			}else
			str=this._nodeValue;
			return str;
		}

		__proto.getString=function(){
			var str="";
			str=this.toXMLString();
			return str;
		}

		__proto.getNodeValueStr=function(){
			return this._nodeValue;
			var rst;
			rst="<![CDATA["+this._nodeValue+"]]>";
			return rst;
			return this._nodeValue;
		}

		/**同xml.toXMLString()*/
		__proto.toXMLString=function(){
			if (!XMLElement._callee)
				XMLElement._callee=this;
			var str="";
			str+=XMLElement.getStartEmpty(this._nestCount);
			if (this._nodeName){
				str+="<"+this._nodeName;
				for (var i=0;i < this._attributes.length;i++){
					str+=" "+this._attributes[i]['key']+'="'+XMLElement.getAttributeStr(this._attributes[i]['val'])+'"'
				}
			}
			if (this.hasSimpleContent()&& !this.value)
				str+="/>";
			else {
				str+=this._nodeName ? ">" :"";
				str+=(this._childNodes.length ? "\n" :this.getNodeValueStr());
				for (i=0;i < this._childNodes.length;i++){
					this._childNodes[i]._nestCount=this._nestCount+1;
					str+=this._childNodes[i].toXMLString();
					str+="\n";
				}
				if (this._nodeName)
					str+=XMLElement.getStartEmpty(this._nestCount)+"</"+this._nodeName+">";
			}
			if (XMLElement._callee !=this){
			}
			else
			XMLElement._callee=null;
			return str;
		}

		__proto.child=function(nName){
			if((typeof nName=='number')){
				return XMLElementList.create([ this._childNodes[nName]]);
			};
			var ar=[],len=this._childNodes ? this._childNodes.length :0;
			for (var i=0;i < len;i++){
				var n=this._childNodes [i];
				if (n.localName==nName){
					ar.push(n);
				}
			}
			return XMLElementList.create(ar);
		}

		__proto.childIndex=function(){
			var parent=this._parentNode;
			if (parent){
				var nodes=parent._childNodes;
				for (var i=0,n=nodes.length;i < n;i++){
					if (nodes[i]==this){
						return i;
					}
				}
			}
			return-1;
		}

		__proto.insertChildBefore=function(child1,child2){
			return null;
		}

		__proto.normalize=function(){
			return null;
		}

		__proto.comments=function(){
			return null;
		}

		__proto.contains=function(value){
			return true;
		}

		__proto.defaultSettings=function(){
			return null;
		}

		__proto.descendants=function(name){
			return null;
		}

		__proto.inScopeNamespaces=function(){
			return [];
		}

		__proto.setLocalName=function(name){
			this._nodeName=name;
		}

		__getset(0,__proto,'nodeType',function(){
			return this._nodeType;
		});

		/**同xml.toString()*/
		/**同xml.toString()*/
		__getset(0,__proto,'value',function(){
			return this._nodeValue;
			},function(str){
			this._nodeValue=str;
		});

		__getset(0,__proto,'childNodes',function(){
			return this._childNodes;
		});

		__getset(0,__proto,'nodeName',function(){
			return this._nodeName;
		});

		/**同xml.localName()*/
		__getset(0,__proto,'localName',function(){
			return this._nodeName;
			},function(str){
			this._nodeName=str;
		});

		/*微端顶级节点的value*/
		__getset(0,__proto,'conchValue',function(){
			var temp="";
			if (this._childNodes){
				for (var i=0,len=this._childNodes.length;i < len;i++){
					temp+=this._childNodes[i].conchValue;
				}
				temp+=this.value;
			}
			else
			temp=this.value;
			return temp;
		});

		XMLElement.create=function(value,node){
			node=node ? node :new XMLElement();
			var xmld;
			if (false && !((typeof value=='string'))){
				xmld=value;
				xmld=xmld.childNodes[0];
				}else {
				if (SystemSetting.isCMDVer){
					var DOMParser=require('xmldom').DOMParser;;
					}else{
					DOMParser=Browser.window.DOMParser;;
				}
				xmld=(new DOMParser()).parseFromString(value,'text/xml');var t_i=0;var t_xmld=null;do{t_xmld=xmld.childNodes[t_i++];if(t_xmld.nodeName !='#comment' ){xmld=t_xmld;break;}}while(t_i<xmld.childNodes.length);;
			}
			XMLElement.cloneXmlFromData(node,xmld);
			return node;
		}

		XMLElement.parseXmlFromString=function(xmlString){
			var xmld;
			if (SystemSetting.isCMDVer){
				var DOMParser=require('xmldom').DOMParser;;
				}else{
				DOMParser=Browser.window.DOMParser;;
			}
			xmld=(new DOMParser()).parseFromString(xmlString,'text/xml');;
			return xmld;
		}

		XMLElement.cloneXmlFromData=function(xml,data){
			xml._nodeName=data.nodeName;
			xml._nodeValue=data.nodeValue==null ? data.textContent :data.nodeValue;
			var attribs=data.attributes;
			var len=attribs ? attribs.length :0;
			var attributes=xml._attributes;
			for (var j=0;j < len;j++){
				var attr=attribs[j];
				attributes.push({key:attr.nodeName,val:attr.nodeValue});
			};
			var nodes=data.childNodes;
			var child;
			for (var i=0;i < nodes.length;i++){
				var node=nodes[i];
				var nodeName=node.nodeName;
				if(nodeName=="#text"){
					if(node.parentNode&&node.parentNode.textContent!=node.textContent){
						var tValue;
						tValue=node.nodeValue.replace(/(^\s*)|(\s*$)/g,'');
						if(tValue.length>1){
							node.nodeValue=tValue;
							child=new XMLElement();
							XMLElement.cloneXmlFromData(child,node);
							xml.appendChild(child);
						}
					}
				}else
				if (nodeName !="#text" && nodeName !="#comment"){
					if (nodeName=="#cdata-section" || nodeName==""){
						xml._nodeValue=node.nodeValue==null ? node.textContent :node.nodeValue;
						continue ;
					}
					child=new XMLElement();
					XMLElement.cloneXmlFromData(child,node);
					xml.appendChild(child);
				}
			}
		}

		XMLElement.getStartEmpty=function(count){
			var str="";
			for (var j=0;j < count;j++){
				str+="   ";
			}
			return str;
		}

		XMLElement.hasSpSigns=function(str){
			if(! (typeof str=='string'))return false;
			var i=0,len=0;
			len=XMLElement.spSigns.length;
			for(i=0;i<len;i++){
				if(str.indexOf(XMLElement.spSigns[i])>=0)return true;
			}
			return false;
		}

		XMLElement.getAttributeStr=function(val){
			if(! (typeof val=='string'))return val;
			var key;
			for(key in XMLElement.xmlSpecials){
				var sign;
				val=val.split(key).join(XMLElement.xmlSpecials[key]);
			}
			return val;
		}

		XMLElement._callee=null
		__static(XMLElement,
		['spSigns',function(){return this.spSigns=["<",">"];},'xmlSpecials',function(){return this.xmlSpecials={
				"<":"&lt;",
				">":"&gt;",
				"'":"&apos;",
				"\"":"&quot;"
		};}

		]);
		return XMLElement;
	})()


	/**全局配置*/
	//class laya.editor.LayaConfig
	var LayaConfig=(function(){
		function LayaConfig(){};
		__class(LayaConfig,'laya.editor.LayaConfig');
		LayaConfig.GAME_FPS=50;
		LayaConfig.MOVIE_INTERVAL=100;
		LayaConfig.resPath="";
		LayaConfig.uiPath="";
		LayaConfig.tipDelay=200;
		LayaConfig.tipFollowMove=true;
		LayaConfig.touchScrollEnable=true;
		LayaConfig.mouseWheelEnable=true;
		LayaConfig.VER="0.9.9 beta";
		LayaConfig.$HIDDEN="$HIDDEN";
		LayaConfig.$LOCKED="$LOCKED";
		return LayaConfig;
	})()


	/**代码管理类
	*@author yung
	*/
	//class laya.editor.manager.CodeManager
	var CodeManager=(function(){
		function CodeManager(){};
		__class(CodeManager,'laya.editor.manager.CodeManager');
		CodeManager.exportCode=function(){
			console.log("ExportCode");
			CodeManager.uiObjMap={};
			CodeManager.projectExportType=PageStyleManager.getProjectExportType();
			CodeManager.isLoadMode=PageExportType.isLoadType(CodeManager.projectExportType);
			CodeManager.isUIPackMode=CodeManager.projectExportType==PageExportType.LOAD_PACK;
			CodeManager.isAs=Math.ceil(ProjectSetting.codeType)==0;
			CodeManager.initPreExportInfo();
			CodeTplManager.initCodeTpls();
			CodeManager.tPageFileInfos={};
			CodeManager.uiDataExportFolder=FileTools.getFolder(FileManager.getWorkPath(ProjectSetting.uiExportPath));
			CodeManager.createByDir(SystemSetting.pagesPath);
			if(CodeManager.isUIPackMode){
				FileManager.createJSONFile(FileManager.getWorkPath(ProjectSetting.uiExportPath),CodeManager.uiObjMap);
				CodeManager.uiObjMap={};
			}
			CodeManager.saveExportInfo();
			console.log("Export code complete");
		}

		CodeManager.initPreExportInfo=function(){
			var filePath;
			filePath=CodeManager.getPreExportFilePath();
			CodeManager.preExportInfo=null;
			CodeManager.prePageFileInfos=null;
			CodeManager.hasPreExportInfo=false;
			CodeManager.isConfigsChanged=true;
			if(!FileTools.exist(filePath))return;
			try{
				CodeManager.preExportInfo=FileManager.readJSONFile(filePath);
				CodeManager.prePageFileInfos=CodeManager.preExportInfo["files"];
				CodeManager.hasPreExportInfo=true;
				if(CodeManager.getConfigsStatuStr()==CodeManager.preExportInfo["configStr"]){
					CodeManager.isConfigsChanged=false;
				}
			}catch(e){}
		}

		CodeManager.getConfigsStatuStr=function(){
			var ctimes;
			ctimes=[];
			var i=0,len=0;
			len=CodeManager.configFiles.length;
			for(i=0;i<len;i++){
				var tFile;
				tFile=FileManager.getWorkPath("laya/"+CodeManager.configFiles[i]);
				if(FileTools.exist(tFile)){
					ctimes.push(FileTools.getMTime(tFile));
				}
			}
			return ctimes.join("_");
		}

		CodeManager.saveExportInfo=function(){
			var saveO;
			saveO={};
			saveO["configStr"]=CodeManager.getConfigsStatuStr();
			saveO["files"]=CodeManager.tPageFileInfos;
			FileManager.createJSONFile(CodeManager.getPreExportFilePath(),saveO);
			CodeManager.tPageFileInfos={};
		}

		CodeManager.getPrePageInfoO=function(pagePath){
			if(CodeManager.prePageFileInfos&&CodeManager.prePageFileInfos[pagePath]){
				return CodeManager.prePageFileInfos[pagePath];
				}else{
				return null;
			}
		}

		CodeManager.isCacheCodeOK=function(pagePath,mTime){
			if(CodeManager.isUIPackMode)return false;
			if(!CodeManager.hasPreExportInfo)return false;
			if(CodeManager.isConfigsChanged)return false;
			var pageInfo;
			pageInfo=CodeManager.getPrePageInfoO(pagePath);
			if(pageInfo){
				if(mTime==pageInfo["mTime"]&&!pageInfo["hasSpecial"]&&pageInfo["code"]){
					return true;
				}
			}
			return false;
		}

		CodeManager.getCacheCode=function(pagePath,mTime){
			if(!CodeManager.isCacheCodeOK(pagePath,mTime))return null;
			return CodeManager.getPrePageInfoO(pagePath)["code"];
		}

		CodeManager.isSpecialPageFile=function(pageTxt){
			var i=0,len=0;
			len=CodeManager.SpecialPageKeyWords.length;
			for(i=0;i<len;i++){
				if(pageTxt.indexOf(CodeManager.SpecialPageKeyWords[i])>=0){
					return true;
				}
			}
			return false;
		}

		CodeManager.getPreExportFilePath=function(){
			return FileManager.getDataPath("codeCache/"+CodeManager.getProjectSign()+"code.cache");
			return FileManager.getWorkPath("laya/code.cache");
		}

		CodeManager.getProjectSign=function(){
			var sign;
			sign=FileManager.adptToCommonUrl(SystemSetting.workPath);
			sign=SMD5.md5(sign,null,null);
			return sign;
		}

		CodeManager.getCodePath=function(pagePath){
			var page1=FileManager.getRelativePath(SystemSetting.pagesPath,pagePath);
			var page2=FileManager.getWorkPath(ProjectSetting.codeExportPath+"/"+page1);
			var newNameSign;
			switch(Math.ceil(ProjectSetting.codeType)){
				case 0:
					newNameSign="UI.as";
					break ;
				case 2:
				case 2:
					newNameSign="UI.js";
					break ;
				case 1:
					newNameSign="UI.ts";
					break ;
				};
			var i=0,len=0;
			len=CodeManager.pageFileSigns.length;
			for(i=0;i<len;i++){
				if(page2.indexOf(CodeManager.pageFileSigns[i])>=0){
					return page2.replace(CodeManager.pageFileSigns[i],newNameSign);
				}
			}
			return page2.replace(".ui",newNameSign);
		}

		CodeManager.initTsCodePre=function(){
			ObjectTools.clearObj(CodeManager.importDic);
			var arr;
			arr=ProjectSetting.codeImportsTS.split("\n");
			var preImports;
			var preCodes;
			preImports=[];
			preCodes=[];
			var i=0,len=0;
			len=arr.length;
			var tStr;
			for(i=0;i<len;i++){
				tStr=arr[i];
				if(tStr.indexOf("import")>=0){
					preImports.push(tStr);
					CodeManager.parseTsImport(tStr);
					}else{
					preCodes.push(tStr);
				}
			}
			CodeManager.tsCodePreImport=preImports.join("\n");
			CodeManager.tsCodePreFromImport=preCodes.join("\n");
		}

		CodeManager.parseTsImport=function(str){
			var tStr;
			tStr=str.replace("import","");
			var arr;
			arr=tStr.split("=");
			tStr=StringTool.trimSide(arr[0]);
			CodeManager.importDic[tStr]=true;
		}

		CodeManager.createByDir=function(file){
			var fileList;
			fileList=FileTools.getFileList(file);
			var i=0,len=0;
			len=fileList.length;
			var tFile;
			var code;
			var obj;
			var codePath;
			var resUsed;
			resUsed=[];
			var allInOneFile;
			CodeManager.initTsCodePre();
			switch(Math.ceil(ProjectSetting.codeType)){
				case 0:
					break ;
				case 2:
					CodeManager.allInOnePre=CodeTplManager.jsCodePre;
					allInOneFile=CodeManager.allInOnePre+"\n"+ProjectSetting.codeImportsJS;
					break ;
				case 1:
					CodeManager.allInOnePre=CodeTplManager.tsCodePre;
					allInOneFile=CodeManager.allInOnePre+"\n"+ProjectSetting.codeImportsTS;
					break ;
				};
			var hasCodeFile=false;
			hasCodeFile=false;
			var changeTime;
			var rPath;
			var tPageInfo;
			var isCacheOK=false;
			for(i=0;i<len;i++){
				tFile=fileList[i];
				if(FileTools.isDirectory(tFile)){
					}else{
					rPath=FileManager.getRelativePath(SystemSetting.pagesPath,tFile);
					changeTime=FileTools.getMTime(tFile).toString();
					isCacheOK=CodeManager.isCacheCodeOK(rPath,changeTime);
					if(isCacheOK&&CodeManager.isAs){
						continue ;
					}
					tPageInfo=CodeManager.getPrePageInfoO(rPath);
					if(!tPageInfo){
						tPageInfo={};
					}
					tPageInfo["mTime"]=changeTime;
					CodeManager.tPageFileInfos[rPath]=tPageInfo;
					if(TypeManager.getFileType(tFile)=="graphic_animation"){
						var tarPath;
						tarPath=FileManager.getPath(FileManager.getWorkPath(ProjectSetting.asynResExportPath),rPath);
						var tDataConfig;
						tDataConfig=FileManager.readJSONFile(tFile);
						CodeManager.cleanUIObj(tDataConfig,null);
						FileManager.createJSONFile(tarPath,tDataConfig);
					}else
					if(TypeManager.isCodeViewFile(tFile)){
						if(TypeManager.getFileType(tFile)=="Prefab"){
							if(!PageStyleManager.getIfPageExport(FileManager.getRelativePath(SystemSetting.pagesPath,tFile))){
								continue ;
							}
						}
						hasCodeFile=true;
						try{
							if(isCacheOK){
								code=CodeManager.getCacheCode(rPath,changeTime);
								}else{
								console.log("Export:",rPath);
								code=FileManager.readTxtFile(tFile);
								tPageInfo["hasSpecial"]=CodeManager.isSpecialPageFile(code);
								obj=ObjectTools.getObj(code);
								if(obj.props){
									delete obj.props["var"];
								}
								if(obj.props&&obj.props["base64pic"]==true){
									CodeManager.collectSkins(obj,resUsed);
								}
								code=CodeManager.objToUI(obj,tFile);
							}
							tPageInfo["code"]=code;
							codePath=CodeManager.getCodePath(tFile);
							if(ProjectSetting.codeType==2||ProjectSetting.codeType==1){
								allInOneFile+="\n"+code;
								}else{
								if(ProjectSetting.codeType==1){
									code=CodeTplManager.tsCodePre+"\n"+code;
								}
								FileManager.createTxtFile(codePath,code);
							}
							}catch(e){
							Alert.show(Sys.lang("读取页面({0})出错\n{1}读取页面出错",tFile,e.toString()));
						}
					}else
					if(TypeManager.getFileType(tFile)=="particle"||TypeManager.getFileType(tFile)=="particle3D"||TypeManager.getFileType(tFile)=="particlepoly"){
						rPath=FileManager.getRelativePath(SystemSetting.pagesPath,tFile);
						tarPath=FileManager.getPath(FileManager.getWorkPath(ProjectSetting.asynResExportPath),rPath);
						FileTools.copyFile(tFile,tarPath);
						var tParticleConfig;
						tParticleConfig=FileManager.readJSONFile(tFile);
						var textureFile;
						if(!tParticleConfig){
							Alert.show(Sys.lang("文件已损坏！：{0}",tFile));
							continue ;
						}
						textureFile=tParticleConfig.textureName;
						var texturePath;
						if(textureFile){
							texturePath=FileManager.getResPath(textureFile);
							var tarTexturePath;
							tarTexturePath=FileManager.getPath(FileManager.getWorkPath(ProjectSetting.asynResExportPath),textureFile);
							FileTools.copyFile(texturePath,tarTexturePath);
						}
					}
				}
			}
			if(!hasCodeFile)return;
			CodeManager.saveBase64Pics(resUsed);
			if(ProjectSetting.codeType==2||ProjectSetting.codeType==1){
				var fileType;
				fileType=ProjectSetting.codeType==2?"js":"ts";
				codePath=CodeManager.getCodePath(FileManager.getPath(file,"layaUI.max.all."+fileType));
				FileManager.createTxtFile(codePath,allInOneFile);
				var tarFolder;
				tarFolder=codePath.replace(".ts",".js");
				if(ProjectSetting.codeType==1){
					var cmdTSC;
					cmdTSC="tsc --out \""+tarFolder+"\" \""+codePath+"\"";
				}
			}
		}

		CodeManager.collectSkins=function(uiO,resUsed){
			resUsed=TemplateManager.findAllResUsed(uiO,resUsed);
		}

		CodeManager.saveBase64Pics=function(resUsed){
			if(!resUsed||resUsed.length<1)return;
			var i=0,len=0;
			len=resUsed.length;
			var data;
			data={};
			for(i=0;i<len;i++){
				CodeManager.convertSkinRes(resUsed[i],data);
			};
			var codePath;
			codePath=FileManager.getPath(FileManager.getWorkPath(ProjectSetting.resExportPath),"base64pic.json");
			FileManager.createTxtFile(codePath,JSON.stringify(data));
			if(ProjectSetting.codeType==0){
				CodeManager.saveAsBase64Class(data);
			}
		}

		CodeManager.saveAsBase64Class=function(data){
			var tpl;
			tpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASBase64Template));
			var codePath;
			codePath=FileManager.getWorkPath(CodeTplManager.base64path);
			var dataO;
			dataO={};
			dataO["pack"]=CodeTplManager.base64pack;
			dataO["base64data"]=JSON.stringify(data);
			var code;
			code=CodeManager.createExportCode(tpl,dataO);
			FileManager.createTxtFile(codePath,code);
		}

		CodeManager.convertSkinRes=function(skinPath,data){
			var tex;
			var tPath;
			var i=0,len=0;
			len=CodeManager.specialFiles.length;
			for(i=0;i<len;i++){
				tPath=StringTool.getReplace(skinPath,".png",CodeManager.specialFiles[i]);
				if(!data[tPath]&&ResFileManager.hasRes(tPath)){
					tex=ResFileManager.getRes(tPath);
					if(tex){
						data[tPath]=Base64ImageTool.getBase64Pic(tex);
					}
				}
			}
		}

		CodeManager.getSkinSpecialRes=function(skinPath,arr){
			var tex;
			var tPath;
			var i=0,len=0;
			len=CodeManager.specialFiles.length;
			for(i=0;i<len;i++){
				tPath=StringTool.getReplace(skinPath,".png",CodeManager.specialFiles[i]);
				if(tPath==skinPath)continue ;
				if(ResFileManager.hasRes(tPath)){
					arr.push(tPath);
				}
			}
		}

		CodeManager.getReferStr=function(myPack,tarClass){
			var rst;
			var myArr;
			var tarArr;
			myArr=myPack.split(".");
			tarArr=tarClass.split(".");
			while(myArr.length&&tarArr.length&&myArr[0]==tarArr[0]){
				myArr.shift();
				tarArr.shift();
			};
			var i=0,len=0;
			len=myArr.length;
			for(i=0;i<len;i++){
				myArr[i]="../";
			}
			if(myArr.length>0){
				rst=myArr.join("")+tarArr.join("/");
				}else{
				rst=tarArr.join("/");
			}
			rst=rst+".ts";
			rst="///<reference path=\""+rst+"\" />";
			return rst;
		}

		CodeManager.objToUI=function(obj,pagePath){
			var isPreset=false;
			var className=FileManager.getFileName(pagePath)+"UI";
			var pack=CodeManager.getPackage(pagePath);
			var uiXml=ObjectTools.copyObjFast(obj);
			var viewMap={};
			isPreset=TypeManager.isPreFabNodeType(obj.type);
			CodeManager.parseUIobj(uiXml,viewMap);
			var imports="";
			var temp=[];
			for (var key in viewMap){
				temp.push({name:key,lib:viewMap[key]});
			}
			temp.sort(MathUtil.sortByKey("name"));
			var viewClassMap="";
			var preRefers="";
			var obj1;
			for(var $each_obj1 in temp){
				obj1=temp[$each_obj1];
				var lib=obj1.lib;
				var libName=lib.substring(lib.lastIndexOf(".")+1,lib.length);
				var regName;
				if(obj1.lib==obj1.name&&CodeManager.getRunClass(obj1.name)){
					lib=CodeManager.getRunClass(obj1.name);
					libName=lib.substring(lib.lastIndexOf(".")+1,lib.length);
					regName=obj1.name;
					}else{
					regName=lib;
				}
				if(ProjectSetting.codeType==0){
					imports+="	import "+lib+";\n";
					viewClassMap+="			View.regComponent(\""+regName+"\","+libName+");\n";
					}else{
					imports+="	import "+libName+" = "+lib+";\n";
					viewClassMap+="			View.regComponent(\""+regName+"\","+lib+");\n";
					preRefers+="\n"+CodeManager.getReferStr(pack,lib);
				}
			};
			var str="";
			var baseName=obj.type;
			var uiObj;
			uiObj=ObjectTools.copyObjFast(uiXml);
			var needCompIdNode;
			needCompIdNode=AnimationDataWorker.getAnimationedNode(uiObj);
			CodeManager.cleanUIObj(uiObj,needCompIdNode);
			if(!CodeManager.isViewHasAnimation(uiObj)){
				delete uiObj.animations;
			};
			var uiPath;
			var pageLink;
			uiPath=pack+"."+className;
			uiPath=FileManager.getRelativePath(SystemSetting.pagesPath,pagePath);
			pageLink=uiPath=FileManager.adptToCommonUrl(uiPath);
			uiPath=uiPath.split(".")[0];
			var classObj;
			classObj={};
			classObj["className"]=className;
			classObj["classType"]=baseName;
			if(ProjectSetting.codeType==1){
				classObj["classType"]=CodeManager.getFullClassPath(baseName);
			}
			classObj["pack"]=pack;
			classObj["viewClassMap"]=viewClassMap;
			classObj["uiObj"]=JSON.stringify(uiObj);
			classObj["uiPath"]=uiPath;
			var pageExportType;
			pageExportType=PageStyleManager.getPageFinalExportType(pageLink);
			switch(pageExportType){
				case PageExportType.INCODE:
					break ;
				case PageExportType.LOAD_ONE:
					FileManager.createJSONFile(FileManager.getPath(CodeManager.uiDataExportFolder,uiPath+".json"),uiObj);
					break ;
				case PageExportType.LOAD_PACK:
					CodeManager.uiObjMap[uiPath]=ObjectTools.copyObjFast(uiObj);
					break ;
				}
			switch(Math.ceil(ProjectSetting.codeType)){
				case 0:
					classObj["vars"]=CodeManager.createVarByObj(uiXml,viewMap);
					break ;
				case 2:
				case 2:
					classObj["vars"]=CodeManager.createJSVarByObj(uiXml,viewMap);
					break ;
				case 1:
					classObj["vars"]=CodeManager.createTSVarByObj(uiXml,viewMap);
					break ;
				}
			if(ProjectSetting.codeType==0){
				classObj["imports"]=CodeManager.prefixStr(ProjectSetting.codeImports,"	")+"\n"+imports;
				}else{
				classObj["imports"]=CodeManager.prefixStr(CodeManager.tsCodePreImport,"	")+"\n"+imports;
				classObj["importsPre"]=CodeManager.tsCodePreFromImport+"\n"+preRefers;
				classObj["imports"]=CodeManager.prefixStr("","	")+imports;
				classObj["importsPre"]="";
			};
			var tplStr;
			tplStr=CodeTplManager.getCodeTpl(ProjectSetting.codeType,isPreset,PageExportType.isLoadType(pageExportType));
			str=CodeManager.createExportCode(tplStr,classObj);
			return str;
		}

		CodeManager.createExportCode=function(tplStr,data){
			var rst;
			var key;
			rst=tplStr;
			for(key in data){
				rst=StringTool.getReplace(rst,"{!"+key+"!}",data[key]);
			}
			return rst;
		}

		CodeManager.cleanUIObj=function(node,compIdNeedDic){
			var tkey;
			var childs;
			var i=0,len=0;
			if(!node.child)node.child=[];
			childs=node.child;
			len=childs.length;
			var type;
			type=node.type;
			var skinLabel;
			skinLabel=UIConfigManager.getCompSkinLabel(type);
			if(node.props&&node.props[skinLabel]){
				var skinStr;
				skinStr=node.props[skinLabel];
				if(skinStr.indexOf("~")>=0){
					delete node.props[skinLabel];
				}
			}
			for(i=0;i<len;i++){
				CodeManager.cleanUIObj(childs[i],compIdNeedDic);
			}
			for(tkey in node){
				if(!CodeManager.keysNeeded.hasOwnProperty(tkey)){
					delete node[tkey];
				}
			};
			var props;
			props=node.props;
			if(props){
				for(tkey in CodeManager.propkeysRemove){
					delete props[tkey];
				}
			}
			if(node.compId&&compIdNeedDic&&!compIdNeedDic[node.compId]){
				delete node.compId;
			}
			if(childs.length<1){
				delete node.child;
			}
			if(!CodeManager.isViewHasAnimation(node)){
				delete node.animations;
			}
		}

		CodeManager.createJSVarByObj=function(obj,viewMap){
			var arr=[];
			CodeManager.parseVarByObj(obj,arr);
			var str="";
			for(var i=0;i<arr.length;i++){
				var a=arr[i];
				var compType=a[1];
				if(viewMap[compType]==null){
					str+="		    this."+a[0]+"=null;\n";
					}else{
					var lib=viewMap[compType];
					var libName=lib.substring(lib.lastIndexOf(".")+1,lib.length);
					str+="		    this."+a[0]+"=null;\n";
				}
			}
			return str;
		}

		CodeManager.createVarByObj=function(obj,viewMap){
			var arr=[];
			CodeManager.parseVarByObj(obj,arr);
			var str="";
			for(var i=0;i<arr.length;i++){
				var a=arr[i];
				var compType=a[1];
				if(viewMap[compType]==null){
					str+="		public var "+a[0]+":"+compType+";\n";
					}else{
					var lib=viewMap[compType];
					var libName=lib.substring(lib.lastIndexOf(".")+1,lib.length);
					str+="		public var "+a[0]+":"+libName+";\n";
				}
			}
			return str;
		}

		CodeManager.createTSVarByObj=function(obj,viewMap){
			var arr=[];
			CodeManager.parseVarByObj(obj,arr);
			var str="";
			for(var i=0;i<arr.length;i++){
				var a=arr[i];
				var compType=a[1];
				if(viewMap[compType]==null){
					str+="		public "+a[0]+":"+CodeManager.getFullClassPath(compType)+";\n";
					}else{
					var lib=viewMap[compType];
					if(CodeManager.getRunClass(lib)){
						lib=CodeManager.getRunClass(lib);
					};
					var libName=lib.substring(lib.lastIndexOf(".")+1,lib.length);
					str+="		public "+a[0]+":"+lib+";\n";
				}
			}
			return str;
		}

		CodeManager.getFullClassPath=function(className){
			var runClass;
			runClass=UIConfigManager.getCompProp(className,"runClass");
			if(CodeManager.importDic[className]){
				return className;
			}
			if(!runClass)runClass="Laya."+className;
			return runClass;
		}

		CodeManager.getRunClass=function(className){
			if(CodeManager.importDic[className]){
				return null;
			};
			var runClass;
			runClass=UIConfigManager.getCompProp(className,"runClass");
			return runClass;
		}

		CodeManager.cleanNodeAnimations=function(node){
			if(!CodeManager.isViewHasAnimation(node)){
				delete node.animations;
			}
		}

		CodeManager.isViewHasAnimation=function(obj){
			if(obj.animations){
				var i=0,len=0;
				var animations;
				animations=obj.animations;
				len=animations.length;
				for(i=0;i<len;i++){
					if(animations[i].nodes&&animations[i].nodes.length>0)
						return true;
				}
			}
			return false;
		}

		CodeManager.parseVarByObj=function(obj,arr){
			if(obj.animations){
				var i=0,len=0;
				var animations;
				animations=obj.animations;
				len=animations.length;
				for(i=0;i<len;i++){
					if(animations[i].nodes&&animations[i].nodes.length>0)
						arr.push([String(animations[i].name),"FrameClip"]);
				}
			}
			if(obj.props["var"]){
				arr.push([String(obj.props["var"]),obj.props.runtime?String(obj.props.runtime):obj.type]);
			};
			var list=obj.child;
			if(list)
				for (var j=0,n=list.length;j < n;j++){
				CodeManager.parseVarByObj(list[j],arr);
			}
		}

		CodeManager.prefixStr=function(str,prefix){
			var arr=str.split("\n");
			for (var i=0,n=arr.length;i < n;i++){
				arr[i]=prefix+arr[i];
			}
			return arr.join("\n");
		}

		CodeManager.getPackage=function(path){
			if (path==null)
				return null;
			path=FileManager.getRelativePath(SystemSetting.pagesPath,path);
			path=FileManager.adptToCommonUrl(path);
			path=path.substring(0,path.lastIndexOf("\/")).replace(/\//g,".");
			var uiPath=ProjectSetting.codeExportPath;
			uiPath=FileManager.adptToCommonUrl(uiPath);
			if(uiPath.charAt(uiPath.length-1)!="\/"){
				uiPath=uiPath+"\/";
			};
			var startIndex=uiPath.indexOf("src/")>-1?(uiPath.indexOf("src/")+4):(uiPath.indexOf("/")+1);
			uiPath=uiPath.substring(startIndex,uiPath.length-1).replace(/\//g,".");
			var pack=uiPath+(path!=""?"."+path:"");
			return pack;
		}

		CodeManager.parseUIobj=function(obj,viewMap){
			var compType=obj.type;
			compType=StringTool.trimSide(compType);
			obj.type=compType;
			var runtime;
			var prefabO;
			prefabO=PreFabManager.I.getPreFabByNode(obj);
			if (compType !="View" && compType !="Dialog"){
				if (compType !="UIView"){
					var skinLabel=""
					skinLabel=UIConfigManager.getCompProp(compType,"skinLabel");
					skinLabel=skinLabel || "styleSkin";
					var skin=obj.props[skinLabel]||obj.props["skin"];
					if(prefabO&&prefabO.props&&prefabO.props[skinLabel]){
						skin=prefabO.props[skinLabel];
					}
					if (Boolean(skin)){
						var defaultProps=ResStyleManager.getPropArr(skin);
						CodeManager.setObjDefaultValue(obj,defaultProps);
					}
					}else {
					var sourcePath=obj.source;
					if (Boolean(sourcePath)){
						defaultProps=ResStyleManager.getPropArrByPropStr(PageStyleManager.getPageProps(sourcePath));
						CodeManager.setObjDefaultValue(obj,defaultProps);
					}
				}
			}
			if(prefabO&&obj.props&&prefabO.props){
				PreFabManager.insertValues(obj.props,prefabO.props,obj.props);
			}
			AppendPropGroupTool.insertAppendProps(obj);
			AppendPropGroupTool.adptScriptNode(obj);
			PreFabManager.I.clearPreFabProps(obj);
			if (compType=="UIView"){
				var source=obj.source;
				source=FileManager.getPath(SystemSetting.pagesPath,source);
				var viewName=FileManager.getFileName(source);
				obj.type=viewName;
				runtime=obj.props.runtime;
				if(!runtime){
					runtime=obj.props.runtime=CodeManager.getPackage(source)+"."+viewName+"UI";
				}
				viewMap[runtime]=runtime;
				}else{
				runtime=obj.props.runtime;
				if(runtime){
					viewMap[runtime]=runtime;
					}else{
					var runClass;
					runClass=CodeManager.getRunClass(compType);
					if(runClass){
						viewMap[compType]=compType;
					}
				}
			}
			if(compType=="EffectAnimation"&&obj.props&&obj.props.effect){
				var effect=obj.props.effect;
				effect=FileManager.getPath(SystemSetting.pagesPath,effect);
				var effectName=FileManager.getFileName(effect);
				obj.props.effectClass=CodeManager.getPackage(effect)+"."+effectName+"UI";
				obj.type="Script";
				obj.props.runtime=CodeManager.getRunClass("EffectAnimation");
				delete obj.props.effect;
				viewMap[obj.props.effectClass]=obj.props.effectClass;
			}
			delete obj.props.layers;
			delete obj.props.layer;
			delete obj.props.sceneWidth;
			delete obj.props.sceneHeight;
			delete obj.props.sceneColor;
			delete obj.props.sceneBg;
			delete obj.props.styleSkin;
			var list=obj.child;
			if(list)
				for (var j=0,n=list.length;j < n;j++){
				CodeManager.parseUIobj(list[j],viewMap);
			}
			CodeManager.cleanNodeAnimations(obj);
		}

		CodeManager.setObjDefaultValue=function(obj,props){
			var prop;
			for(var $each_prop in props){
				prop=props[$each_prop];
				var a=prop.split("=");
				if (a.length==2){
					var key=a[0];
					var val=a[1];
					if (!obj.props.hasOwnProperty(key)){
						obj.props[key]=ObjectTools.getAutoValue(val);
					}
				}
			}
		}

		CodeManager.isLoadMode=false;
		CodeManager.isAs=false;
		CodeManager.uiObjMap=null
		CodeManager.projectExportType=null
		CodeManager.isUIPackMode=false;
		CodeManager.uiDataExportFolder=null
		CodeManager.hasPreExportInfo=false;
		CodeManager.isConfigsChanged=false;
		CodeManager.preExportInfo=null
		CodeManager.prePageFileInfos=null
		CodeManager.tPageFileInfos=null
		CodeManager.ChangeTimeSign="mTime";
		CodeManager.HasSpecialSign="hasSpecial";
		CodeManager.ExportCodeSign="code";
		CodeManager.CodeType_AS=0;
		CodeManager.CodeType_JS=2;
		CodeManager.CodeType_JSInOne=2;
		CodeManager.CodeType_TS=1;
		CodeManager.tsCodePreFromImport=null
		CodeManager.tsCodePreImport=null
		CodeManager.allInOnePre="";
		CodeManager.importDic={};
		__static(CodeManager,
		['configFiles',function(){return this.configFiles=[".laya","pageStyles.xml","styles.xml"];},'SpecialPageKeyWords',function(){return this.SpecialPageKeyWords=
			[
			"preset",
			"UIView",
			"Script",
			"appendProps"];},'pageFileSigns',function(){return this.pageFileSigns=
			[
			".ani",
			".scene",
			".prefabui",
			".prefab",
			".gani",
			".efc",
			".ui"];},'specialFiles',function(){return this.specialFiles=[".png","$down.png","$bar.png","$up.png"];},'keysNeeded',function(){return this.keysNeeded={
				"type":true,
				"props":true,
				"child":true,
				"compId":true,
				"animations":true
				};},'propkeysRemove',function(){return this.propkeysRemove={
				"appendProps":true,
				"preset":true,
				"presetID":true,
				"presetPre":true,
				"presetIDPre":true
		};}

		]);
		return CodeManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-21 下午4:03:09
	*/
	//class laya.editor.manager.CodeTplManager
	var CodeTplManager=(function(){
		function CodeTplManager(){}
		__class(CodeTplManager,'laya.editor.manager.CodeTplManager');
		CodeTplManager.init=function(type){
			(type===void 0)&& (type="");
			CodeTplManager.jsCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.JSCodeTemplate+type));
			CodeTplManager.jsCodeTplPst=FileManager.readTxtFile(FileManager.getAppPath(Paths.JSCodeTemplate+".preset"));
			CodeTplManager.jsCodePre=FileManager.readTxtFile(FileManager.getAppPath(Paths.JSCodePreTemplate));
			CodeTplManager.tsCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.TSCodeTemplate+type));
			CodeTplManager.tsCodeTplPst=FileManager.readTxtFile(FileManager.getAppPath(Paths.TSCodeTemplate+".preset"));
			CodeTplManager.tsCodePre=FileManager.readTxtFile(FileManager.getAppPath(Paths.TSCodePreTemplate));
			CodeTplManager.asCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASCodeTemplate+type));
			CodeTplManager.asCodeTplPst=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASCodeTemplate+".preset"));
			CodeTplManager.parsePublishConfig();
		}

		CodeTplManager.recordCodeTpls=function(sign){
			var tData;
			if(!CodeTplManager.codeTplsDic[sign]){
				CodeTplManager.codeTplsDic[sign]={};
			}
			tData=CodeTplManager.codeTplsDic[sign];
			var i=0,len=0;
			len=CodeTplManager._codeTplsNames.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=CodeTplManager._codeTplsNames[i];
				tData[tKey]=CodeTplManager[tKey];
			}
		}

		CodeTplManager.setCodeTpls=function(sign){
			var tData;
			tData=CodeTplManager.codeTplsDic[sign];
			var i=0,len=0;
			len=CodeTplManager._codeTplsNames.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=CodeTplManager._codeTplsNames[i];
				CodeTplManager[tKey]=tData[tKey];
			}
		}

		CodeTplManager.initCodeTpls=function(){
			CodeTplManager.initCodeTplsByLoadMode(false);
			CodeTplManager.recordCodeTpls("NoLoad");
			CodeTplManager.initCodeTplsByLoadMode(true);
			CodeTplManager.recordCodeTpls("Load");
		}

		CodeTplManager.getCodeTpl=function(codeType,isPreset,isLoad){
			if(isLoad){
				CodeTplManager.setCodeTpls("Load");
				}else{
				CodeTplManager.setCodeTpls("NoLoad");
			};
			var tplStr;
			codeType=Math.ceil(codeType);
			switch(codeType){
				case 0:
					tplStr=CodeTplManager.asCodeTpl;
					if(isPreset){
						tplStr=CodeTplManager.asCodeTplPst;
					}
					break ;
				case 2:
				case 2:
					tplStr=CodeTplManager.jsCodeTpl;
					if(isPreset){
						tplStr=CodeTplManager.jsCodeTplPst;
					}
					break ;
				case 1:
					tplStr=CodeTplManager.tsCodeTpl;
					if(isPreset){
						tplStr=CodeTplManager.tsCodeTplPst;
					}
					break ;
				}
			return tplStr;
		}

		CodeTplManager.initCodeTplsByLoadMode=function(isLoadMode){
			if(isLoadMode){
				CodeTplManager.codeModeType=".load";
				CodeTplManager.init(".load");
				}else{
				CodeTplManager.codeModeType="";
				CodeTplManager.init();
			}
			CodeTplManager.parsePublishConfig();
		}

		CodeTplManager.parsePublishConfig=function(){
			var buildConfigPath;
			buildConfigPath=FileManager.getWorkPath("laya/build.cfg");
			if(!FileTools.exist(buildConfigPath)){
				CodeTplManager.setDefaultBuildAction();
				}else{
				try{
					var config;
					config=FileManager.readJSONFile(buildConfigPath);
					if(config.codemode=="2"){
						CodeTplManager.asCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASCodeTemplate2));
						}else{
						CodeTplManager.asCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASCodeTemplate+CodeTplManager.codeModeType));
					}
					CodeTplManager.base64path=config["base64path"];
					CodeTplManager.base64pack=config["base64pack"];
					}catch(e){
					CodeTplManager.setDefaultBuildAction();
				}
			}
		}

		CodeTplManager.setDefaultBuildAction=function(){
			CodeTplManager.asCodeTpl=FileManager.readTxtFile(FileManager.getAppPath(Paths.ASCodeTemplate+CodeTplManager.codeModeType));
			CodeTplManager.base64path="src/data/Base64AtlasManager.as";
			CodeTplManager.base64pack="data";
		}

		CodeTplManager.jsCodeTpl="";
		CodeTplManager.jsCodeTplPst="";
		CodeTplManager.jsCodePre="";
		CodeTplManager.tsCodeTpl="";
		CodeTplManager.tsCodeTplPst="";
		CodeTplManager.tsCodePre="";
		CodeTplManager.asCodeTpl="";
		CodeTplManager.asCodeTplPst="";
		CodeTplManager.codeTplsDic={};
		CodeTplManager.codeModeType=null
		CodeTplManager.base64path="src/data/Base64AtlasManager.as";
		CodeTplManager.base64pack="data";
		__static(CodeTplManager,
		['_codeTplsNames',function(){return this._codeTplsNames=[
			"jsCodeTpl",
			"jsCodeTplPst",
			"jsCodePre",
			"tsCodeTpl",
			"tsCodeTplPst",
			"tsCodePre",
			"asCodeTpl",
			"asCodeTplPst"];}
		]);
		return CodeTplManager;
	})()


	/**导出管理器
	*@author yung
	*/
	//class laya.editor.manager.ExportManager
	var ExportManager=(function(){
		function ExportManager(){};
		__class(ExportManager,'laya.editor.manager.ExportManager');
		ExportManager.init=function(){
			Notice$1.listen("Release_Project",null,ExportManager.release);
		}

		ExportManager.release=function(){
			ExportManager.clear();
			ExportManager.export(true);
		}

		ExportManager.forceExport=function(){
			ExportManager.clear();
			ExportManager.export(false,null,true);
		}

		ExportManager.clear=function(){
			ExportManager.clearRes=true;
			FileManager.removeFile(CodeManager.getPreExportFilePath());
			var uiCodePath=FileManager.getWorkPath(ProjectSetting.codeExportPath);
			FileManager.removeFile(uiCodePath);
			FileManager.createDirectory(uiCodePath);
		}

		ExportManager.export=function(release,complete,force){
			(release===void 0)&& (release=false);
			(force===void 0)&& (force=false);
			ExportManager.clearRes=force||ExportManager.configChanged;
			laya.editor.manager.ExportManager.complete=complete;
			if (UIPanel.instance.hasChange){
				Confirm.show(Sys.lang("在发布代码之前，有页面还未保存，是否保存然后发布？"),Sys.lang("有页面未保存"),ExportManager.confirmBack,[release]);
				}else {
				ExportManager.doExport(release);
			}
		}

		ExportManager.confirmBack=function(release,sure,type){
			if (sure){
				UIPanel.instance.saveAll();
			}
			if(type!="close")
				ExportManager.doExport(release);
		}

		ExportManager.packingEndHandler=function(err,stdOut,stdErr){
			console.log("err:",err);
			if (ExportManager.isCmdVer){
				if (ExportManager._packingEndHandler !=null){
					ExportManager._packingEndHandler(err,stdOut,stdErr);
				}
				return;
			}
			Waiting.hide();
			MessageManager.instance.show(Sys.lang("发布成功"));
			if(Browser.window["changeViewCode"]){
				Browser.window["changeViewCode"]();
			}
			if(SystemSetting.toCodeModeWhenPublicEnd){
				Laya.timer.once(1000,null,ExportManager.switchToCodeMode);
			}
		}

		ExportManager.switchToCodeMode=function(){
			if(Browser.window["changeLayaIDECodeMode"]){
				Browser.window["changeLayaIDECodeMode"]();
			}
		}

		ExportManager.getSkipRes=function(){
			return ExportManager.getRessStr(ResStyleManager.getPackFilesByType(2));
		}

		ExportManager.getWhitePackList=function(){
			return ExportManager.getRessStr(ResStyleManager.getPackFilesByType(1));
		}

		ExportManager.getRepeatList=function(){
			return ExportManager.getRessStr(ResStyleManager.getPicTypeFilesByType(1));
		}

		ExportManager.getRessStr=function(resList){
			var strs;
			strs=[];
			var i=0,len=0;
			var tPath;
			var addStrs=[];
			len=resList.length;
			for(i=0;i<len;i++){
				tPath=FileManager.getPath(SystemSetting.assetsPath,resList[i]);
				if(FileTools.exist(tPath)){
					strs.push(tPath);
				}
				CodeManager.getSkinSpecialRes(resList[i],addStrs);
			}
			len=addStrs.length;
			for(i=0;i<len;i++){
				tPath=FileManager.getPath(SystemSetting.assetsPath,addStrs[i]);
				if(FileTools.exist(tPath)){
					strs.push(tPath);
				}
			}
			return strs.join(",");
		}

		ExportManager.adptCallPath=function(filePath){
			if(!filePath)return filePath;
			var lastStr;
			lastStr=filePath.charAt(filePath.length-1);
			if(lastStr=="/"||lastStr=="\\"){
				return filePath.substr(0,filePath.length-1);
			}
			return filePath;
		}

		ExportManager.doExport=function(release){
			Waiting.show(Sys.lang("发布中，请稍等。。"),Sys.lang("发布代码"));
			Laya.timer.frameOnce(2,null,ExportManager.doExportLater,[release]);
		}

		ExportManager.getNewParamList=function(str){
			if(str=="")return [];
			return str.split(",");
		}

		ExportManager.exportCodeOnly=function(){
			Waiting.show(Sys.lang("发布中，请稍等。。"),Sys.lang("发布代码"));
			ExportManager.doExportLater(false,true,false);
		}

		ExportManager.doExportLater=function(release,exportUICode,exportRes){
			(exportUICode===void 0)&& (exportUICode=true);
			(exportRes===void 0)&& (exportRes=true);
			if(exportUICode){
				ExportManager.exportUICodeWork();
			}
			if (exportRes){
				ExportManager.exportResWork(release);
			}
			if(!exportRes){
				ExportManager.packingEndHandler("export end");
			}
			ExportManager.configChanged=false;
		}

		ExportManager.exportUICodeWork=function(){
			FileManager.createDirectory(FileManager.getWorkPath(ProjectSetting.codeExportPath));
			CodeManager.exportCode();
		}

		ExportManager.exportResWork=function(release){
			var blackList=ExportManager.getSkipRes();
			var whilteList=ExportManager.getWhitePackList();
			var repeatList=ExportManager.getRepeatList();
			if(release)blackList=blackList.concat(ResManager.getUnUserdList());
			var allNotPacks;
			allNotPacks=ResFileManager.getAllUnPackLinkList(null);
			var notPackDirs;
			notPackDirs=ResStyleManager.getAllUnPackDir();
			allNotPacks=allNotPacks.concat(notPackDirs);
			var notPackFilePath;
			notPackFilePath=FileManager.getWorkPath(ExportManager.adptCallPath(ProjectSetting.asynResExportPath)+"/unpack.json");
			FileManager.createJSONFile(notPackFilePath,allNotPacks);
			var oldPathPackPath="libs/TP/TileAtlasPacker";
			var newPathPackPath="libs/TP/AtlasGenerator";
			if (SystemSetting.isCMDVer){
				oldPathPackPath=oldPathPackPath.replace("libs/","");
				newPathPackPath=newPathPackPath.replace("libs/","");
			};
			var cmd="\""+FileManager.getAppPath(oldPathPackPath)+"\""+
			" -maxAltasWidth="+ProjectSetting.textureWidth+" -maxAltasHeight="+ProjectSetting.textureHeight+
			" -tileWidthLimit="+ProjectSetting.picWidth+" -tileHeightLimit="+ProjectSetting.picHeight+
			" "+"\""+ExportManager.adptCallPath(SystemSetting.assetsPath)+"\""+
			" -outputDir="+"\""+ExportManager.adptCallPath(FileManager.getWorkPath(ProjectSetting.resExportPath))+"\"";
			if(ExportManager.clearRes){
				cmd+=" -force=true";
			}
			if(ProjectSetting.power2=="true"){
				cmd+=" -powerOfTwo=true";
			}
			if(ProjectSetting.trimempty=="true"){
				cmd+=" -trim=true";
				}else{
				cmd+=" -trim=false";
			}
			cmd+=" -htmlDir="+"\""+ExportManager.adptCallPath(FileManager.getWorkPath(ProjectSetting.asynResExportPath))+"\"";
			cmd+=" -blackList="+"\""+blackList+"\"";
			cmd+=" -inflateList="+"\""+repeatList+"\"";
			cmd+=" -includeList="+"\""+whilteList+"\"";
			var packFilePath=Paths.getPackParamFile();
			var packObj;
			packObj={};
			packObj["inputDir"]=ExportManager.adptCallPath(SystemSetting.assetsPath);
			packObj["outputDir"]=ExportManager.adptCallPath(FileManager.getWorkPath(ProjectSetting.resExportPath));
			packObj["resDir"]=ExportManager.adptCallPath(FileManager.getWorkPath(ProjectSetting.asynResExportPath));
			packObj["force"]=ExportManager.clearRes;
			packObj["includeList"]=ExportManager.getNewParamList(whilteList);
			packObj["excludeList"]=ExportManager.getNewParamList(blackList);
			packObj["extrudeList"]=ExportManager.getNewParamList(repeatList);
			var atlas;
			atlas={};
			atlas["width"]=ProjectSetting.textureWidth;
			atlas["height"]=ProjectSetting.textureHeight;
			atlas["powerOfTwo"]=ProjectSetting.power2=="true";
			console.log("picType:",ProjectSetting.picType);
			atlas["textureFormat"]=ProjectSetting.picType==0?"png32":"png8";
			packObj["atlas"]=atlas;
			var spriteConfig;
			spriteConfig={};
			spriteConfig["width"]=ProjectSetting.picWidth;
			spriteConfig["height"]=ProjectSetting.picHeight;
			spriteConfig["cropAlpha"]=ProjectSetting.trimempty=="true";
			packObj["sprite"]=spriteConfig;
			FileManager.createJSONFile(packFilePath,packObj);
			var option;
			option={encoding:"binary",maxBuffer:1024*1024*20};;
			option.cwd=FileManager.getAppPath(newPathPackPath).replace("AtlasGenerator","");
			var newCmd;
			newCmd="AtlasGenerator --config "+"\""+ExportManager.adptCallPath(packFilePath)+"\"";
			newCmd="\""+FileManager.getAppPath(newPathPackPath)+"\""+" --config "+"\""+ExportManager.adptCallPath(packFilePath)+"\"";
			cmd=newCmd;
			console.log("Waiting for pics packing");
			FileManager.createDirectory(FileManager.getWorkPath(ProjectSetting.resExportPath));
			CMDShell.execute(cmd,function(err,stdOut,stdErr){
				if (err){
					console.log("Error Occured: "+err);
				}
				else{
					console.log(stdErr);
				}
				ExportManager.packingEndHandler(err,stdOut,stdErr);
			},option);
		}

		ExportManager.swfMap=null
		ExportManager.createSwfQueue=null
		ExportManager.fileUnUsed={};
		ExportManager.complete=null
		ExportManager.clearRes=false;
		ExportManager.configChanged=false;
		ExportManager.isCmdVer=false;
		ExportManager._packingEndHandler=null
		ExportManager.powerOfTwo=false;
		return ExportManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-25 上午10:19:18
	*/
	//class laya.editor.manager.LayerManager
	var LayerManager=(function(){
		function LayerManager(){}
		__class(LayerManager,'laya.editor.manager.LayerManager');
		LayerManager.init=function(){
			LayerManager.stage=new Box();
			LayerManager.stage.mouseEnabled=true;
			Laya.stage.addChild(LayerManager.stage);
			Laya.stage.on("resize",null,LayerManager.onStage);
		}

		LayerManager.onStage=function(){
			if (Browser.pixelRatio !=1){
				Laya.stage._width=Browser.clientWidth;
				Laya.stage._height=Browser.clientHeight;
				Laya.stage.scale(Browser.pixelRatio,Browser.pixelRatio);
			}
			LayerManager.stage.width=Laya.stage._width>900?Laya.stage._width:900;
			LayerManager.stage.height=Laya.stage._height>700?Laya.stage._height:700;
		}

		LayerManager.stage=null
		LayerManager.minWidth=900;
		LayerManager.minHeight=700;
		return LayerManager;
	})()


	/**页面管理器
	*@author yung
	*/
	//class laya.editor.manager.PageManager
	var PageManager=(function(){
		function PageManager(){}
		__class(PageManager,'laya.editor.manager.PageManager');
		PageManager.copyPageBg=function(pagePath,bgImgPath){
			if (!FileTools.exist(bgImgPath)){
				return bgImgPath;
			}
			if (Boolean(bgImgPath)){
				var file=new File(bgImgPath);
				if (file.exists){
					var f=FileTools.path.sep;
					var newPath=pagePath.replace("laya"+f+"pages"+f,"laya"+f+"views"+f).replace(".ui","."+file.extension);
					FileManager.copyFile(bgImgPath,newPath);
					return FileManager.getWorkRelativePath(newPath);
				}
			}
			return "";
		}

		PageManager.find=function(word){
			var pages=FileManager.getFileList(FileManager.getWorkPath("laya/pages/"));
			var arr=[];
			var a;
			for(var $each_a in pages){
				a=pages[$each_a];
				var path=a;
				if(FileTools.isDirectory(path))continue ;
				var txt=FileManager.readTxtFile(path);
				if(txt.indexOf(word)!=-1){
					arr.push({label:FileManager.getRelativePath(SystemSetting.pagesPath,path),path:path});
				}
			}
			return arr;
		}

		PageManager.replace=function(oldWord,newWord){
			Waiting.instance.start(Sys.lang("替换中,请等待。。"),Sys.lang("替换中"));
			var pages=FileManager.getFileList(FileManager.getWorkPath("laya/pages/"));
			pages=pages.concat(PreFabManager.getPrefabFiles());
			var arr=[];
			var a;
			for(var $each_a in pages){
				a=pages[$each_a];
				var path=a;
				if(FileTools.isDirectory(path))continue ;
				var uiViewer=UIPanel.instance.getUIViewer(path);
				oldWord.lastIndex=0;
				if (uiViewer){
					try{
						var txt=JsonTool.getJsonString(uiViewer.getDesignData());
						if(oldWord.test(txt)){
							txt=txt.replace(oldWord,newWord);
							uiViewer.changeDataO(ObjectTools.getObj(txt));
							arr.push(path);
						}
						}catch(e){
						Alert.show(Sys.lang("替换文件失败：{0}",path));
					}
					}else{
					txt=FileManager.readTxtFile(path);
					if(oldWord.test(txt)){
						txt=txt.replace(oldWord,newWord);
						FileManager.createTxtFile(path,txt);
						arr.push({label:FileManager.getRelativePath(SystemSetting.pagesPath,path),path:path});
					}
				}
			}
			Waiting.instance.close();
			return arr;
		}

		return PageManager;
	})()


	/**页面样式管理器
	*@author yung
	*/
	//class laya.editor.manager.PageStyleManager
	var PageStyleManager=(function(){
		function PageStyleManager(){};
		__class(PageStyleManager,'laya.editor.manager.PageStyleManager');
		PageStyleManager.init=function(){
			var txt=FileManager.readTxtFile(SystemSetting.pageStylePath);
			try {
				PageStyleManager.styleXML=new XMLElement(Boolean(txt)? txt :"<?xml version=\"1.0\" encoding=\"UTF-8\"?><page></page>");
				}catch (e){
				Alert.show(Sys.lang("PageStyleManager 读取文件{0}出错",SystemSetting.stylePath),Sys.lang("读取文件出错"));
			}
			if (PageStyleManager.styleXML){
				PageStyleManager.styleMap={};
				var list=PageStyleManager.styleXML.children();
				var item;
				for(var $each_item in list){
					item=list[$each_item];
					PageStyleManager.styleMap[String(item.getAttribute('name'))]=item;
				}
			}
		}

		PageStyleManager.getPageProps=function(name){
			if (PageStyleManager.styleMap&&PageStyleManager.styleMap[name]){
				return String(PageStyleManager.styleMap[name].getAttribute('props'));
			}
			return "";
		}

		PageStyleManager.getIfPageExport=function(name){
			var pagetype;
			pagetype=TypeManager.getFileType(name);
			if(pagetype=="Prefab"){
				return PageStyleManager.getPageExportType(name)==Sys.lang("导出");
				}else{
				return true;
			}
		}

		PageStyleManager.getPageExportType=function(name){
			var rst;
			if(PageStyleManager.styleMap&&PageStyleManager.styleMap[name]){
				rst=PageStyleManager.styleMap[name].getAttribute('ifExport');
			}
			if(!rst)rst=Sys.lang("默认");
			if(PageExportType.isOKType(rst)){
				return rst;
			}
			return Sys.lang("默认");
		}

		PageStyleManager.getPageFinalExportType=function(name){
			var type;
			type=PageStyleManager.getPageExportType(name);
			if(type!=Sys.lang("默认"))return type;
			return PageStyleManager.getProjectExportType();
		}

		PageStyleManager.getProjectExportType=function(){
			var id=0;
			id=Math.ceil(ProjectSetting.uiType);
			if(id>=0&&id<=2){
				return PageExportType.typeList[id];
			}
			return PageExportType.INCODE;
		}

		PageStyleManager.updatePageStyle=function(name,props,ifExport){
			if(!ifExport){
				ifExport="默认";
			}
			ifExport=Sys.lang("默认");
			props=ResStyleManager.getPropStrByArr(props.split("\n"));
			if (PageStyleManager.styleMap&&PageStyleManager.styleMap[name]){
				PageStyleManager.styleMap[name].setAttribute('props',props);
				PageStyleManager.styleMap[name].setAttribute('ifExport',ifExport);
				}else {
				var xml=new XMLElement("<item name=\""+name+"\"/>");
				xml.setAttribute('props',props);
				PageStyleManager.styleXML.appendChild(xml);
				PageStyleManager.styleMap[name]=xml;
				PageStyleManager.styleMap[name].setAttribute('ifExport',ifExport);
			}
			FileManager.createTxtFile(SystemSetting.pageStylePath,PageStyleManager.styleXML.toString());
		}

		PageStyleManager.styleXML=null
		PageStyleManager.styleMap=null
		return PageStyleManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-9-1 上午10:09:44
	*/
	//class laya.editor.manager.PreFabManager
	var PreFabManager=(function(){
		function PreFabManager(){
			this.preFabDic={};
		}

		__class(PreFabManager,'laya.editor.manager.PreFabManager');
		var __proto=PreFabManager.prototype;
		__proto.getPreFabData=function(preFabPath){
			var filePath;
			filePath=FileManager.getWorkPath(preFabPath);
			if(!FileTools.exist(filePath))return null;
			var rst;
			try{
				rst=FileManager.readJSONFile(filePath);
				this.preFabDic[preFabPath]=TreeDataTool.buildNode(rst,null,"presetID",true);
			}catch(e){}
			return rst;
		}

		__proto.cleanPrefabCache=function(){
			var key;
			for(key in this.preFabDic){
				delete this.preFabDic[key];
			}
		}

		__proto.prefabFileChange=function(path){
			var rPath;
			rPath=FileManager.getWorkRelativePath(path);
			if(this.preFabDic[rPath]){
				this.preFabDic[rPath]=null;
				Notice$1.notify("FRESH_Page",[false]);
			}
		}

		__proto.getPreFabProps=function(preFabPath,preSetID){
			if(!preFabPath||!preSetID)return null;
			var filePath;
			filePath=FileManager.getWorkPath(preFabPath);
			if(!FileTools.exist(filePath))return null;
			if(this.preFabDic[preFabPath])return this.preFabDic[preFabPath][preSetID];
			var data;
			data=this.getPreFabData(preFabPath);
			if(this.preFabDic[preFabPath])return this.preFabDic[preFabPath][preSetID];
			return null;
		}

		__proto.clearPreFabProps=function(node){
			TreeDataTool.deleteNodePropKeyBut(node,PreFabManager.reserveKeys,false);
		}

		__proto.convertDataToPreFabUI=function(data,dir){
			var savePath;
			savePath=this.findOkFileName(data.type,dir,TypeManager.getExtension("page"));
			var preSetSign;
			preSetSign=FileManager.getWorkRelativePath(savePath);
			var saveO;
			saveO=ObjectTools.copyObj(data);
			if(!saveO.props)saveO.props={};
			saveO.props.x=0;
			saveO.props.y=0;
			TreeDataTool.deleteNodeKey(saveO,"compId");
			var prefabO;
			if(PreFabManager.PrefabHasWrap){
				prefabO={};
				prefabO.type="View";
				prefabO.child=[saveO];
				prefabO.props={};
				prefabO.props.width=300;
				prefabO.props.height=300;
				prefabO.props.sceneColor="#000000";
				}else{
				prefabO=saveO;
			}
			FileManager.createJSONFile(savePath,prefabO);
		}

		__proto.convertDataToPreFab=function(data,dir){
			var savePath;
			savePath=this.findOkFileName(data.type,dir);
			var preSetSign;
			preSetSign=FileManager.getWorkRelativePath(savePath);
			if(preSetSign!=data.props["preset"]){
				TreeDataTool.changeNodeKey(data,"preset","presetPre");
				TreeDataTool.changeNodeKey(data,"presetID","presetIDPre");
			}
			TreeDataTool.setNodeKey(data,"preset",preSetSign);
			TreeDataTool.resetNodeID(data,"presetID",1);
			var saveO;
			saveO=ObjectTools.copyObj(data);
			if(!saveO.props)saveO.props={};
			saveO.props.x=0;
			saveO.props.y=0;
			TreeDataTool.deleteNodeKey(saveO,"compId");
			var prefabO;
			if(PreFabManager.PrefabHasWrap){
				prefabO={};
				prefabO.type="View";
				prefabO.child=[saveO];
				prefabO.props={};
				prefabO.props.width=300;
				prefabO.props.height=300;
				prefabO.props.sceneColor="#000000";
				}else{
				prefabO=saveO;
			};
			var preX=0,preY=0;
			preX=data.props.x;
			preY=data.props.y;
			TreeDataTool.deleteAllKeyBut(data,PreFabManager.reserveKeysS);
			if(preX){
				data.props.x=preX;
			}
			if(preY){
				data.props.y=preY;
			}
			FileManager.createJSONFile(savePath,prefabO);
			Notice$1.notify("Prop_Changed");
		}

		__proto.isNodeHasPreFab=function(node){
			if(!node)return false;
			var props;
			props=node.props;
			if(!props)return false;
			if(!props["preset"]||!props["presetID"])return false;
			return true;
		}

		__proto.cutOffNodePrefab=function(node,preset){
			if(!this.isNodeHasPreFab(node))return;
			var props;
			props=node.props;
			if(!props)return;
			preset=props["preset"];
			if(preset&&(preset!=props["preset"]))return;
			this.insertPrefabToProps(node);
			delete props["preset"];
			delete props["presetID"];
			delete props["presetPre"];
			delete props["presetIDPre"];
		}

		__proto.cutOffNodeTreePrefab=function(node,preset){
			if(!this.isNodeHasPreFab(node))return;
			var props;
			props=node.props;
			if(!props["preset"]||!props["presetID"])return;
			if(preset&&(preset!=props["preset"]))return;
			preset=props["preset"];
			this.cutOffNodePrefab(node,preset);
			var childs;
			childs=node.child;
			if(!childs)return;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				this.cutOffNodeTreePrefab(childs[i],preset);
			}
		}

		__proto.getPreFabPreByNode=function(node){
			if(!node)return null;
			var props;
			props=node.props;
			if(!props)return null;
			var preData;
			preData=this.getPreFabProps(props["preset"],props["presetID"]);
			if(!preData)return null;
			var rst;
			rst={};
			props=preData.props;
			var prepreData;
			if(props){
				prepreData=this.getPreFabPreByNode(this.getPreFabProps(props["presetPre"],props["presetIDPre"]));
				if(prepreData&&prepreData.props){
					PreFabManager.insertValues(PreFabManager.mMask,prepreData.props,rst);
				}
			}
			if(preData&&preData.props){
				PreFabManager.insertValues(PreFabManager.mMask,preData.props,rst);
			};
			var rstNode;
			rstNode={};
			rstNode.props=rst;
			return rstNode;
		}

		__proto.getPreFabByNode=function(node){
			return this.getPreFabPreByNode(node);
			var props;
			props=node.props;
			if(!props)return null;
			var preFabProps;
			preFabProps=this.getPreFabProps(props["preset"],props["presetID"]);
			return preFabProps;
		}

		__proto.getPreFabUIPropByNode=function(node){
			if(!TypeManager.isPrefabUINode(node))return null;
			var source=node.source;
			var sourcePath;
			var xml;
			try{
				sourcePath=FileManager.getPath(SystemSetting.pagesPath,source.replace(".xml","."+TypeManager.getExtension("page")));
				xml=FileManager.readJSONFile(sourcePath);
				if(PreFabManager.PrefabHasWrap)return xml.child[0];
				return xml;
				return xml.child[0];
				}catch(e){
			};
			return null;
		}

		// }
		__proto.getPrefabUIPropByKey=function(node,key){
			var propNode;
			propNode=this.getPreFabUIPropByNode(node);
			if(!propNode)return null;
			return propNode.props[key];
		}

		__proto.getPreFabPropByKey=function(node,key){
			var preFabProps;
			preFabProps=this.getPreFabByNode(node);
			if(!preFabProps||!preFabProps.props)return null;
			return preFabProps.props[key];
		}

		__proto.insertPrefabVar=function(data,comp){
			var props;
			props=data.props;
			if(!props)return;
			var preFabProps;
			preFabProps=this.getPreFabByNode(data);
			if(!preFabProps||!preFabProps.props)return;
			preFabProps=preFabProps.props;
			PreFabManager.insertValues(props,preFabProps,comp);
		}

		// }
		__proto.insertPrefabToProps=function(node){
			var props;
			props=node.props;
			if(!props)return;
			var preFabProps;
			preFabProps=this.getPreFabByNode(node);
			if(!preFabProps||!preFabProps.props)return;
			preFabProps=preFabProps.props;
			PreFabManager.insertValues(props,preFabProps,props);
		}

		__proto.findOkFileName=function(preSign,dir,fileSign){
			(fileSign===void 0)&& (fileSign="prefab");
			var pDir;
			pDir=dir;
			var id=1;
			var tPath
			while(true){
				tPath=FileManager.getPath(pDir,preSign+""+id+"."+fileSign);
				if(!FileTools.exist(tPath)){
					break ;
				}
				id++;
			}
			return tPath;
		}

		PreFabManager.insertValues=function(oData,insertData,tar){
			var key;
			for(key in insertData){
				if(!oData.hasOwnProperty(key)){
					tar[key]=insertData[key];
				}
			}
		}

		PreFabManager.getPrefabFiles=function(){
			var pages=FileManager.getFileList(SystemSetting.assetsPath);
			var rst;
			rst=[];
			var i=0,len=0;
			len=pages.length;
			for(i=0;i<len;i++){
				if(TypeManager.getFileType(pages[i])=="Prefab"){
					rst.push(pages[i]);
				}
			}
			return rst;
		}

		PreFabManager.PrefabHasWrap=false;
		PreFabManager.mMask={};
		__static(PreFabManager,
		['I',function(){return this.I=new PreFabManager();},'reserveKeys',function(){return this.reserveKeys={
				"preset":true,
				"presetID":true
				};},'reserveKeysS',function(){return this.reserveKeysS={
				"preset":true,
				"presetID":true,
				"presetPre":true,
				"presetIDPre":true
		};}

		]);
		return PreFabManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-1-20 下午5:52:11
	*/
	//class laya.editor.manager.ProjectConvertManager
	var ProjectConvertManager=(function(){
		function ProjectConvertManager(){}
		__class(ProjectConvertManager,'laya.editor.manager.ProjectConvertManager');
		ProjectConvertManager.convertProject=function(oPath,tarPath){
			var oBasePath;
			oBasePath=FileTools.getFileDir(oPath);
			ProjectConvertManager.parseConvertConfig(FileTools.getPath(oBasePath,"convert.cfg"));
			var relativePath;
			relativePath=FileManager.getRelativePath(oBasePath,oPath);
			var tarProjectFile;
			tarProjectFile=FileManager.getPath(tarPath,ProjectConvertManager.getNewProjectRelativePath(relativePath));
			FileManager.copyFile(oPath,tarProjectFile);
			var pagesFolder;
			pagesFolder=FileManager.getPath(oBasePath,"morn/pages");
			var tFile;
			tFile=FileManager.getPath(oBasePath,"morn/assets");
			ProjectConvertManager.copyFileToTarFolder(tFile,oBasePath,tarPath);
			tFile=FileManager.getPath(oBasePath,"morn/styles.xml");
			ProjectConvertManager.copyFileToTarFolder(tFile,oBasePath,tarPath,true);
			tFile=FileManager.getPath(oBasePath,"morn/pageStyles.xml");
			ProjectConvertManager.copyFileToTarFolder(tFile,oBasePath,tarPath,true);
			ProjectConvertManager.createByDir(pagesFolder,oBasePath,tarPath);
			MessageManager.instance.show(Sys.lang("转换成功"));
		}

		ProjectConvertManager.parseConvertConfig=function(configPath){
			ProjectConvertManager.adptSizeGrid=true;
			var configStr;
			configStr=FileTools.readFile(configPath);
			if(!configStr)return;
			var configs;
			configs=configStr.split("\n");
			var i=0,len=0;
			len=configs.length;
			var tLine;
			var configO={};
			var param;
			for(i=0;i<len;i++){
				tLine=StringTool.trimSide(configs[i]);
				if(tLine.indexOf("=")>0){
					param=tLine.split("=");
					configO[param[0]]=param[1];
				}
			}
			if(configO.hasOwnProperty("sizeGrid")){
				ProjectConvertManager.adptSizeGrid=!(configO["sizeGrid"]=="false");
			}
		}

		ProjectConvertManager.getNewProjectRelativePath=function(path){
			return path.replace("morn","laya");
		}

		ProjectConvertManager.copyFileToTarFolder=function(file,oBase,tarFolder,adpt){
			(adpt===void 0)&& (adpt=false);
			if(!FileTools.exist(file))return;
			var tarFilePath;
			var tarFolderS;
			tarFolderS=ProjectConvertManager.getNewProjectRelativePath(FileManager.getRelativePath(oBase,file));
			tarFilePath=FileManager.getPath(tarFolder,tarFolderS);
			FileManager.copyFile(file,tarFilePath);
			if(adpt){
				ProjectConvertManager.adaptStyleXML(tarFilePath);
			}
		}

		ProjectConvertManager.adptXmlProps=function(str){
			if(StringTool.trimSide(str)=="")return str;
			var obj;
			obj=ResStyleManager.getResPropsObjByPropStr(str,"\n");
			ProjectConvertManager.adptObj(obj);
			str=ResStyleManager.getResPropStrByObj(obj," ");
			return str;
		}

		ProjectConvertManager.adaptStyleXML=function(path){
			var str;
			str=FileManager.readTxtFile(path);
			var styleXML;
			try {
				styleXML=new XMLElement(str);
			}catch (e){}
			if (styleXML){
				var list=styleXML.children();
				var item;
				for(var $each_item in list){
					item=list[$each_item];
					item.setAttribute('name',ProjectConvertManager.getAdptSkin(item.getAttribute('name')));
					if(item.getAttribute('props')){
						item.setAttribute('props',ProjectConvertManager.adptXmlProps(item.getAttribute('props')));
					}
				}
			}
			FileManager.createTxtFile(path,styleXML.toString());
			return;
			var arr;
			arr=str.split("\"");
			var i=0,len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				arr[i]=ProjectConvertManager.getAdptSkin(arr[i]);
			}
			FileManager.createTxtFile(path,arr.join("\""));
		}

		ProjectConvertManager.createByDir=function(file,basePath,tarPath){
			var fileList;
			fileList=FileTools.getFileList(file);
			var i=0,len=0;
			len=fileList.length;
			var tFile;
			var code;
			var obj;
			var codePath;
			for(i=0;i<len;i++){
				tFile=fileList[i];
				if(FileTools.isDirectory(tFile)){
					}else{
					if(FileTools.getExtensionName(tFile)==ProjectConvertManager.oldUIExtension){
						code=FileManager.readTxtFile(tFile);
						var uiObj;
						try{
							uiObj=DesignInfo.xmlStrToUIObj(code);
							ProjectConvertManager.adptObj(uiObj);
							var tarFilePath;
							tarFilePath=FileManager.getPath(tarPath,ProjectConvertManager.getNewProjectRelativePath(FileManager.getRelativePath(basePath,tFile)));
							tarFilePath=tarFilePath.replace("."+ProjectConvertManager.oldUIExtension,"."+TypeManager.getExtension("page"));
							FileManager.createJSONFile(tarFilePath,uiObj);
							}catch(e){
							Alert.show(Sys.lang("转换文件失败：\n{0}",tFile));
						}
					}
				}
			}
		}

		ProjectConvertManager.getAdptSizeGrid=function(sizeGridStr){
			if(!ProjectConvertManager.adptSizeGrid)return sizeGridStr;
			sizeGridStr=sizeGridStr+"";
			var arr;
			arr=sizeGridStr.split(",");
			arr.push(arr.shift());
			return arr.join(",");
		}

		ProjectConvertManager.adptObj=function(obj){
			ProjectConvertManager.adptType(obj);
			var key;
			if(obj.hasOwnProperty("scale")){
				obj["scaleX"]=obj["scaleY"]=obj["scale"];
				delete obj["scale"];
			}
			if(obj.hasOwnProperty("compId")){
				delete obj["compId"];
			}
			if(obj.hasOwnProperty("sizeGrid")){
				obj["sizeGrid"]=ProjectConvertManager.getAdptSizeGrid(obj["sizeGrid"]);
			}
			for(key in obj){
				if(obj[key]==0&&key.toLocaleLowerCase().indexOf("color")>=0){
					obj[key]="0x000000";
				}
				if((typeof (obj[key])=='string')){
					var tStr;
					tStr=obj[key];
					if(tStr.indexOf("0x")>=0){
						tStr=StringTool.getReplace(tStr,"0x","#");
						obj[key]=tStr;
					}
					if(key=="skin"||1){
						obj[key]=ProjectConvertManager.getAdptSkin(tStr);
					}
				}else
				if((typeof (obj[key])=='object')){
					ProjectConvertManager.adptObj(obj[key]);
				}
			}
		}

		ProjectConvertManager.adptType=function(obj){
			if(obj.type=="Label"&&obj.props){
				var prop;
				prop=obj.props;
				if(prop.size){
					prop.fontSize=prop.size;
					delete prop["size"];
				}
			}
			if(ProjectConvertManager.typeConvertO[obj.type]){
				obj.type=ProjectConvertManager.typeConvertO[obj.type];
			}
			if(obj.url&&!obj.skin){
				obj.skin=obj.url;
			}
		}

		ProjectConvertManager.getAdptSkin=function(skin){
			var rst;
			if(skin.indexOf(".")<0)return skin;
			if(skin.indexOf("png.")<0&&skin.indexOf("jpg.")<0)return skin;
			var arr;
			arr=skin.split(".");
			if(arr.length<3)return skin;
			var extension;
			extension=arr.shift();
			rst=arr.join("/")+"."+extension;
			return rst;
		}

		ProjectConvertManager.oldUIExtension="xml";
		ProjectConvertManager.adptSizeGrid=true;
		__static(ProjectConvertManager,
		['typeConvertO',function(){return this.typeConvertO={
				"LinkButton":"Button",
				"Container":"Box",
				"FrameClip":"Box",
				"RadioButton":"Radio"
		};}

		]);
		return ProjectConvertManager;
	})()


	//class laya.editor.manager.ProjectManager
	var ProjectManager=(function(){
		function ProjectManager(){};
		__class(ProjectManager,'laya.editor.manager.ProjectManager');
		ProjectManager.loadProject=function(path,complete,fromCMD){
			(fromCMD===void 0)&& (fromCMD=false);
			console.log("loadProject:",path);
			if (Boolean(path)){
				if (ProjectManager.lastProjectPath !=path){
					ProjectManager.lastProjectPath=path;
					if (FileTools.exist(path)){
						ResManager.clear();
						SystemSetting.setProject(path);
						ProjectSetting.asynResExportPath="";
						ProjectManager.xml=new XMLElement(FileManager.readTxtFile(path,true));
						var list=ProjectManager.xml.children();
						ProjectSetting.disableBinaryPic=0;
						var child;
						for(var $each_child in list){
							child=list[$each_child];
							var name=child.name();
							if (ProjectSetting[name] !=null){
								ProjectSetting[name]=((ProjectSetting[name])instanceof Array)? StringTool.trimSide(String(child)).split(","):String(child);
								if(ProjectSetting[name].replace)
									ProjectSetting[name]=ProjectSetting[name].replace(/\\/g,FileTools.path.sep);
							}
						}
						if(ProjectSetting.disableBinaryPic==1){
							ResFileManager.enableBinaryPic=false;
							}else{
							ResFileManager.enableBinaryPic=true;
						}
						ProjectSetting.adptPaths();
						if (fromCMD)return;
						ProjectManager.refreshProject(complete);
						ProjectManager.addProjectOpened(path);
						RenderManager.I.setRenderPropByFont(ProjectSetting.defaultFont);
						LanguageManager.loadProjectLanguageFile();
					}
					else{
						Alert.show(Sys.lang("项目不存在"));
						ProjectManager.lastProjectPath="";
						ProjectManager.removeProjectOpened(path);
					}
				}
				return;
			}
			if (complete !=null){
				complete.run();
			}
		}

		ProjectManager.refreshProject=function(complete){
			ResStyleManager.init();
			PageStyleManager.init();
			PagePanel.instance.init(SystemSetting.pagesPath);
			ResPanel.instance.init(SystemSetting.assetsPath,complete);
		}

		ProjectManager.saveProject=function(){
			ProjectSetting.adptPaths();
			var i=0,len=0;
			var tKey;
			len=ProjectManager.keys.length;
			var tXml;
			for(i=0;i<len;i++){
				tKey=ProjectManager.keys[i];
				tXml=new XMLElement();
				tXml.setName(tKey);
				if(ProjectManager.SpecialXmlKeys[tKey]){
					tXml.value="<![CDATA["+ProjectSetting[tKey]+"]]>";
					}else{
					tXml.value=ProjectSetting[tKey];
				}
				ProjectManager.xml.setChildByName(tKey,tXml);
			}
			tXml=new XMLElement();
			tXml.setName("ver");
			tXml.value="0.9.9 beta";
			ProjectManager.xml.setChildByName("ver",tXml);
			FileManager.createTxtFile(SystemSetting.projectPath,ProjectManager.xml.toString());
		}

		ProjectManager.openProject=function(){
			DialogTools.showOpenFile(Sys.lang("打开项目"),ProjectManager.onFileSelect,DialogTools.getOpenProO());
		}

		ProjectManager.onFileSelect=function(files){
			if (!files || !files[0])
				return;
			ProjectManager.openProjectByPath(files[0]);
		}

		ProjectManager.openProjectDir=function(){
			if (Boolean(SystemSetting.workPath)){
				var file=new File(SystemSetting.workPath);
				if (file.exists){
					FileTools.openItem(SystemSetting.workPath);
				}
			}
		}

		ProjectManager.openProjectByPath=function(path){
			Dialog.manager.closeAll();
			UIPanel.instance.closeAll(ProjectManager.loadProject,[path]);
		}

		ProjectManager.setProjectOpened=function(projects){
			ProjectManager.projectOpened.length=0;
			if (!projects)return;
			var len=projects.length;
			for (var i=0;i < len;i++){
				ProjectManager.projectOpened.push(projects[i]);
			}
			MenuBar.instance.showProjectOpened(ProjectManager.projectOpened);
		}

		ProjectManager.addProjectOpened=function(path){
			var index=ProjectManager.projectOpened.indexOf(path);
			if (index !=-1){
				ProjectManager.projectOpened.splice(index,1);
			}
			ProjectManager.projectOpened.splice(0,0,path);
			MenuBar.instance.showProjectOpened(ProjectManager.projectOpened);
		}

		ProjectManager.removeProjectOpened=function(path){
			var index=ProjectManager.projectOpened.indexOf(path);
			if (index !=-1){
				ProjectManager.projectOpened.splice(index,1);
				MenuBar.instance.showProjectOpened(ProjectManager.projectOpened);
			}
		}

		ProjectManager.xml=null
		ProjectManager.lastProjectPath=null
		ProjectManager.projectOpened=[];
		__static(ProjectManager,
		['keys',function(){return this.keys=
			[
			"resTypes",
			"resExportPath",
			"asynResExportPath",
			"resCanCompress",
			"resPublishQuality",
			"codeExportPath",
			"uiType",
			"codeType",
			"picType",
			"defaultFont",
			"uiExportPath",
			"boxTypes",
			"pageTypes",
			"pageTypes",
			"codeImports",
			"codeImportsJS",
			"codeImportsTS",
			"shareResPath",
			"langPath",
			"textureWidth",
			"textureHeight",
			"picWidth",
			"picHeight",
			"power2",
			"trimempty"];},'SpecialXmlKeys',function(){return this.SpecialXmlKeys={
				"codeImports":true,
				"codeImportsJS":true,
				"codeImportsTS":true
		};}

		]);
		return ProjectManager;
	})()


	/**资源管理器
	*@author yung
	*/
	//class laya.editor.manager.ResManager
	var ResManager=(function(){
		function ResManager(){};
		__class(ResManager,'laya.editor.manager.ResManager');
		ResManager.refresh=function(complete){
			ResManager._complete=complete;
			ResManager._reses=[];
		}

		ResManager.clear=function(){
			ResManager._resVerMap={};
		}

		ResManager.removeRes=function(path){
			FileManager.removeFile(path);
			ResFileManager.clearRes(path);
		}

		ResManager.getResLinkName=function(f){
			var rootPath=SystemSetting.assetsPath;
			if (Boolean(ProjectSetting.shareResPath)){
				var sharePath=FileManager.getWorkPath(ProjectSetting.shareResPath);
				if (f.indexOf(sharePath)>-1){
					rootPath=sharePath;
				}
			}
			if(TypeManager.getFileType(f)=="Prefab"){
				rootPath=SystemSetting.workPath;
			}
			return FileManager.getRelativePath(rootPath,f).toString();
		}

		ResManager.findUnUsed=function(){
			var reses;
			reses=ResFileManager.getAllResLinkList();
			var pages=FileManager.getFileList(FileManager.getWorkPath("laya/pages/"));
			var i=0,len=0;
			var a;
			for(var $each_a in pages){
				a=pages[$each_a];
				var path=a;
				if(FileTools.isDirectory(path))continue ;
				var txt=FileManager.readTxtFile(path);
				for (i=reses.length-1;i >-1;i--){
					var item=reses[i];
					if(item.indexOf("@")>=0||item.indexOf("$")>=0){
						reses.splice(i,1);
						continue ;
					}
					if (txt.indexOf("\""+item+"\"")!=-1){
						reses.splice(i,1);
					}
				}
			};
			var rst;
			rst=[];
			len=reses.length;
			for(i=0;i<len;i++){
				rst.push({label:reses[i],path:FileManager.getResPath(reses[i])});
			}
			return rst;
		}

		ResManager.getUnUserdList=function(){
			var reses;
			reses=ResFileManager.getAllResLinkList();
			var pages=FileManager.getFileList(FileManager.getWorkPath("laya/pages/"));
			var i=0,len=0;
			var a;
			for(var $each_a in pages){
				a=pages[$each_a];
				var path=a;
				if(FileTools.isDirectory(path))continue ;
				var txt=FileManager.readTxtFile(path);
				for (i=reses.length-1;i >-1;i--){
					var item=reses[i];
					if(item.indexOf("@")>=0||item.indexOf("$")>=0){
						reses.splice(i,1);
						continue ;
					}
					if (txt.indexOf("\""+item+"\"")!=-1){
						reses.splice(i,1);
					}
				}
			}
			return reses;
		}

		ResManager.findResRefer=function(res){
			var pages=FileManager.getFileList(FileManager.getWorkPath("laya/pages/"));
			var i=0,len=0;
			var rst;
			rst=[];
			var a;
			for(var $each_a in pages){
				a=pages[$each_a];
				var path=a;
				if(FileTools.isDirectory(path))continue ;
				var txt=FileManager.readTxtFile(path);
				var item=res;
				if (txt.indexOf("\""+item+"\"")!=-1){
					rst.push({label:FileManager.getRelativePath(SystemSetting.pagesPath,path),path:path});
				}
			}
			return rst;
		}

		ResManager.findFileUnUsed=function(){
			var objs={};
			var arr=ResManager.findUnUsed();
			var obj;
			for(var $each_obj in arr){
				obj=arr[$each_obj];
				objs[obj.path]=1;
			}
			return objs;
		}

		ResManager._resVerMap={};
		ResManager._resNeedLoaded=null
		ResManager._complete=null
		ResManager._reses=null
		ResManager.timer=0;
		return ResManager;
	})()


	/**资源样式管理器
	*@author yung
	*/
	//class laya.editor.manager.ResStyleManager
	var ResStyleManager=(function(){
		function ResStyleManager(){};
		__class(ResStyleManager,'laya.editor.manager.ResStyleManager');
		ResStyleManager.init=function(){
			var txt=FileManager.readTxtFile(SystemSetting.stylePath);
			try {
				ResStyleManager.styleXML=new XMLElement(Boolean(txt)?txt:"<?xml version=\"1.0\" encoding=\"UTF-8\"?><res></res>");
				}catch (e){
				Alert.show(Sys.lang("ResStyleManager 读取文件{0}出错",SystemSetting.stylePath),Sys.lang("读取文件出错"));
			}
			if (ResStyleManager.styleXML){
				ResStyleManager.styleMap={};
				var list=ResStyleManager.styleXML.children();
				var item;
				for(var $each_item in list){
					item=list[$each_item];
					ResStyleManager.styleMap[String(item.getAttribute('name'))]=item;
				}
			}
		}

		ResStyleManager.getResProps=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				return String(ResStyleManager.styleMap[asset].getAttribute('props'));
			}
			return "";
		}

		ResStyleManager.getPropArr=function(asset){
			return ResStyleManager.getPropArrByPropStr(ResStyleManager.getResProps(asset));
		}

		ResStyleManager.getPropStrByArr=function(arr){
			return arr.join("@@!@@");
			return arr.join(" ");
		}

		ResStyleManager.renameRes=function(asset,newAsset){
			if(ResStyleManager.styleMap[asset]){
				ResStyleManager.styleMap[asset].setAttribute('name',newAsset);
				ResStyleManager.styleMap[newAsset]=ResStyleManager.styleMap[asset];
				delete ResStyleManager.styleMap[asset];
				FileManager.createTxtFile(SystemSetting.stylePath,ResStyleManager.styleXML.toString());
			}
		}

		ResStyleManager.getPropArrByPropStr=function(propStr){
			if(propStr.indexOf("@@!@@")>=0){
				return propStr.split("@@!@@");
			}
			return propStr.split(" ");
		}

		ResStyleManager.getResIfPack=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				if(ResStyleManager.styleMap[asset].getAttribute('pack')===false)return false;
				return true;
				return ObjectTools.getStrTypedValue(ResStyleManager.styleMap[asset].getAttribute('pack'));
			}
			return true;
		}

		ResStyleManager.getResPicType=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				var v=0;
				v=ResStyleManager.styleMap[asset].getAttribute('picType');
				if(v==1)return 1;
				return 0;
			}
			return 0;
		}

		ResStyleManager.getResPackType=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				if(ResStyleManager.styleMap[asset].getAttribute('pack')===false)return 2;
				if(ResStyleManager.styleMap[asset].getAttribute('pack')===true)return 0;
				return LayaBuilder.mParseInt(ResStyleManager.styleMap[asset].getAttribute('pack'));
			}
			return 0;
		}

		ResStyleManager.getAllUnPackDir=function(rst){
			if(!rst)rst=[];
			if(!ResStyleManager.styleMap)return rst;
			var asset;
			for(asset in ResStyleManager.styleMap){
				if(asset.indexOf(".")<=0){
					if(ResStyleManager.getFinalPackResult(asset,true)){
						}else{
						rst.push(asset);
					}
				}
			}
			return rst;
		}

		ResStyleManager.getFinalPackResult=function(asset,otherResult){
			var type=0;
			type=ResStyleManager.getResPackType(asset);
			switch(type){
				case 0:
					return otherResult;
					break ;
				case 1:
					return true;
					break ;
				case 2:
					return false;
					break ;
				}
			return true;
		}

		ResStyleManager.getResPropsObj=function(asset){
			var propStr;
			propStr=ResStyleManager.getResProps(asset);
			var rst;
			rst={};
			if(propStr.indexOf("=")>=0){
				var props;
				props=ResStyleManager.getPropArrByPropStr(propStr);
				for (var i=0,n=props.length;i < n;i++){
					var a=props[i].split("=");
					if (a.length==2){
						var key=a[0];
						var val=a[1];
						rst[key]=val;
					}
				}
			}
			return rst;
		}

		ResStyleManager.getResPropsKeyValue=function(asset,key){
			return ResStyleManager.getResPropsObj(asset)[key];
		}

		ResStyleManager.getResPropsKeyByNode=function(node,key){
			var skinLabel=UIConfigManager.getCompSkinLabel(node.type);
			var skin;
			skin=node.props[skinLabel];
			if (skin){
				return ResStyleManager.getResPropsKeyValue(skin,key);
			}
			return null;
		}

		ResStyleManager.getResPropsObjByPropStr=function(propStr,split){
			(split===void 0)&& (split=" ");
			var rst;
			rst={};
			if(propStr.indexOf("=")>=0){
				var props;
				props=propStr.split(split);
				for (var i=0,n=props.length;i < n;i++){
					var a=props[i].split("=");
					if (a.length==2){
						var key=a[0];
						var val=a[1];
						rst[key]=val;
					}
				}
			}
			return rst;
		}

		ResStyleManager.getResPropStrByObj=function(propObj,split){
			(split===void 0)&& (split=" ");
			var rstArr;
			var key;
			rstArr=[];
			for(key in propObj){
				rstArr.push(key+"="+propObj[key]);
			}
			return rstArr.join(split);
		}

		ResStyleManager.getResCompType=function(asset,isIcon){
			(isIcon===void 0)&& (isIcon=false);
			if (!asset){
				return "Image";
			};
			var resPath;
			resPath=FileManager.adptToCommonUrl(asset);
			if (ResStyleManager.styleMap&&ResStyleManager.styleMap[resPath]){
				var compType=String(ResStyleManager.styleMap[resPath].getAttribute('type'));
			}
			if (!Boolean(compType)){
				var extension=FileTools.getExtensionName(asset);
				compType=UIConfigManager.getCompTypeByExtension(extension);
				if(compType)return compType;
				var fileName=FileTools.getFileName(asset);
				var res=fileName.split("_")[0];
				compType=UIConfigManager.getCompTypeByResName(res,isIcon);
			}
			return compType || "Image";
		}

		ResStyleManager.getResCanCompress=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				return ResStyleManager.styleMap[asset].getAttribute('compress')==1;
			}
			return ProjectSetting.resCanCompress==1;
		}

		ResStyleManager.getNotPackFiles=function(){
			var rst;
			rst=[];
			var key;
			for(key in ResStyleManager.styleMap){
				if(!ResStyleManager.getResIfPack(key)){
					rst.push(key);
				}
			}
			return rst;
		}

		ResStyleManager.getPackFilesByType=function(type){
			var rst;
			rst=[];
			var key;
			for(key in ResStyleManager.styleMap){
				if(type==ResStyleManager.getResPackType(key)){
					rst.push(key);
				}
			}
			return rst;
		}

		ResStyleManager.getPicTypeFilesByType=function(type){
			var rst;
			rst=[];
			var key;
			for(key in ResStyleManager.styleMap){
				if(type==ResStyleManager.getResPicType(key)){
					rst.push(key);
				}
			}
			return rst;
		}

		ResStyleManager.getResQuality=function(asset){
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				return LayaBuilder.mParseInt(ResStyleManager.styleMap[asset].getAttribute('quality'));
			}
			return ProjectSetting.resPublishQuality;
		}

		ResStyleManager.updateResStyle=function(asset,type,compress,quality,props,packType,picType){
			(packType===void 0)&& (packType=0);
			(picType===void 0)&& (picType=0);
			props=ResStyleManager.getPropStrByArr(props.split("\n"));
			if(ResStyleManager.styleMap&&ResStyleManager.styleMap[asset]){
				ResStyleManager.styleMap[asset].setAttribute('type',type);
				ResStyleManager.styleMap[asset].setAttribute('compress',compress);
				ResStyleManager.styleMap[asset].setAttribute('quality',quality);
				ResStyleManager.styleMap[asset].setAttribute('props',props);
				ResStyleManager.styleMap[asset].setAttribute('pack',packType);
				ResStyleManager.styleMap[asset].setAttribute('picType',picType);
				}else {
				var xml=new XMLElement("<item name=\""+asset+"\" type='"+type+"' compress=\""+compress+"\" pack=\""+packType+"\" quality=\""+quality+"\" />");
				ResStyleManager.styleXML.appendChild(xml);
				ResStyleManager.styleMap[asset]=xml;
				ResStyleManager.styleMap[asset].setAttribute('type',type);
				ResStyleManager.styleMap[asset].setAttribute('compress',compress);
				ResStyleManager.styleMap[asset].setAttribute('quality',quality);
				ResStyleManager.styleMap[asset].setAttribute('props',props);
				ResStyleManager.styleMap[asset].setAttribute('pack',packType);
				ResStyleManager.styleMap[asset].setAttribute('picType',picType);
			}
			FileManager.createTxtFile(SystemSetting.stylePath,ResStyleManager.styleXML.toString());
		}

		ResStyleManager.styleXML=null
		ResStyleManager.styleMap=null
		ResStyleManager.PropSplitSign="@@!@@";
		ResStyleManager.Pic_Default=0;
		ResStyleManager.Pic_Repeat=1;
		ResStyleManager.Pack_Default=0;
		ResStyleManager.Pack_Pack=1;
		ResStyleManager.Pack_NotPack=2;
		return ResStyleManager;
	})()


	/**快捷键管理器
	*@author yung
	*/
	//class laya.editor.manager.ShortcutManager
	var ShortcutManager=(function(){
		function ShortcutManager(){};
		__class(ShortcutManager,'laya.editor.manager.ShortcutManager');
		ShortcutManager.init=function(){
			Laya.stage.on("keydown",ShortcutManager,ShortcutManager.onStageKeyDown);
		}

		ShortcutManager.onStageKeyDown=function(e){
			if(Browser.window["layaideconfig"]){
				if(Browser.window["layaideconfig"].mode=="0")return;
			}
			ShortcutManager.exeKey(e.keyCode,KeyManager.I.isCommandKeyDown,e.shiftKey);
		}

		ShortcutManager.getKey=function(key,ctrl,shift){
			var str=""+key;
			str+=ctrl ? "_ctrl" :"";
			str+=shift ? "_shift" :"";
			return str;
		}

		ShortcutManager.addKey=function(key,ctrl,shift,handler,args,focusClass,name,_this){
			(name===void 0)&& (name="");
			var str=ShortcutManager.getKey(key,ctrl,shift);
			if (ShortcutManager.keyMap[str]==null || ShortcutManager.keyMap[str].focusClass !=focusClass){
				ShortcutManager.keyMap[str]={focusClass:focusClass,handler:handler,args:args,_this:_this};
				}else {
				Sys.warn(Sys.lang("快捷键冲突")+name,"key:"+key,"ctrl:"+ctrl,"shift:"+shift);
			}
		}

		ShortcutManager.addKeyE=function(key,ctrl,shift,notice,args,focusClass,name,_this){
			(name===void 0)&& (name="");
			var str=ShortcutManager.getKey(key,ctrl,shift);
			if (ShortcutManager.keyMapE[str]==null || ShortcutManager.keyMapE[str].focusClass !=focusClass){
				ShortcutManager.keyMapE[str]={focusClass:focusClass,notice:notice,args:args,_this:_this};
				}else {
				Sys.warn(Sys.lang("快捷键冲突")+name,"key:"+key,"ctrl:"+ctrl,"shift:"+shift);
			}
		}

		ShortcutManager.exeKey=function(key,ctrl,shift){
			(ctrl===void 0)&& (ctrl=false);
			(shift===void 0)&& (shift=false);
			var str=ShortcutManager.getKey(key,ctrl,shift);
			if (ShortcutManager.keyMap[str] !=null){
				var fClass;
				if (!fClass||(Laya.__typeof(Laya.stage.focus,fClass))){
					var fun=ShortcutManager.keyMap[str].handler;
					var args=ShortcutManager.keyMap[str].args;
					fun.apply(ShortcutManager.keyMap[str]._this,args);
				}
			}
			if (ShortcutManager.keyMapE[str] !=null){
				if (!fClass||(Laya.__typeof(Laya.stage.focus,fClass))){
					Notice$1.notify(ShortcutManager.keyMapE[str].notice,ShortcutManager.keyMapE[str].args);
				}
			}
		}

		ShortcutManager.keyMap={};
		ShortcutManager.keyMapE={};
		return ShortcutManager;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.editor.manager.UIConfigManager
	var UIConfigManager=(function(){
		function UIConfigManager(){}
		__class(UIConfigManager,'laya.editor.manager.UIConfigManager');
		UIConfigManager.addNewConfig=function(data){
			if(!UIConfigManager.configMap){
				UIConfigManager.configMap=data;
				return;
			};
			var key;
			for(key in data){
				UIConfigManager.configMap[key]=data[key];
				UIConfigManager.addPropKeys(data[key]);
			}
		}

		UIConfigManager.getCompPropValueType=function(type,prop){
			var comp=UIConfigManager.getCompConfig(type);
			if(!comp||!comp.prop||!comp.prop[prop])return "unknow:"+type+","+prop;
			return comp.prop[prop].type;
		}

		UIConfigManager.getCompPropValueAccept=function(type,prop){
			var comp=UIConfigManager.getCompConfig(type);
			if(!comp||!comp.prop||!comp.prop[prop])return "";
			return comp.prop[prop].accept;
		}

		UIConfigManager.getCompConfig=function(type){
			return UIConfigManager.getFullConfig(type);
			return UIConfigManager.configMap[type];
		}

		UIConfigManager.addPropKeys=function(tdata){
			var cList=tdata.cList;
			var i=0,len=0;
			len=cList.length;
			for(i=0;i<len;i++){
				UIConfigManager.propKeysDic[cList[i].p.name]=true;
			}
		}

		UIConfigManager.getCompDefaultValueO=function(type){
			var configObj;
			var defaultObj;
			defaultObj=UIConfigManager.defaultPropDic[type];
			if(defaultObj)return defaultObj;
			defaultObj={};
			UIConfigManager.defaultPropDic[type]=configObj;
			configObj=laya.editor.manager.UIConfigManager.getCompConfig(type);
			if(!configObj)return defaultObj;
			var defaultStr;
			defaultStr=configObj.p.defaultValue;
			if(!defaultStr||defaultStr.length<1)return defaultObj;
			var keyValues;
			keyValues=defaultStr.split(" ");
			var tKValue;
			var i=0,len=0;
			len=keyValues.length;
			for(i=0;i<len;i++){
				if(!keyValues[i]||keyValues[i]==""||keyValues[i]==" ")continue ;
				tKValue=keyValues[i].split("=");
				defaultObj[tKValue[0]]=StringTool.getReplace(tKValue[1],"'","");
			}
			return defaultObj;
		}

		UIConfigManager.getTypedValue=function(valueType,value){
			if(!valueType)return ObjectTools.getAutoValue(value);
			switch(valueType){
				case "int":
					value=LayaBuilder.mParseInt(value);
				case "Number":
				case "sNumber":
				case "number":
					value=parseFloat(value);
					break ;
				case "pNumber":
					value=Math.abs(parseFloat(value));
					break ;
				case "bool":
					value=value=="true"?true:false;
					break ;
				}
			if(ObjectTools.isNaNS(value)){
				value=0;
			}
			return value;
		}

		UIConfigManager.getNodeTypedKeyValue=function(nodeType,key,value){
			return UIConfigManager.getTypedValue(UIConfigManager.getCompPropValueType(nodeType,key),value);
		}

		UIConfigManager.inserDefaultValue=function(node){
			var defaultObj;
			defaultObj=UIConfigManager.getCompDefaultValueO(node.type);
			var key;
			var assetDefault;
			assetDefault=ResStyleManager.getResPropsObj(node.props[laya.editor.manager.UIConfigManager.getCompSkinLabel(node.type)]);
			for(key in defaultObj){
				if(assetDefault[key])continue ;
				node.props[key]=UIConfigManager.getNodeTypedKeyValue(node.type,key,defaultObj[key]);
			}
		}

		UIConfigManager.getFullConfig=function(type){
			var rst;
			rst=UIConfigManager.configMap[type];
			if (!rst)return null;
			rst=ObjectTools.copyObj(rst);
			if (!rst.c.prop)rst.c.prop=[];
			if (! (rst.c.prop instanceof Array))rst.c.prop=[rst.c.prop];
			if (rst.p.inherit){
				UIConfigManager.inherit(rst,UIConfigManager.getFullConfig(rst.p.inherit));
			}
			UIConfigManager.createPropDic(rst);
			return rst;
		}

		UIConfigManager.createPropDic=function(node){
			var props;
			props=node.c.prop;
			var propO;
			propO={};
			var i=0,len=0;
			len=props.length;
			var tProp;
			for(i=0;i<len;i++){
				tProp=props[i].p;
				propO[tProp.name]=tProp;
			}
			node.prop=propO;
		}

		UIConfigManager.getCompNames=function(){
			var rst=[];
			var key;
			for(key in UIConfigManager.configMap){
				rst.push(key);
			}
			return rst;
		}

		UIConfigManager.getCompTreeIcon=function(type){
			var iconurl;
			iconurl=laya.editor.manager.UIConfigManager.getCompProp(type,"icon");
			if(!iconurl){
				iconurl="Image";
			}
			return FileTools.getAbsPath(FileManager.getAppPath("laya/icons/components/"+iconurl+".png"));
		}

		UIConfigManager.getCompProp=function(type,key){
			var dataO=UIConfigManager.getFullConfig(type);
			if(!dataO||!dataO.p)return null;
			return dataO.p[key];
		}

		UIConfigManager.getCompSkinLabel=function(type){
			var prop=laya.editor.manager.UIConfigManager.getCompProp(type,"skinLabel");
			prop=prop || "styleSkin";
			return prop;
		}

		UIConfigManager.getCompTypeByResName=function(res,isIcon){
			(isIcon===void 0)&& (isIcon=false);
			var type;
			for(type in UIConfigManager.configMap){
				if(UIConfigManager.configMap[type].p.resName==res||type.toLowerCase()==res.toLowerCase()){
					if(isIcon)return UIConfigManager.configMap[type].p.icon;
					return type;
				}
			}
			return "Image";
		}

		UIConfigManager.getCompTypeByExtension=function(extension,isIcon){
			(isIcon===void 0)&& (isIcon=false);
			var type;
			for(type in UIConfigManager.configMap){
				if(UIConfigManager.configMap[type].p.extension&&!UIConfigManager.configMap[type].p.extensionDic){
					var extStr=UIConfigManager.configMap[type].p.extension;
					var exts;
					exts=extStr.split(",");
					var i=0,len=0;
					len=exts.length;
					var dic;
					dic={};
					for(i=0;i<len;i++){
						dic[exts[i]]=true;
					}
					UIConfigManager.configMap[type].p.extensionDic=dic;
				}
				if(UIConfigManager.configMap[type].p.extension==extension||(UIConfigManager.configMap[type].p.extensionDic&&UIConfigManager.configMap[type].p.extensionDic[extension])){
					if(isIcon)return UIConfigManager.configMap[type].p.icon;
					return type;
				}
			}
			return null;
		}

		UIConfigManager.inherit=function(child,parent){
			if (!parent)return;
			var cClist;
			var pClist;
			cClist=child.c.prop;
			pClist=parent.c.prop;
			var keys={};
			var i=0;
			var len=0;
			len=cClist.length;
			for (i=0;i < len;i++){
				keys[cClist[i].p.name]=true;
			}
			len=pClist.length;
			for (i=0;i < len;i++){
				if (!keys[pClist[i].p.name]){
					cClist.push(pClist[i]);
				};
			}
		}

		UIConfigManager.configMap={};
		UIConfigManager.propKeysDic={};
		UIConfigManager.defaultPropDic={};
		return UIConfigManager;
	})()


	/**编辑器系统类，提供扩展插件使用
	*@author yung
	*/
	//class laya.editor.Sys
	var Sys$1=(function(){
		function Sys(){};
		__class(Sys,'laya.editor.Sys',null,'Sys$1');
		Sys.SetBmdVer=function(name){
			var obj=Sys.bmdMap[name];
			if (obj){
				obj.ver=Sys.bmdVer;
			}
		}

		Sys.init=function(main){
			laya.editor.Sys.main=main;
			laya.editor.Sys.stage=main.stage;
		}

		Sys.clearRes=function(){
			Sys.resDomainMap={};
		}

		Sys.loadRes=function(url,complete){}
		Sys.onResLoaded=function(loader,complete){
			if (complete !=null){
				complete();
			}
		}

		Sys.onBitmapDataLoaded=function(loader,assetName,complete,args){
			if (complete !=null){
				complete.apply(null,args);
			}
		}

		Sys.disposeBitmap=function(assetName){
			var obj=Sys.bmdMap[assetName];
			if (obj){
				obj.bmd.dispose();
				delete Sys.bmdMap[assetName];
			}
		}

		Sys.hasRes=function(name){
			if (name==null || name.indexOf(".png")>-1 || name.indexOf(".jpg")>-1){
				return true;
			}
			return false;
		}

		Sys.getResClass=function(name){
			return null;
		}

		Sys.getRes=function(name){
			var sp=new Sprite();
			return sp;
		}

		Sys.getResBitmapData=function(name){
			return null;
		}

		Sys.info=function(__args){
			var args=arguments;
			console.log("info",args,0x3EBDF4);
		}

		Sys.error=function(__args){
			var args=arguments;
			console.log("error",args,0xFF4646);
		}

		Sys.warn=function(__args){
			var args=arguments;
			console.log("warn",args,0xFFFF80);
		}

		Sys.plugin=function(__args){
			var args=arguments;
			console.log("plugin",args,0xFF0080);
		}

		Sys.log=function(__args){
			var args=arguments;
			console.log("swc",args,0xFF0080);
		}

		Sys.stage=null
		Sys.main=null
		Sys.resDomainMap=null
		Sys.bmdMap={};
		Sys.bmdVer=0;
		return Sys;
	})()


	/**工具类
	*@author yung
	*/
	//class laya.editor.utils.Utils
	var Utils$1=(function(){
		function Utils(){};
		__class(Utils,'laya.editor.utils.Utils',null,'Utils$1');
		Utils.clone=function(source){
			return ObjectTools.copyObj(source);
		}

		Utils.bind=function(fun,_scope){
			var rst;
			rst=fun.bind(_scope);;
			return rst;
		}

		Utils.createMaskArea=function(width,height,color,alpha){
			(color===void 0)&& (color="#ff0000");
			(alpha===void 0)&& (alpha=1);
			var sp=new Sprite();
			sp.graphics.drawRect(0,0,width,height,color);
			sp.alpha=alpha;
			return sp;
		}

		Utils.drawDashedRect=function(g,width,height,lineWidth,lineColor,lineAlpha,solidLen,brokenLen){
			(lineWidth===void 0)&& (lineWidth=1);
			(lineColor===void 0)&& (lineColor=0xff0000);
			(lineAlpha===void 0)&& (lineAlpha=1);
			(solidLen===void 0)&& (solidLen=5);
			(brokenLen===void 0)&& (brokenLen=2);
			g.clear();
			Utils.drawDashed(g,new Point(0,0),new Point(width,0),lineWidth,lineColor,lineAlpha,solidLen,brokenLen);
			Utils.drawDashed(g,new Point(width,0),new Point(width,height),lineWidth,lineColor,lineAlpha,solidLen,brokenLen);
			Utils.drawDashed(g,new Point(width,height),new Point(0,height),lineWidth,lineColor,lineAlpha,solidLen,brokenLen);
			Utils.drawDashed(g,new Point(0,height),new Point(0,0),lineWidth,lineColor,lineAlpha,solidLen,brokenLen);
		}

		Utils.drawDashed=function(g,p1,p2,lineWidth,lineColor,lineAlpha,solidLen,brokenLen){
			(lineWidth===void 0)&& (lineWidth=1);
			(lineColor===void 0)&& (lineColor=0xff0000);
			(lineAlpha===void 0)&& (lineAlpha=1);
			(solidLen===void 0)&& (solidLen=5);
			(brokenLen===void 0)&& (brokenLen=2);
			g.drawLine(p1.x,p1.y,p2.x,p2.y,"#"+lineColor.toString(16));
		}

		Utils.getPoint=function(from,x,y,to){
			var g=from.localToGlobal(new Point(x,y));
			var p=to.globalToLocal(g);
			return p;
		}

		Utils.xmlToMapByCompId=function(xml,map){
			map[xml.compId]=xml;
			var list=xml.child;
			if(!list)return;
			for (var j=0,n=list.length;j < n;j++){
				Utils.xmlToMapByCompId(list[j],map);
			}
		}

		Utils.getClass=function(classname){
			var arr=classname.split(".");
			var obj=Browser.window;
			for(var i=0,n=arr.length;i<n;i++){
				obj=obj[arr[i]];
			}
			return obj;
		}

		return Utils;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-12 下午3:59:36
	*/
	//class laya.editor.view.ani.AnimationDataWorker
	var AnimationDataWorker=(function(){
		function AnimationDataWorker(){
			this._animations=null;
			this.treeData=null;
			this.compMap=null;
			this.design=null;
			this.targetAnimation=null;
			this.selectLabel=null;
			this.tSelectAni=null;
			this.treeNodeDic={};
			this.isFirstSetUp=false;
			this.keyIndexDic={};
			this.targetAnimation=new TargetAnimation();
		}

		__class(AnimationDataWorker,'laya.editor.view.ani.AnimationDataWorker');
		var __proto=AnimationDataWorker.prototype;
		/**
		*获取最大的动画id
		*@return
		*
		*/
		__proto.getMaxAniID=function(){
			if(!this._animations)return 1;
			var i=0,len=0;
			var rst=1;
			len=this._animations.length;
			var tAniData;
			for(i=0;i<len;i++){
				tAniData=this._animations[i];
				if(tAniData.id>=rst){
					rst=tAniData.id+1;
				}
			}
			return rst;
		}

		/**
		*创建一个新的动画
		*@return
		*
		*/
		__proto.createDefaultAnimationData=function(){
			var aniData;
			aniData={};
			aniData.id=this.getMaxAniID();
			aniData.name="ani"+aniData.id;
			aniData.frameRate=24;
			aniData.nodes=[];
			return aniData;
		}

		/**
		*获取节点动画数据
		*@param compId 节点ID
		*@param aniO 动画数据对象
		*@return
		*
		*/
		__proto.getAniNodeObj=function(compId,aniO){
			if(!aniO)aniO=this.tSelectAni;
			var nodes;
			nodes=aniO.nodes;
			var i=0,len=0;
			len=nodes.length;
			var tNode;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				if(tNode.target==compId){
					return tNode;
				}
			}
			return null;
		}

		/**
		*创建一个节点动画数据
		*@param tar 目标节点
		*@return
		*
		*/
		__proto.createDefaultNodeData=function(tar){
			var nodeData;
			nodeData={};
			nodeData.target=tar.compId;
			nodeData.keyframes={};
			return nodeData;
		}

		/**
		*获取动画列表
		*@return
		*
		*/
		__proto.getAnimationSelects=function(){
			var i=0,len=0;
			len=this._animations.length;
			var tAniData;
			var rsts;
			rsts=AnimationDataWorker.selectLabels;
			rsts.length=0;
			for(i=0;i<len;i++){
				tAniData=this._animations[i];
				rsts.push(tAniData.name);
			}
			return rsts.join(",");
		}

		/**
		*删除动画名
		*@param aniName 动画名
		*
		*/
		__proto.removeAniByAniName=function(aniName){
			var i=0,len=0;
			len=this._animations.length;
			var tAniData;
			for(i=0;i<len;i++){
				tAniData=this._animations[i];
				if(aniName==tAniData.name){
					this._animations.splice(i,1);
					return;
				}
			}
		}

		__proto.isNewNameOk=function(aniName){
			if(!this._animations)return false;
			var i=0,len=0;
			len=this._animations.length;
			var tAniData;
			for(i=0;i<len;i++){
				tAniData=this._animations[i];
				if(aniName==tAniData.name){
					return false;
				}
			}
			return true;
		}

		/**
		*选择动画
		*@param aniName 动画名
		*
		*/
		__proto.selectAniByAniName=function(aniName){
			var i=0,len=0;
			len=this._animations.length;
			var tAniData;
			for(i=0;i<len;i++){
				tAniData=this._animations[i];
				if(aniName==tAniData.name){
					this.selectAniByIndex(i);
					return;
				}
			}
			this.selectAniByIndex(0);
		}

		/**
		*选择动画
		*@param index 动画id
		*
		*/
		__proto.selectAniByIndex=function(index){
			if(!this._animations[index])debugger;
			var tAniData;
			tAniData=this._animations[index];
			this.tSelectAni=tAniData;
			this.selectLabel=tAniData.name;
		}

		__proto.inits=function(){
			if(!this._animations)this._animations=[];
			if(this._animations.length<1){
				this._animations.push(this.createDefaultAnimationData());
			}
			if(!this.tSelectAni){
				this.selectAniByIndex(0);
			}
		}

		/**
		*添加动画
		*
		*/
		__proto.addAni=function(){
			this._animations.push(this.createDefaultAnimationData());
			this.selectAniByIndex(this._animations.length-1);
		}

		__proto.cloneAni=function(aniO){
			if(!aniO)aniO=this.tSelectAni;
			var newAniO;
			newAniO=ObjectTools.copyObj(aniO);
			var tName;
			var i=0;
			tName=aniO.name+"_"+i;
			while(!this.isNewNameOk(tName)){
				i++;
				tName=aniO.name+"_"+i;
			}
			newAniO.name=tName;
			this._animations.push(newAniO);
			this.selectAniByIndex(this._animations.length-1);
		}

		/**
		*删除动画节点
		*@param compId
		*@param aniO
		*
		*/
		__proto.removeNode=function(compId,aniO){
			if(!aniO)aniO=this.tSelectAni;
			var nodes;
			nodes=aniO.nodes;
			var i=0,len=0;
			len=nodes.length;
			var tNode;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				if(tNode.target==compId){
					nodes.splice(i,1);
					return;
				}
			}
		}

		/**
		*添加节点
		*@param nodeId
		*
		*/
		__proto.addNode=function(nodeId){
			var node;
			var compO;
			compO=this.treeData.getNodeByID(nodeId);
			if(!compO)debugger;
			node=this.getAniNodeObj(nodeId);
			if(!node){
				node=this.createDefaultNodeData(compO);
				this.tSelectAni.nodes.push(node);
			}
		}

		/**
		*修改动画对象节点ID
		*@param preID
		*@param newID
		*
		*/
		__proto.changeNodeId=function(preID,newID){
			var node;
			node=this.getAniNodeObj(preID);
			var newNode;
			newNode=this.getAniNodeObj(newID);
			if(newNode){
				this.removeNode(newID);
			}
			if(node){
				node.target=newID;
				var nodeO;
				nodeO=this.treeNodeDic[preID+""];
				if(nodeO){
					delete this.treeNodeDic[preID+""];
					this.treeNodeDic[newID+""]=nodeO;
				}
			}
		}

		/**
		*删除节点属性动画
		*@param nodeId
		*@param prop
		*
		*/
		__proto.removeNodeProp=function(nodeId,prop){
			var node;
			node=this.getAniNodeObj(nodeId);
			if(node&&node.keyframes){
				delete node.keyframes[prop];
			}
			if(node&&node.frames){
				delete node.frames[prop];
			}
			if(this.design&&this.design.xml){
			}
		}

		__proto.removeFrame=function(aniO,frame){
			if(!aniO)aniO=this.tSelectAni;
			var nodes;
			nodes=aniO.nodes;
			var i=0,len=0;
			len=nodes.length;
			var tNode;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				this.removeNodeFrame(tNode,frame);
			}
		}

		__proto.removeNodeFrameByNodeID=function(nodeId,frame){
			var node;
			node=this.getAniNodeObj(nodeId);
			if(node){
				this.removeNodeFrame(node,frame);
			}
		}

		__proto.displayToInitState=function(){
			if(this.targetAnimation){
				this.targetAnimation.displayToInitState();
			}
		}

		__proto.removeNodeFrame=function(nodeO,frame){
			var props;
			props=nodeO.keyframes;
			var propKey;
			for(propKey in props){
				this.removeNodePropFrame(props[propKey],frame);
			}
		}

		__proto.removeNodePropFrameByKeyAndFrame=function(nodeId,key,frame){
			var node;
			node=this.getAniNodeObj(nodeId);
			if(node&&node.keyframes&&node.keyframes[key]){
				this.removeNodePropFrame(node.keyframes[key],frame);
			}
		}

		__proto.removeNodePropFrame=function(keyFrames,frame){
			if(!keyFrames)return;
			var i=0;
			for(i=keyFrames.length-1;i>=0;i--){
				if(keyFrames[i].index==frame){
					keyFrames.splice(i,1);
				}
			}
		}

		__proto.moveNodePropFrameTo=function(nodeID,prop,preFrame,newFrame){
			var preKeyFrame;
			var tarKeyFrame;
			preKeyFrame=this.targetAnimation.getNodePropKeyFrame(nodeID+"",preFrame,prop,false);
			if(!preKeyFrame)return;
			this.removeNodePropFrame(this.targetAnimation.getNodePropKeyFrames(nodeID+"",prop),newFrame);
			preKeyFrame.index=newFrame;
		}

		__proto.moveNodeFrameTo=function(nodeID,preFrame,newFrame){
			var nodeO;
			nodeO=this.getAniNodeObj(nodeID);
			if(!nodeO)return;
			var props;
			props=nodeO.keyframes;
			var propKey;
			for(propKey in props){
				this.moveNodePropFrameTo(nodeID,propKey,preFrame,newFrame);
			}
		}

		__proto.moveFrameTo=function(aniO,preFrame,newFrame){
			if(!aniO)aniO=this.tSelectAni;
			var nodes;
			nodes=aniO.nodes;
			var i=0,len=0;
			len=nodes.length;
			var tNode;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				this.moveNodeFrameTo(tNode.target,preFrame,newFrame);
			}
		}

		/**
		*添加属性关键帧
		*@param node
		*@param prop
		*@param frame
		*
		*/
		__proto.addNodeFrame=function(node,prop,frame,force){
			(force===void 0)&& (force=false);
			if(!node.props.hasOwnProperty(prop)){
				if(force){
					node.props[prop]=this.targetAnimation.getNodeFrameProp(node.compId,frame,prop);
					}else{
					return;
				}
			};
			var value;
			value=node.props[prop];
			if(force||value!=this.targetAnimation.getNodeFrameProp(node.compId,frame,prop)){
				this.addNode(node.compId);
				var keyFrame;
				keyFrame=this.targetAnimation.getNodePropKeyFrame(node.compId,frame,prop,true);
				keyFrame.value=value;
				AnimationDataWorker.adptFrameData(keyFrame);
				this.targetAnimation.calculateDatas();
			}
		}

		__proto.makeKeyFrame=function(nodeId,prop,frame){
			this.addNode(nodeId);
			var keyFrame;
			keyFrame=this.targetAnimation.getNodePropKeyFrame(nodeId+"",frame,prop,true);
			keyFrame.value=this.targetAnimation.getNodeFrameProp(nodeId+"",frame,prop);
			return keyFrame;
		}

		/**
		*获取显示用的节点数据
		*@param key
		*@return
		*
		*/
		__proto.getTreeNodeObj=function(key){
			if(!this.treeNodeDic[key])this.treeNodeDic[key]={};
			var rst;
			rst=this.treeNodeDic[key];
			rst.hasChild=false;
			return rst;
		}

		__proto.makeAllNodeAni=function(){
			if(!IDEVars.isGraphicAnimationMode)return;
			if(!this.treeData)return;
			var rootNode;
			rootNode=this.treeData.root;
			if(!rootNode)return;
			this.makeNodeAnis(rootNode);
			return;
			var childs;
			childs=rootNode.child;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				var tChild;
				tChild=childs[i];
				if(tChild.compId>0){
					this.addNode(tChild.compId);
				}
			}
		}

		__proto.makeNodeAnis=function(rootNode){
			var childs;
			childs=rootNode.child;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				var tChild;
				tChild=childs[i];
				if(tChild.compId>0){
					this.addNode(tChild.compId);
					this.makeNodeAnis(tChild);
				}
			}
		}

		/**
		*获取显示用的动画数据
		*@return
		*
		*/
		__proto.getAniDataList=function(){
			if(this.isFirstSetUp){
				this.targetAnimation.setUp(this.compMap,null,this.tSelectAni);
				}else{
				this.targetAnimation.setUp(this.compMap,this.targetAnimation.initProps,this.tSelectAni);
			}
			this.makeAllNodeAni();
			this.isFirstSetUp=false;
			var rst;
			rst=[];
			var i=0,len=0;
			var nodes;
			nodes=this.tSelectAni.nodes;
			len=nodes.length;
			var tNode;
			var propNode;
			var tCompID=0;
			ObjectTools.clearObj(this.keyIndexDic);
			for(i=0;i<len;i++){
				tNode=nodes[i];
				tCompID=tNode.target;
				var nodeO;
				var compO;
				nodeO=this.getTreeNodeObj(tCompID+"");
				nodeO.path=tNode;
				nodeO.label=tCompID+"";
				nodeO.target=tCompID;
				nodeO.loseTarget=true;
				compO=this.treeData.getNodeByID(tCompID);
				if(compO){
					nodeO.type=compO.type;
					nodeO.label=compO.type+":"+compO.compId;
					if(compO.props){
						var AName;
						AName=compO.props["var"]||compO.props.name;
						if(AName){
							nodeO.label=compO.type+"("+AName+")"+":"+compO.compId;
						}
					}
					nodeO.loseTarget=false;
				};
				var nodeFrameList;
				nodeFrameList=[];
				var nodeFrameDic;
				nodeFrameDic={};
				var labelFrameDic;
				labelFrameDic={};
				if(!nodeO.childs)nodeO.childs=[];
				childs=nodeO.childs;
				childs.length=0;
				var childs;
				var propKey;
				var props;
				props=tNode.keyframes;
				rst.push(nodeO);
				for(propKey in props){
					propNode=this.getTreeNodeObj(tCompID+":"+propKey);
					propNode.path=props[propKey];
					propNode.nodeParent=nodeO;
					propNode.label=propKey;
					propNode.target=tCompID;
					propNode.key=propKey;
					childs.push(propNode);
					rst.push(propNode);
					this.collectKeyFrames(props[propKey],nodeFrameDic);
					this.collectKeyFrames(props[propKey],this.keyIndexDic);
					this.collectLabelFrames(props[propKey],labelFrameDic);
				}
				nodeO.keyFrames=this.createNodeKeyFramesData(nodeFrameDic,tCompID,labelFrameDic);
				nodeO.isDirectory=true;
				nodeO.hasChild=true;
			}
			return rst;
		}

		__proto.createNodeKeyFramesData=function(keyFrameDic,target,labelFrameDic){
			var rst;
			rst=SingleTool.I.getArr("keyframe:"+target);
			rst.length=0;
			var key;
			var tKeyFrameData;
			for(key in keyFrameDic){
				tKeyFrameData=SingleTool.I.getObject("keyframedata:"+target+"_"+key);
				tKeyFrameData.target=target;
				tKeyFrameData.index=key;
				if(labelFrameDic[key]){
					tKeyFrameData.label=labelFrameDic[key];
					}else{
					tKeyFrameData.label=null;
				}
				rst.push(tKeyFrameData);
			}
			return rst;
		}

		__proto.collectLabelFrames=function(frames,labelFrameDic){
			var i=0,len=0;
			len=frames.length;
			var tIndex=0;
			for(i=0;i<len;i++){
				if(frames[i].label){
					tIndex=frames[i].index;
					labelFrameDic[tIndex]=frames[i].label;
				}
			}
		}

		__proto.collectKeyFrames=function(frames,keyFrameDic){
			var i=0,len=0;
			len=frames.length;
			for(i=0;i<len;i++){
				keyFrameDic[frames[i].index]=true;
			}
		}

		/**
		*获取动画列表
		*@return
		*
		*/
		__getset(0,__proto,'animations',function(){
			return this._animations;
			},function(v){
			this._animations=v;
			this.inits();
		});

		AnimationDataWorker.createFrameData=function(index){
			(index===void 0)&& (index=0);
			var frameData;
			frameData={};
			frameData.index=index;
			frameData.value="";
			frameData.tween=true;
			frameData.tweenMethod="linearNone";
			return frameData;
		}

		AnimationDataWorker.cleanAnimationData=function(animationData,createNew){
			(createNew===void 0)&& (createNew=false);
			if(createNew){
				animationData=ObjectTools.copyObj(animationData);
			};
			var aniO;
			var ii=0,iiLen=0;
			iiLen=animationData.length;
			for(ii=0;ii<iiLen;ii++){
				aniO=animationData[ii];
				var nodes;
				nodes=aniO.nodes;
				var i=0,len=0;
				len=nodes.length;
				var tNode;
				for(i=0;i<len;i++){
					tNode=nodes[i];
					delete tNode.frames;
				}
			}
			return animationData;
		}

		AnimationDataWorker.removeNodeFromAnimationData=function(animationData,nodeID){
			var aniO;
			var ii=0,iiLen=0;
			iiLen=animationData.length;
			for(ii=0;ii<iiLen;ii++){
				aniO=animationData[ii];
				var nodes;
				nodes=aniO.nodes;
				var i=0,len=0;
				len=nodes.length;
				var tNode;
				for(i=len-1;i>=0;i--){
					tNode=nodes[i];
					if(tNode.target==nodeID){
						nodes.splice(i,1);
					}
				}
			}
		}

		AnimationDataWorker.getAnimationedNode=function(uiObj){
			var rst;
			rst={};
			var animationData;
			animationData=uiObj.animations;
			if(!animationData)return rst;
			var aniO;
			var ii=0,iiLen=0;
			iiLen=animationData.length;
			for(ii=0;ii<iiLen;ii++){
				aniO=animationData[ii];
				var nodes;
				nodes=aniO.nodes;
				var i=0,len=0;
				len=nodes.length;
				var tNode;
				for(i=0;i<len;i++){
					tNode=nodes[i];
					rst[tNode.target]=true;
				}
			}
			return rst;
		}

		AnimationDataWorker.adptFrameData=function(keyFrame){
			if(ObjectTools.isNaN(keyFrame.value)){
				keyFrame.tween=false;
			}
			return keyFrame;
		}

		AnimationDataWorker.selectLabels=[];
		return AnimationDataWorker;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-13 上午10:56:49
	*/
	//class laya.editor.view.ani.TargetAnimation
	var TargetAnimation=(function(){
		function TargetAnimation(){
			this.targetDic=null;
			this.initProps=null;
			this.aniData=null;
			this.changedNodes={};
			this.count=0;
			this.sortIndexFun=null;
			if(this.sortIndexFun==null){
				this.sortIndexFun=MathUtil.sortByKey("index",false,true);
			}
		}

		__class(TargetAnimation,'laya.editor.view.ani.TargetAnimation');
		var __proto=TargetAnimation.prototype;
		/**
		*初始化动画数据
		*@param targetDic 对象表
		*@param initProps 对象初始化数据
		*@param aniData 动画数据
		*
		*/
		__proto.setUp=function(targetDic,initProps,aniData){
			this.targetDic=targetDic;
			this.initProps=initProps;
			if(!initProps)this.recordInitProps();
			this.aniData=aniData;
			this.calculateDatas();
		}

		/**
		*获取节点某帧某属性的数据
		*@param nodeKey 节点ID
		*@param frame 帧
		*@param prop 属性名
		*@return
		*
		*/
		__proto.getNodeFrameProp=function(nodeKey,frame,prop){
			var nodeData;
			nodeData=this.getNodeData(nodeKey);
			if(!nodeData||!nodeData.frames||!nodeData.frames[prop]){
				if(isNaN(this.initProps[nodeKey][prop]))return 0;
				return this.initProps[nodeKey][prop];
			};
			var frames;
			frames=nodeData.frames[prop];
			if(frames.length>frame&&frame>=0){
				return frames[frame];
				}else{
				return frames[frames.length-1];
			}
		}

		/**
		*获取节点的属性关键帧列表
		*@param nodeKey 节点ID
		*@param prop 属性名
		*@return
		*
		*/
		__proto.getNodePropKeyFrames=function(nodeKey,prop){
			var nodeData;
			nodeData=this.getNodeData(nodeKey);
			var keyFrames;
			keyFrames=nodeData.keyframes;
			if(!keyFrames[prop]){
				keyFrames[prop]=[];
			}
			return keyFrames[prop];
		}

		/**
		*获取节点的属性关键帧对象
		*@param nodeKey 节点ID
		*@param frame 帧
		*@param prop 属性名
		*@param autoCreate 如果没有是否自动创建
		*@return
		*
		*/
		__proto.getNodePropKeyFrame=function(nodeKey,frame,prop,autoCreate){
			(autoCreate===void 0)&& (autoCreate=false);
			var keyFrames;
			keyFrames=this.getNodePropKeyFrames(nodeKey,prop);
			var i=0,len=0;
			len=keyFrames.length;
			for(i=0;i<len;i++){
				if(keyFrames[i].index==frame)return keyFrames[i];
			}
			if(autoCreate){
				var frameData;
				frameData=AnimationDataWorker.createFrameData(frame);
				keyFrames.push(frameData);
				keyFrames.sort(this.sortIndexFun);
				return frameData;
				}else{
				return null;
			}
		}

		/**
		*获取节点数据
		*@param nodeKey 节点ID
		*@return
		*
		*/
		__proto.getNodeData=function(nodeKey){
			var nodes;
			nodes=this.aniData.nodes;
			var i=0,len=0;
			len=nodes.length;
			for(i=0;i<len;i++){
				if(nodes[i].target==nodeKey)return nodes[i];
			}
			return null;
		}

		/**
		*将所有节点设置到初始化状态
		*
		*/
		__proto.displayToInitState=function(){
			this.displayToInitStateSS();
			return;
			this.displayToInitStateEx();
			return;
			if(!this.initProps)return;
			if(!this.aniData)return;
			var nodeKey;
			var tNode;
			var props;
			for(nodeKey in this.initProps){
				tNode=this.targetDic[nodeKey];
				try{
					if(tNode){
						props=this.initProps[nodeKey];
						var prop;
						for(prop in props){
							tNode[prop]=props[prop];
						}
					}
				}catch(e){}
			}
		}

		__proto.displayToInitStateSS=function(){
			if(!this.initProps)return;
			if(!this.aniData)return;
			var key;
			var target;
			var datas;
			for(target in this.changedNodes){
				var props;
				props=this.initProps[target];
				var tNode;
				tNode=this.targetDic[target];
				datas=this.changedNodes[target];
				if(tNode&&props){
					for(key in datas){
						tNode[key]=props[key];
						if(tNode.comXml&&tNode.comXml.props&&tNode.comXml.props.hasOwnProperty(key)){
							if(TargetAnimation.isNoDisplayValue(tNode.comXml.props[key])){
								delete tNode.comXml.props[key];
								}else{
								tNode.comXml.props[key]=props[key];
							}
						}
					}
				}
			}
		}

		__proto.displayToInitStateEx=function(){
			if(!this.initProps)return;
			if(!this.aniData)return;
			var nodes;
			nodes=this.aniData.nodes;
			var i=0,len=0;
			len=nodes.length;
			for(i=0;i<len;i++){
				this.displayNodeToInitState(nodes[i]);
			}
		}

		__proto.displayNodeToInitState=function(node){
			var keyFrames;
			keyFrames=node.keyframes;
			var key;
			var tKeyFrames;
			var target=0;
			target=node.target;
			var props;
			props=this.initProps[target];
			var tNode;
			tNode=this.targetDic[target];
			for(key in keyFrames){
				tNode[key]=props[key];
			}
		}

		/**
		*将节点设置到某一帧的状态
		*@param frame
		*
		*/
		__proto.displayToFrame=function(frame){
			if(!this.aniData)return;
			if(frame<0)frame=0;
			if(frame>this.count)frame=this.count;
			var i=0,len=0;
			var nodes;
			nodes=this.aniData.nodes;
			len=nodes.length;
			for(i=0;i<len;i++){
				this.displayNodeToFrame(nodes[i],frame,null);
			}
		}

		/**
		*将节点设置到某一帧的状态
		*@param node 节点ID
		*@param frame
		*@param targetDic 节点表
		*
		*/
		__proto.displayNodeToFrame=function(node,frame,targetDic){
			if(!targetDic)targetDic=this.targetDic;
			var target;
			target=targetDic[node.target];
			if(!target){
				console.log("loseTarget:",node.target);
				return;
			};
			var frames;
			frames=node.frames;
			var key;
			var propFrames;
			var value;
			var propO;
			if(target.comXml&&target.comXml.props){
				propO=target.comXml.props;
			}
			if(!this.changedNodes[node.target]){
				this.changedNodes[node.target]={};
			}
			for(key in frames){
				this.changedNodes[node.target][key]=true;
				propFrames=frames[key];
				if(propFrames.length>frame){
					value=propFrames[frame];
					}else{
					value=propFrames[propFrames.length-1];
				}
				target[key]=value;
				if(propO){
					if(TargetAnimation.isNoDisplayValue(value)){
						delete propO[key];
						}else{
						propO[key]=value;
					}
				}
			}
		}

		/**
		*记录所有节点的初始化信息
		*
		*/
		__proto.recordInitProps=function(){
			if(!this.initProps)this.initProps={};
			ObjectTools.clearObj(this.initProps);
			var key;
			for(key in this.targetDic){
				this.recordNodeInfo(key,this.targetDic[key]);
			}
		}

		/**
		*记录某个节点的初始化信息
		*@param objKey
		*@param node
		*
		*/
		__proto.recordNodeInfo=function(objKey,node,force,keys){
			(force===void 0)&& (force=false);
			var key;
			var value;
			var tProp;
			tProp={};
			keys=keys||UIConfigManager.propKeysDic;
			var props;
			if(node.comXml&&node.comXml.props){
				props=node.comXml.props;
			}
			for(key in keys){
				value=node[key];
				tProp[key]=value;
				if(props&&props.hasOwnProperty(key)){
					tProp[key]=props[key];
				}
			}
			this.initProps[objKey]=tProp;
		}

		/**
		*计算帧数据
		*
		*/
		__proto.calculateDatas=function(){
			if(!this.aniData)return;
			var nodes;
			nodes=this.aniData.nodes;
			var i=0,len=0;
			len=nodes.length;
			var tNode;
			this.count=0;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				this.calculateNodeKeyFrames(tNode);
			}
		}

		/**
		*计算某个节点的帧数据
		*@param node
		*
		*/
		__proto.calculateNodeKeyFrames=function(node){
			var keyFrames;
			keyFrames=node.keyframes;
			var key;
			var tKeyFrames;
			var target=0;
			target=node.target;
			if(!node.frames){
				node.frames={};
			}
			if(!this.initProps[node.target]){
			}
			for(key in keyFrames){
				tKeyFrames=keyFrames[key];
				if(!node.frames[key]){
					node.frames[key]=[];
				}
				tKeyFrames.sort(this.sortIndexFun);
				var isNew=false;
				if(tKeyFrames.length<1||tKeyFrames[0].index!=0){
					tKeyFrames.unshift(AnimationDataWorker.createFrameData(0));
					isNew=true;
				};
				var initData;
				initData=this.initProps[node.target];
				if(initData&&isNew){
					if(!(initData[key]===undefined)&&isNaN(initData[key])&&!((typeof (initData[key])=='string'))){
						tKeyFrames[0].value=0;
						}else{
						tKeyFrames[0].value=initData[key];
					}
				}
				if(tKeyFrames[0]){
					AnimationDataWorker.adptFrameData(tKeyFrames[0]);
				}
				this.calculateNodePropFrames(tKeyFrames,node.frames[key],key,target);
			}
		}

		/**
		*计算节点某个属性的帧数据
		*@param keyframes
		*@param frames
		*@param key
		*@param target
		*
		*/
		__proto.calculateNodePropFrames=function(keyframes,frames,key,target){
			var i=0,len=0;
			len=keyframes.length-1;
			frames.length=keyframes[len].index+1;
			for(i=0;i<len;i++){
				keyframes[i].key=key;
				keyframes[i].target=target;
				this.calculateFrameValues(keyframes[i],keyframes[i+1],frames);
			}
			if(len==0){
				frames[0]=keyframes[0].value;
			}
			keyframes[i].key=key;
			keyframes[i].target=target;
		}

		/**
		*计算两个关键帧直接的帧数据
		*@param startFrame
		*@param endFrame
		*@param result
		*
		*/
		__proto.calculateFrameValues=function(startFrame,endFrame,result){
			var i=0;
			var start=0,end=0;
			var easeFun;
			start=startFrame.index;
			end=endFrame.index;
			var startValue=0;
			startValue=startFrame.value;
			var dValue=0;
			dValue=endFrame.value-startFrame.value;
			var dLen=0;
			dLen=end-start;
			if(end>this.count)this.count=end;
			if(startFrame.tween){
				easeFun=Ease[startFrame.tweenMethod];
				if(easeFun==null){
					easeFun=Ease.linearNone;
				}
				for(i=start;i<end;i++){
					result[i]=easeFun(i-start,startValue,dValue,dLen);
				}
				}else{
				for(i=start;i<end;i++){
					result[i]=startValue;
				}
			}
			result[endFrame.index]=endFrame.value;
		}

		TargetAnimation.isNoDisplayValue=function(value){
			if(value===null||value===undefined||value.toString()=="NaN")return true;
			return false;
		}

		return TargetAnimation;
	})()


	/**帮助
	*@author yung
	*/
	//class laya.editor.view.other.Help
	var Help=(function(){
		function Help(){};
		__class(Help,'laya.editor.view.other.Help');
		var __proto=Help.prototype;
		__proto.start=function(){}
		__getset(1,Help,'instance',function(){
			return Help._instance ? Help._instance :Help._instance=new Help();
		});

		Help._instance=null
		return Help;
	})()


	/**感谢
	*@author yung
	*/
	//class laya.editor.view.other.Thank
	var Thank=(function(){
		function Thank(){};
		__class(Thank,'laya.editor.view.other.Thank');
		var __proto=Thank.prototype;
		__proto.start=function(){}
		__getset(1,Thank,'instance',function(){
			return Thank._instance ? Thank._instance :Thank._instance=new Thank();
		});

		Thank._instance=null
		return Thank;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-30 下午3:04:18
	*/
	//class laya.editor.view.prop.AppendPropGroupTool
	var AppendPropGroupTool=(function(){
		function AppendPropGroupTool(){}
		__class(AppendPropGroupTool,'laya.editor.view.prop.AppendPropGroupTool');
		AppendPropGroupTool.getNodePropKeyValue=function(node,key){
			if(!node)return null;
			return node.props[key]||PreFabManager.I.getPrefabUIPropByKey(node,key)||ResStyleManager.getResPropsKeyByNode(node,key)||PreFabManager.I.getPreFabPropByKey(node,key);
		}

		AppendPropGroupTool.addAppendPropsToData=function(appendPropPath,node){
			if(IDEVars.isGraphicAnimationMode){
				return;
			};
			var propO;
			propO=node.props;
			if(!propO[ "appendProps"])propO[ "appendProps"]=AppendPropGroupTool.getNodePropKeyValue(node,"appendProps");
			if(!propO[ "appendProps"])propO[ "appendProps"]="";
			var appends;
			var tstr;
			tstr=propO[ "appendProps"];
			if(tstr==""){
				appends=[];
				}else{
				appends=[];
			}
			if(appends.indexOf(appendPropPath)<0){
				appends.push(appendPropPath);
				propO[ "appendProps"]=appends.join(",");
			}
		}

		AppendPropGroupTool.removeAppendPropsFromData=function(appendPropPath,node){
			var propO;
			propO=node.props;
			if(!propO[ "appendProps"])propO[ "appendProps"]=AppendPropGroupTool.getNodePropKeyValue(node,"appendProps");
			if(!propO[ "appendProps"])return;
			var appends;
			appends=propO[ "appendProps"].split(",");
			if(appends.indexOf(appendPropPath)>=0){
				appends.splice(appends.indexOf(appendPropPath),1);
				if(appends.length<=0){
					delete propO[ "appendProps"];
					}else{
					propO[ "appendProps"]=appends.join(",");
				}
			}
		}

		AppendPropGroupTool.getProp=function(propName,type){
			(type===void 0)&& (type="input");
			var rst;
			rst={};
			rst.name=propName;
			rst.type=type;
			rst.tips=propName+":"+type;
			return rst;
		}

		AppendPropGroupTool.getTestData=function(){
			var rst;
			rst={};
			rst.name="testLabel";
			var props;
			props=[];
			rst.props=props;
			props.push(AppendPropGroupTool.getProp("lim"),AppendPropGroupTool.getProp("lam"));
			return rst;
		}

		AppendPropGroupTool.createGroupData=function(groupName,props,data){
			var rst;
			rst={};
			rst.name=groupName;
			rst.props=props;
			rst.data=data;
			return rst;
		}

		AppendPropGroupTool.getTestGroups=function(){
			var rst;
			rst=[];
			rst.push(AppendPropGroupTool.getTestData());
			return rst;
		}

		AppendPropGroupTool.readXMLPropConfig=function(path,insertRender){
			(insertRender===void 0)&& (insertRender=false);
			if(!FileTools.exist(path))return {};
			var xmlFile;
			xmlFile=FileTools.readFile(path);
			var xml;
			xml=Utils.parseXMLFromString(xmlFile);
			var obj;
			obj=XML2Object.parse(xml);
			if(insertRender){
				UIConfigManager.addNewConfig(obj.c);
			}
			return obj.cList[0];
		}

		AppendPropGroupTool.initScriptConfig=function(scriptPath){
			var data;
			data=AppendPropGroupTool.readXMLPropConfig(FileManager.getWorkPath(scriptPath),true);
			if(data&&data.Name){
				AppendPropGroupTool.scriptTypeDic[scriptPath]=data.Name;
			}
		}

		AppendPropGroupTool.isScriptInit=function(scriptPath){
			return AppendPropGroupTool.scriptTypeDic.hasOwnProperty(scriptPath);
		}

		AppendPropGroupTool.clearScript=function(scriptPath){
			delete AppendPropGroupTool.scriptTypeDic[scriptPath];
		}

		AppendPropGroupTool.getScriptName=function(scriptPath){
			if(! AppendPropGroupTool.scriptTypeDic[scriptPath])AppendPropGroupTool.initScriptConfig(scriptPath);
			if(!AppendPropGroupTool.scriptTypeDic[scriptPath])return "lostScript";
			return AppendPropGroupTool.scriptTypeDic[scriptPath];
		}

		AppendPropGroupTool.getPropsOByPath=function(path){
			var tData;
			try{
				tData=AppendPropGroupTool.readXMLPropConfig(path);
			}
			catch(error){
				tData={};
				tData.props={};
			}
			return tData;
		}

		AppendPropGroupTool.adptScriptNode=function(node){
			if(!node.type=="Script")return;
			AppendPropGroupTool.insertAppendPropsByPath(node,node.source);
		}

		AppendPropGroupTool.insertAppendProps=function(node){
			var path=laya.editor.view.prop.AppendPropGroupTool.getNodePropKeyValue(node,"appendProps");
			AppendPropGroupTool.insertAppendPropsByPath(node,path);
		}

		AppendPropGroupTool.insertAppendPropsByPath=function(node,path){
			if(!path)return;
			var tPath;
			tPath=FileManager.getWorkPath(path);
			if(!TypeManager.isScriptFile(path))return;
			var tData;
			tData=AppendPropGroupTool.getPropsOByPath(tPath);
			if(tData&&tData.p&&tData.p["className"]&&node.props){
				node.props.runtime=tData.p["className"];
			}
		}

		AppendPropGroupTool.getAppendPropByAppendProps=function(propsStr){
			if(!propsStr)return null;
			var strs;
			strs=propsStr.split(",");
			var i=0,len=0;
			len=strs.length;
			var rsts;
			rsts=[];
			for(i=0;i<len;i++){
				var tPath;
				tPath=FileManager.getWorkPath(strs[i]);
				if(FileTools.exist(tPath)){
					var tData;
					var gData;
					try{
						tData=AppendPropGroupTool.getPropsOByPath(tPath);
						gData={};
						gData.type="appendProps";
						gData.path=strs[i];
						gData.removeAble=true;
						rsts.push(AppendPropGroupTool.createGroupData(tData.Name,tData.c.prop,gData));
					}
					catch(error){
					}
				}
			}
			if(rsts.length>0)return rsts;
			return null;
		}

		AppendPropGroupTool.getAppendPropByRunTime=function(runTime){
			if(!runTime)return null;
			var filePath;
			filePath=runTime.split(".").join("/");
			filePath=FileManager.getWorkPath("src/"+filePath+".as");
			if(!FileTools.exist(filePath)){
				return null;
			};
			var code;
			code=new AsFileParser();
			code.setFile(filePath);
			var members;
			members=code.allMemberDic;
			var key;
			var tMemberO;
			var props;
			props=[];
			for(key in members){
				tMemberO=members[key];
				if(!tMemberO.modifiesO["public"])continue ;
				if(!AppendPropGroupTool.editablePropType[tMemberO.varType])continue ;
				switch(tMemberO.type){
					case "function":
						if(tMemberO.exType=="set"){
							var vName;
							vName=tMemberO.name;
							vName=vName.substr(3);
							props.push(AppendPropGroupTool.getProp(vName,tMemberO.varType));
						}
						break ;
					case "var":
						props.push(AppendPropGroupTool.getProp(tMemberO.name,tMemberO.varType));
						break ;
					}
			};
			var rst;
			if(props.length>0){
				rst=[AppendPropGroupTool.createGroupData(code.className,props)];
			}
			return rst;
		}

		AppendPropGroupTool.AppendPropsKey="appendProps";
		AppendPropGroupTool.scriptTypeDic={};
		AppendPropGroupTool.ConfigClassNameSign="className";
		__static(AppendPropGroupTool,
		['editablePropType',function(){return this.editablePropType={
				"Number":true,
				"int":true,
				"Boolean":true,
				"String":true
		};}

		]);
		return AppendPropGroupTool;
	})()


	/**
	*时间轴帧数据
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-5 下午1:55:45
	*/
	//class laya.editor.view.timeline.TimeFrameData
	var TimeFrameData=(function(){
		function TimeFrameData(){
			this.frame=0;
			this.type=0;
			this.props=null;
		}

		__class(TimeFrameData,'laya.editor.view.timeline.TimeFrameData');
		TimeFrameData.create=function(frame,props,type){
			(type===void 0)&& (type=1);
			var rst;
			rst=Pool.getItemByClass("TimeFrameData",TimeFrameData);
			rst.type=type;
			rst.frame=frame;
			rst.props=props;
			return rst;
		}

		return TimeFrameData;
	})()


	/**
	*时间轴相关的事件
	*@author WW
	*@version 1.0
	*
	*@created 2015-12-8 上午9:01:12
	*/
	//class laya.editor.view.timeline.TimeLineEvent
	var TimeLineEvent=(function(){
		function TimeLineEvent(){}
		__class(TimeLineEvent,'laya.editor.view.timeline.TimeLineEvent');
		TimeLineEvent.LIST_CHANGE="ListChange";
		TimeLineEvent.TIMELINE_CLICKFRAME="TIMELINE_CLICKFRAME";
		return TimeLineEvent;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-27 下午10:41:37
	*/
	//class laya.editor.view.timeline.TimeLineStyles
	var TimeLineStyles=(function(){
		function TimeLineStyles(){}
		__class(TimeLineStyles,'laya.editor.view.timeline.TimeLineStyles');
		TimeLineStyles.cursorArrowColor="#00ffff";
		TimeLineStyles.cursorTxtColor="#00ffff";
		TimeLineStyles.cursorLineColor="#00ffff";
		TimeLineStyles.FrameBorderColor="#cc00cc";
		TimeLineStyles.FrameBorderColor_Focus="#ccFFcc";
		TimeLineStyles.FrameColor_KeyFrame="#13b5b1";
		TimeLineStyles.FrameColor_Holder="#111111";
		TimeLineStyles.FrameColor_Node="#ffffff";
		TimeLineStyles.FrameColor_Label="#f8b551";
		TimeLineStyles.FrameColor_Circle="#f8b551";
		TimeLineStyles.TitleBigLineColor="#009999";
		TimeLineStyles.TitleSmallLineColor="#006666";
		TimeLineStyles.TitleTxtColor="#d8d8d8";
		TimeLineStyles.FrameLineColor="#343434";
		__static(TimeLineStyles,
		['FrameColors',function(){return this.FrameColors=["#356692","#515151","#404040"];}
		]);
		return TimeLineStyles;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-7 下午7:47:46
	*/
	//class laya.editor.view.timeline.TimeLineUtils
	var TimeLineUtils=(function(){
		function TimeLineUtils(){}
		__class(TimeLineUtils,'laya.editor.view.timeline.TimeLineUtils');
		TimeLineUtils.fakeTimeLineTreeArrData=function(){
			var disTree;
			disTree=TimeLineUtils.fakeDisTreeData();
			var timeLineData;
			timeLineData=TimeLineUtils.fakeTimeLineData(disTree);
			var treeArr;
			treeArr=TimeLineUtils.fakeTreeArr(timeLineData);
			return treeArr;
		}

		TimeLineUtils.fakeDisTreeData=function(){
			var data;
			data=TimeLineUtils.getNodeData();
			var childNode;
			var i=0,len=0;
			len=5;
			for(i=0;i<len;i++){
				TimeLineUtils.addChildTo(TimeLineUtils.getNodeData(),data)
			}
			childNode=TimeLineUtils.getNodeData();
			len=3;
			for(i=0;i<len;i++){
				TimeLineUtils.addChildTo(TimeLineUtils.getNodeData(),childNode)
			}
			TimeLineUtils.addChildTo(childNode,data)
			return data;
		}

		TimeLineUtils.fakeTreeArr=function(treeO){
			var rst;
			rst=[];
			DisTools.getTreeArr(treeO,rst);
			return rst;
		}

		TimeLineUtils.fakeTimeLineData=function(treeData,parent){
			var rst;
			rst={};
			rst.nodeParent=parent;
			rst.name=treeData.name;
			rst.label=rst.name;
			var childs;
			childs=treeData.childs;
			var i=0,len=0;
			len=childs.length;
			var nChild;
			nChild=[];
			for(i=0;i<len;i++){
				nChild.push(TimeLineUtils.fakeTimeLineData(childs[i],rst));
			}
			rst.frames=TimeLineUtils.fakeFrameData();
			rst.childs=nChild;
			rst.isDirectory=nChild.length>0;
			rst.hasChild=nChild.length>0;
			return rst;
		}

		TimeLineUtils.fakeFrameData=function(){
			var frameList;
			frameList=[];
			var tFrameData;
			tFrameData=new TimeFrameData();
			tFrameData.frame=9;
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=10;
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=Math.floor(30*Math.random());
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=Math.floor(30*Math.random());
			frameList.push(tFrameData);
			return frameList;
		}

		TimeLineUtils.getNodeData=function(){
			var rst;
			rst={};
			rst.nodeParent=null;
			rst.name="node";
			rst.data={};
			rst.childs=[];
			return rst;
		}

		TimeLineUtils.addChildTo=function(child,parent){
			parent.childs.push(child);
			child.nodeParent=parent;
		}

		return TimeLineUtils;
	})()


	/**项目配置
	*@author yung
	*/
	//class laya.ide.config.ProjectSetting
	var ProjectSetting=(function(){
		function ProjectSetting(){};
		__class(ProjectSetting,'laya.ide.config.ProjectSetting');
		ProjectSetting.makeSureType=function(labels,pageType){
			(pageType===void 0)&& (pageType="Scene2D");
			if(labels.indexOf(pageType)<0){
				labels+=","+pageType;
			}
			return labels;
		}

		ProjectSetting.getPageTypeLabel=function(){
			var labels;
			labels=laya.ide.config.ProjectSetting.pageTypes.join(",");
			return labels;
		}

		ProjectSetting.isPageType=function(type){
			return ProjectSetting.pageTypes.indexOf(type)>=0;
		}

		ProjectSetting.adptPaths=function(){
			var i=0,len=0;
			var tKey;
			len=ProjectSetting.UiPaths.length;
			for(i=0;i<len;i++){
				tKey=ProjectSetting.UiPaths[i];
				ProjectSetting[tKey]=StringTool.trimSide(ProjectSetting[tKey]+"");
			}
			if(laya.ide.config.ProjectSetting.asynResExportPath==""){
				if(ProjectSetting.codeType==0){
					laya.ide.config.ProjectSetting.asynResExportPath="bin/h5";
					}else{
					laya.ide.config.ProjectSetting.asynResExportPath="bin";
				}
			}
		}

		ProjectSetting.isContainer=function(type){
			return ProjectSetting.boxTypes.indexOf(type)>=0;
		}

		ProjectSetting.codeExportPath="src/game/ui/";
		ProjectSetting.defaultFont="";
		ProjectSetting.codeImportsTS=" ";
		ProjectSetting.resExportPath="bin/h5";
		ProjectSetting.asynResExportPath="bin/h5";
		ProjectSetting.resCanCompress=0;
		ProjectSetting.resPublishQuality=80;
		ProjectSetting.disableBinaryPic=0;
		ProjectSetting.uiType=0;
		ProjectSetting.codeType=0;
		ProjectSetting.picType=0;
		ProjectSetting.uiExportPath="bin/ui.json";
		ProjectSetting.shareResPath="";
		ProjectSetting.exportResType="swf";
		ProjectSetting.createSwfType="image";
		ProjectSetting.langPath="";
		ProjectSetting.textureWidth=2048;
		ProjectSetting.textureHeight=2048;
		ProjectSetting.picWidth=512;
		ProjectSetting.picHeight=512;
		ProjectSetting.power2="true";
		ProjectSetting.trimempty="false";
		__static(ProjectSetting,
		['resTypes',function(){return this.resTypes=["png","jpg"];},'codeImports',function(){return this.codeImports="import laya.ui.*;import laya.display.*; ";},'codeImportsJS',function(){return this.codeImportsJS="var View=laya.ui.View;\nvar Dialog=laya.ui.Dialog;";},'boxTypes',function(){return this.boxTypes=["Sprite","Box","List","Tab","RadioGroup","ViewStack","Panel","Tree","Vbox","Hbox"];},'pageTypes',function(){return this.pageTypes=["View","Dialog"];},'sceneTypes',function(){return this.sceneTypes=["Scene2D"];},'UiPaths',function(){return this.UiPaths=
			[
			"codeExportPath",
			"resExportPath",
			"asynResExportPath",
			"shareResPath",
			"uiExportPath",
			"codeType",
			"defaultFont",
			"uiType",
			"textureWidth",
			"textureHeight",
			"picWidth",
			"picHeight",
			"power2",
			"trimempty",
			"langPath",
			"picType"];}
		]);
		return ProjectSetting;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-3-18 上午11:14:51
	*/
	//class laya.ide.config.StyleConsts
	var StyleConsts$1=(function(){
		function StyleConsts(){}
		__class(StyleConsts,'laya.ide.config.StyleConsts',null,'StyleConsts$1');
		StyleConsts.FolderTxtColor="#c5c5c5";
		StyleConsts.ItemTxtColor="#c5c5c5";
		StyleConsts.ItemSelectColor="#ffffff";
		StyleConsts.MenuButtonLabelColor="#d2d2d2,#d2d2d2,#d2d2d2,#d2d2d2";
		StyleConsts.LayoutTabTitleBtnColor="#8a8a8a,#c8c8c8,#c8c8c8,#c8c8c8";
		StyleConsts.SkinBtnLabelColor="#44a7ff,#44a7ff,#44a7ff,#44a7ff";
		StyleConsts.CheckBoxLabelColors="#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5";
		StyleConsts.ComboBoxLabelColors="#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5";
		StyleConsts.PropPanelTitleColor="#44a7ff";
		StyleConsts.TextInputColor="#c5c5c5";
		StyleConsts.TextInputColorDefault="#525252,#ffffff,#efefef";
		StyleConsts.SelectItemInfoColor="#9f9f9f";
		StyleConsts.DefaultTextColor="#c5c5c5";
		StyleConsts.PanelTipTextColor="#00cc00";
		StyleConsts.PanelTipTextColor2="#cccc00";
		StyleConsts.ButtonLabelColors="#efefef,#ffffff,#c5c5c5,#c5c5c5";
		StyleConsts.BroswerButtonLabelColors="#c5c5c5,#c5c5c5,#c5c5c5";
		StyleConsts.RuleGridLineColor="#696969";
		StyleConsts.RuleGridTextColor="#696969";
		StyleConsts.RuleRangeColor="#dddddd";
		StyleConsts.TimelineTitleTxtColor="#d8d8d8";
		StyleConsts.fileNameRestrict="0-9a-zA-Z_";
		StyleConsts.NumberRestrict="0-9.-";
		StyleConsts.IntRestrict="0-9-";
		StyleConsts.DisplayIconWidth=16;
		StyleConsts.DisplayIconHeight=16;
		return StyleConsts;
	})()


	/**系统配置
	*@author yung
	*/
	//class laya.ide.config.SystemSetting
	var SystemSetting=(function(){
		function SystemSetting(){};
		__class(SystemSetting,'laya.ide.config.SystemSetting');
		SystemSetting.setProject=function(path){
			if (FileTools.exist(path)){
				SystemSetting.projectPath=path;
				SystemSetting.projectName=FileTools.getFileName(path).replace(".laya","");
				SystemSetting.workPath=FileTools.path.dirname(path);
				SystemSetting.workPath=FileTools.path.dirname(SystemSetting.workPath);
				SystemSetting.pagesPath=FileManager.getWorkPath("laya/pages");
				SystemSetting.assetsPath=FileManager.getWorkPath("laya/assets");
				SystemSetting.stylePath=FileManager.getWorkPath("laya/styles.xml");
				SystemSetting.pageStylePath=FileManager.getWorkPath("laya/pageStyles.xml");
				SystemSetting.tempPath=FileManager.getPath(FileTools.tempApp,"data/"+SystemSetting.projectName)
				FileManager.createDirectory(SystemSetting.pagesPath);
				FileManager.createDirectory(SystemSetting.assetsPath);
				FileManager.createDirectory(SystemSetting.tempPath);
			}
		}

		SystemSetting.workPath="";
		SystemSetting.appPath="";
		SystemSetting.projectName="";
		SystemSetting.projectPath="";
		SystemSetting.pagesPath="";
		SystemSetting.assetsPath="";
		SystemSetting.stylePath="";
		SystemSetting.pageStylePath="";
		SystemSetting.tempResPath="";
		SystemSetting.tempVerPath="";
		SystemSetting.tempPath="";
		SystemSetting.lang="";
		SystemSetting.ifShowRuleGrid=true;
		SystemSetting.toCodeModeWhenPublicEnd=false;
		SystemSetting.isCMDVer=false;
		return SystemSetting;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-26 上午10:04:47
	*/
	//class laya.ide.consts.FilterFuns
	var FilterFuns=(function(){
		function FilterFuns(){}
		__class(FilterFuns,'laya.ide.consts.FilterFuns');
		FilterFuns.isEditorComp=function(comp){
			if (comp !=null && Laya.__typeof(comp,'laya.ui.IComponent')&& comp["comXml"]){
				if((comp.parent instanceof laya.ui.Button )){
				}
				if(Laya.__typeof(comp.parent,'laya.ui.IBox'))
					return true;
			}
			return false;
		}

		FilterFuns.isEditorEnterAble=function(comp){
			if(!comp)return false;
			if(comp["comXml"]){
				if(DisplayTreePanel.AnyItemContains|| Laya.__typeof(comp,'laya.ui.IBox')){
					if(!FilterFuns.isEditorEnterAbleType(comp["comXml"].type))return false;
					return true;
				}
			}
			return false;
		}

		FilterFuns.isEditorEnterAbleType=function(type){
			if(type==TypeManager.GraphicPic&&IDEVars.isNewGraphicAnimationMode)return true;
			if(TypeManager.UnEnterAbleType[type])return false;
			return true;
		}

		FilterFuns.isEditorSelectable=function(comp,ignoreLock,ignoreHide){
			(ignoreLock===void 0)&& (ignoreLock=false);
			(ignoreHide===void 0)&& (ignoreHide=false);
			var data;
			data=comp["comXml"];
			if(comp.name=="panelContent")return true;
			if(!data)return true;
			if(!ignoreLock){
				if(data.hasOwnProperty(Signs.LockSign)&&data[Signs.LockSign])return false;
			}
			if(!ignoreHide){
				if(data.hasOwnProperty(Signs.HideSign)&&data[Signs.HideSign])return false;
			}
			return true;
		}

		FilterFuns.isEditorSelectableChain=function(comp,ignoreLock,ignoreHide){
			(ignoreLock===void 0)&& (ignoreLock=false);
			(ignoreHide===void 0)&& (ignoreHide=false);
			if(!FilterFuns.isEditorSelectable(comp,ignoreLock,ignoreHide))return false;
			return true;
			if(!comp.parent)return true;
			return FilterFuns.isEditorSelectableChain(comp.parent,ignoreLock,ignoreHide);
		}

		FilterFuns.isSpecialRes=function(url){
			if(url.indexOf("$")>0){
				return true;
			}
			if(url.indexOf(".DS_Store")>=0){
				return true;
			}
			return false;
		}

		FilterFuns.isShowResFile=function(url){
			return !FilterFuns.isSpecialRes(url);
		}

		FilterFuns.isUnAnimationAbleType=function(type){
			if(type=="List"||type=="Tree"){
				return true;
			}
			return false;
		}

		FilterFuns.getOnlyAnimationAbleNodes=function(arr){
			var i=0,len=0;
			var tNode;
			var safeNodes={};
			len=arr.length;
			var rst;
			rst=[];
			for(i=0;i<len;i++){
				if(arr[i].isAniNode){
					rst.push(arr[i]);
				}
			}
			return rst;
		}

		FilterFuns.findAnimationAbleNodes=function(parentNode,safeNodes){
			if(!parentNode)return;
			var tType;
			tType=parentNode.type;
		}

		return FilterFuns;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-4 上午10:12:53
	*/
	//class laya.ide.consts.IDEConsts
	var IDEConsts=(function(){
		function IDEConsts(){}
		__class(IDEConsts,'laya.ide.consts.IDEConsts');
		IDEConsts.cachePanels=false;
		IDEConsts.showRenderDebug=false;
		return IDEConsts;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-21 下午5:02:21
	*/
	//class laya.ide.consts.PageExportType
	var PageExportType=(function(){
		function PageExportType(){}
		__class(PageExportType,'laya.ide.consts.PageExportType');
		PageExportType.init=function(){
			PageExportType.ParticleGravity=Sys.lang("重力模式");
			PageExportType.ParticleRad=Sys.lang("半径模式");
			PageExportType.Particle3D=Sys.lang("粒子3D");
			PageExportType.ParticleTypeList=[PageExportType.ParticleGravity,PageExportType.ParticleRad,PageExportType.Particle3D];
			PageExportType.INCODE=Sys.lang("内嵌模式");
			PageExportType.LOAD_PACK=Sys.lang("加载模式");
			PageExportType.LOAD_ONE=Sys.lang("分离模式");
			PageExportType.typeList=[PageExportType.INCODE,PageExportType.LOAD_PACK,PageExportType.LOAD_ONE];
			PageExportType.typeDic[PageExportType.INCODE]=true;
			PageExportType.typeDic[PageExportType.LOAD_PACK]=true;
			PageExportType.typeDic[PageExportType.LOAD_ONE]=true;
		}

		PageExportType.isOKType=function(type){
			if(PageExportType.typeDic.hasOwnProperty(type))return true;
			return false;
		}

		PageExportType.isLoadType=function(type){
			return type==PageExportType.LOAD_ONE||type==PageExportType.LOAD_PACK;
		}

		PageExportType.ParticleGravity="重力模式";
		PageExportType.ParticleRad="半径模式";
		PageExportType.Particle3D="粒子3D";
		PageExportType.ParticleTypeList=[];
		PageExportType.INCODE="内嵌模式";
		PageExportType.LOAD_PACK="加载模式";
		PageExportType.LOAD_ONE="分离模式";
		PageExportType.typeList=[];
		__static(PageExportType,
		['typeDic',function(){return this.typeDic={
		};}

		]);
		PageExportType.__init$=function(){
			;
			PageExportType.init();
		}

		return PageExportType;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.consts.Paths
	var Paths=(function(){
		function Paths(){}
		__class(Paths,'laya.ide.consts.Paths');
		Paths.getLayoutFilePathByType=function(type){
			return "layout/"+type+".config";
		}

		Paths.getPluginPath=function(plugin){
			return FileManager.getPath(Paths.PluginPath,plugin+"/");
		}

		Paths.getPackParamFile=function(){
			return FileManager.getDataPath("packParam.json");
		}

		Paths.getConfigVarPath=function(){
			return FileManager.getDataPath("builder.cfg");
		}

		Paths.ParticleTmpGravity="laya/tpls/particle.json";
		Paths.ParticleTmpRadial="laya/tpls/particle1.json";
		Paths.ParticleTmp3D="laya/tpls/particle3d.json";
		Paths.ParticleTmpPoly="laya/tpls/particlepoly.json";
		Paths.ParticleTmpTexture="laya/tpls/texture.png";
		Paths.ParticleDefaultTextureName="texture.png";
		Paths.CustomUIConfigPath="renders/";
		Paths.IDESkinPath="h5/skins/";
		Paths.IDELangPath="h5/langs/";
		Paths.TemplateFolder="laya/template/";
		Paths.BasicsFolder="laya/basics/";
		Paths.TemplateDefaultIcon="laya/tpls/templateIcon.png";
		Paths.PluginPath="h5/plugins/";
		Paths.PluginConfigPath="plugin.cfg";
		Paths.CodeTemplatePath="codeTemplate/";
		Paths.AirTool="libs/LayaAirTool/LayaAirTool";
		Paths.IDEConfigFile="builder.xml";
		Paths.IDEConfigVars="builder.cfg";
		Paths.LogFile="log.txt";
		Paths.PackParamFile="packParam.json";
		Paths.LayoutFile_Default="layout/layout.config";
		Paths.LayoutFile_Static="laya/tpls/default.config";
		__static(Paths,
		['JSCodeTemplate',function(){return this.JSCodeTemplate="codeTemplate/"+"jsCodeTpl.txt";},'JSCodePreTemplate',function(){return this.JSCodePreTemplate="codeTemplate/"+"jsCodePre.txt";},'TSCodeTemplate',function(){return this.TSCodeTemplate="codeTemplate/"+"tsCodeTpl.txt";},'TSCodePreTemplate',function(){return this.TSCodePreTemplate="codeTemplate/"+"tsCodePre.txt";},'ASCodeTemplate',function(){return this.ASCodeTemplate="codeTemplate/"+"asCodeTpl.txt";},'ASCodeTemplate2',function(){return this.ASCodeTemplate2="codeTemplate/"+"asCodeTpl2.txt";},'ASBase64Template',function(){return this.ASBase64Template="codeTemplate/"+"asBase64Tpl.txt";}
		]);
		return Paths;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-25 上午11:08:41
	*/
	//class laya.ide.consts.Signs
	var Signs=(function(){
		function Signs(){}
		__class(Signs,'laya.ide.consts.Signs');
		Signs.LockSign="$LOCKED";
		Signs.HideSign="$HIDDEN";
		Signs.NodeTypeSign="renderType";
		return Signs;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.consts.SkinDefines
	var SkinDefines=(function(){
		function SkinDefines(){}
		__class(SkinDefines,'laya.ide.consts.SkinDefines');
		SkinDefines.DisDragIcon="comp/clip_folder.png";
		SkinDefines.PageDragIcon="comp/clip_folder.png";
		SkinDefines.ResDragIcon="comp/clip_folder.png";
		SkinDefines.LayoutRecDragIcon="comp/clip_folder.png";
		SkinDefines.LayoutTabDragIcon="comp/clip_folder.png";
		return SkinDefines;
	})()


	/**
	*本地程序调用封装
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-30 下午3:27:37
	*/
	//class laya.ide.devices.CMDShell
	var CMDShell=(function(){
		function CMDShell(){}
		__class(CMDShell,'laya.ide.devices.CMDShell');
		CMDShell.init=function(){
			CMDShell.childProcess=Device.require("child_process");
			CMDShell.iconv=Device.require('iconv-lite');
		}

		CMDShell.exeFile=function(fileName,param,callBack){
			CMDShell.childProcess.execFile(fileName,param,callBack);
		}

		CMDShell.execute=function(cmd,callBack,option){
			console.log("execute:",cmd);
			if(!option){
				option={encoding:"binary",maxBuffer:1024*1024*20};
			}
			CMDShell.childProcess.exec(cmd,option,callBack);
		}

		CMDShell.callBackTmp=function(err,stdOut,stdErr){
			console.log("err:",err);
			console.log("stdErr:",stdErr);
			console.log("stdOut:",CMDShell.iconv.decode(stdOut,"gbk"));
		}

		CMDShell.executeExtra=function(cmd,callBack){
			CMDShell.childProcess.exec(cmd,{encoding:"binary",maxBuffer:1024*1024*20},callBackTmp=function(err,stdOut,stdErr){
				console.log("err:",err);
				console.log("stdErr:",stdErr);
				callBack(CMDShell.iconv.decode(stdOut,"gbk"));
			});
		}

		CMDShell.decode=function(data,type){
			return CMDShell.iconv.decode(data,type);
		}

		CMDShell.childProcess=null
		CMDShell.iconv=null
		return CMDShell;
	})()


	/**
	*封装所有驱动级接口
	*@author yung
	*/
	//class laya.ide.devices.Device
	var Device=(function(){
		function Device(){};
		__class(Device,'laya.ide.devices.Device');
		Device.init=function(){
			Device.electron=Device.require("electron");
			Device.remote=Device.electron.remote;
			Device.app=Device.remote.app;
			Device.dataPath=laya.ide.devices.Device.app.getPath("appData")+"/"+Device.appName;;
			Device.Buffer=Browser.window.Buffer;
			Device.appPath=Device.app.getPath("appData")+"/"+Device.appName;
			Device.tempPath=Device.app.getPath("temp")+"/"+Device.appName;
			Device.userHome=Device.app.getPath("home")+"/"+Device.appName;
			Device.extensionPath=Device.app.getPath("home")+"/"+".laya/plugins/";
			Sys.log("appPath:",Device.appPath);
			Sys.log("extensionPath:",Device.extensionPath);
			Paths.PluginPath=Device.extensionPath;
			Sys.log("PluginPath:",Paths.PluginPath);
			Device.app.on('quit',function(){
				console.log("quit from app");
			});
		}

		Device.winFun=function(fun){
			if(!Device.win){
				Device.win=Device.remote.getCurrentWindow();
			}
			Device.win[fun]();
		}

		Device.require=function(mod){
			var rst;
			rst=require(mod);
			return rst;
		}

		Device.requireRemote=function(mod){
			if (!Device.remote)return Device.require(mod);
			return Device.remote[mod];
			return Device.remote.require(mod);
		}

		Device.app=null
		Device.appName="LayaAirIDE";
		Device.appPath=null
		Device.dataPath=null
		Device.tempPath=null
		Device.workPath=null
		Device.userHome=null
		Device.extensionPath=null
		Device.remote=null
		Device.Buffer=null
		Device.electron=null
		Device.win=null
		return Device;
	})()


	/**
	*本类封装弹出本地对话框
	*@author ww
	*/
	//class laya.ide.devices.DialogTools
	var DialogTools=(function(){
		function DialogTools(){}
		__class(DialogTools,'laya.ide.devices.DialogTools');
		DialogTools.init=function(){
			DialogTools.dialog=Device.requireRemote("dialog");
		}

		DialogTools.showOpenDialog=function(win,options,callBack){
			DialogTools.dialog.showOpenDialog(win,options,callBack);
		}

		DialogTools.showSaveDialog=function(win,options,callBack){
			DialogTools.dialog.showSaveDialog(win,options,callBack);
		}

		DialogTools.showSave=function(title,fileName,callBack){
			var option={
				title:title,
				defaultPath:fileName,
				filters:[],
				properties:[]
			};
			DialogTools.showSaveDialog(null,option,callBack);
		}

		DialogTools.showMessageBox=function(win,options,callBack){
			return DialogTools.dialog.showMessageBox(win,options,callBack);
		}

		DialogTools.showErrorBox=function(title,content){
			DialogTools.dialog.showErrorBox(title,content);
		}

		DialogTools.getOpenDirO=function(title,defaultPath){
			(title===void 0)&& (title="open Dir");
			var rst;
			rst={title:title,properties:["openDirectory"]};
			if(defaultPath!=null){
				rst.defaultPath=defaultPath;
			}
			return rst;
		}

		DialogTools.getOpenProO=function(title,extension){
			(title===void 0)&& (title="open Project");
			(extension===void 0)&& (extension="laya");
			return {title:title,filters:[{name:'*.'+extension,extensions:[extension]}]};
		}

		DialogTools.showOpenDir=function(title,callBack,defaultPath){
			(title===void 0)&& (title="open Dir");
			DialogTools.showOpenDialog(null,DialogTools.getOpenDirO(title,defaultPath),callBack);
		}

		DialogTools.showOpenFile=function(title,callBack,filter,defaultPath){
			(title===void 0)&& (title="open file");
			if (!filter)filter=DialogTools.filterO;
			filter.title=title;
			if(defaultPath){
				filter.defaultPath=defaultPath;
			}
			DialogTools.showOpenDialog(null,filter,callBack);
		}

		DialogTools.getOpenParticleO=function(title){
			(title===void 0)&& (title="open Particle");
			return {title:title,filters:[{name:'*.json',extensions:['json']}]};
		}

		DialogTools.dialog=null
		__static(DialogTools,
		['tempOptionO',function(){return this.tempOptionO={
				title:"",
				defaultPath:null,
				filters:[],
				properties:[]
		};},'imgFilterO',function(){return this.imgFilterO={title:"open Img",filters:[{name:'Images',extensions:['jpg','png']}]};},'filterO',function(){return this.filterO={title:"open file",filters:[{name:'Images',extensions:['jpg','png','gif']},{name:'Movies',extensions:['mkv','avi','mp4']},{name:'Custom File Type',extensions:['as']},{name:'All Files',extensions:['*']}]};}

		]);
		return DialogTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.devices.File
	var File=(function(){
		function File(path){
			this.nativePath=null;
			this.nativePath=path;
		}

		__class(File,'laya.ide.devices.File');
		var __proto=File.prototype;
		__proto.copyTo=function(path,overwrite){
			(overwrite===void 0)&& (overwrite=false);
			FileTools.copyE(this.nativePath,path);
		}

		__proto.deleteFile=function(){
			FileTools.removeE(this.nativePath);
		}

		__proto.moveToTrash=function(){
			this.deleteFile();
		}

		__proto.getRelativePath=function(path){
			return FileTools.getRelativePath(this.nativePath,path);
		}

		__proto.moveTo=function(path,overwrite){
			(overwrite===void 0)&& (overwrite=false);
			FileTools.rename(this.nativePath,path);
		}

		__proto.resolvePath=function(path){
			return new File(FileTools.getPath(this.nativePath,path));
		}

		__getset(0,__proto,'extension',function(){
			return FileTools.getExtensionName(this.nativePath);
		});

		__getset(0,__proto,'isDirectory',function(){
			return FileTools.isDirectory(this.nativePath);
		});

		__getset(0,__proto,'parent',function(){
			return new File(FileTools.getParent(this.nativePath));
		});

		__getset(0,__proto,'exists',function(){
			return FileTools.exist(this.nativePath);
		});

		__getset(0,__proto,'name',function(){
			return FileTools.getFileNameWithExtension(this.nativePath);
		});

		__static(File,
		['applicationDirectory',function(){return this.applicationDirectory=new File("");},'applicationStorageDirectory',function(){return this.applicationStorageDirectory=new File("");},'userDirectory',function(){return this.userDirectory=new File("");}
		]);
		return File;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.devices.FileTools
	var FileTools=(function(){
		function FileTools(){}
		__class(FileTools,'laya.ide.devices.FileTools');
		__getset(1,FileTools,'appPath',function(){
			var rst;
			var dirName;
			dirName=__dirname;;
			rst=FileTools.path.resolve(dirName,"../");
			return rst;
			var aPath;
			aPath=Browser.window.location.href;
			aPath=aPath.replace("file:///","");
			aPath=aPath.replace("/h5/index.html","");
			aPath=aPath.split("index.")[0];
			aPath=decodeURI(aPath);
			return aPath;
		});

		__getset(1,FileTools,'workPath',function(){
			return "workPath";
		});

		FileTools.init=function(){
			FileTools.fs=Device.require("fs");
			FileTools.path=Device.require("path");
			FileTools.shell=Device.requireRemote("shell");
			FileTools.tempApp=Device.dataPath;
		}

		FileTools.init2=function(){
			FileTools.fs=Device.require("fs");
			FileTools.path=Device.require("path");
		}

		FileTools.getSep=function(){
			return FileTools.path.sep;
		}

		FileTools.getPathSep=function(path){
			var rst;
			rst="/";
			if (path.indexOf(rst)>=0)return rst;
			rst="\\";
			if (path.indexOf(rst)>=0)return rst;
			return FileTools.getSep();
		}

		FileTools.getAbsPath=function(path){
			return path;
		}

		FileTools.isAbsPath=function(path){
			if(!path)return false;
			if(path.indexOf(":")>0)return true;
			if(path.substr(0,1)=="/")return true;
			return false;
		}

		FileTools.getPath=function(basePath,relativePath){
			return FileTools.path.join(basePath,relativePath);
		}

		FileTools.getRelativePath=function(basePath,targetPath){
			return FileTools.path.relative(basePath,targetPath);
		}

		FileTools.getAppPath=function(path){
			return FileTools.getPath(FileTools.appPath,path);
		}

		FileTools.getAppRelativePath=function(path){
			return FileTools.getRelativePath(FileTools.appPath,path);
		}

		FileTools.getWorkPath=function(path){
			return FileTools.getPath(FileTools.workPath,path);
		}

		FileTools.getWorkRelativePath=function(path){
			return FileTools.getRelativePath(FileTools.workPath,path);
		}

		FileTools.getFileDir=function(path){
			if (!path)return path;
			if(laya.ide.devices.FileTools.isDirectory(path))return path;
			return laya.ide.devices.FileTools.path.dirname(path);
		}

		FileTools.getParent=function(path){
			if (!path)return path;
			var lasti=0;
			lasti=path.lastIndexOf(laya.ide.devices.FileTools.path.sep);
			return path.substring(0,lasti);
		}

		FileTools.getFileName=function(path){
			return FileManager.getFileName(path);
		}

		FileTools.getFileNameWithExtension=function(path){
			if (path==null)
				return null;
			var a=path.split(laya.ide.devices.FileTools.path.sep);
			var file=a[a.length-1];
			return file;
		}

		FileTools.getExtensionName=function(path){
			if (path==null)
				return null;
			var a=path.split(".");
			var file=a[a.length-1];
			return file;
		}

		FileTools.createDirectory=function(path){
			if (Boolean(path)){
				FileTools.ensurePath(path);
				if (!FileTools.fs.existsSync(path)){
					FileTools.fs.mkdirSync(path);
				}
			}
		}

		FileTools.ensurePath=function(pathStr){
			FileTools.mkdirsSync(pathStr,null);
			return;
			if (pathStr==null)return;
			var sep;
			sep=FileTools.path.sep;
			var a=pathStr.split(sep);
			var i=0,len=0;
			var tPath;
			tPath=a[0];
			len=a.length-1;
			for (i=1;i < len;i++){
				tPath+=sep+a[i];
				if (!FileTools.exist(tPath)){
					FileTools.createDirectory(tPath);
				}
			}
		}

		FileTools.mkdirsSync=function(dirpath,mode){
			if (!FileTools.fs.existsSync(dirpath)){
				var pathtmp;
				var pathParts=dirpath.split(FileTools.getPathSep(dirpath));
				pathParts.pop();
				var onWindows=Browser.userAgent.indexOf("Windows")>-1;
				if(!onWindows){
					pathtmp="/"+pathParts[1];
					pathParts.splice(0,2);
				}
				pathParts.forEach(function(dirname){
					if (pathtmp){
						pathtmp=FileTools.path.join(pathtmp,dirname);
					}
					else {
						pathtmp=dirname;
					}
					if (!FileTools.fs.existsSync(pathtmp)){
						console.log("makePath:",pathtmp);
						if (!FileTools.fs.mkdirSync(pathtmp,mode)){
							return false;
						}
					}
				});
			}
			return true;
		}

		FileTools.createFile=function(path,value){
			FileTools.ensurePath(path);
			FileTools.fs.writeFileSync(path,value);
		}

		FileTools.toBuffer=function(ab){
			var buffer=new Device.Buffer(ab.byteLength);
			var view=new Uint8Array(ab);
			for (var i=0;i < buffer.length;++i){
				buffer[i]=view[i];
			}
			return buffer;
		}

		FileTools.readFile=function(path,encoding){
			(encoding===void 0)&& (encoding="utf8");
			if (FileTools.fs.existsSync(path)){
				var rst;
				rst=FileTools.fs.readFileSync(path,encoding);
				if(((typeof rst=='string'))&&rst.charCodeAt(0)==65279&&encoding=="utf8"){
					rst=rst.substr(1);
				}
				return rst;
			}
			return null;
		}

		FileTools.appendFile=function(path,data){
			FileTools.fs.appendFileSync(path,data);
		}

		FileTools.moveToTrash=function(path){
			if (FileTools.exist(path)){
				if (FileTools.shell){
					FileTools.shell.moveItemToTrash(path);
					}else{
					FileTools.removeE(path,false);
				}
			}
		}

		FileTools.removeFile=function(path,toTrash){
			(toTrash===void 0)&& (toTrash=true);
			if (toTrash){
				FileTools.moveToTrash(path);
				return;
			}
			if (Boolean(path)){
				FileTools.fs.unlinkSync(path)
			}
		}

		FileTools.removeE=function(path,toTrash){
			(toTrash===void 0)&& (toTrash=true);
			if (!FileTools.exist(path))
				return;
			if (FileTools.isDirectory(path)){
				FileTools.removeDir(path,toTrash);
			}
			else{
				FileTools.removeFile(path,toTrash);
			}
		}

		FileTools.removeDir=function(path,toTrash){
			(toTrash===void 0)&& (toTrash=true);
			if (toTrash){
				FileTools.moveToTrash(path);
				return;
			};
			var files=[];
			if (FileTools.fs.existsSync(path)){
				files=FileTools.fs.readdirSync(path);
				files.forEach(function(file,index){
					var curPath=FileTools.getPath(path,file);
					if (FileTools.fs.statSync(curPath).isDirectory()){
						FileTools.removeDir(curPath);
					}
					else{
						FileTools.fs.unlinkSync(curPath);
					}
				});
				FileTools.fs.rmdirSync(path);
			}
		}

		FileTools.exist=function(path){
			if(!path)return false;
			return FileTools.fs.existsSync(path);
		}

		FileTools.isDirSimple=function(path){
			if(!path)return false;
			path=FileManager.adptToCommonUrl(path);
			var arrs;
			arrs=path.split("/");
			return arrs[arrs.length-1].indexOf(".")<0;
		}

		FileTools.isDirectory=function(path){
			path=FileManager.adptToCommonUrl(path);
			var st;
			try{
				st=FileTools.fs.statSync(path);
				}catch(e){
				return FileTools.isDirSimple(path);
				return false;
			}
			if(!st)return false;
			return st.isDirectory();
		}

		FileTools.getStat=function(path){
			return FileTools.fs.statSync(path);
		}

		FileTools.getMTime=function(path){
			return FileTools.getStat(path).mtime;
		}

		FileTools.watch=function(path,callBack){
			FileTools.watcherDic[path]=FileTools.fs.watch(path,callBack);
			return FileTools.watcherDic[path];
		}

		FileTools.isDirWatched=function(path){
			return FileTools.watcherDic.hasOwnProperty(path);
		}

		FileTools.unwatch=function(path){
			if (FileTools.watcherDic[path]){
				FileTools.watcherDic[path].close();
				delete FileTools.watcherDic[path];
			}
		}

		FileTools.copyE=function(from,to){
			if (!FileTools.exist(from))
				return;
			if (FileTools.isDirectory(from)){
				FileTools.copyDir(from,to);
			}
			else{
				FileTools.copyFile(from,to);
			}
		}

		FileTools.copyFile=function(from,to){
			FileTools.createFile(to,FileTools.readFile(from,null));
		}

		FileTools.copyDir=function(from,to){
			var files=[];
			if (FileTools.fs.existsSync(from)){
				FileTools.createDirectory(to);
				files=FileTools.fs.readdirSync(from);
				files.forEach(function(file,index){
					var curPath=FileTools.getPath(from,file);
					var tPath=FileTools.getPath(to,file);
					if (FileTools.fs.statSync(curPath).isDirectory()){
						FileTools.copyDir(curPath,tPath);
					}
					else{
						FileTools.copyFile(curPath,tPath);
					}
				});
			}
		}

		FileTools.walk=function(path,floor,handleFile,self){
			(self===void 0)&& (self=false);
			if(self)
				handleFile(path,floor);
			floor++;
			var files=FileTools.fs.readdirSync(path);
			files.forEach(function(item){
				var tmpPath=FileTools.getPath(path,item);
				if (tmpPath.indexOf(".svn")>-1)
					return;
				var stats=FileTools.fs.statSync(tmpPath);
				if (stats.isDirectory()){
					FileTools.walk(tmpPath,floor,handleFile);
				}
				else{
					handleFile(tmpPath,floor);
				}
			});
		}

		FileTools.getFileList=function(path){
			var arr=[];
			if(!laya.ide.devices.FileTools.exist(path))return arr;
			FileTools.walk(path,0,findFiles);
			function findFiles (spath,floor){
				arr.push(spath);
			}
			return arr;
		}

		FileTools.getFileDesO=function(path){
			if (!FileTools.exist(path))
				return null;
			var rst={};
			rst.label=FileTools.getFileName(path);
			rst.path=path;
			if (FileTools.isDirectory(path)){
				rst.files=[];
				rst.dirs=[];
				rst.childs=[];
				rst.isDirectory=true;
				}else{
				rst.isDirectory=false;
			}
			return rst;
		}

		FileTools.getDirChildDirs=function(p){
			var files=laya.ide.devices.FileTools.getDirFiles(p);
			var i=0,len=0;
			var rst;
			rst=[];
			len=files.length;
			for(i=0;i<len;i++){
				files[i]=FileTools.path.join(p,files[i]);
				if(laya.ide.devices.FileTools.isDirectory(files[i])){
					rst.push(files[i]);
				}
			}
			return rst;
		}

		FileTools.getDirFiles=function(path){
			var rst;
			rst=FileTools.fs.readdirSync(path);
			rst.sort(FileTools.folderFirst);
			return rst;
		}

		FileTools.folderFirst=function(pathA,pathB){
			var isFolderA=false;
			isFolderA=pathA.indexOf(".")<0;
			var isFolderB=false;
			isFolderB=pathB.indexOf(".")<0;
			var right=-1;
			if(isFolderA){
				if(!isFolderB){
					return right;
				}
				return pathA<pathB?right:-right;
			}
			if(isFolderB){
				return-right;
			}
			return pathA<pathB?right:-right;
		}

		FileTools.getFileTreeArr=function(path){
			var tTreeO=FileTools.getFileTreeO(path);
			var rst=[];
			FileTools.getTreeArr(tTreeO,rst,false);
			return rst;
		}

		FileTools.getTreeArr=function(treeO,arr,add){
			(add===void 0)&& (add=true);
			if(add)
				arr.push(treeO);
			var tArr=treeO.childs;
			var i=0,len=tArr.length;
			for(i=0;i<len;i++){
				if(!add){
					tArr[i].nodeParent=null;
				}
				if(tArr[i].isDirectory){
					FileTools.getTreeArr(tArr[i],arr);
					}else{
					arr.push(tArr[i]);
				}
			}
		}

		FileTools.getFileTreeO=function(path){
			var rst=FileTools.getFileDesO(path);
			if (FileTools.fs.existsSync(path)){
				var files=FileTools.getDirFiles(path);
				var tO;
				files.forEach(function(file,index){
					var curPath=FileTools.getPath(path,file);
					if (FileTools.fs.statSync(curPath).isDirectory()){
						tO=FileTools.getFileTreeO(curPath);
						tO.nodeParent=rst;
						tO.hasChild=tO.childs.length > 0;
						rst.dirs.push(tO);
					}
					else{
						tO=FileTools.getFileDesO(curPath);
						tO.nodeParent=rst;
						tO.hasChild=false;
						rst.files.push(tO);
					}
					tO.label=file;
					rst.childs.push(tO);
				});
				rst.hasChild=rst.childs.length > 0;
			}
			return rst;
		}

		FileTools.isPathSame=function(a,b){
			if(a.toLocaleLowerCase()==b.toLocaleLowerCase())return true;
			return false;
		}

		FileTools.rename=function(oldPath,newPath){
			if (!FileTools.exist(oldPath))
				return;
			if(FileTools.isPathSame(oldPath,newPath)){
				Alert.show(Sys.lang("在移动文件到同一个位置！！"));
				return;
			}
			FileTools.copyE(oldPath,newPath);
			FileTools.moveToTrash(oldPath);
			return;
			FileTools.fs.renameSync(oldPath,newPath);
		}

		FileTools.openItem=function(path){
			FileTools.shell.openItem(path);
		}

		FileTools.showItemInFolder=function(path){
			FileTools.shell.showItemInFolder(path);
		}

		FileTools.getFolder=function(path){
			path=FileManager.adptToCommonUrl(path);
			var idx=0;
			idx=path.lastIndexOf(".");
			if(idx>=0){
				idx=path.lastIndexOf("/",idx);
				if(idx>=0){
					path=path.substr(0,idx);
				}
			}
			return path;
		}

		FileTools.win=null
		FileTools.fs=null
		FileTools.path=null
		FileTools.shell=null
		FileTools.tempApp=null
		FileTools.watcherDic={};
		return FileTools;
	})()


	/**
	*本类用于和主进程通讯
	*@author ww
	*/
	//class laya.ide.devices.IPCTools
	var IPCTools=(function(){
		function IPCTools(){}
		__class(IPCTools,'laya.ide.devices.IPCTools');
		IPCTools.init=function(){
			IPCTools.ipc=Device.electron.ipcRenderer;
			IPCTools.ipc.on("message",function(__args){
				var args=arguments;
				console.log("message:",args);
			})
			IPCTools.ipc.on("tryOpen",function(__args){
				var args=arguments;
				var path;
				path=args[0];
				console.log("tryOpen:",path);
				if(FileTools.getExtensionName(path)=="laya"){
					Laya.timer.once(2000,null,ProjectManager.loadProject,[path]);
				}
			})
			IPCTools.ipc.on('openWork',function(event,message){
				SystemDragOverManager.handlerFile(message);
			})
		}

		IPCTools.send=function(type,data){
			IPCTools.ipc.send("message",type,data);
		}

		IPCTools.cmd=function(funName,param){
			var data={};
			data.type;
			data.funName=funName;
			data.param=param;
			IPCTools.send("cmd",data);
		}

		IPCTools.setWindow=function(){
			var data={};
			data.type="ccc";;
			IPCTools.send("window",Browser.window);
			console.log(data);
		}

		IPCTools.ipc=null
		return IPCTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.devices.OSInfo
	var OSInfo=(function(){
		function OSInfo(){}
		__class(OSInfo,'laya.ide.devices.OSInfo');
		OSInfo.init=function(){
			OSInfo.os=Device.require("os");
			OSInfo.platform=OSInfo.os.platform();
			OSInfo.tempdir=OSInfo.os.tmpdir();
			OSInfo.type=OSInfo.os.type();
			var tProcess;
			tProcess=process;;
			OSInfo.process=tProcess;
			OSInfo.env=OSInfo.process.env;
			console.log("type:",OSInfo.type);
		}

		OSInfo.os=null
		OSInfo.platform=null
		OSInfo.homedir=null
		OSInfo.tempdir=null
		OSInfo.type=null
		OSInfo.process=null
		OSInfo.env=null
		return OSInfo;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-2-20 下午5:27:36
	*/
	//class laya.ide.devices.SaveUnSavedDialog
	var SaveUnSavedDialog=(function(){
		function SaveUnSavedDialog(){
			this.layaPageSaveAndCallBackResult=3;
			this.tempFunction={};
			this.event=null;
		}

		__class(SaveUnSavedDialog,'laya.ide.devices.SaveUnSavedDialog');
		var __proto=SaveUnSavedDialog.prototype;
		__proto.layaPageSaveAndCallBack=function(saveHandler,nosaveHandler){
			this.tempFunction.save=saveHandler;
			this.tempFunction.nosave=nosaveHandler;
			if (this.layaPageSaveAndCallBackResult==3){
				var obj={};
				obj.title="LayaAir";
				obj.message=Sys.lang("UI页面还未保存，是否保存这些修改？");
				obj.type="warning";
				obj.detail=Sys.lang("如果不保存，更改将丢失");
				obj.buttons=[Sys.lang("保存(&S)"),Sys.lang("不保存(&N)"),Sys.lang("取消")];
				obj.cancelId=2;
				obj.noLink=true;
				var show=DialogTools.showMessageBox(Device.remote.getCurrentWindow(),obj);
				if (show==2){
					this.event.returnValue=false;
					}else if (show==0){
					this.tempFunction.save();
					}else {
					this.tempFunction.nosave();
				}
			}
		}

		__static(SaveUnSavedDialog,
		['I',function(){return this.I=new SaveUnSavedDialog();}
		]);
		return SaveUnSavedDialog;
	})()


	/**
	*本类集中定义IDE中的各种事件
	*@author ww
	*/
	//class laya.ide.event.IDEEvent
	var IDEEvent=(function(){
		function IDEEvent(){}
		__class(IDEEvent,'laya.ide.event.IDEEvent');
		IDEEvent.emitKeyEvent=function(keyCode,ctrl,shift){
			(ctrl===void 0)&& (ctrl=false);
			(shift===void 0)&& (shift=false);
			var evt;
			evt={};
			evt.keyCode=keyCode;
			evt.ctrlKey=ctrl;
			evt.shiftKey=ctrl;
			Notice$1.notify("IDEKey_Event",evt);
		}

		IDEEvent.RELEASE_PROJECT="Release_Project";
		IDEEvent.RES_ITEM_CLICK="ResItemClick";
		IDEEvent.OPEN_ADDPARTICLE="open_AddParticle";
		IDEEvent.ADD_PARTICLE="AddParticle";
		IDEEvent.OPEN_ADDPAGE="OPEN_ADDPage";
		IDEEvent.ADD_PAGE="ADDPage";
		IDEEvent.ADD_SCRIPT="addScript";
		IDEEvent.OPEN_ADD_TIMELINE_ANIMATION="OPEN_ADD_TIMELINE_ANIMATION";
		IDEEvent.ADD_TIMELINE_ANIMATION="ADDTimeLineAnimation";
		IDEEvent.ADD_Effect_ANIMATION="ADDEffectAnimation";
		IDEEvent.CLOSE_PAGE="closePage";
		IDEEvent.OPEN_PAGE="openPAGE";
		IDEEvent.FOCUS_DESIGN="Focus_design";
		IDEEvent.FRESH_RES="FRESH_RES";
		IDEEvent.FRESH_PAGE="FRESH_Page";
		IDEEvent.FRESH_CURVIEW="FRESH_CurView";
		IDEEvent.FRESH_PICCHANGED="Fresh_picChanged";
		IDEEvent.OPEN_ADDDIR="open_adddir";
		IDEEvent.ADD_DIR="adddir";
		IDEEvent.OPEN_ADDSCENE="OPEN_ADDSCENE";
		IDEEvent.ADD_SCENE="ADDSCENE";
		IDEEvent.OPEN_MOVEPAGE="OPEN_MovePage";
		IDEEvent.OPEN_BASICSPANEL="Open_BasicsPanel";
		IDEEvent.MOVE_PAGE="MovePage";
		IDEEvent.OPEN_RENAME="OPEN_RENAME";
		IDEEvent.RENAME_PAGE="RENAME_PAGE";
		IDEEvent.OPEN_SETPAGEPROP="OPEN_SEtPageProp";
		IDEEvent.PROPPANEL_SETBYOBJ="PropPanel_setByObj";
		IDEEvent.PROPPANEL_INITBYOBJ="PROPPANEL_InitBYOBJ";
		IDEEvent.PROP_CHANGE="Prop_change";
		IDEEvent.PROP_CHANGEING="Prop_changeing";
		IDEEvent.PROP_CHANGED="Prop_Changed";
		IDEEvent.CUTOFF_PREFAB="CutOff_Prefab";
		IDEEvent.DROP_RENDER="DROP_RENDER";
		IDEEvent.PAGE_CHANGED="pageChanged";
		IDEEvent.IDE_QUIT="IDE_QUIT";
		IDEEvent.RESFILE_CHANGE="RESFILE_CHANGE";
		IDEEvent.SHOW_DISPLAY_TREE="SHOW_DISPLAY_TREE";
		IDEEvent.DISPLAY_SELECTED="Display_selected";
		IDEEvent.DISPLAY_MULTISELECTED="Display_multiSelected";
		IDEEvent.SELECT_CHANGED="select_changed";
		IDEEvent.SELECTED_NODES="SELECTED_NODES";
		IDEEvent.DISPLAY_ENTER="Display_Enter";
		IDEEvent.DELETE_SELECTED="DELETE_SELECTED";
		IDEEvent.NODE_DELETED="Node_deleted";
		IDEEvent.DISPLAY_CUT="Display_Cut";
		IDEEvent.DISPLAY_COPY="DISPLAY_Copy";
		IDEEvent.DISPLAY_PASTE="DISPLAY_Paste";
		IDEEvent.ADD_NODE="AddNode";
		IDEEvent.ADD_NODE_BY_DRAGDROP="Add_node_byDragDrop";
		IDEEvent.DISPLAY_TRANSPARENT="Display_transParent";
		IDEEvent.DISPLAYTREE_DRAGDROP="DisplayTree_dragDrop";
		IDEEvent.DISPLAY_VALUE_CHANGE="display_value_changes";
		IDEEvent.DISPLAY_TREE_CHANGE="Display_tree_change";
		IDEEvent.TIMELINE_FRAME_SELECTED="TimeLineFrameSelected";
		IDEEvent.RECORD_KEYFRAME="RECORD_KEYFRAME";
		IDEEvent.DESIGN_ITEM_SELECTED="DesignItemSelected";
		IDEEvent.CLEAR_DESIGN_SELECT="ClearDesignSelect";
		IDEEvent.TIMELINE_CHANGED="TimeLine_changed";
		IDEEvent.TO_ANIMATION_MODE="To_AnimationMode";
		IDEEvent.TO_DESIGN_MODE="To_designMode";
		IDEEvent.FRESH_ANIMATIONDATA="Fresh_animationData";
		IDEEvent.ANIMATIONMODE_CHANGE="AnimationMode_Change";
		IDEEvent.ADD_ANIMATIONNODE="Add_animationNode";
		IDEEvent.PLAYCONTROL_TOBEGINPOS="PlayControl_ToBeginPos";
		IDEEvent.PLAYCONTROL_PRE="PLAYCONTROL_Pre";
		IDEEvent.PLAYCONTROL_PLAY="PLAYCONTROL_Play";
		IDEEvent.PLAYCONTROL_NEXT="PLAYCONTROL_Next";
		IDEEvent.PLAYCONTROL_TOENDPOS="PLAYCONTROL_TOEndPOS";
		IDEEvent.PLAYCONTROL_STOP="PLAYCONTROL_Stop";
		IDEEvent.PLAYCONTROL_SWITCHPLAY="PLAYCONTROL_SwitchPlay";
		IDEEvent.UIChange="UIChange";
		IDEEvent.FRESH_COMPPANEL="Fresh_CompPanel";
		IDEEvent.SHOW_RULE_RANGE="SHOW_RULE_RANGE";
		IDEEvent.CLEAR_RULE_RANGE="Clear_RULE_RANGE";
		IDEEvent.RULE_SHOW_CHANGE="RULE_SHOW_CHANGE";
		IDEEvent.OPEN_LANGPANEL="LangPanel";
		IDEEvent.OPEN_IDESETTING="OPEN_IDESETTING";
		IDEEvent.IDEKEY_EVENT="IDEKey_Event";
		IDEEvent.SELECT_RES_FILE="SelecteResFile";
		IDEEvent.SHOW_LAYOUTTAB_BY_NAME="SHOW_LayoutTab_By_Name";
		IDEEvent.FIND_RES_REFER="findResRefer";
		IDEEvent.REPLACE_SELECTEDCOMPS="REPLACE_SELECTEDCOMPS";
		IDEEvent.SELECT_INPUT="SELECTE_INPUT";
		IDEEvent.CLIP_VIEW="CLIP_VIEW";
		return IDEEvent;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-12 下午7:47:10
	*/
	//class laya.ide.event.IDEVars
	var IDEVars=(function(){
		function IDEVars(){}
		__class(IDEVars,'laya.ide.event.IDEVars');
		__getset(1,IDEVars,'isGraphicAnimationMode',function(){
			if(UIPanel.instance.currViewer&&TypeManager.getFileType(UIPanel.instance.currViewer.pagePath)=="graphic_animation"){
				return true;
			}
			return false;
		});

		__getset(1,IDEVars,'isNewGraphicAnimationMode',function(){
			return IDEVars.isGraphicAnimationMode&&IDEVars.enableNewAnimation;
		});

		IDEVars.isAnimationEditMode=false;
		IDEVars.enableNewAnimation=false;
		IDEVars.cacheBothTreeAndAnimation=false;
		return IDEVars;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-21 上午11:49:37
	*/
	//class laya.ide.hook.MouseHook
	var MouseHook=(function(){
		function MouseHook(){
			this._isLeftMouse=false;
			this._event=null;
			this._target=null;
		}

		__class(MouseHook,'laya.ide.hook.MouseHook');
		var __proto=MouseHook.prototype;
		__proto.onMouseDown=function(ele){
			if(Laya.stage.focus&&!(DisControlTool.isChildE(Laya.stage.focus,this._target))){
				IDEAPIS.unFocusInput();
			}
			MouseHook._preMouseDown.call(MouseManager.instance,ele);
		}

		MouseHook.hook=function(){
			return;
			MouseHook._preMouseDown=MouseManager.instance["onMouseDown"];
			MouseManager.instance["onMouseDown"]=MouseHook.I.onMouseDown;
		}

		MouseHook._preMouseDown=null
		__static(MouseHook,
		['I',function(){return this.I=new MouseHook();}
		]);
		return MouseHook;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-3 上午10:16:07
	*/
	//class laya.ide.managers.CanvasViewsManager
	var CanvasViewsManager=(function(){
		function CanvasViewsManager(){
			this.dialogContainer=null;
		}

		__class(CanvasViewsManager,'laya.ide.managers.CanvasViewsManager');
		var __proto=CanvasViewsManager.prototype;
		__proto.init=function(){
			return;
			this.dialogContainer=new CanvasView(Laya.stage.width,Laya.stage.height);
			this.dialogContainer.canvas.source.id="dialogContainer";
			this.dialogContainer.addChild(Dialog.manager);
			this.dialogContainer.float(0,0);
			JSTools.setZIndex(this.dialogContainer.canvas.source,100);
			Dialog.manager.on("close",this,this.dialogClose);
			Dialog.manager.on("open",this,this.dialogOpen);
		}

		__proto.dialogClose=function(){
			if(Dialog.manager.numChildren==1&&Dialog.manager.dialogLayer.numChildren<1){
				JSTools.removeElement(this.dialogContainer.canvas.source);
			}
		}

		__proto.dialogOpen=function(){
			Browser.document.body.appendChild(this.dialogContainer.canvas.source);
		}

		__static(CanvasViewsManager,
		['I',function(){return this.I=new CanvasViewsManager();}
		]);
		return CanvasViewsManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-3-22 下午7:37:47
	*/
	//class laya.ide.managers.CodeViewManager
	var CodeViewManager=(function(){
		function CodeViewManager(){
			if(!CodeViewManager.codeDiv){
				CodeViewManager.init();
			}
		}

		__class(CodeViewManager,'laya.ide.managers.CodeViewManager');
		var __proto=CodeViewManager.prototype;
		__proto.setZIndex=function(index){
			if(!CodeViewManager.style)return;
			CodeViewManager.style["z-index"]=index;
		}

		__proto.show=function(){
			this.setZIndex(9);
			CodeViewManager.showed=true;
		}

		__proto.hide=function(){
			this.setZIndex(-1);
			CodeViewManager.showed=false;
		}

		CodeViewManager.init=function(){
			CodeViewManager.codeDiv=Browser.window["layaEditor"];
			if(!CodeViewManager.codeDiv)return;
			CodeViewManager.style=CodeViewManager.codeDiv.style;
			CodeViewManager.style["z-index"]=9;
			CodeViewManager.style["position"]="absolute";
			CodeViewManager.adpt();
		}

		CodeViewManager.openFile=function(file){
			if(!CodeViewManager.codeDiv)return;
			Browser.window["openFile"](file);
		}

		CodeViewManager.sizeDiv=function(width,height){
			if(!CodeViewManager.codeDiv)return;
			Browser.window["windowLayout"](width,height);
		}

		CodeViewManager.adpt=function(){
			if(!CodeViewManager.codeDiv)return;
			var pos=new Point();
			pos=UIPanel.instance.localToGlobal(pos);
			var dLen=0;
			dLen=25;
			var tW=0;
			var tH=0;
			var dWidth=4;
			tW=UIPanel.instance.width-dWidth*2;
			tH=(UIPanel.instance.height-dLen);
			CodeViewManager.style.width=tW+"px";
			CodeViewManager.style.height=tH+"px";
			CodeViewManager.style.left=(pos.x+dWidth)+"px";
			CodeViewManager.style.top=pos.y+dLen+"px";
			CodeViewManager.sizeDiv(tW,tH);
		}

		CodeViewManager.codeDiv=null
		CodeViewManager.style=null
		CodeViewManager.showed=false;
		__static(CodeViewManager,
		['I',function(){return this.I=new CodeViewManager();}
		]);
		return CodeViewManager;
	})()


	/**
	*本类控制鼠标光标样式
	*@author ww
	*/
	//class laya.ide.managers.CursorManager
	var CursorManager=(function(){
		function CursorManager(){}
		__class(CursorManager,'laya.ide.managers.CursorManager');
		CursorManager.init=function(){
			CursorManager._style=Browser.document.body.style;
			CursorManager.setType("default");
		}

		CursorManager.setType=function(type){
			CursorManager._style.cursor=type;
		}

		CursorManager.Auto="default";
		CursorManager.Hand="all-scroll";
		CursorManager.HResize="e-resize";
		CursorManager.VResize="n-resize";
		CursorManager._style=null
		return CursorManager;
	})()


	/**
	*ide右上方拖动条
	*@author ww
	*/
	//class laya.ide.managers.DragBarManager
	var DragBarManager=(function(){
		function DragBarManager(){}
		__class(DragBarManager,'laya.ide.managers.DragBarManager');
		DragBarManager.init=function(){
			DragBarManager._drag=Browser.document.getElementById("_dragBar");
			DragBarManager._style=DragBarManager._drag.style;
			DragBarManager.adpt();
		}

		DragBarManager.adpt=function(){
			var menuWidth=580;
			DragBarManager._style.left=menuWidth+"px";
			DragBarManager._style.width=Browser.clientWidth-menuWidth-200;
		}

		DragBarManager._drag=null
		DragBarManager._style=null
		return DragBarManager;
	})()


	/**
	*文件夹监控
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-17 下午5:16:45
	*/
	//class laya.ide.managers.file.DirWatcher
	var DirWatcher=(function(){
		function DirWatcher(){
			this.path=null;
			this._childs=[];
		}

		__class(DirWatcher,'laya.ide.managers.file.DirWatcher');
		var __proto=DirWatcher.prototype;
		__proto.clear=function(){
			FileTools.unwatch(this.path);
			var i=0,len=0;
			len=this._childs.length;
			var tChild;
			for(i=0;i<len;i++){
				tChild=this._childs[i];
				tChild.clear();
			}
			this._childs.length=0;
		}

		__proto.setPath=function(path){
			return;
			this.clear();
			this.path=path;
			if(!FileTools.exist(path))return;
			if(FileTools.isDirectory(path)){
				var childs;
				childs=FileTools.getDirChildDirs(path);
				var i=0,len=0;
				len=childs.length;
				var tChild;
				for(i=0;i<len;i++){
					tChild=new DirWatcher();
					tChild.setPath(childs[i]);
					this._childs.push(tChild);
				}
				}else{
			}
			FileTools.watch(path,Utils.bind(this.changeHandler,this));
		}

		__proto.checkChanges=function(){}
		__proto.changeHandler=function(event,filename){
			if(!filename)return;
			filename=CMDShell.decode(filename,"utf8");
			var filePath;
			filePath=FileTools.path.join(this.path,filename);
			console.log("FileChange:",event,filename);
			if(!FileTools.exist(filePath))return;
			if(FileTools.isDirectory(filePath)){
				if(!FileTools.isDirWatched(filePath)){
					var tChild;
					tChild=new DirWatcher();
					tChild.setPath(filePath);
					this._childs.push(tChild);
				}
				return;
			}
			Laya.timer.once(500,Notice$1,Notice$1.notify,["RESFILE_CHANGE",filePath],true);
		}

		return DirWatcher;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-5-26 上午9:27:43
	*/
	//class laya.ide.managers.file.DirWatcherNew
	var DirWatcherNew=(function(){
		function DirWatcherNew(){
			this.updateO={};
			this.path=null;
		}

		__class(DirWatcherNew,'laya.ide.managers.file.DirWatcherNew');
		var __proto=DirWatcherNew.prototype;
		__proto.setPath=function(path){
			return;
			this.path=path;
			ObjectTools.clearObj(this.updateO);
			this.work=false;
			this.record();
			this.work=true;
		}

		__proto.record=function(){
			var files;
			files=FileTools.getFileList(this.path);
			var i=0,len=0;
			var tFile;
			var infor;
			len=files.length;
			for(i=0;i<len;i++){
				tFile=files[i];
				infor=FileTools.getStat(tFile);
				this.updateO[tFile]=infor.mtime.toString();
			}
		}

		__proto.check=function(){
			var files;
			files=FileTools.getFileList(this.path);
			var i=0,len=0;
			var tFile;
			var infor;
			var newTime;
			len=files.length;
			for(i=0;i<len;i++){
				tFile=files[i];
				infor=FileTools.getStat(tFile);
				newTime=infor.mtime.toString();
				if(newTime!=this.updateO[tFile]){
					Notice$1.notify("RESFILE_CHANGE",tFile);
				}
				this.updateO[tFile]=newTime;
			}
		}

		__getset(0,__proto,'work',null,function(v){
			if(v){
				Laya.timer.loop(5000,this,this.check);
				}else{
				Laya.timer.clear(this,this.check);
			}
		});

		return DirWatcherNew;
	})()


	/**文件管理类
	*@author yung
	*/
	//class laya.ide.managers.FileManager
	var FileManager=(function(){
		function FileManager(){};
		__class(FileManager,'laya.ide.managers.FileManager');
		FileManager.getPath=function(basePath,relativePath){
			return FileTools.getPath(basePath,relativePath);
		}

		FileManager.getRelativePath=function(basePath,targetPath){
			return FileManager.adptToCommonUrl(FileTools.getRelativePath(basePath,targetPath));
		}

		FileManager.getAppPath=function(path){
			return FileManager.getPath(SystemSetting.appPath,path);
		}

		FileManager.getDataPath=function(path){
			return FileManager.getPath(Device.dataPath,path);
		}

		FileManager.getAppRelativePath=function(path){
			return FileManager.getRelativePath(SystemSetting.appPath,path);
		}

		FileManager.getWorkPath=function(path){
			return FileManager.getPath(SystemSetting.workPath,path);
		}

		FileManager.getWorkRelativePath=function(path){
			return FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.workPath,path));
		}

		FileManager.getResRelativePath=function(path){
			return FileManager.adptToCommonUrl(""+FileManager.getRelativePath(SystemSetting.assetsPath,path));
		}

		FileManager.adptToCommonUrl=function(url){
			return StringTool.getReplace(url,"\\\\","/");
		}

		FileManager.adptToLocalUrl=function(url){
			return FileTools.path.normalize(url);
		}

		FileManager.getResPath=function(path){
			return FileManager.getPath(SystemSetting.assetsPath,path);
		}

		FileManager.getPagePath=function(path){
			return FileManager.getPath(SystemSetting.pagesPath,path);
		}

		FileManager.getFileName=function(path){
			return FileTools.path.basename(path).split(".")[0];
		}

		FileManager.createDirectory=function(path){
			try {
				FileTools.createDirectory(path);
				}catch (e){
				Sys.alert("Create folder failed:"+path);
			}
		}

		FileManager.createTxtFile=function(path,value){
			try {
				FileTools.createFile(path,value);
				}catch (e){
				Sys.alert("Create file failed:"+path);
			}
		}

		FileManager.createJSONFile=function(path,value){
			try {
				FileTools.createFile(path,JSON.stringify(value));
				}catch (e){
				Sys.alert("Create file failed:"+path);
			}
		}

		FileManager.createBytesFile=function(path,bytes){
			try {
				FileTools.createFile(path,bytes);
				}catch (e){
				Sys.alert("Create file failed:"+path);
			}
		}

		FileManager.removeFile=function(path){
			FileTools.removeE(path);
		}

		FileManager.copyFile=function(from,to){
			try {
				FileTools.copyE(from,to);
				}catch (e){
				Sys.alert("Copy file failed:(from:"+from+" to:"+to+")");
				console.log("Copy file failed:(from:"+from+" to:"+to+")");
			}
		}

		FileManager.readTxtFile=function(path,errorAlert){
			(errorAlert===void 0)&& (errorAlert=true);
			try {
				return FileTools.readFile(path);
				}catch (e){
				if (errorAlert)Sys.alert("Read file failed:"+path);
			}
			return null;
		}

		FileManager.readJSONFile=function(path,errorAlert){
			(errorAlert===void 0)&& (errorAlert=true);
			try {
				var str=laya.ide.managers.FileManager.readTxtFile(path);
				return JSON.parse(str);
				}catch (e){
				if (errorAlert)Sys.alert("Read file failed:"+path);
				debugger;
			}
			return null;
		}

		FileManager.readByteFile=function(path,errorAlert){
			(errorAlert===void 0)&& (errorAlert=true);
			try {
				return FileTools.readFile(path);
				}catch (e){
				if (errorAlert)Sys.alert("Read file failed:"+path);
			}
			return null;
		}

		FileManager.getFileList=function(path){
			return FileTools.getFileList(path);
		}

		FileManager.exists=function(path){
			return FileTools.exist(path);
		}

		FileManager.getFileTree=function(path,hasExtension){
			(hasExtension===void 0)&& (hasExtension=false);
			var xml=findFiles(path);
			function findFiles (path){
				var node;
				if (FileTools.exist(path)){
					var fileName=FileTools.getFileName(path);
					node=new XMLElement("<item label='"+fileName+"' path='"+path+"' isDirectory='true'/>");
					var a=FileTools.getDirFiles(path);
					var f;
					for(var $each_f in a){
						f=a[$each_f];
						f=FileTools.getPath(path,f);
						if (FileTools.isDirectory(f)&& f.indexOf(".svn")==-1){
							node.appendChild(findFiles(f));
						}
					}
					var $each_f;
					for($each_f in a){
						f=a[$each_f];
						f=FileTools.getPath(path,f);
						if (FileTools.isDirectory(f)==false){
							if (fileName.indexOf("$")==-1 && fileName.indexOf("@")==-1){
								node.appendChild(new XMLElement("<item label='"+fileName+"' path='"+f+"' isDirectory='false'/>"));
							}
						}
					}
				}
				return node;
			}
			return xml
		}

		FileManager.rename=function(oldPath,newPath){
			try {
				FileTools.rename(oldPath,newPath);
				}catch (e){
				Sys.alert("Rename file failed:(from:"+oldPath+" to:"+newPath+")");
			}
		}

		return FileManager;
	})()


	/**
	*用于在对象上显示焦点框的工具类
	*@author ww
	*/
	//class laya.ide.managers.FocusManager
	var FocusManager=(function(){
		function FocusManager(){}
		__class(FocusManager,'laya.ide.managers.FocusManager');
		FocusManager.showFocus=function(tar,width,clearPre){
			(width===void 0)&& (width=5);
			(clearPre===void 0)&& (clearPre=true);
			var bounds;
			bounds=FocusManager.getTarBounds(tar);
			FocusManager.showBorder(tar,"up",clearPre,bounds,width);
			FocusManager.showBorder(tar,"down",false,bounds,width);
			FocusManager.showBorder(tar,"left",false,bounds,width);
			FocusManager.showBorder(tar,"right",false,bounds,width);
		}

		FocusManager.getTarBounds=function(tar){
			if(FocusManager.useGetBounds){
				return tar.getSelfBounds();
				}else{
				return new Rectangle().setTo(0,0,tar.width,tar.height);
			}
		}

		FocusManager.showBorder=function(tar,type,clearPre,rec,width){
			(clearPre===void 0)&& (clearPre=true);
			(width===void 0)&& (width=5);
			if (clearPre==true){
				FocusManager.clearFocus();
			};
			var bounds;
			bounds=rec?rec:FocusManager.getTarBounds(tar);
			var tFocus;
			tFocus=DisPool.getDis(FocusItem);
			switch (type){
				case "left":
					tFocus.width=width;
					tFocus.height=bounds.height;
					tFocus.x=bounds.x;
					tFocus.y=bounds.y;
					break ;
				case "right":
					tFocus.width=width;
					tFocus.height=bounds.height;
					tFocus.x=bounds.x+bounds.width-width;
					tFocus.y=bounds.y;
					break ;
				case "up":
					tFocus.width=bounds.width;
					tFocus.height=width;
					tFocus.x=bounds.x;
					tFocus.y=bounds.y;
					break ;
				case "down":
					tFocus.width=bounds.width;
					tFocus.height=width;
					tFocus.x=bounds.x;
					tFocus.y=bounds.y+bounds.height-width;
					break ;
				}
			FocusManager.showFocusToTar(tar,tFocus);
		}

		FocusManager.showFocusToTar=function(tar,focus){
			FocusManager._focusList.push(focus);
			tar.addChild(focus);
		}

		FocusManager.clearFocus=function(tar){
			var i=0,len=0;
			len=FocusManager._focusList.length;
			if (tar){
				for (i=len-1;i >=0;i--){
					if (FocusManager._focusList[i].parent==tar){
						(FocusManager._focusList [i]).removeSelf();
						FocusManager._focusList.splice(i,1);
					}
				}
			}
			else{
				for (i=0;i < len;i++){
					(FocusManager._focusList [i]).removeSelf();
				}
				FocusManager._focusList.length=0;
			}
		}

		FocusManager.focusWidth=5;
		FocusManager.useGetBounds=false;
		FocusManager._focusList=[];
		return FocusManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-3-23 下午9:19:23
	*/
	//class laya.ide.managers.HtmlLayerManager
	var HtmlLayerManager=(function(){
		function HtmlLayerManager(){
			HtmlLayerManager.init();
		}

		__class(HtmlLayerManager,'laya.ide.managers.HtmlLayerManager');
		HtmlLayerManager.init=function(){
			HtmlLayerManager.CanvasStyle=Render._mainCanvas.source["style"];
			Dialog.manager.on("open",null,HtmlLayerManager.openDialog);
			Dialog.manager.on("close",null,HtmlLayerManager.closeDialog);
		}

		HtmlLayerManager.setCanvasIndex=function(index){
			if(!HtmlLayerManager.CanvasStyle)HtmlLayerManager.init();
			HtmlLayerManager.CanvasStyle["z-index"]=index;
		}

		HtmlLayerManager.update=function(){
			return;
			if(HtmlLayerManager.hasPops()){
				HtmlLayerManager.switchToTop();
				}else{
				HtmlLayerManager.switchToBack();
			}
		}

		HtmlLayerManager.hasPops=function(){
			return HtmlLayerManager.hasMenu||HtmlLayerManager.hasDialog||HtmlLayerManager.hasTip;
		}

		HtmlLayerManager.switchToTop=function(){
			HtmlLayerManager.setCanvasIndex(99);
		}

		HtmlLayerManager.switchToBack=function(){
			HtmlLayerManager.setCanvasIndex(1);
		}

		HtmlLayerManager.openDialog=function(){
			HtmlLayerManager.hasDialog=true;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.closeDialog=function(){
			HtmlLayerManager.hasDialog=false;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.openMenu=function(){
			HtmlLayerManager.hasMenu=true;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.closeMenu=function(){
			HtmlLayerManager.hasMenu=false;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.openTip=function(){
			HtmlLayerManager.hasTip=true;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.closeTip=function(){
			HtmlLayerManager.hasTip=false;
			HtmlLayerManager.update();
		}

		HtmlLayerManager.CanvasStyle=null
		HtmlLayerManager.hasDialog=false;
		HtmlLayerManager.hasMenu=false;
		HtmlLayerManager.hasTip=false;
		return HtmlLayerManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-19 上午11:23:03
	*/
	//class laya.ide.managers.IDEAPIS
	var IDEAPIS=(function(){
		function IDEAPIS(){}
		__class(IDEAPIS,'laya.ide.managers.IDEAPIS');
		/**
		*资源文件存放的目录
		*
		*/
		__getset(1,IDEAPIS,'assetsPath',function(){
			return SystemSetting.assetsPath;
		});

		/**
		*当前工作目录
		*
		*/
		__getset(1,IDEAPIS,'workPath',function(){
			return SystemSetting.workPath;
		});

		/**
		*导出图集资源的目录
		*
		*/
		__getset(1,IDEAPIS,'resExportPath',function(){
			return ProjectSetting.resExportPath;
		});

		/**
		*页面文件存放目录
		*
		*/
		__getset(1,IDEAPIS,'pagesPath',function(){
			return SystemSetting.pagesPath;
		});

		/**
		*导出代码的目录
		*
		*/
		__getset(1,IDEAPIS,'codeExportPath',function(){
			return ProjectSetting.codeExportPath;
		});

		/**
		*导出非图集资源的目录
		*
		*/
		__getset(1,IDEAPIS,'asynResExportPath',function(){
			return ProjectSetting.asynResExportPath;
		});

		IDEAPIS.nodeChange=function(node,changeProps,reCreate){
			(reCreate===void 0)&& (reCreate=false);
			var design;
			design=IDEAPIS.getCurDesign();
			if(!design)return;
			design.nodeChanged(node,["x","y","width","height"]);
			design.change(reCreate);
			design.changeSelectComp();
		}

		IDEAPIS.getCurDesign=function(){
			if(!UIPanel.instance.currViewer)return null;
			return UIPanel.instance.currViewer.design;
		}

		IDEAPIS.getSelectComps=function(){
			var design;
			design=IDEAPIS.getCurDesign();
			if(!design)return null;
			return design.getIDedSelectedXmls();
		}

		IDEAPIS.getCurPagePath=function(){
			if(!UIPanel.instance.currViewer)return null;
			return UIPanel.instance.currViewer.pagePath;
		}

		IDEAPIS.getCurPageType=function(){
			var path;
			path=IDEAPIS.getCurPagePath();
			if(!path)return null;
			return TypeManager.getFileType(path);
		}

		IDEAPIS.getDesignData=function(){
			var design;
			design=IDEAPIS.getCurDesign();
			if(!design)return null;
			return design.xml;
		}

		IDEAPIS.unFocusInput=function(){
			if(Laya.stage.focus&& (Laya.stage.focus instanceof laya.ui.TextInput )){
				(Laya.stage.focus).focus=false;
			}
		}

		return IDEAPIS;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-12-27 下午3:00:03
	*/
	//class laya.ide.managers.IDEConfigsManager
	var IDEConfigsManager=(function(){
		function IDEConfigsManager(){}
		__class(IDEConfigsManager,'laya.ide.managers.IDEConfigsManager');
		var __proto=IDEConfigsManager.prototype;
		__proto.getConfig=function(sign){
			var configO;
			configO=FileManager.readJSONFile(Paths.getConfigVarPath());
			if(!configO)return null;
			return configO[sign];
		}

		__proto.saveConfig=function(sign,dataO){
			var configO;
			configO=FileManager.readJSONFile(Paths.getConfigVarPath());
			if(!configO)configO={};
			if(!dataO)dataO={};
			configO[sign]=dataO;
			FileManager.createJSONFile(Paths.getConfigVarPath(),configO);
		}

		__proto.insertDefaultValue=function(target,configO){
			var key;
			key=configO["sign"];
			if(!key)return;
			var vars;
			vars=configO["vars"];
			if(!vars)return;
			var i=0,len=0;
			len=vars.length;
			var tName;
			var tChild;
			var tValue;
			var tData;
			tData=this.getConfig(key);
			if(!tData)return;
			for(i=0;i<len;i++){
				tName=vars[i];
				tChild=target[tName];
				if(!tChild)continue ;
				if(tData[tName]){
					tChild.text=tData[tName];
				}
			}
		}

		__proto.saveDefaultValue=function(target,configO){
			var key;
			key=configO["sign"];
			if(!key)return;
			var vars;
			vars=configO["vars"];
			if(!vars)return;
			var i=0,len=0;
			len=vars.length;
			var tName;
			var tChild;
			var tValue;
			var tData;
			tData=this.getConfig(key);
			if(!tData)tData={};
			for(i=0;i<len;i++){
				tName=vars[i];
				tChild=target[tName];
				if(!tChild)continue ;
				tData[tName]=tChild.text;
			}
			this.saveConfig(key,tData);
		}

		__static(IDEConfigsManager,
		['I',function(){return this.I=new IDEConfigsManager();}
		]);
		return IDEConfigsManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-3-6 下午3:43:41
	*/
	//class laya.ide.managers.IDELangManager
	var IDELangManager=(function(){
		function IDELangManager(){}
		__class(IDELangManager,'laya.ide.managers.IDELangManager');
		IDELangManager.switchToLang=function(lang){
			if(!FileTools.exist(FileManager.getAppPath("h5/langs/"+lang))){
				lang=IDELangManager.DefaultLang;
			}
			IDELangManager.tLang=lang;
			IDESkinManager.reloadIDE();
		}

		IDELangManager.getLangPath=function(){
			if(!IDELangManager.tLang)return null;
			return FileManager.getAppPath("h5/langs/"+IDELangManager.tLang);
		}

		IDELangManager.setLangPath=function(path){
			if(!path){
				path=IDELangManager.DefaultLang;
			}
			if(!FileTools.exist(FileManager.getAppPath("h5/langs/"+path))){
				path=IDELangManager.DefaultLang;
			}
			IDELangManager.tLang=path;
		}

		IDELangManager.testSwitch=function(){
			if(IDELangManager.tLang==IDELangManager.DefaultLang){
				IDELangManager.switchToLang("english.json");
				}else{
				IDELangManager.switchToLang(IDELangManager.DefaultLang);
			}
		}

		IDELangManager.tLang=null;
		IDELangManager.DefaultLang=null;
		return IDELangManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-18 上午10:44:47
	*/
	//class laya.ide.managers.IDESkinManager
	var IDESkinManager=(function(){
		function IDESkinManager(){}
		__class(IDESkinManager,'laya.ide.managers.IDESkinManager');
		IDESkinManager.reloadIDE=function(){
			Device.remote.getCurrentWindow().reload();
		}

		IDESkinManager.switchToSkin=function(skinPath){
			if(!FileTools.exist(FileManager.getAppPath("h5/skins/"+skinPath))){
				skinPath="default";
			}
			IDESkinManager.tSkinPath=skinPath;
			IDESkinManager.reloadIDE();
		}

		IDESkinManager.setSkinPath=function(path){
			if(!path){
				path="default";
			}
			if(!FileTools.exist(FileManager.getAppPath("h5/skins/"+path))){
				path="default";
			}
			IDESkinManager.tSkinPath=path;
		}

		IDESkinManager.getSkinPath=function(){
			return FileManager.getAppPath("h5/skins/"+IDESkinManager.tSkinPath+"/");
		}

		IDESkinManager.getStylePath=function(){
			return IDESkinManager.getSkinPath()+"styles.cfg";
		}

		IDESkinManager.testSwitch=function(){
			if(IDESkinManager.tSkinPath=="default"){
				IDESkinManager.switchToSkin("lighter");
				}else{
				IDESkinManager.switchToSkin("default");
			}
		}

		IDESkinManager.tSkinPath="lighter";
		IDESkinManager.DefaultSkinPath="default";
		return IDESkinManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-4-20 下午4:48:41
	*/
	//class laya.ide.managers.KeyManager
	var KeyManager=(function(){
		function KeyManager(){
			this.isCommandKeyDown=false;
		}

		__class(KeyManager,'laya.ide.managers.KeyManager');
		var __proto=KeyManager.prototype;
		__proto.init=function(){
			Laya.stage.on("keydown",this,this.keyDown);
			Laya.stage.on("keyup",this,this.keyUp);
			Laya.stage.on("blur",this,this.onBlur);
		}

		__proto.onBlur=function(){
			this.isCommandKeyDown=false;
		}

		__proto.isCommandKey=function(keyCode){
			if(KeyManager.commandKeys[keyCode])return true;
			return false;
		}

		__proto.keyDown=function(e){
			if(this.isCommandKey(e.keyCode)){
				this.isCommandKeyDown=true;
			}
			if(Input.isInputting){
				this.isCommandKeyDown=false;
			}
		}

		__proto.keyUp=function(e){
			if(Input.isInputting){
				this.isCommandKeyDown=false;
			}
			if(this.isCommandKey(e.keyCode)){
				this.isCommandKeyDown=false;
			}
		}

		KeyManager.isABC=function(keyCode){
			return keyCode>=65&&keyCode<=90;
		}

		KeyManager.getCharByCode=function(code){
			return String.fromCharCode(code);
		}

		KeyManager.setNewFocus=function(item){
			if(Laya.stage.focus){
				KeyManager.focusList.push(Laya.stage.focus);
			}
			Laya.stage.focus=item;
		}

		KeyManager.restoreFocus=function(){
			if(KeyManager.focusList.length>0){
				Laya.stage.focus=KeyManager.focusList.pop();
			}
		}

		KeyManager.focusList=[];
		__static(KeyManager,
		['I',function(){return this.I=new KeyManager();},'commandKeys',function(){return this.commandKeys={
				91:true,
				93:true,
				244:true,
				17:true
		};}

		]);
		return KeyManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-4 下午8:19:47
	*/
	//class laya.ide.managers.LanguageManager
	var LanguageManager=(function(){
		function LanguageManager(){}
		__class(LanguageManager,'laya.ide.managers.LanguageManager');
		LanguageManager.loadProjectLanguageFile=function(){
			if(ProjectSetting)
				LanguageManager.loadLanguageFile(FileManager.getWorkPath(ProjectSetting.langPath));
		}

		LanguageManager.loadLanguageFile=function(file){
			if(!FileTools.exist(file)){
				return;
			}
			if(FileTools.isDirectory(file))return;
			var txt;
			txt=FileTools.readFile(file);
			var langData;
			try{
				langData=ObjectTools.getObj(txt);
				}catch(e){
			}
			if(langData){
				Text.langPacks=langData;
			}
			Notice$1.notify("FRESH_CurView");
			console.log("languagePack loaded");
		}

		LanguageManager.getLanguagePack=function(){
			LanguageManager.saveLanguagePack(FileManager.getWorkPath(ProjectSetting.resExportPath));
		}

		LanguageManager.updateLangDic=function(oldLangDic,newLangDic){
			var key;
			for(key in oldLangDic){
				newLangDic[key]=oldLangDic[key];
			}
		}

		LanguageManager.saveLanguagePack=function(file){
			try{
				var outPath;
				outPath=FileManager.getPath(file,"lang.lang");
				var langDic;
				langDic=LanguageManager.createByDir(SystemSetting.pagesPath,null,null);
				var preLangDic;
				if(FileManager.exists(outPath)){
					preLangDic=FileManager.readJSONFile(outPath);
					if(preLangDic){
						LanguageManager.updateLangDic(preLangDic,langDic);
					}
				}
				console.log("langDic:",langDic);
				FileTools.createFile(outPath,ObjectTools.getJsonString(langDic));
				MessageManager.instance.show(Sys.lang("生成语言包成功"));
				}catch(e){
				Alert.show(Sys.lang("生成语言包失败：")+e.message);
			}
		}

		LanguageManager.createByDir=function(file,basePath,tarPath){
			var fileList;
			fileList=FileTools.getFileList(file);
			var i=0,len=0;
			len=fileList.length;
			var tFile;
			var code;
			var obj;
			var codePath;
			var uiObj;
			var textDic={};
			for(i=0;i<len;i++){
				tFile=fileList[i];
				if(FileTools.isDirectory(tFile)){
					}else{
					if(TypeManager.getFileType(tFile)=="page"||TypeManager.getFileType(tFile)=="animation"){
						code=FileManager.readTxtFile(tFile);
						try{
							uiObj=ObjectTools.getObj(code);
							LanguageManager.collectTexts(uiObj,textDic);
							}catch(e){
							Alert.show(Sys.lang("提取文件失败：\n")+tFile);
						}
					}
				}
			}
			LanguageManager.getStylesText(ResStyleManager.styleMap,textDic);
			return textDic;
		}

		LanguageManager.getStylesText=function(styleObj,textDic){
			if(!styleObj)return;
			var key;
			var xml;
			for(key in styleObj){
				xml=styleObj[key];
				if(xml){
					LanguageManager.collectPropStrText(xml.getAttribute('props'),textDic);
				}
			}
		}

		LanguageManager.collectPropStrText=function(propStr,textDic){
			if(!propStr)return;
			if(propStr.indexOf("=")>=0){
				var props;
				props=ResStyleManager.getPropArrByPropStr(propStr);
				for (var i=0,n=props.length;i < n;i++){
					var a=props[i].split("=");
					if (a.length==2){
						var key=a[0];
						var val=a[1];
						var adptVal;
						if(!LanguageManager.textKeysDefault[key])continue ;
						adptVal=ObjectTools.getAutoValue(val);
						if((typeof adptVal=='string')){
							LanguageManager.addText(adptVal,textDic);
						}
					}
				}
			}
		}

		LanguageManager.getTypeCollects=function(type){
			if(LanguageManager.collectConfigO[type])return LanguageManager.collectConfigO[type];
			var rst;
			rst=[];
			var configO;
			configO=UIConfigManager.getFullConfig(type);
			if(configO){
				var props;
				props=configO.prop;
				var key;
				for(key in props){
					if(props[key]["text"]=="true"||LanguageManager.textKeysDefault[key]){
						rst.push(key);
					}
				}
			}
			Utils.concatArray(rst,LanguageManager.defaultKeys);
			LanguageManager.collectConfigO[type]=rst;
			return rst;
		}

		LanguageManager.collectTexts=function(nodeO,textDic){
			var i=0,len=0;
			var props;
			props=nodeO.props;
			var keys;
			keys=LanguageManager.getTypeCollects(nodeO.type);
			if(keys){
				len=keys.length;
				for(i=0;i<len;i++){
					if(props.hasOwnProperty(keys[i])){
						LanguageManager.addText(props[keys[i]],textDic);
					}
				}
			};
			var childs;
			childs=nodeO.child;
			if(childs){
				len=childs.length;
				for(i=0;i<len;i++){
					LanguageManager.collectTexts(childs[i],textDic)
				}
			}
		}

		LanguageManager.addText=function(text,textDic){
			if(text==null)return;
			if(text=="")return;
			textDic[text]=text;
		}

		__static(LanguageManager,
		['textKeysDefault',function(){return this.textKeysDefault={
				"text":true,
				"label":true,
				"title":true,
				"prompt":true
				};},'defaultKeys',function(){return this.defaultKeys=["text","label","title","prompt","toolTip"];},'collectConfigO',function(){return this.collectConfigO={
		};}

		]);
		return LanguageManager;
	})()


	/**
	*本类用于处理对象之间的排版关系
	*@author ww
	*/
	//class laya.ide.managers.layout.RelativePos
	var RelativePos=(function(){
		function RelativePos(fun,tar,to,d){
			this.tar=null;
			this.to=null;
			this.d=NaN;
			this._fun=null;
			this.tar=tar;
			this.to=to;
			this.d=d;
			this._fun=fun;
		}

		__class(RelativePos,'laya.ide.managers.layout.RelativePos');
		var __proto=RelativePos.prototype;
		/**
		*更新排版
		*
		*/
		__proto.update=function(){
			this._fun(this.tar,this.to,this.d);
		}

		RelativePos.getDisMouseRelativePos=function(tTarget,edgePercent){
			(edgePercent===void 0)&& (edgePercent=0.1);
			var pos;
			pos=DisControlTool.getMousePoint(tTarget);
			if (pos.x < 0 || pos.x > tTarget.width || pos.y < 0 || pos.y > tTarget.height)return "out";
			if (pos.y < tTarget.height *edgePercent){
				return "up";
			}
			else if (pos.y > tTarget.height *(1-edgePercent)){
				return "down";
			}
			else if (pos.x > tTarget.width *(1-edgePercent)){
				return "right";
				}else if (pos.x < tTarget.width *edgePercent){
				return "left";
				}else{
				return "center";
			}
			return "center";
		}

		RelativePos.rightTo=function(tar,to,d){
			(d===void 0)&& (d=0);
			if (!to.parent)
				return;
			tar.right=Math.ceil((to.parent).width-to.x+d);
		}

		RelativePos.leftTo=function(tar,to,d){
			(d===void 0)&& (d=0);
			tar.left=Math.ceil(to.x+to.width+d);
		}

		RelativePos.downTo=function(tar,to,d){
			(d===void 0)&& (d=0);
			if (!to.parent)
				return;
			tar.bottom=Math.ceil((to.parent).height-to.y+d);
		}

		RelativePos.upTo=function(tar,to,d){
			(d===void 0)&& (d=0);
			tar.top=Math.ceil(to.y+to.height+d);
		}

		RelativePos.saveRelative=function(tar){
			var relativeO;
			relativeO=tar["relativeO"];
			if (!relativeO)
				return {};
			var key;
			var rst={};
			for (key in relativeO){
				rst[key]=IDTools.getObjID(relativeO[key]);
			}
			return rst;
		}

		RelativePos.getTypeByFun=function(fun){
			var key;
			for (key in RelativePos.typeToFunO){
				if (RelativePos.typeToFunO[key]==fun)
					return key;
			}
			return null;
		}

		RelativePos.getOtherSide=function(type){
			return RelativePos.otherSideO[type];
		}

		RelativePos.getOnlySide=function(o){
			var relativeO;
			relativeO=o["relativeO"];
			if (!relativeO)
				return null;
			var type;
			var tBar;
			var tRst;
			var tArea=0;
			var tRstBar;
			for (type in relativeO){
				tBar=relativeO[type];
				if (tBar){
					if (tBar.isOnly(o)){
						if (!tRst || RelativePos.getBarWeight(tBar)> tArea){
							tRst=type;
							tRstBar=tBar;
							tArea=RelativePos.getBarWeight(tBar);
						}
					}
				}
			}
			return tRst;
		}

		RelativePos.getBarWeight=function(bar){
			var tRec;
			tRec=bar.getDragArea();
			return tRec.width+tRec.height;
		}

		RelativePos.addRelative=function(o,dragBar,type,d){
			(d===void 0)&& (d=0);
			if (!dragBar)
				return;
			RelativePos.cancelRelative(o,type);
			dragBar.addItem(o,RelativePos.typeToFunO[type]);
			var relativeO;
			if (!o["relativeO"])
				o["relativeO"]={};
			relativeO=o["relativeO"];
			relativeO[type]=dragBar;
		}

		RelativePos.copyRelative=function(o,tar,type){
			RelativePos.addRelative(o,RelativePos.getBar(tar,type),type);
		}

		RelativePos.cancelRelative=function(o,sign){
			var relativeO;
			relativeO=o["relativeO"];
			if (!relativeO)
				return;
			if (relativeO[sign]){
				(relativeO [sign]).removeTarget(o);
			}
			delete relativeO[sign];
		}

		RelativePos.getBar=function(o,sign){
			var relativeO;
			relativeO=o["relativeO"];
			if (!relativeO)
				return null;
			return relativeO[sign];
		}

		RelativePos.clearBar=function(o){
			RelativePos.cancelRelative(o,"left");
			RelativePos.cancelRelative(o,"right");
			RelativePos.cancelRelative(o,"up");
			RelativePos.cancelRelative(o,"down");
		}

		RelativePos.Right="right";
		RelativePos.Left="left";
		RelativePos.Down="down";
		RelativePos.Up="up";
		RelativePos.Center="center";
		RelativePos.Out="out";
		RelativePos.EdgePercent=0.1;
		__static(RelativePos,
		['typeToFunO',function(){return this.typeToFunO={"right":laya.ide.managers.layout.RelativePos.rightTo,"left":laya.ide.managers.layout.RelativePos.leftTo,"up":laya.ide.managers.layout.RelativePos.upTo,"down":laya.ide.managers.layout.RelativePos.downTo};},'otherSideO',function(){return this.otherSideO={"right":"left","left":"right","up":"down","down":"up"};}
		]);
		return RelativePos;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-27 上午10:10:36
	*/
	//class laya.ide.managers.layout.ResizeRecStruct
	var ResizeRecStruct=(function(){
		function ResizeRecStruct(){
			this.upSide=null;
			this.downSide=null;
			this.leftSide=null;
			this.rightSide=null;
			this.isRoot=false;
			this.resizeItems=null;
			this.mDis=NaN;
			this.sortByXFun=MathUtil.sortByKey("x",false,true);
			this.sortByYFun=MathUtil.sortByKey("y",false,true);
		}

		__class(ResizeRecStruct,'laya.ide.managers.layout.ResizeRecStruct');
		var __proto=ResizeRecStruct.prototype;
		__proto.reset=function(){
			this.upSide=null;
			this.downSide=null;
			this.leftSide=null;
			this.rightSide=null;
		}

		__proto.setBars=function(left,right,up,down){
			this.upSide=up;
			this.downSide=down;
			this.leftSide=left;
			this.rightSide=right;
		}

		__proto.isSame=function(left,right,up,down){
			return this.upSide==up&&this.downSide==down&&this.leftSide==left&&this.rightSide==right;
		}

		__proto.isSameStruct=function(st){
			return this.upSide==st.upSide&&this.downSide==st.downSide&&this.leftSide==st.leftSide&&this.rightSide==st.rightSide;
		}

		__proto.traceMyInfo=function(){
			console.log("up:",this.upSide.getDragBarInfo("up"));
			console.log("down:",this.downSide.getDragBarInfo("down"));
			console.log("left:",this.leftSide.getDragBarInfo("left"));
			console.log("right:",this.rightSide.getDragBarInfo("right"));
		}

		/**
		*调整垂直方向的拖动条
		*@param dis
		*@return
		*
		*/
		__proto.tryMoveRight=function(dis){
			this.mDis=dis;
			var i=0,len=0;
			var _updaters;
			_updaters=this.upSide._updaters;
			len=_updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=_updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="e-resize"&&RelativePos.getTypeByFun(tR._fun)=="up"){
						if(this.downSide.findTarType(tDragBar)!=null){
							if(tDragBar.x>=this.leftSide.x&&tDragBar.x<=this.rightSide.x)
								dragBarList.push(tDragBar);
						}
					}
				}
			}
			dragBarList.sort(this.sortByXFun);
			if(dragBarList[0]!=this.leftSide){
				dragBarList.unshift(this.leftSide);
			}
			if(dragBarList[dragBarList.length-1]!=this.rightSide){
				dragBarList.push(this.rightSide);
			}
			if(dragBarList.length<2){
				return false;
			};
			var tWidth=NaN;
			tWidth=0;
			var maxWidth=NaN;
			maxWidth=0;
			var tSelecteDragBar;
			len=dragBarList.length;
			for(i=1;i<len;i++){
				tWidth=dragBarList[i].x-dragBarList[i-1].x;
				if(tWidth>maxWidth){
					maxWidth=tWidth;
					tSelecteDragBar=dragBarList[i];
				}
				if(tWidth+dis>150&&LayoutDragBar.hasFreeTar((dragBarList [i]).getTarsByType("right"))){
					tSelecteDragBar=dragBarList[i];
					break ;
				}
			}
			if(tSelecteDragBar){
				this.moveRightWork(tSelecteDragBar,dragBarList,dis)
				}else{
				debugger;
			}
			return true;
		}

		/**
		*调整水平方向的拖动条
		*@param dis
		*
		*/
		__proto.moveRightWork=function(selectBar,barList,dis){
			var i=0,len=0;
			var rightIndex=0;
			rightIndex=barList.indexOf(selectBar);
			var tLeftBar;
			var tRightBar;
			if(rightIndex>=1){
				tLeftBar=barList[rightIndex-1];
				tRightBar=barList[rightIndex];
				if(tLeftBar==this.leftSide&&tRightBar==this.rightSide){
					}else{
				}
				this.resizeSmallRec(tLeftBar,tRightBar);
			}
			len=barList.length;
			if(this.isRoot){
				len=this.resizeItems.length;
				for(i=0;i<len;i++){
					if(!this.resizeItems[i].walked){
						this.resizeItems[i].left+=dis;
						this.resizeItems[i].walked=true;
					}
				}
				}else{
				for(i=rightIndex;i<len;i++){
					this.resizeItems.push(barList[i]);
				}
			}
		}

		__proto.resizeSmallRec=function(tLeftBar,tRightBar){
			var i=0,len=0;
			var _updaters;
			_updaters=tRightBar._updaters;
			len=_updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=_updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="n-resize"&&RelativePos.getTypeByFun(tR._fun)=="right"){
						if(this.leftSide.findTarType(tDragBar)!=null){
							if(tDragBar.y>=this.upSide.y&&tDragBar.y<=this.downSide.y)
								dragBarList.push(tDragBar);
						}
					}
				}
			};
			var tSelecteDragBar;
			dragBarList.sort(this.sortByYFun);
			if(dragBarList[0]!=this.upSide){
				dragBarList.unshift(this.upSide);
			}
			if(dragBarList[dragBarList.length-1]!=this.downSide){
				dragBarList.push(this.downSide);
			}
			len=dragBarList.length;
			var resizeRec;
			for(i=1;i<len;i++){
				resizeRec=new ResizeRecStruct();
				resizeRec.resizeItems=this.resizeItems;
				resizeRec.setBars(tLeftBar,tRightBar,dragBarList[i-1],dragBarList[i]);
				if(this.isSameStruct(resizeRec)){
					}else{
					resizeRec.tryMoveRight(this.mDis);
				}
			}
		}

		return ResizeRecStruct;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.managers.layout.Updater
	var Updater=(function(){
		function Updater(tar,tarSign,src,srcSign,dValue){
			this.tar=null;
			this.tarSign=null;
			this.src=null;
			this.srcSign=null;
			this.dValue=0;
			(dValue===void 0)&& (dValue=0);
			this.tar=tar;
			this.tarSign=tarSign;
			this.src=src;
			this.srcSign=srcSign;
			this.dValue=dValue;
		}

		__class(Updater,'laya.ide.managers.layout.Updater');
		var __proto=Updater.prototype;
		__proto.update=function(){
			this.tar[this.tarSign]=this.dValue+this.src[this.srcSign];
		}

		__proto.clear=function(){
			this.tar=null;
			this.src=null;
		}

		return Updater;
	})()


	/**
	*布局管理类
	*@author ww
	*/
	//class laya.ide.managers.LayoutRecManager
	var LayoutRecManager=(function(){
		function LayoutRecManager(){}
		__class(LayoutRecManager,'laya.ide.managers.LayoutRecManager');
		var __proto=LayoutRecManager.prototype;
		__proto.saveDragBarInfo=function(dragBar){}
		__getset(1,LayoutRecManager,'tLayoutFile',function(){
			return LayoutRecManager._layoutFile?LayoutRecManager._layoutFile:"layout/layout.config";
		});

		LayoutRecManager.popLocked=function(){
			return CodeViewManager.showed;
			return false;
		}

		LayoutRecManager.onMouseDown=function(e){
			LayoutRecManager.target=e.currentTarget;
			LayoutRecManager.dragItem(LayoutRecManager.target,LayoutRecManager.target["type"]);
			LayerManager.stage.on("mouseup",null,LayoutRecManager.onMouseUp);
			LayerManager.stage.on("mousemove",null,LayoutRecManager.onMouseMove);
		}

		LayoutRecManager.dragItem=function(target,type){
			(type===void 0)&& (type=0);
			var option={};
			var area=new Rectangle();
			if (type==0){
				area=(target).getDragArea();
			}
			else if (type==1){
				area=(target).getDragArea();
			}
			else{
				return;
			}
			option.area=area;
			DisControlTool.setTop(target);
			target.startDrag(area);
		}

		LayoutRecManager.onMouseUp=function(e){
			LayerManager.stage.off("mouseup",null,LayoutRecManager.onMouseUp);
			LayerManager.stage.off("mousemove",null,LayoutRecManager.onMouseMove);
			LayoutRecManager.doLayOut();
			LayoutRecManager.target.stopDrag();
			LayoutRecManager.target.left=Math.ceil(LayoutRecManager.target.x);
			LayoutRecManager.target.top=Math.ceil(LayoutRecManager.target.y);
		}

		LayoutRecManager.onMouseMove=function(e){
			LayoutRecManager.doLayOut();
		}

		LayoutRecManager.doLayOut=function(){
			(LayoutRecManager.target).updates();
		}

		LayoutRecManager.init=function(){
			LayoutRecManager._ct=new Box();
			LayoutRecManager._ct.mouseEnabled=true;
			LayoutRecManager._ct.name="LayoutRecManager_Container";
			LayoutRecManager._ct.width=0;
			LayoutRecManager._ct.height=0;
			LayerManager.stage.addChild(LayoutRecManager._ct);
			LayerManager.stage.on("resize",null,LayoutRecManager.resizeWork);
			LayoutRecManager._ct.on("dragDrop",null,LayoutRecManager.onDragDrop);
			LayerManager.stage.addChild(QuickTool.instance);
			MenuBar.instance.pos(1,1);
			QuickTool.instance.pos(LayoutRecManager.ctOffSetX+10,30);
			LayoutRecManager.layoutToPageType("page");
		}

		LayoutRecManager.resizeWork=function(e){
			LayoutRecManager._ct.x=LayoutRecManager.ctOffSetX;
			LayoutRecManager._ct.y=QuickTool.instance.y+LayoutRecManager.dToQuickTool;
			Laya.timer.once(50,null,LayoutRecManager.tryResizeNoScale,null,true);
			return;
		}

		LayoutRecManager.scaleResize=function(){
			var nW=LayerManager.stage.width-LayoutRecManager.ctOffSetX;
			var nH=LayerManager.stage.height-30+LayoutRecManager.ctOffHeight;
			if ((nW *nH *LayoutRecManager._ct.width *LayoutRecManager._ct.height)!=0){
				var scaleX=nW / LayoutRecManager._ct.width;
				var scaleY=nH / LayoutRecManager._ct.height;
				LayoutRecManager.adptScales(scaleX,scaleY);
			}
			LayoutRecManager._ct.width=LayerManager.stage.width-LayoutRecManager.ctOffSetX;
			LayoutRecManager._ct.height=LayerManager.stage.height-LayoutRecManager._ct.y+LayoutRecManager.ctOffHeight;
			Laya.timer.once(100,null,LayoutRecManager.adptAll);
		}

		LayoutRecManager.tryResizeNoScale=function(){
			var items;
			items=DisControlTool.getAllChild(LayoutRecManager._ct);
			var i=0,len=0;
			len=items.length;
			var tRec;
			var tRecHeight=0;
			var maxFree;
			for (i=0;i < len;i++){
				tRec=items[i];
				if ((tRec instanceof laya.editor.view.LayoutRec )){
					if(tRec.sizeFree){
						if(!maxFree||maxFree.height<tRec.height){
							maxFree=tRec;
						}
					}
				}
			}
			tRec=maxFree;
			if(!tRec||!tRec.sizeFree){
				LayoutRecManager.scaleResize();
				return;
				}else{
			};
			var nW=LayerManager.stage.width-LayoutRecManager.ctOffSetX;
			var nH=LayerManager.stage.height-LayoutRecManager._ct.y+LayoutRecManager.ctOffHeight;
			var pW=LayoutRecManager._ct.width;
			var pH=LayoutRecManager._ct.height;
			var dW=NaN;
			var dH=NaN;
			dW=nW-pW;
			dH=nH-pH;
			if ((nW *nH *pW *pH)!=0){
				if(dW+tRec.width<0){
					console.log("width not availeble");
					LayoutRecManager.scaleResize();
					return;
				}
				if(dH+tRec.height<0){
					console.log("height not availeble");
					LayoutRecManager.scaleResize();
					return;
				}
				}else{
				console.log("wrong size");
				LayoutRecManager.scaleResize();
				return;
			};
			var tDragBar;
			var barList;
			barList=[];
			var resizeStruct;
			resizeStruct=new ResizeRecStruct();
			var workDragBar;
			for (i=0;i < len;i++){
				tDragBar=items[i];
				if ((tDragBar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar.walked=false;
					if(tDragBar.cusorType=="e-resize"){
						if(tDragBar.x>=tRec.x+10){
							barList.push(tDragBar);
						}
					}
					if(tDragBar.type==2){
						workDragBar=tDragBar;
						switch(tDragBar.getSideType()){
							case "right":
								resizeStruct.rightSide=tDragBar;
								break ;
							case "left":
								resizeStruct.leftSide=tDragBar;
								break ;
							case "up":
								resizeStruct.upSide=tDragBar;
								break ;
							case "down":
								resizeStruct.downSide=tDragBar;
								break ;
							}
					}
				}
			}
			resizeStruct.isRoot=true;
			resizeStruct.resizeItems=[];
			resizeStruct.tryMoveRight(dW);
			barList=[];
			for (i=0;i < len;i++){
				tDragBar=items[i];
				if ((tDragBar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar.walked=false;
					if(tDragBar.cusorType=="n-resize"){
						if(tDragBar.y>=tRec.y+tRec.height||tDragBar.y+200>nH){
							barList.push(tDragBar);
							tDragBar.top+=dH;
						}
						if(tDragBar.type==2&&tDragBar.getSideType()=="down"&&tDragBar.cusorType=="n-resize"){
							workDragBar=tDragBar;
						}
					}
				}
			}
			if(workDragBar){
			}
			LayoutRecManager._ct.width=nW;
			LayoutRecManager._ct.height=nH;
			Laya.timer.once(100,null,LayoutRecManager.adptAll);
			MenuBar.instance.width=LayerManager.stage.width-2;
			QuickTool.instance.width=LayerManager.stage.width-2;
		}

		LayoutRecManager.adptDis=function(dis,scaleX,scaleY){
			dis.left *=scaleX;
			dis.right *=scaleX;
			dis.top *=scaleY;
			dis.bottom *=scaleY;
		}

		LayoutRecManager.adptScales=function(scaleX,scaleY){
			var items;
			items=DisControlTool.getAllChild(LayoutRecManager._ct);
			var i=0,len=0;
			len=items.length;
			var tDragBar;
			for (i=0;i < len;i++){
				tDragBar=items[i];
				if ((tDragBar instanceof laya.editor.comonents.LayoutDragBar )){
					LayoutRecManager.adptDis(tDragBar,scaleX,scaleY);
				}
			}
		}

		LayoutRecManager.adptAll=function(){
			var items;
			items=DisControlTool.getAllChild(LayoutRecManager._ct);
			var i=0,len=0;
			len=items.length;
			var tDragBar;
			for (i=0;i < len;i++){
				tDragBar=items[i];
				if ((tDragBar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar.updates();
				}
			}
		}

		LayoutRecManager.saveLayoutInfo=function(){
			var items;
			items=DisControlTool.getAllChild(LayoutRecManager._ct);
			var i=0,len=0;
			len=items.length;
			for (i=0;i < len;i++){
				IDTools.idObj(items[i]);
			};
			var rst=[];
			var tDis;
			for (i=0;i < len;i++){
				tDis=items[i];
				if ((tDis instanceof laya.editor.comonents.LayoutDragBar )){
					rst.push(LayoutRecManager.getInfoO(tDis));
				}
				else if ((tDis instanceof laya.editor.view.LayoutRec )){
					rst.push(LayoutRecManager.saveRecInfo(tDis));
				}
			};
			var saveO;
			saveO={};
			saveO.width=LayoutRecManager._ct.width;
			saveO.height=LayoutRecManager._ct.height;
			saveO.items=rst;
			FileManager.createTxtFile(FileManager.getDataPath(LayoutRecManager.tLayoutFile),ObjectTools.getJsonString(saveO));
		}

		LayoutRecManager.showPanelByClassName=function(className){
			if(LayoutRecManager.popLocked())return;
			LayoutRecManager.initClassToUIO();
			var tPanel;
			tPanel=LayoutRecManager.classToUIO[className];
			LayoutRecManager.showPanelToStage(tPanel);
		}

		LayoutRecManager.showPanelToStage=function(tPanel){
			if (!tPanel)
				return;
			if (LayoutRecManager.isPanelInStage(tPanel))
				return;
			var rec=new LayoutRec();
			if (tPanel.width > 0 && tPanel.height > 0 && 0){
				rec.width=tPanel.width+5;
				rec.height=tPanel.height+20;
			}
			else{
				rec.width=tPanel["minWidth"]? tPanel["minWidth"]:200;
				if(rec.width<200)rec.width=200;
				rec.height=300;
			}
			LayoutRecManager.addPanelToRec(tPanel,rec);
			DisTools.showToCenter(rec,LayerManager.stage);
		}

		LayoutRecManager.removePanel=function(tPanel){
			var rec;
			rec=LayoutRecManager.findPanelRec(tPanel);
			if(rec){
				rec.removeUI(tPanel,true);
			}
		}

		LayoutRecManager.isPanelInStage=function(panel){
			var i=0,len=0;
			var childs;
			var layouts;
			layouts=[];
			childs=DisControlTool.getAllChild(LayoutRecManager._ct);
			len=childs.length;
			for (i=0;i < len;i++){
				if (((childs[i])instanceof laya.editor.view.LayoutRec )){
					ObjectTools.concatArr(layouts,childs[i].getUIs());
				}
			}
			childs=DisControlTool.getAllChild(LayerManager.stage);
			len=childs.length;
			for (i=0;i < len;i++){
				if (((childs[i])instanceof laya.editor.view.LayoutRec )){
					ObjectTools.concatArr(layouts,childs[i].getUIs());
				}
			}
			len=layouts.length;
			for (i=0;i < len;i++){
				if (layouts[i]==panel)
					return true;
			}
			return false;
		}

		LayoutRecManager.findPanelRec=function(panel){
			var i=0,len=0;
			var childs;
			var layouts;
			layouts=[];
			childs=DisControlTool.getAllChild(LayoutRecManager._ct);
			len=childs.length;
			for (i=0;i < len;i++){
				if (((childs[i])instanceof laya.editor.view.LayoutRec )){
					if(LayoutRecManager.isPanelInRec(panel,childs[i])){
						return childs[i];
					}
				}
			}
			childs=DisControlTool.getAllChild(LayerManager.stage);
			len=childs.length;
			for (i=0;i < len;i++){
				if (((childs[i])instanceof laya.editor.view.LayoutRec )){
					if(LayoutRecManager.isPanelInRec(panel,childs[i])){
						return childs[i];
					}
				}
			}
			return null;
		}

		LayoutRecManager.isPanelInRec=function(panel,rec){
			var layouts;
			layouts=rec.getUIs();
			if(!layouts)return false;
			return layouts.indexOf(panel)>=0;
		}

		LayoutRecManager.initClassToUIO=function(){
			if (!LayoutRecManager.classToUIO){
				LayoutRecManager.classToUIO={};
				LayoutRecManager.classToUIO["ResPanel"]=ResPanel.instance;
				LayoutRecManager.classToUIO["PagePanel"]=PagePanel.instance;
				LayoutRecManager.classToUIO["UIPanel"]=UIPanel.instance;
				LayoutRecManager.classToUIO["PropPanel"]=PropPanel.instance;
				LayoutRecManager.classToUIO["DisplayTreePanel"]=DisplayTreePanel.instance;
				LayoutRecManager.classToUIO["TimeLinePanel"]=TimeLinePanel.instance;
				LayoutRecManager.classToUIO["CompPanel"]=CompPanel.instance;
				LayoutRecManager.classToUIO["FramePropPanel"]=FramePropPanel.instance;
				LayoutRecManager.classToUIO["BasicPanel"]=BasicPanel.instance;
			}
		}

		LayoutRecManager.layoutByPagePath=function(pagePath){
			LayoutRecManager.layoutToPageType(TypeManager.getFileType(pagePath));
		}

		LayoutRecManager.layoutToPageType=function(type){
			LayoutRecManager.recoverLayoutInfo(Paths.getLayoutFilePathByType(type));
		}

		LayoutRecManager.recoverLayoutInfo=function(layoutFile){
			(layoutFile===void 0)&& (layoutFile="layout/layout.config");
			if(LayoutRecManager._layoutFile==layoutFile)return;
			if(LayoutRecManager._layoutFile){
				LayoutRecManager.saveLayoutInfo();
			}
			LayoutRecManager.clearAll();
			LayoutRecManager.initClassToUIO();
			LayoutRecManager._layoutFile=layoutFile;
			var path;
			path=FileManager.getDataPath(LayoutRecManager.tLayoutFile);
			if (!FileTools.exist(path)){
				LayoutRecManager.createDefault();
				return;
			}
			LayoutRecManager.layoutByLayoutFile(path);
		}

		LayoutRecManager.layoutByLayoutFile=function(path){
			var layoutO;
			layoutO=ObjectTools.getObj(FileManager.readTxtFile(path));
			LayoutRecManager._ct.width=layoutO.width;
			LayoutRecManager._ct.height=layoutO.height;
			var itemList;
			itemList=layoutO.items;
			var i=0,len=0;
			len=itemList.length;
			var tO;
			var tDis;
			var tClass;
			var objDic={};
			for (i=0;i < len;i++){
				tO=itemList[i];
				tClass=LayoutRecManager.itemClassO[tO.className];
				if (!tClass)
					continue ;
				if (tClass==LayoutDragBar){
					var type=tO.width < tO.height ? "R" :"T";
					tDis=LayoutRecManager.getADragBar(type);
				}
				else{
					tDis=new tClass();
				}
				ObjectTools.copyValueByArr(tDis,tO,LayoutRecManager.sizeInfos);
				objDic[tO.id]=tDis;
				if ((tDis instanceof laya.editor.comonents.LayoutDragBar )){
				}
				if ((tDis instanceof laya.editor.view.LayoutRec )){
					LayoutRecManager.recoverLayoutRec(tDis,tO);
				}
				LayoutRecManager._ct.addChild(tDis);
			};
			var key;
			var tar;
			var relativeO;
			for (i=0;i < len;i++){
				tO=itemList[i];
				tDis=objDic[tO.id];
				relativeO=tO.relativeO;
				if (relativeO){
					for (key in relativeO){
						tar=objDic[relativeO[key]];
						if (tar){
							RelativePos.addRelative(tDis,tar,key);
						}
						else{
							console.log("tar not find");
						}
					}
				}
				else{
					console.log("relativeO not find");
				}
				ObjectTools.copyValueByArr(tDis,tO,LayoutRecManager.sizeInfos);
			}
			LayoutRecManager.adptAll();
			LayoutRecManager.resizeWork();
		}

		LayoutRecManager.recoverLayoutRec=function(rec,data){
			var i=0,len=0;
			var uiList;
			uiList=data.uiList;
			len=uiList.length;
			var tUI;
			for (i=0;i < len;i++){
				tUI=LayoutRecManager.classToUIO[uiList[i]];
				if (tUI){
					LayoutRecManager.addPanelToRec(tUI,rec);
				}
			}
			if(parseInt(data.select)>0){
				rec.tab.selectedIndex=data.select;
			}
			if(rec.tab.items.length<1){
				Laya.timer.once(1000,null,LayoutRecManager.removeRec,[rec]);
			}
		}

		LayoutRecManager.saveRecInfo=function(rec){
			var rst;
			rst=LayoutRecManager.getInfoO(rec);
			var uiList;
			var i=0,len=0;
			uiList=rec.tab.items;
			var saveList;
			len=uiList.length;
			var tab;
			saveList=[];
			for (i=0;i < len;i++){
				tab=uiList[i];
				saveList.push(ClassTool.getClassName(tab.ui));
			}
			rst.select=rec.tab.selectedIndex;
			rst.uiList=saveList;
			return rst;
		}

		LayoutRecManager.getInfoO=function(obj){
			var rst;
			rst={};
			ObjectTools.copyValueByArr(rst,obj,LayoutRecManager.sizeInfos);
			rst.className=ClassTool.getClassName(obj);
			rst.id=IDTools.getObjID(obj);
			rst.relativeO=RelativePos.saveRelative(obj);
			return rst;
		}

		LayoutRecManager.onDragDrop=function(e){
			if (!e.data)
				return;
			var tType;
			tType=e.data.type;
			if (tType !="LayoutRec" && tType !="LayoutTab")
				return;
			var src;
			src=e.data.target;
			if (!src)
				return;
			var hitList;
			hitList=e.hitList;
			var i=0,len=0;
			len=hitList.length;
			var tTarget;
			if (hitList.indexOf(src)>=0){
				tTarget=src;
				if (tType !="LayoutTab"){
					if (tType=="LayoutRec"){
						LayoutRecManager.popRec(src);
						return;
					}
				}
			}
			else{
				for (i=0;i < len;i++){
					tTarget=hitList[i];
					if ((tTarget instanceof laya.editor.view.LayoutRec )){
						if(RelativePos.getDisMouseRelativePos(tTarget)!="out"){
							break ;
						}
					}
				}
			}
			if (!((tTarget instanceof laya.editor.view.LayoutRec )))
				return;
			if(tTarget.parent!=LayoutRecManager._ct)return;
			if (src !=tTarget || tType=="LayoutTab"){
				var posType;
				posType=RelativePos.getDisMouseRelativePos(tTarget);
				if (tType=="LayoutRec"){
					switch (posType){
						case "up":
							LayoutRecManager.removeRec(src);
							LayoutRecManager.insetToBarV(RelativePos.getBar(tTarget,"up"),src);
							break ;
						case "down":
							LayoutRecManager.removeRec(src);
							LayoutRecManager.insertV(tTarget,src);
							break ;
						case "left":
							LayoutRecManager.removeRec(src);
							LayoutRecManager.insertL(tTarget,src);
							break ;
						case "center":
							if(src.parent==LayerManager.stage)return;
						case "right":
							LayoutRecManager.removeRec(src);
							LayoutRecManager.insert(tTarget,src);
							break ;
						default :
							return;
						}
				}
				else if (tType=="LayoutTab"){
					var tTab;
					tTab=e.dragInitiator;
					var tRec;
					tRec=tTarget;
					if (src==tTarget){
						if (src.tab.items.length <=1){
							LayoutRecManager.popRec(src);
							return;
						}
						else{
							if (posType=="center"){
								src.removeTab(tTab);
								tRec=new LayoutRec();
								tRec.pos(src.x,src.y);
								src.parent.addChild(tRec);
								tRec.addTab(tTab);
								LayoutRecManager.popRec(tRec);
								return;
							}
						}
					}
					switch (posType){
						case "down":
							src.removeTab(tTab);
							tRec=new LayoutRec();
							tRec.addTab(tTab);
							LayoutRecManager.insertV(tTarget,tRec);
							break ;
						case "right":
							src.removeTab(tTab);
							tRec=new LayoutRec();
							tRec.addTab(tTab);
							LayoutRecManager.insert(tTarget,tRec);
							break ;
						case "left":
							src.removeTab(tTab);
							tRec=new LayoutRec();
							tRec.addTab(tTab);
							LayoutRecManager.insertL(tTarget,tRec);
							break ;
						case "center":
						case "up":
							if(!tRec.canAddTab)return;
							if (src !=tRec){
								src.removeTab(tTab);
								tRec.addTab(tTab);
							}
							else{
								return;
								src.removeTab(tTab);
								tRec=new LayoutRec();
								tRec.addTab(tTab);
								LayoutRecManager.popRec(tRec);
							}
							break ;
						default :
							return;
						}
					if (src.tab.items.length < 1){
						LayoutRecManager.removeRec(src);
					}
				}
			}
		}

		LayoutRecManager.test=function(){
			var _leftBar;
			var _rightBar;
			var _upBar;
			var _downBar;
			_leftBar=LayoutRecManager.getADragBar("R");
			_leftBar.width=5;
			_leftBar.left=0;
			_leftBar.top=0;
			_leftBar.bottom=0;
			_leftBar.type=2;
			LayoutRecManager._ct.addChild(_leftBar);
			_rightBar=LayoutRecManager.getADragBar("R");
			_rightBar.width=5;
			_rightBar.right=0;
			_rightBar.top=0;
			_rightBar.bottom=0;
			_rightBar.type=2;
			LayoutRecManager._ct.addChild(_rightBar);
			_upBar=LayoutRecManager.getADragBar("T");
			_upBar.height=5;
			_upBar.left=0;
			_upBar.top=0;
			_upBar.right=0;
			_upBar.type=2;
			LayoutRecManager._ct.addChild(_upBar);
			_downBar=LayoutRecManager.getADragBar("T");
			_downBar.height=5;
			_downBar.left=0;
			_downBar.bottom=0;
			_downBar.right=0;
			_downBar.type=2;
			LayoutRecManager._ct.addChild(_downBar);
			var rec=LayoutRecManager.getARec();
			LayoutRecManager._ct.addChild(rec);
			rec.left=0;
			rec.right=0;
			rec.top=0;
			rec.bottom=0;
			RelativePos.addRelative(rec,_leftBar,"left");
			RelativePos.addRelative(rec,_rightBar,"right");
			RelativePos.addRelative(rec,_upBar,"up");
			RelativePos.addRelative(rec,_downBar,"down");
			LayoutRecManager.insert(rec,LayoutRecManager.getARec());
			var tRec;
			tRec=LayoutRecManager.getARec();
			LayoutRecManager.insertV(rec,tRec);
			LayoutRecManager.insert(tRec,LayoutRecManager.getARec());
			console.log("onlySide:",RelativePos.getOnlySide(tRec));
			LayoutRecManager.insertV(tRec,LayoutRecManager.getARec());
			console.log("onlySide:",RelativePos.getOnlySide(tRec));
		}

		LayoutRecManager.clearAll=function(){
			LayoutRecManager.clearLayoutsOfContainer(LayoutRecManager._ct);
			LayoutRecManager.clearLayoutsOfContainer(LayerManager.stage);
		}

		LayoutRecManager.clearLayoutsOfContainer=function(_ct){
			var items;
			items=DisControlTool.getAllChild(_ct);
			var i=0,len=0;
			len=items.length;
			var tDis;
			for (i=0;i < len;i++){
				tDis=items[i];
				if ((tDis instanceof laya.editor.comonents.LayoutDragBar )){
					(tDis).clears();
					tDis.removeSelf();
				}
				else if ((tDis instanceof laya.editor.view.LayoutRec )){
					(tDis).clears();
					tDis.removeSelf();
				}
			}
		}

		LayoutRecManager.createDefault=function(){
			LayoutRecManager.clearAll();
			LayoutRecManager.resizeWork();
			var path;
			path=FileManager.getAppPath("laya/tpls/default.config");
			if(FileTools.exist(path)){
				LayoutRecManager.layoutByLayoutFile(path);
				return;
			};
			var _leftBar;
			var _rightBar;
			var _upBar;
			var _downBar;
			_leftBar=LayoutRecManager.getADragBar("R");
			_leftBar.width=5;
			_leftBar.left=0;
			_leftBar.top=0;
			_leftBar.bottom=0;
			_leftBar.type=2;
			LayoutRecManager._ct.addChild(_leftBar);
			_rightBar=LayoutRecManager.getADragBar("R");
			_rightBar.width=5;
			_rightBar.right=0;
			_rightBar.top=0;
			_rightBar.bottom=0;
			_rightBar.type=2;
			LayoutRecManager._ct.addChild(_rightBar);
			_upBar=LayoutRecManager.getADragBar("T");
			_upBar.height=5;
			_upBar.left=0;
			_upBar.top=0;
			_upBar.right=0;
			_upBar.type=2;
			LayoutRecManager._ct.addChild(_upBar);
			_downBar=LayoutRecManager.getADragBar("T");
			_downBar.height=5;
			_downBar.left=0;
			_downBar.bottom=0;
			_downBar.right=0;
			_downBar.type=2;
			LayoutRecManager._ct.addChild(_downBar);
			RelativePos.addRelative(_upBar,_leftBar,"left");
			RelativePos.addRelative(_upBar,_rightBar,"right");
			RelativePos.addRelative(_downBar,_leftBar,"left");
			RelativePos.addRelative(_downBar,_rightBar,"right");
			RelativePos.addRelative(_leftBar,_upBar,"up");
			RelativePos.addRelative(_leftBar,_downBar,"down");
			RelativePos.addRelative(_rightBar,_upBar,"up");
			RelativePos.addRelative(_rightBar,_downBar,"down");
			var rec=new LayoutRec();
			LayoutRecManager._ct.addChild(rec);
			rec.left=0;
			rec.right=0;
			rec.top=0;
			rec.bottom=0;
			RelativePos.addRelative(rec,_leftBar,"left");
			RelativePos.addRelative(rec,_rightBar,"right");
			RelativePos.addRelative(rec,_upBar,"up");
			RelativePos.addRelative(rec,_downBar,"down");
			LayoutRecManager.addPanelToRec(PagePanel.instance,rec);
			var uiRec;
			uiRec=new LayoutRec();
			LayoutRecManager.insert(rec,uiRec,0.8);
			LayoutRecManager.addPanelToRec(UIPanel.instance,uiRec);
			var resRec;
			resRec=new LayoutRec();
			LayoutRecManager.insertV(rec,resRec);
			LayoutRecManager.addPanelToRec(CompPanel.instance,resRec);
			LayoutRecManager.addPanelToRec(ResPanel.instance,resRec);
			var propRec;
			propRec=new LayoutRec();
			LayoutRecManager.insert(uiRec,propRec,0.3);
			LayoutRecManager.addPanelToRec(PropPanel.instance,propRec);
			var disTreeRec;
			disTreeRec=new LayoutRec();
			LayoutRecManager.insertV(propRec,disTreeRec);
			LayoutRecManager.addPanelToRec(DisplayTreePanel.instance,disTreeRec);
		}

		LayoutRecManager.popRec=function(tar){
			if (tar.parent==LayerManager.stage)
				return;
			var point;
			point=new Point();
			point=tar.localToGlobal(point);
			point=LayerManager.stage.globalToLocal(point);
			var posInfo={};
			ObjectTools.copyValueByArr(posInfo,tar,LayoutRecManager.sizePosKeys);
			posInfo.x=point.x+DragManager.dPos.x;
			posInfo.y=point.y+DragManager.dPos.y;
			LayoutRecManager.removeRec(tar);
			DisControlTool.clearItemRelativeInfo(tar);
			LayoutRecManager.addToStageLater(tar,posInfo);
		}

		LayoutRecManager.addToStageLater=function(tar,posInfo){
			LayerManager.stage.addChild(tar);
			if(posInfo.height<200)posInfo.height=200;
			tar.x=posInfo.x-10;
			tar.y=posInfo.y-10;
			tar.width=posInfo.width+20;
			tar.height=posInfo.height+20;
		}

		LayoutRecManager.clearRelativePosition=function(tar){
			tar.top=NaN;
			tar.bottom=NaN;
			tar.left=NaN;
			tar.right=NaN;
		}

		LayoutRecManager.removeRec=function(tar){
			var onlySide;
			onlySide=RelativePos.getOnlySide(tar);
			if (!onlySide){
				console.log("无可拖动条");
				tar.removeSelf();
				RelativePos.clearBar(tar);
				return;
			};
			var onlyBar;
			onlyBar=RelativePos.getBar(tar,onlySide);
			var otherSide;
			otherSide=RelativePos.getOtherSide(onlySide);
			var otherBar;
			otherBar=RelativePos.getBar(tar,otherSide);
			if (onlyBar && otherBar){
				otherBar.mergeUpdates(onlyBar);
				onlyBar.removeSelf();
				onlyBar.clears();
				RelativePos.clearBar(onlyBar);
				tar.removeSelf();
				RelativePos.clearBar(tar);
			}
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.minRec=function(tar){
			var onlySide;
			onlySide=RelativePos.getOnlySide(tar);
			if (!onlySide)
				return;
			var onlyBar;
			onlyBar=RelativePos.getBar(tar,onlySide);
			var otherSide;
			otherSide=RelativePos.getOtherSide(onlySide);
			var otherBar;
			otherBar=RelativePos.getBar(tar,otherSide);
			if (onlyBar && otherBar){
				switch (onlySide){
					case "right":
						onlyBar.left-=tar.width-4;
						break ;
					case "left":
						onlyBar.left+=tar.width-4;
						break ;
					case "up":
						onlyBar.top+=tar.height-4;
						break ;
					case "down":
						onlyBar.top-=tar.height-4;
						break ;
					}
			}
			onlyBar.updates();
		}

		LayoutRecManager.recoverRec=function(tar){
			var onlySide;
			onlySide=RelativePos.getOnlySide(tar);
			if (!onlySide)
				return;
			var onlyBar;
			onlyBar=RelativePos.getBar(tar,onlySide);
			var otherSide;
			otherSide=RelativePos.getOtherSide(onlySide);
			var otherBar;
			otherBar=RelativePos.getBar(tar,otherSide);
			if (onlyBar && otherBar){
				switch (onlySide){
					case "right":
						onlyBar.left-=tar.width-tar.preWidth;
						break ;
					case "left":
						onlyBar.left+=tar.width-tar.preWidth;
						break ;
					case "up":
						onlyBar.top+=tar.height-tar.preHeight;
						break ;
					case "down":
						onlyBar.top-=tar.height-tar.preHeight;
						break ;
					}
			}
			onlyBar.updates();
		}

		LayoutRecManager.adptTo=function(tar){
			var onlySide;
			onlySide=RelativePos.getOnlySide(tar);
			if (!onlySide)
				return;
			var onlyBar;
			onlyBar=RelativePos.getBar(tar,onlySide);
			var otherSide;
			otherSide=RelativePos.getOtherSide(onlySide);
			var otherBar;
			otherBar=RelativePos.getBar(tar,otherSide);
			if (onlyBar && otherBar){
				switch (onlySide){
					case "right":
						onlyBar.left=tar.left+tar.width;
						break ;
					case "left":
						onlyBar.left=tar.left-onlyBar.width;
						break ;
					case "up":
						onlyBar.top=tar.top-onlyBar.height;
						break ;
					case "down":
						onlyBar.top=tar.top+tar.height;
						break ;
					}
			}
			onlyBar.updates();
		}

		LayoutRecManager.insetToBar=function(tar,insert,rate){
			(rate===void 0)&& (rate=0.4);
			var rec;
			rec=tar.getDragArea();
			rec.width=200;
			if (rec.width < 20)
				return;
			var tLen=0;
			tLen=rec.width;
			var dragBar;
			dragBar=LayoutRecManager.getADragBar("R");
			dragBar.size(5,tar.height);
			dragBar.right=tar.right;
			dragBar.left=tar.left
			dragBar.top=tar.top;
			dragBar.bottom=tar.bottom;
			dragBar.type=0;
			dragBar.mergeUpdates(tar);
			tar.clear();
			dragBar.left+=rate *tLen;
			RelativePos.clearBar(insert);
			insert.left=tar.left
			insert.top=tar.top;
			insert.bottom=tar.bottom;
			if (RelativePos.getBar(tar,"right")){
				RelativePos.copyRelative(dragBar,tar,"right");
			}
			RelativePos.addRelative(insert,tar,"left");
			RelativePos.addRelative(insert,dragBar,"right");
			RelativePos.copyRelative(insert,tar,"down");
			RelativePos.copyRelative(dragBar,tar,"down");
			RelativePos.copyRelative(insert,tar,"up");
			RelativePos.copyRelative(dragBar,tar,"up");
			LayoutRecManager._ct.addChild(dragBar);
			LayoutRecManager._ct.addChild(insert);
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.insetToBarV=function(tar,insert,rate){
			(rate===void 0)&& (rate=0.4);
			var rec;
			rec=tar.getDragArea();
			rec.height=200;
			if (rec.height < 20)
				return;
			var tLen=0;
			tLen=rec.height;
			var dragBar;
			dragBar=LayoutRecManager.getADragBar("T");
			dragBar.size(tar.width,5);
			dragBar.right=tar.right;
			dragBar.left=tar.left
			dragBar.top=tar.top;
			dragBar.bottom=tar.bottom;
			dragBar.type=1;
			dragBar.copyUpdates(tar,"up");
			dragBar.top+=rate *tLen;
			RelativePos.clearBar(insert);
			insert.right=tar.right;
			insert.left=tar.left
			insert.top=tar.top;
			insert.bottom=tar.bottom;
			if (RelativePos.getBar(tar,"down")){
				RelativePos.copyRelative(dragBar,tar,"down");
				RelativePos.cancelRelative(tar,"down");
			}
			RelativePos.addRelative(insert,tar,"up");
			RelativePos.addRelative(insert,dragBar,"down");
			RelativePos.copyRelative(insert,tar,"right");
			RelativePos.copyRelative(dragBar,tar,"right");
			RelativePos.copyRelative(insert,tar,"left");
			RelativePos.copyRelative(dragBar,tar,"left");
			LayoutRecManager._ct.addChild(dragBar);
			LayoutRecManager._ct.addChild(insert);
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.insert=function(tar,insert,rate){
			(rate===void 0)&& (rate=0.4);
			var tLen=0;
			tLen=tar.width;
			insert.right=tar.right;
			tar.right+=tLen *rate;
			insert.left=tar.x+tar.width;
			insert.top=tar.top;
			insert.bottom=tar.bottom;
			var dragBar;
			dragBar=LayoutRecManager.getADragBar("R");
			dragBar.size(5,tar.height);
			dragBar.left=tar.x+tar.width;
			dragBar.top=tar.top;
			dragBar.bottom=tar.bottom;
			if (RelativePos.getBar(tar,"right")){
				RelativePos.copyRelative(insert,tar,"right");
				RelativePos.cancelRelative(tar,"right");
			}
			RelativePos.addRelative(tar,dragBar,"right");
			RelativePos.addRelative(insert,dragBar,"left");
			RelativePos.copyRelative(insert,tar,"down");
			RelativePos.copyRelative(dragBar,tar,"down");
			RelativePos.copyRelative(insert,tar,"up");
			RelativePos.copyRelative(dragBar,tar,"up");
			tar.parent.addChild(dragBar);
			tar.parent.addChild(insert);
			DisControlTool.setTop(dragBar);
			dragBar.type=0;
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.insertL=function(tar,insert,rate){
			(rate===void 0)&& (rate=0.4);
			var tLen=0;
			tLen=tar.width;
			insert.right=tar.right;
			insert.left=tar.left;
			tar.left+=tLen *rate;
			insert.top=tar.top;
			insert.bottom=tar.bottom;
			var dragBar;
			dragBar=LayoutRecManager.getADragBar("R");
			dragBar.size(5,tar.height);
			dragBar.left=tar.x;
			dragBar.top=tar.top;
			dragBar.bottom=tar.bottom;
			if (RelativePos.getBar(tar,"left")){
				RelativePos.copyRelative(insert,tar,"left");
				RelativePos.cancelRelative(tar,"left");
			}
			RelativePos.addRelative(tar,dragBar,"left");
			RelativePos.addRelative(insert,dragBar,"right");
			RelativePos.copyRelative(insert,tar,"down");
			RelativePos.copyRelative(dragBar,tar,"down");
			RelativePos.copyRelative(insert,tar,"up");
			RelativePos.copyRelative(dragBar,tar,"up");
			tar.parent.addChild(dragBar);
			tar.parent.addChild(insert);
			DisControlTool.setTop(dragBar);
			dragBar.type=0;
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.insertV=function(tar,insert,rate){
			(rate===void 0)&& (rate=0.4);
			if(tar.height<150){
				var downBar;
				downBar=RelativePos.getBar(tar,"down");
				if(downBar.type!=2){
					LayoutRecManager.insetToBarV(downBar,insert);
					return;
				}
			};
			var tLen=0;
			tLen=tar.height;
			insert.right=tar.right;
			insert.bottom=tar.bottom;
			tar.bottom+=tLen *rate;
			insert.left=tar.left;
			insert.top=tar.y+tar.height;
			var dragBar;
			dragBar=LayoutRecManager.getADragBar("T");
			dragBar.size(tar.width,5);
			dragBar.left=tar.x;
			dragBar.top=tar.y+tar.height;
			if (RelativePos.getBar(tar,"down")){
				RelativePos.copyRelative(insert,tar,"down");
				RelativePos.cancelRelative(tar,"down");
			}
			RelativePos.addRelative(tar,dragBar,"down");
			RelativePos.addRelative(insert,dragBar,"up");
			RelativePos.copyRelative(insert,tar,"right");
			RelativePos.copyRelative(dragBar,tar,"right");
			RelativePos.copyRelative(insert,tar,"left");
			RelativePos.copyRelative(dragBar,tar,"left");
			tar.parent.addChild(dragBar);
			tar.parent.addChild(insert);
			DisControlTool.setTop(dragBar);
			dragBar.type=1;
			LayoutRecManager.adptAll();
		}

		LayoutRecManager.getADragBar=function(type){
			var dragBar=new LayoutDragBar(type);
			dragBar.on("mousedown",null,LayoutRecManager.onMouseDown);
			return dragBar;
		}

		LayoutRecManager.addPanelToRec=function(panel,rec){
			panel.top=20;
			panel.left=0;
			panel.right=0;
			panel.bottom=0;
			rec.addUI(panel);
		}

		LayoutRecManager.getARec=function(){
			var rec=new LayoutRec();
			rec.addUI(LayoutRecManager.getAUI("#ff00ff"));
			rec.addUI(LayoutRecManager.getAUI("#ff000f"));
			return rec;
		}

		LayoutRecManager.getAUI=function(color){
			(color===void 0)&& (color="#ff00ff");
			var box=new Box();
			box.graphics.drawRect(0,0,20,20,color);
			box.width=20;
			box.height=20;
			box.left=5;
			box.right=5;
			box["title"]="tt:"+Math.ceil(Math.random()*10);
			return box;
		}

		LayoutRecManager.target=null
		LayoutRecManager.Side=2;
		LayoutRecManager.Vertical=1;
		LayoutRecManager.Horizon=0;
		LayoutRecManager._ct=null
		LayoutRecManager.ctOffSetX=47;
		LayoutRecManager.dToQuickTool=32;
		LayoutRecManager.ctOffHeight=5;
		LayoutRecManager.classToUIO=null
		LayoutRecManager._layoutFile=null;
		LayoutRecManager.minRecLen=4;
		LayoutRecManager.DragBarWidth=5;
		__static(LayoutRecManager,
		['itemClassO',function(){return this.itemClassO={"LayoutDragBar":LayoutDragBar,"LayoutRec":LayoutRec};},'sizeInfos',function(){return this.sizeInfos=["height","width","left","right","bottom","top","x","y","type"];},'sizePosKeys',function(){return this.sizePosKeys=["x","y","width","height"];},'emptyLayoutO',function(){return this.emptyLayoutO={"top":NaN,"bottom":NaN,"left":NaN,"right":NaN};}
		]);
		return LayoutRecManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-4-6 上午10:07:48
	*/
	//class laya.ide.managers.NodeAtlasManager
	var NodeAtlasManager=(function(){
		function NodeAtlasManager(){}
		__class(NodeAtlasManager,'laya.ide.managers.NodeAtlasManager');
		NodeAtlasManager.getNodeAtlas=function(node){
			var type;
			type=node.type;
			if(!type)return null;
			if(NodeAtlasManager.isTextType(type)){
				return "TextAtlas";
			}
			if(!node.props)return null;
			var skinLabel;
			skinLabel=UIConfigManager.getCompSkinLabel(type);
			if(!skinLabel)return null;
			return node.props[skinLabel];
		}

		NodeAtlasManager.isTextType=function(type){
			return NodeAtlasManager._txtTypeDic[type];
		}

		NodeAtlasManager.getSkinPathColor=function(path){
			if(!path)return null;
			var folder;
			folder=FileTools.getFolder(path);
			if(!NodeAtlasManager._colorDic[folder]){
				NodeAtlasManager._index++;
				NodeAtlasManager._index=NodeAtlasManager._index%NodeAtlasManager._colors.length;
				NodeAtlasManager._colorDic[folder]=NodeAtlasManager._colors[NodeAtlasManager._index];
			}
			return NodeAtlasManager._colorDic[folder];
		}

		NodeAtlasManager.getNodeAtlasColor=function(node){
			return NodeAtlasManager.getSkinPathColor(NodeAtlasManager.getNodeAtlas(node));
		}

		NodeAtlasManager._colorDic={};
		NodeAtlasManager._index=0;
		__static(NodeAtlasManager,
		['_txtTypeDic',function(){return this._txtTypeDic={"Text":true,"Label":true,"TextArea":true};},'_colors',function(){return this._colors=["#FFFF00","#FF8247","#EE82EE","#CD00CD","#C6E2FF","#A52A2A","#9ACD32","#8B4513","#76EE00","#0000CD","#2E8B57"];}
		]);
		return NodeAtlasManager;
	})()


	/**
	*本类集中初始化各个模块监听的消息
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-26 上午10:39:45
	*/
	//class laya.ide.managers.NoticeRouter
	var NoticeRouter=(function(){
		function NoticeRouter(){}
		__class(NoticeRouter,'laya.ide.managers.NoticeRouter');
		NoticeRouter.init=function(){
			NoticeRouter._initsList=[];
			NoticeRouter._initsList.push(AddDocument.instance);
			NoticeRouter._initsList.push(AddAnimation.instance);
			NoticeRouter._initsList.push(PagePanel.instance);
			NoticeRouter._initsList.push(UIPanel.instance);
			NoticeRouter._initsList.push(ResPanel.instance);
			NoticeRouter._initsList.push(AddDirectory.instance);
			NoticeRouter._initsList.push(MovePage.instance);
			NoticeRouter._initsList.push(RenamePage.instance);
			NoticeRouter._initsList.push(SetPageProp.instance);
			NoticeRouter._initsList.push(PropPanel.instance);
			NoticeRouter._initsList.push(DisplayTreePanel.instance);
			NoticeRouter._initsList.push(FindAndReplace.instance);
			NoticeRouter._initsList.push(FramePropPanel.instance);
			NoticeRouter._initsList.push(LangPanel.instance);
			NoticeRouter._initsList.push(SetIDE.instance);
			NoticeRouter._initsList.push(BasicPanel.instance);
			var i=0,len=NoticeRouter._initsList.length;
			for (i=0;i < len;i++){
				NoticeRouter._initsList[i].initListener();
			}
			Laya.stage.on("keydown",null,NoticeRouter.onKeyDown);
		}

		NoticeRouter.onKeyDown=function(e){
			if(!e.ctrlKey)return;
			switch(e.keyCode){
				case 73:
					Notice$1.notify("OPEN_ADD_TIMELINE_ANIMATION");
					return;
				case 77:
					IDELangManager.testSwitch();
					return;
				}
		}

		NoticeRouter._initsList=null
		return NoticeRouter;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-10 上午10:56:47
	*/
	//class laya.ide.managers.PluginManager
	var PluginManager=(function(){
		function PluginManager(){
			PluginPanel;
		}

		__class(PluginManager,'laya.ide.managers.PluginManager');
		var __proto=PluginManager.prototype;
		__proto.loadPlugins=function(){
			var config;
			var configPath;
			configPath=Paths.getPluginPath("plugin.cfg");
			if(FileTools.exist(configPath)){
				try{
					config=FileManager.readJSONFile(configPath);
					}catch(e){
				}
			}
			if(config){
				this.loadPluginsByConfig(config);
			}
		}

		__proto.loadPluginsByConfig=function(config){
			var pluginList;
			pluginList=config["plugins"];
			var i=0,len=0;
			len=pluginList.length;
			for(i=0;i<len;i++){
				this.loadPlugin(pluginList[i]);
			}
		}

		__proto.loadPlugin=function(plugin){
			var pluginPath;
			pluginPath=Paths.getPluginPath(plugin);
			if(!FileTools.exist(pluginPath)){
				console.log("plugin not find:",plugin);
				return;
			};
			var pluginConfig;
			try{
				pluginConfig=FileManager.readJSONFile(FileManager.getPath(pluginPath,"config.cfg"));
				}catch(e){
			}
			if(!pluginConfig){
				console.log("pluginConfig not find:",plugin);
				return;
			};
			var codes;
			codes=pluginConfig.codes;
			var i=0,len=0;
			len=codes.length;
			for(i=0;i<len;i++){
				this.loadPluginCodes(codes[i],pluginPath);
			}
			if(pluginConfig["menus"]){
				PluginManager.regMenus(pluginConfig["menus"]);
			}
		}

		__proto.loadPluginCodes=function(codeO,pluginPath){
			var hasUI=false;
			var htmlSp;
			var uiFile;
			var jsFile;
			if(codeO["ui"]){
				uiFile=FileManager.readTxtFile(FileManager.getPath(pluginPath,codeO["ui"]));
				hasUI=true;
			}
			if(codeO["code"]){
				jsFile=FileManager.readTxtFile(FileManager.getPath(pluginPath,codeO["code"]));
				eval(jsFile);
			};
			var plugin;
			if(codeO["class"]){
				var clz;
				var clzStr;
				clzStr=codeO["class"];
				clz=eval(clzStr);
				if(clz){
					plugin=new clz();
				}
			}
			if(!plugin)return;
			if(hasUI){
				htmlSp=new JSPlugin();
				htmlSp.setHtmlTxt(uiFile);
				htmlSp.title=codeO["title"];
			}
			if(codeO["isPanel"]){
				if(htmlSp){
					plugin.setUI(htmlSp);
					}else{
					plugin.title=codeO["title"];
					plugin.canClose=true;
				}
				}else{
				if(codeO["isDialog"]){
					var dialog;
					if(htmlSp){
						dialog=new PluginDialog();
						if(plugin.width&&plugin.height){
							htmlSp.size(plugin.width,plugin.height);
						}
						dialog.setHtmlContent(htmlSp);
						plugin.setUI(dialog);
						}else{
						dialog=plugin;
					}
					dialog.setTitle(codeO["title"]);
				}
			}
		}

		PluginManager.regMenus=function(menuList){
			var i=0,len=0;
			len=menuList.length;
			for(i=0;i<len;i++){
				var tMenuO;
				tMenuO=menuList[i];
				MenuBar.registButton("layaToolsMenu",tMenuO["title"],tMenuO["notice"]);
			}
		}

		__static(PluginManager,
		['I',function(){return this.I=new PluginManager();}
		]);
		return PluginManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-3-5 上午11:00:22
	*/
	//class laya.ide.managers.RenderManager
	var RenderManager=(function(){
		function RenderManager(){
			this.param=null;
			this.initors=[];
		}

		__class(RenderManager,'laya.ide.managers.RenderManager');
		var __proto=RenderManager.prototype;
		__proto.initCustomUIConfig=function(path){
			var bPath;
			bPath=FileManager.getAppPath(path);
			if(!FileTools.exist(bPath))return;
			var fileList;
			fileList=FileTools.getDirFiles(bPath);
			var i=0,len=0;
			len=fileList.length;
			var tFile;
			for(i=0;i<len;i++){
				tFile=fileList[i];
				if(tFile.indexOf(".xml")>=0){
					this.addCustomUIConfig(FileTools.getPath(bPath,tFile));
				}
			}
		}

		__proto.addCustomUIConfig=function(path){
			var jsFile;
			jsFile=path.replace(".xml",".js");
			var xmlFile;
			xmlFile=FileTools.readFile(path);
			var xml;
			xml=Utils.parseXMLFromString(xmlFile);
			var obj;
			obj=XML2Object.parse(xml);
			UIConfigManager.addNewConfig(obj.c.uiComp.c);
			if(!FileTools.exist(jsFile))return;
			var jsStrs;
			jsStrs=FileTools.readFile(jsFile);
			var tempscript=Browser.document.createElement("script");
			tempscript.innerHTML=jsStrs;
			Browser.document.body.appendChild(tempscript);
			var me=this;
			var initor;
			initor=laya.ide.Initiator;
			if(initor){
				me.initors.push(initor);
			}
			this.setRenderPropByFont(null);
		}

		__proto.setRenderProp=function(param){
			var i=0,len=0;
			len=this.initors.length;
			var initor;
			for(i=0;i<len;i++){
				initor=this.initors[i];
				if(initor&&initor["init"]){
					initor["init"](param);
				}
			}
		}

		__proto.setRenderPropByFont=function(font){
			if(!this.param){
				this.param={};
				this.param.createComp=UIView.createCompS;
			}
			if(font&&font.length>0){
				this.param.font=font;
				}else{
				delete this.param["font"];
			}
			this.setRenderProp(this.param);
		}

		__proto.initRenders=function(){
			this.initCustomUIConfig("renders/");
			this.initCustomUIConfig("renders/"+"/custom");
			this.setRenderPropByFont(null);
		}

		RenderManager.addXMLConfig=function(path){
			var xmlFile;
			xmlFile=FileTools.readFile(path);
			var xml;
			xml=XMLElement.parseXmlFromString(xmlFile);
			var obj;
			obj=XML2ObjectNodejs.parse(xml);
			UIConfigManager.addNewConfig(obj.c.uiComp.c);
		}

		__static(RenderManager,
		['I',function(){return this.I=new RenderManager();}
		]);
		return RenderManager;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.managers.ResFileManager
	var ResFileManager=(function(){
		function ResFileManager(){}
		__class(ResFileManager,'laya.ide.managers.ResFileManager');
		ResFileManager.setPath=function(path){
			if(ResFileManager._oldGetRes==null){
			}
			if(!FileTools.exist(path))return;
			ResFileManager._prePath=path;
			ResFileManager.basePath=FileTools.getAbsPath(path);
			if (SystemSetting.isCMDVer)return;
			if(!ResFileManager._watcher){
				ResFileManager._watcher=new DirWatcherNew();
			}
			ResFileManager._watcher.setPath(path);
			ResFileManager.getAllResFiles(path);
			Notice$1.listen("RESFILE_CHANGE",null,ResFileManager.resFileChange,null,true);
		}

		ResFileManager.resFileChange=function(file){
			if(!file)return;
			if(!FileTools.exist(file))return;
			if(FontLoader.isFontFile(file)){
				file=FileTools.getAbsPath(file);
				if(!FontLoader.isOkFont(file))return;
				var tdata;
				tdata=FontLoader.getFontLoaderItem(file);
				ResFileManager.clearRes(tdata.url);
				Laya.loader.load([tdata],new Handler(null,ResFileManager.resLoaded));
				return;
			}
			if(!ResFileManager.isResFile(file))return;
			file=FileTools.getAbsPath(file);
			ResFileManager.clearRes(file);
			Laya.loader.load([file],new Handler(null,ResFileManager.resLoaded));
		}

		ResFileManager.clearPreLoadRes=function(){
			var i=0,len=0;
			len=ResFileManager.preLoadList.length;
			for(i=0;i<len;i++){
				ResFileManager.clearRes(ResFileManager.preLoadList[i]);
			}
			ResFileManager.preLoadList.length=0;
		}

		ResFileManager.getAllResFiles=function(path){
			ResFileManager.clearPreLoadRes();
			path=path?path:ResFileManager._prePath;
			if(!FileTools.exist(path))return;
			var arr;
			arr=FileTools.getFileList(path);
			var i=0,len=0;
			len=arr.length;
			var loadList;
			loadList=[];
			for(i=0;i<len;i++){
				if (ResFileManager.isResFile(arr[i])){
					if(ResFileManager.enableBinaryPic)continue ;
					arr[i]=FileTools.getAbsPath(arr[i]);
					ResFileManager.clearRes(arr[i]);
					loadList.push(arr[i]);
					ResFileManager.preLoadList.push(arr[i]);
				}
				if(FontLoader.isFontFile(arr[i])){
					arr[i]=FileTools.getAbsPath(arr[i]);
					if(!FontLoader.isOkFont(arr[i]))continue ;
					var tdata;
					tdata=FontLoader.getFontLoaderItem(arr[i]);
					ResFileManager.clearRes(tdata.url);
					loadList.push(tdata);
					ResFileManager.preLoadList.push(arr[i]);
				}
			}
			if(loadList.length<1){
				ResFileManager.resLoaded();
				return;
			}
			Laya.loader.load(loadList,new Handler(null,ResFileManager.resLoaded));
		}

		ResFileManager.getAllResFileList=function(path){
			path=path?path:ResFileManager._prePath;
			if(!FileTools.exist(path))return [];
			var arr;
			arr=FileTools.getFileList(path);
			var i=0,len=0;
			len=arr.length;
			var loadList;
			loadList=[];
			for(i=0;i<len;i++){
				if (ResFileManager.isResFile(arr[i])){
					loadList.push(arr[i]);
				}
			}
			return loadList;
		}

		ResFileManager.getAllResLinkList=function(path){
			path=path?path:ResFileManager._prePath;
			var resList;
			resList=ResFileManager.getAllResFileList(path);
			var i=0,len=0;
			var rst;
			rst=[];
			len=resList.length;
			for(i=0;i<len;i++){
				rst.push(FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.assetsPath,resList[i])));
			}
			return rst;
		}

		ResFileManager.getAllUnPackLinkList=function(path){
			path=path?path:ResFileManager._prePath;
			path=path?path:ResFileManager._prePath;
			var resList;
			resList=ResFileManager.getAllResFileList(path);
			var i=0,len=0;
			var rst;
			rst=[];
			len=resList.length;
			var compStr;
			for(i=0;i<len;i++){
				compStr=FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.assetsPath,resList[i]));
				if(!ResStyleManager.getFinalPackResult(compStr,ResPanel.isPackRes(compStr)||compStr.indexOf(".")<=0)){
					rst.push(compStr);
				}
			}
			return rst;
		}

		ResFileManager.resLoaded=function(){
			console.log("resLoaded");
			if(ResFileManager.resLoadCompleteHandler){
				ResFileManager.resLoadCompleteHandler.run();
				ResFileManager.resLoadCompleteHandler=null;
			}
			ResFileManager.clearePreResWorkLater();
		}

		ResFileManager.isResFile=function(path){
			if (FileTools.isDirectory(path))return false;
			var exName;
			exName=FileTools.getExtensionName(path);
			if (exName=="png" || exName=="jpg")return true;
			return false;
		}

		ResFileManager.clearRes=function(url){
			var fmtUrl;
			fmtUrl=ResFileManager.formatURL(url);
			ResFileManager.clearLoaderRes(fmtUrl);
		}

		ResFileManager.clearLoaderRes=function(url){
			url=URL.formatURL(url);
			var res=Loader.loadedMap[url];
			delete Loader.loadedMap[url];
			if ((res instanceof laya.resource.Texture )){
				ResFileManager.preClearRess.push(res);
			}
			Laya.timer.clear(null,ResFileManager.clearPreResWork);
		}

		ResFileManager.clearPreResWork=function(){
			console.log("clearTextures");
			var i=0,len=0;
			len=ResFileManager.preClearRess.length;
			for(i=0;i<len;i++){
				(ResFileManager.preClearRess [i]).destroy();
			}
			ResFileManager.preClearRess.length=0;
		}

		ResFileManager.clearePreResWorkLater=function(){
			Laya.timer.once(6*1000,null,ResFileManager.clearPreResWork);
		}

		ResFileManager.getRes=function(url){
			var rst;
			var apPath;
			apPath=ResFileManager.formatURL(url);
			rst=BinaryPicTools.getRes(apPath);
			if(rst)return rst;
			rst=ResFileManager.oldGetRes(ResFileManager.formatURL(url));
			if(!rst){
				rst=ResFileManager.oldGetRes("comp/loseskin.png");
			}
			return rst;
			return ResFileManager.oldGetRes(ResFileManager.formatURL(url));
		}

		ResFileManager.hookGetRes=function(url){
			var o;
			o=ResFileManager.hookGetRes;
			if(Loader.loadedMap[URL.formatURL(url)]||o["caller"]==Laya.loader.load)return Loader.loadedMap[URL.formatURL(url)];
			return ResFileManager.getRes(url);
		}

		ResFileManager.oldGetRes=function(url){
			if(ResFileManager._oldGetRes!=null)return ResFileManager._oldGetRes(url);
			return Loader.getRes(url);
		}

		ResFileManager.hookLoaderLoad=function(){}
		ResFileManager.hasRes=function(url){
			if(ResFileManager.enableBinaryPic){
				return ResFileManager.getRes(url);
			}
			if(Loader.getRes(ResFileManager.formatURL(url)))return true;
			return false;
		}

		ResFileManager.cacheRes=function(url,data){
			Loader.cacheRes(ResFileManager.formatURL(url),data);
		}

		ResFileManager.formatURL=function(url){
			if (!url)return url;
			if(FileTools.isAbsPath(url))return url;
			var rst;
			rst=(url.indexOf(":/")> 0)?url:ResFileManager.basePath+FileTools.path.sep+FileManager.adptToLocalUrl(url);
			return rst;
		}

		ResFileManager.adptToCommonUrl=function(url){
			return FileManager.adptToCommonUrl(url);
		}

		ResFileManager.getIDEResPath=function(url){
			return FileTools.getAbsPath(FileManager.getPath(SystemSetting.assetsPath,url));
		}

		ResFileManager.getIDEPagePath=function(url){
			return FileTools.getAbsPath(FileManager.getPath(SystemSetting.pagesPath,url));
		}

		ResFileManager.getIDECompIconPath=function(iconSign){
			return FileTools.getAbsPath(FileManager.getAppPath("laya/icons/components/"+iconSign+".png"));
		}

		ResFileManager._prePath=null
		ResFileManager._watcher=null
		ResFileManager.preLoadList=[];
		ResFileManager.enableBinaryPic=true;
		ResFileManager.resLoadCompleteHandler=null
		ResFileManager.preClearRess=[];
		ResFileManager._oldGetRes=null
		ResFileManager.basePath="";
		return ResFileManager;
	})()


	/**
	*本类用于调整对象的宽高以及坐标
	*@author ww
	*/
	//class laya.ide.managers.resizer.DisResizer
	var DisResizer$1=(function(){
		function DisResizer(){}
		__class(DisResizer,'laya.ide.managers.resizer.DisResizer',null,'DisResizer$1');
		DisResizer.init=function(){
			if (DisResizer._up)return;
			DisResizer._up=new AutoFillRec$1("T");
			DisResizer._up.height=2;
			DisResizer._up.type=0;
			DisResizer._down=new AutoFillRec$1("T");
			DisResizer._down.height=2;
			DisResizer._down.type=0;
			DisResizer._left=new AutoFillRec$1("R");
			DisResizer._left.width=2;
			DisResizer._left.type=1;
			DisResizer._right=new AutoFillRec$1("R");
			DisResizer._right.width=2;
			DisResizer._right.type=1;
			DisResizer._barList=[DisResizer._up,DisResizer._down,DisResizer._left,DisResizer._right];
			DisResizer.addEvent();
		}

		DisResizer.stageDown=function(e){
			var target;
			target=e.target;
			if (DisResizer._tar && DisControlTool.isInTree(DisResizer._tar,target)){
				return;
			}
			DisResizer.clear();
		}

		DisResizer.clear=function(){
			DisResizer._tar=null;
			Laya.stage.off("mouseup",null,DisResizer.stageDown);
			DisControlTool.removeItems(DisResizer._barList);
			DisResizer.clearDragEvents();
		}

		DisResizer.addEvent=function(){
			var i=0,len=0;
			var tBar;
			len=DisResizer._barList.length;
			for (i=0;i < len;i++){
				tBar=DisResizer._barList[i];
				tBar.on("mousedown",null,DisResizer.barDown);
			}
		}

		DisResizer.barDown=function(e){
			DisResizer.clearDragEvents();
			DisResizer.tBar=e.target;
			if (!DisResizer.tBar)return;
			var area;
			area=new Rectangle();
			if (DisResizer.tBar.type==0){
				area.x=DisResizer.tBar.x;
				area.width=0;
				area.y=DisResizer.tBar.y-200;
				area.height=400;
				}else{
				area.x=DisResizer.tBar.x-200;
				area.width=400;
				area.y=0;
				area.height=0;
			};
			var option;
			option={};
			option.area=area;
			DisResizer.tBar.record();
			DisResizer.tBar.startDrag(area);
			DisResizer.tBar.on("dragmove",null,DisResizer.draging);
			DisResizer.tBar.on("dragend",null,DisResizer.dragEnd);
		}

		DisResizer.draging=function(e){
			if (!DisResizer.tBar)return;
			if (!DisResizer._tar)return;
			switch(DisResizer.tBar){
				case DisResizer._left:
					DisResizer._tar.x+=DisResizer.tBar.getDx();
					DisResizer._tar.width-=DisResizer.tBar.getDx();
					DisResizer._up.width-=DisResizer.tBar.getDx();
					DisResizer._down.width-=DisResizer.tBar.getDx();
					DisResizer._right.x-=DisResizer.tBar.getDx();
					DisResizer.tBar.x-=DisResizer.tBar.getDx();
					break ;
				case DisResizer._right:
					DisResizer._tar.width+=DisResizer.tBar.getDx();
					DisResizer._up.width+=DisResizer.tBar.getDx();
					DisResizer._down.width+=DisResizer.tBar.getDx();
					break ;
				case DisResizer._up:
					DisResizer._tar.y+=DisResizer.tBar.getDy();
					DisResizer._tar.height-=DisResizer.tBar.getDy();
					DisResizer._right.height-=DisResizer.tBar.getDy();
					DisResizer._left.height-=DisResizer.tBar.getDy();
					DisResizer._down.y-=DisResizer.tBar.getDy();
					DisResizer.tBar.y-=DisResizer.tBar.getDy();
					break ;
				case DisResizer._down:
					DisResizer._tar.height+=DisResizer.tBar.getDy();
					DisResizer._right.height+=DisResizer.tBar.getDy();
					DisResizer._left.height+=DisResizer.tBar.getDy();
					break ;
				}
			DisResizer.tBar.record();
		}

		DisResizer.dragEnd=function(e){
			DisResizer.clearDragEvents();
			DisResizer.updates();
		}

		DisResizer.clearDragEvents=function(){
			if (!DisResizer.tBar)return;
			DisResizer.tBar.off("dragmove",null,DisResizer.draging);
			DisResizer.tBar.off("dragend",null,DisResizer.dragEnd);
		}

		DisResizer.setUp=function(dis,force){
			(force===void 0)&& (force=false);
			if (force && dis==DisResizer._tar){
				return;
			};
			DisControlTool.removeItems(DisResizer._barList);
			if (DisResizer._tar==dis){
				DisResizer._tar=null;
				DisResizer.clearDragEvents();
				if(!force)
					return;
			}
			DisResizer._tar=dis;
			DisResizer.updates();
			DisControlTool.addItems(DisResizer._barList,dis);
			Laya.stage.off("mouseup",null,DisResizer.stageDown);
			Laya.stage.on("mouseup",null,DisResizer.stageDown);
		}

		DisResizer.updates=function(){
			var dis;
			dis=DisResizer._tar;
			if(!dis)return;
			var bounds;
			bounds=new Rectangle(0,0,dis.width,dis.height);
			DisResizer._up.x=bounds.x;
			DisResizer._up.y=bounds.y;
			DisResizer._up.width=bounds.width;
			DisResizer._down.x=bounds.x;
			DisResizer._down.y=bounds.y+bounds.height-2;
			DisResizer._down.width=bounds.width;
			DisResizer._left.x=bounds.x;
			DisResizer._left.y=bounds.y;
			DisResizer._left.height=bounds.height;
			DisResizer._right.x=bounds.x+bounds.width-2;
			DisResizer._right.y=bounds.y;
			DisResizer._right.height=bounds.height;
		}

		DisResizer._up=null
		DisResizer._down=null
		DisResizer._left=null
		DisResizer._right=null
		DisResizer._barList=null
		DisResizer._tar=null
		DisResizer.barWidth=2;
		DisResizer.useGetBounds=false;
		DisResizer.tBar=null
		return DisResizer;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-21 下午7:53:19
	*/
	//class laya.ide.managers.SceneManager
	var SceneManager=(function(){
		function SceneManager(){}
		__class(SceneManager,'laya.ide.managers.SceneManager');
		SceneManager.init=function(){
			SceneManager.sceneO["PARTICLE"]=new ParticleScene();
		}

		SceneManager.changeTo=function(scene){
			if(!SceneManager.sceneO[scene])return;
			SceneManager.tScene=SceneManager.sceneO[scene];
			SceneManager.tScene.setUp();
		}

		SceneManager.save=function(){
			if(SceneManager.tScene){
				SceneManager.tScene.save();
			}
		}

		SceneManager.open=function(){
			if(SceneManager.tScene){
				SceneManager.tScene.open();
			}
		}

		SceneManager.PARTICLE="PARTICLE";
		SceneManager.sceneO={};
		SceneManager.tScene=null
		return SceneManager;
	})()


	/**
	*历史状态管理类
	*@author ww
	*/
	//class laya.ide.managers.state.State
	var State=(function(){
		function State(){
			this._stateList=[];
			this._tI=-1;
		}

		__class(State,'laya.ide.managers.state.State');
		var __proto=State.prototype;
		/**
		*添加状态 ，直接使用传入的状态值
		*@param data
		*
		*/
		__proto.add=function(data){
			this.traceState();
			if(this._tI!=this._stateList.length-1){
				this._stateList.length=this._tI+1;
			}
			this._stateList.push(data);
			this._tI=this._stateList.length-1;
			this.traceState();
		}

		__proto.traceState=function(){}
		/**
		*添加状态 ，会拷贝一个副本数据存入
		*@param data
		*
		*/
		__proto.addE=function(data){
			this.add(ObjectTools.copyObj(data));
		}

		/**
		*获取当前状态
		*@return
		*
		*/
		__proto.now=function(){
			return ObjectTools.copyObj(this._stateList[this._tI]);
		}

		/**
		*向后回退
		*@return
		*
		*/
		__proto.back=function(){
			if(this._tI<=0)return null;
			this._tI--;
			this.traceState();
			return this.now();
		}

		/**
		*向前重做
		*@return
		*
		*/
		__proto.forward=function(){
			if(this._tI>=this._stateList.length-1)return null;
			this._tI++;
			this.traceState();
			return this.now();
		}

		return State;
	})()


	/**
	*状态管理类
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-22 下午7:45:51
	*/
	//class laya.ide.managers.StateManager
	var StateManager=(function(){
		function StateManager(){}
		__class(StateManager,'laya.ide.managers.StateManager');
		StateManager.has=function(sign){
			return StateManager._stateDic.hasOwnProperty(sign);
		}

		StateManager.getState=function(sign){
			if(!StateManager._stateDic[sign])StateManager._stateDic[sign]=new State();
			return StateManager._stateDic[sign];
		}

		StateManager.updateState=function(sign,data){
			StateManager.setChangeState(sign,StateManager.has(sign));
			StateManager.getState(sign).addE(data);
		}

		StateManager.removeState=function(sign){
			delete StateManager._stateDic[sign];
		}

		StateManager.hasChange=function(sign){
			return StateManager._changeDic[sign];
		}

		StateManager.setChangeState=function(sign,changed){
			StateManager._changeDic[sign]=changed;
		}

		StateManager._stateDic={};
		StateManager._changeDic={};
		return StateManager;
	})()


	/**
	*本地文件日志类
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-2 上午9:14:31
	*/
	//class laya.ide.managers.SysLog
	var SysLog=(function(){
		function SysLog(){}
		__class(SysLog,'laya.ide.managers.SysLog');
		/**
		*表示是否捕获全局错误并弹出提示。
		*/
		__getset(1,SysLog,'logGlobalError',null,function(value){
			var erralert=0;
			if (value){
				Browser.window.onerror=function (msg,url,line,column,detail){
					if (erralert++< 5 && detail)
						SysLog.log(Sys.lang("出错啦，请把此信息截图给研发商\n")+msg+"\n"+detail.stack,"GlobalError");
				}
				}else {
				Browser.window.onerror=null;
			}
		});

		SysLog.log=function(msg,type){
			(type===void 0)&& (type="log");
			var str;
			str=(new Date()).toString()+":"+type+":"+msg;
			console.log(str);
			if(SysLog.fileLogEnabled){
				FileTools.appendFile(FileManager.getDataPath("log.txt"),"\n"+str);
			}
		}

		SysLog.fileLogEnabled=true;
		return SysLog;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.ide.managers.SystemDragOverManager
	var SystemDragOverManager=(function(){
		function SystemDragOverManager(){}
		__class(SystemDragOverManager,'laya.ide.managers.SystemDragOverManager');
		SystemDragOverManager.init=function(){
			var canvas=Render.canvas;
			Browser.container.ondrop=SystemDragOverManager.dragDrop;
			Browser.container.ondragover=SystemDragOverManager.dragOver;
		}

		SystemDragOverManager.dragOver=function(e){
			e.preventDefault();
		}

		SystemDragOverManager.dragDrop=function(e){
			console.log("system dragover",e);
			var file;
			try{
				file=e.dataTransfer.files[0];
				SystemDragOverManager.handlerFile(file.path);
				SystemDragOverManager.onFileDrag(e.dataTransfer.files,e.clientX,e.clientY);
				e.preventDefault();
			}catch(e){}
			return false;
		}

		SystemDragOverManager.handlerFile=function(path){
			console.log("handlerFIle:",path);
			if (path){
				var extension;
				extension=FileTools.getExtensionName(path);
				switch(extension){
					case "laya":
						ProjectManager.loadProject(path);
						break ;
					}
			}
		}

		SystemDragOverManager.onFileDrag=function(files,x,y){
			if(!files||files.length<1)return;
			var data;
			var type="SystemDrag";
			var files;
			files=Utils.copyArray(files,[]);
			data={type:type,files:files};
			DragManager.sendDragEventByData("dragDrop",data,data,x,y);
		}

		return SystemDragOverManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-1-4 上午10:30:59
	*/
	//class laya.ide.managers.TemplateManager
	var TemplateManager=(function(){
		function TemplateManager(){}
		__class(TemplateManager,'laya.ide.managers.TemplateManager');
		TemplateManager.getRootPath=function(){
			return FileManager.getAppPath("laya/template/");
		}

		TemplateManager.getDefaultFolder=function(){
			return TemplateManager.getTypedFolder("常用模板");
		}

		TemplateManager.getTypedFolder=function(type){
			return FileManager.getPath(TemplateManager.getRootPath(),type);
		}

		TemplateManager.getTemplateFolderPath=function(templateName,type){
			(type===void 0)&& (type="自定义模板");
			return FileManager.getPath(TemplateManager.getTypedFolder(type),templateName);
		}

		TemplateManager.getTemplateUIFilePath=function(templateName,type){
			(type===void 0)&& (type="自定义模板");
			return FileManager.getPath(TemplateManager.getTypedFolder(type),templateName+"/"+"UI"+"."+TypeManager.getExtension("ui_template"));
		}

		TemplateManager.getTemplateUIResPath=function(templateName,type){
			(type===void 0)&& (type="自定义模板");
			return FileManager.getPath(TemplateManager.getTypedFolder(type),templateName+"/"+"res");
		}

		TemplateManager.getUIFilePath=function(templateFolder){
			return FileManager.getPath(templateFolder,"UI"+"."+TypeManager.getExtension("ui_template"));
		}

		TemplateManager.getUIResPath=function(templateFolder){
			return FileManager.getPath(templateFolder,"res");
		}

		TemplateManager.init=function(){
			FileTools.ensurePath(TemplateManager.getRootPath());
		}

		TemplateManager.getTemplatePanelData=function(){
			var rst;
			var folders;
			folders=FileTools.getDirChildDirs(TemplateManager.getRootPath());
			var i=0,len=0;
			len=folders.length;
			var groupDatas;
			groupDatas=[];
			for(i=0;i<len;i++){
				groupDatas.push(TemplateManager.getTypedTemplateData(folders[i]));
			}
			rst={};
			rst.groups=groupDatas;
			return rst;
		}

		TemplateManager.getTypedTemplateData=function(path){
			var templates;
			templates=FileTools.getDirChildDirs(path);
			var typeName;
			typeName=FileTools.getFileName(path);
			var i=0,len=0;
			len=templates.length;
			var items;
			items=[];
			for(i=0;i<len;i++){
				items.push(TemplateManager.getTemplateFileData(templates[i],typeName));
			};
			var rst;
			rst={};
			rst.name=typeName;
			rst.items=items;
			return rst;
		}

		TemplateManager.getTemplateFileData=function(path,type){
			var templateName;
			templateName=FileTools.getFileName(path);
			var rst;
			rst={};
			rst.icon=FileTools.getAbsPath(FileManager.getPath(path,"icon.png"));
			rst.image=rst.icon;
			rst.title=templateName;
			rst.path=path;
			return rst;
		}

		TemplateManager.changeToTemplate=function(fileName){
			if(TypeManager.getFileType(fileName)!="page"){
				Alert.show(Sys.lang("UI文件才能转换为模板文件"),Sys.lang("提示"));
				return;
			};
			var folderName;
			folderName=FileTools.getFileName(fileName);
			AddTemplate.instance.start(fileName,folderName);
		}

		TemplateManager.convertUIFileByPaths=function(srcFile,templateName,folderName){
			var tarFolder;
			tarFolder=TemplateManager.getTemplateFolderPath(templateName,folderName);
			if(FileTools.exist(tarFolder)){
				Confirm.show(Sys.lang("目标文件已存在，是否覆盖？"),Sys.lang("提示"),Utils.bind(TemplateManager.convertUIFileToTemplate,null),[srcFile,tarFolder,templateName,folderName]);
				}else{
				TemplateManager.convertUIFileToTemplate(srcFile,tarFolder,templateName,folderName);
			}
		}

		TemplateManager.convertUIFileToTemplate=function(oldFile,tarFolder,templateName,folderName){
			var xml=FileManager.readJSONFile(oldFile);
			var view=new UIView();
			view.createView(xml);
			var tarFile;
			tarFile=TemplateManager.getTemplateUIFilePath(templateName,folderName);
			var resFolder;
			resFolder=TemplateManager.getTemplateUIResPath(templateName,folderName);
			var tarData;
			tarData=FileManager.readJSONFile(oldFile);
			var resUsed;
			resUsed=TemplateManager.findAllResUsed(tarData,resUsed);
			var resNameDic;
			resNameDic=TemplateManager.getAdptSkins(resUsed);
			var oldTxt;
			oldTxt=FileManager.readTxtFile(oldFile);
			var key;
			var newPath;
			var uiO;
			uiO=ObjectTools.getObj(oldTxt);
			delete resNameDic[""];
			for(key in resNameDic){
				if(!key)continue ;
				TemplateManager.copySkinRes(key,resFolder,resNameDic[key]);
				resNameDic[key]="template"+"/"+templateName+"/"+resNameDic[key];
			}
			ObjectTools.replaceValue(uiO,resNameDic);
			FileManager.createTxtFile(tarFile,ObjectTools.getJsonString(uiO));
			URL.version[FileTools.getAbsPath(FileManager.getPath(tarFolder,"icon.png"))]=Math.random();
			Laya.timer.once(200,null,TemplateManager.createLittlePic,[view,tarFolder]);
		}

		TemplateManager.copySkinRes=function(skinPath,resFolder,resName){
			if(!skinPath)return;
			if(!resName)return;
			var srcP;
			srcP=FileManager.getResPath(skinPath);
			var tarP;
			tarP=FileTools.getPath(resFolder,resName);
			var i=0,len=0;
			len=TemplateManager.specialFiles.length;
			for(i=0;i<len;i++){
				TemplateManager.copyIfExists(StringTool.getReplace(srcP,".png",TemplateManager.specialFiles[i]),StringTool.getReplace(tarP,".png",TemplateManager.specialFiles[i]));
			}
		}

		TemplateManager.copyIfExists=function(src,tar){
			if(FileTools.exist(src)){
				if(FileTools.isDirectory(src)){
					debugger;
					return;
				}
				FileTools.copyFile(src,tar);
			}
		}

		TemplateManager.createLittlePic=function(view,tarFolder){
			var pic;
			var bounds;
			bounds=view.getSelfBounds();
			pic=view.drawToCanvas(bounds.width+bounds.x,bounds.height+bounds.y,0 ,0).source;
			var baseStr;
			baseStr=pic.toDataURL("image/png");
			baseStr=baseStr.replace(/^data:image\/\w+;base64,/,"");
			var bf;
			bf=new Device.Buffer(baseStr,'base64');
			FileManager.createBytesFile(FileManager.getPath(tarFolder,"icon.png"),bf);
			MessageManager.instance.show(Sys.lang("转换成模板成功"));
			Laya.timer.once(10,null,TemplateManager.freshCompPanel);
		}

		TemplateManager.freshCompPanel=function(){
			Notice$1.notify("Fresh_CompPanel");
		}

		TemplateManager.getAdptSkins=function(skinList){
			var renameDic;
			var i=0,len=0;
			len=skinList.length;
			renameDic={};
			for(i=0;i<len;i++){
				if(!skinList[i]||skinList[i]=="")continue ;
				renameDic[skinList[i]]=true;
			};
			var tSkin;
			var usedNameDic;
			usedNameDic={};
			var tName;
			for(tSkin in renameDic){
				tName=FileTools.getFileNameWithExtension(tSkin);
				if(usedNameDic.hasOwnProperty(tName)){
					i=0;
					while(usedNameDic.hasOwnProperty(tName.replace(".",i+"."))){
						i++;
					}
					tName=tName.replace(".",i+".");
					}else{
				}
				usedNameDic[tName]=true;
				renameDic[tSkin]=tName;
			}
			return renameDic;
		}

		TemplateManager.renamePageSkins=function(pageFile,reNameDic){
			var oldTxt;
			oldTxt=pageFile;
			var key;
			var newPath;
			for(key in reNameDic){
				newPath=reNameDic[key];
				oldTxt=StringTool.getReplace(oldTxt,"\""+key+"\"","\""+newPath+"\"");
			}
			return oldTxt;
		}

		TemplateManager.findAllResUsedDic=function(pageData){
			var skinList;
			skinList=TemplateManager.findAllResUsed(pageData,[]);
			var renameDic;
			var i=0,len=0;
			len=skinList.length;
			renameDic={};
			for(i=0;i<len;i++){
				renameDic[skinList[i]]=true;
			}
			return renameDic;
		}

		TemplateManager.findAllResUsed=function(pageData,rst){
			if(!rst)rst=[];
			TemplateManager.getNodeSkin(pageData,rst);
			var i=0,len=0;
			var childList;
			var tChild;
			childList=pageData.child;
			len=childList.length;
			for(i=0;i<len;i++){
				tChild=childList[i];
				TemplateManager.findAllResUsed(tChild,rst);
			}
			return rst;
		}

		TemplateManager.getNodeSkin=function(node,rst){
			if(!rst)rst=[];
			var i=0,len=0;
			var tFrame;
			var frames;
			TemplateManager.getResByProps(node.props,rst);
			return rst;
		}

		TemplateManager.getResByProps=function(props,rst){
			if(!rst)rst=[];
			var key;
			for(key in props){
				if(TemplateManager.isResRefer(props[key])){
					rst.push(props[key]);
				}
			}
			return rst;
		}

		TemplateManager.isResRefer=function(value){
			if(!((typeof value=='string')))return false;
			if(FileTools.exist(FileManager.getResPath(value)))return true;
			return false;
		}

		TemplateManager.DefaultFolder="常用模板";
		TemplateManager.CustomFolder="自定义模板";
		TemplateManager.TemplateResFolder="template";
		__static(TemplateManager,
		['specialFiles',function(){return this.specialFiles=[".png","$down.png","$bar.png","$up.png"];}
		]);
		return TemplateManager;
	})()


	/**
	*本类定义不同的页面类型
	*@author ww
	*/
	//class laya.ide.managers.TypeManager
	var TypeManager=(function(){
		function TypeManager(){}
		__class(TypeManager,'laya.ide.managers.TypeManager');
		TypeManager.init=function(){
			TypeManager.ViewCodeTypeDic["page"]=true;
			TypeManager.ViewCodeTypeDic["scene"]=true;
			TypeManager.ViewCodeTypeDic["prefab_ui"]=true;
			TypeManager.ViewCodeTypeDic["Prefab"]=true;
			TypeManager.ViewCodeTypeDic["animation"]=true;
			TypeManager.ViewCodeTypeDic["graphic_animation"]=true;
			TypeManager.ViewCodeTypeDic["MoveEffect"]=true;
			TypeManager.XmlCodeTypeDic["Script"]=true;
			TypeManager.XmlCodeTypeDic["prop"]=true;
			TypeManager.insertArrToObj(TypeManager.Res2D,TypeManager.ResTypes);
			TypeManager.insertArrToObj(TypeManager.GraphicRes,TypeManager.ResTypes);
			TypeManager.insertArrToObj(TypeManager.UIRes,TypeManager.ResTypes);
			TypeManager.insertArrToObj(TypeManager.GraphicRes,TypeManager.UnEnterAbleType);
			TypeManager.UnEnterAbleType["Graphic"]=false;
			TypeManager.insertArrToObj(TypeManager.GraphicRes,TypeManager.GraphicCmdTypeDic);
			TypeManager.GraphicCmdTypeDic["Graphic"]=false;
			TypeManager.NoRenderTypeNodes["EffectAnimation"]=true;
		}

		TypeManager.getExtension=function(type){
			var key;
			var tO=TypeManager.TypeO;
			for(key in tO){
				if(tO[key]==type){
					return key;
				}
			}
			console.log("未知type:",type);
			return "unKnow";
		}

		TypeManager.getFileType=function(path){
			var extention=FileTools.getExtensionName(path);
			if(!TypeManager.TypeO[extention])return "unKnow";
			return TypeManager.TypeO[extention];
		}

		TypeManager.isPreFabNodeType=function(type){
			if(!type)return false;
			return !ProjectSetting.isPageType(type);
		}

		TypeManager.isPreFabPage=function(path){
			return TypeManager.isPreFabNodeType(TypeManager.getPageFileType(path));
		}

		TypeManager.getPageFileType=function(path){
			var xml;
			var dataStr;
			try{
				dataStr=FileManager.getPath(SystemSetting.pagesPath,path.replace(".xml","."+laya.ide.managers.TypeManager.getExtension("page")));
				xml=FileManager.readJSONFile(dataStr);
				var type;
				type=xml.type;
				return type;
				}catch(e){
			};
			return null;
		}

		TypeManager.isPrefabUINode=function(node){
			if(node.type!="UIView"||!node.source)return false;
			return TypeManager.isPreFabPage(node.source);
		}

		TypeManager.isCodeViewFile=function(path){
			var type;
			type=TypeManager.getFileType(path);
			return TypeManager.ViewCodeTypeDic.hasOwnProperty(type);
		}

		TypeManager.isXmlViewFile=function(path){
			var type;
			type=TypeManager.getFileType(path);
			return TypeManager.XmlCodeTypeDic.hasOwnProperty(type);
		}

		TypeManager.isScriptFile=function(path){
			return TypeManager.isXmlViewFile(path);
		}

		TypeManager.insertArrToObj=function(arr,obj){
			var i=0,len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				obj[arr[i]]=true;
			}
		}

		TypeManager.isResTypeName=function(typeStr){
			return TypeManager.ResTypes[typeStr];
		}

		TypeManager.isGraphicCmdType=function(type){
			if(type==TypeManager.GraphicPic&&IDEVars.isNewGraphicAnimationMode)return false;
			if(TypeManager.GraphicCmdTypeDic[type])return true;
			return false;
		}

		TypeManager.canNodeAddToType=function(childType,parentType){
			if(parentType=="Graphic"){
				if(!TypeManager.isGraphicCmdType(childType)){
					return false;
				}
			}
			return true;
		}

		TypeManager.isGraphicAniNodeType=function(type){
			return type=="Texture"||type==TypeManager.GraphicPic;
		}

		TypeManager.Particle="particle";
		TypeManager.Particle3D="particle3D";
		TypeManager.ParticlePoly="particlepoly";
		TypeManager.Page="page";
		TypeManager.Animation="animation";
		TypeManager.UITemplate="ui_template";
		TypeManager.Scene="scene";
		TypeManager.Prefab="Prefab";
		TypeManager.PrefabUI="prefab_ui";
		TypeManager.GraphicAnimation="graphic_animation";
		TypeManager.Script="Script";
		TypeManager.Prop="prop";
		TypeManager.MoveEffect="MoveEffect";
		TypeManager.ViewCodeTypeDic={};
		TypeManager.XmlCodeTypeDic={};
		TypeManager.GraphicCmdTypeDic={};
		TypeManager.ParticlePlayer="Particle2D";
		TypeManager.GraphicPic="Texture";
		TypeManager.MoveEffectNode="EffectAnimation";
		__static(TypeManager,
		['NoRenderTypeNodes',function(){return this.NoRenderTypeNodes={
				"SoundNode":true,
				"GraphicPic":true,
				"GridEditor":true,
				"Script":true
				};},'TypeO',function(){return this.TypeO={
				"part":"particle",
				"part3d":"particle3D",
				"partPoly":"particlepoly",
				"ui":"page",
				"ani":"graphic_animation",
				"scene":"scene",
				"prefab":"Prefab",
				"prefabui":"prefab_ui",
				"script":"Script",
				"prop":"prop",
				"temp":"ui_template",
				"efc":"MoveEffect"
				};},'Res2D',function(){return this.Res2D=["Sprite","Animation","Text","HTMLDivElement"];},'GraphicRes',function(){return this.GraphicRes=["Circle","Curves","FillText","FillTexture","Graphic","Line","Lines","Pie","Poly","Rect","Texture"];},'UIRes',function(){return this.UIRes=["Button","CheckBox","Clip","ColorPicker","ComboBox","Dialog","HBox","HScrollBar","HSlider","Image","Label","List","Panel","ProgressBar","Radio","RadioGroup","Tab","Text","TextArea","TextInput","Tree","VBox","VScrollBar","VSlider","View","ViewStack","Box"];},'ResTypes',function(){return this.ResTypes={
				};},'UnEnterAbleType',function(){return this.UnEnterAbleType={
				"GraphicPic":true,
				"HTMLDivElement":true,
				"SoundNode":true,
				"GridEditor":true,
				"UIView":true,
				"Script":true
		};}

		]);
		return TypeManager;
	})()


	/**
	*本类用于在ide中显示iframe
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-21 上午11:23:12
	*/
	//class laya.ide.managers.ViewRenderManager
	var ViewRenderManager=(function(){
		function ViewRenderManager(){}
		__class(ViewRenderManager,'laya.ide.managers.ViewRenderManager');
		ViewRenderManager.init=function(){
			if (ViewRenderManager.renderFrame)return;
			ViewRenderManager.renderHit.name="renderHit";
			ViewRenderManager.renderHit.mouseEnabled=true;
			ViewRenderManager.renderHit.on("dragDrop",null,ViewRenderManager.renderDragDrop);
			ViewRenderManager.renderFrame=Browser.createElement("iframe");
			ViewRenderManager.renderFrame.id="viewrender";
			ViewRenderManager.renderFrame.width="400";
			ViewRenderManager.renderFrame.height="300";
			ViewRenderManager.renderFrame.left="400";
			ViewRenderManager.renderFrame.top="400";
			ViewRenderManager.style=ViewRenderManager.renderFrame.style;
			ViewRenderManager.style.position="absolute";
			ViewRenderManager.style.top="100px";
			ViewRenderManager.style.left="220px";
			ViewRenderManager.style["z-index"]=101;
			ViewRenderManager.style.border="0";
			ViewRenderManager.render=ViewRenderManager.renderFrame.contentWindow;
			var passEventList=["mousemove","keydown","keypress","keyup"];
			ViewRenderManager.renderFrame.addEventListener("load",function(){
				ViewRenderManager.render=ViewRenderManager.renderFrame.contentWindow.renderBinds;
				ViewRenderManager.window=ViewRenderManager.renderFrame.contentWindow;
				var i=0,len=0;
				len=passEventList.length;
				for(i=0;i<len;i++){
					ViewRenderManager.window.document.removeEventListener(passEventList[i],ViewRenderManager.passEvent);
					ViewRenderManager.window.document.addEventListener(passEventList[i],ViewRenderManager.passEvent);
				}
				Laya.timer.once(200,null,ViewRenderManager.loaded);
			},false)
			var idePassEventList=["keydown","keypress","keyup"];
			var i=0,len=0;
			len=idePassEventList.length;
			for(i=0;i<len;i++){
				Laya.stage.on(idePassEventList[i],null,ViewRenderManager.passEvent2);
			}
		}

		ViewRenderManager.passEvent=function(e){
			var evt;
			evt=Browser.document.createEvent("Events");
			evt.initEvent(e.type,true,true);
			var key;
			for(key in e){
				if(!((typeof (e[key])=='function'))){
					evt[key]=e[key];
				}
			}
			evt.isFromIDE=true;
			evt.clientX+=ViewRenderManager.offPos.x;
			evt.clientY+=ViewRenderManager.offPos.y;
			Render.canvas.dispatchEvent(evt);
		}

		ViewRenderManager.passEvent2=function(e){
			if(!ViewRenderManager.window)return;
			e=e.nativeEvent;
			if(e.isFromIDE)return;
			var evt;
			evt=Browser.document.createEvent("Events");
			evt.initEvent(e.type,true,true);
			var key;
			for(key in e){
				if(!((typeof (e[key])=='function'))){
					evt[key]=e[key];
				}
			}
			ViewRenderManager.window.document.dispatchEvent(evt);
		}

		ViewRenderManager.renderDragDrop=function(e){
			var point=DisControlTool.getMousePoint(ViewRenderManager.renderHit);
			e.data.dropX=point.x;
			e.data.dropY=point.y;
			Notice$1.notify("DROP_RENDER",[e]);
		}

		ViewRenderManager.renderMouseHandler=function(e){
			if(!ViewRenderManager.window)return;
			var point;
			point=DisControlTool.getMousePoint(ViewRenderManager.renderHit);
			var evt;
			evt=Browser.document.createEvent("MouseEvents");
			evt.initMouseEvent(
			e.type,
			true,
			true,
			Browser.document.defaultView,
			0,
			point.x,
			point.y,
			point.x,
			point.y);
			ViewRenderManager.window.dispatchEvent(evt);
		}

		ViewRenderManager.loaded=function(){
			Notice$1.listen("RenderInited",null,ViewRenderManager.renderInited);
			if(ViewRenderManager.render)
				ViewRenderManager.render.setNotice(Notice$1.I);
			ViewRenderManager.eDispatcher.event("complete");
			ViewRenderManager.adpt();
		}

		ViewRenderManager.renderInited=function(){}
		ViewRenderManager.adpt=function(){
			if (laya.ide.managers.ViewRenderManager.renderFrame){
				var pos=new Point();
				pos=UIPanel.instance.localToGlobal(pos);
				var dLen=0;
				dLen=25;
				ViewRenderManager.renderHit.width=UIPanel.instance.width;
				ViewRenderManager.renderHit.height=UIPanel.instance.height-dLen;
				ViewRenderManager.renderHit.x=UIPanel.instance.x;
				ViewRenderManager.renderHit.y=UIPanel.instance.y+dLen;
				var style;
				style=laya.ide.managers.ViewRenderManager.renderFrame.style;
				ViewRenderManager.offPos.setTo(pos.x,pos.y+dLen);
				style.top=pos.y+dLen+"px";
				style.left=(pos.x)+"px";
				laya.ide.managers.ViewRenderManager.renderFrame.width=ViewRenderManager.renderHit.width;
				laya.ide.managers.ViewRenderManager.renderFrame.height=ViewRenderManager.renderHit.height-5;
				ViewRenderManager.hitBounds.width=ViewRenderManager.renderHit.width;
				ViewRenderManager.hitBounds.height=ViewRenderManager.renderHit.height;
				ViewRenderManager.hitBounds.x=0;
				ViewRenderManager.hitBounds.y=0;
				ViewRenderManager.renderHit.setBounds(ViewRenderManager.hitBounds);
			}
		}

		ViewRenderManager.setRender=function(url){
			ViewRenderManager.renderFrame.src=url;
		}

		ViewRenderManager.show=function(){
			Browser.container.appendChild(ViewRenderManager.renderFrame);
			UIPanel.instance.parent.addChild(ViewRenderManager.renderHit);
		}

		ViewRenderManager.hide=function(){
			Browser.removeElement(ViewRenderManager.renderFrame);
			ViewRenderManager.renderFrame.src="";
			ViewRenderManager.renderHit.removeSelf();
		}

		ViewRenderManager.renderFrame=null
		ViewRenderManager.render=null
		ViewRenderManager.style=null
		ViewRenderManager.window=null
		__static(ViewRenderManager,
		['eDispatcher',function(){return this.eDispatcher=new EventDispatcher();},'renderHit',function(){return this.renderHit=new Sprite();},'hitBounds',function(){return this.hitBounds=new Rectangle(0,0);},'offPos',function(){return this.offPos=new Point();}
		]);
		return ViewRenderManager;
	})()


	/**
	*显示对象常用的工具类
	*@author ww
	*/
	//class laya.ide.utils.DisTools
	var DisTools=(function(){
		function DisTools(){}
		__class(DisTools,'laya.ide.utils.DisTools');
		DisTools.showToStage=function(dis,offX,offY){
			(offX===void 0)&& (offX=0);
			(offY===void 0)&& (offY=0);
			var rec=dis.getBounds();
			dis.x=Laya.stage.mouseX+offX;
			dis.y=Laya.stage.mouseY+offY;
			if (dis.x+rec.width > Laya.stage.width){
				dis.x-=rec.width+offX;
			}
			if (dis.y+rec.height > Laya.stage.height){
				dis.y-=rec.height+offY;
			}
		}

		DisTools.showToCenter=function(dis,parent){
			dis.x=0.5 *(parent.width-dis.width);
			dis.y=0.5 *(parent.height-dis.height);
			parent.addChild(dis);
		}

		DisTools.getDisDesO=function(dis){
			if (!dis)
				return null;
			var rst={};
			if(dis.name){
				rst.label=TraceTool.getClassName(dis)+"("+dis.name+")";
				}else{
				rst.label=TraceTool.getClassName(dis);
			}
			if(dis["comXml"]){
				rst.compId=dis["comXml"]["compId"];
			}
			rst.path=dis;
			rst.files=[];
			rst.dirs=[];
			rst.childs=[];
			rst.isDirectory=true;
			return rst;
		}

		DisTools.getDisTreeArr=function(sp,filterFun){
			var tTreeO=DisTools.getDisTreeO(sp,filterFun);
			var rst=[];
			DisTools.getTreeArr(tTreeO,rst);
			return rst;
		}

		DisTools.getTreeArr=function(treeO,arr,filterFun){
			arr.push(treeO);
			var tArr=treeO.childs||treeO.child;
			var i=0,len=tArr.length;
			for (i=0;i < len;i++){
				if (tArr[i].isDirectory){
					DisTools.getTreeArr(tArr[i],arr);
				}
				else{
					arr.push(tArr[i]);
				}
			}
		}

		DisTools.getDisTreeO=function(dis,filterFun){
			var rst=DisTools.getDisDesO(dis);
			var i=0,len=0;
			var tChild;
			var tO;
			len=dis.numChildren;
			for (i=0;i < len;i++){
				tChild=dis.getChildAt(i);
				if(filterFun!=null&&!filterFun(tChild)){
					continue ;
				}
				tO=DisTools.getDisTreeO(tChild,filterFun);
				tO.nodeParent=rst;
				tO.hasChild=tO.childs.length > 0;
				tO.isDirectory=tO.hasChild;
				rst.dirs.push(tO);
				rst.childs.push(tO);
			}
			rst.hasChild=rst.childs.length > 0;
			return rst;
		}

		DisTools.addTextChangeHandler=function(input,_this,fun,param){
			input.on("enter",_this,fun);
			input.on("blur",_this,fun);
		}

		return DisTools;
	})()


	/**
	*编辑页基类
	*@author ww
	*/
	//class laya.ide.viewer.SceneBase
	var SceneBase=(function(){
		function SceneBase(){
			this.data=null;
			this._path=null;
			this._title=null;
			this._changed=false;
		}

		__class(SceneBase,'laya.ide.viewer.SceneBase');
		var __proto=SceneBase.prototype;
		Laya.imps(__proto,{"laya.ide.viewer.IViewer":true})
		__proto.setUp=function(parent){}
		//trace("SceneBase setUp");
		__proto.save=function(){}
		__proto.open=function(){}
		__proto.removeSelf=function(){
			ViewRenderManager.hide();
			Notice$1.cancel("ResItemClick",this,this.onResClick);
			Notice$1.cancel("Prop_change",this,this.propChange);
			Notice$1.cancel("DROP_RENDER",this,this.renderDragDrop);
		}

		__proto.dealAction=function(funName,param){
			if ((typeof (this[funName])=='function')){
				this[funName].apply(this,param);
			}
		}

		__proto.show=function(){
			ViewRenderManager.show();
			Notice$1.listen("ResItemClick",this,this.onResClick,null,true);
			Notice$1.listen("Prop_change",this,this.propChange,null,true);
			Notice$1.listen("DROP_RENDER",this,this.renderDragDrop,null,true);
		}

		__proto.renderDragDrop=function(e){}
		__proto.propChange=function(key,data){}
		__proto.onResClick=function(data){}
		__proto.goBack=function(){}
		__proto.goForward=function(){}
		__getset(0,__proto,'pagePath',function(){
			return this._path;
			},function(path){
			this._path=path;
			this._title=FileTools.getFileName(this._path);
		});

		__getset(0,__proto,'title',function(){
			return this._title;
		});

		__getset(0,__proto,'design',function(){
			return this;
		});

		__getset(0,__proto,'hasChange',function(){
			return this._changed;
		});

		return SceneBase;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-10 下午4:21:23
	*/
	//class laya.rendercanvas.HtmlZIndexManager
	var HtmlZIndexManager=(function(){
		function HtmlZIndexManager(){}
		__class(HtmlZIndexManager,'laya.rendercanvas.HtmlZIndexManager');
		HtmlZIndexManager.init=function(){
			Laya.stage.on("mousedown",null,HtmlZIndexManager.onMouseDown);
			Laya.stage.on("mouseup",null,HtmlZIndexManager.onMouseUp);
		}

		HtmlZIndexManager.onMouseDown=function(){
			HtmlZIndexManager.isMouseDown=true;
			HtmlZIndexManager.prePos.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			HtmlZIndexManager.isDrag=false;
			Laya.stage.on("mousemove",null,HtmlZIndexManager.onMouseMove);
		}

		HtmlZIndexManager.onMouseMove=function(){
			if(Math.abs(HtmlZIndexManager.prePos.x-Laya.stage.mouseX)+Math.abs(HtmlZIndexManager.prePos.y-Laya.stage.mouseY)>5){
				Notice$1.notify("DisableOverlays");
				HtmlZIndexManager.setHtmlEnable(false);
				HtmlZIndexManager.isDrag=true;
				Laya.stage.off("mousemove",null,HtmlZIndexManager.onMouseMove);
			}
		}

		HtmlZIndexManager.onMouseUp=function(){
			HtmlZIndexManager.isMouseDown=false;
			Laya.stage.off("mousemove",null,HtmlZIndexManager.onMouseMove);
			if(!HtmlZIndexManager.preValue){
				Notice$1.notify("EnableOverlays");
				HtmlZIndexManager.setHtmlEnable(true);
			}
			HtmlZIndexManager.isDrag=false;
		}

		HtmlZIndexManager.setHtmlEnable=function(enable){
			HtmlZIndexManager.preValue=enable;
			var i=0,len=0;
			len=HtmlZIndexManager.htmlList.length;
			for(i=0;i<len;i++){
				if(HtmlZIndexManager.htmlList[i].disableAutoControl)continue ;
				JSTools.setMouseEnable(HtmlZIndexManager.htmlList[i],enable);
			}
		}

		HtmlZIndexManager.addHtml=function(html){
			if(!html)return;
			if(!HtmlZIndexManager.htmlList.indexOf(html)>=0){
				HtmlZIndexManager.htmlList.push(html);
			}
		}

		HtmlZIndexManager.removeHtml=function(html){
			if(!html)return;
			var index=0;
			index=HtmlZIndexManager.htmlList.indexOf(html);
			if(index>=0){
				HtmlZIndexManager.htmlList.splice(index,1);
			}
		}

		HtmlZIndexManager.DisableOverlays="DisableOverlays";
		HtmlZIndexManager.EnableOverlays="EnableOverlays";
		HtmlZIndexManager.isDrag=false;
		HtmlZIndexManager.isMouseDown=false;
		HtmlZIndexManager.preValue=true;
		HtmlZIndexManager.htmlList=[];
		__static(HtmlZIndexManager,
		['prePos',function(){return this.prePos=new Point();}
		]);
		return HtmlZIndexManager;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-12 下午6:56:18
	*/
	//class laya.rendercanvas.StageHook
	var StageHook=(function(){
		function StageHook(){
			this.preEvent=null;
			this.preRender=null;
			this.renderingEnabled=true;
			this._repaint=1;
		}

		__class(StageHook,'laya.rendercanvas.StageHook');
		var __proto=StageHook.prototype;
		__proto.event=function(type,data){
			if(type=="mouseout")return false;
			return laya.rendercanvas.StageHook.I.preEvent.apply(this,[type,data]);
		}

		__proto.render=function(context,x,y){
			this.renderingEnabled=this._repaint!=0;
			if(this.renderingEnabled){
				if(IDEConsts.showRenderDebug){
					console.log("renderStage");
				}
			}
			laya.rendercanvas.StageHook.I.preRender.apply(this,[context,x,y]);
		}

		StageHook.hookStage=function(){
			StageHook.I.preEvent=Laya.stage.event;
			Laya.stage["event"]=StageHook.I.event;
			StageHook.I.preRender=Laya.stage.render;
			Laya.stage["render"]=StageHook.I.render;
		}

		__static(StageHook,
		['I',function(){return this.I=new StageHook();}
		]);
		return StageHook;
	})()


	/**
	*...
	*@author ww
	*/
	//class laya.test.TempData
	var TempData=(function(){
		function TempData(){}
		__class(TempData,'laya.test.TempData');
		TempData.temTreeData=null
		return TempData;
	})()


	/**
	*编辑器全局静态入口
	*@author yung
	*/
	//class Sys
	var Sys=(function(){
		function Sys(){};
		__class(Sys,'Sys');
		Sys.mParseInt=function(v){}
		Sys.log=function(__args){
			var args=arguments;
			Sys.print("log",args,"#0080C0");
		}

		Sys.error=function(__args){
			var args=arguments;
			Sys.print("error",args,"#FF0000");
		}

		Sys.warn=function(__args){
			var args=arguments;
			Sys.print("warn",args,"#9B9B00");
		}

		Sys.plugin=function(__args){
			var args=arguments;
			Sys.print("plugin",args,"#007300");
		}

		Sys.print=function(type,args,color){
			var msg="";
			for (var i=0;i < args.length;i++){
				msg+=args[i]+" ";
			}
			console.log("%c ["+type+"]"+msg,"color: "+color+"");
		}

		Sys.alert=function(msg){
			if (SystemSetting.isCMDVer){
				console.log(msg);
				return;
			}
			alert(msg);
			SysLog.log(msg,"alert");
		}

		Sys.lang=function(body,__args){
			var args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);
			var i=0,len=0;
			len=args.length;
			if(Sys.langPack&&Sys.langPack[body]){
				body=Sys.langPack[body];
			}
			for (i=0;i < len;i++){
				body=body.replace("{"+i+"}",args[i]);
			}
			return body;
		}

		Sys.adptLangPack=function(){
			if(!Sys.langPack)return;
			var key;
			var newKey;
			for(key in Sys.langPack){
				if(key.indexOf("\\n")>=0){
					newKey=StringTool.getReplace(key,"\\\\n","\n");
					Sys.langPack[newKey]=StringTool.getReplace(Sys.langPack[key],"\\\\n","\n");
				}
			}
		}

		Sys.langArr=function(txtList){
			if(!Sys.langPack)return txtList;
			var i=0,len=0;
			len=txtList.length;
			var tTxt;
			for(i=0;i<len;i++){
				tTxt=txtList[i];
				if(Sys.langPack[tTxt]){
					txtList[i]=Sys.langPack[tTxt];
				}
			}
			return txtList;
		}

		Sys.langPack=null
		return Sys;
	})()


	/**
	*...
	*@author ww
	*/
	//class tools.PreLoads
	var PreLoads=(function(){
		function PreLoads(){
			this.handler=null;
			this.skinResList=["view.json","comp.json","play.json"];
			this.mXML=null;
			this.mData=null;
		}

		__class(PreLoads,'tools.PreLoads');
		var __proto=PreLoads.prototype;
		__proto.loadRes=function(){
			var i=0,len=0;
			var loadList;
			loadList=[];
			var skinPath;
			skinPath=IDESkinManager.getSkinPath();
			len=this.skinResList.length;
			for(i=0;i<len;i++){
				loadList.push({url:skinPath+this.skinResList[i],type:"atlas"});
			}
			if(IDELangManager.getLangPath()){
				loadList.push({url:IDELangManager.getLangPath(),type:"json"});
			}
			Laya.loader.load(loadList,Handler.create(this,this.loadXMLFile),Handler.create(this,this.progressFun));
		}

		__proto.progressFun=function(){}
		__proto.loadXMLFile=function(){
			if(IDELangManager.getLangPath()){
				var langData;
				langData=Loader.getRes(IDELangManager.getLangPath());
				console.log("lang:",langData);
				Sys.langPack=langData;
				Sys.adptLangPack();
			}
			PageExportType.init();
			this.xmlLoaded(null);
		}

		__proto.xmlLoaded=function(data){
			RenderManager.I.initRenders();
			this.handler.run();
		}

		PreLoads.LangPack="lang.json";
		PreLoads.TestMode=false;
		return PreLoads;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-19 上午10:45:14
	*/
	//class wraps.binarypic.BinaryPicTools
	var BinaryPicTools=(function(){
		function BinaryPicTools(){}
		__class(BinaryPicTools,'wraps.binarypic.BinaryPicTools');
		BinaryPicTools.init=function(){
			PNGTools.init();
			JPGTools.init();
		}

		BinaryPicTools.clearCache=function(){}
		BinaryPicTools.getResInfo=function(path){
			if(!FileTools.exist(path))return null;
			var extension;
			extension=FileTools.getExtensionName(path);
			extension=extension.toLowerCase();
			if(extension!="png"&&extension!="jpg")return null;
			var changeTime;
			changeTime=FileTools.getMTime(path).toString();
			var cacheO;
			cacheO=BinaryPicTools.infoCacheDic[path];
			if(cacheO){
				if(cacheO["mTime"]==changeTime&&cacheO["tex"]){
					return cacheO["tex"];
				}
				}else{
				cacheO={};
			}
			cacheO["mTime"]=changeTime;
			BinaryPicTools.infoCacheDic[path]=cacheO;
			var data;
			data=FileTools.readFile(path,null);
			var rst;
			rst=ImageInfo.imageInfo(data);
			cacheO["tex"]=rst;
			return rst;
		}

		BinaryPicTools.getRes=function(path){
			if(!ResFileManager.enableBinaryPic)return null;
			if(!FileTools.exist(path))return null;
			var extension;
			extension=FileTools.getExtensionName(path);
			extension=extension.toLowerCase();
			if(extension!="png"&&extension!="jpg")return null;
			var changeTime;
			changeTime=FileTools.getMTime(path).toString();
			var cacheO;
			cacheO=BinaryPicTools.cacheDic[path];
			if(cacheO){
				if(cacheO["mTime"]==changeTime&&cacheO["tex"]){
					return cacheO["tex"];
				}
				}else{
				cacheO={};
				BinaryPicTools.cacheDic[path]=cacheO;
			}
			cacheO["mTime"]=changeTime;
			var data;
			data=FileTools.readFile(path,null);
			rst=BinaryPicTools.createTextureByBinary(data,path);
			cacheO["tex"]=rst;
			BinaryPicTools.cacheDic[path]=cacheO;
			return rst;
			console.log("path:",path);
			console.log("img:",ImageInfo.imageInfo(data));
			var rst;
			if(extension=="png"){
				rst=PNGTools.createTextureByBinary(data);
			}
			if(extension=="jpg"){
				rst=JPGTools.createTextureByBinary(data);
			}
			cacheO["tex"]=rst;
			return rst;
		}

		BinaryPicTools.createTextureByBinary=function(data,path){
			var bmp=new BinaryBitmap();
			bmp.setBinaryData(data,path);
			return new Texture(bmp);
		}

		BinaryPicTools.cacheDic={};
		BinaryPicTools.infoCacheDic={};
		return BinaryPicTools;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-19 上午11:46:38
	*/
	//class wraps.binarypic.ImageInfo
	var ImageInfo=(function(){
		function ImageInfo(){}
		__class(ImageInfo,'wraps.binarypic.ImageInfo');
		ImageInfo.readUInt32=function(buffer,offset,bigEndian){
			if (buffer.readUInt32){
				return buffer.readUInt32(offset,bigEndian);
			};
			var value=0;
			if (bigEndian){
				if (buffer.readUInt32BE){
					return buffer.readUInt32BE(offset);
				}
				value=(buffer[offset] << 24)+(buffer[offset+1] << 16)+(buffer[offset+2] << 8)+buffer[offset+3];
			}
			else {
				if (buffer.readUInt32LE){
					return buffer.readUInt32LE(offset);
				}
				value=buffer[offset]+(buffer[offset+1] << 8)+(buffer[offset+2] << 16)+(buffer[offset+3] << 24);
			}
			return value;
		}

		ImageInfo.readUInt16=function(buffer,offset,bigEndian){
			if (buffer.readUInt16){
				return buffer.readUInt16(offset,bigEndian);
			};
			var value=0;
			if (bigEndian){
				if (buffer.readUInt16BE){
					return buffer.readUInt16BE(offset);
				}
				value=(buffer[offset] << 8)+buffer[offset+1];
			}
			else {
				if (buffer.readUInt16LE){
					return buffer.readUInt16LE(offset);
				}
				value=buffer[offset]+(buffer[offset+1] << 8);
			}
			return value;
		}

		ImageInfo.readBit=function(buffer,offset,bitOffset){
			if (bitOffset > 7){
				offset+=Math.floor(bitOffset / 8);
				bitOffset=bitOffset % 8;
			};
			var b=buffer[offset];
			if (bitOffset < 7){
				b >>>=(7-bitOffset);
			};
			var val=b & 0x01;
			return val;
		}

		ImageInfo.readBits=function(buffer,offset,bitOffset,bitLen,signed){
			var val=0;
			var neg=false;
			if (signed){
				if (ImageInfo.readBit(buffer,offset,bitOffset)> 0){
					neg=true;
				}
				bitLen--;
				bitOffset++;
			};
			var bytes=[];
			for (var i=0;i < bitLen;i++){
				var b=ImageInfo.readBit(buffer,offset,bitOffset+i);
				if (i>0 && (bitLen-i)% 8==0){
					bytes.push(val);
					val=0;
				}
				val <<=1;
				val |=b;
			}
			bytes.push(val);
			val=new Buffer(bytes);;
			val.negative=neg?true:false;
			return val;
		}

		ImageInfo.imageInfoPng=function(buffer){
			var imageHeader=[0x49,0x48,0x44,0x52],
			pos=12;
			if (!ImageInfo.checkSig(buffer,pos,imageHeader)){
				return false;
			}
			pos+=4;
			return {
				type:'image',
				format:'PNG',
				mimeType:'image/png',
				width:ImageInfo.readUInt32(buffer,pos,true),
				height:ImageInfo.readUInt32(buffer,pos+4,true)
			};
		}

		ImageInfo.imageInfoJpg=function(buffer){
			var pos=2,
			len=buffer.length,
			sizeSig=[0xff,[0xc0,0xc2]];
			while (pos < len){
				if (ImageInfo.checkSig(buffer,pos,sizeSig)){
					pos+=5;
					return {
						type:'image',
						format:'JPG',
						mimeType:'image/jpeg',
						width:ImageInfo.readUInt16(buffer,pos+2,true),
						height:ImageInfo.readUInt16(buffer,pos,true)
					};
				}
				pos+=2;
				var size=ImageInfo.readUInt16(buffer,pos,true);
				pos+=size;
			}
		}

		ImageInfo.imageInfoGif=function(buffer){
			var pos=6;
			return {
				type:'image',
				format:'GIF',
				mimeType:'image/gif',
				width:ImageInfo.readUInt16(buffer,pos,false),
				height:ImageInfo.readUInt16(buffer,pos+2,false)
			};
		}

		ImageInfo.checkSig=function(buffer,offset,sig){
			var len=sig.length;
			for (var i=0;i < len;i++){
				var b=buffer[i+offset],
				s=sig[i],
				m=false;
				if ('number'==typeof s){
					m=s===b;
				}
				else {
					for (var k in s){
						var o=s[k];
						if (o===b){
							m=true;
						}
					}
				}
				if (!m){
					return false;
				}
			}
			return true;
		}

		ImageInfo.imageInfo=function(buffer){
			var pngSig=[0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a];
			var jpgSig=[0xff,0xd8,0xff];
			var gifSig=[0x47,0x49,0x46,0x38,[0x37,0x39],0x61];
			var swfSig=[[0x46,0x43],0x57,0x53];
			if (ImageInfo.checkSig(buffer,0,pngSig))return ImageInfo.imageInfoPng(buffer);
			if (ImageInfo.checkSig(buffer,0,jpgSig))return ImageInfo.imageInfoJpg(buffer);
			if (ImageInfo.checkSig(buffer,0,gifSig))return ImageInfo.imageInfoGif(buffer);
			return false;
		}

		return ImageInfo;
	})()


	/**
	*...
	*@author ww
	*/
	//class wraps.binarypic.JPGTools
	var JPGTools=(function(){
		function JPGTools(){}
		__class(JPGTools,'wraps.binarypic.JPGTools');
		var __proto=JPGTools.prototype;
		__proto.PNGTools=function(){}
		JPGTools.init=function(){
			var zclss;
			zclss=JpegImage;
			JPGTools.JPG=zclss;
		}

		JPGTools.createCanvasByBinary=function(data){
			var canvas=new HTMLCanvas("2D");
			var ctx=canvas.getContext('2d');
			canvas.size(100,100);
			var jpg;
			jpg=new JPGTools.JPG();
			jpg.parse(data);
			return JPGTools.renderJpgToCanvas(jpg,canvas);
		}

		JPGTools.renderJpgToCanvas=function(jpg,canvas){
			var ctx;
			ctx=canvas.source.getContext("2d");
			canvas.size(jpg.width,jpg.height);
			var data;
			data=ctx.createImageData(jpg.width,jpg.height);
			jpg.copyToImageData(data);
			ctx.putImageData(data,0,0);
			return canvas;
		}

		JPGTools.createTextureByBinary=function(data){
			var canvas;
			canvas=wraps.binarypic.JPGTools.createCanvasByBinary(data);
			return new Texture(canvas);
		}

		JPGTools.JPG=null
		return JPGTools;
	})()


	/**
	*...
	*@author ww
	*/
	//class wraps.binarypic.PNGTools
	var PNGTools=(function(){
		function PNGTools(){}
		__class(PNGTools,'wraps.binarypic.PNGTools');
		PNGTools.init=function(){
			var zclss;
			zclss=PNG;
			PNGTools.PNG=zclss;
		}

		PNGTools.loadPngToCanvas=function(url){
			var canvas=new HTMLCanvas("2D");
			var ctx=canvas.getContext('2d');
			canvas.size(100,100);
			PNGTools.PNG.load(url,canvas.source);
			return canvas;
		}

		PNGTools.createCanvasByBinary=function(data){
			var canvas=new HTMLCanvas("2D");
			var ctx=canvas.getContext('2d');
			PNGTools.PNG.setByData(data,canvas.source);
			canvas["_w"]=canvas.source.width;
			canvas["_h"]=canvas.source.height;
			return canvas;
		}

		PNGTools.createTextureByBinary=function(data){
			var canvas;
			canvas=wraps.binarypic.PNGTools.createCanvasByBinary(data);
			return new Texture(canvas);
		}

		PNGTools.PNG=null
		return PNGTools;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-20 下午4:14:49
	*/
	//class wraps.SMD5
	var SMD5=(function(){
		function SMD5(){}
		__class(SMD5,'wraps.SMD5');
		SMD5.safeAdd=function(x,y){
			var lsw=(x & 0xFFFF)+(y & 0xFFFF);
			var msw=(x >> 16)+(y >> 16)+(lsw >> 16);
			return (msw << 16)| (lsw & 0xFFFF);
		}

		SMD5.bitRotateLeft=function(num,cnt){
			return (num << cnt)| (num >>> (32-cnt))
		}

		SMD5.md5cmn=function(q,a,b,x,s,t){
			return SMD5.safeAdd(SMD5.bitRotateLeft(SMD5.safeAdd(SMD5.safeAdd(a,q),SMD5.safeAdd(x,t)),s),b)
		}

		SMD5.md5ff=function(a,b,c,d,x,s,t){
			return SMD5.md5cmn((b & c)| ((~b)& d),a,b,x,s,t)
		}

		SMD5.md5gg=function(a,b,c,d,x,s,t){
			return SMD5.md5cmn((b & d)| (c & (~d)),a,b,x,s,t)
		}

		SMD5.md5hh=function(a,b,c,d,x,s,t){
			return SMD5.md5cmn(b ^ c ^ d,a,b,x,s,t)
		}

		SMD5.md5ii=function(a,b,c,d,x,s,t){
			return SMD5.md5cmn(c ^ (b | (~d)),a,b,x,s,t)
		}

		SMD5.binlMD5=function(x,len){
			x[len >> 5] |=0x80 << (len % 32)
			x[(((len+64)>>> 9)<< 4)+14]=len;
			var i=0;
			var olda=0;
			var oldb=0;
			var oldc=0;
			var oldd=0;
			var a=1732584193;
			var b=-271733879;
			var c=-1732584194;
			var d=271733878;
			for (i=0;i < x.length;i+=16){
				olda=a
				oldb=b
				oldc=c
				oldd=d
				a=SMD5.md5ff(a,b,c,d,x[i],7,-680876936)
				d=SMD5.md5ff(d,a,b,c,x[i+1],12,-389564586)
				c=SMD5.md5ff(c,d,a,b,x[i+2],17,606105819)
				b=SMD5.md5ff(b,c,d,a,x[i+3],22,-1044525330)
				a=SMD5.md5ff(a,b,c,d,x[i+4],7,-176418897)
				d=SMD5.md5ff(d,a,b,c,x[i+5],12,1200080426)
				c=SMD5.md5ff(c,d,a,b,x[i+6],17,-1473231341)
				b=SMD5.md5ff(b,c,d,a,x[i+7],22,-45705983)
				a=SMD5.md5ff(a,b,c,d,x[i+8],7,1770035416)
				d=SMD5.md5ff(d,a,b,c,x[i+9],12,-1958414417)
				c=SMD5.md5ff(c,d,a,b,x[i+10],17,-42063)
				b=SMD5.md5ff(b,c,d,a,x[i+11],22,-1990404162)
				a=SMD5.md5ff(a,b,c,d,x[i+12],7,1804603682)
				d=SMD5.md5ff(d,a,b,c,x[i+13],12,-40341101)
				c=SMD5.md5ff(c,d,a,b,x[i+14],17,-1502002290)
				b=SMD5.md5ff(b,c,d,a,x[i+15],22,1236535329)
				a=SMD5.md5gg(a,b,c,d,x[i+1],5,-165796510)
				d=SMD5.md5gg(d,a,b,c,x[i+6],9,-1069501632)
				c=SMD5.md5gg(c,d,a,b,x[i+11],14,643717713)
				b=SMD5.md5gg(b,c,d,a,x[i],20,-373897302)
				a=SMD5.md5gg(a,b,c,d,x[i+5],5,-701558691)
				d=SMD5.md5gg(d,a,b,c,x[i+10],9,38016083)
				c=SMD5.md5gg(c,d,a,b,x[i+15],14,-660478335)
				b=SMD5.md5gg(b,c,d,a,x[i+4],20,-405537848)
				a=SMD5.md5gg(a,b,c,d,x[i+9],5,568446438)
				d=SMD5.md5gg(d,a,b,c,x[i+14],9,-1019803690)
				c=SMD5.md5gg(c,d,a,b,x[i+3],14,-187363961)
				b=SMD5.md5gg(b,c,d,a,x[i+8],20,1163531501)
				a=SMD5.md5gg(a,b,c,d,x[i+13],5,-1444681467)
				d=SMD5.md5gg(d,a,b,c,x[i+2],9,-51403784)
				c=SMD5.md5gg(c,d,a,b,x[i+7],14,1735328473)
				b=SMD5.md5gg(b,c,d,a,x[i+12],20,-1926607734)
				a=SMD5.md5hh(a,b,c,d,x[i+5],4,-378558)
				d=SMD5.md5hh(d,a,b,c,x[i+8],11,-2022574463)
				c=SMD5.md5hh(c,d,a,b,x[i+11],16,1839030562)
				b=SMD5.md5hh(b,c,d,a,x[i+14],23,-35309556)
				a=SMD5.md5hh(a,b,c,d,x[i+1],4,-1530992060)
				d=SMD5.md5hh(d,a,b,c,x[i+4],11,1272893353)
				c=SMD5.md5hh(c,d,a,b,x[i+7],16,-155497632)
				b=SMD5.md5hh(b,c,d,a,x[i+10],23,-1094730640)
				a=SMD5.md5hh(a,b,c,d,x[i+13],4,681279174)
				d=SMD5.md5hh(d,a,b,c,x[i],11,-358537222)
				c=SMD5.md5hh(c,d,a,b,x[i+3],16,-722521979)
				b=SMD5.md5hh(b,c,d,a,x[i+6],23,76029189)
				a=SMD5.md5hh(a,b,c,d,x[i+9],4,-640364487)
				d=SMD5.md5hh(d,a,b,c,x[i+12],11,-421815835)
				c=SMD5.md5hh(c,d,a,b,x[i+15],16,530742520)
				b=SMD5.md5hh(b,c,d,a,x[i+2],23,-995338651)
				a=SMD5.md5ii(a,b,c,d,x[i],6,-198630844)
				d=SMD5.md5ii(d,a,b,c,x[i+7],10,1126891415)
				c=SMD5.md5ii(c,d,a,b,x[i+14],15,-1416354905)
				b=SMD5.md5ii(b,c,d,a,x[i+5],21,-57434055)
				a=SMD5.md5ii(a,b,c,d,x[i+12],6,1700485571)
				d=SMD5.md5ii(d,a,b,c,x[i+3],10,-1894986606)
				c=SMD5.md5ii(c,d,a,b,x[i+10],15,-1051523)
				b=SMD5.md5ii(b,c,d,a,x[i+1],21,-2054922799)
				a=SMD5.md5ii(a,b,c,d,x[i+8],6,1873313359)
				d=SMD5.md5ii(d,a,b,c,x[i+15],10,-30611744)
				c=SMD5.md5ii(c,d,a,b,x[i+6],15,-1560198380)
				b=SMD5.md5ii(b,c,d,a,x[i+13],21,1309151649)
				a=SMD5.md5ii(a,b,c,d,x[i+4],6,-145523070)
				d=SMD5.md5ii(d,a,b,c,x[i+11],10,-1120210379)
				c=SMD5.md5ii(c,d,a,b,x[i+2],15,718787259)
				b=SMD5.md5ii(b,c,d,a,x[i+9],21,-343485551)
				a=SMD5.safeAdd(a,olda)
				b=SMD5.safeAdd(b,oldb)
				c=SMD5.safeAdd(c,oldc)
				d=SMD5.safeAdd(d,oldd)
			}
			return [a,b,c,d]
		}

		SMD5.binl2rstr=function(input){
			var i=0;
			var output='';
			var length32=input.length *32
			for (i=0;i < length32;i+=8){
				output+=String.fromCharCode((input[i >> 5] >>> (i % 32))& 0xFF)
			}
			return output;
		}

		SMD5.rstr2binl=function(input){
			var i=0;
			var output=[]
			output[(input.length >> 2)-1]=undefined
			for (i=0;i < output.length;i+=1){
				output[i]=0
			};
			var length8=input.length *8
			for (i=0;i < length8;i+=8){
				output[i >> 5] |=(input.charCodeAt(i / 8)& 0xFF)<< (i % 32)
			}
			return output;
		}

		SMD5.rstrMD5=function(s){
			return SMD5.binl2rstr(SMD5.binlMD5(SMD5.rstr2binl(s),s.length *8))
		}

		SMD5.rstrHMACMD5=function(key,data){
			var i=0;
			var bkey=SMD5.rstr2binl(key);
			var ipad=[];
			var opad=[];
			var hash;
			ipad[15]=opad[15]=undefined;
			if (bkey.length > 16){
				bkey=SMD5.binlMD5(bkey,key.length *8)
			}
			for (i=0;i < 16;i+=1){
				ipad[i]=bkey[i] ^ 0x36363636
				opad[i]=bkey[i] ^ 0x5C5C5C5C
			}
			hash=SMD5.binlMD5(ipad.concat(SMD5.rstr2binl(data)),512+data.length *8)
			return SMD5.binl2rstr(SMD5.binlMD5(opad.concat(hash),512+128))
		}

		SMD5.rstr2hex=function(input){
			var hexTab='0123456789abcdef';
			var output='';
			var x=0;
			var i=0;
			for (i=0;i < input.length;i+=1){
				x=input.charCodeAt(i)
				output+=hexTab.charAt((x >>> 4)& 0x0F)+
				hexTab.charAt(x & 0x0F)
			}
			return output
		}

		SMD5.str2rstrUTF8=function(input){
			return unescape(encodeURIComponent(input))
		}

		SMD5.rawMD5=function(s){
			return SMD5.rstrMD5(SMD5.str2rstrUTF8(s))
		}

		SMD5.hexMD5=function(s){
			return SMD5.rstr2hex(SMD5.rawMD5(s))
		}

		SMD5.rawHMACMD5=function(k,d){
			return SMD5.rstrHMACMD5(SMD5.str2rstrUTF8(k),SMD5.str2rstrUTF8(d))
		}

		SMD5.hexHMACMD5=function(k,d){
			return SMD5.rstr2hex(SMD5.rawHMACMD5(k,d))
		}

		SMD5.md5=function(string,key,raw){
			if (!key){
				if (!raw){
					return SMD5.hexMD5(string)
				}
				return SMD5.rawMD5(string)
			}
			if (!raw){
				return SMD5.hexHMACMD5(key,string)
			}
			return SMD5.rawHMACMD5(key,string)
		}

		return SMD5;
	})()


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-16 下午1:26:53
	*/
	//class ide.event.Notices
	var Notices=(function(){
		function Notices(){}
		__class(Notices,'ide.event.Notices');
		Notices.RENDER_INITED="RenderInited";
		return Notices;
	})()


	/**
	*...
	*@author WW
	*/
	//class viewRender.ViewRenderBase
	var ViewRenderBase=(function(){
		function ViewRenderBase(){
			this.initFuns();
		}

		__class(ViewRenderBase,'viewRender.ViewRenderBase');
		var __proto=ViewRenderBase.prototype;
		__proto.initFuns=function(){
			Browser.window.renderBinds={};
			Browser.window.renderBinds.setData=Utils.bind(this.setData,this);
			Browser.window.renderBinds.updateData=Utils.bind(this.updateData,this);
			Browser.window.renderBinds.clearRender=Utils.bind(this.clearRender,this);
			Browser.window.renderBinds.sizeRender=Utils.bind(this.sizeRender,this);
			Browser.window.renderBinds.posRender=Utils.bind(this.posRender,this);
			Browser.window.renderBinds.getRenderData=Utils.bind(this.getRenderData,this);
			Browser.window.renderBinds.getStage=Utils.bind(this.getStage,this);
			Browser.window.renderBinds.setNotice=Utils.bind(this.setNotice,this);
		}

		__proto.getRenderData=function(){
			return null;
		}

		__proto.setData=function(data){}
		__proto.updateData=function(data){}
		__proto.clearRender=function(){}
		__proto.sizeRender=function(width,height){}
		__proto.posRender=function(x,y){}
		__proto.getStage=function(){
			return Laya.stage;
		}

		__proto.setNotice=function(notice){
			Notice$1.I=notice;
			Notice$1.notify("RenderInited");
		}

		return ViewRenderBase;
	})()


	//class laya.editor.core.Wraps.xml.XMLElementList extends Array
	var XMLElementList=(function(_super){
		function XMLElementList(value){
			this._value="";
			this._parentNode=null;
			XMLElementList.__super.call(this);
			__uns(this,['_value','_parentNode']);
			if (value){
				value="<data>"+value+"</data>";
				var list=XMLElementList.create(XMLElement.create(value).childNodes);
				for (var i=0;i < list.length;i++){
					this.push(list[i]);
				}
			}
			Object.defineProperty(this,'length',{value:this.length,writable:true,enumerable:false,configurable:false});
		}

		__class(XMLElementList,'laya.editor.core.Wraps.xml.XMLElementList',Array);
		var __proto=XMLElementList.prototype;
		Laya.imps(__proto,{"laya.editor.core.Wraps.xml.IXMLElement":true})
		__proto.childIndex=function(){
			if (this.lengths()==1){
				var xml=this[0];
				var parent=xml._parentNode;
				if (parent){
					var nodes=parent._childNodes;
					for (var i=0,n=nodes.length;i < n;i++){
						if (nodes[i]==xml){
							return i;
						}
					}
				}
			}
			return-1;
		}

		__proto.getAttributes=function(){
			return this.attributes();
		}

		__proto.attributes=function(){
			return this.getAttribute("*");
		}

		//xml.@name
		__proto.getAttribute=function(name){
			var arr=[],len=this.length;
			for (var i=0;i < len;i++){
				var attributes=this[i]._attributes;
				for (var j=0;j < attributes.length;j++){
					var value=attributes[j]['key'];
					if (name=="*" || value==name){
						arr.push({"key":attributes[j]['key'],"val":attributes[j]['val']});
					}
				}
			}
			if (name!="*"){
				return arr.length>0?arr[0].val:undefined;
			}
			return laya.editor.core.Wraps.xml.XMLElementList.createFromAttribute(arr);
		}

		//xml.@name
		__proto.attribute=function(name){
			return this.getAttribute(name);
		}

		//xml.@name=value;
		__proto.setAttribute=function(name,value){
			if (this.length==1){
				var o;
				for(var $each_o in this[0]._attributes){
					o=this[0]._attributes[$each_o];
					if (o['key']==name){
						o['val']=value;
						return value;
					}
				}
				this[0]._attributes.push({key:name,val:value});
			}
			return null;
		}

		//xml.name;
		__proto.getChildByName=function(name){
			return this.child(name);
		}

		__proto.child=function(name){
			if (!this.length)
				return new XMLElementList();
			var arr=[],len=this.lengths();
			for (var i=0;i < len;i++){
				var nodes=this[i].getChildByName(name);
				(nodes && nodes.length)&& (arr=arr.concat(this[i].getChildByName(name)));
			}
			return XMLElementList.create(arr);
		}

		//xml.(@attribute==value);或者xml.(@attribute!=value)
		__proto.getChildByAttribute=function(attribute,value,equal){
			(equal===void 0)&& (equal=true);
			if (attribute=="" || attribute==null)
				return null;
			if (value=="" || value==null)
				return null;
			var ar=[],len=this.length;
			for (var i=0;i < len;i++){
				var n=this [i];
				for (var j=0;j < n._attributes.length;j++){
					if (n._attributes[j]['key']==attribute){
						if (equal && n._attributes[j]['val']==value){
							ar.push(n);
							}else if (!equal && n._attributes[j]['val'] !=value){
							ar.push(n);
						}
					}
				}
			}
			return laya.editor.core.Wraps.xml.XMLElementList.create(ar);
		}

		__proto.getChildAt=function(index){
			if (!this.length || index > this.length)
				return null;
			else
			return this[index];
		}

		// return this[0].getChildAt(index);
		__proto.children=function(){
			var xl=new XMLElementList();
			var len=this.lengths();
			for (var i=0;i < len;i++){
				var childs=this[i]._childNodes;
				var n=childs.length;
				for (var j=0;j < n;j++){
					xl.push(childs[j]);
				}
				if(n<1){
					xl.push(this[i]);
				}
			}
			return xl;
		}

		__proto.elements=function(name){
			(name===void 0)&& (name="*");
			if (!this.length)
				return new XMLElementList();
			if (name=="*")
				return this.children();
			return this.child(name);
		}

		__proto.appendChild=function(value){
			if ((typeof value=='string')){
				value=XMLElement.create(String(value));
			}
			this.__doAdd__(value);
			return value;
		}

		__proto.__addChild__=function(value){
			if ((value instanceof laya.editor.core.Wraps.xml.XMLElement )){
				var ixl=value._childNodes,len=ixl.length;
				for (var i=0;i < len;i++){
					this.__doAdd__(ixl[i]);
				}
				this.push(value);
				}else if ((value instanceof laya.editor.core.Wraps.xml.XMLElementList )){
				len=value.lengths();
				for (i=0;i < len;i++){
					this.__addChild__(value[i]);
				}
			}
		}

		__proto.__doAdd__=function(value){
			if (this.indexOf(value)!=-1)
				return;
			var n=value._nodeName;
			var x=this[n];
			if ((x instanceof laya.editor.core.Wraps.xml.XMLElementList )){
				x.__addChild__(value);
				}else if ((x instanceof laya.editor.core.Wraps.xml.XMLElement )){
				var tmp=x;
				x=this[n]=new XMLElementList();
				Object.defineProperty(this,[n],{value:this[n],writable:true,enumerable:false,configurable:false});
				x.__addChild__(tmp);
				x.__addChild__(value);
				}else if (!x){
				x=this[n]=new XMLElementList();
				x.__addChild__(value);
				Object.defineProperty(this,[n],{value:this[n],writable:true,enumerable:false,configurable:false});
			}
		}

		__proto.setName=function(str){
			if (this.length==1){
				this[0]._nodeName=str;
			}
		}

		__proto.copyFrom=function(source){
			if (this.lengths()> 1)
				return null;
			var il=((source instanceof laya.editor.core.Wraps.xml.XMLElementList ));
			if (source.lengths()> 1)
				return null;
			if (il)
				this[0].copyFrom(source.getChildAt(0));
			else
			this[0].copyFrom(source);
			return this [0];
		}

		__proto.hasOwnProperty=function(pName){
			if (this.length==0){
				return this[0].hasOwnProperty(pName);
				}else {
				var x;
				for(var $each_x in this){
					x=this[$each_x];
					if (x['hasOwnProperty'](pName))
						return true;
				}
			}
			return false;
		}

		__proto.setChildByName=function(nName,value){
			return null;
		}

		// return this;
		__proto.hasComplexContent=function(){
			return this.length > 0;
		}

		__proto.hasSimpleContent=function(){
			var len=this.length;
			for (var i=0;i < len;i++){
				if (this['_nodeValue'] !=null){
					return true
				}
			}
			return false
		}

		__proto.name=function(){
			if (this.length==1)
				return this[0].name();
			return null;
		}

		__proto.lengths=function(){
			for (var i=this.length-1;i >=0;i--){
				if (this[i]==undefined)
					this.splice(i,1);
			}
			return this.length;
		}

		__proto.toString=function(){
			var str="";
			if (this.lengths()){
				if (this.length==1){
					str+=this[0].toString();
					}else {
					for (var i=0;i < this.length;i++){
						if (this.length > 1)
							str+=this[i].getString();
					}
				}
			}
			return str;
		}

		__proto.toXMLString=function(){
			var str="";
			for (var i=0;i < this.length;i++){
				str+=this[i].toXMLString();
			}
			return str;
		}

		__proto.parent=function(){
			return this._parentNode;
		}

		__proto.copy=function(){
			var list=new XMLElementList(this.toXMLString());
			return list;
		}

		__proto.getString=function(){
			var str="";
			str=this.toXMLString();
			return str;
		}

		__proto.comments=function(){
			return null;
		}

		__proto.contains=function(value){
			return true;
		}

		__getset(0,__proto,'nodeType',function(){
			return "*";
		});

		__getset(0,__proto,'childNodes',function(){
			return null;
		});

		__getset(0,__proto,'value',function(){
			if (this.length==1){
				return this[0]._nodeValue;
			}
			return "";
			},function(str){
			if (this.length==1){
				this[0]._nodeValue=str;
			}
		});

		__getset(0,__proto,'localName',function(){
			return null
			},function(str){
			if (this.length==1){
				this[0]._nodeName=str;
			}
		});

		__getset(0,__proto,'nodeName',function(){
			return null;
		});

		__uns(__proto,['childIndex','getAttributes','attributes','getAttribute','attribute','setAttribute','getChildByName','child','getChildByAttribute','getChildAt','children','elements','appendChild','__addChild__','__doAdd__','setName','copyFrom','hasOwnProperty','setChildByName','hasComplexContent','hasSimpleContent','name','lengths','toString','toXMLString','parent','copy','getString','comments','contains']);
		XMLElementList.create=function(arr){
			var xl=new XMLElementList();
			for (var i=0;i < arr.length;i++){
				xl.__addChild__(arr[i]);
			}
			return xl;
		}

		XMLElementList.createFromAttribute=function(arr){
			var xl=new XMLElementList();
			for (var i=0;i < arr.length;i++){
				var xml=new XMLElement();
				var obj=arr[i];
				xml._nodeName=obj.key;
				xml._nodeValue=obj.val;
				xl.push(xml);
			}
			return xl;
		}

		return XMLElementList;
	})(Array)


	/**
	*<code>Node</code> 类用于创建节点对象，节点是最基本的元素。
	*/
	//class laya.display.Node extends laya.events.EventDispatcher
	var Node=(function(_super){
		function Node(){
			this._bits=0;
			this._displayedInStage=false;
			this._parent=null;
			this.conchModel=null;
			this.name="";
			this.destroyed=false;
			Node.__super.call(this);
			this._childs=Node.ARRAY_EMPTY;
			this._$P=Node.PROP_EMPTY;
			this.timer=Laya.timer;
			this.conchModel=Render.isConchNode ? this.createConchModel():null;
		}

		__class(Node,'laya.display.Node',_super);
		var __proto=Node.prototype;
		/**@private */
		__proto._setBit=function(type,value){
			if (type==0x1){
				var preValue=this._getBit(type);
				if (preValue !=value){
					this._updateDisplayedInstage();
				}
			}
			if (value){
				this._bits |=type;
				}else {
				this._bits &=~type;
			}
		}

		/**@private */
		__proto._getBit=function(type){
			return (this._bits & type)!=0;
		}

		/**@private */
		__proto._setUpNoticeChain=function(){
			if (this._getBit(0x1)){
				this._setUpNoticeType(0x1);
			}
		}

		/**@private */
		__proto._setUpNoticeType=function(type){
			var ele=this;
			ele._setBit(type,true);
			ele=ele.parent;
			while (ele){
				if (ele._getBit(type))return;
				ele._setBit(type,true);
				ele=ele.parent;
			}
		}

		/**
		*增加事件侦听器，以使侦听器能够接收事件通知。
		*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnabled 的值为 true(如果父节点mouseEnabled=false，则停止设置父节点mouseEnabled属性)。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.on=function(type,caller,listener,args){
			if (type==="display" || type==="undisplay"){
				if (!this._getBit(0x1)){
					this._setUpNoticeType(0x1);
				}
			}
			return this._createListener(type,caller,listener,args,false);
		}

		/**
		*增加事件侦听器，以使侦听器能够接收事件通知，此侦听事件响应一次后则自动移除侦听。
		*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnabled 的值为 true(如果父节点mouseEnabled=false，则停止设置父节点mouseEnabled属性)。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.once=function(type,caller,listener,args){
			if (type==="display" || type==="undisplay"){
				if (!this._getBit(0x1)){
					this._setUpNoticeType(0x1);
				}
			}
			return this._createListener(type,caller,listener,args,true);
		}

		/**@private */
		__proto.createConchModel=function(){
			return null;
		}

		/**
		*<p>销毁此对象。destroy对象默认会把自己从父节点移除，并且清理自身引用关系，等待js自动垃圾回收机制回收。destroy后不能再使用。</p>
		*@param destroyChild 是否同时销毁子节点，若值为true,则销毁子节点，否则不销毁子节点。
		*/
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			this.destroyed=true;
			this._parent && this._parent.removeChild(this);
			if (this._childs){
				if (destroyChild)this.destroyChildren();
				else this.removeChildren();
			}
			this._childs=null;
			this._$P=null;
			this.offAll();
		}

		/**
		*销毁所有子对象，不销毁自己本身。
		*/
		__proto.destroyChildren=function(){
			if (this._childs){
				for (var i=this._childs.length-1;i >-1;i--){
					this._childs[i].destroy(true);
				}
			}
		}

		/**
		*添加子节点。
		*@param node 节点对象
		*@return 返回添加的节点
		*/
		__proto.addChild=function(node){
			if (!node || this.destroyed || node===this)return node;
			if ((node).zOrder)this._set$P("hasZorder",true);
			if (node._parent===this){
				var index=this.getChildIndex(node);
				if (index!==this._childs.length-1){
					this._childs.splice(index,1);
					this._childs.push(node);
					if (this.conchModel){
						this.conchModel.removeChild(node.conchModel);
						this.conchModel.addChildAt(node.conchModel,this._childs.length-1);
					}
					this._childChanged();
				}
				}else {
				node.parent && node.parent.removeChild(node);
				this._childs===Node.ARRAY_EMPTY && (this._childs=[]);
				this._childs.push(node);
				this.conchModel && this.conchModel.addChildAt(node.conchModel,this._childs.length-1);
				node.parent=this;
				this._childChanged();
			}
			return node;
		}

		/**
		*批量增加子节点
		*@param ...args 无数子节点。
		*/
		__proto.addChildren=function(__args){
			var args=arguments;
			var i=0,n=args.length;
			while (i < n){
				this.addChild(args[i++]);
			}
		}

		/**
		*添加子节点到指定的索引位置。
		*@param node 节点对象。
		*@param index 索引位置。
		*@return 返回添加的节点。
		*/
		__proto.addChildAt=function(node,index){
			if (!node || this.destroyed || node===this)return node;
			if ((node).zOrder)this._set$P("hasZorder",true);
			if (index >=0 && index <=this._childs.length){
				if (node._parent===this){
					var oldIndex=this.getChildIndex(node);
					this._childs.splice(oldIndex,1);
					this._childs.splice(index,0,node);
					if (this.conchModel){
						this.conchModel.removeChild(node.conchModel);
						this.conchModel.addChildAt(node.conchModel,index);
					}
					this._childChanged();
					}else {
					node.parent && node.parent.removeChild(node);
					this._childs===Node.ARRAY_EMPTY && (this._childs=[]);
					this._childs.splice(index,0,node);
					this.conchModel && this.conchModel.addChildAt(node.conchModel,index);
					node.parent=this;
				}
				return node;
				}else {
				throw new Error("appendChildAt:The index is out of bounds");
			}
		}

		/**
		*根据子节点对象，获取子节点的索引位置。
		*@param node 子节点。
		*@return 子节点所在的索引位置。
		*/
		__proto.getChildIndex=function(node){
			return this._childs.indexOf(node);
		}

		/**
		*根据子节点的名字，获取子节点对象。
		*@param name 子节点的名字。
		*@return 节点对象。
		*/
		__proto.getChildByName=function(name){
			var nodes=this._childs;
			if (nodes){
				for (var i=0,n=nodes.length;i < n;i++){
					var node=nodes[i];
					if (node.name===name)return node;
				}
			}
			return null;
		}

		/**@private */
		__proto._get$P=function(key){
			return this._$P[key];
		}

		/**@private */
		__proto._set$P=function(key,value){
			if (!this.destroyed){
				this._$P===Node.PROP_EMPTY && (this._$P={});
				this._$P[key]=value;
			}
			return value;
		}

		/**
		*根据子节点的索引位置，获取子节点对象。
		*@param index 索引位置
		*@return 子节点
		*/
		__proto.getChildAt=function(index){
			return this._childs[index];
		}

		/**
		*设置子节点的索引位置。
		*@param node 子节点。
		*@param index 新的索引。
		*@return 返回子节点本身。
		*/
		__proto.setChildIndex=function(node,index){
			var childs=this._childs;
			if (index < 0 || index >=childs.length){
				throw new Error("setChildIndex:The index is out of bounds.");
			};
			var oldIndex=this.getChildIndex(node);
			if (oldIndex < 0)throw new Error("setChildIndex:node is must child of this object.");
			childs.splice(oldIndex,1);
			childs.splice(index,0,node);
			if (this.conchModel){
				this.conchModel.removeChild(node.conchModel);
				this.conchModel.addChildAt(node.conchModel,index);
			}
			this._childChanged();
			return node;
		}

		/**
		*@private
		*子节点发生改变。
		*@param child 子节点。
		*/
		__proto._childChanged=function(child){}
		/**
		*删除子节点。
		*@param node 子节点
		*@return 被删除的节点
		*/
		__proto.removeChild=function(node){
			if (!this._childs)return node;
			var index=this._childs.indexOf(node);
			return this.removeChildAt(index);
		}

		/**
		*从父容器删除自己，如已经被删除不会抛出异常。
		*@return 当前节点（ Node ）对象。
		*/
		__proto.removeSelf=function(){
			this._parent && this._parent.removeChild(this);
			return this;
		}

		/**
		*根据子节点名字删除对应的子节点对象，如果找不到不会抛出异常。
		*@param name 对象名字。
		*@return 查找到的节点（ Node ）对象。
		*/
		__proto.removeChildByName=function(name){
			var node=this.getChildByName(name);
			node && this.removeChild(node);
			return node;
		}

		/**
		*根据子节点索引位置，删除对应的子节点对象。
		*@param index 节点索引位置。
		*@return 被删除的节点。
		*/
		__proto.removeChildAt=function(index){
			var node=this.getChildAt(index);
			if (node){
				this._childs.splice(index,1);
				this.conchModel && this.conchModel.removeChild(node.conchModel);
				node.parent=null;
			}
			return node;
		}

		/**
		*删除指定索引区间的所有子对象。
		*@param beginIndex 开始索引。
		*@param endIndex 结束索引。
		*@return 当前节点对象。
		*/
		__proto.removeChildren=function(beginIndex,endIndex){
			(beginIndex===void 0)&& (beginIndex=0);
			(endIndex===void 0)&& (endIndex=0x7fffffff);
			if (this._childs && this._childs.length > 0){
				var childs=this._childs;
				if (beginIndex===0 && endIndex >=n){
					var arr=childs;
					this._childs=Node.ARRAY_EMPTY;
					}else {
					arr=childs.splice(beginIndex,endIndex-beginIndex);
				}
				for (var i=0,n=arr.length;i < n;i++){
					arr[i].parent=null;
					this.conchModel && this.conchModel.removeChild(arr[i].conchModel);
				}
			}
			return this;
		}

		/**
		*替换子节点。
		*@internal 将传入的新节点对象替换到已有子节点索引位置处。
		*@param newNode 新节点。
		*@param oldNode 老节点。
		*@return 返回新节点。
		*/
		__proto.replaceChild=function(newNode,oldNode){
			var index=this._childs.indexOf(oldNode);
			if (index >-1){
				this._childs.splice(index,1,newNode);
				if (this.conchModel){
					this.conchModel.removeChild(oldNode.conchModel);
					this.conchModel.addChildAt(newNode.conchModel,index);
				}
				oldNode.parent=null;
				newNode.parent=this;
				return newNode;
			}
			return null;
		}

		/**@private */
		__proto._updateDisplayedInstage=function(){
			var ele;
			ele=this;
			var stage=Laya.stage;
			this._displayedInStage=false;
			while (ele){
				if (ele._getBit(0x1)){
					this._displayedInStage=ele._displayedInStage;
					break ;
				}
				if (ele==stage || ele._displayedInStage){
					this._displayedInStage=true;
					break ;
				}
				ele=ele.parent;
			}
		}

		/**@private */
		__proto._setDisplay=function(value){
			if (this._displayedInStage!==value){
				this._displayedInStage=value;
				if (value)this.event("display");
				else this.event("undisplay");
			}
		}

		/**
		*@private
		*设置指定节点对象是否可见(是否在渲染列表中)。
		*@param node 节点。
		*@param display 是否可见。
		*/
		__proto._displayChild=function(node,display){
			var childs=node._childs;
			if (childs){
				for (var i=0,n=childs.length;i < n;i++){
					var child=childs[i];
					if (!child._getBit(0x1))continue ;
					if (child._childs.length > 0){
						this._displayChild(child,display);
						}else {
						child._setDisplay(display);
					}
				}
			}
			node._setDisplay(display);
		}

		/**
		*当前容器是否包含 <code>node</code> 节点。
		*@param node 某一个节点 <code>Node</code>。
		*@return 一个布尔值表示是否包含<code>node</code>节点。
		*/
		__proto.contains=function(node){
			if (node===this)return true;
			while (node){
				if (node.parent===this)return true;
				node=node.parent;
			}
			return false;
		}

		/**
		*定时重复执行某函数。功能同Laya.timer.timerLoop()。
		*@param delay 间隔时间(单位毫秒)。
		*@param caller 执行域(this)。
		*@param method 结束时的回调方法。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为true。
		*/
		__proto.timerLoop=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this.timer._create(false,true,delay,caller,method,args,coverBefore);
		}

		/**
		*定时执行某函数一次。功能同Laya.timer.timerOnce()。
		*@param delay 延迟时间(单位毫秒)。
		*@param caller 执行域(this)。
		*@param method 结束时的回调方法。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为true。
		*/
		__proto.timerOnce=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this.timer._create(false,false,delay,caller,method,args,coverBefore);
		}

		/**
		*定时重复执行某函数(基于帧率)。功能同Laya.timer.frameLoop()。
		*@param delay 间隔几帧(单位为帧)。
		*@param caller 执行域(this)。
		*@param method 结束时的回调方法。
		*@param args 回调参数。
		*@param coverBefore 是否覆盖之前的延迟执行，默认为true。
		*/
		__proto.frameLoop=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this.timer._create(true,true,delay,caller,method,args,coverBefore);
		}

		/**
		*定时执行一次某函数(基于帧率)。功能同Laya.timer.frameOnce()。
		*@param delay 延迟几帧(单位为帧)。
		*@param caller 执行域(this)
		*@param method 结束时的回调方法
		*@param args 回调参数
		*@param coverBefore 是否覆盖之前的延迟执行，默认为true
		*/
		__proto.frameOnce=function(delay,caller,method,args,coverBefore){
			(coverBefore===void 0)&& (coverBefore=true);
			this.timer._create(true,false,delay,caller,method,args,coverBefore);
		}

		/**
		*清理定时器。功能同Laya.timer.clearTimer()。
		*@param caller 执行域(this)。
		*@param method 结束时的回调方法。
		*/
		__proto.clearTimer=function(caller,method){
			this.timer.clear(caller,method);
		}

		/**
		*子对象数量。
		*/
		__getset(0,__proto,'numChildren',function(){
			return this._childs.length;
		});

		/**父节点。*/
		__getset(0,__proto,'parent',function(){
			return this._parent;
			},function(value){
			if (this._parent!==value){
				if (value){
					this._parent=value;
					this.event("added");
					if (this._getBit(0x1)){
						this._setUpNoticeChain();
						value.displayedInStage && this._displayChild(this,true);
					}
					value._childChanged(this);
					}else {
					this.event("removed");
					this._parent._childChanged();
					if (this._getBit(0x1))this._displayChild(this,false);
					this._parent=value;
				}
			}
		});

		/**表示是否在显示列表中显示。*/
		__getset(0,__proto,'displayedInStage',function(){
			if (this._getBit(0x1))return this._displayedInStage;
			this._setUpNoticeType(0x1);
			return this._displayedInStage;
		});

		Node.ARRAY_EMPTY=[];
		Node.PROP_EMPTY={};
		Node.NOTICE_DISPLAY=0x1;
		Node.MOUSEENABLE=0x2;
		return Node;
	})(EventDispatcher)


	/**
	*@private
	*<code>CSSStyle</code> 类是元素CSS样式定义类。
	*/
	//class laya.display.css.CSSStyle extends laya.display.css.Style
	var CSSStyle=(function(_super){
		function CSSStyle(ower){
			this._bgground=null;
			this._border=null;
			//this._ower=null;
			this._rect=null;
			this.lineHeight=0;
			CSSStyle.__super.call(this);
			this._padding=CSSStyle._PADDING;
			this._spacing=CSSStyle._SPACING;
			this._aligns=CSSStyle._ALIGNS;
			this._font=Font.EMPTY;
			this._ower=ower;
		}

		__class(CSSStyle,'laya.display.css.CSSStyle',_super);
		var __proto=CSSStyle.prototype;
		/**@inheritDoc */
		__proto.destroy=function(){
			this._ower=null;
			this._font=null;
			this._rect=null;
		}

		/**
		*复制传入的 CSSStyle 属性值。
		*@param src 待复制的 CSSStyle 对象。
		*/
		__proto.inherit=function(src){
			this._font=src._font;
			this._spacing=src._spacing===CSSStyle._SPACING ? CSSStyle._SPACING :src._spacing.slice();
			this.lineHeight=src.lineHeight;
		}

		/**@private */
		__proto._widthAuto=function(){
			return (this._type & 0x40000)!==0;
		}

		/**@inheritDoc */
		__proto.widthed=function(sprite){
			return (this._type & 0x8)!=0;
		}

		/**
		*@private
		*/
		__proto._calculation=function(type,value){
			if (value.indexOf('%')< 0)return false;
			var ower=this._ower;
			var parent=ower.parent;
			var rect=this._rect;
			function getValue (pw,w,nums){
				return (pw *nums[0]+w *nums[1]+nums[2]);
			}
			function onParentResize (type){
				var pw=parent.width,w=ower.width;
				rect.width && (ower.width=getValue(pw,w,rect.width));
				rect.height && (ower.height=getValue(pw,w,rect.height));
				rect.left && (ower.x=getValue(pw,w,rect.left));
				rect.top && (ower.y=getValue(pw,w,rect.top));
			}
			if (rect===null){
				parent._getCSSStyle()._type |=0x80000;
				parent.on("resize",this,onParentResize);
				this._rect=rect={input:{}};
			};
			var nums=value.split(' ');
			nums[0]=parseFloat(nums[0])/ 100;
			if (nums.length==1)
				nums[1]=nums[2]=0;
			else {
				nums[1]=parseFloat(nums[1])/ 100;
				nums[2]=parseFloat(nums[2]);
			}
			rect[type]=nums;
			rect.input[type]=value;
			onParentResize(type);
			return true;
		}

		/**
		*是否已设置高度。
		*@param sprite 显示对象 Sprite。
		*@return 一个Boolean 表示是否已设置高度。
		*/
		__proto.heighted=function(sprite){
			return (this._type & 0x2000)!=0;
		}

		/**
		*设置宽高。
		*@param w 宽度。
		*@param h 高度。
		*/
		__proto.size=function(w,h){
			var ower=this._ower;
			var resize=false;
			if (w!==-1 && w !=this._ower.width){
				this._type |=0x8;
				this._ower.width=w;
				resize=true;
			}
			if (h!==-1 && h !=this._ower.height){
				this._type |=0x2000;
				this._ower.height=h;
				resize=true;
			}
			if (resize){
				ower._layoutLater();
				(this._type & 0x80000)&& ower.event("resize",this);
			}
		}

		/**@private */
		__proto._getAlign=function(){
			return this._aligns[0];
		}

		/**@private */
		__proto._getValign=function(){
			return this._aligns[1];
		}

		/**@private */
		__proto._getCssFloat=function(){
			return (this._type & 0x8000)!=0 ? 0x8000 :0;
		}

		__proto._createFont=function(){
			return (this._type & 0x1000)? this._font :(this._type |=0x1000,this._font=new Font(this._font));
		}

		/**@inheritDoc */
		__proto.render=function(sprite,context,x,y){
			var w=sprite.width;
			var h=sprite.height;
			x-=sprite.pivotX;
			y-=sprite.pivotY;
			this._bgground && this._bgground.color !=null && context.ctx.fillRect(x,y,w,h,this._bgground.color);
			this._border && this._border.color && context.drawRect(x,y,w,h,this._border.color.strColor,this._border.size);
		}

		/**@inheritDoc */
		__proto.getCSSStyle=function(){
			return this;
		}

		/**
		*设置 CSS 样式字符串。
		*@param text CSS样式字符串。
		*/
		__proto.cssText=function(text){
			this.attrs(CSSStyle.parseOneCSS(text,';'));
		}

		/**
		*根据传入的属性名、属性值列表，设置此对象的属性值。
		*@param attrs 属性名与属性值列表。
		*/
		__proto.attrs=function(attrs){
			if (attrs){
				for (var i=0,n=attrs.length;i < n;i++){
					var attr=attrs[i];
					this[attr[0]]=attr[1];
				}
			}
		}

		/**@inheritDoc */
		__proto.setTransform=function(value){
			(value==='none')? (this._tf=Style._TF_EMPTY):this.attrs(CSSStyle.parseOneCSS(value,','));
		}

		/**
		*定义 X 轴、Y 轴移动转换。
		*@param x X 轴平移量。
		*@param y Y 轴平移量。
		*/
		__proto.translate=function(x,y){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.translateX=x;
			this._tf.translateY=y;
		}

		/**
		*定义 缩放转换。
		*@param x X 轴缩放值。
		*@param y Y 轴缩放值。
		*/
		__proto.scale=function(x,y){
			this._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());
			this._tf.scaleX=x;
			this._tf.scaleY=y;
		}

		/**@private */
		__proto._enableLayout=function(){
			return (this._type & 0x2)===0 && (this._type & 0x4)===0;
		}

		/**
		*是否显示为块级元素。
		*/
		__getset(0,__proto,'block',_super.prototype._$get_block,function(value){
			value ? (this._type |=0x1):(this._type &=(~0x1));
		});

		/**
		*垂直对齐方式。
		*/
		__getset(0,__proto,'valign',function(){
			return CSSStyle._valigndef[this._aligns[1]];
			},function(value){
			this._aligns===CSSStyle._ALIGNS && (this._aligns=[0,0,0]);
			this._aligns[1]=CSSStyle._valigndef[value];
		});

		/**
		*高度。
		*/
		__getset(0,__proto,'height',null,function(h){
			this._type |=0x2000;
			if ((typeof h=='string')){
				if (this._calculation("height",h))return;
				h=parseInt(h);
			}
			this.size(-1,h);
		});

		/**
		*宽度。
		*/
		__getset(0,__proto,'width',null,function(w){
			this._type |=0x8;
			if ((typeof w=='string')){
				var offset=w.indexOf('auto');
				if (offset >=0){
					this._type |=0x40000;
					w=w.substr(0,offset);
				}
				if (this._calculation("width",w))return;
				w=parseInt(w);
			}
			this.size(w,-1);
		});

		/**
		*字体粗细。
		*/
		__getset(0,__proto,'fontWeight',function(){
			return this._font.weight;
			},function(value){
			this._createFont().weight=value;
		});

		/**
		*表示左边距。
		*/
		__getset(0,__proto,'left',null,function(value){
			var ower=this._ower;
			if (((typeof value=='string'))){
				if (value==="center")
					value="50% -50% 0";
				else if (value==="right")
				value="100% -100% 0";
				if (this._calculation("left",value))return;
				value=parseInt(value);
			}
			ower.x=value;
		});

		__getset(0,__proto,'_translate',null,function(value){
			this.translate(value[0],value[1]);
		});

		/**@inheritDoc */
		__getset(0,__proto,'absolute',function(){
			return (this._type & 0x4)!==0;
		});

		/**
		*表示上边距。
		*/
		__getset(0,__proto,'top',null,function(value){
			var ower=this._ower;
			if (((typeof value=='string'))){
				if (value==="middle")
					value="50% -50% 0";
				else if (value==="bottom")
				value="100% -100% 0";
				if (this._calculation("top",value))return;
				value=parseInt(value);
			}
			ower.y=value;
		});

		/**
		*水平对齐方式。
		*/
		__getset(0,__proto,'align',function(){
			return CSSStyle._aligndef[this._aligns[0]];
			},function(value){
			this._aligns===CSSStyle._ALIGNS && (this._aligns=[0,0,0]);
			this._aligns[0]=CSSStyle._aligndef[value];
		});

		/**
		*表示是否加粗。
		*/
		__getset(0,__proto,'bold',function(){
			return this._font.bold;
			},function(value){
			this._createFont().bold=value;
		});

		/**
		*边距信息。
		*/
		__getset(0,__proto,'padding',function(){
			return this._padding;
			},function(value){
			this._padding=value;
		});

		/**
		*行间距。
		*/
		__getset(0,__proto,'leading',function(){
			return this._spacing[1];
			},function(d){
			((typeof d=='string'))&& (d=parseInt(d+""));
			this._spacing===CSSStyle._SPACING && (this._spacing=[0,0]);
			this._spacing[1]=d;
		});

		/**
		*是否是行元素。
		*/
		__getset(0,__proto,'lineElement',function(){
			return (this._type & 0x10000)!=0;
			},function(value){
			value ? (this._type |=0x10000):(this._type &=(~0x10000));
		});

		/**
		*浮动方向。
		*/
		__getset(0,__proto,'cssFloat',function(){
			return (this._type & 0x8000)!=0 ? "right" :"left";
			},function(value){
			this.lineElement=false;
			value==="right" ? (this._type |=0x8000):(this._type &=(~0x8000));
		});

		/**
		*添加到文本的修饰。
		*/
		__getset(0,__proto,'textDecoration',function(){
			return this._font.decoration;
			},function(value){
			this._createFont().decoration=value;
		});

		/**
		*设置如何处理元素内的空白。
		*/
		__getset(0,__proto,'whiteSpace',function(){
			return (this._type & 0x20000)? "nowrap" :"";
			},function(type){
			type==="nowrap" && (this._type |=0x20000);
			type==="none" && (this._type &=~0x20000);
		});

		__getset(0,__proto,'background',null,function(value){
			if (!value){
				this._bgground=null;
				return;
			}
			this._bgground || (this._bgground={});
			this._bgground.color=value;
			this._ower.conchModel && this._ower.conchModel.bgColor(value);
			this._type |=0x4000;
			this._ower._renderType |=0x100;
		});

		/**
		*表示是否换行。
		*/
		__getset(0,__proto,'wordWrap',function(){
			return (this._type & 0x20000)===0;
			},function(value){
			value ? (this._type &=~0x20000):(this._type |=0x20000);
		});

		/**
		*字体颜色。
		*/
		__getset(0,__proto,'color',function(){
			return this._font.color;
			},function(value){
			this._createFont().color=value;
		});

		/**
		*<p>指定文本字段是否是密码文本字段。</p>
		*如果此属性的值为 true，则文本字段被视为密码文本字段，并使用星号而不是实际字符来隐藏输入的字符。如果为 false，则不会将文本字段视为密码文本字段。
		*/
		__getset(0,__proto,'password',function(){
			return this._font.password;
			},function(value){
			this._createFont().password=value;
		});

		/**
		*背景颜色。
		*/
		__getset(0,__proto,'backgroundColor',function(){
			return this._bgground ? this._bgground.color :null;
			},function(value){
			if (value==='none')this._bgground=null;
			else (this._bgground || (this._bgground={}),this._bgground.color=value);
			this._ower.conchModel && this._ower.conchModel.bgColor(value);
			this._ower._renderType |=0x100;
		});

		/**
		*字体信息。
		*/
		__getset(0,__proto,'font',function(){
			return this._font.toString();
			},function(value){
			this._createFont().set(value);
		});

		/**
		*文本的粗细。
		*/
		__getset(0,__proto,'weight',null,function(value){
			this._createFont().weight=value;
		});

		/**
		*间距。
		*/
		__getset(0,__proto,'letterSpacing',function(){
			return this._spacing[0];
			},function(d){
			((typeof d=='string'))&& (d=parseInt(d+""));
			this._spacing===CSSStyle._SPACING && (this._spacing=[0,0]);
			this._spacing[0]=d;
		});

		/**
		*字体大小。
		*/
		__getset(0,__proto,'fontSize',function(){
			return this._font.size;
			},function(value){
			this._createFont().size=value;
		});

		/**
		*表示是否为斜体。
		*/
		__getset(0,__proto,'italic',function(){
			return this._font.italic;
			},function(value){
			this._createFont().italic=value;
		});

		/**
		*字体系列。
		*/
		__getset(0,__proto,'fontFamily',function(){
			return this._font.family;
			},function(value){
			this._createFont().family=value;
		});

		/**
		*<p>描边宽度（以像素为单位）。</p>
		*默认值0，表示不描边。
		*@default 0
		*/
		__getset(0,__proto,'stroke',function(){
			return this._font.stroke[0];
			},function(value){
			if (this._createFont().stroke===Font._STROKE)this._font.stroke=[0,"#000000"];
			this._font.stroke[0]=value;
		});

		/**
		*<p>描边颜色，以字符串表示。</p>
		*@default "#000000";
		*/
		__getset(0,__proto,'strokeColor',function(){
			return this._font.stroke[1];
			},function(value){
			if (this._createFont().stroke===Font._STROKE)this._font.stroke=[0,"#000000"];
			this._font.stroke[1]=value;
		});

		/**
		*边框属性，比如border="5px solid red"
		*/
		__getset(0,__proto,'border',function(){
			return this._border ? this._border.value :"";
			},function(value){
			if (value=='none'){
				this._border=null;
				return;
			}
			this._border || (this._border={});
			this._border.value=value;
			var values=value.split(' ');
			this._border.color=Color.create(values[values.length-1]);
			if (values.length==1){
				this._border.size=1;
				this._border.type='solid';
				return;
			};
			var i=0;
			if (values[0].indexOf('px')> 0){
				this._border.size=parseInt(values[0]);
				i++;
			}else this._border.size=1;
			this._border.type=values[i];
			this._ower._renderType |=0x100;
		});

		/**
		*边框的颜色。
		*/
		__getset(0,__proto,'borderColor',function(){
			return (this._border && this._border.color)? this._border.color.strColor :null;
			},function(value){
			if (!value){
				this._border=null;
				return;
			}
			this._border || (this._border={size:1,type:'solid'});
			this._border.color=(value==null)? null :Color.create(value);
			this._ower.conchModel && this._ower.conchModel.border(this._border.color.strColor);
			this._ower._renderType |=0x100;
		});

		/**
		*元素的定位类型。
		*/
		__getset(0,__proto,'position',function(){
			return (this._type & 0x4)? "absolute" :"";
			},function(value){
			value=="absolute" ? (this._type |=0x4):(this._type &=~0x4);
		});

		/**
		*规定元素应该生成的框的类型。
		*/
		__getset(0,__proto,'display',null,function(value){
			switch (value){
				case '':
					this._type &=~0x2;
					this.visible=true;
					break ;
				case 'none':
					this._type |=0x2;
					this.visible=false;
					this._ower._layoutLater();
					break ;
				}
		});

		/**@inheritDoc */
		__getset(0,__proto,'paddingLeft',function(){
			return this.padding[3];
		});

		/**@inheritDoc */
		__getset(0,__proto,'paddingTop',function(){
			return this.padding[0];
		});

		__getset(0,__proto,'_scale',null,function(value){
			this._ower.scale(value[0],value[1]);
		});

		__getset(0,__proto,'_rotate',null,function(value){
			this._ower.rotation=value;
		});

		CSSStyle.parseOneCSS=function(text,clipWord){
			var out=[];
			var attrs=text.split(clipWord);
			var valueArray;
			for (var i=0,n=attrs.length;i < n;i++){
				var attr=attrs[i];
				var ofs=attr.indexOf(':');
				var name=attr.substr(0,ofs).replace(/^\s+|\s+$/g,'');
				if (name.length==0)
					continue ;
				var value=attr.substr(ofs+1).replace(/^\s+|\s+$/g,'');
				var one=[name,value];
				switch (name){
					case 'italic':
					case 'bold':
						one[1]=value=="true";
						break ;
					case 'line-height':
						one[0]='lineHeight';
						one[1]=parseInt(value);
						break ;
					case 'font-size':
						one[0]='fontSize';
						one[1]=parseInt(value);
						break ;
					case 'padding':
						valueArray=value.split(' ');
						valueArray.length > 1 || (valueArray[1]=valueArray[2]=valueArray[3]=valueArray[0]);
						one[1]=[parseInt(valueArray[0]),parseInt(valueArray[1]),parseInt(valueArray[2]),parseInt(valueArray[3])];
						break ;
					case 'rotate':
						one[0]="_rotate";
						one[1]=parseFloat(value);
						break ;
					case 'scale':
						valueArray=value.split(' ');
						one[0]="_scale";
						one[1]=[parseFloat(valueArray[0]),parseFloat(valueArray[1])];
						break ;
					case 'translate':
						valueArray=value.split(' ');
						one[0]="_translate";
						one[1]=[parseInt(valueArray[0]),parseInt(valueArray[1])];
						break ;
					default :
						(one[0]=CSSStyle._CSSTOVALUE[name])|| (one[0]=name);
					}
				out.push(one);
			}
			return out;
		}

		CSSStyle.parseCSS=function(text,uri){
			var one;
			while ((one=CSSStyle._parseCSSRegExp.exec(text))!=null){
				CSSStyle.styleSheets[one[1]]=CSSStyle.parseOneCSS(one[2],';');
			}
		}

		CSSStyle.EMPTY=new CSSStyle(null);
		CSSStyle._CSSTOVALUE={'letter-spacing':'letterSpacing','line-spacing':'lineSpacing','white-space':'whiteSpace','line-height':'lineHeight','scale-x':'scaleX','scale-y':'scaleY','translate-x':'translateX','translate-y':'translateY','font-family':'fontFamily','font-weight':'fontWeight','vertical-align':'valign','text-decoration':'textDecoration','background-color':'backgroundColor','border-color':'borderColor','float':'cssFloat'};
		CSSStyle._parseCSSRegExp=new RegExp("([\.\#]\\w+)\\s*{([\\s\\S]*?)}","g");
		CSSStyle._aligndef={'left':0,'center':1,'right':2,0:'left',1:'center',2:'right'};
		CSSStyle._valigndef={'top':0,'middle':1,'bottom':2,0:'top',1:'middle',2:'bottom'};
		CSSStyle.styleSheets={};
		CSSStyle.ALIGN_CENTER=1;
		CSSStyle.ALIGN_RIGHT=2;
		CSSStyle.VALIGN_MIDDLE=1;
		CSSStyle.VALIGN_BOTTOM=2;
		CSSStyle._CSS_BLOCK=0x1;
		CSSStyle._DISPLAY_NONE=0x2;
		CSSStyle._ABSOLUTE=0x4;
		CSSStyle._WIDTH_SET=0x8;
		CSSStyle._PADDING=[0,0,0,0];
		CSSStyle._RECT=[-1,-1,-1,-1];
		CSSStyle._SPACING=[0,0];
		CSSStyle._ALIGNS=[0,0,0];
		CSSStyle.ADDLAYOUTED=0x200;
		CSSStyle._NEWFONT=0x1000;
		CSSStyle._HEIGHT_SET=0x2000;
		CSSStyle._BACKGROUND_SET=0x4000;
		CSSStyle._FLOAT_RIGHT=0x8000;
		CSSStyle._LINE_ELEMENT=0x10000;
		CSSStyle._NOWARP=0x20000;
		CSSStyle._WIDTHAUTO=0x40000;
		CSSStyle._LISTERRESZIE=0x80000;
		return CSSStyle;
	})(Style)


	/**
	*@private
	*使用Audio标签播放声音
	*/
	//class laya.media.h5audio.AudioSound extends laya.events.EventDispatcher
	var AudioSound=(function(_super){
		function AudioSound(){
			this.url=null;
			this.audio=null;
			this.loaded=false;
			AudioSound.__super.call(this);
		}

		__class(AudioSound,'laya.media.h5audio.AudioSound',_super);
		var __proto=AudioSound.prototype;
		/**
		*释放声音
		*
		*/
		__proto.dispose=function(){
			var ad=AudioSound._audioCache[this.url];
			if (ad){
				ad.src="";
				delete AudioSound._audioCache[this.url];
			}
		}

		/**
		*加载声音
		*@param url
		*
		*/
		__proto.load=function(url){
			this.url=url;
			var ad=AudioSound._audioCache[url];
			if (ad && ad.readyState >=2){
				this.event("complete");
				return;
			}
			if (!ad){
				ad=Browser.createElement("audio");
				ad.src=URL.formatURL(url);
				AudioSound._audioCache[url]=ad;
			}
			ad.addEventListener("canplaythrough",onLoaded);
			ad.addEventListener("error",onErr);
			var me=this;
			function onLoaded (){
				offs();
				me.loaded=true;
				me.event("complete");
			}
			function onErr (){
				ad.load=null;
				offs();
				me.event("error");
			}
			function offs (){
				ad.removeEventListener("canplaythrough",onLoaded);
				ad.removeEventListener("error",onErr);
			}
			this.audio=ad;
			if (ad.load){
				ad.load();
				}else {
				onErr();
			}
		}

		/**
		*播放声音
		*@param startTime 起始时间
		*@param loops 循环次数
		*@return
		*
		*/
		__proto.play=function(startTime,loops){
			(startTime===void 0)&& (startTime=0);
			(loops===void 0)&& (loops=0);
			if (!this.url)return null;
			var ad;
			ad=AudioSound._audioCache[this.url];
			if (!ad)return null;
			var tAd;
			tAd=Pool.getItem("audio:"+this.url);
			tAd=tAd ? tAd :ad.cloneNode(true);
			var channel=new AudioSoundChannel(tAd);
			channel.url=this.url;
			channel.loops=loops;
			channel.startTime=startTime;
			channel.play();
			SoundManager.addChannel(channel);
			return channel;
		}

		/**
		*获取总时间。
		*/
		__getset(0,__proto,'duration',function(){
			var ad;
			ad=AudioSound._audioCache[this.url];
			if (!ad)
				return 0;
			return ad.duration;
		});

		AudioSound._audioCache={};
		return AudioSound;
	})(EventDispatcher)


	/**
	*<code>SoundChannel</code> 用来控制程序中的声音。
	*/
	//class laya.media.SoundChannel extends laya.events.EventDispatcher
	var SoundChannel=(function(_super){
		function SoundChannel(){
			this.url=null;
			this.loops=0;
			this.startTime=NaN;
			this.isStopped=false;
			this.completeHandler=null;
			SoundChannel.__super.call(this);
		}

		__class(SoundChannel,'laya.media.SoundChannel',_super);
		var __proto=SoundChannel.prototype;
		/**
		*播放。
		*/
		__proto.play=function(){}
		/**
		*停止。
		*/
		__proto.stop=function(){}
		/**
		*private
		*/
		__proto.__runComplete=function(handler){
			if (handler){
				handler.run();
			}
		}

		/**
		*音量。
		*/
		__getset(0,__proto,'volume',function(){
			return 1;
			},function(v){
		});

		/**
		*获取当前播放时间。
		*/
		__getset(0,__proto,'position',function(){
			return 0;
		});

		/**
		*获取总时间。
		*/
		__getset(0,__proto,'duration',function(){
			return 0;
		});

		return SoundChannel;
	})(EventDispatcher)


	/**
	*<code>Sound</code> 类是用来播放控制声音的类。
	*/
	//class laya.media.Sound extends laya.events.EventDispatcher
	var Sound=(function(_super){
		function Sound(){Sound.__super.call(this);;
		};

		__class(Sound,'laya.media.Sound',_super);
		var __proto=Sound.prototype;
		/**
		*加载声音。
		*@param url 地址。
		*
		*/
		__proto.load=function(url){}
		/**
		*播放声音。
		*@param startTime 开始时间,单位秒
		*@param loops 循环次数,0表示一直循环
		*@return 声道 SoundChannel 对象。
		*
		*/
		__proto.play=function(startTime,loops){
			(startTime===void 0)&& (startTime=0);
			(loops===void 0)&& (loops=0);
			return null;
		}

		/**
		*释放声音资源。
		*
		*/
		__proto.dispose=function(){}
		/**
		*获取总时间。
		*/
		__getset(0,__proto,'duration',function(){
			return 0;
		});

		return Sound;
	})(EventDispatcher)


	/**
	*@private
	*web audio api方式播放声音
	*/
	//class laya.media.webaudio.WebAudioSound extends laya.events.EventDispatcher
	var WebAudioSound=(function(_super){
		function WebAudioSound(){
			this.url=null;
			this.loaded=false;
			this.data=null;
			this.audioBuffer=null;
			this.__toPlays=null;
			WebAudioSound.__super.call(this);
		}

		__class(WebAudioSound,'laya.media.webaudio.WebAudioSound',_super);
		var __proto=WebAudioSound.prototype;
		/**
		*加载声音
		*@param url
		*
		*/
		__proto.load=function(url){
			var me=this;
			this.url=url;
			this.audioBuffer=WebAudioSound._dataCache[url];
			if (this.audioBuffer){
				this._loaded(this.audioBuffer);
				return;
			}
			WebAudioSound.e.on("loaded:"+url,this,this._loaded);
			WebAudioSound.e.on("err:"+url,this,this._err);
			if (WebAudioSound.__loadingSound[url]){
				return;
			}
			WebAudioSound.__loadingSound[url]=true;
			var request=new Browser.window.XMLHttpRequest();
			request.open("GET",URL.formatURL(url),true);
			request.responseType="arraybuffer";
			request.onload=function (){
				me.data=request.response;
				WebAudioSound.buffs.push({"buffer":me.data,"url":me.url});
				WebAudioSound.decode();
			};
			request.onerror=function (e){
				me._err();
			}
			request.send();
		}

		__proto._err=function(){
			this._removeLoadEvents();
			WebAudioSound.__loadingSound[this.url]=false;
			this.event("error");
		}

		__proto._loaded=function(audioBuffer){
			this._removeLoadEvents();
			this.audioBuffer=audioBuffer;
			WebAudioSound._dataCache[this.url]=this.audioBuffer;
			this.loaded=true;
			this.event("complete");
		}

		__proto._removeLoadEvents=function(){
			WebAudioSound.e.off("loaded:"+this.url,this,this._loaded);
			WebAudioSound.e.off("err:"+this.url,this,this._err);
		}

		__proto.__playAfterLoaded=function(){
			if (!this.__toPlays)return;
			var i=0,len=0;
			var toPlays;
			toPlays=this.__toPlays;
			len=toPlays.length;
			var tParams;
			for (i=0;i < len;i++){
				tParams=toPlays[i];
				if (tParams[2] && !(tParams [2]).isStopped){
					this.play(tParams[0],tParams[1],tParams[2]);
				}
			}
			this.__toPlays.length=0;
		}

		/**
		*播放声音
		*@param startTime 起始时间
		*@param loops 循环次数
		*@return
		*
		*/
		__proto.play=function(startTime,loops,channel){
			(startTime===void 0)&& (startTime=0);
			(loops===void 0)&& (loops=0);
			channel=channel ? channel :new WebAudioSoundChannel();
			if (!this.audioBuffer){
				if (this.url){
					if (!this.__toPlays)this.__toPlays=[];
					this.__toPlays.push([startTime,loops,channel]);
					this.once("complete",this,this.__playAfterLoaded);
					this.load(this.url);
				}
			}
			channel.url=this.url;
			channel.loops=loops;
			channel["audioBuffer"]=this.audioBuffer;
			channel.startTime=startTime;
			channel.play();
			SoundManager.addChannel(channel);
			return channel;
		}

		__proto.dispose=function(){
			delete WebAudioSound._dataCache[this.url];
			delete WebAudioSound.__loadingSound[this.url];
		}

		__getset(0,__proto,'duration',function(){
			if (this.audioBuffer){
				return this.audioBuffer.duration;
			}
			return 0;
		});

		WebAudioSound.decode=function(){
			if (WebAudioSound.buffs.length <=0 || WebAudioSound.isDecoding){
				return;
			}
			WebAudioSound.isDecoding=true;
			WebAudioSound.tInfo=WebAudioSound.buffs.shift();
			WebAudioSound.ctx.decodeAudioData(WebAudioSound.tInfo["buffer"],WebAudioSound._done,WebAudioSound._fail);
		}

		WebAudioSound._done=function(audioBuffer){
			WebAudioSound.e.event("loaded:"+WebAudioSound.tInfo.url,audioBuffer);
			WebAudioSound.isDecoding=false;
			WebAudioSound.decode();
		}

		WebAudioSound._fail=function(){
			WebAudioSound.e.event("err:"+WebAudioSound.tInfo.url,null);
			WebAudioSound.isDecoding=false;
			WebAudioSound.decode();
		}

		WebAudioSound._playEmptySound=function(){
			if (WebAudioSound.ctx==null){
				return;
			};
			var source=WebAudioSound.ctx.createBufferSource();
			source.buffer=WebAudioSound._miniBuffer;
			source.connect(WebAudioSound.ctx.destination);
			source.start(0,0,0);
		}

		WebAudioSound._unlock=function(){
			if (WebAudioSound._unlocked){
				return;
			}
			WebAudioSound._playEmptySound();
			if (WebAudioSound.ctx.state=="running"){
				Browser.document.removeEventListener("mousedown",WebAudioSound._unlock,true);
				Browser.document.removeEventListener("touchend",WebAudioSound._unlock,true);
				WebAudioSound._unlocked=true;
			}
		}

		WebAudioSound.initWebAudio=function(){
			if (WebAudioSound.ctx.state !="running"){
				WebAudioSound._unlock();
				Browser.document.addEventListener("mousedown",WebAudioSound._unlock,true);
				Browser.document.addEventListener("touchend",WebAudioSound._unlock,true);
			}
		}

		WebAudioSound._dataCache={};
		WebAudioSound.buffs=[];
		WebAudioSound.isDecoding=false;
		WebAudioSound._unlocked=false;
		WebAudioSound.tInfo=null
		WebAudioSound.__loadingSound={};
		__static(WebAudioSound,
		['window',function(){return this.window=Browser.window;},'webAudioEnabled',function(){return this.webAudioEnabled=WebAudioSound.window["AudioContext"] || WebAudioSound.window["webkitAudioContext"] || WebAudioSound.window["mozAudioContext"];},'ctx',function(){return this.ctx=WebAudioSound.webAudioEnabled ? new (WebAudioSound.window["AudioContext"] || WebAudioSound.window["webkitAudioContext"] || WebAudioSound.window["mozAudioContext"])():undefined;},'_miniBuffer',function(){return this._miniBuffer=WebAudioSound.ctx.createBuffer(1,1,22050);},'e',function(){return this.e=new EventDispatcher();}
		]);
		return WebAudioSound;
	})(EventDispatcher)


	/**
	*<code>HttpRequest</code> 通过 HTTP 协议传送或接收 XML 及其他数据。
	*/
	//class laya.net.HttpRequest extends laya.events.EventDispatcher
	var HttpRequest=(function(_super){
		function HttpRequest(){
			this._responseType=null;
			this._data=null;
			HttpRequest.__super.call(this);
			this._http=new Browser.window.XMLHttpRequest();
		}

		__class(HttpRequest,'laya.net.HttpRequest',_super);
		var __proto=HttpRequest.prototype;
		/**
		*发送请求。
		*@param url 请求的地址。
		*@param data 发送的数据，可选。
		*@param method 发送数据方式，值为“get”或“post”，默认为 “get”方式。
		*@param responseType 返回消息类型，可设置为"text"，"json"，"xml","arraybuffer"。
		*@param headers 头信息，key value数组，比如["Content-Type","application/json"]。
		*/
		__proto.send=function(url,data,method,responseType,headers){
			(method===void 0)&& (method="get");
			(responseType===void 0)&& (responseType="text");
			this._responseType=responseType;
			this._data=null;
			var _this=this;
			var http=this._http;
			http.open(method,url,true);
			if (headers){
				for (var i=0;i < headers.length;i++){
					http.setRequestHeader(headers[i++],headers[i]);
				}
				}else {
				if (!data || (typeof data=='string'))http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
				else http.setRequestHeader("Content-Type","application/json");
			}
			http.responseType=responseType!=="arraybuffer" ? "text" :"arraybuffer";
			http.onerror=function (e){
				_this._onError(e);
			}
			http.onabort=function (e){
				_this._onAbort(e);
			}
			http.onprogress=function (e){
				_this._onProgress(e);
			}
			http.onload=function (e){
				_this._onLoad(e);
			}
			http.send(data);
		}

		/**
		*@private
		*请求进度的侦听处理函数。
		*@param e 事件对象。
		*/
		__proto._onProgress=function(e){
			if (e && e.lengthComputable)this.event("progress",e.loaded / e.total);
		}

		/**
		*@private
		*请求中断的侦听处理函数。
		*@param e 事件对象。
		*/
		__proto._onAbort=function(e){
			this.error("Request was aborted by user");
		}

		/**
		*@private
		*请求出错侦的听处理函数。
		*@param e 事件对象。
		*/
		__proto._onError=function(e){
			this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText);
		}

		/**
		*@private
		*请求消息返回的侦听处理函数。
		*@param e 事件对象。
		*/
		__proto._onLoad=function(e){
			var http=this._http;
			var status=http.status!==undefined ? http.status :200;
			if (status===200 || status===204 || status===0){
				this.complete();
				}else {
				this.error("["+http.status+"]"+http.statusText+":"+http.responseURL);
			}
		}

		/**
		*@private
		*请求错误的处理函数。
		*@param message 错误信息。
		*/
		__proto.error=function(message){
			this.clear();
			this.event("error",message);
		}

		/**
		*@private
		*请求成功完成的处理函数。
		*/
		__proto.complete=function(){
			this.clear();
			var flag=true;
			try {
				if (this._responseType==="json"){
					this._data=JSON.parse(this._http.responseText);
					}else if (this._responseType==="xml"){
					this._data=Utils.parseXMLFromString(this._http.responseText);
					}else {
					this._data=this._http.response || this._http.responseText;
				}
				}catch (e){
				flag=false;
				this.error(e.message);
			}
			flag && this.event("complete",(this._data instanceof Array)? [this._data] :this._data);
		}

		/**
		*@private
		*清除当前请求。
		*/
		__proto.clear=function(){
			var http=this._http;
			http.onerror=http.onabort=http.onprogress=http.onload=null;
		}

		/**请求的地址。*/
		__getset(0,__proto,'url',function(){
			return this._http.responseURL;
		});

		/**原生XMLHttpRequest引用*/
		__getset(0,__proto,'http',function(){
			return this._http;
		});

		/**返回的数据。*/
		__getset(0,__proto,'data',function(){
			return this._data;
		});

		return HttpRequest;
	})(EventDispatcher)


	/**
	*<p><code>ColorFilter</code> 是颜色滤镜。</p>
	*/
	//class laya.filters.ColorFilter extends laya.filters.Filter
	var ColorFilter=(function(_super){
		function ColorFilter(mat){
			//this._mat=null;
			//this._alpha=null;
			ColorFilter.__super.call(this);
			if (!mat){
				mat=[0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0,0,0,1,0];
			}
			this._mat=new Float32Array(16);
			this._alpha=new Float32Array(4);
			var j=0;
			var z=0;
			for (var i=0;i < 20;i++){
				if (i % 5 !=4){
					this._mat[j++]=mat[i];
					}else {
					this._alpha[z++]=mat[i];
				}
			}
			this._action=RunDriver.createFilterAction(0x20);
			this._action.data=this;
		}

		__class(ColorFilter,'laya.filters.ColorFilter',_super);
		var __proto=ColorFilter.prototype;
		Laya.imps(__proto,{"laya.filters.IFilter":true})
		/**
		*@private 通知微端
		*/
		__proto.callNative=function(sp){
			var t=sp._$P.cf=this;
			sp.conchModel && sp.conchModel.setFilterMatrix&&sp.conchModel.setFilterMatrix(this._mat,this._alpha);
		}

		/**@private */
		__getset(0,__proto,'type',function(){
			return 0x20;
		});

		/**@private */
		__getset(0,__proto,'action',function(){
			return this._action;
		});

		__getset(1,ColorFilter,'DEFAULT',function(){
			if (!ColorFilter._DEFAULT){
				ColorFilter._DEFAULT=new ColorFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);
			}
			return ColorFilter._DEFAULT;
		},laya.filters.Filter._$SET_DEFAULT);

		__getset(1,ColorFilter,'GRAY',function(){
			if (!ColorFilter._GRAY){
				ColorFilter._GRAY=new ColorFilter([0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0,0,0,1,0]);
			}
			return ColorFilter._GRAY;
		},laya.filters.Filter._$SET_GRAY);

		ColorFilter._DEFAULT=null
		ColorFilter._GRAY=null
		return ColorFilter;
	})(Filter)


	/**
	*<code>Loader</code> 类可用来加载文本、JSON、XML、二进制、图像等资源。
	*/
	//class laya.net.Loader extends laya.events.EventDispatcher
	var Loader=(function(_super){
		function Loader(){
			this._data=null;
			this._url=null;
			this._type=null;
			this._cache=false;
			this._http=null;
			Loader.__super.call(this);
		}

		__class(Loader,'laya.net.Loader',_super);
		var __proto=Loader.prototype;
		/**
		*加载资源。
		*@param url 地址
		*@param type 类型，如果为null，则根据文件后缀，自动分析类型。
		*@param cache 是否缓存数据。
		*@param group 分组。
		*@param ignoreCache 是否忽略缓存，强制重新加载
		*/
		__proto.load=function(url,type,cache,group,ignoreCache){
			(cache===void 0)&& (cache=true);
			(ignoreCache===void 0)&& (ignoreCache=false);
			if (url.indexOf("data:image")===0)type="image";
			this._url=url;
			this._type=type || (type=this.getTypeFromUrl(url));
			this._cache=cache;
			this._data=null;
			if (!ignoreCache && Loader.loadedMap[url]){
				this._data=Loader.loadedMap[url];
				this.event("progress",1);
				this.event("complete",this._data);
				return;
			}
			if (group)Loader.setGroup(url,group);
			if (Loader.parserMap[type] !=null){
				if (((Loader.parserMap[type])instanceof laya.utils.Handler ))Loader.parserMap[type].runWith(this);
				else Loader.parserMap[type].call(null,this);
				return;
			}
			if (type==="image" || type==="htmlimage" || type==="nativeimage")return this._loadImage(url);
			if (type==="sound")return this._loadSound(url);
			if (!this._http){
				this._http=new HttpRequest();
				this._http.on("progress",this,this.onProgress);
				this._http.on("error",this,this.onError);
				this._http.on("complete",this,this.onLoaded);
			};
			var contentType;
			switch (type){
				case "atlas":
					contentType="json";
					break ;
				case "font":
					contentType="xml";
					break ;
				default :
					contentType=type;
				}
			this._http.send(URL.formatURL(url),null,"get",contentType);
		}

		/**
		*获取指定资源地址的数据类型。
		*@param url 资源地址。
		*@return 数据类型。
		*/
		__proto.getTypeFromUrl=function(url){
			var type=Utils.getFileExtension(url);
			if (type)return Loader.typeMap[type];
			console.warn("Not recognize the resources suffix",url);
			return "text";
		}

		/**
		*@private
		*加载图片资源。
		*@param url 资源地址。
		*/
		__proto._loadImage=function(url){
			var _this=this;
			var image;
			function clear (){
				image.onload=null;
				image.onerror=null;
			};
			var onload=function (){
				clear();
				_this.onLoaded(image);
			};
			var onerror=function (){
				clear();
				_this.event("error","Load image failed");
			}
			if (this._type==="nativeimage"){
				image=new Browser.window.Image();
				image.crossOrigin="";
				image.onload=onload;
				image.onerror=onerror;
				image.src=URL.formatURL(url);
				}else {
				new HTMLImage.create(url,{onload:onload,onerror:onerror,onCreate:function (img){
						image=img;
				}});
			}
		}

		/**
		*@private
		*加载声音资源。
		*@param url 资源地址。
		*/
		__proto._loadSound=function(url){
			var sound=(new SoundManager._soundClass());
			var _this=this;
			sound.on("complete",this,soundOnload);
			sound.on("error",this,soundOnErr);
			sound.load(url);
			function soundOnload (){
				clear();
				_this.onLoaded(sound);
			}
			function soundOnErr (){
				clear();
				sound.dispose();
				_this.event("error","Load sound failed");
			}
			function clear (){
				sound.offAll();
			}
		}

		/**@private */
		__proto.onProgress=function(value){
			if (this._type==="atlas")this.event("progress",value *0.3);
			else this.event("progress",value);
		}

		/**@private */
		__proto.onError=function(message){
			this.event("error",message);
		}

		/**
		*资源加载完成的处理函数。
		*@param data 数据。
		*/
		__proto.onLoaded=function(data){
			var type=this._type;
			if (type==="image"){
				var tex=new Texture(data);
				tex.url=this._url;
				this.complete(tex);
				}else if (type==="sound" || type==="htmlimage" || type==="nativeimage"){
				this.complete(data);
				}else if (type==="atlas"){
				if (!data.src && !data._setContext){
					if (!this._data){
						this._data=data;
						if (data.meta && data.meta.image){
							var toloadPics=data.meta.image.split(",");
							var split=this._url.indexOf("/")>=0 ? "/" :"\\";
							var idx=this._url.lastIndexOf(split);
							var folderPath=idx >=0 ? this._url.substr(0,idx+1):"";
							for (var i=0,len=toloadPics.length;i < len;i++){
								toloadPics[i]=folderPath+toloadPics[i];
							}
							}else {
							toloadPics=[this._url.replace(".json",".png")];
						}
						toloadPics.reverse();
						data.toLoads=toloadPics;
						data.pics=[];
					}
					this.event("progress",0.3+1 / toloadPics.length *0.6);
					return this._loadImage(toloadPics.pop());
					}else {
					this._data.pics.push(data);
					if (this._data.toLoads.length > 0){
						this.event("progress",0.3+1 / this._data.toLoads.length *0.6);
						return this._loadImage(this._data.toLoads.pop());
					};
					var frames=this._data.frames;
					var cleanUrl=this._url.split("?")[0];
					var directory=(this._data.meta && this._data.meta.prefix)? this._data.meta.prefix :cleanUrl.substring(0,cleanUrl.lastIndexOf("."))+"/";
					var pics=this._data.pics;
					var map=Loader.atlasMap[this._url] || (Loader.atlasMap[this._url]=[]);
					map.dir=directory;
					for (var name in frames){
						var obj=frames[name];
						var tPic=pics[obj.frame.idx ? obj.frame.idx :0];
						var url=directory+name;
						Loader.cacheRes(url,Texture.create(tPic,obj.frame.x,obj.frame.y,obj.frame.w,obj.frame.h,obj.spriteSourceSize.x,obj.spriteSourceSize.y,obj.sourceSize.w,obj.sourceSize.h));
						Loader.loadedMap[url].url=url;
						map.push(url);
					}
					this.complete(this._data);
				}
				}else if (type=="font"){
				if (!data.src){
					this._data=data;
					this.event("progress",0.5);
					return this._loadImage(this._url.replace(".fnt",".png"));
					}else {
					var bFont;
					bFont=new BitmapFont();
					bFont.parseFont(this._data,data);
					var tArr=this._url.split(".fnt")[0].split("/");
					var fontName=tArr[tArr.length-1];
					Text.registerBitmapFont(fontName,bFont);
					this._data=bFont;
					this.complete(this._data);
				}
				}else {
				this.complete(data);
			}
		}

		/**
		*加载完成。
		*@param data 加载的数据。
		*/
		__proto.complete=function(data){
			this._data=data;
			Loader._loaders.push(this);
			if (!Loader._isWorking)Loader.checkNext();
		}

		/**
		*结束加载，处理是否缓存及派发完成事件 <code>Event.COMPLETE</code> 。
		*@param content 加载后的数据
		*/
		__proto.endLoad=function(content){
			content && (this._data=content);
			if (this._cache)Loader.cacheRes(this._url,this._data);
			this.event("progress",1);
			this.event("complete",(this.data instanceof Array)? [this.data] :this.data);
		}

		/**加载地址。*/
		__getset(0,__proto,'url',function(){
			return this._url;
		});

		/**返回的数据。*/
		__getset(0,__proto,'data',function(){
			return this._data;
		});

		/**是否缓存。*/
		__getset(0,__proto,'cache',function(){
			return this._cache;
		});

		/**加载类型。*/
		__getset(0,__proto,'type',function(){
			return this._type;
		});

		Loader.checkNext=function(){
			Loader._isWorking=true;
			var startTimer=Browser.now();
			var thisTimer=startTimer;
			while (Loader._startIndex < Loader._loaders.length){
				thisTimer=Browser.now();
				Loader._loaders[Loader._startIndex].endLoad();
				Loader._startIndex++;
				if (Browser.now()-startTimer > Loader.maxTimeOut){
					console.warn("loader callback cost a long time:"+(Browser.now()-startTimer)+" url="+Loader._loaders[Loader._startIndex-1].url);
					Laya.timer.frameOnce(1,null,Loader.checkNext);
					return;
				}
			}
			Loader._loaders.length=0;
			Loader._startIndex=0;
			Loader._isWorking=false;
		}

		Loader.clearRes=function(url,forceDispose){
			(forceDispose===void 0)&& (forceDispose=false);
			var arr=Loader.atlasMap[url];
			if (arr){
				for (var i=0,n=arr.length;i < n;i++){
					var resUrl=arr[i];
					var tex=Loader.getRes(resUrl);
					if (tex)tex.destroy(forceDispose);
					delete Loader.loadedMap[resUrl];
				}
				arr.length=0;
				delete Loader.atlasMap[url];
				delete Loader.loadedMap[url];
				}else {
				var res=Loader.loadedMap[url];
				if (res){
					if ((res instanceof laya.resource.Texture )&& res.bitmap)(res).destroy(forceDispose);
					delete Loader.loadedMap[url];
				}
			}
		}

		Loader.getRes=function(url){
			return Loader.loadedMap[url];
		}

		Loader.getAtlas=function(url){
			return Loader.atlasMap[url];
		}

		Loader.cacheRes=function(url,data){
			if (Loader.loadedMap[url] !=null){
				console.warn("Resources already exist,is repeated loading:",url);
				}else {
				Loader.loadedMap[url]=data;
			}
		}

		Loader.setGroup=function(url,group){
			if (!Loader.groupMap[group])Loader.groupMap[group]=[];
			Loader.groupMap[group].push(url);
		}

		Loader.clearResByGroup=function(group){
			if (!Loader.groupMap[group])return;
			var arr=Loader.groupMap[group],i=0,len=arr.length;
			for (i=0;i < len;i++){
				Loader.clearRes(arr[i]);
			}
			arr.length=0;
		}

		Loader.TEXT="text";
		Loader.JSON="json";
		Loader.XML="xml";
		Loader.BUFFER="arraybuffer";
		Loader.IMAGE="image";
		Loader.SOUND="sound";
		Loader.ATLAS="atlas";
		Loader.FONT="font";
		Loader.typeMap={"png":"image","jpg":"image","jpeg":"image","txt":"text","json":"json","xml":"xml","als":"atlas","atlas":"atlas","mp3":"sound","ogg":"sound","wav":"sound","part":"json","fnt":"font"};
		Loader.parserMap={};
		Loader.loadedMap={};
		Loader.groupMap={};
		Loader.maxTimeOut=100;
		Loader.atlasMap={};
		Loader._loaders=[];
		Loader._isWorking=false;
		Loader._startIndex=0;
		return Loader;
	})(EventDispatcher)


	/**
	*<p> <code>LoaderManager</code> 类用于用于批量加载资源、数据。</p>
	*<p>批量加载器，单例，可以通过Laya.loader访问。</p>
	*多线程(默认5个线程)，5个优先级(0最快，4最慢,默认为1)
	*某个资源加载失败后，会按照最低优先级重试加载(属性retryNum决定重试几次)，如果重试后失败，则调用complete函数，并返回null
	*/
	//class laya.net.LoaderManager extends laya.events.EventDispatcher
	var LoaderManager=(function(_super){
		var ResInfo;
		function LoaderManager(){
			this.retryNum=1;
			this.retryDelay=0;
			this.maxLoader=5;
			this._loaders=[];
			this._loaderCount=0;
			this._resInfos=[];
			this._infoPool=[];
			this._maxPriority=5;
			this._failRes={};
			LoaderManager.__super.call(this);
			for (var i=0;i < this._maxPriority;i++)this._resInfos[i]=[];
		}

		__class(LoaderManager,'laya.net.LoaderManager',_super);
		var __proto=LoaderManager.prototype;
		/**
		*根据clas定义创建一个资源空壳，随后进行异步加载，资源加载完成后，会调用资源类的onAsynLoaded方法回调真正的数据,套嵌资源的子资源会保留资源路径"?"后的部分
		*@param url 资源地址或者数组，比如[{url:xx,clas:xx,priority:xx,params:xx},{url:xx,clas:xx,priority:xx,params:xx}]
		*@param progress 进度回调，回调参数为当前文件加载的进度信息(0-1)。
		*@param clas 资源类名，比如Texture
		*@param type 资源类型
		*@param priority 优先级
		*@param cache 是否缓存
		*@return 返回资源对象
		*/
		__proto.create=function(url,complete,progress,clas,params,priority,cache){
			(priority===void 0)&& (priority=1);
			(cache===void 0)&& (cache=true);
			if ((url instanceof Array)){
				var items=url;
				var itemCount=items.length;
				var loadedCount=0;
				if (progress){
					var progress2=Handler.create(progress.caller,progress.method,progress.args,false);
				}
				for (var i=0;i < itemCount;i++){
					var item=items[i];
					if ((typeof item=='string'))item=items[i]={url:item};
					item.progress=0;
					var progressHandler=progress ? Handler.create(null,onProgress,[item],false):null;
					var completeHandler=(progress || complete)? Handler.create(null,onComplete,[item]):null;
					this._create(item.url,completeHandler,progressHandler,item.clas || clas,item.params || params,item.priority || priority,cache);
				}
				function onComplete (item,content){
					loadedCount++;
					item.progress=1;
					if (loadedCount===itemCount && complete){
						complete.run();
					}
				}
				function onProgress (item,value){
					item.progress=value;
					var num=0;
					for (var j=0;j < itemCount;j++){
						var item1=items[j];
						num+=item1.progress;
					};
					var v=num / itemCount;
					progress2.runWith(v);
				}
				return true;
			}else return this._create(url,complete,progress,clas,params,priority,cache);
		}

		__proto._create=function(url,complete,progress,clas,params,priority,cache){
			(priority===void 0)&& (priority=1);
			(cache===void 0)&& (cache=true);
			var item=this.getRes(url);
			if (!item){
				var extension=Utils.getFileExtension(url);
				var creatItem=LoaderManager.createMap[extension];
				if (!clas)clas=creatItem[0];
				var type=creatItem[1];
				if (extension=="atlas"){
					this.load(url,complete,progress,type,priority,cache);
					}else {
					if (clas===Texture)type="htmlimage";
					item=clas ? new clas():null;
					this.load(url,Handler.create(null,onLoaded),progress,type,priority,false,null,true);
					function onLoaded (data){
						item && item.onAsynLoaded.call(item,url,data,params);
						if (complete)complete.run();
					}
					if (cache){
						LoaderManager.cacheRes(url,item);
						item.url=url;
					}
				}
				}else {
				progress && progress.runWith(1);
				complete && complete.run();
			}
			return item;
		}

		/**
		*加载资源。
		*@param url 地址，或者资源对象数组(简单数组：["a.png","b.png"]，复杂数组[{url:"a.png",type:Loader.IMAGE,size:100,priority:1},{url:"b.json",type:Loader.JSON,size:50,priority:1}])。
		*@param complete 结束回调，如果加载失败，则返回 null 。
		*@param progress 进度回调，回调参数为当前文件加载的进度信息(0-1)。
		*@param type 资源类型。
		*@param priority 优先级，0-4，五个优先级，0优先级最高，默认为1。
		*@param cache 是否缓存加载结果。
		*@param group 分组。
		*@param ignoreCache 是否忽略缓存，强制重新加载
		*@return 此 LoaderManager 对象。
		*/
		__proto.load=function(url,complete,progress,type,priority,cache,group,ignoreCache){
			(priority===void 0)&& (priority=1);
			(cache===void 0)&& (cache=true);
			(ignoreCache===void 0)&& (ignoreCache=false);
			if ((url instanceof Array))return this._loadAssets(url,complete,progress,type,priority,cache,group);
			var content=Loader.getRes(url);
			if (content !=null){
				progress && progress.runWith(1);
				complete && complete.runWith(content);
				this._loaderCount || this.event("complete");
				}else {
				var info=LoaderManager._resMap[url];
				if (!info){
					info=this._infoPool.length ? this._infoPool.pop():new ResInfo();
					info.url=url;
					info.type=type;
					info.cache=cache;
					info.group=group;
					info.ignoreCache=ignoreCache;
					complete && info.on("complete",complete.caller,complete.method,complete.args);
					progress && info.on("progress",progress.caller,progress.method,progress.args);
					LoaderManager._resMap[url]=info;
					priority=priority < this._maxPriority ? priority :this._maxPriority-1;
					this._resInfos[priority].push(info);
					this._next();
					}else {
					complete && info._createListener("complete",complete.caller,complete.method,complete.args,false,false);
					progress && info._createListener("progress",progress.caller,progress.method,progress.args,false,false);
				}
			}
			return this;
		}

		__proto._next=function(){
			if (this._loaderCount >=this.maxLoader)return;
			for (var i=0;i < this._maxPriority;i++){
				var infos=this._resInfos[i];
				if (infos.length > 0){
					var info=infos.shift();
					if (info)return this._doLoad(info);
				}
			}
			this._loaderCount || this.event("complete");
		}

		__proto._doLoad=function(resInfo){
			this._loaderCount++;
			var loader=this._loaders.length ? this._loaders.pop():new Loader();
			loader.on("complete",null,onLoaded);
			loader.on("progress",null,function(num){
				resInfo.event("progress",num);
			});
			loader.on("error",null,function(msg){
				onLoaded(null);
			});
			var _this=this;
			function onLoaded (data){
				loader.offAll();
				loader._data=null;
				_this._loaders.push(loader);
				_this._endLoad(resInfo,(data instanceof Array)? [data] :data);
				_this._loaderCount--;
				_this._next();
			}
			loader.load(resInfo.url,resInfo.type,resInfo.cache,resInfo.group,resInfo.ignoreCache);
		}

		__proto._endLoad=function(resInfo,content){
			if (content==null){
				var errorCount=this._failRes[resInfo.url] || 0;
				if (errorCount < this.retryNum){
					console.warn("[warn]Retry to load:",resInfo.url);
					this._failRes[resInfo.url]=errorCount+1;
					Laya.timer.once(this.retryDelay,this,this._addReTry,[resInfo],false);
					return;
					}else {
					console.warn("[error]Failed to load:",resInfo.url);
					this.event("error",resInfo.url);
				}
			}
			delete LoaderManager._resMap[resInfo.url];
			resInfo.event("complete",content);
			resInfo.offAll();
			this._infoPool.push(resInfo);
		}

		__proto._addReTry=function(resInfo){
			this._resInfos[this._maxPriority-1].push(resInfo);
			this._next();
		}

		/**
		*清理指定资源地址缓存。
		*@param url 资源地址。
		*@param forceDispose 是否强制销毁，有些资源是采用引用计数方式销毁，如果forceDispose=true，则忽略引用计数，直接销毁，比如Texture，默认为false
		*/
		__proto.clearRes=function(url,forceDispose){
			(forceDispose===void 0)&& (forceDispose=false);
			Loader.clearRes(url,forceDispose);
		}

		/**
		*获取指定资源地址的资源。
		*@param url 资源地址。
		*@return 返回资源。
		*/
		__proto.getRes=function(url){
			return Loader.getRes(url);
		}

		/**清理当前未完成的加载，所有未加载的内容全部停止加载。*/
		__proto.clearUnLoaded=function(){
			for (var i=0;i < this._maxPriority;i++){
				var infos=this._resInfos[i];
				for (var j=infos.length-1;j >-1;j--){
					var info=infos[j];
					if (info){
						info.offAll();
						this._infoPool.push(info);
					}
				}
				infos.length=0;
			}
			this._loaderCount=0;
			LoaderManager._resMap={};
		}

		/**
		*根据地址集合清理掉未加载的内容
		*@param urls 资源地址集合
		*/
		__proto.cancelLoadByUrls=function(urls){
			if (!urls)return;
			for (var i=0,n=urls.length;i < n;i++){
				this.cancelLoadByUrl(urls[i]);
			}
		}

		/**
		*根据地址清理掉未加载的内容
		*@param url 资源地址
		*/
		__proto.cancelLoadByUrl=function(url){
			for (var i=0;i < this._maxPriority;i++){
				var infos=this._resInfos[i];
				for (var j=infos.length-1;j >-1;j--){
					var info=infos[j];
					if (info && info.url===url){
						infos[j]=null;
						info.offAll();
						this._infoPool.push(info);
					}
				}
			}
			if (LoaderManager._resMap[url])delete LoaderManager._resMap[url];
		}

		/**
		*@private
		*加载数组里面的资源。
		*@param arr 简单：["a.png","b.png"]，复杂[{url:"a.png",type:Loader.IMAGE,size:100,priority:1},{url:"b.json",type:Loader.JSON,size:50,priority:1}]*/
		__proto._loadAssets=function(arr,complete,progress,type,priority,cache,group){
			(priority===void 0)&& (priority=1);
			(cache===void 0)&& (cache=true);
			var itemCount=arr.length;
			var loadedCount=0;
			var totalSize=0;
			var items=[];
			var defaultType=type || "image";
			var success=true;
			for (var i=0;i < itemCount;i++){
				var item=arr[i];
				if ((typeof item=='string'))item={url:item,type:defaultType,size:1,priority:priority};
				if (!item.size)item.size=1;
				item.progress=0;
				totalSize+=item.size;
				items.push(item);
				var progressHandler=progress ? Handler.create(null,loadProgress,[item],false):null;
				var completeHandler=(complete || progress)? Handler.create(null,loadComplete,[item]):null;
				this.load(item.url,completeHandler,progressHandler,item.type,item.priority || 1,cache,item.group || group);
			}
			function loadComplete (item,content){
				loadedCount++;
				item.progress=1;
				if (!content)success=false;
				if (loadedCount===itemCount && complete){
					complete.runWith(success);
				}
			}
			function loadProgress (item,value){
				if (progress !=null){
					item.progress=value;
					var num=0;
					for (var j=0;j < items.length;j++){
						var item1=items[j];
						num+=item1.size *item1.progress;
					};
					var v=num / totalSize;
					progress.runWith(v);
				}
			}
			return this;
		}

		LoaderManager.cacheRes=function(url,data){
			Loader.cacheRes(url,data);
		}

		LoaderManager._resMap={};
		__static(LoaderManager,
		['createMap',function(){return this.createMap={atlas:[null,"atlas"]};}
		]);
		LoaderManager.__init$=function(){
			//class ResInfo extends laya.events.EventDispatcher
			ResInfo=(function(_super){
				function ResInfo(){
					this.url=null;
					this.type=null;
					this.cache=false;
					this.group=null;
					this.ignoreCache=false;
					ResInfo.__super.call(this);
				}
				__class(ResInfo,'',_super);
				return ResInfo;
			})(EventDispatcher)
		}

		return LoaderManager;
	})(EventDispatcher)


	/**
	*<code>Resource</code> 资源存取类。
	*/
	//class laya.resource.Resource extends laya.events.EventDispatcher
	var Resource=(function(_super){
		function Resource(){
			this._id=0;
			this._lastUseFrameCount=0;
			this._memorySize=0;
			this._name=null;
			this._url=null;
			this._loaded=false;
			this._released=false;
			this._disposed=false;
			this._resourceManager=null;
			this.lock=false;
			Resource.__super.call(this);
			this._id=++Resource._uniqueIDCounter;
			Resource._loadedResources.push(this);
			Resource._isLoadedResourcesSorted=false;
			this._released=true;
			this.lock=false;
			this._memorySize=0;
			this._lastUseFrameCount=-1;
			(ResourceManager.currentResourceManager)&& (ResourceManager.currentResourceManager.addResource(this));
		}

		__class(Resource,'laya.resource.Resource',_super);
		var __proto=Resource.prototype;
		Laya.imps(__proto,{"laya.resource.ICreateResource":true,"laya.resource.IDispose":true})
		/**重新创建资源,override it，同时修改memorySize属性、处理startCreate()和compoleteCreate()方法。*/
		__proto.recreateResource=function(){
			this.startCreate();
			this.completeCreate();
		}

		/**销毁资源，override it,同时修改memorySize属性。*/
		__proto.detoryResource=function(){}
		/**
		*激活资源，使用资源前应先调用此函数激活。
		*@param force 是否强制创建。
		*/
		__proto.activeResource=function(force){
			(force===void 0)&& (force=false);
			this._lastUseFrameCount=Stat.loopCount;
			if (this._released || force){
				this.recreateResource();
			}
		}

		/**
		*释放资源。
		*@param force 是否强制释放。
		*@return 是否成功释放。
		*/
		__proto.releaseResource=function(force){
			(force===void 0)&& (force=false);
			if (!force && this.lock)
				return false;
			if (!this._released || force){
				this.detoryResource();
				this._released=true;
				this._lastUseFrameCount=-1;
				this.event("released",this);
				return true;
				}else {
				return false;
			}
		}

		/**
		*设置唯一名字,如果名字重复则自动加上“-copy”。
		*@param newName 名字。
		*/
		__proto.setUniqueName=function(newName){
			var isUnique=true;
			for (var i=0;i < Resource._loadedResources.length;i++){
				if (Resource._loadedResources[i]._name!==newName || Resource._loadedResources[i]===this)
					continue ;
				isUnique=false;
				return;
			}
			if (isUnique){
				if (this.name !=newName){
					this.name=newName;
					Resource._isLoadedResourcesSorted=false;
				}
				}else{
				this.setUniqueName(newName.concat("-copy"));
			}
		}

		/**
		*@private
		*/
		__proto.onAsynLoaded=function(url,data,params){
			throw new Error("Resource: must override this function!");
		}

		/**
		*<p>彻底处理资源，处理后不能恢复。</p>
		*<p><b>注意：</b>会强制解锁清理。</p>
		*/
		__proto.dispose=function(){
			if (this._resourceManager!==null)
				throw new Error("附属于resourceManager的资源不能独立释放！");
			this._disposed=true;
			this.lock=false;
			this.releaseResource();
			var index=Resource._loadedResources.indexOf(this);
			if (index!==-1){
				Resource._loadedResources.splice(index,1);
				Resource._isLoadedResourcesSorted=false;
			}
			Loader.clearRes(this.url);
		}

		/**开始资源激活。*/
		__proto.startCreate=function(){
			this.event("recovering",this);
		}

		/**完成资源激活。*/
		__proto.completeCreate=function(){
			this._released=false;
			this.event("recovered",this);
		}

		__getset(0,__proto,'loaded',function(){
			return this._loaded;
		});

		/**
		*获取唯一标识ID(通常用于优化或识别)。
		*/
		__getset(0,__proto,'id',function(){
			return this._id;
		});

		/**
		*色湖之资源的URL地址。
		*@param value URL地址。
		*/
		/**
		*获取资源的URL地址。
		*@return URL地址。
		*/
		__getset(0,__proto,'url',function(){
			return this._url;
			},function(value){
			this._url=value;
		});

		/**
		*设置名字
		*/
		/**
		*获取名字。
		*/
		__getset(0,__proto,'name',function(){
			return this._name;
			},function(value){
			if ((value || value!=="")&& this.name!==value){
				this._name=value;
				Resource._isLoadedResourcesSorted=false;
			}
		});

		/**
		*是否已处理。
		*/
		__getset(0,__proto,'disposed',function(){
			return this._disposed;
		});

		/**
		*是否已释放。
		*/
		__getset(0,__proto,'released',function(){
			return this._released;
		});

		/**
		*资源管理员。
		*/
		__getset(0,__proto,'resourceManager',function(){
			return this._resourceManager;
		});

		/**
		*距离上次使用帧率。
		*/
		__getset(0,__proto,'lastUseFrameCount',function(){
			return this._lastUseFrameCount;
		});

		/**
		*占用内存尺寸。
		*/
		__getset(0,__proto,'memorySize',function(){
			return this._memorySize;
			},function(value){
			var offsetValue=value-this._memorySize;
			this._memorySize=value;
			this.resourceManager && this.resourceManager.addSize(offsetValue);
		});

		/**
		*本类型排序后的已载入资源。
		*/
		__getset(1,Resource,'sortedLoadedResourcesByName',function(){
			if (!Resource._isLoadedResourcesSorted){
				Resource._isLoadedResourcesSorted=true;
				Resource._loadedResources.sort(Resource.compareResourcesByName);
			}
			return Resource._loadedResources;
		},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName);

		Resource.getLoadedResourceByIndex=function(index){
			return Resource._loadedResources[index];
		}

		Resource.getLoadedResourcesCount=function(){
			return Resource._loadedResources.length;
		}

		Resource.compareResourcesByName=function(left,right){
			if (left===right)
				return 0;
			var x=left.name;
			var y=right.name;
			if (x===null){
				if (y===null)
					return 0;
				else
				return-1;
				}else {
				if (y==null)
					return 1;
				else {
					var retval=x.localeCompare(y);
					if (retval !=0)
						return retval;
					else {
						right.setUniqueName(y);
						y=right.name;
						return x.localeCompare(y);
					}
				}
			}
		}

		Resource._uniqueIDCounter=0;
		Resource._loadedResources=[];
		Resource._isLoadedResourcesSorted=false;
		return Resource;
	})(EventDispatcher)


	/**
	*<code>Texture</code> 是一个纹理处理类。
	*/
	//class laya.resource.Texture extends laya.events.EventDispatcher
	var Texture=(function(_super){
		function Texture(bitmap,uv){
			//this.bitmap=null;
			//this.uv=null;
			this.offsetX=0;
			this.offsetY=0;
			this.sourceWidth=0;
			this.sourceHeight=0;
			//this._loaded=false;
			this._w=0;
			this._h=0;
			//this.$_GID=NaN;
			//this.url=null;
			this._uvID=0;
			Texture.__super.call(this);
			if (bitmap){
				bitmap.useNum++;
			}
			this.setTo(bitmap,uv);
		}

		__class(Texture,'laya.resource.Texture',_super);
		var __proto=Texture.prototype;
		/**
		*设置此对象的位图资源、UV数据信息。
		*@param bitmap 位图资源
		*@param uv UV数据信息
		*/
		__proto.setTo=function(bitmap,uv){
			this.bitmap=bitmap;
			this.uv=uv || Texture.DEF_UV;
			if (bitmap){
				this._w=bitmap.width;
				this._h=bitmap.height;
				this.sourceWidth=this.sourceWidth || this._w;
				this.sourceHeight=this.sourceHeight || this._h
				this._loaded=this._w > 0;
				var _this=this;
				if (this._loaded){
					RunDriver.addToAtlas && RunDriver.addToAtlas(_this);
					}else {
					var bm=bitmap;
					if ((bm instanceof laya.resource.HTMLImage )&& bm.image)
						bm.image.addEventListener('load',function(e){
						RunDriver.addToAtlas && RunDriver.addToAtlas(_this);
					},false);
				}
			}
		}

		/**@private 激活资源。*/
		__proto.active=function(){
			this.bitmap.activeResource();
		}

		/**
		*销毁纹理（分直接销毁，跟计数销毁两种）
		*@param forceDispose true为强制销毁主纹理，false是通过计数销毁纹理
		*/
		__proto.destroy=function(forceDispose){
			(forceDispose===void 0)&& (forceDispose=false);
			if (this.bitmap && (this.bitmap).useNum > 0){
				if (forceDispose){
					this.bitmap.dispose();
					(this.bitmap).useNum=0;
					}else {
					(this.bitmap).useNum--;
					if ((this.bitmap).useNum==0){
						this.bitmap.dispose();
					}
				}
				this.bitmap=null;
				if (this.url && this===Laya.loader.getRes(this.url))Laya.loader.clearRes(this.url,forceDispose);
				this._loaded=false;
			}
		}

		/**
		*加载指定地址的图片。
		*@param url 图片地址。
		*/
		__proto.load=function(url){
			var _$this=this;
			this._loaded=false;
			var fileBitmap=(this.bitmap || (this.bitmap=HTMLImage.create(url)));
			if (fileBitmap)fileBitmap.useNum++;
			var _this=this;
			fileBitmap.onload=function (){
				fileBitmap.onload=null;
				_this._loaded=true;
				_$this.sourceWidth=_$this._w=fileBitmap.width;
				_$this.sourceHeight=_$this._h=fileBitmap.height;
				_this.event("loaded",this);
				(RunDriver.addToAtlas)&& (RunDriver.addToAtlas(_this));
			};
		}

		/**@private */
		__proto.addTextureToAtlas=function(e){
			RunDriver.addTextureToAtlas(this);
		}

		/**
		*获取Texture上的某个区域的像素点
		*@param x
		*@param y
		*@param width
		*@param height
		*@return 返回像素点集合
		*/
		__proto.getPixels=function(x,y,width,height){
			if (Render.isWebGL){
				return RunDriver.getTexturePixels(this,x,y,width,height);
				}else {
				Browser.canvas.size(width,height);
				Browser.canvas.clear();
				Browser.context.drawTexture(this,-x,-y,this.width,this.height,0,0);
				var info=Browser.context.getImageData(0,0,width,height);
			}
			return info.data;
		}

		/**@private */
		__proto.onAsynLoaded=function(url,bitmap){
			if (bitmap)bitmap.useNum++;
			this.setTo(bitmap,this.uv);
		}

		/**激活并获取资源。*/
		__getset(0,__proto,'source',function(){
			this.bitmap.activeResource();
			return this.bitmap.source;
		});

		/**
		*表示是否加载成功，只能表示初次载入成功（通常包含下载和载入）,并不能完全表示资源是否可立即使用（资源管理机制释放影响等）。
		*/
		__getset(0,__proto,'loaded',function(){
			return this._loaded;
		});

		/**
		*表示资源是否已释放。
		*/
		__getset(0,__proto,'released',function(){
			return this.bitmap.released;
		});

		/**实际宽度。*/
		__getset(0,__proto,'width',function(){
			if (this._w)return this._w;
			return (this.uv && this.uv!==Texture.DEF_UV)? (this.uv[2]-this.uv[0])*this.bitmap.width :this.bitmap.width;
			},function(value){
			this._w=value;
			this.sourceWidth || (this.sourceWidth=value);
		});

		/**
		*通过外部设置是否启用纹理平铺(后面要改成在着色器里计算)
		*/
		/**
		*获取当前纹理是否启用了纹理平铺
		*/
		__getset(0,__proto,'repeat',function(){
			if (Render.isWebGL && this.bitmap){
				return this.bitmap.repeat;
			}
			return true;
			},function(value){
			if (value){
				if (Render.isWebGL && this.bitmap){
					this.bitmap.repeat=value;
					if (value){
						this.bitmap.enableMerageInAtlas=false;
					}
				}
			}
		});

		/**实际高度。*/
		__getset(0,__proto,'height',function(){
			if (this._h)return this._h;
			return (this.uv && this.uv!==Texture.DEF_UV)? (this.uv[5]-this.uv[1])*this.bitmap.height :this.bitmap.height;
			},function(value){
			this._h=value;
			this.sourceHeight || (this.sourceHeight=value);
		});

		/**
		*设置线性采样的状态（目前只能第一次绘制前设置false生效,来关闭线性采样）
		*/
		/**
		*获取当前纹理是否启用了线性采样
		*/
		__getset(0,__proto,'isLinearSampling',function(){
			return Render.isWebGL ? (this.bitmap.minFifter !=0x2600):true;
			},function(value){
			if (!value && Render.isWebGL){
				if (!value && (this.bitmap.minFifter==-1)&& (this.bitmap.magFifter==-1)){
					this.bitmap.minFifter=0x2600;
					this.bitmap.magFifter=0x2600;
					this.bitmap.enableMerageInAtlas=false;
				}
			}
		});

		Texture.moveUV=function(offsetX,offsetY,uv){
			for (var i=0;i < 8;i+=2){
				uv[i]+=offsetX;
				uv[i+1]+=offsetY;
			}
			return uv;
		}

		Texture.create=function(source,x,y,width,height,offsetX,offsetY,sourceWidth,sourceHeight){
			(offsetX===void 0)&& (offsetX=0);
			(offsetY===void 0)&& (offsetY=0);
			(sourceWidth===void 0)&& (sourceWidth=0);
			(sourceHeight===void 0)&& (sourceHeight=0);
			var btex=(source instanceof laya.resource.Texture );
			var uv=btex ? source.uv :Texture.DEF_UV;
			var bitmap=btex ? source.bitmap :source;
			var tex=new Texture(bitmap,null);
			if (bitmap.width && (x+width)> bitmap.width)width=bitmap.width-x;
			if (bitmap.height && (y+height)> bitmap.height)height=bitmap.height-y;
			tex.width=width;
			tex.height=height;
			tex.offsetX=offsetX;
			tex.offsetY=offsetY;
			tex.sourceWidth=sourceWidth || width;
			tex.sourceHeight=sourceHeight || height;
			var dwidth=1 / bitmap.width;
			var dheight=1 / bitmap.height;
			x *=dwidth;
			y *=dheight;
			width *=dwidth;
			height *=dheight;
			var u1=tex.uv[0],v1=tex.uv[1],u2=tex.uv[4],v2=tex.uv[5];
			var inAltasUVWidth=(u2-u1),inAltasUVHeight=(v2-v1);
			var oriUV=Texture.moveUV(uv[0],uv[1],[x,y,x+width,y,x+width,y+height,x,y+height]);
			tex.uv=[u1+oriUV[0] *inAltasUVWidth,v1+oriUV[1] *inAltasUVHeight,u2-(1-oriUV[2])*inAltasUVWidth,v1+oriUV[3] *inAltasUVHeight,u2-(1-oriUV[4])*inAltasUVWidth,v2-(1-oriUV[5])*inAltasUVHeight,u1+oriUV[6] *inAltasUVWidth,v2-(1-oriUV[7])*inAltasUVHeight];
			return tex;
		}

		Texture.createFromTexture=function(texture,x,y,width,height){
			var rect=Rectangle.TEMP.setTo(x-texture.offsetX,y-texture.offsetY,width,height);
			var result=rect.intersection(Texture._rect1.setTo(0,0,texture.width,texture.height),Texture._rect2);
			if (result)
				var tex=Texture.create(texture,result.x,result.y,result.width,result.height,result.x-rect.x,result.y-rect.y,width,height);
			else return null;
			tex.bitmap.useNum--;
			return tex;
		}

		Texture.DEF_UV=[0,0,1.0,0,1.0,1.0,0,1.0];
		Texture.INV_UV=[0,1,1.0,1,1.0,0.0,0,0.0];
		Texture._rect1=new Rectangle();
		Texture._rect2=new Rectangle();
		return Texture;
	})(EventDispatcher)


	/**
	*<code>TimeLine</code> 是一个用来创建时间轴动画的类。
	*/
	//class laya.utils.TimeLine extends laya.events.EventDispatcher
	var TimeLine=(function(_super){
		var tweenData;
		function TimeLine(){
			this._labelDic=null;
			this._tweenDic={};
			this._tweenDataList=[];
			this._endTweenDataList=null;
			this._currTime=0;
			this._lastTime=0;
			this._startTime=0;
			this._index=0;
			this._gidIndex=0;
			this._firstTweenDic={};
			this._startTimeSort=false;
			this._endTimeSort=false;
			this._loopKey=false;
			this.scale=1;
			this._frameRate=60;
			this._frameIndex=0;
			this._total=0;
			TimeLine.__super.call(this);
		}

		__class(TimeLine,'laya.utils.TimeLine',_super);
		var __proto=TimeLine.prototype;
		/**
		*控制一个对象，从当前点移动到目标点。
		*@param target 要控制的对象。
		*@param props 要控制对象的属性。
		*@param duration 对象TWEEN的时间。
		*@param ease 缓动类型
		*@param offset 相对于上一个对象，偏移多长时间（单位：毫秒）。
		*/
		__proto.to=function(target,props,duration,ease,offset){
			(offset===void 0)&& (offset=0);
			return this._create(target,props,duration,ease,offset,true);
		}

		/**
		*从 props 属性，缓动到当前状态。
		*@param target target 目标对象(即将更改属性值的对象)
		*@param props 要控制对象的属性
		*@param duration 对象TWEEN的时间
		*@param ease 缓动类型
		*@param offset 相对于上一个对象，偏移多长时间（单位：毫秒）
		*/
		__proto.from=function(target,props,duration,ease,offset){
			(offset===void 0)&& (offset=0);
			return this._create(target,props,duration,ease,offset,false);
		}

		/**@private */
		__proto._create=function(target,props,duration,ease,offset,isTo){
			var tTweenData=new tweenData();
			tTweenData.isTo=isTo;
			tTweenData.type=0;
			tTweenData.target=target;
			tTweenData.duration=duration;
			tTweenData.data=props;
			tTweenData.startTime=this._startTime+offset;
			tTweenData.endTime=tTweenData.startTime+tTweenData.duration;
			tTweenData.ease=ease;
			this._startTime=Math.max(tTweenData.endTime,this._startTime);
			this._tweenDataList.push(tTweenData);
			this._startTimeSort=true;
			this._endTimeSort=true;
			return this;
		}

		/**
		*在时间队列中加入一个标签。
		*@param label 标签名称。
		*@param offset 标签相对于上个动画的偏移时间(单位：毫秒)。
		*/
		__proto.addLabel=function(label,offset){
			var tTweenData=new tweenData();
			tTweenData.type=1;
			tTweenData.data=label;
			tTweenData.endTime=tTweenData.startTime=this._startTime+offset;
			this._labelDic || (this._labelDic={});
			this._labelDic[label]=tTweenData;
			this._tweenDataList.push(tTweenData);
			return this;
		}

		/**
		*移除指定的标签
		*@param label
		*/
		__proto.removeLabel=function(label){
			if (this._labelDic && this._labelDic[label]){
				var tTweenData=this._labelDic[label];
				if (tTweenData){
					var tIndex=this._tweenDataList.indexOf(tTweenData);
					if (tIndex >-1){
						this._tweenDataList.splice(tIndex,1);
					}
				}
				delete this._labelDic[label];
			}
		}

		/**
		*动画从整个动画的某一时间开始。
		*@param time(单位：毫秒)。
		*/
		__proto.gotoTime=function(time){
			if (this._tweenDataList==null || this._tweenDataList.length==0)return;
			var tTween;
			var tObject;
			for (var p in this._firstTweenDic){
				tObject=this._firstTweenDic[p];
				if (tObject){
					for (var tDataP in tObject){
						if (tObject.diyTarget.hasOwnProperty(tDataP)){
							tObject.diyTarget[tDataP]=tObject[tDataP];
						}
					}
				}
			}
			for (p in this._tweenDic){
				tTween=this._tweenDic[p];
				tTween.clear();
				delete this._tweenDic[p];
			}
			this._index=0;
			this._gidIndex=0;
			this._currTime=time;
			this._lastTime=Browser.now();
			var tTweenDataCopyList;
			if (this._endTweenDataList==null || this._endTimeSort){
				this._endTimeSort=false;
				this._endTweenDataList=tTweenDataCopyList=this._tweenDataList.concat();
				function Compare (paraA,paraB){
					if (paraA.endTime > paraB.endTime){
						return 1;
						}else if (paraA.endTime < paraB.endTime){
						return-1;
						}else {
						return 0;
					}
				}
				tTweenDataCopyList.sort(Compare);
				}else {
				tTweenDataCopyList=this._endTweenDataList
			};
			var tTweenData;
			for (var i=0,n=tTweenDataCopyList.length;i < n;i++){
				tTweenData=tTweenDataCopyList[i];
				if (tTweenData.type==0){
					if (time >=tTweenData.endTime){
						this._index=Math.max(this._index,i+1);
						var props=tTweenData.data;
						for (var tP in props){
							if (tTweenData.isTo){
								tTweenData.target[tP]=props[tP];
							}
						}
						}else {
						break ;
					}
				}
			}
			for (i=0,n=this._tweenDataList.length;i < n;i++){
				tTweenData=this._tweenDataList[i];
				if (tTweenData.type==0){
					if (time >=tTweenData.startTime && time < tTweenData.endTime){
						this._index=Math.max(this._index,i+1);
						this._gidIndex++;
						tTween=Pool.getItemByClass("tween",Tween);
						tTween._create(tTweenData.target,tTweenData.data,tTweenData.duration,tTweenData.ease,Handler.create(this,this._animComplete,[this._gidIndex]),0,false,tTweenData.isTo,true,false);
						tTween.setStartTime(this._currTime-(time-tTweenData.startTime));
						tTween._updateEase(this._currTime);
						tTween.gid=this._gidIndex;
						this._tweenDic[this._gidIndex]=tTween;
					}
				}
			}
		}

		/**
		*从指定的标签开始播。
		*@param Label 标签名。
		*/
		__proto.gotoLabel=function(Label){
			if (this._labelDic==null)return;
			var tLabelData=this._labelDic[Label];
			if (tLabelData)this.gotoTime(tLabelData.startTime);
		}

		/**
		*暂停整个动画。
		*/
		__proto.pause=function(){
			Laya.timer.clear(this,this._update);
		}

		/**
		*恢复暂停动画的播放。
		*/
		__proto.resume=function(){
			this.play(this._currTime,this._loopKey);
		}

		/**
		*播放动画。
		*@param timeOrLabel 开启播放的时间点或标签名。
		*@param loop 是否循环播放。
		*/
		__proto.play=function(timeOrLabel,loop){
			(timeOrLabel===void 0)&& (timeOrLabel=0);
			(loop===void 0)&& (loop=false);
			if (this._startTimeSort){
				this._startTimeSort=false;
				function Compare (paraA,paraB){
					if (paraA.startTime > paraB.startTime){
						return 1;
						}else if (paraA.startTime < paraB.startTime){
						return-1;
						}else {
						return 0;
					}
				}
				this._tweenDataList.sort(Compare);
				for (var i=0,n=this._tweenDataList.length;i < n;i++){
					var tTweenData=this._tweenDataList[i];
					if (tTweenData !=null && tTweenData.type==0){
						var tTarget=tTweenData.target;
						var gid=(tTarget.$_GID || (tTarget.$_GID=Utils.getGID()));
						var tSrcData=null;
						if (this._firstTweenDic[gid]==null){
							tSrcData={};
							tSrcData.diyTarget=tTarget;
							this._firstTweenDic[gid]=tSrcData;
							}else {
							tSrcData=this._firstTweenDic[gid];
						}
						for (var p in tTweenData.data){
							if (tSrcData[p]==null){
								tSrcData[p]=tTarget[p];
							}
						}
					}
				}
			}
			if ((typeof timeOrLabel=='string')){
				this.gotoLabel(timeOrLabel);
				}else {
				this.gotoTime(timeOrLabel);
			}
			this._loopKey=loop;
			this._lastTime=Browser.now();
			Laya.timer.frameLoop(1,this,this._update);
		}

		/**
		*更新当前动画。
		*/
		__proto._update=function(){
			if (this._currTime >=this._startTime){
				if (this._loopKey){
					this._complete();
					if (!this._tweenDataList)return;
					this.gotoTime(0);
					}else {
					for (var p in this._tweenDic){
						tTween=this._tweenDic[p];
						tTween.complete();
					}
					this._complete();
					this.pause();
					return;
				}
			};
			var tNow=Browser.now();
			var tFrameTime=tNow-this._lastTime;
			var tCurrTime=this._currTime+=tFrameTime *this.scale;
			this._lastTime=tNow;
			var tTween;
			if (this._tweenDataList.length !=0 && this._index < this._tweenDataList.length){
				var tTweenData=this._tweenDataList[this._index];
				if (tCurrTime >=tTweenData.startTime){
					this._index++;
					if (tTweenData.type==0){
						this._gidIndex++;
						tTween=Pool.getItemByClass("tween",Tween);
						tTween._create(tTweenData.target,tTweenData.data,tTweenData.duration,tTweenData.ease,new Handler(this,this._animComplete,[this._gidIndex]),0,false,tTweenData.isTo,true,false);
						tTween.setStartTime(tCurrTime);
						tTween.gid=this._gidIndex;
						this._tweenDic[this._gidIndex]=tTween;
						}else {
						this.event("label",tTweenData.data);
					}
				}
			}
			for (p in this._tweenDic){
				tTween=this._tweenDic[p];
				tTween._updateEase(tCurrTime);
			}
		}

		/**
		*指定的动画索引处的动画播放完成后，把此动画从列表中删除。
		*@param index
		*/
		__proto._animComplete=function(index){
			var tTween=this._tweenDic[index];
			if (tTween)delete this._tweenDic[index];
		}

		/**@private */
		__proto._complete=function(){
			this.event("complete");
		}

		/**
		*重置所有对象，复用对象的时候使用。
		*/
		__proto.reset=function(){
			var p;
			if (this._labelDic){
				for (p in this._labelDic){
					delete this._labelDic[p];
				}
			};
			var tTween;
			for (p in this._tweenDic){
				tTween=this._tweenDic[p];
				tTween.clear();
				delete this._tweenDic[p];
			}
			for (p in this._firstTweenDic){
				delete this._firstTweenDic[p];
			}
			this._endTweenDataList=null;
			this._tweenDataList.length=0;
			this._currTime=0;
			this._lastTime=0;
			this._startTime=0;
			this._index=0;
			this._gidIndex=0;
			this.scale=1;
			Laya.timer.clear(this,this._update);
		}

		/**
		*彻底销毁此对象。
		*/
		__proto.destroy=function(){
			this.reset();
			this._labelDic=null;
			this._tweenDic=null;
			this._tweenDataList=null;
			this._firstTweenDic=null;
		}

		/**
		*@private
		*设置帧索引
		*/
		/**
		*@private
		*得到帧索引
		*/
		__getset(0,__proto,'index',function(){
			return this._frameIndex;
			},function(value){
			this._frameIndex=value;
			this.gotoTime(this._frameIndex / this._frameRate *1000);
		});

		/**
		*得到总帧数据
		*/
		__getset(0,__proto,'total',function(){
			this._total=Math.floor(this._startTime / 1000 *this._frameRate);
			return this._total;
		});

		TimeLine.to=function(target,props,duration,ease,offset){
			(offset===void 0)&& (offset=0);
			return (new TimeLine()).to(target,props,duration,ease,offset);
		}

		TimeLine.from=function(target,props,duration,ease,offset){
			(offset===void 0)&& (offset=0);
			return (new TimeLine()).from(target,props,duration,ease,offset);
		}

		TimeLine.__init$=function(){
			//class tweenData
			tweenData=(function(){
				function tweenData(){
					this.type=0;
					this.isTo=true;
					this.startTime=NaN;
					this.endTime=NaN;
					this.target=null;
					this.duration=NaN;
					this.ease=null;
					this.data=null;
				}
				__class(tweenData,'');
				return tweenData;
			})()
		}

		return TimeLine;
	})(EventDispatcher)


	/**
	*<code>AutoBitmap</code> 类是用于表示位图图像或绘制图形的显示对象。
	*<p>封装了位置，宽高及九宫格的处理，供UI组件使用。</p>
	*/
	//class laya.ui.AutoBitmap extends laya.display.Graphics
	var AutoBitmap=(function(_super){
		function AutoBitmap(){
			this.autoCacheCmd=true;
			this._width=0;
			this._height=0;
			this._source=null;
			this._sizeGrid=null;
			this._isChanged=false;
			this._offset=null;
			AutoBitmap.__super.call(this);
		}

		__class(AutoBitmap,'laya.ui.AutoBitmap',_super);
		var __proto=AutoBitmap.prototype;
		/**@inheritDoc */
		__proto.destroy=function(){
			_super.prototype.destroy.call(this);
			this._source=null;
			this._sizeGrid=null;
			this._offset=null;
		}

		/**@private */
		__proto._setChanged=function(){
			if (!this._isChanged){
				this._isChanged=true;
				Laya.timer.callLater(this,this.changeSource);
			}
		}

		/**
		*@private
		*修改纹理资源。
		*/
		__proto.changeSource=function(){
			if (AutoBitmap.cacheCount++> 50)AutoBitmap.clearCache();
			this._isChanged=false;
			var source=this._source;
			if (!source || !source.bitmap)return;
			var width=this.width;
			var height=this.height;
			var sizeGrid=this._sizeGrid;
			var sw=source.sourceWidth;
			var sh=source.sourceHeight;
			if (!sizeGrid || (sw===width && sh===height)){
				this.cleanByTexture(source,this._offset ? this._offset[0] :0,this._offset ? this._offset[1] :0,width,height);
				}else {
				source.$_GID || (source.$_GID=Utils.getGID());
				var key=source.$_GID+"."+width+"."+height+"."+sizeGrid.join(".");
				if (AutoBitmap.cmdCaches[key]){
					this.cmds=AutoBitmap.cmdCaches[key];
					return;
				}
				this.clear();
				var top=sizeGrid[0];
				var right=sizeGrid[1];
				var bottom=sizeGrid[2];
				var left=sizeGrid[3];
				var repeat=sizeGrid[4];
				if (left+right > width){
					right=0;
				}
				left && top && this.drawTexture(AutoBitmap.getTexture(source,0,0,left,top),0,0,left,top);
				right && top && this.drawTexture(AutoBitmap.getTexture(source,sw-right,0,right,top),width-right,0,right,top);
				left && bottom && this.drawTexture(AutoBitmap.getTexture(source,0,sh-bottom,left,bottom),0,height-bottom,left,bottom);
				right && bottom && this.drawTexture(AutoBitmap.getTexture(source,sw-right,sh-bottom,right,bottom),width-right,height-bottom,right,bottom);
				top && this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,0,sw-left-right,top),left,0,width-left-right,top);
				bottom && this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,sh-bottom,sw-left-right,bottom),left,height-bottom,width-left-right,bottom);
				left && this.drawBitmap(repeat,AutoBitmap.getTexture(source,0,top,left,sh-top-bottom),0,top,left,height-top-bottom);
				right && this.drawBitmap(repeat,AutoBitmap.getTexture(source,sw-right,top,right,sh-top-bottom),width-right,top,right,height-top-bottom);
				this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,top,sw-left-right,sh-top-bottom),left,top,width-left-right,height-top-bottom);
				if (this.autoCacheCmd && !Render.isConchApp)AutoBitmap.cmdCaches[key]=this.cmds;
			}
			this._repaint();
		}

		__proto.drawBitmap=function(repeat,tex,x,y,width,height){
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			if (width < 0.1 || height < 0.1)return;
			if (repeat && (tex.width!=width || tex.height !=height))this.fillTexture(tex,x,y,width,height);
			else this.drawTexture(tex,x,y,width,height);
		}

		/**
		*当前实例的有效缩放网格数据。
		*<p>如果设置为null,则在应用任何缩放转换时，将正常缩放整个显示对象。</p>
		*<p>数据格式：[上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)]。
		*<ul><li>例如：[4,4,4,4,1]</li></ul></p>
		*<p> <code>sizeGrid</code> 的值如下所示：
		*<ol>
		*<li>上边距</li>
		*<li>右边距</li>
		*<li>下边距</li>
		*<li>左边距</li>
		*<li>是否重复填充(值为0：不重复填充，1：重复填充)</li>
		*</ol></p>
		*<p>当定义 <code>sizeGrid</code> 属性时，该显示对象被分割到以 <code>sizeGrid</code> 数据中的"上边距,右边距,下边距,左边距" 组成的矩形为基础的具有九个区域的网格中，该矩形定义网格的中心区域。网格的其它八个区域如下所示：
		*<ul>
		*<li>矩形上方的区域</li>
		*<li>矩形外的右上角</li>
		*<li>矩形左侧的区域</li>
		*<li>矩形右侧的区域</li>
		*<li>矩形外的左下角</li>
		*<li>矩形下方的区域</li>
		*<li>矩形外的右下角</li>
		*<li>矩形外的左上角</li>
		*</ul>
		*同时也支持3宫格，比如0,4,0,4,1为水平3宫格，4,0,4,0,1为垂直3宫格，3宫格性能比9宫格高。
		*</p>
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this._sizeGrid;
			},function(value){
			this._sizeGrid=value;
			this._setChanged();
		});

		/**
		*表示显示对象的宽度，以像素为单位。
		*/
		__getset(0,__proto,'width',function(){
			if (this._width)return this._width;
			if (this._source)return this._source.sourceWidth;
			return 0;
			},function(value){
			if (this._width !=value){
				this._width=value;
				this._setChanged();
			}
		});

		/**
		*表示显示对象的高度，以像素为单位。
		*/
		__getset(0,__proto,'height',function(){
			if (this._height)return this._height;
			if (this._source)return this._source.sourceHeight;
			return 0;
			},function(value){
			if (this._height !=value){
				this._height=value;
				this._setChanged();
			}
		});

		/**
		*对象的纹理资源。
		*@see laya.resource.Texture
		*/
		__getset(0,__proto,'source',function(){
			return this._source;
			},function(value){
			if (value){
				this._source=value
				this._setChanged();
				}else {
				this._source=null;
				this.clear();
			}
		});

		AutoBitmap.getTexture=function(tex,x,y,width,height){
			if (width <=0)width=1;
			if (height <=0)height=1;
			tex.$_GID || (tex.$_GID=Utils.getGID())
			var key=tex.$_GID+"."+x+"."+y+"."+width+"."+height;
			var texture=AutoBitmap.textureCache[key];
			if (!texture){
				texture=AutoBitmap.textureCache[key]=Texture.createFromTexture(tex,x,y,width,height);
			}
			return texture;
		}

		AutoBitmap.clearCache=function(){
			AutoBitmap.cacheCount=0;
			AutoBitmap.cmdCaches={};
			AutoBitmap.textureCache={};
		}

		AutoBitmap.setCache=function(key,value){
			AutoBitmap.cacheCount++;
			AutoBitmap.textureCache[key]=value;
		}

		AutoBitmap.getCache=function(key){
			return AutoBitmap.textureCache[key];
		}

		AutoBitmap.cmdCaches={};
		AutoBitmap.cacheCount=0;
		AutoBitmap.textureCache={};
		return AutoBitmap;
	})(Graphics)


	/**
	*<code>UIEvent</code> 类用来定义UI组件类的事件类型。
	*/
	//class laya.ui.UIEvent extends laya.events.Event
	var UIEvent=(function(_super){
		function UIEvent(){UIEvent.__super.call(this);;
		};

		__class(UIEvent,'laya.ui.UIEvent',_super);
		UIEvent.SHOW_TIP="showtip";
		UIEvent.HIDE_TIP="hidetip";
		return UIEvent;
	})(Event)


	/**
	*本类用于模块间消息传递
	*@author ww
	*/
	//class laya.debug.tools.Notice extends laya.events.EventDispatcher
	var Notice=(function(_super){
		function Notice(){
			Notice.__super.call(this);
		}

		__class(Notice,'laya.debug.tools.Notice',_super);
		Notice.notify=function(type,data){
			Notice.I.event(type,data);
		}

		Notice.listen=function(type,_scope,fun,args,cancelBefore){
			(cancelBefore===void 0)&& (cancelBefore=false);
			if(cancelBefore)Notice.cancel(type,_scope,fun);
			Notice.I.on(type,_scope,fun,args);
		}

		Notice.cancel=function(type,_scope,fun){
			Notice.I.off(type,_scope,fun);
		}

		__static(Notice,
		['I',function(){return this.I=new Notice();}
		]);
		return Notice;
	})(EventDispatcher)


	/**拖动事件类*/
	//class laya.editor.core.events.DragEvent extends laya.events.Event
	var DragEvent=(function(_super){
		function DragEvent(type,dragInitiator,data,bubbles,cancelable){
			this._data=null;
			this._dragInitiator=null;
			this.hitList=null;
			DragEvent.__super.call(this);
			(bubbles===void 0)&& (bubbles=true);
			(cancelable===void 0)&& (cancelable=false);
			this.type=type;
			this._dragInitiator=dragInitiator;
			this._data=data;
		}

		__class(DragEvent,'laya.editor.core.events.DragEvent',_super);
		var __proto=DragEvent.prototype;
		__proto.clone=function(){
			return new DragEvent(this.type,this._dragInitiator,this._data);
		}

		/**拖动的源对象*/
		__getset(0,__proto,'dragInitiator',function(){
			return this._dragInitiator;
			},function(value){
			this._dragInitiator=value;
		});

		/**拖动传递的数据*/
		__getset(0,__proto,'data',function(){
			return this._data;
			},function(value){
			this._data=value;
		});

		DragEvent.getMutiDragFiles=function(e){
			var data=e.data;
			if(data.type!="multiResFile"&&data.type!="resDir"){
				return null;
			};
			var src=e.dragInitiator;
			var fileList;
			fileList=data.fileList;
			if(data.type=="resDir"){
				fileList=FileTools.getFileList(data.asset);
			};
			var i=0,len=0;
			len=fileList.length;
			var files;
			files=[];
			for(i=0;i<len;i++){
				var path;
				path=fileList[i];
				if(FileTools.isDirectory(path))continue ;
				path=FileManager.getRelativePath(SystemSetting.assetsPath,path);
				path=FileManager.adptToCommonUrl(path);
				files.push(path);
			}
			files.sort();
			return files;
		}

		DragEvent.DRAG_START="dragStart";
		DragEvent.DRAG_DROP="dragDrop";
		DragEvent.Draging_Hit="Draging_Hit";
		DragEvent.DRAG_COMPLETE="dragComplete";
		DragEvent.DRAG_MOVE="dragMove";
		DragEvent.Res="res";
		DragEvent.ResDir="resDir";
		DragEvent.Props="Props";
		DragEvent.MULTI_RESFILE="multiResFile";
		DragEvent.DisplayDrag="displayDrag";
		DragEvent.SystemDrag="SystemDrag";
		DragEvent.Page="page";
		DragEvent.PageDir="pageDir";
		DragEvent.MULTI_PAGEFILE="multiPageFile";
		__static(DragEvent,
		['TEMP',function(){return this.TEMP=new DragEvent("dragDrop");}
		]);
		return DragEvent;
	})(Event)


	/**UI事件类*/
	//class laya.editor.core.events.UIEvent extends laya.events.Event
	var UIEvent$1=(function(_super){
		function UIEvent(type,data,bubbles,cancelable){
			this._data=null;
			UIEvent.__super.call(this);
			(bubbles===void 0)&& (bubbles=false);
			(cancelable===void 0)&& (cancelable=false);
			this.type=type;
			this._data=data;
		}

		__class(UIEvent,'laya.editor.core.events.UIEvent',_super,'UIEvent$1');
		var __proto=UIEvent.prototype;
		__proto.clone=function(){
			return new UIEvent(this.type,this._data);
		}

		/**事件数据*/
		__getset(0,__proto,'data',function(){
			return this._data;
			},function(value){
			this._data=value;
		});

		UIEvent.MOVE="move";
		UIEvent.RENDER_COMPLETED="renderCompleted";
		UIEvent.SHOW_TIP="showTip";
		UIEvent.HIDE_TIP="hideTip";
		UIEvent.IMAGE_LOADED="imageLoaded";
		UIEvent.SCROLL="scroll";
		UIEvent.FRAME_CHANGED="frameChanged";
		UIEvent.ITEM_RENDER="listRender";
		UIEvent.CHANGING="changing";
		return UIEvent;
	})(Event)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-2 上午9:51:29
	*/
	//class as3analyser.parser.struct.DefineAndBody extends as3analyser.parser.struct.CodePiece
	var DefineAndBody=(function(_super){
		function DefineAndBody(){
			this.keyWord="DefineAndBody";
			this.defineNoBody=null;
			this.defineLine=null;
			this.body=null;
			this.bodyLines=null;
			DefineAndBody.__super.call(this);
		}

		__class(DefineAndBody,'as3analyser.parser.struct.DefineAndBody',_super);
		var __proto=DefineAndBody.prototype;
		__proto.dealDifineStr=function(defineStr){
			var i=0;
			i=defineStr.indexOf("{");
			if(i>=0){
				this.defineNoBody=defineStr.substring(0,i);
				this.lines.shift();
				var lineItem;
				lineItem=new LineItem();
				lineItem.lineIndex=0;
				lineItem.lineStr="{";
				this.lines.unshift(lineItem);
				}else{
				this.defineNoBody=defineStr;
			}
		}

		__proto.parseInfo=function(defineLine){
			defineLine=defineLine;
			this.dealDifineStr(defineLine.lineStr);
			this.parseMyInfo();
		}

		__proto.parseMyInfo=function(){}
		__proto.build=function(){
			this.code=this.defineNoBody+"\n{\n"+this.body.getCode()+"\n}";
		}

		DefineAndBody.findBodyLines=function(lineCount,lines){
			var pairs;
			var tPos;
			tPos=new PosItem();
			tPos.line=lineCount;
			pairs=StringTool$1.findPair("{","}",tPos,lines);
			if(pairs){
				return pairs[pairs.length-1].line;
				}else{
				return-1;
			}
		}

		DefineAndBody.test=function(lineCount,lines,testFun){
			var tLine;
			tLine=lines[lineCount];
			var rst=0;
			rst=-1;
			if(testFun(tLine.lineStr,lineCount,lines)){
				rst=DefineAndBody.findBodyLines(lineCount,lines);
			}
			return rst;
		}

		return DefineAndBody;
	})(CodePiece)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-2 上午9:31:02
	*/
	//class as3analyser.parser.struct.CodeBlock extends as3analyser.parser.struct.CodePiece
	var CodeBlock=(function(_super){
		function CodeBlock(){
			this.varLines=null;
			this.funName=null;
			this.BlockCodeT=
			""+
			"var _$this:*=this;"+"\n"+
			"{varDefines}"+"\n"+
			"var _SyNrTn_:*,__$:Function=function (__line:int):*"+""+
			"{"+"\n"+
			"{codeBlock}"+"\n"+
			"};"+"\n"+
			"__$(0);";
			CodeBlock.__super.call(this);
		}

		__class(CodeBlock,'as3analyser.parser.struct.CodeBlock',_super);
		var __proto=CodeBlock.prototype;
		__proto.build=function(){
			var i=0;
			var len=0;
			var tLineItem;
			var tCodes;
			len=this.varLines.length;
			tCodes=[];
			for(i=0;i<len;i++){
				tLineItem=this.varLines[i];
				tCodes.push(tLineItem.lineStr);
			}
			this.code=StringTool$1.getReplace(this.BlockCodeT,"{varDefines}",tCodes.join("\n"));
			this.code=StringTool$1.getReplace(this.code,"{codeBlock}",tCodes.join("\n"));
		}

		__proto.getVarDefines=function(){
			var i=0;
			var len=0;
			len=this.lines.length;
			var tLineItem;
			this.varLines=[];
			for(i=len-1;i>=0;i--){
				tLineItem=this.lines[i];
				if(tLineItem.lineStr.indexOf("var ")>=0){
					var cLines;
					cLines=VarParser.parseValueLine(tLineItem);
					this.varLines=this.varLines.concat(cLines[0]);
					tLineItem.lineType="var";
				}
			}
		}

		// lines=ArrayTool.insertArr(lines,cLines[1],i);
		__proto.parseFunctionBody=function(){
			this.getVarDefines();
		}

		CodeBlock.createByLines=function(lines,funName,codeT){
			var rst;
			rst=new CodeBlock();
			if(codeT){
				rst.BlockCodeT=codeT;
			}
			rst.setLines(lines);
			rst.funName=funName;
			rst.parseFunctionBody();
			rst.build();
			return rst;
		}

		return CodeBlock;
	})(CodePiece)


	/**
	*本类用于模块间消息传递
	*@author ww
	*/
	//class ide.managers.Notice extends laya.events.EventDispatcher
	var Notice$1=(function(_super){
		function Notice(){
			Notice.__super.call(this);
		}

		__class(Notice,'ide.managers.Notice',_super,'Notice$1');
		Notice.notify=function(type,data){
			Notice.I.event(type,data);
		}

		Notice.listen=function(type,_scope,fun,args,cancelBefore){
			(cancelBefore===void 0)&& (cancelBefore=false);
			if(cancelBefore)Notice.cancel(type,_scope,fun);
			Notice.I.on(type,_scope,fun,args);
		}

		Notice.cancel=function(type,_scope,fun){
			Notice.I.off(type,_scope,fun);
		}

		__static(Notice,
		['I',function(){return this.I=new Notice();}
		]);
		return Notice;
	})(EventDispatcher)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-3-22 下午7:18:25
	*/
	//class laya.ide.viewer.CodeScene extends laya.ide.viewer.SceneBase
	var CodeScene=(function(_super){
		function CodeScene(){
			CodeScene.__super.call(this);
		}

		__class(CodeScene,'laya.ide.viewer.CodeScene',_super);
		var __proto=CodeScene.prototype;
		__proto.setUp=function(parent){
			CodeViewManager.I.show();
			CodeViewManager.openFile(this.pagePath);
		}

		__proto.removeSelf=function(){
			_super.prototype.removeSelf.call(this);
			CodeViewManager.I.hide();
		}

		// trace("codeScene init");
		__getset(0,__proto,'pagePath',_super.prototype._$get_pagePath,function(path){
			_super.prototype._$set_pagePath.call(this,path);
		});

		return CodeScene;
	})(SceneBase)


	/**
	*粒子编辑页面
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-21 下午7:51:20
	*/
	//class laya.ide.viewer.ParticleScene extends laya.ide.viewer.SceneBase
	var ParticleScene=(function(_super){
		function ParticleScene(){
			this.mType=null;
			ParticleScene.__super.call(this);
			this.mType=ParticleScene.ParticleType;
		}

		__class(ParticleScene,'laya.ide.viewer.ParticleScene',_super);
		var __proto=ParticleScene.prototype;
		__proto.setUp=function(parent){
			this.addRenderFrame();
		}

		__proto.open=function(){
			_super.prototype.open.call(this);
			DialogTools.showOpenFile(Sys.lang("打开粒子文件"),Utils.bind(this.openFile,this),DialogTools.getOpenParticleO());
		}

		__proto.openFile=function(file){
			if(file){
				var jsonStr=FileTools.readFile(file[0]);
				var data=ObjectTools.getObj(jsonStr);
				ViewRenderManager.render.setData(data);
				var particleData;
				particleData=ObjectTools.flatObj(data);
				Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
			}
		}

		// trace("configJson:",ObjectTools.getJsonString(data));
		__proto.save=function(){
			_super.prototype.save.call(this);
			if (this.pagePath){
				this.saveFile(this.pagePath);
				}else{
				DialogTools.showSave(Sys.lang("保存粒子配置文件"),"particle.json",Utils.bind(this.saveFile,this));
			}
		}

		__proto.onResClick=function(data){}
		//ViewRenderManager.render.updateData(updateData);
		__proto.renderDragDrop=function(e){
			_super.prototype.renderDragDrop.call(this,e);
			if(e.data&&e.data.type=="res"){
				if(!e.data.asset||e.data.asset=="")return;
				if(ResFileManager.isResFile(e.data.asset))
					this.changeValue("textureName",FileManager.getRelativePath(SystemSetting.assetsPath,e.data.asset));
			}
		}

		__proto.propChange=function(key,data){
			_super.prototype.propChange.call(this,key,data);
			this.particleValueChange(key,data)
		}

		__proto.changeTextureByPath=function(path){
			var updateData;
			updateData={};
			updateData.type="texture";
			updateData.url=path;
			ViewRenderManager.render.updateData(updateData);
		}

		__proto.saveFile=function(file){
			if(file){
				var data=ViewRenderManager.render.getRenderData();
				var fileStr;
				fileStr=ObjectTools.getJsonString(data);
				try{
					var obj=ObjectTools.getObj(fileStr);
					if(!obj.textureName){
						Alert.show(Sys.lang("保存粒子文件出错"));
						return;
					}
					}catch(e){
					Alert.show(Sys.lang("保存粒子文件出错"));
					return;
				}
				FileTools.createFile(file,ObjectTools.getJsonString(data));
				MessageManager.instance.show(Sys.lang("保存成功"));
				this._changed=false;
				StateManager.setChangeState(this.pagePath,false);
				Laya.stage.event("pageSaved");
				Laya.stage.event("pageChanged");
			}
		}

		__proto.addRenderFrame=function(){
			var renderPath;
			var type;
			type=TypeManager.getFileType(this.pagePath);
			switch(type){
				case "particle3D":
					renderPath="renders/particle3d/editor.max.html";
					break ;
				case "particlepoly":
					renderPath="renders/particlepoly/editor.max.html";
					break ;
				default :
					renderPath="renders/particle/editor.max.html";
				}
			ViewRenderManager.setRender(renderPath);
			this.show();
			ViewRenderManager.eDispatcher.once("complete",this,this.initParticleEditor);
		}

		//changeTest();
		__proto.initParticleEditor=function(){
			this._changed=false;
			var data;
			if(this.pagePath){
				if(StateManager.has(this.pagePath)){
					data=StateManager.getState(this.pagePath).now();
					}else{
					try{
						var jsonStr=FileTools.readFile(this.pagePath);
						data=ObjectTools.getObj(jsonStr);
						StateManager.updateState(this.pagePath,data);
						}catch(e){
						Alert.show(Sys.lang("读取粒子数据出错，请查看粒子文件是否已损坏"));
						return;
					}
				}
				if(TypeManager.getFileType(this.pagePath)=="particlepoly"){
					this.mType=ParticleScene.ParticlePolyType;
				}
				}else{
				data=ViewRenderManager.render.getRenderData();
			};
			var particleData;
			particleData=ObjectTools.flatObj(data);
			Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
			try{
				this.renderByData(data);
			}
			catch(e){}
		}

		__proto.renderByData=function(data){
			var updateData;
			updateData={};
			updateData.type="init";
			updateData.url=FileTools.getAbsPath(this.pagePath);
			updateData.base=FileTools.getAbsPath(SystemSetting.assetsPath+FileTools.getSep());
			updateData.data=data;
			ViewRenderManager.render.getStage()["bgColor"]=data.backColor;
			ViewRenderManager.render.updateData(updateData);
		}

		// Notice.notify(IDEEvent.SHOW_DISPLAY_TREE,[ViewRenderManager.render.getStage()]);
		__proto.goBack=function(){
			_super.prototype.goBack.call(this);
			var data=StateManager.getState(this.pagePath).back();
			if(!data){
				console.log("当前不可回退");
				return;
			};
			var particleData;
			particleData=ObjectTools.flatObj(data);
			Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
			this.setRenderData(data);
		}

		__proto.goForward=function(){
			_super.prototype.goForward.call(this);
			var data=StateManager.getState(this.pagePath).forward();
			if(!data){
				console.log("当前不可前进");
				return;
			};
			var particleData;
			particleData=ObjectTools.flatObj(data);
			Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
			this.setRenderData(data);
		}

		__proto.changeValue=function(key,value){
			var data=ViewRenderManager.render.getRenderData();
			if(data.hasOwnProperty(key)){
				ObjectTools.setKeyValue(data,key,value);
			};
			var particleData;
			particleData=ObjectTools.flatObj(data);
			Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
			this.particleValueChange(key,value);
		}

		__proto.particleValueChange=function(key,value){
			var data=ViewRenderManager.render.getRenderData();
			if (key=="textureFileName"){
				ObjectTools.setKeyValue(data,key,value);
				this.changeTextureByPath(value);
				this._changed=true;
				StateManager.updateState(this.pagePath,data);
				Laya.stage.event("pageChanged");
				return;
				}else{
				ObjectTools.setKeyValue(data,key,ObjectTools.getAutoValue(value));
				StateManager.updateState(this.pagePath,data);
			}
			this.setRenderData(data);
			var particleData;
			particleData=ObjectTools.flatObj(data);
			Notice$1.notify("PropPanel_setByObj",[particleData,this.mType]);
		}

		__proto.setRenderData=function(data){
			this.renderByData(data);
			this._changed=true;
			StateManager.setChangeState(this.pagePath,true);
			Laya.stage.event("pageChanged");
		}

		__getset(0,__proto,'hasChange',function(){
			return StateManager.hasChange(this.pagePath);
		});

		ParticleScene.ParticleType="Particle";
		ParticleScene.ParticlePolyType="PolyEmitter";
		return ParticleScene;
	})(SceneBase)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-2-23 上午11:06:53
	*/
	//class laya.ide.viewer.SceneEditorScene extends laya.ide.viewer.SceneBase
	var SceneEditorScene=(function(_super){
		function SceneEditorScene(){
			this._parent=null;
			this._ui=null;
			SceneEditorScene.__super.call(this);
		}

		__class(SceneEditorScene,'laya.ide.viewer.SceneEditorScene',_super);
		var __proto=SceneEditorScene.prototype;
		__proto.setUp=function(parent){
			_super.prototype.setUp.call(this);
			this._parent=parent;
			this.createUI();
		}

		__proto.createUI=function(){
			this._ui=new Sprite();
			var txt=new Text();
			txt.text="我是场景编辑器";
			txt.pos(100,100);
			txt.color="#ff0000";
			this._ui.addChild(txt);
			if(this._ui){
				this._ui["top"]=0;
				this._ui["left"]=0;
			}
		}

		//_ui["right"]=0;
		__proto.removeSelf=function(){
			_super.prototype.removeSelf.call(this);
			if(this._ui)this._ui.removeSelf();
		}

		__proto.show=function(){
			if(this._parent&&this._ui){
				this._parent.addChild(this._ui);
			}
		}

		return SceneEditorScene;
	})(SceneBase)


	/**
	*显示对象页
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-28 上午10:36:33
	*/
	//class laya.ide.viewer.UIPageScene extends laya.ide.viewer.SceneBase
	var UIPageScene=(function(_super){
		function UIPageScene(){
			this._parent=null;
			this._ui=null;
			UIPageScene.__super.call(this);
		}

		__class(UIPageScene,'laya.ide.viewer.UIPageScene',_super);
		var __proto=UIPageScene.prototype;
		__proto.setUp=function(parent){
			_super.prototype.setUp.call(this);
			this._parent=parent;
			this._ui=this.data;
			if(this._ui){
				this._ui["top"]=0;
				this._ui["left"]=0;
			}
		}

		//_ui["right"]=0;
		__proto.removeSelf=function(){
			_super.prototype.removeSelf.call(this);
			if(this._ui)this._ui.removeSelf();
		}

		__proto.show=function(){
			if(this._parent&&this._ui){
				this._parent.addChild(this._ui);
			}
		}

		return UIPageScene;
	})(SceneBase)


	/**
	*iFrame页
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-27 下午7:55:01
	*/
	//class laya.ide.viewer.WebPageScene extends laya.ide.viewer.SceneBase
	var WebPageScene=(function(_super){
		function WebPageScene(){
			WebPageScene.__super.call(this);
		}

		__class(WebPageScene,'laya.ide.viewer.WebPageScene',_super);
		var __proto=WebPageScene.prototype;
		__proto.setUp=function(parent){
			_super.prototype.setUp.call(this);
			this.addRenderFrame();
		}

		__proto.addRenderFrame=function(){
			ViewRenderManager.setRender(this.pagePath);
			ViewRenderManager.show();
			ViewRenderManager.eDispatcher.once("complete",this,this.initWebScene);
		}

		//changeTest();
		__proto.initWebScene=function(){}
		return WebPageScene;
	})(SceneBase)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-9-18 下午5:52:36
	*/
	//class laya.ide.viewer.XmlEditorScene extends laya.ide.viewer.SceneBase
	var XmlEditorScene=(function(_super){
		function XmlEditorScene(){
			this._parent=null;
			this._ui=null;
			this.iFrameCodeView=null;
			this._preCode=null;
			this._oldCode=null;
			XmlEditorScene.__super.call(this);
			this.iFrameCodeView=new XMLEditorSprite();
			this.iFrameCodeView.top=this.iFrameCodeView.bottom=this.iFrameCodeView.left=0;
			this.iFrameCodeView.right=0;
			this.iFrameCodeView.bottom=0;
			this.iFrameCodeView.on("txtchange",this,this.txtChange);
			this.iFrameCodeView.on("editorsave",this,this.save);
		}

		__class(XmlEditorScene,'laya.ide.viewer.XmlEditorScene',_super);
		var __proto=XmlEditorScene.prototype;
		__proto.setUp=function(parent){
			_super.prototype.setUp.call(this);
			this._parent=parent;
			this._ui=new Box();
			this._ui.addChild(this.iFrameCodeView);
			this._ui.on("mousedown",this,this.mouseDownW);
			if(this._ui){
				this._ui["top"]=0;
				this._ui["bottom"]=0;
				this._ui["left"]=0;
				this._ui["right"]=0;
			}
		}

		__proto.txtChange=function(){
			this._changed=(this._oldCode!=this.iFrameCodeView.getCode());
			Laya.stage.event("pageChanged");
		}

		__proto.mouseDownW=function(){}
		__proto.removeSelf=function(){
			_super.prototype.removeSelf.call(this);
			if(this._ui)this._ui.removeSelf();
			if(this.iFrameCodeView){
				this._preCode=this.iFrameCodeView.getCode();
			}
		}

		__proto.show=function(){
			if(this._parent&&this._ui){
				this._parent.addChild(this._ui);
				if(this._preCode){
					this.iFrameCodeView.setCode(this._preCode);
				}
			}
		}

		__proto.save=function(){
			_super.prototype.save.call(this);
			this._oldCode=this.iFrameCodeView.getCode();
			FileManager.createTxtFile(this.pagePath,this._oldCode);
			this._changed=false;
			Laya.stage.event("pageChanged");
			if(TypeManager.getFileType(this.pagePath)=="Script"){
				var sPath;
				sPath=FileManager.getWorkRelativePath(this.pagePath);
				if(AppendPropGroupTool.isScriptInit(sPath)){
					PropPanel.instance.clearPanelCache(AppendPropGroupTool.getScriptName(sPath));
					AppendPropGroupTool.clearScript(sPath);
				}
			}
		}

		__getset(0,__proto,'pagePath',_super.prototype._$get_pagePath,function(path){
			_super.prototype._$set_pagePath.call(this,path);
			var txt=FileManager.readTxtFile(path);
			this._oldCode=txt;
			this.iFrameCodeView.setCode(txt);
		});

		return XmlEditorScene;
	})(SceneBase)


	/**
	*<p> <code>Sprite</code> 类是基本显示对象节点，通过graphics可以绘制图片或者矢量图，支持旋转，缩放，位移等操作。Sprite同时也是容器类，用来添加多个子节点。</p>
	*LayaAir引擎API设计精简巧妙。核心显示类只有一个Sprite。Sprite针对不同的情况做了渲染优化，所以保证一个类实现丰富功能的同时，又达到高性能。
	*Sprite默认没有宽高，可以手动设置宽高，或者通过getbounds函数获取，还可以设置autoSize=true，然后再获取宽高。Sprite的宽高只是用来做碰撞使用，并不影响显示大小，如果更改显示大小，需要使用scaleX，scaleY。
	*Sprite默认不接受鼠标事件，即mouseEnabled=false，但是只要对其监听任意鼠标事件，会自动打开自己以及所有父对象的mouseEnabled=true。所以一般也无需手动设置mouseEnabled。
	*
	*@example 以下示例代码，创建了一个 <code>Sprite</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.display.Sprite;
		*import laya.events.Event;
		*
		*public class Sprite_Example
		*{
			*private var sprite:Sprite;
			*private var shape:Sprite
			*public function Sprite_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*onInit();
				*}
			*private function onInit():void
			*{
				*sprite=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。
				*sprite.loadImage("resource/ui/bg.png");//加载并显示图片。
				*sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。
				*sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。
				*sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。
				*sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。
				*Laya.stage.addChild(sprite);//将此 sprite 对象添加到显示列表。
				*sprite.on(Event.CLICK,this,onClickSprite);//给 sprite 对象添加点击事件侦听。
				*shape=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。
				*shape.graphics.drawRect(0,0,100,100,"#ccff00","#ff0000",2);//绘制一个有边框的填充矩形。
				*shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。
				*shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。
				*shape.width=100;//设置 shape 对象的宽度。
				*shape.height=100;//设置 shape 对象的高度。
				*shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。
				*shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。
				*Laya.stage.addChild(shape);//将此 shape 对象添加到显示列表。
				*shape.on(Event.CLICK,this,onClickShape);//给 shape 对象添加点击事件侦听。
				*}
			*private function onClickSprite():void
			*{
				*trace("点击 sprite 对象。");
				*sprite.rotation+=5;//旋转 sprite 对象。
				*}
			*private function onClickShape():void
			*{
				*trace("点击 shape 对象。");
				*shape.rotation+=5;//旋转 shape 对象。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*var sprite;
	*var shape;
	*Sprite_Example();
	*function Sprite_Example()
	*{
		*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
		*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
		*onInit();
		*}
	*function onInit()
	*{
		*sprite=new laya.display.Sprite();//创建一个 Sprite 类的实例对象 sprite 。
		*sprite.loadImage("resource/ui/bg.png");//加载并显示图片。
		*sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。
		*sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。
		*sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。
		*sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。
		*Laya.stage.addChild(sprite);//将此 sprite 对象添加到显示列表。
		*sprite.on(Event.CLICK,this,onClickSprite);//给 sprite 对象添加点击事件侦听。
		*shape=new laya.display.Sprite();//创建一个 Sprite 类的实例对象 sprite 。
		*shape.graphics.drawRect(0,0,100,100,"#ccff00","#ff0000",2);//绘制一个有边框的填充矩形。
		*shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。
		*shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。
		*shape.width=100;//设置 shape 对象的宽度。
		*shape.height=100;//设置 shape 对象的高度。
		*shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。
		*shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。
		*Laya.stage.addChild(shape);//将此 shape 对象添加到显示列表。
		*shape.on(laya.events.Event.CLICK,this,onClickShape);//给 shape 对象添加点击事件侦听。
		*}
	*function onClickSprite()
	*{
		*console.log("点击 sprite 对象。");
		*sprite.rotation+=5;//旋转 sprite 对象。
		*}
	*function onClickShape()
	*{
		*console.log("点击 shape 对象。");
		*shape.rotation+=5;//旋转 shape 对象。
		*}
	*</listing>
	*<listing version="3.0">
	*import Sprite=laya.display.Sprite;
	*class Sprite_Example {
		*private sprite:Sprite;
		*private shape:Sprite
		*public Sprite_Example(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.onInit();
			*}
		*private onInit():void {
			*this.sprite=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。
			*this.sprite.loadImage("resource/ui/bg.png");//加载并显示图片。
			*this.sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。
			*this.sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。
			*this.sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。
			*this.sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。
			*Laya.stage.addChild(this.sprite);//将此 sprite 对象添加到显示列表。
			*this.sprite.on(laya.events.Event.CLICK,this,this.onClickSprite);//给 sprite 对象添加点击事件侦听。
			*this.shape=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。
			*this.shape.graphics.drawRect(0,0,100,100,"#ccff00","#ff0000",2);//绘制一个有边框的填充矩形。
			*this.shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。
			*this.shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。
			*this.shape.width=100;//设置 shape 对象的宽度。
			*this.shape.height=100;//设置 shape 对象的高度。
			*this.shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。
			*this.shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。
			*Laya.stage.addChild(this.shape);//将此 shape 对象添加到显示列表。
			*this.shape.on(laya.events.Event.CLICK,this,this.onClickShape);//给 shape 对象添加点击事件侦听。
			*}
		*private onClickSprite():void {
			*console.log("点击 sprite 对象。");
			*this.sprite.rotation+=5;//旋转 sprite 对象。
			*}
		*private onClickShape():void {
			*console.log("点击 shape 对象。");
			*this.shape.rotation+=5;//旋转 shape 对象。
			*}
		*}
	*</listing>
	*/
	//class laya.display.Sprite extends laya.display.Node
	var Sprite=(function(_super){
		function Sprite(){
			this._transform=null;
			this._tfChanged=false;
			this._x=0;
			this._y=0;
			this._width=0;
			this._height=0;
			this._repaint=1;
			this._mouseEnableState=0;
			this._zOrder=0;
			this._graphics=null;
			this._renderType=0;
			this._optimizeScrollRect=false;
			this._texture=null;
			this.mouseThrough=false;
			this.autoSize=false;
			this.hitTestPrior=false;
			this.viewport=null;
			Sprite.__super.call(this);
			this._style=Style.EMPTY;
		}

		__class(Sprite,'laya.display.Sprite',_super);
		var __proto=Sprite.prototype;
		Laya.imps(__proto,{"laya.display.ILayout":true})
		/**@private */
		__proto.createConchModel=function(){
			return new ConchNode();
		}

		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._style && this._style.destroy();
			this._transform=null;
			this._style=null;
			this._graphics=null;
		}

		/**根据zOrder进行重新排序。*/
		__proto.updateZOrder=function(){
			Utils.updateOrder(this._childs)&& this.repaint();
		}

		/**在设置cacheAs的情况下，调用此方法会重新刷新缓存。*/
		__proto.reCache=function(){
			if (this._$P.cacheCanvas)this._$P.cacheCanvas.reCache=true;
			this._repaint=1;
		}

		/**
		*设置bounds大小，如果有设置，则不再通过getBounds计算，合理使用能提高性能。
		*@param bound bounds矩形区域
		*/
		__proto.setBounds=function(bound){
			this._set$P("uBounds",bound);
		}

		/**
		*获取本对象在父容器坐标系的矩形显示区域。
		*<p><b>注意：</b>计算量较大，尽量少用。</p>
		*@return 矩形区域。
		*/
		__proto.getBounds=function(){
			if (!this._$P.mBounds)this._set$P("mBounds",new Rectangle());
			return Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);
		}

		/**
		*获取本对象在自己坐标系的矩形显示区域。
		*<p><b>注意：</b>计算量较大，尽量少用。</p>
		*@return 矩形区域。
		*/
		__proto.getSelfBounds=function(){
			if (!this._$P.mBounds)this._set$P("mBounds",new Rectangle());
			return Rectangle._getWrapRec(this._getBoundPointsM(false),this._$P.mBounds);
		}

		/**
		*@private
		*获取本对象在父容器坐标系的显示区域多边形顶点列表。
		*当显示对象链中有旋转时，返回多边形顶点列表，无旋转时返回矩形的四个顶点。
		*@param ifRotate 之前的对象链中是否有旋转。
		*@return 顶点列表。结构：[x1,y1,x2,y2,x3,y3,...]。
		*/
		__proto._boundPointsToParent=function(ifRotate){
			(ifRotate===void 0)&& (ifRotate=false);
			var pX=0,pY=0;
			if (this._style){
				pX=this._style._tf.translateX;
				pY=this._style._tf.translateY;
				ifRotate=ifRotate || (this._style._tf.rotate!==0);
				if (this._style.scrollRect){
					pX+=this._style.scrollRect.x;
					pY+=this._style.scrollRect.y;
				}
			};
			var pList=this._getBoundPointsM(ifRotate);
			if (!pList || pList.length < 1)return pList;
			if (pList.length !=8){
				pList=ifRotate ? GrahamScan.scanPList(pList):Rectangle._getWrapRec(pList,Rectangle.TEMP)._getBoundPoints();
			}
			if (!this.transform){
				Utils.transPointList(pList,this.x-pX,this.y-pY);
				return pList;
			};
			var tPoint=Point.TEMP;
			var i=0,len=pList.length;
			for (i=0;i < len;i+=2){
				tPoint.x=pList[i];
				tPoint.y=pList[i+1];
				this.toParentPoint(tPoint);
				pList[i]=tPoint.x;
				pList[i+1]=tPoint.y;
			}
			return pList;
		}

		/**
		*返回此实例中的绘图对象（ <code>Graphics</code> ）的显示区域，不包括子对象。
		*@return 一个 Rectangle 对象，表示获取到的显示区域。
		*/
		__proto.getGraphicBounds=function(){
			if (!this._graphics)return Rectangle.TEMP.setTo(0,0,0,0);
			return this._graphics.getBounds();
		}

		/**
		*@private
		*获取自己坐标系的显示区域多边形顶点列表
		*@param ifRotate 当前的显示对象链是否由旋转
		*@return 顶点列表。结构：[x1,y1,x2,y2,x3,y3,...]。
		*/
		__proto._getBoundPointsM=function(ifRotate){
			(ifRotate===void 0)&& (ifRotate=false);
			if (this._$P.uBounds)return this._$P.uBounds._getBoundPoints();
			if (!this._$P.temBM)this._set$P("temBM",[]);
			if (this.scrollRect){
				var rst=Utils.clearArray(this._$P.temBM);
				var rec=Rectangle.TEMP;
				rec.copyFrom(this.scrollRect);
				Utils.concatArray(rst,rec._getBoundPoints());
				return rst;
			};
			var pList=this._graphics ? this._graphics.getBoundPoints():Utils.clearArray(this._$P.temBM);
			var child;
			var cList;
			var __childs;
			__childs=this._childs;
			for (var i=0,n=__childs.length;i < n;i++){
				child=__childs [i];
				if ((child instanceof laya.display.Sprite )&& child.visible==true){
					cList=child._boundPointsToParent(ifRotate);
					if (cList)
						pList=pList ? Utils.concatArray(pList,cList):cList;
				}
			}
			return pList;
		}

		/**
		*@private
		*获取样式。
		*@return 样式 Style 。
		*/
		__proto.getStyle=function(){
			this._style===Style.EMPTY && (this._style=new Style());
			return this._style;
		}

		/**
		*@private
		*设置样式。
		*@param value 样式。
		*/
		__proto.setStyle=function(value){
			this._style=value;
		}

		/**@private */
		__proto._adjustTransform=function(){
			'use strict';
			this._tfChanged=false;
			var style=this._style;
			var tf=style._tf;
			var sx=tf.scaleX,sy=tf.scaleY;
			var m;
			if (tf.rotate || sx!==1 || sy!==1 || tf.skewX || tf.skewY){
				m=this._transform || (this._transform=Matrix.create());
				m.bTransform=true;
				var skx=(tf.rotate-tf.skewX)*0.0174532922222222;
				var sky=(tf.rotate+tf.skewY)*0.0174532922222222;
				var cx=Math.cos(sky);
				var ssx=Math.sin(sky);
				var cy=Math.sin(skx);
				var ssy=Math.cos(skx);
				m.a=sx *cx;
				m.b=sx *ssx;
				m.c=-sy *cy;
				m.d=sy *ssy;
				m.tx=m.ty=0;
				return m;
				}else {
				this._transform && this._transform.destroy();
				this._transform=null;
				this._renderType &=~0x04;
			}
			return m;
		}

		/**
		*设置坐标位置。相当于分别设置x和y属性。
		*@param x X 轴坐标。
		*@param y Y 轴坐标。
		*@param speedMode 是否极速模式，正常是调用this.x=value进行赋值，极速模式直接调用内部函数处理，如果未重写x,y属性，建议设置为急速模式性能更高。
		*@return 返回对象本身。
		*/
		__proto.pos=function(x,y,speedMode){
			(speedMode===void 0)&& (speedMode=false);
			if (this._x!==x || this._y!==y){
				if (this.destroyed)return this;
				if (speedMode){
					this._x=x;
					this._y=y;
					this.conchModel && this.conchModel.pos(this._x,this._y);
					var p=this._parent;
					if (p && p._repaint===0){
						p._repaint=1;
						p.parentRepaint();
					}
					if (this._$P.maskParent && this._$P.maskParent._repaint===0){
						this._$P.maskParent._repaint=1;
						this._$P.maskParent.parentRepaint();
					}
					}else {
					this.x=x;
					this.y=y;
				}
			}
			return this;
		}

		/**
		*设置轴心点。相当于分别设置pivotX和pivotY属性。
		*@param x X轴心点。
		*@param y Y轴心点。
		*@return 返回对象本身。
		*/
		__proto.pivot=function(x,y){
			this.pivotX=x;
			this.pivotY=y;
			return this;
		}

		/**
		*设置宽高。相当于分别设置width和height属性。
		*@param width 宽度值。
		*@param hegiht 高度值。
		*@return 返回对象本身。
		*/
		__proto.size=function(width,height){
			this.width=width;
			this.height=height;
			return this;
		}

		/**
		*设置缩放。相当于分别设置scaleX和scaleY属性。
		*@param scaleX X轴缩放比例。
		*@param scaleY Y轴缩放比例。
		*@param speedMode 是否极速模式，正常是调用this.scaleX=value进行赋值，极速模式直接调用内部函数处理，如果未重写scaleX,scaleY属性，建议设置为急速模式性能更高。
		*@return 返回对象本身。
		*/
		__proto.scale=function(scaleX,scaleY,speedMode){
			(speedMode===void 0)&& (speedMode=false);
			var style=this.getStyle();
			var _tf=style._tf;
			if (_tf.scaleX !=scaleX || _tf.scaleY !=scaleY){
				if (this.destroyed)return this;
				if (speedMode){
					style.setScale(scaleX,scaleY);
					this._tfChanged=true;
					this.conchModel && this.conchModel.scale(scaleX,scaleY);
					this._renderType |=0x04;
					var p=this._parent;
					if (p && p._repaint===0){
						p._repaint=1;
						p.parentRepaint();
					}
					}else {
					this.scaleX=scaleX;
					this.scaleY=scaleY;
				}
			}
			return this;
		}

		/**
		*设置倾斜角度。相当于分别设置skewX和skewY属性。
		*@param skewX 水平倾斜角度。
		*@param skewY 垂直倾斜角度。
		*@return 返回对象本身
		*/
		__proto.skew=function(skewX,skewY){
			this.skewX=skewX;
			this.skewY=skewY;
			return this;
		}

		/**
		*更新、呈现显示对象。由系统调用。
		*@param context 渲染的上下文引用。
		*@param x X轴坐标。
		*@param y Y轴坐标。
		*/
		__proto.render=function(context,x,y){
			Stat.spriteCount++;
			RenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y);
			this._repaint=0;
		}

		/**
		*绘制 当前<code>Sprite</code> 到 <code>Canvas</code> 上，并返回一个HtmlCanvas
		*注意：HtmlCanvas不是浏览器原生的canvas对象，可以通过canvas.source来获取原生的canvas对象。
		*@param canvasWidth 画布宽度。
		*@param canvasHeight 画布高度。
		*@param x 绘制的 X 轴偏移量。
		*@param y 绘制的 Y 轴偏移量。
		*@return HTMLCanvas 对象。
		*/
		__proto.drawToCanvas=function(canvasWidth,canvasHeight,offsetX,offsetY){
			return RunDriver.drawToCanvas(this,this._renderType,canvasWidth,canvasHeight,offsetX,offsetY);
		}

		/**
		*自定义更新、呈现显示对象。一般用来扩展渲染模式，请合理使用，可能会导致在加速器上无法渲染。
		*<p><b>注意</b>不要在此函数内增加或删除树节点，否则会对树节点遍历造成影响。</p>
		*@param context 渲染的上下文引用。
		*@param x X轴坐标。
		*@param y Y轴坐标。
		*/
		__proto.customRender=function(context,x,y){
			this._renderType |=0x400;
		}

		/**
		*@private
		*应用滤镜。
		*/
		__proto._applyFilters=function(){
			if (Render.isWebGL)return;
			var _filters;
			_filters=this._$P.filters;
			if (!_filters || _filters.length < 1)return;
			for (var i=0,n=_filters.length;i < n;i++){
				_filters[i].action.apply(this._$P.cacheCanvas);
			}
		}

		/**
		*@private
		*查看当前原件中是否包含发光滤镜。
		*@return 一个 Boolean 值，表示当前原件中是否包含发光滤镜。
		*/
		__proto._isHaveGlowFilter=function(){
			var i=0,len=0;
			if (this.filters){
				for (i=0;i < this.filters.length;i++){
					if (this.filters[i].type==0x08){
						return true;
					}
				}
			}
			for (i=0,len=this._childs.length;i < len;i++){
				if (this._childs[i]._isHaveGlowFilter()){
					return true;
				}
			}
			return false;
		}

		/**
		*把本地坐标转换为相对stage的全局坐标。
		*@param point 本地坐标点。
		*@param createNewPoint 是否创建一个新的Point对象作为返回值，默认为false，使用输入的point对象返回，减少对象创建开销。
		*@return 转换后的坐标的点。
		*/
		__proto.localToGlobal=function(point,createNewPoint){
			(createNewPoint===void 0)&& (createNewPoint=false);
			if (createNewPoint===true){
				point=new Point(point.x,point.y);
			};
			var ele=this;
			while (ele){
				if (ele==Laya.stage)break ;
				point=ele.toParentPoint(point);
				ele=ele.parent;
			}
			return point;
		}

		/**
		*把stage的全局坐标转换为本地坐标。
		*@param point 全局坐标点。
		*@param createNewPoint 是否创建一个新的Point对象作为返回值，默认为false，使用输入的point对象返回，减少对象创建开销。
		*@return 转换后的坐标的点。
		*/
		__proto.globalToLocal=function(point,createNewPoint){
			(createNewPoint===void 0)&& (createNewPoint=false);
			if (createNewPoint){
				point=new Point(point.x,point.y);
			};
			var ele=this;
			var list=[];
			while (ele){
				if (ele==Laya.stage)break ;
				list.push(ele);
				ele=ele.parent;
			};
			var i=list.length-1;
			while (i >=0){
				ele=list[i];
				point=ele.fromParentPoint(point);
				i--;
			}
			return point;
		}

		/**
		*将本地坐标系坐标转转换到父容器坐标系。
		*@param point 本地坐标点。
		*@return 转换后的点。
		*/
		__proto.toParentPoint=function(point){
			if (!point)return point;
			point.x-=this.pivotX;
			point.y-=this.pivotY;
			if (this.transform){
				this._transform.transformPoint(point);
			}
			point.x+=this._x;
			point.y+=this._y;
			var scroll=this._style.scrollRect;
			if (scroll){
				point.x-=scroll.x;
				point.y-=scroll.y;
			}
			return point;
		}

		/**
		*将父容器坐标系坐标转换到本地坐标系。
		*@param point 父容器坐标点。
		*@return 转换后的点。
		*/
		__proto.fromParentPoint=function(point){
			if (!point)return point;
			point.x-=this._x;
			point.y-=this._y;
			var scroll=this._style.scrollRect;
			if (scroll){
				point.x+=scroll.x;
				point.y+=scroll.y;
			}
			if (this.transform){
				this._transform.invertTransformPoint(point);
			}
			point.x+=this.pivotX;
			point.y+=this.pivotY;
			return point;
		}

		/**
		*增加事件侦听器，以使侦听器能够接收事件通知。
		*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnabled 的值为 true(如果父节点mouseEnabled=false，则停止设置父节点mouseEnabled属性)。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.on=function(type,caller,listener,args){
			if (this._mouseEnableState!==1 && this.isMouseEvent(type)){
				this.mouseEnabled=true;
				this._setBit(0x2,true);
				if (this._parent){
					this._$2__onDisplay();
				}
				return this._createListener(type,caller,listener,args,false);
			}
			return _super.prototype.on.call(this,type,caller,listener,args);
		}

		/**
		*增加事件侦听器，以使侦听器能够接收事件通知，此侦听事件响应一次后则自动移除侦听。
		*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnabled 的值为 true(如果父节点mouseEnabled=false，则停止设置父节点mouseEnabled属性)。
		*@param type 事件的类型。
		*@param caller 事件侦听函数的执行域。
		*@param listener 事件侦听函数。
		*@param args 事件侦听函数的回调参数。
		*@return 此 EventDispatcher 对象。
		*/
		__proto.once=function(type,caller,listener,args){
			if (this._mouseEnableState!==1 && this.isMouseEvent(type)){
				this.mouseEnabled=true;
				this._setBit(0x2,true);
				if (this._parent){
					this._$2__onDisplay();
				}
				return this._createListener(type,caller,listener,args,true);
			}
			return _super.prototype.once.call(this,type,caller,listener,args);
		}

		/**@private */
		__proto._$2__onDisplay=function(){
			if (this._mouseEnableState!==1){
				var ele=this;
				ele=ele.parent;
				while (ele && ele._mouseEnableState!==1){
					if (ele._getBit(0x2))break ;
					ele.mouseEnabled=true;
					ele._setBit(0x2,true);
					ele=ele.parent;
				}
			}
		}

		/**
		*加载并显示一个图片。功能等同于graphics.loadImage方法。支持异步加载。
		*注意：多次调用loadImage绘制不同的图片，会同时显示。
		*@param url 图片地址。
		*@param x 显示图片的x位置
		*@param y 显示图片的y位置
		*@param width 显示图片的宽度，设置为0表示使用图片默认宽度
		*@param height 显示图片的高度，设置为0表示使用图片默认高度
		*@param complete 加载完成回调
		*@return 返回精灵对象本身
		*/
		__proto.loadImage=function(url,x,y,width,height,complete){
			var _$this=this;
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			(width===void 0)&& (width=0);
			(height===void 0)&& (height=0);
			function loaded (tex){
				if (!_$this.destroyed){
					_$this.size(x+(width || tex.width),y+(height || tex.height));
					_$this.repaint();
					complete && complete.runWith(tex);
				}
			}
			this.graphics.loadImage(url,x,y,width,height,loaded);
			return this;
		}

		/**cacheAs后，设置自己和父对象缓存失效。*/
		__proto.repaint=function(){
			this.conchModel && this.conchModel.repaint && this.conchModel.repaint();
			if (this._repaint===0){
				this._repaint=1;
				this.parentRepaint();
			}
			if (this._$P && this._$P.maskParent){
				this._$P.maskParent.repaint();
			}
		}

		/**
		*@private
		*获取是否重新缓存。
		*@return 如果重新缓存值为 true，否则值为 false。
		*/
		__proto._needRepaint=function(){
			return (this._repaint!==0)&& this._$P.cacheCanvas && this._$P.cacheCanvas.reCache;
		}

		/**@private */
		__proto._childChanged=function(child){
			if (this._childs.length)this._renderType |=0x800;
			else this._renderType &=~0x800;
			if (child && this._get$P("hasZorder"))Laya.timer.callLater(this,this.updateZOrder);
			this.repaint();
		}

		/**cacheAs时，设置所有父对象缓存失效。 */
		__proto.parentRepaint=function(){
			var p=this._parent;
			if (p && p._repaint===0){
				p._repaint=1;
				p.parentRepaint();
			}
		}

		/**
		*开始拖动此对象。
		*@param area 拖动区域，此区域为当前对象注册点活动区域（不包括对象宽高），可选。
		*@param hasInertia 鼠标松开后，是否还惯性滑动，默认为false，可选。
		*@param elasticDistance 橡皮筋效果的距离值，0为无橡皮筋效果，默认为0，可选。
		*@param elasticBackTime 橡皮筋回弹时间，单位为毫秒，默认为300毫秒，可选。
		*@param data 拖动事件携带的数据，可选。
		*@param disableMouseEvent 禁用其他对象的鼠标检测，默认为false，设置为true能提高性能。
		*@param ratio 惯性阻尼系数，影响惯性力度和时长。
		*/
		__proto.startDrag=function(area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){
			(hasInertia===void 0)&& (hasInertia=false);
			(elasticDistance===void 0)&& (elasticDistance=0);
			(elasticBackTime===void 0)&& (elasticBackTime=300);
			(disableMouseEvent===void 0)&& (disableMouseEvent=false);
			(ratio===void 0)&& (ratio=0.92);
			this._$P.dragging || (this._set$P("dragging",new Dragging()));
			this._$P.dragging.start(this,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio);
		}

		/**停止拖动此对象。*/
		__proto.stopDrag=function(){
			this._$P.dragging && this._$P.dragging.stop();
		}

		/**@private */
		__proto._setDisplay=function(value){
			if (!value){
				var cc=this._$P.cacheCanvas;
				if (cc && cc.ctx){
					Pool.recover("RenderContext",cc.ctx);
					cc.ctx.canvas.size(0,0);
					cc.ctx=null;
				};
				var fc=this._$P._filterCache;
				if (fc){
					fc.destroy();
					fc.recycle();
					this._set$P('_filterCache',null);
				}
				this._$P._isHaveGlowFilter && this._set$P('_isHaveGlowFilter',false);
			}
			_super.prototype._setDisplay.call(this,value);
		}

		/**
		*检测某个点是否在此对象内。
		*@param x 全局x坐标。
		*@param y 全局y坐标。
		*@return 表示是否在对象内。
		*/
		__proto.hitTestPoint=function(x,y){
			var point=this.globalToLocal(Point.TEMP.setTo(x,y));
			var rect=this._$P.hitArea ? this._$P.hitArea :Rectangle.TEMP.setTo(0,0,this._width,this._height);
			return rect.contains(point.x,point.y);
		}

		/**获得相对于本对象上的鼠标坐标信息。*/
		__proto.getMousePoint=function(){
			return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY));
		}

		/**@private */
		__proto._getWords=function(){
			return null;
		}

		/**@private */
		__proto._addChildsToLayout=function(out){
			var words=this._getWords();
			if (words==null && this._childs.length==0)return false;
			if (words){
				for (var i=0,n=words.length;i < n;i++){
					out.push(words[i]);
				}
			}
			this._childs.forEach(function(o,index,array){
				o._style._enableLayout()&& o._addToLayout(out);
			});
			return true;
		}

		/**@private */
		__proto._addToLayout=function(out){
			if (this._style.absolute)return;
			this._style.block ? out.push(this):(this._addChildsToLayout(out)&& (this.x=this.y=0));
		}

		/**@private */
		__proto._isChar=function(){
			return false;
		}

		/**@private */
		__proto._getCSSStyle=function(){
			return this._style.getCSSStyle();
		}

		/**
		*@private
		*设置指定属性名的属性值。
		*@param name 属性名。
		*@param value 属性值。
		*/
		__proto._setAttributes=function(name,value){
			switch (name){
				case 'x':
					this.x=parseFloat(value);
					break ;
				case 'y':
					this.y=parseFloat(value);
					break ;
				case 'width':
					this.width=parseFloat(value);
					break ;
				case 'height':
					this.height=parseFloat(value);
					break ;
				default :
					this[name]=value;
				}
		}

		/**
		*@private
		*/
		__proto._layoutLater=function(){
			this.parent && (this.parent)._layoutLater();
		}

		/**
		*<p>指定是否对使用了 scrollRect 的显示对象进行优化处理。默认为false(不优化)。</p>
		*<p>当值为ture时：将对此对象使用了scrollRect 设定的显示区域以外的显示内容不进行渲染，以提高性能(如果子对象有旋转缩放或者中心点偏移，则显示筛选会不精确)。</p>
		*/
		__getset(0,__proto,'optimizeScrollRect',function(){
			return this._optimizeScrollRect;
			},function(b){
			if (this._optimizeScrollRect !=b){
				this._optimizeScrollRect=b;
				this.conchModel && this.conchModel.optimizeScrollRect(b);
			}
		});

		/**
		*设置是否开启自定义渲染，只有开启自定义渲染，才能使用customRender函数渲染。
		*/
		__getset(0,__proto,'customRenderEnable',null,function(b){
			if (b){
				this._renderType |=0x400;
				if (Render.isConchNode){
					Sprite.CustomList.push(this);
					var canvas=new HTMLCanvas("2d");
					canvas._setContext(new CanvasRenderingContext2D());
					this.customContext=new RenderContext(0,0,canvas);
					canvas.context.setCanvasType && canvas.context.setCanvasType(2);
					this.conchModel.custom(canvas.context);
				}
			}
		});

		/**
		*指定显示对象是否缓存为静态图像。功能同cacheAs的normal模式。
		*/
		__getset(0,__proto,'cacheAsBitmap',function(){
			return this.cacheAs!=="none";
			},function(value){
			this.cacheAs=value ? (this._$P["hasFilter"] ? "none" :"normal"):"none";
		});

		/**
		*<p>指定显示对象是否缓存为静态图像，cacheAs时，子对象发生变化，会自动重新缓存，同时也可以手动调用reCache方法更新缓存。</p>
		*建议把不经常变化的“复杂内容”缓存为静态图像，能极大提高渲染性能。cacheAs有"none"，"normal"和"bitmap"三个值可选。
		*<li>默认为"none"，不做任何缓存。</li>
		*<li>当值为"normal"时，canvas模式下进行画布缓存，webgl模式下进行命令缓存。</li>
		*<li>当值为"bitmap"时，canvas模式下进行依然是画布缓存，webgl模式下使用renderTarget缓存。</li>
		*webgl下renderTarget缓存模式有最大2048大小限制，会额外增加内存开销，不断重绘时开销比较大，但是会减少drawcall，渲染性能最高。
		*webgl下命令缓存模式只会减少节点遍历及命令组织，不会减少drawcall，性能中等。
		*/
		__getset(0,__proto,'cacheAs',function(){
			return this._$P.cacheCanvas==null ? "none" :this._$P.cacheCanvas.type;
			},function(value){
			var cacheCanvas=this._$P.cacheCanvas;
			if (value===(cacheCanvas ? cacheCanvas.type :"none"))return;
			if (value!=="none"){
				if (!this._getBit(0x1))this._setUpNoticeType(0x1);
				cacheCanvas || (cacheCanvas=this._set$P("cacheCanvas",Pool.getItemByClass("cacheCanvas",Object)));
				cacheCanvas.type=value;
				cacheCanvas.reCache=true;
				this._renderType |=0x10;
				if (value=="bitmap")this.conchModel && this.conchModel.cacheAs(1);
				this._set$P("cacheForFilters",false);
				}else {
				if (this._$P["hasFilter"]){
					this._set$P("cacheForFilters",true);
					}else {
					if (cacheCanvas)Pool.recover("cacheCanvas",cacheCanvas);
					this._$P.cacheCanvas=null;
					this._renderType &=~0x10;
					this.conchModel && this.conchModel.cacheAs(0);
				}
			}
			this.repaint();
		});

		/**z排序，更改此值，则会按照值的大小对同一容器的所有对象重新排序。值越大，越靠上。默认为0，则根据添加顺序排序。*/
		__getset(0,__proto,'zOrder',function(){
			return this._zOrder;
			},function(value){
			if (this._zOrder !=value){
				this._zOrder=value;
				this.conchModel && this.conchModel.setZOrder && this.conchModel.setZOrder(value);
				if (this._parent){
					value && this._parent._set$P("hasZorder",true);
					Laya.timer.callLater(this._parent,this.updateZOrder);
				}
			}
		});

		/**旋转角度，默认值为0。以角度为单位。*/
		__getset(0,__proto,'rotation',function(){
			return this._style._tf.rotate;
			},function(value){
			var style=this.getStyle();
			if (style._tf.rotate!==value){
				style.setRotate(value);
				this._tfChanged=true;
				this.conchModel && this.conchModel.rotate(value);
				this._renderType |=0x04;
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
			}
		});

		/**
		*表示显示对象的宽度，以像素为单位。
		*宽度默认为0，可以手动设置，或者通过getbounds获取实际宽度。设置此宽度只用来做鼠标碰撞使用，改变后并不影响显示对象大小。
		*/
		__getset(0,__proto,'width',function(){
			if (!this.autoSize)return this._width;
			return this.getSelfBounds().width;
			},function(value){
			if (this._width!==value){
				this._width=value;
				this.conchModel && this.conchModel.size(value,this._height)
				this.repaint();
			}
		});

		/**表示显示对象相对于父容器的水平方向坐标值。*/
		__getset(0,__proto,'x',function(){
			return this._x;
			},function(value){
			if (this._x!==value){
				if (this.destroyed)return;
				this._x=value;
				this.conchModel && this.conchModel.pos(value,this._y);
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
				if (this._$P.maskParent && this._$P.maskParent._repaint===0){
					this._$P.maskParent._repaint=1;
					this._$P.maskParent.parentRepaint();
				}
			}
		});

		/**
		*获得相对于stage的全局Y轴缩放值（会叠加父亲节点的缩放值）。
		*/
		__getset(0,__proto,'globalScaleY',function(){
			var scale=1;
			var ele=this;
			while (ele){
				if (ele===Laya.stage)break ;
				scale *=ele.scaleX;
				ele=ele.parent;
			}
			return scale;
		});

		/**可以设置一个Rectangle区域作为点击区域，或者设置一个<code>HitArea</code>实例作为点击区域，HitArea内可以设置可点击和不可点击区域。
		*如果不设置hitArea，则根据宽高形成的区域进行碰撞。
		*/
		__getset(0,__proto,'hitArea',function(){
			return this._$P.hitArea;
			},function(value){
			this._set$P("hitArea",value);
		});

		/**设置cacheAs为非空时此值才有效，staticCache=true时，子对象变化时不会自动更新缓存，只能通过调用reCache方法手动刷新。*/
		__getset(0,__proto,'staticCache',function(){
			return this._$P.staticCache;
			},function(value){
			this._set$P("staticCache",value);
			if (!value)this.reCache();
		});

		/**设置一个Texture实例，并显示此图片（如果之前有其他绘制，则会被清除掉）。等同于graphics.clear();graphics.drawTexture()*/
		__getset(0,__proto,'texture',function(){
			return this._texture;
			},function(value){
			if (this._texture !=value){
				this._texture=value;
				this.graphics.cleanByTexture(value,0,0);
			}
		});

		/**表示显示对象相对于父容器的垂直方向坐标值。*/
		__getset(0,__proto,'y',function(){
			return this._y;
			},function(value){
			if (this._y!==value){
				if (this.destroyed)return;
				this._y=value;
				this.conchModel && this.conchModel.pos(this._x,value);
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
				if (this._$P.maskParent && this._$P.maskParent._repaint===0){
					this._$P.maskParent._repaint=1;
					this._$P.maskParent.parentRepaint();
				}
			}
		});

		/**
		*表示显示对象的高度，以像素为单位。
		*高度默认为0，可以手动设置，或者通过getbounds获取实际宽度。设置此高度只用来做鼠标碰撞使用，改变后并不影响显示对象大小。
		*/
		__getset(0,__proto,'height',function(){
			if (!this.autoSize)return this._height;
			return this.getSelfBounds().height;
			},function(value){
			if (this._height!==value){
				this._height=value;
				this.conchModel && this.conchModel.size(this._width,value);
				this.repaint();
			}
		});

		/**指定要使用的混合模式。目前只支持"lighter"。*/
		__getset(0,__proto,'blendMode',function(){
			return this._style.blendMode;
			},function(value){
			this.getStyle().blendMode=value;
			this.conchModel && this.conchModel.blendMode(value);
			if (value && value !="source-over")this._renderType |=0x08;
			else this._renderType &=~0x08;
			this.parentRepaint();
		});

		/**X轴缩放值，默认值为1。设置为负数，可以实现水平反转效果，比如scaleX=-1。*/
		__getset(0,__proto,'scaleX',function(){
			return this._style._tf.scaleX;
			},function(value){
			var style=this.getStyle();
			if (style._tf.scaleX!==value){
				style.setScaleX(value);
				this._tfChanged=true;
				this.conchModel && this.conchModel.scale(value,style._tf.scaleY);
				this._renderType |=0x04;
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
			}
		});

		/**Y轴缩放值，默认值为1。设置为负数，可以实现垂直反转效果，比如scaleX=-1。*/
		__getset(0,__proto,'scaleY',function(){
			return this._style._tf.scaleY;
			},function(value){
			var style=this.getStyle();
			if (style._tf.scaleY!==value){
				style.setScaleY(value);
				this._tfChanged=true;
				this.conchModel && this.conchModel.scale(style._tf.scaleX,value);
				this._renderType |=0x04;
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
			}
		});

		/**对舞台 <code>stage</code> 的引用。*/
		__getset(0,__proto,'stage',function(){
			return Laya.stage;
		});

		/**水平倾斜角度，默认值为0。以角度为单位。*/
		__getset(0,__proto,'skewX',function(){
			return this._style._tf.skewX;
			},function(value){
			var style=this.getStyle();
			if (style._tf.skewX!==value){
				style.setSkewX(value);
				this._tfChanged=true;
				this._renderType |=0x04;
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
			}
		});

		/**显示对象的滚动矩形范围，具有裁剪效果(如果只想限制子对象渲染区域，请使用viewport)，设置optimizeScrollRect=true，可以优化裁剪区域外的内容不进行渲染。
		*srollRect和viewport的区别：
		*1.srollRect自带裁剪效果，viewport只影响子对象渲染是否渲染，不具有裁剪效果（性能更高）。
		*2.设置rect的x,y属性均能实现区域滚动效果，但scrollRect会保持0,0点位置不变。
		**/
		__getset(0,__proto,'scrollRect',function(){
			return this._style.scrollRect;
			},function(value){
			this.getStyle().scrollRect=value;
			this.repaint();
			if (value){
				this._renderType |=0x80;
				this.conchModel && this.conchModel.scrollRect(value.x,value.y,value.width,value.height);
				}else {
				this._renderType &=~0x80;
				if (this.conchModel){
					if (Sprite.RUNTIMEVERION < "0.9.1")
						this.conchModel.removeType(0x40);
					else
					this.conchModel.removeType(0x80);
				}
			}
		});

		/**垂直倾斜角度，默认值为0。以角度为单位。*/
		__getset(0,__proto,'skewY',function(){
			return this._style._tf.skewY;
			},function(value){
			var style=this.getStyle();
			if (style._tf.skewY!==value){
				style.setSkewY(value);
				this._tfChanged=true;
				this.conchModel && this.conchModel.skew(style._tf.skewX,value);
				this._renderType |=0x04;
				var p=this._parent;
				if (p && p._repaint===0){
					p._repaint=1;
					p.parentRepaint();
				}
			}
		});

		/**
		*对象的矩阵信息。通过设置矩阵可以实现节点旋转，缩放，位移效果。
		*矩阵更多信息请参考 <code>Matrix</code>
		*/
		__getset(0,__proto,'transform',function(){
			return this._tfChanged ? this._adjustTransform():this._transform;
			},function(value){
			this._tfChanged=false;
			this._transform=value;
			if (value){
				this._x=value.tx;
				this._y=value.ty;
				value.tx=value.ty=0;
				this.conchModel && this.conchModel.transform(value.a,value.b,value.c,value.d,this._x,this._y);
			}
			if (value)this._renderType |=0x04;
			else {
				this._renderType &=~0x04;
				this.conchModel && this.conchModel.removeType(0x04);
			}
			this.parentRepaint();
		});

		/**X轴 轴心点的位置，单位为像素，默认为0。轴心点会影响对象位置，缩放中心，旋转中心。*/
		__getset(0,__proto,'pivotX',function(){
			return this._style._tf.translateX;
			},function(value){
			this.getStyle().setTranslateX(value);
			this.conchModel && this.conchModel.pivot(value,this._style._tf.translateY);
			this.repaint();
		});

		/**Y轴 轴心点的位置，单位为像素，默认为0。轴心点会影响对象位置，缩放中心，旋转中心。*/
		__getset(0,__proto,'pivotY',function(){
			return this._style._tf.translateY;
			},function(value){
			this.getStyle().setTranslateY(value);
			this.conchModel && this.conchModel.pivot(this._style._tf.translateX,value);
			this.repaint();
		});

		/**透明度，值为0-1，默认值为1，表示不透明。更改alpha值会影响drawcall。*/
		__getset(0,__proto,'alpha',function(){
			return this._style.alpha;
			},function(value){
			if (this._style && this._style.alpha!==value){
				value=value < 0 ? 0 :(value > 1 ? 1 :value);
				this.getStyle().alpha=value;
				this.conchModel && this.conchModel.alpha(value);
				if (value!==1)this._renderType |=0x02;
				else this._renderType &=~0x02;
				this.parentRepaint();
			}
		});

		/**表示是否可见，默认为true。如果设置不可见，节点将不被渲染。*/
		__getset(0,__proto,'visible',function(){
			return this._style.visible;
			},function(value){
			if (this._style && this._style.visible!==value){
				this.getStyle().visible=value;
				this.conchModel && this.conchModel.visible(value);
				this.parentRepaint();
			}
		});

		/**绘图对象。封装了绘制位图和矢量图的接口，Sprite所有的绘图操作都通过Graphics来实现的。*/
		__getset(0,__proto,'graphics',function(){
			return this._graphics || (this.graphics=RunDriver.createGraphics());
			},function(value){
			if (this._graphics)this._graphics._sp=null;
			this._graphics=value;
			if (value){
				this._renderType &=~0x01;
				this._renderType |=0x200;
				value._sp=this;
				this.conchModel && this.conchModel.graphics(this._graphics);
				}else {
				this._renderType &=~0x200;
				this._renderType &=~0x01;
				if (this.conchModel){
					if (Sprite.RUNTIMEVERION < "0.9.1")
						this.conchModel.removeType(0x100);
					else
					this.conchModel.removeType(0x200);
				}
			}
			this.repaint();
		});

		/**滤镜集合。可以设置多个滤镜组合。*/
		__getset(0,__proto,'filters',function(){
			return this._$P.filters;
			},function(value){
			value && value.length===0 && (value=null);
			if (this._$P.filters==value)return;
			this._set$P("filters",value ? value.slice():null);
			if (Render.isConchApp){
				if (this.conchModel){
					if (Sprite.RUNTIMEVERION < "0.9.1")
						this.conchModel.removeType(0x10);
					else
					this.conchModel.removeType(0x20);
				}
				if (this._$P.filters && this._$P.filters.length==1){
					this._$P.filters[0].callNative(this);
				}
			}
			if (Render.isWebGL){
				if (value && value.length){
					this._renderType |=0x20;
					}else {
					this._renderType &=~0x20;
				}
			}
			if (value && value.length > 0){
				if (!this._getBit(0x1))this._setUpNoticeType(0x1);
				if (!(Render.isWebGL && value.length==1 && (((value[0])instanceof laya.filters.ColorFilter )))){
					if (this.cacheAs !="bitmap"){
						if (!Render.isConchNode)this.cacheAs="bitmap";
						this._set$P("cacheForFilters",true);
					}
					this._set$P("hasFilter",true);
				}
				}else {
				this._set$P("hasFilter",false);
				if (this._$P["cacheForFilters"] && this.cacheAs=="bitmap"){
					this.cacheAs="none";
				}
			}
			this.repaint();
		});

		__getset(0,__proto,'parent',_super.prototype._$get_parent,function(value){
			_super.prototype._$set_parent.call(this,value);
			if (value && this._getBit(0x2)){
				this._$2__onDisplay();
			}
		});

		/**遮罩，可以设置一个对象(支持位图和矢量图)，根据对象形状进行遮罩显示。
		*【注意】遮罩对象坐标系是相对遮罩对象本身的，和Flash机制不同*/
		__getset(0,__proto,'mask',function(){
			return this._$P._mask;
			},function(value){
			if (value && this.mask && this.mask._$P.maskParent)return;
			if (value){
				this.cacheAs="bitmap";
				this._set$P("_mask",value);
				value._set$P("maskParent",this);
				}else {
				this.cacheAs="none";
				this.mask && this.mask._set$P("maskParent",null);
				this._set$P("_mask",value);
			}
			this.conchModel && this.conchModel.mask(value ? value.conchModel :null);
			this._renderType |=0x40;
			this.parentRepaint();
		});

		/**
		*是否接受鼠标事件。
		*默认为false，如果监听鼠标事件，则会自动设置本对象及父节点的属性 mouseEnable 的值都为 true（如果父节点手动设置为false，则不会更改）。
		**/
		__getset(0,__proto,'mouseEnabled',function(){
			return this._mouseEnableState > 1;
			},function(value){
			this._mouseEnableState=value ? 2 :1;
		});

		/**
		*获得相对于stage的全局X轴缩放值（会叠加父亲节点的缩放值）。
		*/
		__getset(0,__proto,'globalScaleX',function(){
			var scale=1;
			var ele=this;
			while (ele){
				if (ele===Laya.stage)break ;
				scale *=ele.scaleX;
				ele=ele.parent;
			}
			return scale;
		});

		/**
		*返回鼠标在此对象坐标系上的 X 轴坐标信息。
		*/
		__getset(0,__proto,'mouseX',function(){
			return this.getMousePoint().x;
		});

		/**
		*返回鼠标在此对象坐标系上的 Y 轴坐标信息。
		*/
		__getset(0,__proto,'mouseY',function(){
			return this.getMousePoint().y;
		});

		Sprite.fromImage=function(url){
			return new Sprite().loadImage(url);
		}

		Sprite.CustomList=[];
		__static(Sprite,
		['RUNTIMEVERION',function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf('-')+1):'';}
		]);
		return Sprite;
	})(Node)


	/**
	*@private
	*audio标签播放声音的音轨控制
	*/
	//class laya.media.h5audio.AudioSoundChannel extends laya.media.SoundChannel
	var AudioSoundChannel=(function(_super){
		function AudioSoundChannel(audio){
			this._audio=null;
			this._onEnd=null;
			this._resumePlay=null;
			AudioSoundChannel.__super.call(this);
			this._onEnd=Utils.bind(this.__onEnd,this);
			this._resumePlay=Utils.bind(this.__resumePlay,this);
			audio.addEventListener("ended",this._onEnd);
			this._audio=audio;
		}

		__class(AudioSoundChannel,'laya.media.h5audio.AudioSoundChannel',_super);
		var __proto=AudioSoundChannel.prototype;
		__proto.__onEnd=function(){
			if (this.loops==1){
				if (this.completeHandler){
					Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],false);
					this.completeHandler=null;
				}
				this.stop();
				this.event("complete");
				return;
			}
			if (this.loops > 0){
				this.loops--;
			}
			this.play();
		}

		__proto.__resumePlay=function(){
			if(this._audio)this._audio.removeEventListener("canplay",this._resumePlay);
			try {
				this._audio.currentTime=this.startTime;
				Browser.container.appendChild(this._audio);
				this._audio.play();
				}catch (e){
				this.event("error");
			}
		}

		/**
		*播放
		*/
		__proto.play=function(){
			try {
				this._audio.playbackRate=SoundManager.playbackRate;
				this._audio.currentTime=this.startTime;
				}catch (e){
				this._audio.addEventListener("canplay",this._resumePlay);
				return;
			}
			Browser.container.appendChild(this._audio);
			if("play" in this._audio)
				this._audio.play();
		}

		/**
		*停止播放
		*
		*/
		__proto.stop=function(){
			this.isStopped=true;
			SoundManager.removeChannel(this);
			this.completeHandler=null;
			if (!this._audio)
				return;
			if("pause" in this._audio)
				this._audio.pause();
			this._audio.removeEventListener("ended",this._onEnd);
			this._audio.removeEventListener("canplay",this._resumePlay);
			Pool.recover("audio:"+this.url,this._audio);
			Browser.removeElement(this._audio);
			this._audio=null;
		}

		/**
		*当前播放到的位置
		*@return
		*
		*/
		__getset(0,__proto,'position',function(){
			if (!this._audio)
				return 0;
			return this._audio.currentTime;
		});

		/**
		*获取总时间。
		*/
		__getset(0,__proto,'duration',function(){
			if (!this._audio)
				return 0;
			return this._audio.duration;
		});

		/**
		*设置音量
		*@param v
		*
		*/
		/**
		*获取音量
		*@return
		*
		*/
		__getset(0,__proto,'volume',function(){
			if (!this._audio)return 1;
			return this._audio.volume;
			},function(v){
			if (!this._audio)return;
			this._audio.volume=v;
		});

		return AudioSoundChannel;
	})(SoundChannel)


	/**
	*@private
	*web audio api方式播放声音的音轨控制
	*/
	//class laya.media.webaudio.WebAudioSoundChannel extends laya.media.SoundChannel
	var WebAudioSoundChannel=(function(_super){
		function WebAudioSoundChannel(){
			this.audioBuffer=null;
			this.gain=null;
			this.bufferSource=null;
			this._currentTime=0;
			this._volume=1;
			this._startTime=0;
			this._onPlayEnd=null;
			this.context=WebAudioSound.ctx;
			WebAudioSoundChannel.__super.call(this);
			this._onPlayEnd=Utils.bind(this.__onPlayEnd,this);
			if (this.context["createGain"]){
				this.gain=this.context["createGain"]();
				}else {
				this.gain=this.context["createGainNode"]();
			}
		}

		__class(WebAudioSoundChannel,'laya.media.webaudio.WebAudioSoundChannel',_super);
		var __proto=WebAudioSoundChannel.prototype;
		/**
		*播放声音
		*/
		__proto.play=function(){
			this._clearBufferSource();
			if (!this.audioBuffer)return;
			var context=this.context;
			var gain=this.gain;
			var bufferSource=context.createBufferSource();
			this.bufferSource=bufferSource;
			bufferSource.buffer=this.audioBuffer;
			bufferSource.connect(gain);
			if (gain)
				gain.disconnect();
			gain.connect(context.destination);
			bufferSource.onended=this._onPlayEnd;
			this._startTime=Browser.now();
			this.gain.gain.value=this._volume;
			if (this.loops==0){
				bufferSource.loop=true;
			}
			bufferSource.playbackRate.value=SoundManager.playbackRate;
			bufferSource.start(0,this.startTime);
			this._currentTime=0;
		}

		__proto.__onPlayEnd=function(){
			if (this.loops==1){
				if (this.completeHandler){
					Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],false);
					this.completeHandler=null;
				}
				this.stop();
				this.event("complete");
				return;
			}
			if (this.loops > 0){
				this.loops--;
			}
			this.play();
		}

		__proto._clearBufferSource=function(){
			if (this.bufferSource){
				var sourceNode=this.bufferSource;
				if (sourceNode.stop){
					sourceNode.stop(0);
					}else {
					sourceNode.noteOff(0);
				}
				sourceNode.disconnect(0);
				sourceNode.onended=null;
				if (!WebAudioSoundChannel._tryCleanFailed)this._tryClearBuffer(sourceNode);
				this.bufferSource=null;
			}
		}

		__proto._tryClearBuffer=function(sourceNode){
			if (!Browser.onIOS){
				WebAudioSoundChannel._tryCleanFailed=true;
				return;
			}
			try {sourceNode.buffer=WebAudioSound._miniBuffer;}catch (e){WebAudioSoundChannel._tryCleanFailed=true;}
		}

		/**
		*停止播放
		*/
		__proto.stop=function(){
			this._clearBufferSource();
			this.audioBuffer=null;
			if (this.gain)
				this.gain.disconnect();
			this.isStopped=true;
			SoundManager.removeChannel(this);
			this.completeHandler=null;
		}

		/**
		*获取当前播放位置
		*/
		__getset(0,__proto,'position',function(){
			if (this.bufferSource){
				return (Browser.now()-this._startTime)/ 1000+this.startTime;
			}
			return 0;
		});

		__getset(0,__proto,'duration',function(){
			if (this.audioBuffer){
				return this.audioBuffer.duration;
			}
			return 0;
		});

		/**
		*设置音量
		*/
		/**
		*获取音量
		*/
		__getset(0,__proto,'volume',function(){
			return this._volume;
			},function(v){
			if (this.isStopped){
				return;
			}
			this._volume=v;
			this.gain.gain.value=v;
		});

		WebAudioSoundChannel._tryCleanFailed=false;
		return WebAudioSoundChannel;
	})(SoundChannel)


	/**
	*@private
	*<code>Bitmap</code> 是图片资源类。
	*/
	//class laya.resource.Bitmap extends laya.resource.Resource
	var Bitmap=(function(_super){
		function Bitmap(){
			//this._source=null;
			//this._w=NaN;
			//this._h=NaN;
			this.useNum=0;
			Bitmap.__super.call(this);
			this._w=0;
			this._h=0;
		}

		__class(Bitmap,'laya.resource.Bitmap',_super);
		var __proto=Bitmap.prototype;
		/**
		*彻底清理资源。
		*/
		__proto.dispose=function(){
			this._resourceManager.removeResource(this);
			_super.prototype.dispose.call(this);
		}

		/***
		*宽度。
		*/
		__getset(0,__proto,'width',function(){
			return this._w;
		});

		/***
		*高度。
		*/
		__getset(0,__proto,'height',function(){
			return this._h;
		});

		/***
		*HTML Image 或 HTML Canvas 或 WebGL Texture 。
		*/
		__getset(0,__proto,'source',function(){
			return this._source;
		});

		return Bitmap;
	})(Resource)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.enginehook.LoaderHook extends laya.net.LoaderManager
	var LoaderHook=(function(_super){
		function LoaderHook(){
			LoaderHook.__super.call(this);
		}

		__class(LoaderHook,'laya.debug.tools.enginehook.LoaderHook',_super);
		var __proto=LoaderHook.prototype;
		__proto.checkUrls=function(url){
			var tarUrl;
			if ((typeof url=='string')){
				tarUrl=url;
				}else{
				tarUrl=url.url;
			}
			if (LoaderHook.preFails[tarUrl]){
				if (LoaderHook.enableFailDebugger){
					debugger;
				}
			}
		}

		__proto.chekUrlList=function(urls){
			var i=0,len=0;
			len=urls.length;
			for (i=0;i < len;i++){
				this.checkUrls(urls[i]);
			}
		}

		__proto.load=function(url,complete,progress,type,priority,cache,group,ignoreCache){
			(priority===void 0)&& (priority=1);
			(cache===void 0)&& (cache=true);
			(ignoreCache===void 0)&& (ignoreCache=false);
			if ((url instanceof Array)){
				this.chekUrlList(url);
				}else{
				this.checkUrls(url);
			}
			return _super.prototype.load.call(this,url,complete,progress,type,priority,cache,group,ignoreCache);
		}

		LoaderHook.init=function(){
			if (LoaderHook.isInited)return;
			LoaderHook.isInited=true;
			Laya.loader=new LoaderHook();
			Laya.loader.on("error",null,LoaderHook.onFail);
			LoaderHook.preFails=LocalStorage.getJSON("LoadFailItems");
			if (!LoaderHook.preFails)LoaderHook.preFails={};
		}

		LoaderHook.onFail=function(failFile){
			OutPutView.I.dTrace("LoadFail:"+failFile);
			LoaderHook.nowFails[failFile]=true;
			LocalStorage.setJSON("LoadFailItems",LoaderHook.nowFails);
		}

		LoaderHook.resetFails=function(){
			LoaderHook.nowFails={};
			LocalStorage.setJSON("LoadFailItems",LoaderHook.nowFails);
		}

		LoaderHook.preFails={};
		LoaderHook.nowFails={};
		LoaderHook.enableFailDebugger=true;
		LoaderHook.FailSign="LoadFailItems";
		LoaderHook.isInited=false;
		return LoaderHook;
	})(LoaderManager)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-9-30 下午5:10:00
	*/
	//class laya.ide.hook.LoaderHook extends laya.net.Loader
	var LoaderHook$1=(function(_super){
		function LoaderHook(){
			LoaderHook.__super.call(this);
		}

		__class(LoaderHook,'laya.ide.hook.LoaderHook',_super,'LoaderHook$1');
		var __proto=LoaderHook.prototype;
		__proto.hookedLoad=function(url,type,cache){
			(cache===void 0)&& (cache=true);
			url=URL.formatURL(url);
			this._url=url;
			this._type=type || (type=this.getTypeFromUrl(url));
			this._cache=cache;
			this._data=null;
			if (Loader.loadedMap[url]){
				this._data=Loader.loadedMap[url];
				this.event("progress",1);
				this.event("complete",this._data);
				return;
			}
			if (Loader.parserMap[type] !=null){
				if (((Loader.parserMap[type])instanceof laya.utils.Handler ))Loader.parserMap[type].runWith(this);
				else Loader.parserMap[type].call(null,this);
				return;
			}
			url=url+"?v="+Math.random();
			if (type==="image" || type==="htmlimage" || type==="nativeimage")return this._loadImage(url);
			if (type==="sound")return this._loadSound(url);
			if (!this._http){
				this._http=new HttpRequest();
				this._http.on("progress",this,this.onProgress);
				this._http.on("error",this,this.onError);
				this._http.on("complete",this,this.onLoaded);
			}
			this._http.send(url,null,"get",type!=="atlas" ? type :"json");
		}

		LoaderHook.init=function(){
			LoaderHook.I=new LoaderHook();
			LoaderHook.setRenderHook();
		}

		LoaderHook.setRenderHook=function(){
			Loader["prototype"]["load"]=LoaderHook.I.hookedLoad;
		}

		LoaderHook.I=null
		return LoaderHook;
	})(Loader)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-5-30 下午8:41:00
	*/
	//class laya.ide.managers.FontLoader extends laya.net.Loader
	var FontLoader=(function(_super){
		function FontLoader(){
			FontLoader.__super.call(this);
		}

		__class(FontLoader,'laya.ide.managers.FontLoader',_super);
		FontLoader.init=function(){
			Loader.parserMap["Font"]=FontLoader.loadFont;
		}

		FontLoader.isFontFile=function(file){
			return FileTools.getExtensionName(file)=="fnt";
		}

		FontLoader.getFontLoaderItem=function(file){
			var url;
			url=file.substr(0,file.length-4);
			url+=".font";
			return {url:url,type:"Font",priority:2 };
		}

		FontLoader.loadFont=function(loader){
			var font;
			font=new BitmapFont();
			var url;
			url=loader.url.replace(".font",".fnt");
			ResFileManager.clearRes(url);
			ResFileManager.clearRes(loader.url.replace(".font",".png"));
			var fontName;
			fontName=FileTools.getFileName(url);
			console.log("load font:",fontName,url);
			font.loadFont(url,Handler.create(null,FontLoader.loadFontComplete,[loader,fontName,font]));
		}

		FontLoader.loadFontComplete=function(loader,fontName,font){
			console.log("loaded font:",fontName);
			Text.registerBitmapFont(fontName,font);
			loader.endLoad(font);
		}

		FontLoader.isOkFont=function(file){
			if(!FileTools.exist(file.replace(".fnt",".png")))return false;
			if(!FileTools.exist(file.replace(".fnt",".fnt")))return false;
			return true;
		}

		FontLoader.Font="Font";
		return FontLoader;
	})(Loader)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-8-31 下午9:17:20
	*/
	//class as3analyser.parser.FunctionItem extends as3analyser.parser.struct.DefineAndBody
	var FunctionItem=(function(_super){
		function FunctionItem(){
			this.funName=null;
			this.allLines=null;
			this.params=null;
			this.isSigned=false;
			this.isMachineCode=false;
			this.memberDic={};
			this.words=null;
			FunctionItem.__super.call(this);
			this.keyWord="function";
		}

		__class(FunctionItem,'as3analyser.parser.FunctionItem',_super);
		var __proto=FunctionItem.prototype;
		__proto.addMember=function(tStr){
			var tMember;
			if(SingleMemberParser.getMemberType(tStr)){
				tMember=SingleMemberParser.parseMember(tStr);
				this.memberDic[tMember.name]=tMember;
			}
		}

		//trace("function add mem:"+tMember.name+" type:"+tMember.type);
		__proto.setData=function(defineLine,lines){
			this.setLines(lines);
			this.parseInfo(defineLine);
			this.parse();
		}

		__proto.parse=function(){
			var i=0;
			var len=0;
			var tLine;
			var tStr;
			len=this.lines.length;
			for(i=0;i<len;i++){
				tLine=this.lines[i];
				tStr=tLine.lineStr;
				if(SingleMemberParser.getMemberType(tStr)){
					this.addMembers(SingleMemberParser.parseMembers(tStr));
				}
			}
			this.words=ASLex.toWords(this.oCode);
			this.build();
		}

		__proto.addMembers=function(mList){
			var i=0;
			var len=0;
			var tMember;
			len=mList.length;
			for(i=0;i<len;i++){
				tMember=mList[i];
				this.memberDic[tMember.name]=tMember;
			}
		}

		//trace("function add mem:"+tMember.name+" type:"+tMember.type);
		__proto.build=function(){}
		// TODO Auto Generated method stub
		__proto.parseMyInfo=function(){
			this.funName=StringTool$1.getBetween(this.defineNoBody,"function","(");
			this.funName=StringTool$1.trim(this.funName);
			this.params=StringTool$1.getBetween(this.defineNoBody,"(",")").split(",");
			var i=0;
			var len=0;
			this.params=StringTool$1.removeEmptyStr(this.params);
			len=this.params.length;
			for(i=0;i<len;i++){
				this.addMember("var "+this.params[i]);
			}
		}

		FunctionItem.createByLines=function(lines,defineLine){
			var rst;
			rst=new FunctionItem();
			rst.setData(defineLine,lines);
			return rst;
		}

		FunctionItem.AsySign="";
		return FunctionItem;
	})(DefineAndBody)


	/**
	*动画播放基类
	*/
	//class laya.display.AnimationPlayerBase extends laya.display.Sprite
	var AnimationPlayerBase=(function(_super){
		function AnimationPlayerBase(){
			this.loop=false;
			this.wrapMode=0;
			this._index=0;
			this._count=0;
			this._isPlaying=false;
			this._labels=null;
			this._isReverse=false;
			this._frameRateChanged=false;
			this._controlNode=null;
			this._actionName=null;
			AnimationPlayerBase.__super.call(this);
			this._interval=Config.animationInterval;
			this._setUpNoticeType(0x1);
		}

		__class(AnimationPlayerBase,'laya.display.AnimationPlayerBase',_super);
		var __proto=AnimationPlayerBase.prototype;
		/**
		*播放动画。
		*@param start 开始播放的动画索引或label。
		*@param loop 是否循环。
		*@param name 如果name为空(可选)，则播放当前动画，如果不为空，则播放全局缓存动画（如果有）
		*/
		__proto.play=function(start,loop,name){
			(start===void 0)&& (start=0);
			(loop===void 0)&& (loop=true);
			(name===void 0)&& (name="");
			this._isPlaying=true;
			this.index=((typeof start=='string'))? this._getFrameByLabel(start):start;
			this.loop=loop;
			this._actionName=name;
			this._isReverse=this.wrapMode==1;
			if (this.interval > 0){
				this.timerLoop(this.interval,this,this._frameLoop,null,true);
			}
		}

		/**@private */
		__proto._getFrameByLabel=function(label){
			var i=0;
			for (i=0;i < this._count;i++){
				if (this._labels[i] && (this._labels [i]).indexOf(label)>=0)return i;
			}
			return 0;
		}

		/**@private */
		__proto._frameLoop=function(){
			if (this._isReverse){
				this._index--;
				if (this._index < 0){
					if (this.loop){
						if (this.wrapMode==2){
							this._index=this._count > 0 ? 1 :0;
							this._isReverse=false;
							}else {
							this._index=this._count-1;
						}
						this.event("complete");
						}else {
						this._index=0;
						this.stop();
						this.event("complete");
						return;
					}
				}
				}else {
				this._index++;
				if (this._index >=this._count){
					if (this.loop){
						if (this.wrapMode==2){
							this._index=this._count-2 >=0 ? this._count-2 :0;
							this._isReverse=true;
							}else {
							this._index=0;
						}
						this.event("complete");
						}else {
						this._index--;
						this.stop();
						this.event("complete");
						return;
					}
				}
			}
			this.index=this._index;
		}

		/**@private */
		__proto._setControlNode=function(node){
			if (this._controlNode){
				this._controlNode.off("display",this,this._checkResumePlaying);
				this._controlNode.off("undisplay",this,this._checkResumePlaying);
			}
			this._controlNode=node;
			if (node && node !=this){
				node.on("display",this,this._checkResumePlaying);
				node.on("undisplay",this,this._checkResumePlaying);
			}
		}

		/**@private */
		__proto._setDisplay=function(value){
			_super.prototype._setDisplay.call(this,value);
			this._checkResumePlaying();
		}

		/**@private */
		__proto._checkResumePlaying=function(){
			if (this._isPlaying){
				if (this._controlNode.displayedInStage)this.play(this._index,this.loop,this._actionName);
				else this.clearTimer(this,this._frameLoop);
			}
		}

		/**
		*停止播放。
		*/
		__proto.stop=function(){
			this._isPlaying=false;
			this.clearTimer(this,this._frameLoop);
		}

		/**
		*增加一个标签到index帧上，播放到此index后会派发label事件
		*@param label 标签名称
		*@param index 索引位置
		*/
		__proto.addLabel=function(label,index){
			if (!this._labels)this._labels={};
			if (!this._labels[index])this._labels[index]=[];
			this._labels[index].push(label);
		}

		/**
		*删除某个标签
		*@param label 标签名字，如果label为空，则删除所有Label
		*/
		__proto.removeLabel=function(label){
			if (!label)this._labels=null;
			else if (this._labels){
				for (var name in this._labels){
					this._removeLabelFromLabelList(this._labels[name],label);
				}
			}
		}

		/**@private */
		__proto._removeLabelFromLabelList=function(list,label){
			if (!list)return;
			for (var i=list.length-1;i >=0;i--){
				if (list[i]==label){
					list.splice(i,1);
				}
			}
		}

		/**
		*切换到某帧并停止
		*@param position 帧索引或label
		*/
		__proto.gotoAndStop=function(position){
			this.index=((typeof position=='string'))? this._getFrameByLabel(position):position;
			this.stop();
		}

		/**
		*@private
		*显示到某帧
		*@param value 帧索引
		*/
		__proto._displayToIndex=function(value){}
		/**清理。方便对象复用。*/
		__proto.clear=function(){
			this.stop();
			this._labels=null;
		}

		/**播放间隔(单位：毫秒)，默认为50毫秒，可以通过Config.animationInterval修改默认时间间隔。*/
		__getset(0,__proto,'interval',function(){
			return this._interval;
			},function(value){
			if (this._interval !=value){
				this._frameRateChanged=true;
				this._interval=value;
				if (this._isPlaying && value > 0){
					this.timerLoop(value,this,this._frameLoop,null,true);
				}
			}
		});

		/**
		*是否在播放中
		*/
		__getset(0,__proto,'isPlaying',function(){
			return this._isPlaying;
		});

		/**当前播放索引。*/
		__getset(0,__proto,'index',function(){
			return this._index;
			},function(value){
			this._index=value;
			this._displayToIndex(value);
			if (this._labels && this._labels[value]){
				var tArr=this._labels[value];
				for (var i=0,len=tArr.length;i < len;i++){
					this.event("label",tArr[i]);
				}
			}
		});

		/**动画长度。*/
		__getset(0,__proto,'count',function(){
			return this._count;
		});

		return AnimationPlayerBase;
	})(Sprite)


	/**
	*<p> <code>Text</code> 类用于创建显示对象以显示文本。</p>
	*@example 以下示例代码，创建了一个 <code>Text</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.display.Text;
		*public class Text_Example
		*{
			*public function Text_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*onInit();
				*}
			*private function onInit():void
			*{
				*var text:Text=new Text();//创建一个 Text 类的实例对象 text 。
				*text.text="这个是一个 Text 文本示例。";
				*text.color="#008fff";//设置 text 的文本颜色。
				*text.font="Arial";//设置 text 的文本字体。
				*text.bold=true;//设置 text 的文本显示为粗体。
				*text.fontSize=30;//设置 text 的字体大小。
				*text.wordWrap=true;//设置 text 的文本自动换行。
				*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。
				*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。
				*text.width=300;//设置 text 的宽度。
				*text.height=200;//设置 text 的高度。
				*text.italic=true;//设置 text 的文本显示为斜体。
				*text.borderColor="#fff000";//设置 text 的文本边框颜色。
				*Laya.stage.addChild(text);//将 text 添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Text_Example();
	*function Text_Example()
	*{
		*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
		*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
		*onInit();
		*}
	*function onInit()
	*{
		*var text=new laya.display.Text();//创建一个 Text 类的实例对象 text 。
		*text.text="这个是一个 Text 文本示例。";
		*text.color="#008fff";//设置 text 的文本颜色。
		*text.font="Arial";//设置 text 的文本字体。
		*text.bold=true;//设置 text 的文本显示为粗体。
		*text.fontSize=30;//设置 text 的字体大小。
		*text.wordWrap=true;//设置 text 的文本自动换行。
		*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。
		*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。
		*text.width=300;//设置 text 的宽度。
		*text.height=200;//设置 text 的高度。
		*text.italic=true;//设置 text 的文本显示为斜体。
		*text.borderColor="#fff000";//设置 text 的文本边框颜色。
		*Laya.stage.addChild(text);//将 text 添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*class Text_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.onInit();
			*}
		*private onInit():void {
			*var text:laya.display.Text=new laya.display.Text();//创建一个 Text 类的实例对象 text 。
			*text.text="这个是一个 Text 文本示例。";
			*text.color="#008fff";//设置 text 的文本颜色。
			*text.font="Arial";//设置 text 的文本字体。
			*text.bold=true;//设置 text 的文本显示为粗体。
			*text.fontSize=30;//设置 text 的字体大小。
			*text.wordWrap=true;//设置 text 的文本自动换行。
			*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。
			*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。
			*text.width=300;//设置 text 的宽度。
			*text.height=200;//设置 text 的高度。
			*text.italic=true;//设置 text 的文本显示为斜体。
			*text.borderColor="#fff000";//设置 text 的文本边框颜色。
			*Laya.stage.addChild(text);//将 text 添加到显示列表。
			*}
		*}
	*</listing>
	*/
	//class laya.display.Text extends laya.display.Sprite
	var Text=(function(_super){
		function Text(){
			this._clipPoint=null;
			this._currBitmapFont=null;
			this._text=null;
			this._isChanged=false;
			this._textWidth=0;
			this._textHeight=0;
			this._lines=[];
			this._lineWidths=[];
			this._startX=NaN;
			this._startY=NaN;
			this._lastVisibleLineIndex=-1;
			this._words=null;
			this._charSize={};
			this.underline=false;
			this._underlineColor=null;
			Text.__super.call(this);
			this.overflow=Text.VISIBLE;
			this._style=new CSSStyle(this);
			(this._style).wordWrap=false;
		}

		__class(Text,'laya.display.Text',_super);
		var __proto=Text.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._lines=null;
			if (this._words){
				this._words.length=0;
				this._words=null;
			}
		}

		/**
		*@private
		*@inheritDoc
		*/
		__proto._getBoundPointsM=function(ifRotate){
			(ifRotate===void 0)&& (ifRotate=false);
			var rec=Rectangle.TEMP;
			rec.setTo(0,0,this.width,this.height);
			return rec._getBoundPoints();
		}

		/**
		*@inheritDoc
		*/
		__proto.getGraphicBounds=function(){
			var rec=Rectangle.TEMP;
			rec.setTo(0,0,this.width,this.height);
			return rec;
		}

		/**
		*@private
		*@inheritDoc
		*/
		__proto._getCSSStyle=function(){
			return this._style;
		}

		/**
		*<p>根据指定的文本，从语言包中取当前语言的文本内容。并对此文本中的{i}文本进行替换。</p>
		*<p>例如：
		*<li>（1）text 的值为“我的名字”，先取到这个文本对应的当前语言版本里的值“My name”，将“My name”设置为当前文本的内容。</li>
		*<li>（2）text 的值为“恭喜你赢得{0}个钻石，{1}经验。”，arg1 的值为100，arg2 的值为200。
		*则先取到这个文本对应的当前语言版本里的值“Congratulations on your winning {0}diamonds,{1}experience.”，
		*然后将文本里的{0}、{1}，依据括号里的数字从0开始替换为 arg1、arg2 的值。
		*将替换处理后的文本“Congratulations on your winning 100 diamonds,200 experience.”设置为当前文本的内容。
		*</li>
		*</p>
		*@param text 文本内容。
		*@param ...args 文本替换参数。
		*/
		__proto.lang=function(text,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9,arg10){
			text=Text.langPacks && Text.langPacks[text] ? Text.langPacks[text] :text;
			if (arguments.length < 2){
				this._text=text;
				}else {
				for (var i=0,n=arguments.length;i < n;i++){
					text=text.replace("{"+i+"}",arguments[i+1]);
				}
				this._text=text;
			}
		}

		/**
		*渲染文字。
		*@param begin 开始渲染的行索引。
		*@param visibleLineCount 渲染的行数。
		*/
		__proto.renderText=function(begin,visibleLineCount){
			var graphics=this.graphics;
			graphics.clear();
			var ctxFont=(this.italic ? "italic " :"")+(this.bold ? "bold " :"")+this.fontSize+"px "+this.font;
			Browser.context.font=ctxFont;
			var padding=this.padding;
			var startX=padding[3];
			var textAlgin="left";
			var lines=this._lines;
			var lineHeight=this.leading+this._charSize.height;
			var tCurrBitmapFont=this._currBitmapFont;
			if (tCurrBitmapFont){
				lineHeight=this.leading+tCurrBitmapFont.getMaxHeight();
			};
			var startY=padding[0];
			if ((!tCurrBitmapFont)&& this._width > 0 && this._textWidth <=this._width){
				if (this.align=="right"){
					textAlgin="right";
					startX=this._width-padding[1];
					}else if (this.align=="center"){
					textAlgin="center";
					startX=this._width *0.5+padding[3]-padding[1];
				}
			}
			if (this._height > 0){
				var tempVAlign=(this._textHeight > this._height)? "top" :this.valign;
				if (tempVAlign==="middle")
					startY=(this._height-visibleLineCount *lineHeight)*0.5+padding[0]-padding[2];
				else if (tempVAlign==="bottom")
				startY=this._height-visibleLineCount *lineHeight-padding[2];
			};
			var style=this._style;
			if (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){
				var bitmapScale=tCurrBitmapFont.fontSize / this.fontSize;
			}
			if (this._clipPoint){
				graphics.save();
				if (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){
					var tClipWidth=0;
					var tClipHeight=0;
					this._width ? tClipWidth=(this._width-padding[3]-padding[1]):tClipWidth=this._textWidth;
					this._height ? tClipHeight=(this._height-padding[0]-padding[2]):tClipHeight=this._textHeight;
					tClipWidth *=bitmapScale;
					tClipHeight *=bitmapScale;
					graphics.clipRect(padding[3],padding[0],tClipWidth,tClipHeight);
					}else {
					graphics.clipRect(padding[3],padding[0],this._width ? (this._width-padding[3]-padding[1]):this._textWidth,this._height ? (this._height-padding[0]-padding[2]):this._textHeight);
				}
			};
			var password=style.password;
			if (("prompt" in this)&& this['prompt']==this._text)
				password=false;
			var x=0,y=0;
			var end=Math.min(this._lines.length,visibleLineCount+begin)|| 1;
			for (var i=begin;i < end;i++){
				var word=lines[i];
				var _word;
				if (password){
					var len=word.length;
					word="";
					for (var j=len;j > 0;j--){
						word+="●";
					}
				}
				x=startX-(this._clipPoint ? this._clipPoint.x :0);
				y=startY+lineHeight *i-(this._clipPoint ? this._clipPoint.y :0);
				this.underline && this.drawUnderline(textAlgin,x,y,i);
				if (tCurrBitmapFont){
					var tWidth=this.width;
					if (tCurrBitmapFont.autoScaleSize){
						tWidth=this.width *bitmapScale;
					}
					tCurrBitmapFont.drawText(word,this,x,y,this.align,tWidth);
					}else {
					if (Render.isWebGL){
						this._words || (this._words=[]);
						_word=this._words.length > (i-begin)? this._words[i-begin] :new WordText();
						_word.setText(word);
						}else {
						_word=word;
					}
					style.stroke ? graphics.fillBorderText(_word,x,y,ctxFont,this.color,style.strokeColor,style.stroke,textAlgin):graphics.fillText(_word,x,y,ctxFont,this.color,textAlgin);
				}
			}
			if (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){
				var tScale=1 / bitmapScale;
				this.scale(tScale,tScale);
			}
			if (this._clipPoint)
				graphics.restore();
			this._startX=startX;
			this._startY=startY;
		}

		/**
		*绘制下划线
		*@param x 本行坐标
		*@param y 本行坐标
		*@param lineIndex 本行索引
		*/
		__proto.drawUnderline=function(align,x,y,lineIndex){
			var lineWidth=this._lineWidths[lineIndex];
			switch (align){
				case 'center':
					x-=lineWidth / 2;
					break ;
				case 'right':
					x-=lineWidth;
					break ;
				case 'left':
				default :
					break ;
				}
			y+=this._charSize.height;
			this._graphics.drawLine(x,y,x+lineWidth,y,this.underlineColor || this.color,1);
		}

		/**
		*<p>排版文本。</p>
		*<p>进行宽高计算，渲染、重绘文本。</p>
		*/
		__proto.typeset=function(){
			this._isChanged=false;
			if (!this._text){
				this._clipPoint=null;
				this._textWidth=this._textHeight=0;
				this.graphics.clear();
				return;
			}
			Browser.context.font=this._getCSSStyle().font;
			this._lines.length=0;
			this._lineWidths.length=0;
			this.parseLines(this._text);
			this.evalTextSize();
			if (this.checkEnabledViewportOrNot())
				this._clipPoint || (this._clipPoint=new Point(0,0));
			else
			this._clipPoint=null;
			var lineCount=this._lines.length;
			if (this.overflow !=Text.VISIBLE){
				var func=this.overflow==Text.HIDDEN ? Math.floor :Math.ceil;
				lineCount=Math.min(lineCount,func((this.height-this.padding[0]-this.padding[2])/ (this.leading+this._charSize.height)));
			};
			var startLine=this.scrollY / (this._charSize.height+this.leading)| 0;
			this.renderText(startLine,lineCount);
			this.repaint();
		}

		__proto.evalTextSize=function(){
			var nw=NaN,nh=NaN;
			nw=Math.max.apply(this,this._lineWidths);
			if (this._currBitmapFont)
				nh=this._lines.length *(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2];
			else
			nh=this._lines.length *(this._charSize.height+this.leading)+this.padding[0]+this.padding[2];
			if (nw !=this._textWidth || nh !=this._textHeight){
				this._textWidth=nw;
				this._textHeight=nh;
				if (!this._width || !this._height)
					this.conchModel && this.conchModel.size(this._width || this._textWidth,this._height || this._textHeight);
			}
		}

		__proto.checkEnabledViewportOrNot=function(){
			return this.overflow==Text.SCROLL && ((this._width > 0 && this._textWidth > this._width)|| (this._height > 0 && this._textHeight > this._height));
		}

		/**
		*快速更改显示文本。不进行排版计算，效率较高。
		*<p>如果只更改文字内容，不更改文字样式，建议使用此接口，能提高效率。</p>
		*@param text 文本内容。
		*/
		__proto.changeText=function(text){
			if (this._text!==text){
				this.lang(text+"");
				if (this._graphics && this._graphics.replaceText(this._text)){
					}else {
					this.typeset();
				}
			}
		}

		/**
		*@private
		*分析文本换行。
		*/
		__proto.parseLines=function(text){
			var needWordWrapOrTruncate=this.wordWrap || this.overflow==Text.HIDDEN;
			if (needWordWrapOrTruncate){
				var wordWrapWidth=this.getWordWrapWidth();
			}
			if (this._currBitmapFont){
				this._charSize.width=this._currBitmapFont.getMaxWidth();
				this._charSize.height=this._currBitmapFont.getMaxHeight();
				}else {
				var measureResult=Browser.context.measureText(Text._testWord);
				this._charSize.width=measureResult.width;
				this._charSize.height=(measureResult.height || this.fontSize);
			};
			var lines=text.replace(/\r\n/g,"\n").split("\n");
			for (var i=0,n=lines.length;i < n;i++){
				var line=lines[i];
				if (needWordWrapOrTruncate)
					this.parseLine(line,wordWrapWidth);
				else {
					this._lineWidths.push(this.getTextWidth(line));
					this._lines.push(line);
				}
			}
		}

		/**
		*@private
		*解析行文本。
		*@param line 某行的文本。
		*@param wordWrapWidth 文本的显示宽度。
		*/
		__proto.parseLine=function(line,wordWrapWidth){
			var ctx=Browser.context;
			var lines=this._lines;
			var maybeIndex=0;
			var execResult;
			var charsWidth=NaN;
			var wordWidth=NaN;
			var startIndex=0;
			charsWidth=this.getTextWidth(line);
			if (charsWidth <=wordWrapWidth){
				lines.push(line);
				this._lineWidths.push(charsWidth);
				return;
			}
			charsWidth=this._charSize.width;
			maybeIndex=Math.floor(wordWrapWidth / charsWidth);
			(maybeIndex==0)&& (maybeIndex=1);
			charsWidth=this.getTextWidth(line.substring(0,maybeIndex));
			wordWidth=charsWidth;
			for (var j=maybeIndex,m=line.length;j < m;j++){
				charsWidth=this.getTextWidth(line.charAt(j));
				wordWidth+=charsWidth;
				if (wordWidth > wordWrapWidth){
					if (this.wordWrap){
						var newLine=line.substring(startIndex,j);
						if (newLine.charCodeAt(newLine.length-1)< 255){
							execResult=/[^\x20-]+$/.exec(newLine);
							if (execResult){
								j=execResult.index+startIndex;
								if (execResult.index==0)
									j+=newLine.length;
								else
								newLine=line.substring(startIndex,j);
							}
						}
						lines.push(newLine);
						this._lineWidths.push(wordWidth-charsWidth);
						startIndex=j;
						if (j+maybeIndex < m){
							j+=maybeIndex;
							charsWidth=this.getTextWidth(line.substring(startIndex,j));
							wordWidth=charsWidth;
							j--;
							}else {
							lines.push(line.substring(startIndex,m));
							this._lineWidths.push(this.getTextWidth(lines[lines.length-1]));
							startIndex=-1;
							break ;
						}
						}else if (this.overflow==Text.HIDDEN){
						lines.push(line.substring(0,j));
						this._lineWidths.push(this.getTextWidth(lines[lines.length-1]));
						return;
					}
				}
			}
			if (this.wordWrap && startIndex !=-1){
				lines.push(line.substring(startIndex,m));
				this._lineWidths.push(this.getTextWidth(lines[lines.length-1]));
			}
		}

		__proto.getTextWidth=function(text){
			if (this._currBitmapFont)
				return this._currBitmapFont.getTextWidth(text);
			else
			return Browser.context.measureText(text).width;
		}

		/**
		*获取换行所需的宽度。
		*/
		__proto.getWordWrapWidth=function(){
			var p=this.padding;
			var w=NaN;
			if (this._currBitmapFont && this._currBitmapFont.autoScaleSize)
				w=this._width *(this._currBitmapFont.fontSize / this.fontSize);
			else
			w=this._width;
			if (w <=0){
				w=this.wordWrap ? 100 :Browser.width;
			}
			w <=0 && (w=100);
			return w-p[3]-p[1];
		}

		/**
		*返回字符的位置信息。
		*@param charIndex 索引位置。
		*@param out 输出的Point引用。
		*@return 返回Point位置信息。
		*/
		__proto.getCharPoint=function(charIndex,out){
			this._isChanged && Laya.timer.runCallLater(this,this.typeset);
			var len=0,lines=this._lines,startIndex=0;
			for (var i=0,n=lines.length;i < n;i++){
				len+=lines[i].length;
				if (charIndex < len){
					var line=i;
					break ;
				}
				startIndex=len;
			};
			var ctxFont=(this.italic ? "italic " :"")+(this.bold ? "bold " :"")+this.fontSize+"px "+this.font;
			Browser.context.font=ctxFont;
			var width=this.getTextWidth(this._text.substring(startIndex,charIndex));
			var point=out || new Point();
			return point.setTo(this._startX+width-(this._clipPoint ? this._clipPoint.x :0),this._startY+line *(this._charSize.height+this.leading)-(this._clipPoint ? this._clipPoint.y :0));
		}

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'width',function(){
			if (this._width)
				return this._width;
			return this.textWidth+this.padding[1]+this.padding[3];
			},function(value){
			if (value !=this._width){
				_super.prototype._$set_width.call(this,value);
				this.isChanged=true;
			}
		});

		/**
		*表示文本的宽度，以像素为单位。
		*/
		__getset(0,__proto,'textWidth',function(){
			this._isChanged && Laya.timer.runCallLater(this,this.typeset);
			return this._textWidth;
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'height',function(){
			if (this._height)return this._height;
			return this.textHeight+this.padding[0]+this.padding[2];
			},function(value){
			if (value !=this._height){
				_super.prototype._$set_height.call(this,value);
				this.isChanged=true;
			}
		});

		/**
		*表示文本的高度，以像素为单位。
		*/
		__getset(0,__proto,'textHeight',function(){
			this._isChanged && Laya.timer.runCallLater(this,this.typeset);
			return this._textHeight;
		});

		/**
		*边距信息。
		*<p>数据格式：[上边距，右边距，下边距，左边距]（边距以像素为单位）。</p>
		*/
		__getset(0,__proto,'padding',function(){
			return this._getCSSStyle().padding;
			},function(value){
			this._getCSSStyle().padding=value;
			this.isChanged=true;
		});

		/**
		*指定文本是否为粗体字。
		*<p>默认值为 false，这意味着不使用粗体字。如果值为 true，则文本为粗体字。</p>
		*/
		__getset(0,__proto,'bold',function(){
			return this._getCSSStyle().bold;
			},function(value){
			this._getCSSStyle().bold=value;
			this.isChanged=true;
		});

		/**当前文本的内容字符串。*/
		__getset(0,__proto,'text',function(){
			return this._text || "";
			},function(value){
			if (this._text!==value){
				this.lang(value+"");
				this.isChanged=true;
				this.event("change");
			}
		});

		/**
		*表示文本的颜色值。可以通过 <code>Text.defaultColor</code> 设置默认颜色。
		*<p>默认值为黑色。</p>
		*/
		__getset(0,__proto,'color',function(){
			return this._getCSSStyle().color;
			},function(value){
			if (this._getCSSStyle().color !=value){
				this._getCSSStyle().color=value;
				if (!this._isChanged && this._graphics){
					this._graphics.replaceTextColor(this.color)
					}else {
					this.isChanged=true;
				}
			}
		});

		/**
		*文本的字体名称，以字符串形式表示。
		*<p>默认值为："Arial"，可以通过Font.defaultFont设置默认字体。</p>
		*@see laya.display.css.Font#defaultFamily
		*/
		__getset(0,__proto,'font',function(){
			return this._getCSSStyle().fontFamily;
			},function(value){
			if (this._currBitmapFont){
				this._currBitmapFont=null;
				this.scale(1,1);
			}
			if (Text._bitmapFonts && Text._bitmapFonts[value]){
				this._currBitmapFont=Text._bitmapFonts[value];
			}
			this._getCSSStyle().fontFamily=value;
			this.isChanged=true;
		});

		/**
		*指定文本的字体大小（以像素为单位）。
		*<p>默认为20像素，可以通过 <code>Text.defaultSize</code> 设置默认大小。</p>
		*/
		__getset(0,__proto,'fontSize',function(){
			return this._getCSSStyle().fontSize;
			},function(value){
			this._getCSSStyle().fontSize=value;
			this.isChanged=true;
		});

		/**
		*表示使用此文本格式的文本是否为斜体。
		*<p>默认值为 false，这意味着不使用斜体。如果值为 true，则文本为斜体。</p>
		*/
		__getset(0,__proto,'italic',function(){
			return this._getCSSStyle().italic;
			},function(value){
			this._getCSSStyle().italic=value;
			this.isChanged=true;
		});

		/**
		*表示文本的水平显示方式。
		*<p><b>取值：</b>
		*<li>"left"： 居左对齐显示。</li>
		*<li>"center"： 居中对齐显示。</li>
		*<li>"right"： 居右对齐显示。</li>
		*</p>
		*/
		__getset(0,__proto,'align',function(){
			return this._getCSSStyle().align;
			},function(value){
			this._getCSSStyle().align=value;
			this.isChanged=true;
		});

		/**
		*表示文本的垂直显示方式。
		*<p><b>取值：</b>
		*<li>"top"： 居顶部对齐显示。</li>
		*<li>"middle"： 居中对齐显示。</li>
		*<li>"bottom"： 居底部对齐显示。</li>
		*</p>
		*/
		__getset(0,__proto,'valign',function(){
			return this._getCSSStyle().valign;
			},function(value){
			this._getCSSStyle().valign=value;
			this.isChanged=true;
		});

		/**
		*表示文本是否自动换行，默认为false。
		*<p>若值为true，则自动换行；否则不自动换行。</p>
		*/
		__getset(0,__proto,'wordWrap',function(){
			return this._getCSSStyle().wordWrap;
			},function(value){
			this._getCSSStyle().wordWrap=value;
			this.isChanged=true;
		});

		/**
		*垂直行间距（以像素为单位）。
		*/
		__getset(0,__proto,'leading',function(){
			return this._getCSSStyle().leading;
			},function(value){
			this._getCSSStyle().leading=value;
			this.isChanged=true;
		});

		/**
		*文本背景颜色，以字符串表示。
		*/
		__getset(0,__proto,'bgColor',function(){
			return this._getCSSStyle().backgroundColor;
			},function(value){
			this._getCSSStyle().backgroundColor=value;
			this.isChanged=true;
		});

		/**
		*文本边框背景颜色，以字符串表示。
		*/
		__getset(0,__proto,'borderColor',function(){
			return this._getCSSStyle().borderColor;
			},function(value){
			this._getCSSStyle().borderColor=value;
			this.isChanged=true;
		});

		/**
		*<p>描边宽度（以像素为单位）。</p>
		*默认值0，表示不描边。
		*/
		__getset(0,__proto,'stroke',function(){
			return this._getCSSStyle().stroke;
			},function(value){
			this._getCSSStyle().stroke=value;
			this.isChanged=true;
		});

		/**
		*<p>描边颜色，以字符串表示。</p>
		*默认值为 "#000000"（黑色）;
		*/
		__getset(0,__proto,'strokeColor',function(){
			return this._getCSSStyle().strokeColor;
			},function(value){
			this._getCSSStyle().strokeColor=value;
			this.isChanged=true;
		});

		/**
		*一个布尔值，表示文本的属性是否有改变。若为true表示有改变。
		*/
		__getset(0,__proto,'isChanged',null,function(value){
			if (this._isChanged!==value){
				this._isChanged=value;
				value && Laya.timer.callLater(this,this.typeset);
			}
		});

		/**
		*设置横向滚动量。
		*<p>即使设置超出滚动范围的值，也会被自动限制在可能的最大值处。</p>
		*/
		/**
		*获取横向滚动量。
		*/
		__getset(0,__proto,'scrollX',function(){
			if (!this._clipPoint)
				return 0;
			return this._clipPoint.x;
			},function(value){
			if (this.overflow !=Text.SCROLL || (this.textWidth < this._width || !this._clipPoint))
				return;
			value=value < this.padding[3] ? this.padding[3] :value;
			var maxScrollX=this._textWidth-this._width;
			value=value > maxScrollX ? maxScrollX :value;
			var visibleLineCount=this._height / (this._charSize.height+this.leading)| 0+1;
			this._clipPoint.x=value;
			this.renderText(this._lastVisibleLineIndex,visibleLineCount);
		});

		/**
		*设置纵向滚动量（px)。即使设置超出滚动范围的值，也会被自动限制在可能的最大值处。
		*/
		/**
		*获取纵向滚动量。
		*/
		__getset(0,__proto,'scrollY',function(){
			if (!this._clipPoint)
				return 0;
			return this._clipPoint.y;
			},function(value){
			if (this.overflow !=Text.SCROLL || (this.textHeight < this._height || !this._clipPoint))
				return;
			value=value < this.padding[0] ? this.padding[0] :value;
			var maxScrollY=this._textHeight-this._height;
			value=value > maxScrollY ? maxScrollY :value;
			var startLine=value / (this._charSize.height+this.leading)| 0;
			this._lastVisibleLineIndex=startLine;
			var visibleLineCount=(this._height / (this._charSize.height+this.leading)| 0)+1;
			this._clipPoint.y=value;
			this.renderText(startLine,visibleLineCount);
		});

		/**
		*获取横向可滚动最大值。
		*/
		__getset(0,__proto,'maxScrollX',function(){
			return (this.textWidth < this._width)? 0 :this._textWidth-this._width;
		});

		/**
		*获取纵向可滚动最大值。
		*/
		__getset(0,__proto,'maxScrollY',function(){
			return (this.textHeight < this._height)? 0 :this._textHeight-this._height;
		});

		__getset(0,__proto,'lines',function(){
			if (this._isChanged)
				this.typeset();
			return this._lines;
		});

		__getset(0,__proto,'underlineColor',function(){
			return this._underlineColor;
			},function(value){
			this._underlineColor=value;
			this._isChanged=true;
			this.typeset();
		});

		Text.registerBitmapFont=function(name,bitmapFont){
			Text._bitmapFonts || (Text._bitmapFonts={});
			Text._bitmapFonts[name]=bitmapFont;
		}

		Text.unregisterBitmapFont=function(name,destroy){
			(destroy===void 0)&& (destroy=true);
			if (Text._bitmapFonts && Text._bitmapFonts[name]){
				var tBitmapFont=Text._bitmapFonts[name];
				if (destroy){
					tBitmapFont.destroy();
				}
				delete Text._bitmapFonts[name];
			}
		}

		Text._testWord="游";
		Text.langPacks=null
		Text.VISIBLE="visible";
		Text.SCROLL="scroll";
		Text.HIDDEN="hidden";
		Text._bitmapFonts=null
		return Text;
	})(Sprite)


	/**
	*<p> <code>Stage</code> 是舞台类，显示列表的根节点，所有显示对象都在舞台上显示。通过 Laya.stage 单例访问。</p>
	*Stage提供几种适配模式，不同的适配模式会产生不同的画布大小，画布越大，渲染压力越大，所以要选择合适的适配方案。
	*Stage提供不同的帧率模式，帧率越高，渲染压力越大，越费电，合理使用帧率甚至动态更改帧率有利于改进手机耗电。
	*/
	//class laya.display.Stage extends laya.display.Sprite
	var Stage=(function(_super){
		function Stage(){
			this.focus=null;
			this.frameRate="fast";
			this.designWidth=0;
			this.designHeight=0;
			this.canvasRotation=false;
			this.canvasDegree=0;
			this.renderingEnabled=true;
			this._screenMode="none";
			this._scaleMode="noscale";
			this._alignV="top";
			this._alignH="left";
			this._bgColor="black";
			this._mouseMoveTime=0;
			this._renderCount=0;
			this._safariOffsetY=0;
			this._frameStartTime=NaN;
			this._isFocused=false;
			this._isVisibility=false;
			this._scenes=null;
			this._wgColor=null;
			Stage.__super.call(this);
			this.offset=new Point();
			this._canvasTransform=new Matrix();
			this._previousOrientation=Browser.window.orientation;
			var _$this=this;
			this.transform=Matrix.create();
			this._scenes=[];
			this.mouseEnabled=true;
			this.hitTestPrior=true;
			this.autoSize=false;
			this._displayedInStage=true;
			this._isFocused=true;
			this._isVisibility=true;
			var window=Browser.window;
			var _this=this;
			window.addEventListener("focus",function(){
				_$this._isFocused=true;
				_this.event("focus");
				_this.event("focuschange");
			});
			window.addEventListener("blur",function(){
				_$this._isFocused=false;
				_this.event("blur");
				_this.event("focuschange");
				if (_this._isInputting())Input["inputElement"].target.focus=false;
			});
			var hidden="hidden",state="visibilityState",visibilityChange="visibilitychange";
			var document=window.document;
			if (typeof document.hidden!=="undefined"){
				visibilityChange="visibilitychange";
				state="visibilityState";
				}else if (typeof document.mozHidden!=="undefined"){
				visibilityChange="mozvisibilitychange";
				state="mozVisibilityState";
				}else if (typeof document.msHidden!=="undefined"){
				visibilityChange="msvisibilitychange";
				state="msVisibilityState";
				}else if (typeof document.webkitHidden!=="undefined"){
				visibilityChange="webkitvisibilitychange";
				state="webkitVisibilityState";
			}
			window.document.addEventListener(visibilityChange,visibleChangeFun);
			function visibleChangeFun (){
				if (Browser.document[state]=="hidden"){
					_$this._isVisibility=false;
					if (_this._isInputting())Input["inputElement"].target.focus=false;
					}else {
					_$this._isVisibility=true;
				}
				_this.event("visibilitychange");
			}
			window.addEventListener("resize",function(){
				var orientation=Browser.window.orientation;
				if (orientation !=null && orientation !=_$this._previousOrientation && _this._isInputting()){
					Input["inputElement"].target.focus=false;
				}
				_$this._previousOrientation=orientation;
				if (_this._isInputting())return;
				if (Browser.onSafari)
					_this._safariOffsetY=(Browser.window.__innerHeight || Browser.document.body.clientHeight || Browser.document.documentElement.clientHeight)-Browser.window.innerHeight;
				_this._resetCanvas();
			});
			window.addEventListener("orientationchange",function(e){
				_this._resetCanvas();
			});
			this.on("mousemove",this,this._onmouseMove);
			if (Browser.onMobile)this.on("mousedown",this,this._onmouseMove);
		}

		__class(Stage,'laya.display.Stage',_super);
		var __proto=Stage.prototype;
		/**
		*@private
		*在移动端输入时，输入法弹出期间不进行画布尺寸重置。
		*/
		__proto._isInputting=function(){
			return (Browser.onMobile && Input.isInputting);
		}

		/**@private */
		__proto._changeCanvasSize=function(){
			this.setScreenSize(Browser.clientWidth *Browser.pixelRatio,Browser.clientHeight *Browser.pixelRatio);
		}

		/**@private */
		__proto._resetCanvas=function(){
			var canvas=Render._mainCanvas;
			var canvasStyle=canvas.source.style;
			canvas.size(1,1);
			canvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform="";
			this.visible=false;
			Laya.timer.once(100,this,this._changeCanvasSize);
		}

		/**
		*设置屏幕大小，场景会根据屏幕大小进行适配。可以动态调用此方法，来更改游戏显示的大小。
		*@param screenWidth 屏幕宽度。
		*@param screenHeight 屏幕高度。
		*/
		__proto.setScreenSize=function(screenWidth,screenHeight){
			var rotation=false;
			if (this._screenMode!=="none"){
				var screenType=screenWidth / screenHeight < 1 ? "vertical" :"horizontal";
				rotation=screenType!==this._screenMode;
				if (rotation){
					var temp=screenHeight;
					screenHeight=screenWidth;
					screenWidth=temp;
				}
			}
			this.canvasRotation=rotation;
			var canvas=Render._mainCanvas;
			var canvasStyle=canvas.source.style;
			var mat=this._canvasTransform.identity();
			var scaleMode=this._scaleMode;
			var scaleX=screenWidth / this.designWidth;
			var scaleY=screenHeight / this.designHeight;
			var canvasWidth=this.designWidth;
			var canvasHeight=this.designHeight;
			var realWidth=screenWidth;
			var realHeight=screenHeight;
			var pixelRatio=Browser.pixelRatio;
			this._width=this.designWidth;
			this._height=this.designHeight;
			switch (scaleMode){
				case "noscale":
					scaleX=scaleY=1;
					realWidth=this.designWidth;
					realHeight=this.designHeight;
					break ;
				case "showall":
					scaleX=scaleY=Math.min(scaleX,scaleY);
					canvasWidth=realWidth=Math.round(this.designWidth *scaleX);
					canvasHeight=realHeight=Math.round(this.designHeight *scaleY);
					break ;
				case "noborder":
					scaleX=scaleY=Math.max(scaleX,scaleY);
					realWidth=Math.round(this.designWidth *scaleX);
					realHeight=Math.round(this.designHeight *scaleY);
					break ;
				case "full":
					scaleX=scaleY=1;
					this._width=canvasWidth=screenWidth;
					this._height=canvasHeight=screenHeight;
					break ;
				case "fixedwidth":
					scaleY=scaleX;
					this._height=screenHeight / scaleX;
					canvasHeight=Math.round(screenHeight / scaleX);
					break ;
				case "fixedheight":
					scaleX=scaleY;
					this._width=screenWidth / scaleY;
					canvasWidth=Math.round(screenWidth / scaleY);
					break ;
				}
			scaleX *=this.scaleX;
			scaleY *=this.scaleY;
			if (scaleX===1 && scaleY===1){
				this.transform.identity();
				}else {
				this.transform.a=this._formatData(scaleX / (realWidth / canvasWidth));
				this.transform.d=this._formatData(scaleY / (realHeight / canvasHeight));
				this.conchModel && this.conchModel.scale(this.transform.a,this.transform.d);
			}
			canvas.size(canvasWidth,canvasHeight);
			RunDriver.changeWebGLSize(canvasWidth,canvasHeight);
			mat.scale(realWidth / canvasWidth / pixelRatio,realHeight / canvasHeight / pixelRatio);
			if (this._alignH==="left")this.offset.x=0;
			else if (this._alignH==="right")this.offset.x=screenWidth-realWidth;
			else this.offset.x=(screenWidth-realWidth)*0.5 / pixelRatio;
			if (this._alignV==="top")this.offset.y=0;
			else if (this._alignV==="bottom")this.offset.y=screenHeight-realHeight;
			else this.offset.y=(screenHeight-realHeight)*0.5 / pixelRatio;
			this.offset.x=Math.round(this.offset.x);
			this.offset.y=Math.round(this.offset.y);
			mat.translate(this.offset.x,this.offset.y);
			if (this._safariOffsetY)mat.translate(0,this._safariOffsetY);
			this.canvasDegree=0;
			if (rotation){
				if (this._screenMode==="horizontal"){
					mat.rotate(Math.PI / 2);
					mat.translate(screenHeight / pixelRatio,0);
					this.canvasDegree=90;
					}else {
					mat.rotate(-Math.PI / 2);
					mat.translate(0,screenWidth / pixelRatio);
					this.canvasDegree=-90;
				}
			}
			mat.a=this._formatData(mat.a);
			mat.d=this._formatData(mat.d);
			mat.tx=this._formatData(mat.tx);
			mat.ty=this._formatData(mat.ty);
			canvasStyle.transformOrigin=canvasStyle.webkitTransformOrigin=canvasStyle.msTransformOrigin=canvasStyle.mozTransformOrigin=canvasStyle.oTransformOrigin="0px 0px 0px";
			canvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform="matrix("+mat.toString()+")";
			if (this._safariOffsetY)mat.translate(0,-this._safariOffsetY);
			mat.translate(parseInt(canvasStyle.left)|| 0,parseInt(canvasStyle.top)|| 0);
			this.visible=true;
			this._repaint=1;
			this.event("resize");
		}

		/**@private */
		__proto._formatData=function(value){
			if (Math.abs(value)< 0.000001)return 0;
			if (Math.abs(1-value)< 0.001)return value > 0 ? 1 :-1;
			return value;
		}

		/**@inheritDoc */
		__proto.getMousePoint=function(){
			return Point.TEMP.setTo(this.mouseX,this.mouseY);
		}

		/**@inheritDoc */
		__proto.repaint=function(){
			this._repaint=1;
		}

		/**@inheritDoc */
		__proto.parentRepaint=function(){}
		/**@private */
		__proto._loop=function(){
			this.render(Render.context,0,0);
			return true;
		}

		/**@private */
		__proto._onmouseMove=function(e){
			this._mouseMoveTime=Browser.now();
		}

		/**获得距当前帧开始后，过了多少时间，单位为毫秒
		*可以用来判断函数内时间消耗，通过合理控制每帧函数处理消耗时长，避免一帧做事情太多，对复杂计算分帧处理，能有效降低帧率波动。*/
		__proto.getTimeFromFrameStart=function(){
			return Browser.now()-this._frameStartTime;
		}

		/**@inheritDoc */
		__proto.render=function(context,x,y){
			if (this.frameRate==="sleep"){
				var now=Browser.now();
				if (now-this._frameStartTime >=1000)this._frameStartTime=now;
				else return;
			}
			this._renderCount++;
			Render.isFlash && this.repaint();
			if (!this.visible){
				if (this._renderCount % 5===0){
					Stat.loopCount++;
					MouseManager.instance.runEvent();
					Laya.timer._update();
				}
				return;
			}
			this._frameStartTime=Browser.now();
			var frameMode=this.frameRate==="mouse" ? (((this._frameStartTime-this._mouseMoveTime)< 2000)? "fast" :"slow"):this.frameRate;
			var isFastMode=(frameMode!=="slow");
			var isDoubleLoop=(this._renderCount % 2===0);
			Stat.renderSlow=!isFastMode;
			if (isFastMode || isDoubleLoop){
				Stat.loopCount++;
				MouseManager.instance.runEvent();
				Laya.timer._update();
				var scene;
				var i=0,n=0;
				if (Render.isConchNode){
					for (i=0,n=this._scenes.length;i < n;i++){
						scene=this._scenes[i];
						(scene)&& (scene._updateSceneConch());
					}
					}else {
					for (i=0,n=this._scenes.length;i < n;i++){
						scene=this._scenes[i];
						(scene)&& (scene._updateScene());
					}
				}
				if (Render.isConchNode){
					var customList=Sprite["CustomList"];
					for (i=0,n=customList.length;i < n;i++){
						var customItem=customList[i];
						customItem.customRender(customItem.customContext,0,0);
					}
					return;
				}
				if (Render.isWebGL && this.renderingEnabled){
					context.clear();
					_super.prototype.render.call(this,context,x,y);
				}
			}
			if (Render.isConchNode)return;
			if (this.renderingEnabled && (isFastMode || !isDoubleLoop)){
				if (Render.isWebGL){
					RunDriver.clear(this._bgColor);
					RunDriver.beginFlush();
					context.flush();
					RunDriver.endFinish();
					VectorGraphManager.instance && VectorGraphManager.getInstance().endDispose();
					}else {
					RunDriver.clear(this._bgColor);
					_super.prototype.render.call(this,context,x,y);
				}
			}
		}

		/**@private */
		__proto._requestFullscreen=function(){
			var element=Browser.document.documentElement;
			if (element.requestFullscreen){
				element.requestFullscreen();
				}else if (element.mozRequestFullScreen){
				element.mozRequestFullScreen();
				}else if (element.webkitRequestFullscreen){
				element.webkitRequestFullscreen();
				}else if (element.msRequestFullscreen){
				element.msRequestFullscreen();
			}
		}

		/**@private */
		__proto._fullScreenChanged=function(){
			Laya.stage.event("fullscreenchange");
		}

		/**退出全屏模式*/
		__proto.exitFullscreen=function(){
			var document=Browser.document;
			if (document.exitFullscreen){
				document.exitFullscreen();
				}else if (document.mozCancelFullScreen){
				document.mozCancelFullScreen();
				}else if (document.webkitExitFullscreen){
				document.webkitExitFullscreen();
			}
		}

		/**当前视窗由缩放模式导致的 Y 轴缩放系数。*/
		__getset(0,__proto,'clientScaleY',function(){
			return this._transform ? this._transform.getScaleY():1;
		});

		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			this.designWidth=value;
			_super.prototype._$set_width.call(this,value);
			Laya.timer.callLater(this,this._changeCanvasSize);
		});

		/**
		*舞台是否获得焦点。
		*/
		__getset(0,__proto,'isFocused',function(){
			return this._isFocused;
		});

		/**
		*水平对齐方式。
		*<p><ul>取值范围：
		*<li>"left" ：居左对齐；</li>
		*<li>"center" ：居中对齐；</li>
		*<li>"right" ：居右对齐；</li>
		*</ul></p>
		*默认值为"left"。
		*/
		__getset(0,__proto,'alignH',function(){
			return this._alignH;
			},function(value){
			this._alignH=value;
			Laya.timer.callLater(this,this._changeCanvasSize);
		});

		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			this.designHeight=value;
			_super.prototype._$set_height.call(this,value);
			Laya.timer.callLater(this,this._changeCanvasSize);
		});

		__getset(0,__proto,'transform',function(){
			if (this._tfChanged)/*no*/this._adjustTransform();
			return this._transform=this._transform|| Matrix.create();
		},_super.prototype._$set_transform);

		/**
		*舞台是否处于可见状态(是否进入后台)。
		*/
		__getset(0,__proto,'isVisibility',function(){
			return this._isVisibility;
		});

		//[Deprecated]
		__getset(0,__proto,'desginWidth',function(){
			console.debug("desginWidth已经弃用，请使用designWidth代替");
			return this.designWidth;
		});

		/**当前视窗由缩放模式导致的 X 轴缩放系数。*/
		__getset(0,__proto,'clientScaleX',function(){
			return this._transform ? this._transform.getScaleX():1;
		});

		//[Deprecated]
		__getset(0,__proto,'desginHeight',function(){
			console.debug("desginHeight已经弃用，请使用designHeight代替");
			return this.designHeight;
		});

		/**
		*<p>缩放模式。</p>
		*<p><ul>取值范围：
		*<li>"noscale" ：不缩放；</li>
		*<li>"exactfit" ：全屏不等比缩放；</li>
		*<li>"showall" ：最小比例缩放；</li>
		*<li>"noborder" ：最大比例缩放；</li>
		*<li>"full" ：不缩放，stage的宽高等于屏幕宽高；</li>
		*<li>"fixedwidth" ：宽度不变，高度根据屏幕比缩放；</li>
		*<li>"fixedheight" ：高度不变，宽度根据屏幕比缩放；</li>
		*</ul></p>
		*默认值为 "noscale"。
		*/
		__getset(0,__proto,'scaleMode',function(){
			return this._scaleMode;
			},function(value){
			this._scaleMode=value;
			Laya.timer.callLater(this,this._changeCanvasSize);
		});

		/**
		*垂直对齐方式。
		*<p><ul>取值范围：
		*<li>"top" ：居顶部对齐；</li>
		*<li>"middle" ：居中对齐；</li>
		*<li>"bottom" ：居底部对齐；</li>
		*</ul></p>
		*默认值为"top"。
		*/
		__getset(0,__proto,'alignV',function(){
			return this._alignV;
			},function(value){
			this._alignV=value;
			Laya.timer.callLater(this,this._changeCanvasSize);
		});

		/**舞台的背景颜色，默认为黑色，null为透明。*/
		__getset(0,__proto,'bgColor',function(){
			return this._bgColor;
			},function(value){
			this._bgColor=value;
			this.conchModel && this.conchModel.bgColor(value);
			if (Render.isWebGL){
				if (value && value!=="black" && value!=="#000000"){
					this._wgColor=Color.create(value)._color;
					}else {
					this._wgColor=null;
				}
			}
			if (value){
				Render.canvas.style.background=value;
				}else {
				Render.canvas.style.background="none";
			}
		});

		/**鼠标在 Stage 上的 X 轴坐标。*/
		__getset(0,__proto,'mouseX',function(){
			return Math.round(MouseManager.instance.mouseX / this.clientScaleX);
		});

		/**鼠标在 Stage 上的 Y 轴坐标。*/
		__getset(0,__proto,'mouseY',function(){
			return Math.round(MouseManager.instance.mouseY / this.clientScaleY);
		});

		/**
		*场景布局类型。
		*<p><ul>取值范围：
		*<li>"none" ：不更改屏幕</li>
		*<li>"horizontal" ：自动横屏</li>
		*<li>"vertical" ：自动竖屏</li>
		*</ul></p>
		*/
		__getset(0,__proto,'screenMode',function(){
			return this._screenMode;
			},function(value){
			this._screenMode=value;
		});

		__getset(0,__proto,'visible',_super.prototype._$get_visible,function(value){
			if (this.visible!==value){
				_super.prototype._$set_visible.call(this,value);
				var style=Render._mainCanvas.source.style;
				style.visibility=value ? "visible" :"hidden";
			}
		});

		/**是否开启全屏，用户点击后进入全屏。
		*兼容性提示：部分浏览器不允许点击进入全屏，比如Iphone等*/
		__getset(0,__proto,'fullScreenEnabled',null,function(value){
			var document=Browser.document;
			var canvas=Render.canvas;
			if (value){
				canvas.addEventListener('mousedown',this._requestFullscreen);
				canvas.addEventListener('touchstart',this._requestFullscreen);
				document.addEventListener("fullscreenchange",this._fullScreenChanged);
				document.addEventListener("mozfullscreenchange",this._fullScreenChanged);
				document.addEventListener("webkitfullscreenchange",this._fullScreenChanged);
				document.addEventListener("msfullscreenchange",this._fullScreenChanged);
				}else {
				canvas.removeEventListener('mousedown',this._requestFullscreen);
				canvas.removeEventListener('touchstart',this._requestFullscreen);
				document.removeEventListener("fullscreenchange",this._fullScreenChanged);
				document.removeEventListener("mozfullscreenchange",this._fullScreenChanged);
				document.removeEventListener("webkitfullscreenchange",this._fullScreenChanged);
				document.removeEventListener("msfullscreenchange",this._fullScreenChanged);
			}
		});

		Stage.SCALE_NOSCALE="noscale";
		Stage.SCALE_EXACTFIT="exactfit";
		Stage.SCALE_SHOWALL="showall";
		Stage.SCALE_NOBORDER="noborder";
		Stage.SCALE_FULL="full";
		Stage.SCALE_FIXED_WIDTH="fixedwidth";
		Stage.SCALE_FIXED_HEIGHT="fixedheight";
		Stage.ALIGN_LEFT="left";
		Stage.ALIGN_RIGHT="right";
		Stage.ALIGN_CENTER="center";
		Stage.ALIGN_TOP="top";
		Stage.ALIGN_MIDDLE="middle";
		Stage.ALIGN_BOTTOM="bottom";
		Stage.SCREEN_NONE="none";
		Stage.SCREEN_HORIZONTAL="horizontal";
		Stage.SCREEN_VERTICAL="vertical";
		Stage.FRAME_FAST="fast";
		Stage.FRAME_SLOW="slow";
		Stage.FRAME_MOUSE="mouse";
		Stage.FRAME_SLEEP="sleep";
		return Stage;
	})(Sprite)


	//class laya.media.SoundNode extends laya.display.Sprite
	var SoundNode=(function(_super){
		function SoundNode(){
			this.url=null;
			this._channel=null;
			this._tar=null;
			this._playEvents=null;
			this._stopEvents=null;
			SoundNode.__super.call(this);
			this.visible=false;
			this.on("added",this,this._onParentChange);
			this.on("removed",this,this._onParentChange);
		}

		__class(SoundNode,'laya.media.SoundNode',_super);
		var __proto=SoundNode.prototype;
		/**@private */
		__proto._onParentChange=function(){
			this.target=this.parent;
		}

		/**
		*播放
		*@param loops 循环次数
		*@param complete 完成回调
		*
		*/
		__proto.play=function(loops,complete){
			(loops===void 0)&& (loops=1);
			if (isNaN(loops)){
				loops=1;
			}
			if (!this.url)return;
			this.stop();
			this._channel=SoundManager.playSound(this.url,loops,complete);
		}

		/**
		*停止播放
		*
		*/
		__proto.stop=function(){
			if (this._channel && !this._channel.isStopped){
				this._channel.stop();
			}
			this._channel=null;
		}

		/**@private */
		__proto._setPlayAction=function(tar,event,action,add){
			(add===void 0)&& (add=true);
			if (!this[action])return;
			if (!tar)return;
			if (add){
				tar.on(event,this,this[action]);
				}else {
				tar.off(event,this,this[action]);
			}
		}

		/**@private */
		__proto._setPlayActions=function(tar,events,action,add){
			(add===void 0)&& (add=true);
			if (!tar)return;
			if (!events)return;
			var eventArr=events.split(",");
			var i=0,len=0;
			len=eventArr.length;
			for (i=0;i < len;i++){
				this._setPlayAction(tar,eventArr[i],action,add);
			}
		}

		/**
		*设置触发播放的事件
		*@param events
		*
		*/
		__getset(0,__proto,'playEvent',null,function(events){
			this._playEvents=events;
			if (!events)return;
			if (this._tar){
				this._setPlayActions(this._tar,events,"play");
			}
		});

		/**
		*设置控制播放的对象
		*@param tar
		*
		*/
		__getset(0,__proto,'target',null,function(tar){
			if (this._tar){
				this._setPlayActions(this._tar,this._playEvents,"play",false);
				this._setPlayActions(this._tar,this._stopEvents,"stop",false);
			}
			this._tar=tar;
			if (this._tar){
				this._setPlayActions(this._tar,this._playEvents,"play",true);
				this._setPlayActions(this._tar,this._stopEvents,"stop",true);
			}
		});

		/**
		*设置触发停止的事件
		*@param events
		*
		*/
		__getset(0,__proto,'stopEvent',null,function(events){
			this._stopEvents=events;
			if (!events)return;
			if (this._tar){
				this._setPlayActions(this._tar,events,"stop");
			}
		});

		return SoundNode;
	})(Sprite)


	/**
	*<code>Component</code> 是ui控件类的基类。
	*<p>生命周期：preinitialize > createChildren > initialize > 组件构造函数</p>
	*/
	//class laya.ui.Component extends laya.display.Sprite
	var Component=(function(_super){
		function Component(){
			this._comXml=null;
			this._dataSource=null;
			this._toolTip=null;
			this._tag=null;
			this._disabled=false;
			this._gray=false;
			Component.__super.call(this);
			this._layout=LayoutStyle.EMPTY;
			this.preinitialize();
			this.createChildren();
			this.initialize();
		}

		__class(Component,'laya.ui.Component',_super);
		var __proto=Component.prototype;
		Laya.imps(__proto,{"laya.ui.IComponent":true})
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._dataSource=this._layout=null;
			this._tag=null;
			this._toolTip=null;
		}

		/**
		*<p>预初始化。</p>
		*@internal 子类可在此函数内设置、修改属性默认值
		*/
		__proto.preinitialize=function(){}
		/**
		*<p>创建并添加控件子节点。</p>
		*@internal 子类可在此函数内创建并添加子节点。
		*/
		__proto.createChildren=function(){}
		/**
		*<p>控件初始化。</p>
		*@internal 在此子对象已被创建，可以对子对象进行修改。
		*/
		__proto.initialize=function(){}
		/**
		*<p>延迟运行指定的函数。</p>
		*<p>在控件被显示在屏幕之前调用，一般用于延迟计算数据。</p>
		*@param method 要执行的函数的名称。例如，functionName。
		*@param args 传递给 <code>method</code> 函数的可选参数列表。
		*
		*@see #runCallLater()
		*/
		__proto.callLater=function(method,args){
			Laya.timer.callLater(this,method,args);
		}

		/**
		*<p>如果有需要延迟调用的函数（通过 <code>callLater</code> 函数设置），则立即执行延迟调用函数。</p>
		*@param method 要执行的函数名称。例如，functionName。
		*@see #callLater()
		*/
		__proto.runCallLater=function(method){
			Laya.timer.runCallLater(this,method);
		}

		/**
		*<p>立即执行影响宽高度量的延迟调用函数。</p>
		*@internal <p>使用 <code>runCallLater</code> 函数，立即执行影响宽高度量的延迟运行函数(使用 <code>callLater</code> 设置延迟执行函数)。</p>
		*@see #callLater()
		*@see #runCallLater()
		*/
		__proto.commitMeasure=function(){}
		/**
		*<p>重新调整对象的大小。</p>
		*/
		__proto.changeSize=function(){
			this.event("resize");
		}

		/**
		*@private
		*<p>获取对象的布局样式。</p>
		*/
		__proto.getLayout=function(){
			this._layout===LayoutStyle.EMPTY && (this._layout=new LayoutStyle());
			return this._layout;
		}

		/**
		*对象从显示列表移除的事件侦听处理函数。
		*/
		__proto.onRemoved=function(){
			this.parent.off("resize",this,this.onCompResize);
		}

		/**
		*对象被添加到显示列表的事件侦听处理函数。
		*/
		__proto.onAdded=function(){
			this.parent.on("resize",this,this.onCompResize);
			this.resetLayoutX();
			this.resetLayoutY();
		}

		/**
		*父容器的 <code>Event.RESIZE</code> 事件侦听处理函数。
		*/
		__proto.onCompResize=function(){
			if (this._layout && this._layout.enable){
				this.resetLayoutX();
				this.resetLayoutY();
			}
		}

		/**
		*<p>重置对象的 <code>X</code> 轴（水平方向）布局。</p>
		*/
		__proto.resetLayoutX=function(){
			var layout=this._layout;
			if (!isNaN(layout.anchorX))this.pivotX=layout.anchorX *this.width;
			var parent=this.parent;
			if (parent){
				if (!isNaN(layout.centerX)){
					this.x=Math.round((parent.width-this.displayWidth)*0.5+layout.centerX+this.pivotX *this.scaleX);
					}else if (!isNaN(layout.left)){
					this.x=Math.round(layout.left+this.pivotX *this.scaleX);
					if (!isNaN(layout.right)){
						this.width=(parent._width-layout.left-layout.right)/ (this.scaleX || 0.01);
					}
					}else if (!isNaN(layout.right)){
					this.x=Math.round(parent.width-this.displayWidth-layout.right+this.pivotX *this.scaleX);
				}
			}
		}

		/**
		*<p>重置对象的 <code>Y</code> 轴（垂直方向）布局。</p>
		*/
		__proto.resetLayoutY=function(){
			var layout=this._layout;
			if (!isNaN(layout.anchorY))this.pivotY=layout.anchorY *this.height;
			var parent=this.parent;
			if (parent){
				if (!isNaN(layout.centerY)){
					this.y=Math.round((parent.height-this.displayHeight)*0.5+layout.centerY+this.pivotY *this.scaleY);
					}else if (!isNaN(layout.top)){
					this.y=Math.round(layout.top+this.pivotY *this.scaleY);
					if (!isNaN(layout.bottom)){
						this.height=(parent._height-layout.top-layout.bottom)/ (this.scaleY || 0.01);
					}
					}else if (!isNaN(layout.bottom)){
					this.y=Math.round(parent.height-this.displayHeight-layout.bottom+this.pivotY *this.scaleY);
				}
			}
		}

		/**
		*对象的 <code>Event.MOUSE_OVER</code> 事件侦听处理函数。
		*/
		__proto.onMouseOver=function(e){
			Laya.stage.event("showtip",this._toolTip);
		}

		/**
		*对象的 <code>Event.MOUSE_OUT</code> 事件侦听处理函数。
		*/
		__proto.onMouseOut=function(e){
			Laya.stage.event("hidetip",this._toolTip);
		}

		/**
		*<p>对象的显示宽度（以像素为单位）。</p>
		*/
		__getset(0,__proto,'displayWidth',function(){
			return this.width *this.scaleX;
		});

		/**
		*<p>表示显示对象的宽度，以像素为单位。</p>
		*<p><b>注：</b>当值为0时，宽度为自适应大小。</p>
		*/
		__getset(0,__proto,'width',function(){
			if (this._width)return this._width;
			return this.measureWidth;
			},function(value){
			if (this._width !=value){
				this._width=value;
				this.conchModel && this.conchModel.size(this._width,this._height);
				this.callLater(this.changeSize);
				if (this._layout.enable && (!isNaN(this._layout.centerX)|| !isNaN(this._layout.right)|| !isNaN(this._layout.anchorX)))this.resetLayoutX();
			}
		});

		/**
		*<p>显示对象的实际显示区域宽度（以像素为单位）。</p>
		*/
		__getset(0,__proto,'measureWidth',function(){
			var max=0;
			this.commitMeasure();
			for (var i=this.numChildren-1;i >-1;i--){
				var comp=this.getChildAt(i);
				if (comp.visible){
					max=Math.max(comp.x+comp.width *comp.scaleX,max);
				}
			}
			return max;
		});

		/**
		*@private
		*<p>指定对象是否可使用布局。</p>
		*<p>如果值为true,则此对象可以使用布局样式，否则不使用布局样式。</p>
		*@param value 一个 Boolean 值，指定对象是否可使用布局。
		*/
		__getset(0,__proto,'layOutEabled',null,function(value){
			if (this._layout && this._layout.enable !=value){
				this._layout.enable=value;
				if (this.parent){
					this.onAdded();
					}else {
					this.on("added",this,this.onAdded);
					this.on("removed",this,this.onRemoved);
				}
			}
		});

		/**
		*<p>对象的显示高度（以像素为单位）。</p>
		*/
		__getset(0,__proto,'displayHeight',function(){
			return this.height *this.scaleY;
		});

		/**
		*<p>表示显示对象的高度，以像素为单位。</p>
		*<p><b>注：</b>当值为0时，高度为自适应大小。</p>
		*@return
		*/
		__getset(0,__proto,'height',function(){
			if (this._height)return this._height;
			return this.measureHeight;
			},function(value){
			if (this._height !=value){
				this._height=value;
				this.conchModel && this.conchModel.size(this._width,this._height);
				this.callLater(this.changeSize);
				if (this._layout.enable && (!isNaN(this._layout.centerY)|| !isNaN(this._layout.bottom)|| !isNaN(this._layout.anchorY)))this.resetLayoutY();
			}
		});

		/**
		*<p>数据赋值，通过对UI赋值来控制UI显示逻辑。</p>
		*<p>简单赋值会更改组件的默认属性，使用大括号可以指定组件的任意属性进行赋值。</p>
		*@example 以下示例中， <code>label1、checkbox1</code> 分别为示例的name属性值。
		<listing version="3.0">
		//默认属性赋值
		dataSource={label1:"改变了label",checkbox1:true};//(更改了label1的text属性值，更改checkbox1的selected属性)。
		//任意属性赋值
		dataSource={label2:{text:"改变了label",size:14},checkbox2:{selected:true,x:10}};
		</listing>
		*@return
		*/
		__getset(0,__proto,'dataSource',function(){
			return this._dataSource;
			},function(value){
			this._dataSource=value;
			for (var prop in this._dataSource){
				if (this.hasOwnProperty(prop)){
					this[prop]=this._dataSource[prop];
				}
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'scaleY',_super.prototype._$get_scaleY,function(value){
			if (_super.prototype._$get_scaleY.call(this)!=value){
				_super.prototype._$set_scaleY.call(this,value);
				this.callLater(this.changeSize);
				this._layout.enable && this.resetLayoutY();
			}
		});

		/**
		*<p>显示对象的实际显示区域高度（以像素为单位）。</p>
		*/
		__getset(0,__proto,'measureHeight',function(){
			var max=0;
			this.commitMeasure();
			for (var i=this.numChildren-1;i >-1;i--){
				var comp=this.getChildAt(i);
				if (comp.visible){
					max=Math.max(comp.y+comp.height *comp.scaleY,max);
				}
			}
			return max;
		});

		/**@inheritDoc */
		__getset(0,__proto,'scaleX',_super.prototype._$get_scaleX,function(value){
			if (_super.prototype._$get_scaleX.call(this)!=value){
				_super.prototype._$set_scaleX.call(this,value);
				this.callLater(this.changeSize);
				this._layout.enable && this.resetLayoutX();
			}
		});

		/**
		*<p>从组件顶边到其内容区域顶边之间的垂直距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'top',function(){
			return this._layout.top;
			},function(value){
			this.getLayout().top=value;
			this.layOutEabled=true;
			this.resetLayoutY();
		});

		/**
		*<p>从组件底边到其内容区域底边之间的垂直距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'bottom',function(){
			return this._layout.bottom;
			},function(value){
			this.getLayout().bottom=value;
			this.layOutEabled=true;
			this.resetLayoutY();
		});

		/**
		*<p>从组件左边到其内容区域左边之间的水平距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'left',function(){
			return this._layout.left;
			},function(value){
			this.getLayout().left=value;
			this.layOutEabled=true;
			this.resetLayoutX();
		});

		/**
		*<p>从组件右边到其内容区域右边之间的水平距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'right',function(){
			return this._layout.right;
			},function(value){
			this.getLayout().right=value;
			this.layOutEabled=true;
			this.resetLayoutX();
		});

		/**
		*<p>在父容器中，此对象的水平方向中轴线与父容器的水平方向中心线的距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'centerX',function(){
			return this._layout.centerX;
			},function(value){
			this.getLayout().centerX=value;
			this.layOutEabled=true;
			this.resetLayoutX();
		});

		/**
		*<p>在父容器中，此对象的垂直方向中轴线与父容器的垂直方向中心线的距离（以像素为单位）。</p>
		*/
		__getset(0,__proto,'centerY',function(){
			return this._layout.centerY;
			},function(value){
			this.getLayout().centerY=value;
			this.layOutEabled=true;
			this.resetLayoutY();
		});

		/**X轴锚点，值为0-1*/
		__getset(0,__proto,'anchorX',function(){
			return this._layout.anchorX;
			},function(value){
			this.getLayout().anchorX=value;
			this.layOutEabled=true;
			this.resetLayoutX();
		});

		/**Y轴锚点，值为0-1*/
		__getset(0,__proto,'anchorY',function(){
			return this._layout.anchorY;
			},function(value){
			this.getLayout().anchorY=value;
			this.layOutEabled=true;
			this.resetLayoutY();
		});

		/**
		*<p>对象的标签。</p>
		*@internal 冗余字段，可以用来储存数据。
		*/
		__getset(0,__proto,'tag',function(){
			return this._tag;
			},function(value){
			this._tag=value;
		});

		/**
		*<p>鼠标悬停提示。</p>
		*<p>可以赋值为文本 <code>String</code> 或函数 <code>Handler</code> ，用来实现自定义样式的鼠标提示和参数携带等。</p>
		*@example 以下例子展示了三种鼠标提示：
		<listing version="3.0">
		private var _testTips:TestTipsUI=new TestTipsUI();
		private function testTips():void {
			//简单鼠标提示
			btn2.toolTip="这里是鼠标提示&lt;b&gt;粗体&lt;/b&gt;&lt;br&gt;换行";
			//自定义的鼠标提示
			btn1.toolTip=showTips1;
			//带参数的自定义鼠标提示
			clip.toolTip=new Handler(this,showTips2,["clip"]);
		}

		private function showTips1():void {
			_testTips.label.text="这里是按钮["+btn1.label+"]";
			tip.addChild(_testTips);
		}

		private function showTips2(name:String):void {
			_testTips.label.text="这里是"+name;
			tip.addChild(_testTips);
		}

		</listing>
		*/
		__getset(0,__proto,'toolTip',function(){
			return this._toolTip;
			},function(value){
			if (this._toolTip !=value){
				this._toolTip=value;
				if (value !=null){
					this.on("mouseover",this,this.onMouseOver);
					this.on("mouseout",this,this.onMouseOut);
					}else {
					this.off("mouseover",this,this.onMouseOver);
					this.off("mouseout",this,this.onMouseOut);
				}
			}
		});

		/**
		*XML 数据。
		*/
		__getset(0,__proto,'comXml',function(){
			return this._comXml;
			},function(value){
			this._comXml=value;
		});

		/**是否变灰。*/
		__getset(0,__proto,'gray',function(){
			return this._gray;
			},function(value){
			if (value!==this._gray){
				this._gray=value;
				UIUtils.gray(this,value);
			}
		});

		/**是否禁用页面，设置为true后，会变灰并且禁用鼠标。*/
		__getset(0,__proto,'disabled',function(){
			return this._disabled;
			},function(value){
			if (value!==this._disabled){
				this.gray=this._disabled=value;
				this.mouseEnabled=!value;
			}
		});

		return Component;
	})(Sprite)


	/**
	*<code>DialogManager</code> 对话框管理容器，所有的对话框都在该容器内，并且受管理器管理。
	*任意对话框打开和关闭，都会出发管理类的open和close事件
	*可以通过UIConfig设置弹出框背景透明度，模式窗口点击边缘是否关闭，点击窗口是否切换层次等
	*通过设置对话框的zOrder属性，可以更改弹出的层次
	*/
	//class laya.ui.DialogManager extends laya.display.Sprite
	var DialogManager=(function(_super){
		function DialogManager(){
			this.lockLayer=null;
			this.popupEffect=function(dialog){
				dialog.scale(1,1);
				Tween.from(dialog,{x:Laya.stage.width / 2,y:Laya.stage.height / 2,scaleX:0,scaleY:0},300,Ease.backOut,Handler.create(this,this.doOpen,[dialog]));
			}
			this.closeEffect=function(dialog,type){
				Tween.to(dialog,{x:Laya.stage.width / 2,y:Laya.stage.height / 2,scaleX:0,scaleY:0},300,Ease.strongOut,Handler.create(this,this.doClose,[dialog,type]));
			}
			DialogManager.__super.call(this);
			this.maskLayer=new Sprite();
			this.mouseEnabled=this.maskLayer.mouseEnabled=true;
			this.zOrder=1000;
			Laya.stage.addChild(this);
			Laya.stage.on("resize",this,this._onResize);
			if (UIConfig.closeDialogOnSide)this.maskLayer.on("click",this,this._closeOnSide);
			this._onResize(null);
		}

		__class(DialogManager,'laya.ui.DialogManager',_super);
		var __proto=DialogManager.prototype;
		__proto._closeOnSide=function(){
			var dialog=this.getChildAt(this.numChildren-1);
			if ((dialog instanceof laya.ui.Dialog ))dialog.close("side");
		}

		/**设置锁定界面，如果为空则什么都不显示*/
		__proto.setLockView=function(value){
			if (!this.lockLayer){
				this.lockLayer=new Box();
				this.lockLayer.mouseEnabled=true;
				this.lockLayer.size(Laya.stage.width,Laya.stage.height);
			}
			this.lockLayer.removeChildren();
			if (value){
				value.centerX=value.centerY=0;
				this.lockLayer.addChild(value);
			}
		}

		/**@private */
		__proto._onResize=function(e){
			var width=this.maskLayer.width=Laya.stage.width;
			var height=this.maskLayer.height=Laya.stage.height;
			if (this.lockLayer)this.lockLayer.size(width,height);
			this.maskLayer.graphics.clear();
			this.maskLayer.graphics.drawRect(0,0,width,height,UIConfig.popupBgColor);
			this.maskLayer.alpha=UIConfig.popupBgAlpha;
			for (var i=this.numChildren-1;i >-1;i--){
				var item=this.getChildAt(i);
				if (item.popupCenter)this._centerDialog(item);
			}
		}

		__proto._centerDialog=function(dialog){
			dialog.x=Math.round(((Laya.stage.width-dialog.width)>> 1)+dialog.pivotX);
			dialog.y=Math.round(((Laya.stage.height-dialog.height)>> 1)+dialog.pivotY);
		}

		/**
		*显示对话框(非模式窗口类型)。
		*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。
		*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。
		*/
		__proto.open=function(dialog,closeOther){
			(closeOther===void 0)&& (closeOther=false);
			if (closeOther)this.removeChildren();
			if (dialog.popupCenter)this._centerDialog(dialog);
			this.addChild(dialog);
			if (dialog.isModal || this._$P["hasZorder"])this.timer.callLater(this,this._checkMask);
			if (this.popupEffect !=null)this.popupEffect(dialog);
			else this.doOpen(dialog);
			this.event("open");
		}

		/**
		*执行打开对话框。
		*@param dialog 需要关闭的对象框 <code>Dialog</code> 实例。
		*@param type 关闭的类型，默认为空
		*/
		__proto.doOpen=function(dialog){
			dialog.onOpened();
		}

		/**
		*锁定所有层，显示加载条信息，防止双击
		*/
		__proto.lock=function(value){
			if (this.lockLayer){
				if (value)this.addChild(this.lockLayer);
				else this.lockLayer.removeSelf();
			}
		}

		/**
		*关闭对话框。
		*@param dialog 需要关闭的对象框 <code>Dialog</code> 实例。
		*@param type 关闭的类型，默认为空
		*/
		__proto.close=function(dialog,type){
			if (this.closeEffect !=null)this.closeEffect(dialog,type);
			else this.doClose(dialog);
			this.event("close");
		}

		/**
		*执行关闭对话框。
		*@param dialog 需要关闭的对象框 <code>Dialog</code> 实例。
		*@param type 关闭的类型，默认为空
		*/
		__proto.doClose=function(dialog,type){
			dialog.removeSelf();
			dialog.isModal && this._checkMask();
			dialog.closeHandler && dialog.closeHandler.runWith(type);
			dialog.onClosed(type);
		}

		/**
		*关闭所有的对话框。
		*/
		__proto.closeAll=function(){
			this.removeChildren();
			this.event("close");
		}

		/**
		*根据组获取所有对话框
		*@param group 组名称
		*@return 对话框数组
		*/
		__proto.getDialogsByGroup=function(group){
			var arr=[];
			for (var i=this.numChildren-1;i >-1;i--){
				var item=this.getChildAt(i);
				if (item.group===group){
					arr.push(item);
				}
			}
			return arr;
		}

		/**
		*根据组关闭所有弹出框
		*@param group 需要关闭的组名称
		*/
		__proto.closeByGround=function(group){
			var arr=[];
			for (var i=this.numChildren-1;i >-1;i--){
				var item=this.getChildAt(i);
				if (item.group===group){
					item.close();
				}
			}
			return arr;
		}

		/**@private 发生层次改变后，重新检查遮罩层是否正确*/
		__proto._checkMask=function(){
			this.maskLayer.removeSelf();
			for (var i=this.numChildren-1;i >-1;i--){
				var dialog=this.getChildAt(i);
				if (dialog && dialog.isModal){
					this.addChildAt(this.maskLayer,i);
					return;
				}
			}
		}

		return DialogManager;
	})(Sprite)


	/**
	*颜色选取类
	*@author ww
	*/
	//class laya.debug.tools.ColorSelector extends laya.display.Sprite
	var ColorSelector=(function(_super){
		function ColorSelector(){
			this.sideColor=null;
			this.mainColor=null;
			this.demoColor=null;
			this.posSp=null;
			this.hPos=null;
			this.container=null;
			this.isChanging=false;
			this.tColor=null;
			this.tH=NaN;
			ColorSelector.__super.call(this);
			this.container=this;
			this.createUI();
		}

		__class(ColorSelector,'laya.debug.tools.ColorSelector',_super);
		var __proto=ColorSelector.prototype;
		__proto.createUI=function(){
			this.sideColor=new Sprite();
			this.container.addChild(this.sideColor);
			this.posSp=new Sprite();
			this.posSp.pos(100,100);
			this.posSp.graphics.drawCircle(0,0,5,null,"#ff0000");
			this.posSp.graphics.drawCircle(0,0,6,null,"#ffff00");
			this.posSp.autoSize=true;
			this.posSp.cacheAsBitmap=true;
			this.sideColor.addChild(this.posSp);
			this.sideColor.pos(0,0);
			this.sideColor.size(150,150);
			this.sideColor.on("mousedown",this,this.sideColorClick);
			var i=0;
			this.mainColor=new Sprite();
			var g;
			g=this.mainColor.graphics;
			var h=NaN;
			var s=NaN;
			var b=NaN;
			var rgb;
			for (i=0;i < 150;i++){
				rgb=ColorTool.hsb2rgb(i/150*360,1,1);
				g.drawLine(0,i,20,i,ColorTool.getRGBStr(rgb));
			}
			this.mainColor.pos(150+10,0);
			this.mainColor.size(20,i);
			this.mainColor.cacheAsBitmap=true;
			this.hPos=new Sprite();
			this.hPos.graphics.drawPie(0,0,10,-10,10,"#ff0000");
			this.hPos.x=this.mainColor.x+22;
			this.container.addChild(this.hPos);
			this.container.addChild(this.mainColor);
			this.mainColor.on("mousedown",this,this.mainColorClick);
			this.demoColor=new Sprite();
			this.demoColor.pos(this.sideColor.x,this.sideColor.y+this.sideColor.height+10);
			this.demoColor.size(150,20);
			this.container.addChild(this.demoColor);
			this.setColorByRGBStr("#099599");
			this.posSp.on("dragmove",this,this.posDraging);
		}

		// posSp.on(Event.MOUSE_DOWN,this,posMouseDown);
		__proto.posMouseDown=function(e){}
		__proto.posDraging=function(){
			this.updatePosSpAndShowColor();
		}

		__proto.posDragEnd=function(){
			this.isChanging=false;
			this.updatePosSpAndShowColor();
		}

		__proto.setColorByRGBStr=function(rgbStr){
			var rgb;
			rgb=ColorTool.getRGBByRGBStr(rgbStr);
			this.setColor(rgb[0],rgb[1],rgb[2]);
		}

		__proto.setColor=function(red,green,blue,notice){
			(notice===void 0)&& (notice=true);
			var hsb;
			hsb=ColorTool.rgb2hsb(red,green,blue);
			var tRGB;
			tRGB=ColorTool.hsb2rgb(hsb[0],hsb[1],hsb[2]);
			this.setColorByHSB(hsb[0],hsb[1],hsb[2],notice);
		}

		__proto.setColorByHSB=function(h,s,b,notice){
			(notice===void 0)&& (notice=true);
			this.hPos.y=this.mainColor.y+h/360*150;
			this.posSp.x=s *150;
			this.posSp.y=(1-b)*150;
			this.updateSideColor(h,notice);
		}

		__proto.sideColorClick=function(e){
			this.isChanging=true;
			this.posSp.startDrag();
			this.updatePosSpAndShowColor();
			Laya.stage.off("mouseup",this,this.sideColorMouseUp);
			Laya.stage.once("mouseup",this,this.sideColorMouseUp);
		}

		__proto.sideColorMouseUp=function(e){
			this.isChanging=false;
			this.updatePosSpAndShowColor();
		}

		__proto.updatePosSpAndShowColor=function(){
			this.posSp.x=this.sideColor.mouseX;
			this.posSp.y=this.sideColor.mouseY;
			if(this.posSp.x<0)this.posSp.x=0;
			if(this.posSp.y<0)this.posSp.y=0;
			if(this.posSp.x>150)this.posSp.x=150;
			if(this.posSp.y>150)this.posSp.y=150;
			this.updateDemoColor();
		}

		__proto.updateDemoColor=function(notice){
			(notice===void 0)&& (notice=true);
			var h=NaN;
			var s=NaN;
			var b=NaN;
			h=this.tH;
			s=this.posSp.x / 150;
			b=1-this.posSp.y / 150;
			this.tColor=ColorTool.hsb2rgb(h,s,b);
			var g;
			g=this.demoColor.graphics;
			g.clear();
			g.drawRect(0,0,this.demoColor.width,this.demoColor.height,ColorTool.getRGBStr(this.tColor));
			if(this.isChanging)return;
			if(notice)
				this.event("ColorChanged",this);
		}

		__proto.mainColorClick=function(e){
			var yPos=NaN;
			yPos=this.mainColor.mouseY;
			this.hPos.y=yPos+this.mainColor.y;
			var h=NaN;
			h=yPos / 150 *360;
			this.updateSideColor(h);
		}

		__proto.updateSideColor=function(h,notice){
			(notice===void 0)&& (notice=true);
			this.tH=h;
			var s=NaN;
			var b=NaN;
			var g;
			g=this.sideColor.graphics;
			g.clear();
			this.sideColor.cacheAsBitmap=false;
			var rgb;
			rgb=ColorTool.hsb2rgb(h,1,1);
			var gradient=Browser.context.createLinearGradient(0,0,80,0);
			gradient.addColorStop(0,"white");
			gradient.addColorStop(1,ColorTool.getRGBStr(rgb));
			this.sideColor.graphics.drawRect(0,0,150,150,gradient);
			this.sideColor.graphics.loadImage("comp/colorpicker_overlay.png",0,0);
			this.sideColor.size(150,150);
			this.sideColor.cacheAsBitmap=true;
			this.updateDemoColor(notice);
		}

		ColorSelector.COLOR_CHANGED="ColorChanged";
		ColorSelector.COLOR_CLEARED="COLOR_CLEARED";
		ColorSelector.RecWidth=150;
		return ColorSelector;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-30 下午2:03:32
	*/
	//class laya.debug.tools.comps.ArrowLine extends laya.display.Sprite
	var ArrowLine=(function(_super){
		function ArrowLine(sign){
			this.lineLen=160;
			this.arrowLen=10;
			this.sign="Y";
			this._targetChanger=null;
			this._isMoving=false;
			this.lenControl=new Rect();
			this.rotationControl=new Rect();
			this.lenChanger=ValueChanger.create(this,"lineLen");
			this.lenControlXChanger=ValueChanger.create(this.lenControl,"x");
			(sign===void 0)&& (sign="X");
			ArrowLine.__super.call(this);
			this.sign=sign;
			this.addChild(this.lenControl);
			this.addChild(this.rotationControl);
			this.lenControl.on("mousedown",this,this.controlMouseDown);
			this.drawMe();
		}

		__class(ArrowLine,'laya.debug.tools.comps.ArrowLine',_super);
		var __proto=ArrowLine.prototype;
		__proto.drawMe=function(){
			var g;
			g=this.graphics;
			g.clear();
			g.drawLine(0,0,this.lineLen,0,"#ffff00");
			g.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,-this.arrowLen,"#ff0000");
			g.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,this.arrowLen,"#ff0000");
			g.fillText(this.sign,50,-5,"","#ff0000","left");
			if(this._isMoving&&this._targetChanger){
				g.fillText(this._targetChanger.key+":"+this._targetChanger.value.toFixed(2),this.lineLen-15,-25,"","#ffff00","center");
			}
			this.lenControl.posTo(this.lineLen-15,0);
			this.rotationControl.posTo(this.lineLen+10,0);
			this.size(this.arrowLen,this.lineLen);
		}

		__proto.clearMoveEvents=function(){
			Laya.stage.off("mousemove",this,this.stageMouseMove);
			Laya.stage.off("mouseup",this,this.stageMouseUp);
		}

		__proto.controlMouseDown=function(e){
			this.clearMoveEvents();
			this.lenControlXChanger.record();
			this.lenChanger.record();
			if(this.targetChanger){
				this.targetChanger.record();
			}
			this._isMoving=true;
			Laya.stage.on("mousemove",this,this.stageMouseMove);
			Laya.stage.on("mouseup",this,this.stageMouseUp);
		}

		__proto.stageMouseMove=function(e){
			this.lenControlXChanger.value=this.mouseX;
			this.lenChanger.showValueByScale(this.lenControlXChanger.scaleValue);
			if(this.targetChanger){
				this.targetChanger.showValueByScale(this.lenControlXChanger.scaleValue);
			}
			this.drawMe();
		}

		__proto.stageMouseUp=function(e){
			this._isMoving=false;
			this.noticeChange();
			this.clearMoveEvents();
			this.lenControlXChanger.recover();
			this.lenChanger.recover();
			this.drawMe();
		}

		__proto.noticeChange=function(){
			var dLen=NaN;
			dLen=this.lenChanger.dValue;
			console.log("lenChange:",dLen);
		}

		__getset(0,__proto,'targetChanger',function(){
			return this._targetChanger;
			},function(changer){
			if(this._targetChanger){
				this._targetChanger.dispose();
			}
			this._targetChanger=changer;
		});

		return ArrowLine;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-30 下午2:37:05
	*/
	//class laya.debug.tools.comps.Axis extends laya.display.Sprite
	var Axis=(function(_super){
		function Axis(){
			this._target=null;
			this._lenType=
			[
			["width","height"],
			["scaleX","scaleY"]];
			this._type=1;
			this.xAxis=new ArrowLine("X");
			this.yAxis=new ArrowLine("Y");
			this.controlBox=new Rect();
			this._point=new Point();
			this.oPoint=new Point();
			this.myRotationChanger=ValueChanger.create(this,"rotation");
			this.targetRotationChanger=ValueChanger.create(null,"rotation");
			this.stageMouseRotationChanger=new ValueChanger();
			Axis.__super.call(this);
			this.mouseEnabled=true;
			this.size(1,1);
			this.initMe();
			this.xAxis.rotationControl.on("mousedown",this,this.controlMouseDown);
			this.yAxis.rotationControl.on("mousedown",this,this.controlMouseDown);
			this.controlBox.on("mousedown",this,this.controlBoxMouseDown);
			this.on("dragmove",this,this.dragging);
		}

		__class(Axis,'laya.debug.tools.comps.Axis',_super);
		var __proto=Axis.prototype;
		__proto.updateChanges=function(){
			if(this._target){
				var params;
				params=this._lenType[this._type];
				this.xAxis.targetChanger=ValueChanger.create(this._target,params[0]);
				this.yAxis.targetChanger=ValueChanger.create(this._target,params[1]);
			}
		}

		__proto.switchType=function(){
			this._type++;
			this._type=this._type%this._lenType.length;
			this.type=this._type;
		}

		__proto.controlBoxMouseDown=function(e){
			this.startDrag();
		}

		__proto.dragging=function(){
			if (this._target){
				this._point.setTo(this.x,this.y);
				DisControlTool.transPoint(this.parent,this._target.parent,this._point);
				this._target.pos(this._point.x,this._point.y);
			}
		}

		__proto.initMe=function(){
			this.addChild(this.xAxis);
			this.addChild(this.yAxis);
			this.yAxis.rotation=90;
			this.addChild(this.controlBox);
			this.controlBox.posTo(0,0);
		}

		__proto.clearMoveEvents=function(){
			Laya.stage.off("mousemove",this,this.stageMouseMove);
			Laya.stage.off("mouseup",this,this.stageMouseUp);
		}

		__proto.controlMouseDown=function(e){
			this.targetRotationChanger.target=this.target;
			this.clearMoveEvents();
			this.oPoint.setTo(0,0);
			this.myRotationChanger.record();
			this.oPoint=this.localToGlobal(this.oPoint);
			this.stageMouseRotationChanger.value=this.getStageMouseRatation();
			this.stageMouseRotationChanger.record();
			this.targetRotationChanger.record();
			Laya.stage.on("mousemove",this,this.stageMouseMove);
			Laya.stage.on("mouseup",this,this.stageMouseUp);
		}

		__proto.getStageMouseRatation=function(){
			return MathUtil.getRotation(this.oPoint.x,this.oPoint.y,Laya.stage.mouseX,Laya.stage.mouseY);
		}

		__proto.stageMouseMove=function(e){
			this.stageMouseRotationChanger.value=this.getStageMouseRatation();
			var dRotation=NaN;
			dRotation=-this.stageMouseRotationChanger.dValue;
			if(this.target){
				this.targetRotationChanger.showValueByAdd(dRotation);
				}else{
				this.myRotationChanger.showValueByAdd(dRotation);
			}
		}

		__proto.stageMouseUp=function(e){
			this.noticeChange();
			this.clearMoveEvents();
		}

		__proto.noticeChange=function(){
			console.log("rotate:",-this.stageMouseRotationChanger.dValue);
		}

		__getset(0,__proto,'target',function(){
			return this._target;
			},function(tar){
			this._target=tar;
			this.updateChanges();
		});

		__getset(0,__proto,'type',function(){
			return this._type;
			},function(lenType){
			this._type=lenType;
			this.updateChanges();
		});

		return Axis;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-30 下午3:23:06
	*/
	//class laya.debug.tools.comps.Rect extends laya.display.Sprite
	var Rect=(function(_super){
		function Rect(){
			this.recWidth=10;
			Rect.__super.call(this);
			this.drawMe();
		}

		__class(Rect,'laya.debug.tools.comps.Rect',_super);
		var __proto=Rect.prototype;
		__proto.drawMe=function(){
			var g;
			g=this.graphics;
			g.clear();
			g.drawRect(0,0,this.recWidth,this.recWidth,"#22ff22");
			this.size(this.recWidth,this.recWidth);
		}

		__proto.posTo=function(x,y){
			this.x=x-this.recWidth*0.5;
			this.y=y-this.recWidth*0.5;
		}

		return Rect;
	})(Sprite)


	/**
	*@private
	*<code>FileBitmap</code> 是图片文件资源类。
	*/
	//class laya.resource.FileBitmap extends laya.resource.Bitmap
	var FileBitmap=(function(_super){
		function FileBitmap(){
			this._src=null;
			this._onload=null;
			this._onerror=null;
			FileBitmap.__super.call(this);
		}

		__class(FileBitmap,'laya.resource.FileBitmap',_super);
		var __proto=FileBitmap.prototype;
		/**
		*文件路径全名。
		*/
		__getset(0,__proto,'src',function(){
			return this._src;
			},function(value){
			this._src=value;
		});

		/**
		*载入完成处理函数。
		*/
		__getset(0,__proto,'onload',null,function(value){
		});

		/**
		*错误处理函数。
		*/
		__getset(0,__proto,'onerror',null,function(value){
		});

		return FileBitmap;
	})(Bitmap)


	/**
	*<code>HTMLCanvas</code> 是 Html Canvas 的代理类，封装了 Canvas 的属性和方法。。请不要直接使用 new HTMLCanvas！
	*/
	//class laya.resource.HTMLCanvas extends laya.resource.Bitmap
	var HTMLCanvas=(function(_super){
		function HTMLCanvas(type){
			//this._ctx=null;
			this._is2D=false;
			HTMLCanvas.__super.call(this);
			var _$this=this;
			this._source=this;
			if (type==="2D" || (type==="AUTO" && !Render.isWebGL)){
				this._is2D=true;
				this._source=Browser.createElement("canvas");
				var o=this;
				o.getContext=function (contextID,other){
					if (_$this._ctx)return _$this._ctx;
					var ctx=_$this._ctx=_$this._source.getContext(contextID,other);
					if (ctx){
						ctx._canvas=o;
						if(!Render.isFlash)ctx.size=function (w,h){
						};
					}
					return ctx;
				}
			}
		}

		__class(HTMLCanvas,'laya.resource.HTMLCanvas',_super);
		var __proto=HTMLCanvas.prototype;
		/**
		*清空画布内容。
		*/
		__proto.clear=function(){
			this._ctx && this._ctx.clear();
		}

		/**
		*销毁。
		*/
		__proto.destroy=function(){
			this._ctx && this._ctx.destroy();
			this._ctx=null;
		}

		/**
		*释放。
		*/
		__proto.release=function(){}
		/**
		*@private
		*设置 Canvas 渲染上下文。
		*@param context Canvas 渲染上下文。
		*/
		__proto._setContext=function(context){
			this._ctx=context;
		}

		/**
		*获取 Canvas 渲染上下文。
		*@param contextID 上下文ID.
		*@param other
		*@return Canvas 渲染上下文 Context 对象。
		*/
		__proto.getContext=function(contextID,other){
			return this._ctx ? this._ctx :(this._ctx=HTMLCanvas._createContext(this));
		}

		/**
		*获取内存大小。
		*@return 内存大小。
		*/
		__proto.getMemSize=function(){
			return 0;
		}

		/**
		*设置宽高。
		*@param w 宽度。
		*@param h 高度。
		*/
		__proto.size=function(w,h){
			if (this._w !=w || this._h !=h){
				this._w=w;
				this._h=h;
				this.memorySize=this._w *this._h *4;
				this._ctx && this._ctx.size(w,h);
				this._source && (this._source.height=h,this._source.width=w);
			}
		}

		/**
		*Canvas 渲染上下文。
		*/
		__getset(0,__proto,'context',function(){
			return this._ctx;
		});

		/**
		*是否当作 Bitmap 对象。
		*/
		__getset(0,__proto,'asBitmap',null,function(value){
		});

		HTMLCanvas.create=function(type){
			return new HTMLCanvas(type);
		}

		HTMLCanvas.TYPE2D="2D";
		HTMLCanvas.TYPE3D="3D";
		HTMLCanvas.TYPEAUTO="AUTO";
		HTMLCanvas._createContext=null
		return HTMLCanvas;
	})(Bitmap)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.DebugInfoLayer extends laya.display.Sprite
	var DebugInfoLayer=(function(_super){
		function DebugInfoLayer(){
			this.nodeRecInfoLayer=null;
			this.lineLayer=null;
			this.txtLayer=null;
			this.popLayer=null;
			this.graphicLayer=null;
			this.cacheViewLayer=null;
			DebugInfoLayer.__super.call(this);
			this.nodeRecInfoLayer=new Sprite();
			this.lineLayer=new Sprite();
			this.txtLayer=new Sprite();
			this.popLayer=new Sprite();
			this.graphicLayer=new Sprite();
			this.cacheViewLayer=new Sprite();
			this.nodeRecInfoLayer.name="nodeRecInfoLayer";
			this.lineLayer.name="lineLayer";
			this.txtLayer.name="txtLayer";
			this.popLayer.name="popLayer";
			this.graphicLayer.name="graphicLayer";
			this.cacheViewLayer.name="cacheViewLayer";
			this.addChild(this.lineLayer);
			this.addChild(this.cacheViewLayer);
			this.addChild(this.nodeRecInfoLayer);
			this.addChild(this.txtLayer);
			this.addChild(this.popLayer);
			this.addChild(this.graphicLayer);
			DebugInfoLayer.I=this;
			this.zOrder=999;
			Laya.stage.on("doubleclick",this,this.setTop);
		}

		__class(DebugInfoLayer,'laya.debug.view.nodeInfo.DebugInfoLayer',_super);
		var __proto=DebugInfoLayer.prototype;
		__proto.setTop=function(){
			DisControlTool.setTop(this);
		}

		__proto.isDebugItem=function(sprite){
			return DisControlTool.isInTree(this,sprite);
		}

		DebugInfoLayer.init=function(){
			if (!DebugInfoLayer.I){
				new DebugInfoLayer();
				Laya.stage.addChild(DebugInfoLayer.I);
			}
		}

		DebugInfoLayer.I=null
		return DebugInfoLayer;
	})(Sprite)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.NodeInfoPanel extends laya.display.Sprite
	var NodeInfoPanel=(function(_super){
		function NodeInfoPanel(){
			this._stateDic={};
			this.isWorkState=false;
			NodeInfoPanel.__super.call(this);
		}

		__class(NodeInfoPanel,'laya.debug.view.nodeInfo.NodeInfoPanel',_super);
		var __proto=NodeInfoPanel.prototype;
		__proto.showDisInfo=function(node){
			this.recoverNodes();
			NodeInfosItem.showDisInfos(node);
			this.showOnly(node);
			this.isWorkState=true;
		}

		__proto.showOnly=function(node){
			if (!node)
				return;
			this.hideBrothers(node);
			this.showOnly(node.parent);
		}

		__proto.recoverNodes=function(){
			NodeInfosItem.hideAllInfos();
			var key;
			var data;
			var tTar;
			for (key in this._stateDic){
				data=this._stateDic[key];
				tTar=data["target"];
				if (tTar){
					try{
						tTar.visible=data.visible;
						}catch (e){
					}
				}
			}
			this.isWorkState=false;
		}

		__proto.hideOtherChain=function(node){
			if (!node)
				return;
			while (node){
				this.hideBrothers(node);
				node=node.parent;
			}
		}

		__proto.hideChilds=function(node){
			if (!node)
				return;
			var i=0,len=0;
			var cList;
			cList=node._childs;
			len=cList.length;
			var tChild;
			for (i=0;i < len;i++){
				tChild=cList[i];
				if (tChild==NodeInfosItem.NodeInfoContainer)continue ;
				this.saveNodeInfo(tChild);
				tChild.visible=false;
			}
		}

		__proto.hideBrothers=function(node){
			if (!node)
				return;
			var p;
			p=node.parent;
			if (!p)
				return;
			var i=0,len=0;
			var cList;
			cList=p._childs;
			len=cList.length;
			var tChild;
			for (i=0;i < len;i++){
				tChild=cList[i];
				if (tChild==NodeInfosItem.NodeInfoContainer)continue ;
				if (tChild !=node){
					this.saveNodeInfo(tChild);
					tChild.visible=false;
				}
			}
		}

		__proto.saveNodeInfo=function(node){
			IDTools.idObj(node);
			if(this._stateDic.hasOwnProperty(IDTools.getObjID(node)))return;
			var data;
			data={};
			data.target=node;
			data.visible=node.visible;
			this._stateDic[IDTools.getObjID(node)]=data;
		}

		__proto.recoverNodeInfo=function(node){
			IDTools.idObj(node);
			if (this._stateDic.hasOwnProperty(IDTools.getObjID(node))){
				var data;
				data=this._stateDic[IDTools.getObjID(node)];
				node["visible"]=data.visible;
			}
		}

		NodeInfoPanel.init=function(){
			if (!NodeInfoPanel.I){
				NodeInfoPanel.I=new NodeInfoPanel();
				NodeInfosItem.init();
				ToolPanel.init();
			}
		}

		NodeInfoPanel.I=null
		return NodeInfoPanel;
	})(Sprite)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.NodeInfosItem extends laya.display.Sprite
	var NodeInfosItem=(function(_super){
		function NodeInfosItem(){
			this._infoTxt=null;
			this._tar=null;
			NodeInfosItem.__super.call(this);
			this._infoTxt=new Text();
			this._infoTxt.color="#ff0000";
			this._infoTxt.bgColor="#00ff00";
			this._infoTxt.fontSize=12;
		}

		__class(NodeInfosItem,'laya.debug.view.nodeInfo.NodeInfosItem',_super);
		var __proto=NodeInfosItem.prototype;
		__proto.removeSelf=function(){
			this._infoTxt.removeSelf();
			return laya.display.Node.prototype.removeSelf.call(this);
		}

		__proto.showToUI=function(){
			NodeInfosItem.NodeInfoContainer.nodeRecInfoLayer.addChild(this);
			this._infoTxt.removeSelf();
			NodeInfosItem.NodeInfoContainer.txtLayer.addChild(this._infoTxt);
			this.findOkPos();
		}

		__proto.randomAPos=function(r){
			this._infoTxt.x=this.x+Laya.stage.width*Math.random();
			this._infoTxt.y=this.y+r *Math.random();
		}

		__proto.findOkPos=function(){
			var len=0;
			len=20;
			this.randomAPos(len);
			return;
			var count=0;
			count=1;
			while (!this.isPosOk()){
				count++;
				if (count >=500){
					len+=10;
					count=0;
				}
				this.randomAPos(len);
			}
		}

		__proto.isPosOk=function(){
			var tParent;
			tParent=NodeInfosItem.NodeInfoContainer.nodeRecInfoLayer;
			var i=0,len=0;
			var cList;
			cList=tParent._childs;
			len=cList.length;
			var tChild;
			var mRec;
			mRec=this._infoTxt.getBounds();
			if (mRec.x < 0)return false;
			if (mRec.y < 0)return false;
			if (mRec.right > Laya.stage.width)return false;
			for (i=0;i < len;i++){
				tChild=cList[i];
				if (tChild==this._infoTxt)continue ;
				if (mRec.intersects(tChild.getBounds()))return false;
			}
			return true;
		}

		__proto.showInfo=function(node){
			this._tar=node;
			if (!node)return;
			NodeInfosItem._txts.length=0;
			var i=0,len=0;
			var tKey;
			len=NodeInfosItem.showValues.length;
			if (node.name){
				NodeInfosItem._txts.push(ClassTool.getClassName(node)+"("+node.name+")");
				}else{
				NodeInfosItem._txts.push(ClassTool.getClassName(node));
			}
			for (i=0;i < len;i++){
				tKey=NodeInfosItem.showValues[i];
				NodeInfosItem._txts.push(tKey+":"+NodeInfosItem.getNodeValue(node,tKey));
			}
			this._infoTxt.text=NodeInfosItem._txts.join("\n");
			this.graphics.clear();
			var pointList;
			pointList=node._getBoundPointsM(true);
			if(!pointList||pointList.length<1)return;
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,node.localToGlobal,node);
			pointList=GrahamScan.pointListToPlist(pointList);
			NodeInfosItem._disBoundRec=Rectangle._getWrapRec(pointList,NodeInfosItem._disBoundRec);
			this.graphics.drawRect(0,0,NodeInfosItem._disBoundRec.width,NodeInfosItem._disBoundRec.height,null,"#00ffff");
			this.pos(NodeInfosItem._disBoundRec.x,NodeInfosItem._disBoundRec.y);
		}

		__proto.fresh=function(){
			this.showInfo(this._tar);
		}

		__proto.clearMe=function(){
			this._tar=null;
		}

		__proto.recover=function(){
			Pool.recover("NodeInfosItem",this);
		}

		NodeInfosItem.init=function(){
			if (!NodeInfosItem.NodeInfoContainer){
				DebugInfoLayer.init();
				NodeInfosItem.NodeInfoContainer=DebugInfoLayer.I;
				Laya.stage.addChild(NodeInfosItem.NodeInfoContainer);
			}
		}

		NodeInfosItem.getNodeInfoByNode=function(node){
			IDTools.idObj(node);
			var key=0;
			key=IDTools.getObjID(node);
			if (!NodeInfosItem._nodeInfoDic[key]){
				NodeInfosItem._nodeInfoDic[key]=new NodeInfosItem();
			}
			return NodeInfosItem._nodeInfoDic[key];
		}

		NodeInfosItem.hideAllInfos=function(){
			var key;
			var tInfo;
			for (key in NodeInfosItem._nodeInfoDic){
				tInfo=NodeInfosItem._nodeInfoDic[key];
				tInfo.removeSelf();
			}
			NodeInfosItem.clearRelations();
		}

		NodeInfosItem.showNodeInfo=function(node){
			var nodeInfo;
			nodeInfo=NodeInfosItem.getNodeInfoByNode(node);
			nodeInfo.showInfo(node);
			nodeInfo.showToUI();
		}

		NodeInfosItem.showDisInfos=function(node){
			var _node;
			_node=node;
			if (!node)
				return;
			while (node){
				NodeInfosItem.showNodeInfo(node);
				node=node.parent;
			}
			DisControlTool.setTop(NodeInfosItem.NodeInfoContainer);
			NodeInfosItem.apdtTxtInfoPoss(_node);
			NodeInfosItem.updateRelations();
		}

		NodeInfosItem.apdtTxtInfoPoss=function(node){
			var disList;
			disList=[];
			while (node){
				disList.push(node);
				node=node.parent;
			};
			var i=0,len=0;
			var tInfo;
			var tTxt;
			len=disList.length;
			var xPos=NaN;
			xPos=Laya.stage.width-150;
			var heightLen=0;
			heightLen=100;
			node=disList[0];
			if (node){
				tInfo=NodeInfosItem.getNodeInfoByNode(node);
				if (tInfo){
					tTxt=tInfo._infoTxt;
					xPos=Laya.stage.width-tTxt.width-10;
					heightLen=tTxt.height+10;
				}
			}
			disList=disList.reverse();
			for (i=0;i < len;i++){
				node=disList[i];
				tInfo=NodeInfosItem.getNodeInfoByNode(node);
				if (tInfo){
					tTxt=tInfo._infoTxt;
					tTxt.pos(xPos,heightLen *i);
				}
			}
		}

		NodeInfosItem.clearRelations=function(){
			var g;
			g=NodeInfosItem.NodeInfoContainer.lineLayer.graphics;
			g.clear();
		}

		NodeInfosItem.updateRelations=function(){
			var g;
			g=NodeInfosItem.NodeInfoContainer.lineLayer.graphics;
			g.clear();
			var key;
			var tInfo;
			for (key in NodeInfosItem._nodeInfoDic){
				tInfo=NodeInfosItem._nodeInfoDic[key];
				if (tInfo.parent){
					g.drawLine(tInfo.x,tInfo.y,tInfo._infoTxt.x,tInfo._infoTxt.y,"#0000ff");
				}
			}
		}

		NodeInfosItem.getNodeValue=function(node,key){
			var rst;
			NodeInfosItem._nodePoint.setTo(0,0);
			switch(key){
				case "x":
					rst=node["x"]+" (g:"+node.localToGlobal(NodeInfosItem._nodePoint).x+")"
					break ;
				case "y":
					rst=node["y"]+" (g:"+node.localToGlobal(NodeInfosItem._nodePoint).y+")"
					break ;
				default :
					rst=node[key];
				}
			return rst;
		}

		NodeInfosItem.NodeInfoContainer=null
		NodeInfosItem._nodeInfoDic={};
		NodeInfosItem._txts=[];
		__static(NodeInfosItem,
		['showValues',function(){return this.showValues=["x","y","scaleX","scaleY","width","height","visible","mouseEnabled"];},'_disBoundRec',function(){return this._disBoundRec=new Rectangle();},'_nodePoint',function(){return this._nodePoint=new Point();}
		]);
		return NodeInfosItem;
	})(Sprite)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.recinfos.NodeRecInfo extends laya.display.Sprite
	var NodeRecInfo=(function(_super){
		function NodeRecInfo(){
			this.txt=null;
			this._tar=null;
			this.recColor="#00ff00";
			NodeRecInfo.__super.call(this);
			this.txt=new Text();
			this.txt.color="#ff0000";
			this.txt.bgColor="#00ff00";
			this.txt.fontSize=12;
			this.addChild(this.txt);
		}

		__class(NodeRecInfo,'laya.debug.view.nodeInfo.recinfos.NodeRecInfo',_super);
		var __proto=NodeRecInfo.prototype;
		__proto.setInfo=function(str){
			this.txt.text=str;
		}

		__proto.setTarget=function(tar){
			this._tar=tar;
		}

		__proto.showInfo=function(node){
			this._tar=node;
			if (!node)return;
			if(!node._$P)return;
			this.graphics.clear();
			var pointList;
			pointList=node._getBoundPointsM(true);
			if(!pointList||pointList.length<1)return;
			pointList=GrahamScan.pListToPointList(pointList,true);
			WalkTools.walkArr(pointList,node.localToGlobal,node);
			pointList=GrahamScan.pointListToPlist(pointList);
			NodeRecInfo._disBoundRec=Rectangle._getWrapRec(pointList,NodeRecInfo._disBoundRec);
			this.graphics.drawRect(0,0,NodeRecInfo._disBoundRec.width,NodeRecInfo._disBoundRec.height,null,DebugConsts.RECACHE_REC_COLOR,2);
			this.pos(NodeRecInfo._disBoundRec.x,NodeRecInfo._disBoundRec.y);
		}

		__proto.fresh=function(){
			this.showInfo(this._tar);
		}

		__proto.clearMe=function(){
			this._tar=null;
		}

		__static(NodeRecInfo,
		['_disBoundRec',function(){return this._disBoundRec=new Rectangle();}
		]);
		return NodeRecInfo;
	})(Sprite)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.ToolPanel extends laya.display.Sprite
	var ToolPanel=(function(_super){
		function ToolPanel(){
			ToolPanel.__super.call(this);
			Base64AtlasManager.base64.preLoad(Handler.create(this,this.showToolBar));
			ContextMenu.init();
			DisResizer.init();
			var tipManager;
			tipManager=new TipManagerForDebug();
		}

		__class(ToolPanel,'laya.debug.view.nodeInfo.ToolPanel',_super);
		var __proto=ToolPanel.prototype;
		//Laya.timer.once(1000,this,showToolBar);
		__proto.showToolBar=function(){
			DebugPanelView.I.show();
		}

		__proto.createViews=function(){
			ToolPanel.typeClassDic["Find"]=FindView;
			ToolPanel.typeClassDic["Filter"]=FilterView;
			ToolPanel.typeClassDic["TxtInfo"]=TxtInfoView;
			ToolPanel.typeClassDic["Tree"]=NodeTreeView;
		}

		__proto.switchShow=function(type){
			var view;
			view=this.getView(type);
			if (view){
				view.switchShow();
			}
		}

		__proto.getView=function(type){
			var view;
			view=ToolPanel.viewDic[type];
			if (!view && ToolPanel.typeClassDic[type]){
				view=ToolPanel.viewDic[type]=new ToolPanel.typeClassDic[type]();
			}
			return view;
		}

		__proto.showTxtInfo=function(txt){
			OutPutView.I.showTxt(txt);
		}

		__proto.showNodeTree=function(node){
			NodeTree.I.setDis(node);
			DebugPanelView.I.switchToTree();
		}

		__proto.showSelectInStage=function(node){
			NodeTree.I.showSelectInStage(node);
			DebugPanelView.I.switchToTree();
		}

		__proto.showSelectItems=function(selectList){
			DebugPanelView.I.swichToSelect();
			SelectInfosView.I.setSelectList(selectList);
		}

		ToolPanel.init=function(){
			if (!ToolPanel.I)ToolPanel.I=new ToolPanel();
		}

		ToolPanel.I=null
		ToolPanel.viewDic={};
		ToolPanel.Find="Find";
		ToolPanel.Filter="Filter";
		ToolPanel.TxtInfo="TxtInfo";
		ToolPanel.Tree="Tree";
		__static(ToolPanel,
		['typeClassDic',function(){return this.typeClassDic={
		};}

		]);
		return ToolPanel;
	})(Sprite)


	/**容器线框动画*/
	//class laya.editor.core.BoxEffect extends laya.display.Sprite
	var BoxEffect=(function(_super){
		function BoxEffect(){
			BoxEffect.__super.call(this);
		}

		__class(BoxEffect,'laya.editor.core.BoxEffect',_super);
		var __proto=BoxEffect.prototype;
		/**播放*/
		__proto.play=function(px,py,box,isBack){
			var _$this=this;
			(isBack===void 0)&& (isBack=false);
			var x=box.x;
			var y=box.y;
			var w=box.width;
			var h=box.height;
			var totalTimer=10;
			var currTimer=0;
			Laya.timer.frameLoop(1,null,onEnterFrame);
			function onEnterFrame (e){
				currTimer++;
				_$this.graphics.clear();
				var t=currTimer / totalTimer;
				if (isBack){
					_$this.graphics.drawRect(x+(px-x)*t,y+(py-y)*t,w *(1-t),h *(1-t),null,"#ff0000");
					}else {
					_$this.graphics.drawRect(px+(x-px)*t,py+(y-py)*t,w *t,h *t,null,"#ff0000");
				}
				if (currTimer >=totalTimer){
					Laya.timer.clear(null,onEnterFrame);
					_$this.remove();
				}
			}
		}

		__proto.remove=function(){
			if (this.parent){
				this.parent.removeChild(this);
			}
		}

		return BoxEffect;
	})(Sprite)


	//class laya.editor.core.DragBox extends laya.display.Sprite
	var DragBox$1=(function(_super){
		function DragBox(type){
			this._box=null;
			this._target=null;
			this._currDir=null;
			this._type=0;
			this._dragBlocks=null;
			this.fixScale=NaN;
			this._mouseTar=null;
			this.lineWidth=1;
			DragBox.__super.call(this);
			this._left=this.drawBlock();
			this._right=this.drawBlock();
			this._top=this.drawBlock();
			this._bottom=this.drawBlock();
			this._topLeft=this.drawBlock();
			this._topRight=this.drawBlock();
			this._bottomLeft=this.drawBlock();
			this._bottomRight=this.drawBlock();
			this._pivotPoint=this.drawCircle();
			this._lastPoint=new Point();
			this.moveOffPoint=new Point();
			this._type=type;
			this.addChild(this._box=this.drawBorder(0,0,0xff0000));
			this._box.pos(-0.5,-0.5);
			if (type==1 || type==3){
				this.addChild(this._left);
				this.addChild(this._right);
			}
			if (type==2 || type==3){
				this.addChild(this._top);
				this.addChild(this._bottom);
			}
			if (type==3){
				this.addChild(this._topLeft);
				this.addChild(this._topRight);
				this.addChild(this._bottomLeft);
				this.addChild(this._bottomRight);
			}
			this._dragBlocks=[this._left,this._right,this._top,this._bottom,this._topLeft,this._topRight,this._bottomLeft,this._bottomRight,this._pivotPoint];
			if(type!=5)
				this.addChild(this._pivotPoint);
			this._left["cursor"]="w-resize";
			this._right["cursor"]="e-resize";
			this._top["cursor"]="n-resize";
			this._bottom["cursor"]="s-resize";
			this._topLeft["cursor"]="nw-resize";
			this._topRight["cursor"]="ne-resize";
			this._bottomLeft["cursor"]="sw-resize";
			this._bottomRight["cursor"]="se-resize";
			this._pivotPoint.on("dragmove",this,this.pivortDraging);
			this.on("mousedown",this,this.onMouseDown);
			this.mouseThrough=true;
			this.on("mouseover",this,this.onMouseOver);
			this.on("mouseout",this,this.onMouseOut);
		}

		__class(DragBox,'laya.editor.core.DragBox',_super,'DragBox$1');
		var __proto=DragBox.prototype;
		__proto.updateBlocks=function(){
			if(!UIPanel.instance.currViewer)return;
			var adptScale=NaN;
			adptScale=UIPanel.instance.currViewer.scaleView;
			if(adptScale<=0)adptScale=1;
			this.lineWidth=1/adptScale;
			var i=0,len=0;
			var tBlock;
			len=this._dragBlocks.length;
			for(i=0;i<len;i++){
				tBlock=this._dragBlocks[i];
				tBlock.scaleX=tBlock.scaleY=1/adptScale;
			}
		}

		__proto.onMouseOver=function(e){
			if(e.target["cursor"]){
				CursorManager.setType(e.target["cursor"]);
			}
		}

		__proto.onMouseOut=function(e){
			CursorManager.setType("default");
		}

		__proto._setUpMouseHihi=function(){
			if(!DragBox._mouseHiHi)DragBox._mouseHiHi=new Sprite();
			DragBox._mouseHiHi.width=0;
			DragBox._mouseHiHi.height=0;
			var i=0,len=0;
			var tKey;
			len=DragBox._copyValues.length;
			for(i=0;i<len;i++){
				tKey=DragBox._copyValues[i];
				DragBox._mouseHiHi[tKey]=this._target[tKey];
			}
			this._target.parent.addChild(DragBox._mouseHiHi);
		}

		__proto.onMouseDown=function(e){
			this._currDir=e.target;
			this._mouseTar=this._target.parent;
			this._mouseTar=this._target;
			this._setUpMouseHihi();
			this._mouseTar=DragBox._mouseHiHi;
			if(e.nativeEvent.shiftKey){
				this.initFixScale();
			}
			if (this._currDir !=this){
				this.updateLastPoint();
				if(this._currDir!=this._pivotPoint){
					Laya.stage.on("mousemove",this,this.onMouseMove);
					}else{
					this._currDir.startDrag();
				}
				Laya.stage.on("mouseup",this,this.onMouseUp);
				e.stopPropagation();
			}
		}

		__proto.updateLastPoint=function(){
			if(!this._mouseTar)return;
			this._lastPoint.x=this._mouseTar.mouseX;
			this._lastPoint.y=this._mouseTar.mouseY;
		}

		__proto.pivortDraging=function(){
			this._pivotPoint.pos(this.mouseX,this.mouseY);
		}

		__proto.onMouseUp=function(e){
			Laya.stage.off("mousemove",this,this.onMouseMove);
			Laya.stage.off("mouseup",this,this.onMouseUp);
			if(this._currDir==this._pivotPoint){
				this.onMouseMove(null);
			};
			var info=(this._target).comXml;
			this.fixScale=-1;
			info.props.x=this._target.x;
			info.props.y=this._target.y;
			info.props.width=this._target.width;
			info.props.height=this._target.height;
			if(!info.props.hasOwnProperty("anchorX")){
				info.props.pivotX=this._target.pivotX;
				if(info.props.pivotX==0){
					delete info.props.pivotX;
					}else{
					delete info.props.anchorX;
				}
			}
			if(!info.props.hasOwnProperty("anchorY")){
				info.props.pivotY=this._target.pivotY;
				if(info.props.pivotY==0){
					delete info.props.pivotY;
					}else{
					delete info.props.anchorY;
				}
			};
			var tParent;
			if(info.props.hasOwnProperty("centerY")){
				tParent=this._target.parent;
				info.props.centerY=this._target.y-(tParent.height-this._target.height*this._target.scaleY)*0.5-this._target.pivotY*this._target.scaleY;
				this._target["centerY"]=info.props.centerY;
				delete info.props.y;
			}
			if(info.props.hasOwnProperty("centerX")){
				tParent=this._target.parent;
				info.props.centerX=this._target.x-(tParent.width-this._target.width*this._target.scaleX)*0.5-this._target.pivotX*this._target.scaleX;
				this._target["centerX"]=info.props.centerX;
				delete info.props.x;
			}
			UIPanel.instance.currViewer.design.nodeChanged(info,["x","y","width","height"]);
			UIPanel.instance.currViewer.design.change(false);
			UIPanel.instance.currViewer.design.changeSelectComp();
		}

		__proto.initFixScale=function(){
			this.fixScale=this._target.height / this._target.width;
		}

		__proto.onMouseMove=function(e){
			var scale=UIPanel.instance.currViewer.scaleView;
			var tx=(this._mouseTar.mouseX-this._lastPoint.x);
			var ty=(this._mouseTar.mouseY-this._lastPoint.y);
			var tParent;
			var xScale=NaN;
			var yScale=NaN;
			tParent=this._target.parent;
			if(tParent){
				xScale=tParent.scaleX;
				yScale=tParent.scaleY;
				}else{
				xScale=1;
				yScale=1;
			}
			xScale=1;
			yScale=1;
			scale=1;
			var sameScale=false;
			var adptX=NaN;
			var adptY=NaN;
			if(e&&e.nativeEvent.shiftKey){
				if(this.fixScale<0)this.initFixScale();
				adptY=tx *this.fixScale;
				adptX=ty/this.fixScale;
				sameScale=true;
				switch(this._currDir){
					case this._topLeft:
					case this._bottomLeft:
						this._currDir=this._left;
						break ;
					case this._topRight:
					case this._bottomRight:
						this._currDir=this._right;
						break ;
					}
			}
			if (tx !=0 || ty !=0){
				this._lastPoint.x+=tx *scale;
				this._lastPoint.y+=ty *scale;
				var tw=tx / this._target.scaleX;
				var th=ty / this._target.scaleY;
				if (this._currDir==this._left){
					this._target.x+=tx;
					this._target.width-=tw;
					if (sameScale){
						this._target.height=this._target.width*this.fixScale;
					}
					}else if (this._currDir==this._right){
					this._target.width+=tw;
					if (sameScale){
						this._target.height=this._target.width*this.fixScale;
					}
					}else if (this._currDir==this._top){
					this._target.y+=ty;
					this._target.height-=th;
					if (sameScale){
						this._target.width=this._target.height/this.fixScale;
					}
					}else if (this._currDir==this._bottom){
					this._target.height+=th;
					if (sameScale){
						this._target.width=this._target.height/this.fixScale;
					}
					}else if (this._currDir==this._topLeft){
					this._target.x+=tx;
					this._target.y+=ty;
					this._target.width-=tw;
					this._target.height-=th;
					}else if (this._currDir==this._topRight){
					this._target.y+=ty;
					this._target.width+=tw;
					this._target.height-=th;
					}else if (this._currDir==this._bottomLeft){
					this._target.x+=tx;
					this._target.width-=tw;
					this._target.height+=th;
					}else if (this._currDir==this._bottomRight){
					this._target.width+=tw;
					this._target.height+=th;
					}else if(this._currDir==this._pivotPoint){
					var info=(this._target).comXml;
					delete info.props.anchorX;
					delete info.props.anchorY;
					(this._target).anchorX=NaN;
					(this._target).anchorY=NaN;
					this._target.pivotX+=tx;
					this._target.pivotY+=ty;
					this._target.x+=tx;
					this._target.y+=ty;
				}
				if (this._target.width < 1){
					this._target.width=1;
				}
				if (this._target.height < 1){
					this._target.height=1;
				}
				if ((this._target instanceof laya.display.Sprite )){}
					this._target.width=Math.round(this._target.width);
				this._target.x=Math.round(this._target.x);
				this._target.y=Math.round(this._target.y);
				this._target.height=Math.round(this._target.height);
				this.refresh();
				UIPanel.instance.currViewer.design.refreshStatusInfo();
			}
		}

		/**画矩形*/
		__proto.drawBorder=function(width,height,color,alpha){
			(alpha===void 0)&& (alpha=1);
			var box=new Sprite();
			var g=box.graphics;
			g.clear();
			g.drawRect(0,0,width,height,null,"#"+color);
			return box;
		}

		/**画矩形*/
		__proto.drawBlock=function(){
			var box=new Sprite();
			var g=box.graphics;
			g.clear();
			box.width=DragBox.BLOCK_WIDTH;
			box.height=DragBox.BLOCK_WIDTH;
			g.drawRect(-DragBox.BLOCK_WIDTH *0.5,-DragBox.BLOCK_WIDTH *0.5,DragBox.BLOCK_WIDTH,DragBox.BLOCK_WIDTH,"#ffffff","#ff0000",1);
			box.mouseEnabled=true;
			box.mouseThrough=true;
			return box;
		}

		__proto.drawCircle=function(){
			var box=new Sprite();
			var g=box.graphics;
			g.clear();
			var circleWidth=0;
			circleWidth=DragBox.BLOCK_WIDTH+2;
			box.width=circleWidth;
			box.height=circleWidth;
			g.drawCircle(circleWidth *0.5,circleWidth *0.5,circleWidth *0.5,"#ffffff","#ff0000",1);
			box.pivot(circleWidth *0.5,circleWidth *0.5);
			box.mouseEnabled=true;
			box.mouseThrough=true;
			return box;
		}

		/**设置对象*/
		__proto.setTarget=function(target){
			this._target=target;
			this.refresh();
			Laya.timer.frameOnce(2,this,this.refresh,null,true);
		}

		// Laya.timer.once(150,this,refresh,null,true);
		__proto.refresh=function(){
			this.changePoint();
			this.changeSize();
		}

		__proto.changePoint=function(){
			if(!this._target)return;
			if(!this.parent)return;
			var p=this._target.localToGlobal(new Point());
			var np=(this.parent).globalToLocal(p);
			this.x=np.x;
			this.y=np.y;
		}

		/**设置大小*/
		__proto.changeSize=function(){
			this.updateBlocks();
			var width=this._target.width *this._target.scaleX;
			var height=this._target.height *this._target.scaleY;
			this.rotation=this._target.rotation;
			this.skewX=this._target.skewX;
			this.skewY=this._target.skewY;
			var tParent;
			tParent=this._target.parent;
			if(tParent){
				width*=tParent.scaleX;
				height*=tParent.scaleY;
				this.rotation+=tParent.rotation;
				}else{
				this.scale(1,1);
			}
			this.updatePivot();
			this._pivotPoint.visible=!this._target["disablePivot"];
			if (this._box.width !=width || this._box.height !=height||1){
				this._box.graphics.clear();
				this._box.graphics.drawRect(0,0,Math.abs(width),Math.abs(height),null,"#ff0000",this.lineWidth);
				this._box.size(width,height);
				this.size(width,height);
				this._box.scaleX=Math.abs(this._box.scaleX)*(this._target.scaleX > 0 ? 1 :-1);
				this._box.scaleY=Math.abs(this._box.scaleY)*(this._target.scaleY > 0 ? 1 :-1);
				this._left.x=0;
				this._left.y=height *0.5;
				this._right.x=width;
				this._right.y=height *0.5;
				this._top.x=width *0.5;
				this._top.y=0;
				this._bottom.x=width *0.5;
				this._bottom.y=height;
				this._topLeft.x=this._topLeft.y=0;
				this._topRight.x=width;
				this._topRight.y=0;
				this._bottomLeft.x=0;
				this._bottomLeft.y=height;
				this._bottomRight.x=width;
				this._bottomRight.y=height;
			}
		}

		__proto.updatePivot=function(){
			if(!this._target)return;
			if(this._target.parent){
				var tP;
				tP=this._target.parent;
				this._pivotPoint.pos(this._target.pivotX*this._target.scaleX*tP.scaleX,this._target.pivotY*this._target.scaleY*tP.scaleY);
				}else{
				this._pivotPoint.pos(this._target.pivotX*this._target.scaleX,this._target.pivotY*this._target.scaleY);
			}
		}

		__getset(0,__proto,'type',function(){
			return this._type;
		});

		DragBox.BLOCK_WIDTH=6;
		DragBox._mouseHiHi=null
		__static(DragBox,
		['_copyValues',function(){return this._copyValues=["x","y","pivotX","pivotY","rotation","skewX","skewY"];}
		]);
		return DragBox;
	})(Sprite)


	/**消息管理器
	*@author yung
	*/
	//class laya.editor.manager.MessageManager extends laya.display.Sprite
	var MessageManager=(function(_super){
		function MessageManager(){
			this.preTime=0;
			MessageManager.__super.call(this);
			this._vbox=new Box();
			this.addChild(this._vbox);
			this.setBounds(new Rectangle(0,0,150,150));
		}

		__class(MessageManager,'laya.editor.manager.MessageManager',_super);
		var __proto=MessageManager.prototype;
		__proto.show=function(msg,color,time){
			(color===void 0)&& (color="00cc00");
			(time===void 0)&& (time=1000);
			var label=new Label();
			label.color="#"+color;
			label.fontSize=14;
			label.text=msg;
			label.y=100;
			label.height=30;
			var delayTime=0;
			var nowTime=0;
			var startTime=0;
			nowTime=Browser.now();
			startTime=Math.max(this.preTime+500,nowTime);
			delayTime=startTime-nowTime;
			this.preTime=startTime;
			CanvasSprite.setSpriteCanvasRender(label,101,true);
			Laya.timer.once(delayTime,this,this.showLabel,[label,time],false);
		}

		__proto.showLabel=function(label,time){
			this._vbox.addChild(label);
			Tween.to(label,{y:-20},time,Ease.cubicOut,null);
			Laya.timer.once(time,this,this.clear,[label],false);
		}

		__proto.clear=function(label){
			label.removeSelf();
		}

		__getset(1,MessageManager,'instance',function(){
			return MessageManager._instance ? MessageManager._instance :MessageManager._instance=new MessageManager();
		},laya.display.Sprite._$SET_instance);

		MessageManager._instance=null
		return MessageManager;
	})(Sprite)


	/**
	*时间轴帧显示对象
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-5 下午1:33:59
	*/
	//class laya.editor.view.timeline.TimeFrame extends laya.display.Sprite
	var TimeFrame=(function(_super){
		function TimeFrame(){
			this._isSelect=false;
			this._isFocus=false;
			this.data=null;
			this._boderColor="#cc00cc";
			this._label=null;
			this._frame=new Sprite();
			TimeFrame.__super.call(this);
			this._frame.mouseEnabled=true;
			this._frame.width=TimeGrid.frameWidth-0*2;
			this._frame.height=TimeGrid.frameHeight-0*2;
			this._frame.width=5;
			this._frame.pivotX=-Math.floor((TimeGrid.frameWidth-this._frame.width)*0.5)-0;
			this._frame.height=TimeGrid.frameHeight-8;
			this._frame.pivotY=-(TimeGrid.frameHeight-this._frame.height)*0.5+1;
			this._frame.x=0;
			this._frame.y=0;
			this._frame.name="timeFrame";
			this.mouseEnabled=true;
			this.size(1,1);
			this.addChild(this._frame);
			this.on("mouseover",this,this.mouseOver);
			this.on("mouseout",this,this.mouseOut);
		}

		__class(TimeFrame,'laya.editor.view.timeline.TimeFrame',_super);
		var __proto=TimeFrame.prototype;
		// }
		__proto.onDragDrop=function(e){
			console.log("frameDragDrop");
		}

		__proto.mouseOver=function(e){
			this._isFocus=true;
			this.update();
			DisControlTool.setTop(this);
			if(this._label){
				Laya.stage.event("showtip",this._label);
			}
		}

		__proto.mouseOut=function(e){
			this._isFocus=false;
			this.update();
			if(this._label){
				Laya.stage.event("hidetip",this._label);
			}
		}

		__proto.update=function(){
			this._frame.pivotX=Math.floor((this._frame.width)*0.5);
			if(!this.data)return;
			if(this.data.type!=2&&(this._isSelect||this._isFocus)){
				this._boderColor="#ccFFcc";
				}else{
				this._boderColor="#cc00cc";
			};
			var g;
			g=this._frame.graphics;
			g.clear();
			var color;
			color="#13b5b1";
			switch(this.data.type){
				case 2:
					color="#111111";
					break ;
				case 3:
					color="#ffffff";
					break ;
				default :
				}
			g.drawRect(0,0,this._frame.width,this._frame.height,color,this._boderColor,1);
			if(this.data.props&&this.data.props.label&&this.data.props.label!=""){
				this._label=this.data.props.label;
				g.drawRect(0,(this._frame.height-5)*0.5,this._frame.width,5,"#f8b551");
				}else{
				this._label=null;
			}
		}

		__proto.setData=function(data){
			this.data=data;
			if(TimeFrame.selecteData&&TimeFrame.selecteData==this.data.props){
				this.isSelect=true;
			}
			this.update();
		}

		__proto.recover=function(){
			if(this.data){
				Pool.recover("TimeFrameData",this.data);
			}
			this.data=null;
			this._isFocus=false;
			this._isSelect=false;
			Pool.recover("TimeFrame",this);
		}

		__getset(0,__proto,'isSelect',function(){
			return this._isSelect;
			},function(v){
			this._isSelect=v;
			if(v){
				TimeFrame.selecteData=this.data.props;
			}
			this.update();
		});

		TimeFrame.Focus_Frame=0;
		TimeFrame.Normal=1;
		TimeFrame.Holder=2;
		TimeFrame.Parent=3;
		TimeFrame.FrameTop=4;
		TimeFrame.selecteData=null
		TimeFrame.frameBorder=0;
		return TimeFrame;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-12-6 上午10:54:19
	*/
	//class laya.editor.view.timeline.TopFrame extends laya.display.Sprite
	var TopFrame=(function(_super){
		function TopFrame(){
			this.frame=0;
			TopFrame.__super.call(this);
			this.init();
		}

		__class(TopFrame,'laya.editor.view.timeline.TopFrame',_super);
		var __proto=TopFrame.prototype;
		__proto.init=function(){
			this.graphics.drawRect(0,0,3.5*2,3.5*2,"#f8b551");
			this.pivot(Math.floor(3.5),3.5);
			this.size(3.5*2,3.5*2);
		}

		TopFrame.FrameWidth=3.5;
		return TopFrame;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-4 上午9:24:35
	*/
	//class laya.rendercanvas.CanvasSpriteContainer extends laya.display.Sprite
	var CanvasSpriteContainer=(function(_super){
		function CanvasSpriteContainer(){
			this.canvasZIndex=100;
			this.autoTop=true;
			CanvasSpriteContainer.__super.call(this);
		}

		__class(CanvasSpriteContainer,'laya.rendercanvas.CanvasSpriteContainer',_super);
		var __proto=CanvasSpriteContainer.prototype;
		__proto.addChild=function(node){
			this.childAddHandler(node);
			return laya.display.Node.prototype.addChild.call(this,node);
		}

		__proto.addChildAt=function(node,index){
			this.childAddHandler(node);
			return laya.display.Node.prototype.addChildAt.call(this,node,index);
		}

		__proto.removeChild=function(node){
			this.removeChildHandler(node);
			return laya.display.Node.prototype.removeChild.call(this,node);
		}

		__proto.removeChildAt=function(index){
			var node=this.getChildAt(index);
			if (node){
				this.removeChildHandler(node);
			}
			return laya.display.Node.prototype.removeChildAt.call(this,index);
		}

		__proto.childAddHandler=function(node){
			if(this.autoTop){
				DisControlTool.setTop(this);
			}
			CanvasSprite.setSpriteCanvasRender(node,this.canvasZIndex,true);
		}

		__proto.removeChildHandler=function(node){}
		return CanvasSpriteContainer;
	})(Sprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-3 下午5:34:23
	*/
	//class laya.rendercanvas.DialogHook extends laya.display.Sprite
	var DialogHook=(function(_super){
		function DialogHook(){
			this._centerDialog=null;
			this._checkMask=null;
			this.popupEffect=null;
			DialogHook.__super.call(this);
			this.dialogLayer=new Sprite();
			this.modalLayer=new Sprite();
			this.maskLayer=new Sprite();
		}

		__class(DialogHook,'laya.rendercanvas.DialogHook',_super);
		var __proto=DialogHook.prototype;
		__proto.hookDialog=function(){
			Dialog.manager["open"]=this.open;
			Dialog.manager.closeEffect=null;
			Dialog.manager.popupEffect=null;
		}

		/**
		*显示对话框(非模式窗口类型)。
		*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。
		*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。
		*/
		__proto.open=function(dialog,closeOther){
			(closeOther===void 0)&& (closeOther=false);
			if (closeOther)this.removeChildren();
			CanvasSprite.setSpriteCanvasRender(dialog,101);
			DialogHook.tZorder++;
			dialog.zOrder=DialogHook.tZorder;
			if (dialog.popupCenter)this._centerDialog(dialog);
			this.addChild(dialog);
			if (dialog.isModal || this._$P["hasZorder"])this.timer.callLater(this,this._checkMask);
			this.popupEffect && this.popupEffect(dialog);
			this.event("open");
		}

		/**
		*关闭对话框。
		*@param dialog 需要关闭的对象框 <code>Dialog</code> 实例。
		*/
		__proto.close=function(dialog){
			try{
				dialog.removeSelf();
				if (this.modalLayer.numChildren < 2){
					this.maskLayer.removeSelf();
					}else {
					this.modalLayer.setChildIndex(this.maskLayer,this.modalLayer.numChildren-2);
				}
			}catch(e){}
			this.event("close");
		}

		/**
		*显示对话框(非模式窗口类型)。
		*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。
		*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。
		*/
		__proto.show=function(dialog,closeOther){
			(closeOther===void 0)&& (closeOther=false);
			CanvasSprite.setSpriteCanvasRender(dialog,101);
			if (closeOther)this.dialogLayer.removeChildren();
			if (dialog.popupCenter)this._centerDialog(dialog);
			this.dialogLayer.addChild(dialog);
			this.event("open");
		}

		/**
		*显示对话框(模式窗口类型)。
		*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。
		*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。
		*/
		__proto.popup=function(dialog,closeOther){
			(closeOther===void 0)&& (closeOther=false);
			CanvasSprite.setSpriteCanvasRender(dialog,101);
			if (closeOther)this.modalLayer.removeChildren();
			if (dialog.popupCenter)this._centerDialog(dialog);
			this.modalLayer.addChild(dialog);
			this.addChild(this.modalLayer);
			this.event("open");
		}

		DialogHook.tZorder=1;
		__static(DialogHook,
		['I',function(){return this.I=new DialogHook();}
		]);
		return DialogHook;
	})(Sprite)


	//class LayaBuilder extends laya.display.Sprite
	var LayaBuilder=(function(_super){
		function LayaBuilder(){
			this._builderConfig=null;
			this._projectPath=null;
			this._isInitCompleted=false;
			ViewHook;
			if (!Laya.stage)Laya.init(1000,800);
			Browser.container.onselectstart=function (){return false;}
			LayaBuilder.__super.call(this);
			IDEVars.cacheBothTreeAndAnimation=true;
			var enableNewAnimation=false;
			enableNewAnimation=true;
			if(enableNewAnimation){
				TypeManager.GraphicPic="GraphicNode";
				IDEVars.enableNewAnimation=true;
			}
			CanvasSprite.parentNode=Browser.container;
			var canvasLayer;
			canvasLayer=new CanvasSpriteContainer();
			canvasLayer.canvasZIndex=102;
			canvasLayer.mouseEnabled=true;
			canvasLayer.hitTestPrior=false;
			canvasLayer.size(1,1);
			canvasLayer.autoTop=true;
			Laya._currentStage=canvasLayer;
			Laya.stage.addChild(canvasLayer);
			StageHook.hookStage();
			View.regComponent("TreeEx",TreeEx);
			View.regComponent("TextInput",EditorTextInput);
			View.regComponent("Tab",TabEx);
			View.regComponent("List",ListBase$1);
			View.regComponent("Tree",TreeBase$1);
			TypeManager.init();
			ExportManager.init();
			HookedView.hookView();
			MouseHook.hook();
			var noNew=false;
			if(noNew){
				LayoutRecManager.ctOffSetX=0;
				UIViewer.EnableXMLEditor=false;
				BasicPanel.EnableBasicPanel=false;
				DisplayTreePanel.AnyItemContains=false;
			}
			LayaBuilder.initConfig();
			laya.ani.bone.Skeleton;
			laya.html.dom.HTMLDivElement;
			laya.ani.swf.MovieClip;
			laya.particle.Particle2D;
			Animation;
			Text;
			SoundNode;
			EffectAnimation;
			IDEAPIS;
			BinaryPicTools.init();
			LayerManager.init();
			Laya.stage.bgColor=null;
			Laya.stage.scaleMode="full";
			Font.defaultFamily="Arial";
			LayaBuilder.drag=new DragManager();
			LayaBuilder.tip=new TipManager$1();
			this.initBasics();
			this.loadConfig();
			HookedView.initByStyleFile(IDESkinManager.getStylePath());
			this.mouseEnabled=true;
			Slider.label.color="#dddddd";
			LayerManager.stage.addChild(this);
			var pLoads=new PreLoads();
			pLoads.handler=new Handler(this,this.start);
			pLoads.loadRes();
			LoaderHook$1.init();
			Notice$1.listen("IDE_QUIT",this,this.onNativeWindowClosing);
			Browser.window.onbeforeunload=this.beforeClose;
			Laya.stage.frameRate="fast";
			Laya.stage.on("blur",this,this.onBlur);
			Laya.stage.on("focus",this,this.onFocus);
			UIConfig.popupBgAlpha=0.1;
			CanvasViewsManager.I.init();
			SysLog.logGlobalError=true;
			this.hookTab();
		}

		__class(LayaBuilder,'LayaBuilder',_super);
		var __proto=LayaBuilder.prototype;
		__proto.hookTab=function(){
			Browser.document.onkeydown=function HandleTabKey (evt){
				if (evt.keyCode==9){
					if (evt.preventDefault){evt.preventDefault();}
						else {evt.returnValue=false;}
				}
				if(evt.keyCode==65&&evt.ctrlKey){
					if (evt.preventDefault){evt.preventDefault();}
						else {evt.returnValue=false;}
				}
			}
		}

		__proto.HandleTabKey=function(evt){
			if (evt.keyCode==9){
				if (evt.preventDefault){evt.preventDefault();}
					else {evt.returnValue=false;}
			}
			if(evt.keyCode==65&&evt.ctrlKey){
				if (evt.preventDefault){evt.preventDefault();}
					else {evt.returnValue=false;}
			}
		}

		__proto.onFocus=function(){
			Laya.stage.frameRate="slow";
		}

		__proto.onBlur=function(){
			Laya.stage.frameRate="sleep";
		}

		__proto.beforeClose=function(e){
			LayaBuilder.noticeQuite();
			return;
			SaveUnSavedDialog.I.event=e;
			LayoutRecManager.saveLayoutInfo();
			if (UIPanel.instance.hasChange){
				UIPanel.instance.closeAll(LayaBuilder.tryClose);
				e.returnValue=false;
				}else {
				LayaBuilder.noticeQuite();
			}
		}

		__proto.onStageResize=function(e){
			Laya.timer.once(100,this,this.adpts);
		}

		__proto.adpts=function(){
			this.adptRenderFrame();
		}

		__proto.adptRenderFrame=function(){
			ViewRenderManager.adpt();
			DragBarManager.adpt();
			CodeViewManager.adpt();
		}

		__proto.start=function(){
			this.initApp();
			this.initBuilder();
			this.onStageResize();
			Laya.stage.on("resize",this,this.onStageResize);
		}

		//uiTestHere();
		__proto.uiTestHere=function(){
			Laya.stage.addChild(DisplayTreePanel.instance);
			DisplayTreePanel.instance.x=300;
			DisplayTreePanel.instance.y=200;
		}

		__proto.initBasics=function(){
			Device.init();
			CMDShell.init();
			FileTools.init();
			FontLoader.init();
			console.log("location:",Browser.window.location);
			console.log("appPath:",FileTools.appPath);
			SystemSetting.appPath=FileTools.appPath;
			SystemSetting.tempPath=FileManager.getAppPath("data");
		}

		__proto.initApp=function(){
			ViewRenderManager.init();
			SceneManager.init();
			ContextMenu$1.init();
			NoticeRouter.init();
			DragBarManager.init();
			DialogTools.init();
			IPCTools.init();
			IPCTools.send("hello",{o:"oo"});
			SystemDragOverManager.init();
			TemplateManager.init();
			CodeTplManager.initCodeTpls();
			LayoutRecManager.init();
			CursorManager.init();
			DisResizer$1.init();
			KeyManager.I.init();
			HtmlZIndexManager.init();
			Laya.timer.once(1200,this,this.openFirstPage);
		}

		__proto.openFirstPage=function(){
			PluginManager.I.loadPlugins();
			return;
			var codePath;
			codePath="E:/wangwei/codes/laya/libs/LayaAir/plugins/debugtool/src/laya/debug/view/nodeInfo/views/FindSmallView.as";
			As3ParserTool.parserAsFile(codePath);
			return;
			var iFrame;
			iFrame=new IFrameSprite();
			iFrame.setUrl("E:/wangwei/codes/layanew/libs/LayaAir/publish/LayaAirPublish/ide/resources/app/out/vs/layaEditor/h5/initPlugin/ace/index.html");
			LayoutRecManager.showPanelToStage(iFrame);
			console.log("iframe:",iFrame);
			return;
			var panel;
			panel=JSPlugin.loadPlugin("testplugin");
			LayoutRecManager.showPanelToStage(panel);
			return;
		}

		// Notice.notify(IDEEvent.OPENPAGE,[new NewsPage(),"欢迎页"]);
		__proto.onNativeWindowClosing=function(e){
			this._builderConfig.lang=SystemSetting.lang;
			this._builderConfig.lastProject=SystemSetting.projectPath;
			this._builderConfig.ifShowRuleGrid=SystemSetting.ifShowRuleGrid;
			this._builderConfig.toCodeModeWhenPublicEnd=SystemSetting.toCodeModeWhenPublicEnd;
			this._builderConfig["skinPath"]=IDESkinManager.tSkinPath;
			this._builderConfig["langPath"]=IDELangManager.tLang;
			if (!SystemSetting.projectPath){
				debugger;
			}
			this._builderConfig.lastProjects=[];
			for (var i=0;i < ProjectManager.projectOpened.length && i < 5;i++){
				this._builderConfig.lastProjects.push(ProjectManager.projectOpened[i]);
			}
			FileManager.createTxtFile(FileManager.getDataPath("builder.xml"),ObjectTools.getJsonString(this._builderConfig));
			LayoutRecManager.saveLayoutInfo();
		}

		/**全局错误捕捉 */
		__proto.onUncaughtError=function(e){}
		/**处理项目文件被打开*/
		__proto.onInvoke=function(e){
			if (e.arguments.length > 0){
				if (e.arguments.length > 1 && e.arguments[0]=="publish"){
					this._projectPath=e.arguments[1];
					}else {
					var file=new File(e.arguments[0]);
					if (file.extension.toLowerCase()=="laya"){
						this._projectPath=file.nativePath;
					}
				}
				if (this._isInitCompleted){
					ProjectManager.loadProject(this._projectPath);
				}
			}
		}

		__proto.loadConfig=function(){
			try{
				var str=FileManager.readTxtFile(FileManager.getDataPath("builder.xml"));
				if (str){
					this._builderConfig=JSON.parse(str);
				}
				}catch(e){
				this._builderConfig=null;
			}
			if(!this._builderConfig)this._builderConfig={layaout:'',projects:[]};
			this._projectPath=this._builderConfig.lastProject;
			SystemSetting.ifShowRuleGrid=this._builderConfig.ifShowRuleGrid;
			SystemSetting.toCodeModeWhenPublicEnd=this._builderConfig.toCodeModeWhenPublicEnd?true:false;
			IDESkinManager.setSkinPath(this._builderConfig["skinPath"]);
			IDELangManager.setLangPath(this._builderConfig["langPath"]);
		}

		//getSysArg();
		__proto.getSysArg=function(){
			IPCTools.setWindow();
			var path;
			path=Browser.window.openPath;
		}

		__proto.initBuilder=function(){
			var iconPath=FileManager.getAppPath("laya/icons/components");
			this.loadComplete();
		}

		__proto.loadComplete=function(loader){
			MessageManager.instance.x=240;
			MessageManager.instance.y=140;
			LayerManager.stage.addChild(MessageManager.instance);
			ShortcutManager.init();
			this.regSystemShortcuts();
			this._isInitCompleted=true;
			CanvasSprite.inits();
			ProjectManager.setProjectOpened(this._builderConfig.lastProjects);
		}

		__proto.closeLoginPanel=function(){
			this.visible=true;
		}

		__proto.regSystemShortcuts=function(){
			ShortcutManager.addKeyE(78,true,false,"OPEN_ADDPage",null,null,"",AddDocument.instance);
			ShortcutManager.addKey(80,true,false,SetPage.instance.start,null,null,"",SetPage.instance);
			ShortcutManager.addKeyE(68,true,false,"open_adddir",null,null,"",AddDirectory.instance);
			ShortcutManager.addKeyE(76,true,false,"CLIP_VIEW",null,null,"");
			ShortcutManager.addKey(87,true,false,UIPanel.instance.closeCurrPage,null,null,"",UIPanel.instance);
			ShortcutManager.addKey(83,true,false,UIPanel.instance.save,null,null,"",UIPanel.instance);
			ShortcutManager.addKey(83,true,true,UIPanel.instance.saveAll,null,null,"",UIPanel.instance);
			ShortcutManager.addKey(70,true,false,FindAndReplace.instance.start,null,null,"",FindAndReplace.instance);
			ShortcutManager.addKey(67,true,false,UIPanel.instance.copy,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(86,true,false,UIPanel.instance.pasteComp,[false],Design,null,UIPanel.instance);
			ShortcutManager.addKey(86,true,true,UIPanel.instance.pasteComp,[true],Design,null,UIPanel.instance);
			ShortcutManager.addKey(88,true,false,UIPanel.instance.cut,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(66,true,false,BoxComp.instance.start,null,Design,"",BoxComp.instance);
			ShortcutManager.addKey(85,true,false,UIPanel.instance.unBoxComp,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(82,true,false,RepeatComp.instance.start,null,Design,"",RepeatComp.instance);
			ShortcutManager.addKey(65,true,false,UIPanel.instance.selectAll,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(46,false,false,UIPanel.instance.deleteSelect,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(8,false,false,UIPanel.instance.deleteSelect,null,Design,null,UIPanel.instance);
			ShortcutManager.addKey(90,true,false,UIPanel.instance.goBack,null,Design,"",UIPanel.instance);
			ShortcutManager.addKey(89,true,false,UIPanel.instance.goForward,null,Design,"",UIPanel.instance);
			ShortcutManager.addKey(187,true,false,UIPanel.instance.setScale,[0.1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(189,true,false,UIPanel.instance.setScale,[-0.1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(107,true,false,UIPanel.instance.setScale,[0.1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(109,true,false,UIPanel.instance.setScale,[-0.1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(220,true,false,UIPanel.instance.resizeScale,[1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(48,true,false,UIPanel.instance.resizeScale,[1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(96,true,false,UIPanel.instance.resizeScale,[1],UIPanel,null,UIPanel.instance);
			ShortcutManager.addKey(13,true,false,UIPanel.instance.preview);
			ShortcutManager.addKeyE(117,false,false,"FRESH_Page");
			ShortcutManager.addKeyE(118,false,false,"FRESH_RES");
			ShortcutManager.addKey(116,false,false,this.refreshResAndPage,null,null,null,this);
			ShortcutManager.addKey(119,false,false,UIPanel.instance.toggleBg,null,null,"",UIPanel.instance);
			ShortcutManager.addKey(82,true,true,UIPanel.instance.switchRuleGrid,null,null,"",UIPanel.instance);
			ShortcutManager.addKey(120,false,false,SetProject.instance.start,null,null,"",SetProject.instance);
			ShortcutManager.addKey(114,false,false,LayoutRecManager.createDefault,null,null,"",LayoutRecManager);
			ShortcutManager.addKey(115,false,false,FindUnUsedRes.instance.start,null,null,"",FindUnUsedRes.instance);
			ShortcutManager.addKey(123,false,false,ExportManager.export,null,null,"",ExportManager);
			ShortcutManager.addKey(123,true,false,ExportManager.forceExport,null,null,"",ExportManager);
			ShortcutManager.addKey(122,false,false,ExportManager.exportCodeOnly,null,null,"",ExportManager);
		}

		__proto.refreshResAndPage=function(){
			PagePanel.instance.refresh();
			Notice$1.notify("FRESH_RES");
		}

		__proto.showLoginPanel=function(){}
		LayaBuilder.mParseInt=function(v){
			return LayaBuilder._preParseInt(v)|| 0;
		}

		LayaBuilder.mParserFloat=function(v){
			return parseFloat(v)||0;
		}

		LayaBuilder.initConfig=function(){
			UIConfig.touchScrollEnable=false;
			UIConfig.showButtons=false;
			Styles.labelColor="#c5c5c5";
			Styles.buttonLabelColors=["#dddddd","#ffffff","#efefef"];
			Styles.comboBoxItemColors=["#0c6fa6","#e0e7ef","#d2d2d2","#484647","#484647"];
		}

		LayaBuilder.tryClose=function(){}
		LayaBuilder.noticeQuite=function(){
			Notice$1.notify("IDE_QUIT");
		}

		LayaBuilder.closeAllLog=function(){
			var logFun;
			logFun=LayaBuilder.emptyLog;
			Browser.window.console.log=logFun;
		}

		LayaBuilder.emptyLog=function(){}
		LayaBuilder.drag=null
		LayaBuilder.tip=null
		__static(LayaBuilder,
		['_preParseInt',function(){return this._preParseInt=parseInt;}
		]);
		return LayaBuilder;
	})(Sprite)


	/**
	*<p> <code>Animation</code> 是Graphics动画类（不断切换Graphics来实现动画），实现了基于Graphics的动画创建，播放控制接口。</p>
	*<p> <code>Animation</code> 可以加载一组图片集合或图集文件或IDE设计好的动画进行播放。</p>
	*@example 以下示例代码，创建了一个 <code>Text</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.display.Animation;
		*import laya.net.Loader;
		*import laya.utils.Handler;
		*public class Animation_Example
		*{
			*public function Animation_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*init();//初始化
				*}
			*private function init():void
			*{
				*var animation:Animation=new Animation();//创建一个 Animation 类的实例对象 animation 。
				*animation.loadAtlas("resource/ani/fighter.json");//加载图集并播放
				*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
				*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
				*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。
				*animation.play();//播放动画。
				*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Animation_Example();
	*function Animation_Example(){
		*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
		*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
		*init();//初始化
		*}
	*function init()
	*{
		*var animation=new Laya.Animation();//创建一个 Animation 类的实例对象 animation 。
		*animation.loadAtlas("resource/ani/fighter.json");//加载图集并播放
		*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
		*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
		*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。
		*animation.play();//播放动画。
		*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*import Animation=laya.display.Animation;
	*class Animation_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.init();
			*}
		*private init():void {
			*var animation:Animation=new Laya.Animation();//创建一个 Animation 类的实例对象 animation 。
			*animation.loadAtlas("resource/ani/fighter.json");//加载图集并播放
			*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
			*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。
			*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。
			*animation.play();//播放动画。
			*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。
			*}
		*}
	*new Animation_Example();
	*</listing>
	*/
	//class laya.display.Animation extends laya.display.AnimationPlayerBase
	var Animation=(function(_super){
		function Animation(){
			this._frames=null;
			this._url=null;
			Animation.__super.call(this);
			this._setControlNode(this);
		}

		__class(Animation,'laya.display.Animation',_super);
		var __proto=Animation.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			this.stop();
			laya.display.Sprite.prototype.destroy.call(this,destroyChild);
			this._frames=null;
			this._labels=null;
		}

		/**
		*播放动画。可以指定name属性，播放缓存中某个动画。
		*@param start 开始播放的动画索引或label。
		*@param loop 是否循环播放。
		*@param name 如果name为空(可选)，则播放当前动画，如果不为空，则播放全局缓存动画（如果有）
		*/
		__proto.play=function(start,loop,name){
			(start===void 0)&& (start=0);
			(loop===void 0)&& (loop=true);
			(name===void 0)&& (name="");
			if (name)this._setFramesFromCache(name);
			this._isPlaying=true;
			this.index=((typeof start=='string'))? this._getFrameByLabel(start):start;
			this.loop=loop;
			this._actionName=name;
			this._isReverse=this.wrapMode==1;
			if (this._frames && this.interval > 0){
				this.timerLoop(this.interval,this,this._frameLoop,null,true);
			}
		}

		/**@private */
		__proto._setFramesFromCache=function(name){
			if (this._url)name=this._url+"#"+name;
			if (name && Animation.framesMap[name]){
				var tAniO;
				tAniO=Animation.framesMap[name];
				if ((tAniO instanceof Array)){
					this._frames=Animation.framesMap[name];
					this._count=this._frames.length;
					}else{
					this._frames=tAniO.frames;
					this._count=this._frames.length;
					if (!this._frameRateChanged)this._interval=tAniO.interval;
					this._labels=this._copyLabels(tAniO.labels);
				}
				return true;
				}else {
				console.log("ani not found:",name);
			}
			return false;
		}

		/**@private */
		__proto._copyLabels=function(labels){
			if (!labels)return null;
			var rst;
			rst={};
			var key;
			for (key in labels){
				rst[key]=Utils.copyArray([],labels[key]);
			}
			return rst;
		}

		/**@private */
		__proto._frameLoop=function(){
			if (this._style.visible && this._style.alpha > 0.01){
				_super.prototype._frameLoop.call(this);
			}
		}

		/**@private */
		__proto._displayToIndex=function(value){
			if (this._frames)this.graphics=this._frames[value];
		}

		/**清理。方便对象复用。*/
		__proto.clear=function(){
			this.stop();
			this.graphics=null;
			this._frames=null;
			this._labels=null;
		}

		/**
		*加载图片集合作为动画。
		*@param urls 图片地址集合。如：[url1,url2,url3,...]。
		*@param cacheName 缓存的动画模板名称。此模板为全局模板，缓存后，可以使用play(start,loop,name)接口进行播放，无需重复创建动画模板（相同动画能节省创建动画模板开销），设置为空则不缓存。
		*@return 返回动画本身。
		*/
		__proto.loadImages=function(urls,cacheName){
			(cacheName===void 0)&& (cacheName="");
			this._url="";
			if (!this._setFramesFromCache(cacheName)){
				this.frames=Animation.framesMap[cacheName] ? Animation.framesMap[cacheName] :Animation.createFrames(urls,cacheName);
			}
			return this;
		}

		/**
		*加载一个图集作为动画。
		*@param url 图集地址。
		*@param loaded 加载完毕回调。
		*@param cacheName 缓存的动画模板名称。此模板为全局模板，缓存后，可以使用play(start,loop,name)接口进行播放，无需重复创建动画模板（相同动画能节省创建动画模板开销），设置为空则不缓存。
		*@return 返回动画本身。
		*/
		__proto.loadAtlas=function(url,loaded,cacheName){
			(cacheName===void 0)&& (cacheName="");
			this._url="";
			var _this=this;
			if (!_this._setFramesFromCache(cacheName)){
				function onLoaded (loadUrl){
					if (url===loadUrl){
						_this.frames=Animation.framesMap[cacheName] ? Animation.framesMap[cacheName] :Animation.createFrames(url,cacheName);
						if (loaded)loaded.run();
					}
				}
				if (Loader.getAtlas(url))onLoaded(url);
				else Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,"atlas");
			}
			return this;
		}

		/**
		*加载由IDE制作的动画。播放的帧率则按照IDE设计的帧率。加载后，默认会根据 "url+动画名称" 缓存为动画模板。
		*【注意】加载解析IDE动画之前，请确保动画使用的图片被预加载，否则会导致动画创建失败。
		*@param url 动画地址。
		*@param loaded 加载完毕回调。
		*@return 返回动画本身。
		*/
		__proto.loadAnimation=function(url,loaded){
			var _$this=this;
			this._url=url;
			var _this=this;
			if (!_this._setFramesFromCache("")){
				function onLoaded (loadUrl){
					if (!Loader.getRes(loadUrl))return;
					if (url===loadUrl){
						var tAniO;
						if (!Animation.framesMap[url+"#"]){
							var aniData=_this._parseGraphicAnimation(Loader.getRes(url));
							if (!aniData)return;
							var aniList=aniData.animationList;
							var i=0,len=aniList.length;
							var defaultO;
							for (i=0;i < len;i++){
								tAniO=aniList[i];
								if (tAniO.frames.length){
									Animation.framesMap[url+"#"+tAniO.name]=tAniO;
									if (!defaultO)defaultO=tAniO;
								}
							}
							if (defaultO){
								Animation.framesMap[url+"#"]=defaultO;
								_this._setFramesFromCache("");
								_$this.index=0;
							}
							_$this._checkResumePlaying();
							}else {
							_this._setFramesFromCache("");
							_$this.index=0;
							_$this._checkResumePlaying();
						}
						if (loaded)loaded.run();
					}
				}
				if (Loader.getRes(url))onLoaded(url);
				else Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,"json");
				Loader.clearRes(url);
				}else {
				if (loaded)loaded.run();
			}
			return this;
		}

		/**@private */
		__proto._parseGraphicAnimation=function(animationData){
			return GraphicAnimation.parseAnimationData(animationData)
		}

		/**动画帧信息，里面存储的是Graphics数组，Animation本身就是不断切换Graphics来实现动画效果。*/
		__getset(0,__proto,'frames',function(){
			return this._frames;
			},function(value){
			this._frames=value;
			if (value){
				this._count=value.length;
				if (this._isPlaying)this.play(this._index,this.loop,this._actionName);
				else this.index=this._index;
			}
		});

		/**是否自动播放，默认为false，如果设置为true，则动画被添加到舞台后，就会自动播放*/
		__getset(0,__proto,'autoPlay',null,function(value){
			if (value)this.play();
			else this.stop();
		});

		/**动画数据源，可以是图集，图片集合，IDE动画
		*比如：图集："xx/a1.json" 图片集合："a1.png,a2.png,a3.png" IDE动画"xx/a1.ani"
		*/
		__getset(0,__proto,'source',null,function(value){
			if (value.indexOf(".ani")>-1)this.loadAnimation(value);
			else if (value.indexOf(".json")>-1 || value.indexOf("als")>-1 || value.indexOf("atlas")>-1)this.loadAtlas(value);
			else this.loadImages(value.split(","));
		});

		Animation.createFrames=function(url,name){
			var arr;
			if ((typeof url=='string')){
				var atlas=Loader.getAtlas(url);
				if (atlas && atlas.length){
					arr=[];
					for (var i=0,n=atlas.length;i < n;i++){
						var g=new Graphics();
						g.drawTexture(Loader.getRes(atlas[i]),0,0);
						arr.push(g);
					}
				}
				}else if ((url instanceof Array)){
				arr=[];
				for (i=0,n=url.length;i < n;i++){
					g=new Graphics();
					g.loadImage(url[i],0,0);
					arr.push(g);
				}
			}
			if (name)Animation.framesMap[name]=arr;
			return arr;
		}

		Animation.clearCache=function(key){
			var cache=Animation.framesMap;
			var val;
			var key2=key+"#";
			for (val in cache){
				if (val===key || val.indexOf(key2)==0){
					delete Animation.framesMap[val];
				}
			}
		}

		Animation.framesMap={};
		return Animation;
	})(AnimationPlayerBase)


	/**
	*关键帧动画播放类
	*
	*/
	//class laya.display.FrameAnimation extends laya.display.AnimationPlayerBase
	var FrameAnimation=(function(_super){
		function FrameAnimation(){
			this._targetDic=null;
			this._animationData=null;
			FrameAnimation.__super.call(this);
			if(FrameAnimation._sortIndexFun==null){
				FrameAnimation._sortIndexFun=MathUtil.sortByKey("index",false,true);
			}
		}

		__class(FrameAnimation,'laya.display.FrameAnimation',_super);
		var __proto=FrameAnimation.prototype;
		/**
		*@private
		*初始化动画数据
		*@param targetDic 对象表
		*@param animationData 动画数据
		*
		*/
		__proto._setUp=function(targetDic,animationData){
			this._labels=null;
			this._targetDic=targetDic;
			this._animationData=animationData;
			this.interval=1000 / animationData.frameRate;
			if (animationData.parsed){
				this._count=animationData.count;
				this._labels=animationData.labels;
				}else{
				this._calculateDatas();
			}
			animationData.parsed=true;
			animationData.labels=this._labels;
			animationData.count=this._count;
		}

		/**@inheritDoc */
		__proto.clear=function(){
			_super.prototype.clear.call(this);
			this._targetDic=null;
			this._animationData=null;
		}

		/**@inheritDoc */
		__proto._displayToIndex=function(value){
			if(!this._animationData)return;
			if(value<0)value=0;
			if(value>this._count)value=this._count;
			var nodes=this._animationData.nodes,i=0,len=nodes.length;
			for(i=0;i<len;i++){
				this._displayNodeToFrame(nodes[i],value);
			}
		}

		/**
		*@private
		*将节点设置到某一帧的状态
		*@param node 节点ID
		*@param frame
		*@param targetDic 节点表
		*
		*/
		__proto._displayNodeToFrame=function(node,frame,targetDic){
			if(!targetDic)targetDic=this._targetDic;
			var target=targetDic[node.target];
			if(!target){
				return;
			};
			var frames=node.frames,key,propFrames,value;
			var keys=node.keys,i=0,len=keys.length;
			for(i=0;i<len;i++){
				key=keys[i];
				propFrames=frames[key];
				if(propFrames.length>frame){
					value=propFrames[frame];
					}else{
					value=propFrames[propFrames.length-1];
				}
				target[key]=value;
			}
		}

		/**
		*@private
		*计算帧数据
		*
		*/
		__proto._calculateDatas=function(){
			if(!this._animationData)return;
			var nodes=this._animationData.nodes,i=0,len=nodes.length,tNode;
			this._count=0;
			for(i=0;i<len;i++){
				tNode=nodes[i];
				this._calculateNodeKeyFrames(tNode);
			}
			this._count+=1;
		}

		/**
		*@private
		*计算某个节点的帧数据
		*@param node
		*
		*/
		__proto._calculateNodeKeyFrames=function(node){
			var keyFrames=node.keyframes,key,tKeyFrames,target=node.target;
			if(!node.frames){
				node.frames={};
			}
			if(!node.keys){
				node.keys=[];
				}else{
				node.keys.length=0;
			}
			for(key in keyFrames){
				tKeyFrames=keyFrames[key];
				if(!node.frames[key]){
					node.frames[key]=[];
				}
				tKeyFrames.sort(FrameAnimation._sortIndexFun);
				node.keys.push(key);
				this._calculateNodePropFrames(tKeyFrames,node.frames[key],key,target);
			}
		}

		/**
		*@private
		*计算节点某个属性的帧数据
		*@param keyframes
		*@param frames
		*@param key
		*@param target
		*
		*/
		__proto._calculateNodePropFrames=function(keyframes,frames,key,target){
			var i=0,len=keyframes.length-1;
			frames.length=keyframes[len].index+1;
			for(i=0;i<len;i++){
				this._dealKeyFrame(keyframes[i]);
				this._calculateFrameValues(keyframes[i],keyframes[i+1],frames);
			}
			if(len==0){
				frames[0]=keyframes[0].value;
			}
			this._dealKeyFrame(keyframes[i]);
		}

		/**
		*@private
		*
		*/
		__proto._dealKeyFrame=function(keyFrame){
			if (keyFrame.label&&keyFrame.label !="")this.addLabel(keyFrame.label,keyFrame.index);
		}

		/**
		*@private
		*计算两个关键帧直接的帧数据
		*@param startFrame
		*@param endFrame
		*@param result
		*
		*/
		__proto._calculateFrameValues=function(startFrame,endFrame,result){
			var i=0,easeFun;
			var start=startFrame.index,end=endFrame.index;
			var startValue=startFrame.value;
			var dValue=endFrame.value-startFrame.value;
			var dLen=end-start;
			if(end>this._count)this._count=end;
			if(startFrame.tween){
				easeFun=Ease[startFrame.tweenMethod];
				if(easeFun==null){
					easeFun=Ease.linearNone;
				}
				for(i=start;i<end;i++){
					result[i]=easeFun(i-start,startValue,dValue,dLen);
				}
				}else{
				for(i=start;i<end;i++){
					result[i]=startValue;
				}
			}
			result[endFrame.index]=endFrame.value;
		}

		FrameAnimation._sortIndexFun=null
		return FrameAnimation;
	})(AnimationPlayerBase)


	/**
	*<p><code>Input</code> 类用于创建显示对象以显示和输入文本。</p>
	*/
	//class laya.display.Input extends laya.display.Text
	var Input=(function(_super){
		function Input(){
			this._focus=false;
			this._multiline=false;
			this._editable=true;
			this._restrictPattern=null;
			this._type="text";
			this._prompt='';
			this._promptColor="#A9A9A9";
			this._originColor="#000000";
			this._content='';
			Input.__super.call(this);
			this._maxChars=1E5;
			this._width=100;
			this._height=20;
			this.multiline=false;
			this.overflow=Text.SCROLL;
			this.on("mousedown",this,this._onMouseDown);
			this.on("undisplay",this,this._onUnDisplay);
		}

		__class(Input,'laya.display.Input',_super);
		var __proto=Input.prototype;
		/**
		*设置光标位置和选取字符。
		*@param startIndex 光标起始位置。
		*@param endIndex 光标结束位置。
		*/
		__proto.setSelection=function(startIndex,endIndex){
			laya.display.Input.inputElement.selectionStart=startIndex;
			laya.display.Input.inputElement.selectionEnd=endIndex;
		}

		/**@private */
		__proto._onUnDisplay=function(e){
			this.focus=false;
		}

		/**@private */
		__proto._onMouseDown=function(e){
			this.focus=true;
			Laya.stage.on("mousedown",this,this._checkBlur);
		}

		/**@private */
		__proto._checkBlur=function(e){
			if (e.nativeEvent.target !=laya.display.Input.input && e.nativeEvent.target !=laya.display.Input.area && e.target !=this)
				this.focus=false;
		}

		/**@inheritDoc*/
		__proto.render=function(context,x,y){
			laya.display.Sprite.prototype.render.call(this,context,x,y);
		}

		/**
		*在输入期间，如果 Input 实例的位置改变，调用该方法同步输入框的位置。
		*/
		__proto._syncInputTransform=function(){
			var style=this.nativeInput.style;
			var stage=Laya.stage;
			var rec;
			rec=Utils.getGlobalPosAndScale(this);
			var m=stage._canvasTransform.clone();
			var tm=m.clone();
			tm.rotate(-Math.PI / 180 *Laya.stage.canvasDegree);
			tm.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);
			var perpendicular=(Laya.stage.canvasDegree % 180 !=0);
			var sx=perpendicular ? tm.d :tm.a;
			var sy=perpendicular ? tm.a :tm.d;
			tm.destroy();
			var tx=NaN,ty=NaN;
			if (Laya.stage.canvasDegree==0){
				tx=this.padding[3];
				ty=this.padding[0];
				tx+=rec.x;
				ty+=rec.y;
				tx *=sx;
				ty *=sy;
				tx+=m.tx;
				ty+=m.ty;
				}else if (Laya.stage.canvasDegree==90){
				tx=this.padding[0];
				ty=this.padding[3];
				tx+=rec.y;
				ty+=rec.x;
				tx *=sx;
				ty *=sy;
				tx=m.tx-tx;
				ty+=m.ty;
				}else{
				tx+=rec.y;
				ty+=rec.x;
				tx *=sx;
				ty *=sy;
				tx+=m.tx;
				ty=m.ty-ty;
			};
			var quarter=0.785;
			var r=Math.atan2(rec.height,rec.width)-quarter;
			var sin=Math.sin(r),cos=Math.cos(r);
			var tsx=cos *rec.width+sin *rec.height;
			var tsy=cos *rec.height-sin *rec.width;
			sx *=(perpendicular ? tsy :tsx);
			sy *=(perpendicular ? tsx :tsy);
			m.tx=0;
			m.ty=0;
			r *=180 / 3.1415;
			Input.inputContainer.style.transform="scale("+sx+","+sy+") rotate("+(Laya.stage.canvasDegree+r)+"deg)";
			Input.inputContainer.style.webkitTransform="scale("+sx+","+sy+") rotate("+(Laya.stage.canvasDegree+r)+"deg)";
			Input.inputContainer.setPos(tx,ty);
			m.destroy();
			var inputWid=this._width-this.padding[1]-this.padding[3];
			var inputHei=this._height-this.padding[0]-this.padding[2];
			this.nativeInput.setSize(inputWid,inputHei);
			if (Render.isConchApp){
				this.nativeInput.setPos(tx,ty);
				this.nativeInput.setScale(sx,sy);
			}
		}

		/**选中所有文本。*/
		__proto.select=function(){
			this.nativeInput.select();
		}

		/**@private 设置输入法（textarea或input）*/
		__proto._setInputMethod=function(){
			Input.input.parentElement && (Input.inputContainer.removeChild(Input.input));
			Input.area.parentElement && (Input.inputContainer.removeChild(Input.area));
			Input.inputElement=(this._multiline ? Input.area :Input.input);
			Input.inputContainer.appendChild(Input.inputElement);
		}

		/**@private */
		__proto._focusIn=function(){
			laya.display.Input.isInputting=true;
			var input=this.nativeInput;
			this._focus=true;
			var cssStyle=input.style;
			cssStyle.whiteSpace=(this.wordWrap ? "pre-wrap" :"nowrap");
			this._setPromptColor();
			input.readOnly=!this._editable;
			input.maxLength=this._maxChars;
			var padding=this.padding;
			input.type=this._type;
			input.value=this._content;
			input.placeholder=this._prompt;
			Laya.stage.off("keydown",this,this._onKeyDown);
			Laya.stage.on("keydown",this,this._onKeyDown);
			Laya.stage.focus=this;
			this.event("focus");
			if (Browser.onPC)input.focus();
			var temp=this._text;
			this._text=null;
			this.typeset();
			input.setColor(this._originColor);
			input.setFontSize(this.fontSize);
			input.setFontFace(this.font);
			if (Render.isConchApp){
				input.setMultiAble && input.setMultiAble(this._multiline);
			}
			cssStyle.lineHeight=(this.leading+this.fontSize)+"px";
			cssStyle.fontStyle=(this.italic ? "italic" :"normal");
			cssStyle.fontWeight=(this.bold ? "bold" :"normal");
			cssStyle.textAlign=this.align;
			cssStyle.padding="0 0";
			this._syncInputTransform();
			if (!Render.isConchApp && Browser.onPC)
				Laya.timer.frameLoop(1,this,this._syncInputTransform);
		}

		// 设置DOM输入框提示符颜色。
		__proto._setPromptColor=function(){
			Input.promptStyleDOM=Browser.getElementById("promptStyle");
			if (!Input.promptStyleDOM){
				Input.promptStyleDOM=Browser.createElement("style");
				Browser.document.head.appendChild(Input.promptStyleDOM);
			}
			Input.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {"+"color:"+this._promptColor+"}"+"input:-moz-placeholder, textarea:-moz-placeholder {"+"color:"+this._promptColor+"}"+"input::-moz-placeholder, textarea::-moz-placeholder {"+"color:"+this._promptColor+"}"+"input:-ms-input-placeholder, textarea:-ms-input-placeholder {"+"color:"+this._promptColor+"}";
		}

		/**@private */
		__proto._focusOut=function(){
			laya.display.Input.isInputting=false;
			this._focus=false;
			this._text=null;
			this._content=this.nativeInput.value;
			if (!this._content){
				_super.prototype._$set_text.call(this,this._prompt);
				_super.prototype._$set_color.call(this,this._promptColor);
				}else {
				_super.prototype._$set_text.call(this,this._content);
				_super.prototype._$set_color.call(this,this._originColor);
			}
			Laya.stage.off("keydown",this,this._onKeyDown);
			Laya.stage.focus=null;
			this.event("blur");
			if (Render.isConchApp)this.nativeInput.blur();
			Browser.onPC && Laya.timer.clear(this,this._syncInputTransform);
			Laya.stage.off("mousedown",this,this._checkBlur);
		}

		/**@private */
		__proto._onKeyDown=function(e){
			if (e.keyCode===13){
				if (Browser.onMobile && !this._multiline)
					this.focus=false;
				this.event("enter");
			}
		}

		__proto.changeText=function(text){
			this._content=text;
			if (this._focus){
				this.nativeInput.value=text || '';
				this.event("change");
			}else
			_super.prototype.changeText.call(this,text);
		}

		/**@inheritDoc */
		__getset(0,__proto,'color',_super.prototype._$get_color,function(value){
			if (this._focus)
				this.nativeInput.setColor(value);
			_super.prototype._$set_color.call(this,this._content?value:this._promptColor);
			this._originColor=value;
		});

		//[Deprecated]
		__getset(0,__proto,'inputElementYAdjuster',function(){
			console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");
			return 0;
			},function(value){
			console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");
		});

		/**表示是否是多行输入框。*/
		__getset(0,__proto,'multiline',function(){
			return this._multiline;
			},function(value){
			this._multiline=value;
			this.valign=value ? "top" :"middle";
		});

		/**
		*字符数量限制，默认为10000。
		*设置字符数量限制时，小于等于0的值将会限制字符数量为10000。
		*/
		__getset(0,__proto,'maxChars',function(){
			return this._maxChars;
			},function(value){
			if (value <=0)
				value=1E5;
			this._maxChars=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'text',function(){
			if (this._focus)
				return this.nativeInput.value;
			else
			return this._content || "";
			},function(value){
			_super.prototype._$set_color.call(this,this._originColor);
			value+='';
			if (this._focus){
				this.nativeInput.value=value || '';
				this.event("change");
				}else {
				if (!this._multiline)
					value=value.replace(/\r?\n/g,'');
				this._content=value;
				if (value)
					_super.prototype._$set_text.call(this,value);
				else {
					_super.prototype._$set_text.call(this,this._prompt);
					_super.prototype._$set_color.call(this,this.promptColor);
				}
			}
		});

		/**
		*获取对输入框的引用实例。
		*/
		__getset(0,__proto,'nativeInput',function(){
			return this._multiline ? Input.area :Input.input;
		});

		/**
		*设置输入提示符。
		*/
		__getset(0,__proto,'prompt',function(){
			return this._prompt;
			},function(value){
			if (!this._text && value)
				_super.prototype._$set_color.call(this,this._promptColor);
			this.promptColor=this._promptColor;
			if (this._text)
				_super.prototype._$set_text.call(this,(this._text==this._prompt)?value:this._text);
			else
			_super.prototype._$set_text.call(this,value);
			this._prompt=value;
		});

		// 因此 调用focus接口是无法都在移动平台立刻弹出键盘的
		/**
		*表示焦点是否在显示对象上。
		*/
		__getset(0,__proto,'focus',function(){
			return this._focus;
			},function(value){
			var input=this.nativeInput;
			if (this._focus!==value){
				if (value){
					input.target && (input.target.focus=false);
					input.target=this;
					this._setInputMethod();
					this._focusIn();
					}else {
					input.target=null;
					this._focusOut();
					input.blur();
					if (Render.isConchApp){
						input.setPos(-10000,-10000);
					}else if (Input.inputContainer.contains(input))
					Input.inputContainer.removeChild(input);
				}
			}
		});

		/**限制输入的字符。*/
		__getset(0,__proto,'restrict',function(){
			if (this._restrictPattern){
				return this._restrictPattern.source;
			}
			return "";
			},function(pattern){
			if (pattern){
				pattern="[^"+pattern+"]";
				if (pattern.indexOf("^^")>-1)
					pattern=pattern.replace("^^","");
				this._restrictPattern=new RegExp(pattern,"g");
			}else
			this._restrictPattern=null;
		});

		/**
		*是否可编辑。
		*/
		__getset(0,__proto,'editable',function(){
			return this._editable;
			},function(value){
			this._editable=value;
		});

		/**
		*设置输入提示符颜色。
		*/
		__getset(0,__proto,'promptColor',function(){
			return this._promptColor;
			},function(value){
			this._promptColor=value;
			if (!this._content)_super.prototype._$set_color.call(this,value);
		});

		/**
		*输入框类型为Input静态常量之一。
		*平台兼容性参见http://www.w3school.com.cn/html5/html_5_form_input_types.asp。
		*/
		__getset(0,__proto,'type',function(){
			return this._type;
			},function(value){
			if (value=="password")
				this._getCSSStyle().password=true;
			else
			this._getCSSStyle().password=false;
			this._type=value;
		});

		/**原生输入框 X 轴调整值，用来调整输入框坐标。
		*由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。*/
		__getset(0,__proto,'inputElementXAdjuster',function(){
			console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");
			return 0;
			},function(value){
			console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");
		});

		//[Deprecated(replacement="Input.type")]
		__getset(0,__proto,'asPassword',function(){
			return this._getCSSStyle().password;
			},function(value){
			this._getCSSStyle().password=value;
			this._type="password";
			console.warn("deprecated: 使用type=\"password\"替代设置asPassword, asPassword将在下次重大更新时删去");
			this.isChanged=true;
		});

		Input.__init__=function(){
			Input._createInputElement();
			if (Browser.onMobile)
				Render.canvas.addEventListener(Input.IOS_IFRAME ? "click" :"touchend",Input._popupInputMethod);
		}

		Input._popupInputMethod=function(e){
			if (!laya.display.Input.isInputting)return;
			var input=laya.display.Input.inputElement;
			input.focus();
		}

		Input._createInputElement=function(){
			Input._initInput(Input.area=Browser.createElement("textarea"));
			Input._initInput(Input.input=Browser.createElement("input"));
			Input.inputContainer=Browser.createElement("div");
			Input.inputContainer.style.position="absolute";
			Input.inputContainer.style.zIndex=1E5;
			Browser.container.appendChild(Input.inputContainer);
			Input.inputContainer.setPos=function (x,y){Input.inputContainer.style.left=x+'px';Input.inputContainer.style.top=y+'px';};
		}

		Input._initInput=function(input){
			var style=input.style;
			style.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;";
			style.resize='none';
			style.backgroundColor='transparent';
			style.border='none';
			style.outline='none';
			style.zIndex=1;
			input.addEventListener('input',Input._processInputting);
			input.addEventListener('mousemove',Input._stopEvent);
			input.addEventListener('mousedown',Input._stopEvent);
			input.addEventListener('touchmove',Input._stopEvent);
			if(!Render.isConchApp){
				input.setColor=function (color){input.style.color=color;};
				input.setFontSize=function (fontSize){input.style.fontSize=fontSize+'px';};
				input.setSize=function (w,h){input.style.width=w+'px';input.style.height=h+'px';};
			}
			input.setFontFace=function (fontFace){input.style.fontFamily=fontFace;};
		}

		Input._processInputting=function(e){
			var input=laya.display.Input.inputElement.target;
			if (!input)return;
			var value=laya.display.Input.inputElement.value;
			if (input._restrictPattern){
				value=value.replace(/\u2006|\x27/g,"");
				if (input._restrictPattern.test(value)){
					value=value.replace(input._restrictPattern,"");
					laya.display.Input.inputElement.value=value;
				}
			}
			input._text=value;
			input.event("input");
		}

		Input._stopEvent=function(e){
			if (e.type=='touchmove')
				e.preventDefault();
			e.stopPropagation && e.stopPropagation();
		}

		Input.TYPE_TEXT="text";
		Input.TYPE_PASSWORD="password";
		Input.TYPE_EMAIL="email";
		Input.TYPE_URL="url";
		Input.TYPE_NUMBER="number";
		Input.TYPE_RANGE="range";
		Input.TYPE_DATE="date";
		Input.TYPE_MONTH="month";
		Input.TYPE_WEEK="week";
		Input.TYPE_TIME="time";
		Input.TYPE_DATE_TIME="datetime";
		Input.TYPE_DATE_TIME_LOCAL="datetime-local";
		Input.TYPE_SEARCH="search";
		Input.input=null
		Input.area=null
		Input.inputElement=null
		Input.inputContainer=null
		Input.confirmButton=null
		Input.promptStyleDOM=null
		Input.inputHeight=45;
		Input.isInputting=false;
		__static(Input,
		['IOS_IFRAME',function(){return this.IOS_IFRAME=(Browser.onIOS && Browser.window.top !=Browser.window.self);}
		]);
		return Input;
	})(Text)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-9-29 上午11:17:35
	*/
	//class laya.debug.tools.debugUI.DButton extends laya.display.Text
	var DButton=(function(_super){
		function DButton(){
			DButton.__super.call(this);
			this.bgColor="#ffff00";
			this.wordWrap=false;
			this.mouseEnabled=true;
		}

		__class(DButton,'laya.debug.tools.debugUI.DButton',_super);
		return DButton;
	})(Text)


	/**
	*<code>Box</code> 类是一个控件容器类。
	*/
	//class laya.ui.Box extends laya.ui.Component
	var Box=(function(_super){
		function Box(){Box.__super.call(this);;
		};

		__class(Box,'laya.ui.Box',_super);
		var __proto=Box.prototype;
		Laya.imps(__proto,{"laya.ui.IBox":true})
		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			for (var name in value){
				var comp=this.getChildByName(name);
				if (comp)comp.dataSource=value[name];
				else if (this.hasOwnProperty(name))this[name]=value[name];
			}
		});

		return Box;
	})(Component)


	/**
	*<code>Button</code> 组件用来表示常用的多态按钮。 <code>Button</code> 组件可显示文本标签、图标或同时显示两者。 *
	*<p>可以是单态，两态和三态，默认三态(up,over,down)。</p>
	*
	*@example 以下示例代码，创建了一个 <code>Button</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Button;
		*import laya.utils.Handler;
		*public class Button_Example
		*{
			*public function Button_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load("resource/ui/button.png",Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*trace("资源加载完成！");
				*var button:Button=new Button("resource/ui/button.png","label");//创建一个 Button 类的实例对象 button ,并传入它的皮肤。
				*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。
				*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。
				*button.clickHandler=new Handler(this,onClickButton,[button]);//设置 button 的点击事件处理器。
				*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。
				*}
			*private function onClickButton(button:Button):void
			*{
				*trace("按钮button被点击了！");
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
	*Laya.loader.load("resource/ui/button.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*function loadComplete()
	*{
		*console.log("资源加载完成！");
		*var button=new laya.ui.Button("resource/ui/button.png","label");//创建一个 Button 类的实例对象 button ,传入它的皮肤skin和标签label。
		*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。
		*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。
		*button.clickHandler=laya.utils.Handler.create(this,onClickButton,[button],false);//设置 button 的点击事件处理函数。
		*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。
		*}
	*function onClickButton(button)
	*{
		*console.log("按钮被点击了。",button);
		*}
	*</listing>
	*<listing version="3.0">
	*import Button=laya.ui.Button;
	*import Handler=laya.utils.Handler;
	*class Button_Example{
		*constructor()
		*{
			*Laya.init(640,800);
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load("resource/ui/button.png",laya.utils.Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete()
		*{
			*var button:Button=new Button("resource/ui/button.png","label");//创建一个 Button 类的实例对象 button ,并传入它的皮肤。
			*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。
			*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。
			*button.clickHandler=new Handler(this,this.onClickButton,[button]);//设置 button 的点击事件处理器。
			*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。
			*}
		*private onClickButton(button:Button):void
		*{
			*console.log("按钮button被点击了！")
			*}
		*}
	*</listing>
	*/
	//class laya.ui.Button extends laya.ui.Component
	var Button=(function(_super){
		function Button(skin,label){
			this.toggle=false;
			this._bitmap=null;
			this._text=null;
			this._strokeColors=null;
			this._state=0;
			this._selected=false;
			this._skin=null;
			this._autoSize=true;
			this._sources=null;
			this._clickHandler=null;
			this._stateChanged=false;
			Button.__super.call(this);
			this._labelColors=Styles.buttonLabelColors;
			this._stateNum=Styles.buttonStateNum;
			(label===void 0)&& (label="");
			this.skin=skin;
			this.label=label;
		}

		__class(Button,'laya.ui.Button',_super);
		var __proto=Button.prototype;
		Laya.imps(__proto,{"laya.ui.ISelect":true})
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._bitmap && this._bitmap.destroy();
			this._text && this._text.destroy(destroyChild);
			this._bitmap=null;
			this._text=null;
			this._clickHandler=null;
			this._labelColors=this._sources=this._strokeColors=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.graphics=this._bitmap=new AutoBitmap();
		}

		/**@private */
		__proto.createText=function(){
			if (!this._text){
				this._text=new Text();
				this._text.overflow=Text.HIDDEN;
				this._text.align="center";
				this._text.valign="middle";
			}
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			if (this._mouseEnableState!==1){
				this.mouseEnabled=true;
				this._setBit(0x2,true);
			}
			this._createListener("mouseover",this,this.onMouse,null,false,false);
			this._createListener("mouseout",this,this.onMouse,null,false,false);
			this._createListener("mousedown",this,this.onMouse,null,false,false);
			this._createListener("mouseup",this,this.onMouse,null,false,false);
			this._createListener("click",this,this.onMouse,null,false,false);
		}

		/**
		*对象的 <code>Event.MOUSE_OVER、Event.MOUSE_OUT、Event.MOUSE_DOWN、Event.MOUSE_UP、Event.CLICK</code> 事件侦听处理函数。
		*@param e Event 对象。
		*/
		__proto.onMouse=function(e){
			if (this.toggle===false && this._selected)return;
			if (e.type==="click"){
				this.toggle && (this.selected=!this._selected);
				this._clickHandler && this._clickHandler.run();
				return;
			}
			!this._selected && (this.state=Button.stateMap[e.type]);
		}

		/**
		*@private
		*对象的资源切片发生改变。
		*/
		__proto.changeClips=function(){
			var img=Loader.getRes(this._skin);
			if (!img){
				console.log("lose skin",this._skin);
				return;
			};
			var width=img.sourceWidth;
			var height=img.sourceHeight / this._stateNum;
			img.$_GID || (img.$_GID=Utils.getGID());
			var key=img.$_GID+"-"+this._stateNum;
			var clips=AutoBitmap.getCache(key);
			if (clips)this._sources=clips;
			else {
				this._sources=[];
				if (this._stateNum===1){
					this._sources.push(img);
					}else {
					for (var i=0;i < this._stateNum;i++){
						this._sources.push(Texture.createFromTexture(img,0,height *i,width,height));
					}
				}
				AutoBitmap.setCache(key,this._sources);
			}
			if (this._autoSize){
				this._bitmap.width=this._width || width;
				this._bitmap.height=this._height || height;
				if (this._text){
					this._text.width=this._bitmap.width;
					this._text.height=this._bitmap.height;
				}
				}else {
				this._text && (this._text.x=width);
			}
		}

		/**
		*@private
		*改变对象的状态。
		*/
		__proto.changeState=function(){
			this._stateChanged=false;
			this.runCallLater(this.changeClips);
			var index=this._state < this._stateNum ? this._state :this._stateNum-1;
			this._sources && (this._bitmap.source=this._sources[index]);
			if (this.label){
				this._text.color=this._labelColors[index];
				if (this._strokeColors)this._text.strokeColor=this._strokeColors[index];
			}
		}

		/**@private */
		__proto._setStateChanged=function(){
			if (!this._stateChanged){
				this._stateChanged=true;
				this.callLater(this.changeState);
			}
		}

		/**
		*<p>描边颜色，以字符串表示。</p>
		*默认值为 "#000000"（黑色）;
		*@see laya.display.Text.strokeColor()
		*/
		__getset(0,__proto,'labelStrokeColor',function(){
			this.createText();
			return this._text.strokeColor;
			},function(value){
			this.createText();
			this._text.strokeColor=value
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'measureHeight',function(){
			this.runCallLater(this.changeClips);
			return this._text ? Math.max(this._bitmap.height,this._text.height):this._bitmap.height;
		});

		/**
		*<p>对象的皮肤资源地址。</p>
		*支持单态，两态和三态，用 <code>stateNum</code> 属性设置
		*<p>对象的皮肤地址，以字符串表示。</p>
		*@see #stateNum
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this.callLater(this.changeClips);
				this._setStateChanged();
			}
		});

		/**
		*对象的状态值。
		*@see #stateMap
		*/
		__getset(0,__proto,'state',function(){
			return this._state;
			},function(value){
			if (this._state !=value){
				this._state=value;
				this._setStateChanged();
			}
		});

		/**
		*按钮文本标签 <code>Text</code> 控件。
		*/
		__getset(0,__proto,'text',function(){
			this.createText();
			return this._text;
		});

		/**
		*<p>指定对象的状态值，以数字表示。</p>
		*<p>默认值为3。此值决定皮肤资源图片的切割方式。</p>
		*<p><b>取值：</b>
		*<li>1：单态。图片不做切割，按钮的皮肤状态只有一种。</li>
		*<li>2：两态。图片将以竖直方向被等比切割为2部分，从上向下，依次为
		*弹起状态皮肤、
		*按下和经过及选中状态皮肤。</li>
		*<li>3：三态。图片将以竖直方向被等比切割为2部分，从上向下，依次为
		*弹起状态皮肤、
		*经过状态皮肤、
		*按下和选中状态皮肤</li>
		*</p>
		*/
		__getset(0,__proto,'stateNum',function(){
			return this._stateNum;
			},function(value){
			if (this._stateNum !=value){
				this._stateNum=value < 1 ? 1 :value > 3 ? 3 :value;
				this.callLater(this.changeClips);
			}
		});

		/**
		*表示按钮各个状态下的描边颜色。
		*<p><b>格式:</b> "upColor,overColor,downColor,disableColor"。</p>
		*/
		__getset(0,__proto,'strokeColors',function(){
			return this._strokeColors ? this._strokeColors.join(","):"";
			},function(value){
			this._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String);
			this._setStateChanged();
		});

		/**
		*表示按钮各个状态下的文本颜色。
		*<p><b>格式:</b> "upColor,overColor,downColor,disableColor"。</p>
		*/
		__getset(0,__proto,'labelColors',function(){
			return this._labelColors.join(",");
			},function(value){
			this._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String);
			this._setStateChanged();
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'measureWidth',function(){
			this.runCallLater(this.changeClips);
			if (this._autoSize)return this._bitmap.width;
			this.runCallLater(this.changeState);
			return this._bitmap.width+(this._text ? this._text.width :0);
		});

		/**
		*按钮的文本内容。
		*/
		__getset(0,__proto,'label',function(){
			return this._text ? this._text.text :null;
			},function(value){
			if (!this._text && !value)return;
			this.createText();
			if (this._text.text !=value){
				value && !this._text.parent && this.addChild(this._text);
				this._text.text=(value+"").replace(/\\n/g,"\n");
				this._setStateChanged();
			}
		});

		/**
		*表示按钮的选中状态。
		*<p>如果值为true，表示该对象处于选中状态。否则该对象处于未选中状态。</p>
		*/
		__getset(0,__proto,'selected',function(){
			return this._selected;
			},function(value){
			if (this._selected !=value){
				this._selected=value;
				this.state=this._selected ? 2 :0;
				this.event("change");
			}
		});

		/**
		*表示按钮文本标签的边距。
		*<p><b>格式：</b>"上边距,右边距,下边距,左边距"。</p>
		*/
		__getset(0,__proto,'labelPadding',function(){
			this.createText();
			return this._text.padding.join(",");
			},function(value){
			this.createText();
			this._text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);
		});

		/**
		*表示按钮文本标签的字体大小。
		*@see laya.display.Text.fontSize()
		*/
		__getset(0,__proto,'labelSize',function(){
			this.createText();
			return this._text.fontSize;
			},function(value){
			this.createText();
			this._text.fontSize=value
		});

		/**
		*<p>描边宽度（以像素为单位）。</p>
		*默认值0，表示不描边。
		*@see laya.display.Text.stroke()
		*/
		__getset(0,__proto,'labelStroke',function(){
			this.createText();
			return this._text.stroke;
			},function(value){
			this.createText();
			this._text.stroke=value
		});

		/**
		*表示按钮文本标签是否为粗体字。
		*@see laya.display.Text.bold()
		*/
		__getset(0,__proto,'labelBold',function(){
			this.createText();
			return this._text.bold;
			},function(value){
			this.createText();
			this._text.bold=value;
		});

		/**
		*表示按钮文本标签的字体名称，以字符串形式表示。
		*@see laya.display.Text.font()
		*/
		__getset(0,__proto,'labelFont',function(){
			this.createText();
			return this._text.font;
			},function(value){
			this.createText();
			this._text.font=value;
		});

		/**标签对齐模式，默认为居中对齐。*/
		__getset(0,__proto,'labelAlign',function(){
			this.createText()
			return this._text.align;
			},function(value){
			this.createText()
			this._text.align=value;
		});

		/**
		*对象的点击事件处理器函数（无默认参数）。
		*/
		__getset(0,__proto,'clickHandler',function(){
			return this._clickHandler;
			},function(value){
			this._clickHandler=value;
		});

		/**
		*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			if (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");
			return null;
			},function(value){
			this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			if (this._autoSize){
				this._bitmap.width=value;
				this._text && (this._text.width=value);
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			if (this._autoSize){
				this._bitmap.height=value;
				this._text && (this._text.height=value);
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='number')|| (typeof value=='string'))this.label=value+"";
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**图标x,y偏移，格式：100,100*/
		__getset(0,__proto,'iconOffset',function(){
			return this._bitmap._offset ? this._bitmap._offset.join(","):null;
			},function(value){
			if (value)this._bitmap._offset=UIUtils.fillArray([1,1],value,Number);
			else this._bitmap._offset=[];
		});

		__static(Button,
		['stateMap',function(){return this.stateMap={"mouseup":0,"mouseover":1,"mousedown":2,"mouseout":0};}
		]);
		return Button;
	})(Component)


	/**
	*<p> <code>Clip</code> 类是位图切片动画。</p>
	*<p> <code>Clip</code> 可将一张图片，按横向分割数量 <code>clipX</code> 、竖向分割数量 <code>clipY</code> ，
	*或横向分割每个切片的宽度 <code>clipWidth</code> 、竖向分割每个切片的高度 <code>clipHeight</code> ，
	*从左向右，从上到下，分割组合为一个切片动画。</p>
	*Image和Clip组件是唯一支持异步加载的两个组件，比如clip.skin="abc/xxx.png"，其他UI组件均不支持异步加载。
	*
	*@example 以下示例代码，创建了一个 <code>Clip</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Clip;
		*public class Clip_Example
		*{
			*private var clip:Clip;
			*public function Clip_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*onInit();
				*}
			*private function onInit():void
			*{
				*clip=new Clip("resource/ui/clip_num.png",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。
				*clip.autoPlay=true;//设置 clip 动画自动播放。
				*clip.interval=100;//设置 clip 动画的播放时间间隔。
				*clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。
				*clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。
				*clip.on(Event.CLICK,this,onClick);//给 clip 添加点击事件函数侦听。
				*Laya.stage.addChild(clip);//将此 clip 对象添加到显示列表。
				*}
			*private function onClick():void
			*{
				*trace("clip 的点击事件侦听处理函数。clip.total="+clip.total);
				*if (clip.isPlaying==true)
				*{
					*clip.stop();//停止动画。
					*}else {
					*clip.play();//播放动画。
					*}
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var clip;
	*Laya.loader.load("resource/ui/clip_num.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*function loadComplete(){
		*console.log("资源加载完成！");
		*clip=new laya.ui.Clip("resource/ui/clip_num.png",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。
		*clip.autoPlay=true;//设置 clip 动画自动播放。
		*clip.interval=100;//设置 clip 动画的播放时间间隔。
		*clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。
		*clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。
		*clip.on(Event.CLICK,this,onClick);//给 clip 添加点击事件函数侦听。
		*Laya.stage.addChild(clip);//将此 clip 对象添加到显示列表。
		*}
	*function onClick()
	*{
		*console.log("clip 的点击事件侦听处理函数。");
		*if(clip.isPlaying==true)
		*{
			*clip.stop();
			*}else {
			*clip.play();
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*import Clip=laya.ui.Clip;
	*import Handler=laya.utils.Handler;
	*class Clip_Example {
		*private clip:Clip;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.onInit();
			*}
		*private onInit():void {
			*this.clip=new Clip("resource/ui/clip_num.png",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。
			*this.clip.autoPlay=true;//设置 clip 动画自动播放。
			*this.clip.interval=100;//设置 clip 动画的播放时间间隔。
			*this.clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。
			*this.clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。
			*this.clip.on(laya.events.Event.CLICK,this,this.onClick);//给 clip 添加点击事件函数侦听。
			*Laya.stage.addChild(this.clip);//将此 clip 对象添加到显示列表。
			*}
		*private onClick():void {
			*console.log("clip 的点击事件侦听处理函数。clip.total="+this.clip.total);
			*if (this.clip.isPlaying==true){
				*this.clip.stop();//停止动画。
				*}else {
				*this.clip.play();//播放动画。
				*}
			*}
		*}
	*
	*</listing>
	*/
	//class laya.ui.Clip extends laya.ui.Component
	var Clip=(function(_super){
		function Clip(url,clipX,clipY){
			this._sources=null;
			this._bitmap=null;
			this._skin=null;
			this._clipX=1;
			this._clipY=1;
			this._clipWidth=0;
			this._clipHeight=0;
			this._autoPlay=false;
			this._interval=50;
			this._complete=null;
			this._isPlaying=false;
			this._index=0;
			this._clipChanged=false;
			this._group=null;
			Clip.__super.call(this);
			(clipX===void 0)&& (clipX=1);
			(clipY===void 0)&& (clipY=1);
			this._clipX=clipX;
			this._clipY=clipY;
			this.skin=url;
		}

		__class(Clip,'laya.ui.Clip',_super);
		var __proto=Clip.prototype;
		/**@inheritDoc */
		__proto.destroy=function(clearFromCache){
			(clearFromCache===void 0)&& (clearFromCache=false);
			_super.prototype.destroy.call(this,true);
			this._bitmap && this._bitmap.destroy();
			this._bitmap=null;
			this._sources=null;
		}

		/**
		*销毁对象并释放加载的皮肤资源。
		*/
		__proto.dispose=function(){
			this.destroy(true);
			Laya.loader.clearRes(this._skin);
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.graphics=this._bitmap=new AutoBitmap();
		}

		/**@private */
		__proto._onDisplay=function(e){
			if (this._isPlaying){
				if (this._displayedInStage)this.play();
				else this.stop();
				}else if (this._autoPlay){
				this.play();
			}
		}

		/**
		*@private
		*改变切片的资源、切片的大小。
		*/
		__proto.changeClip=function(){
			this._clipChanged=false;
			if (!this._skin)return;
			var img=Loader.getRes(this._skin);
			if (img){
				this.loadComplete(this._skin,img);
				}else {
				Laya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]));
			}
		}

		/**
		*@private
		*加载切片图片资源完成函数。
		*@param url 资源地址。
		*@param img 纹理。
		*/
		__proto.loadComplete=function(url,img){
			if (url===this._skin && img){
				var w=this._clipWidth || Math.ceil(img.sourceWidth / this._clipX);
				var h=this._clipHeight || Math.ceil(img.sourceHeight / this._clipY);
				var key=this._skin+w+h;
				var clips=AutoBitmap.getCache(key);
				if (clips)this._sources=clips;
				else {
					this._sources=[];
					for (var i=0;i < this._clipY;i++){
						for (var j=0;j < this._clipX;j++){
							this._sources.push(Texture.createFromTexture(img,w *j,h *i,w,h));
						}
					}
					AutoBitmap.setCache(key,this._sources);
				}
				this.index=this._index;
				this.event("loaded");
				this.onCompResize();
			}
		}

		/**
		*播放动画。
		*/
		__proto.play=function(){
			this._isPlaying=true;
			this.index=0;
			this._index++;
			Laya.timer.loop(this.interval,this,this._loop);
			this.on("display",this,this._onDisplay);
			this.on("undisplay",this,this._onDisplay);
		}

		/**
		*@private
		*/
		__proto._loop=function(){
			if (this._style.visible && this._sources){
				this.index=this._index,this._index++;
				this._index >=this._sources.length && (this._index=0);
			}
		}

		/**
		*停止动画。
		*/
		__proto.stop=function(){
			this._isPlaying=false;
			Laya.timer.clear(this,this._loop);
		}

		/**@private */
		__proto._setClipChanged=function(){
			if (!this._clipChanged){
				this._clipChanged=true;
				this.callLater(this.changeClip);
			}
		}

		/**
		*表示动画播放间隔时间(以毫秒为单位)。
		*/
		__getset(0,__proto,'interval',function(){
			return this._interval;
			},function(value){
			if (this._interval !=value){
				this._interval=value;
				if (this._isPlaying)this.play();
			}
		});

		/**
		*@copy laya.ui.Image#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				if (value){
					this._setClipChanged()
					}else {
					this._bitmap.source=null;
				}
			}
		});

		/**
		*源数据。
		*/
		__getset(0,__proto,'sources',function(){
			return this._sources;
			},function(value){
			this._sources=value;
			this.index=this._index;
			this.event("loaded");
		});

		/**X轴（横向）切片数量。*/
		__getset(0,__proto,'clipX',function(){
			return this._clipX;
			},function(value){
			this._clipX=value;
			this._setClipChanged()
		});

		/**Y轴(竖向)切片数量。*/
		__getset(0,__proto,'clipY',function(){
			return this._clipY;
			},function(value){
			this._clipY=value;
			this._setClipChanged()
		});

		/**
		*切片动画的总帧数。
		*/
		__getset(0,__proto,'total',function(){
			this.runCallLater(this.changeClip);
			return this._sources ? this._sources.length :0;
		});

		/**
		*横向分割时每个切片的宽度，与 <code>clipX</code> 同时设置时优先级高于 <code>clipX</code> 。
		*/
		__getset(0,__proto,'clipWidth',function(){
			return this._clipWidth;
			},function(value){
			this._clipWidth=value;
			this._setClipChanged()
		});

		/**
		*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			if (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");
			return null;
			},function(value){
			this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);
		});

		/**
		*资源分组。
		*/
		__getset(0,__proto,'group',function(){
			return this._group;
			},function(value){
			if (value && this._skin)Loader.setGroup(this._skin,value);
			this._group=value;
		});

		/**
		*竖向分割时每个切片的高度，与 <code>clipY</code> 同时设置时优先级高于 <code>clipY</code> 。
		*/
		__getset(0,__proto,'clipHeight',function(){
			return this._clipHeight;
			},function(value){
			this._clipHeight=value;
			this._setClipChanged()
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._bitmap.width=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._bitmap.height=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			this.runCallLater(this.changeClip);
			return this._bitmap.width;
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			this.runCallLater(this.changeClip);
			return this._bitmap.height;
		});

		/**
		*当前帧索引。
		*/
		__getset(0,__proto,'index',function(){
			return this._index;
			},function(value){
			this._index=value;
			this._bitmap && this._sources && (this._bitmap.source=this._sources[value]);
			this.event("change");
		});

		/**
		*表示是否自动播放动画，若自动播放值为true,否则值为false;
		*<p>可控制切片动画的播放、停止。</p>
		*/
		__getset(0,__proto,'autoPlay',function(){
			return this._autoPlay;
			},function(value){
			if (this._autoPlay !=value){
				this._autoPlay=value;
				value ? this.play():this.stop();
			}
		});

		/**
		*表示动画的当前播放状态。
		*如果动画正在播放中，则为true，否则为flash。
		*/
		__getset(0,__proto,'isPlaying',function(){
			return this._isPlaying;
			},function(value){
			this._isPlaying=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.index=parseInt(value);
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*<code>AutoBitmap</code> 位图实例。
		*/
		__getset(0,__proto,'bitmap',function(){
			return this._bitmap;
		});

		return Clip;
	})(Component)


	/**
	*<code>ColorPicker</code> 组件将显示包含多个颜色样本的列表，用户可以从中选择颜色。
	*
	*@example 以下示例代码，创建了一个 <code>ColorPicker</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.ColorPicker;
		*import laya.utils.Handler;
		*public class ColorPicker_Example
		*{
			*public function ColorPicker_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load("resource/ui/color.png",Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*trace("资源加载完成！");
				*var colorPicket:ColorPicker=new ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。
				*colorPicket.skin="resource/ui/color.png";//设置 colorPicket 的皮肤。
				*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。
				*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。
				*colorPicket.changeHandler=new Handler(this,onChangeColor,[colorPicket]);//设置 colorPicket 的颜色改变回调函数。
				*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。
				*}
			*private function onChangeColor(colorPicket:ColorPicker):void
			*{
				*trace("当前选择的颜色： "+colorPicket.selectedColor);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load("resource/ui/color.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*function loadComplete()
	*{
		*console.log("资源加载完成！");
		*var colorPicket=new laya.ui.ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。
		*colorPicket.skin="resource/ui/color.png";//设置 colorPicket 的皮肤。
		*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。
		*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。
		*colorPicket.changeHandler=laya.utils.Handler.create(this,onChangeColor,[colorPicket],false);//设置 colorPicket 的颜色改变回调函数。
		*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。
		*}
	*function onChangeColor(colorPicket)
	*{
		*console.log("当前选择的颜色： "+colorPicket.selectedColor);
		*}
	*</listing>
	*<listing version="3.0">
	*import ColorPicker=laya.ui.ColorPicker;
	*import Handler=laya.utils.Handler;
	*class ColorPicker_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load("resource/ui/color.png",Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*console.log("资源加载完成！");
			*var colorPicket:ColorPicker=new ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。
			*colorPicket.skin="resource/ui/color.png";//设置 colorPicket 的皮肤。
			*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。
			*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。
			*colorPicket.changeHandler=new Handler(this,this.onChangeColor,[colorPicket]);//设置 colorPicket 的颜色改变回调函数。
			*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。
			*}
		*private onChangeColor(colorPicket:ColorPicker):void {
			*console.log("当前选择的颜色： "+colorPicket.selectedColor);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.ColorPicker extends laya.ui.Component
	var ColorPicker=(function(_super){
		function ColorPicker(){
			this.changeHandler=null;
			this._gridSize=11;
			this._bgColor="#ffffff";
			this._borderColor="#000000";
			this._inputColor="#000000";
			this._inputBgColor="#efefef";
			this._colorPanel=null;
			this._colorTiles=null;
			this._colorBlock=null;
			this._colorInput=null;
			this._colorButton=null;
			this._colors=[];
			this._selectedColor="#000000";
			this._panelChanged=false;
			ColorPicker.__super.call(this);
		}

		__class(ColorPicker,'laya.ui.ColorPicker',_super);
		var __proto=ColorPicker.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._colorPanel && this._colorPanel.destroy(destroyChild);
			this._colorButton && this._colorButton.destroy(destroyChild);
			this._colorPanel=null;
			this._colorTiles=null;
			this._colorBlock=null;
			this._colorInput=null;
			this._colorButton=null;
			this._colors=null;
			this.changeHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._colorButton=new Button());
			this._colorPanel=new Box();
			this._colorPanel.size(230,166);
			this._colorPanel.addChild(this._colorTiles=new Sprite());
			this._colorPanel.addChild(this._colorBlock=new Sprite());
			this._colorPanel.addChild(this._colorInput=new Input());
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			this._colorButton.on("click",this,this.onColorButtonClick);
			this._colorBlock.pos(5,5);
			this._colorInput.pos(60,5);
			this._colorInput.size(60,20);
			this._colorInput.on("change",this,this.onColorInputChange);
			this._colorInput.on("keydown",this,this.onColorFieldKeyDown);
			this._colorTiles.pos(5,30);
			this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove);
			this._colorTiles.on("click",this,this.onColorTilesClick);
			this._colorTiles.size(20 *this._gridSize,12 *this._gridSize);
			this._colorPanel.on("mousedown",this,this.onPanelMouseDown);
			this.bgColor=this._bgColor;
		}

		__proto.onPanelMouseDown=function(e){
			e.stopPropagation();
		}

		/**
		*改变颜色样本列表面板。
		*/
		__proto.changePanel=function(){
			this._panelChanged=false;
			var g=this._colorPanel.graphics;
			g.clear();
			g.drawRect(0,0,230,166,this._bgColor,this._borderColor);
			this.drawBlock(this._selectedColor);
			this._colorInput.borderColor=this._borderColor;
			this._colorInput.bgColor=this._inputBgColor;
			this._colorInput.color=this._inputColor;
			g=this._colorTiles.graphics;
			g.clear();
			var mainColors=[0x000000,0x333333,0x666666,0x999999,0xCCCCCC,0xFFFFFF,0xFF0000,0x00FF00,0x0000FF,0xFFFF00,0x00FFFF,0xFF00FF];
			for (var i=0;i < 12;i++){
				for (var j=0;j < 20;j++){
					var color=0;
					if (j===0)color=mainColors[i];
					else if (j===1)color=0x000000;
					else color=(((i *3+j / 6)% 3 << 0)+((i / 6)<< 0)*3)*0x33 << 16 | j % 6 *0x33 << 8 | (i << 0)% 6 *0x33;
					var strColor=UIUtils.toColor(color);
					this._colors.push(strColor);
					var x=j *this._gridSize;
					var y=i *this._gridSize;
					g.drawRect(x,y,this._gridSize,this._gridSize,strColor,"#000000");
				}
			}
		}

		/**
		*颜色样本列表面板的显示按钮的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.onColorButtonClick=function(e){
			if (this._colorPanel.parent)this.close();
			else this.open();
		}

		/**
		*打开颜色样本列表面板。
		*/
		__proto.open=function(){
			var p=this.localToGlobal(new Point());
			var px=p.x+this._colorPanel.width <=Laya.stage.width ? p.x :Laya.stage.width-this._colorPanel.width;
			var py=p.y+this._colorButton.height;
			py=py+this._colorPanel.height <=Laya.stage.height ? py :p.y-this._colorPanel.height;
			this._colorPanel.pos(px,py);
			Laya._currentStage.addChild(this._colorPanel);
			Laya.stage.on("mousedown",this,this.removeColorBox);
		}

		/**
		*关闭颜色样本列表面板。
		*/
		__proto.close=function(){
			Laya.stage.off("mousedown",this,this.removeColorBox);
			this._colorPanel.removeSelf();
		}

		/**
		*舞台的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.removeColorBox=function(e){
			this.close();
		}

		/**
		*小格子色块的 <code>Event.KEY_DOWN</code> 事件侦听处理函数。
		*/
		__proto.onColorFieldKeyDown=function(e){
			if (e.keyCode==13){
				if (this._colorInput.text)this.selectedColor=this._colorInput.text;
				else this.selectedColor=null;
				this.close();
				e.stopPropagation();
			}
		}

		/**
		*颜色值输入框 <code>Event.CHANGE</code> 事件侦听处理函数。
		*/
		__proto.onColorInputChange=function(e){
			if (this._colorInput.text)this.drawBlock(this._colorInput.text);
			else this.drawBlock("#FFFFFF");
		}

		/**
		*小格子色块的 <code>Event.CLICK</code> 事件侦听处理函数。
		*/
		__proto.onColorTilesClick=function(e){
			this.selectedColor=this.getColorByMouse();
			this.close();
		}

		/**
		*@private
		*小格子色块的 <code>Event.MOUSE_MOVE</code> 事件侦听处理函数。
		*/
		__proto.onColorTilesMouseMove=function(e){
			this._colorInput.focus=false;
			var color=this.getColorByMouse();
			this._colorInput.text=color;
			this.drawBlock(color);
		}

		/**
		*通过鼠标位置取对应的颜色块的颜色值。
		*/
		__proto.getColorByMouse=function(){
			var point=this._colorTiles.getMousePoint();
			var x=Math.floor(point.x / this._gridSize);
			var y=Math.floor(point.y / this._gridSize);
			return this._colors[y *20+x];
		}

		/**
		*绘制颜色块。
		*@param color 需要绘制的颜色块的颜色值。
		*/
		__proto.drawBlock=function(color){
			var g=this._colorBlock.graphics;
			g.clear();
			var showColor=color ? color :"#ffffff";
			g.drawRect(0,0,50,20,showColor,this._borderColor);
			color || g.drawLine(0,0,50,20,"#ff0000");
		}

		/**
		*改变颜色。
		*/
		__proto.changeColor=function(){
			var g=this.graphics;
			g.clear();
			var showColor=this._selectedColor || "#000000";
			g.drawRect(0,0,this._colorButton.width,this._colorButton.height,showColor);
		}

		/**@private */
		__proto._setPanelChanged=function(){
			if (!this._panelChanged){
				this._panelChanged=true;
				this.callLater(this.changePanel);
			}
		}

		/**
		*表示颜色输入框的背景颜色值。
		*/
		__getset(0,__proto,'inputBgColor',function(){
			return this._inputBgColor;
			},function(value){
			this._inputBgColor=value;
			this._setPanelChanged();
		});

		/**
		*表示选择的颜色值。
		*/
		__getset(0,__proto,'selectedColor',function(){
			return this._selectedColor;
			},function(value){
			if (this._selectedColor !=value){
				this._selectedColor=this._colorInput.text=value;
				this.drawBlock(value);
				this.changeColor();
				this.changeHandler && this.changeHandler.runWith(this._selectedColor);
				this.event("change",Event.EMPTY.setTo("change",this,this));
			}
		});

		/**
		*@copy laya.ui.Button#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._colorButton.skin;
			},function(value){
			this._colorButton.skin=value;
			this.changeColor();
		});

		/**
		*表示颜色样本列表面板的背景颜色值。
		*/
		__getset(0,__proto,'bgColor',function(){
			return this._bgColor;
			},function(value){
			this._bgColor=value;
			this._setPanelChanged();
		});

		/**
		*表示颜色样本列表面板的边框颜色值。
		*/
		__getset(0,__proto,'borderColor',function(){
			return this._borderColor;
			},function(value){
			this._borderColor=value;
			this._setPanelChanged();
		});

		/**
		*表示颜色样本列表面板选择或输入的颜色值。
		*/
		__getset(0,__proto,'inputColor',function(){
			return this._inputColor;
			},function(value){
			this._inputColor=value;
			this._setPanelChanged();
		});

		return ColorPicker;
	})(Component)


	/**
	*<code>ComboBox</code> 组件包含一个下拉列表，用户可以从该列表中选择单个值。
	*
	*@example 以下示例代码，创建了一个 <code>ComboBox</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.ComboBox;
		*import laya.utils.Handler;
		*public class ComboBox_Example
		*{
			*public function ComboBox_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load("resource/ui/button.png",Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*trace("资源加载完成！");
				*var comboBox:ComboBox=new ComboBox("resource/ui/button.png","item0,item1,item2,item3,item4,item5");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。
				*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
				*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
				*comboBox.selectHandler=new Handler(this,onSelect);//设置 comboBox 选择项改变时执行的处理器。
				*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。
				*}
			*private function onSelect(index:int):void
			*{
				*trace("当前选中的项对象索引： ",index);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高。
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
	*Laya.loader.load("resource/ui/button.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*function loadComplete(){
		*console.log("资源加载完成！");
		*var comboBox=new laya.ui.ComboBox("resource/ui/button.png","item0,item1,item2,item3,item4,item5");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。
		*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
		*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
		*comboBox.selectHandler=new laya.utils.Handler(this,onSelect);//设置 comboBox 选择项改变时执行的处理器。
		*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。
		*}
	*function onSelect(index)
	*{
		*console.log("当前选中的项对象索引： ",index);
		*}
	*</listing>
	*<listing version="3.0">
	*import ComboBox=laya.ui.ComboBox;
	*import Handler=laya.utils.Handler;
	*class ComboBox_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load("resource/ui/button.png",Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*console.log("资源加载完成！");
			*var comboBox:ComboBox=new ComboBox("resource/ui/button.png","item0,item1,item2,item3,item4,item5");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。
			*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
			*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。
			*comboBox.selectHandler=new Handler(this,this.onSelect);//设置 comboBox 选择项改变时执行的处理器。
			*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。
			*}
		*private onSelect(index:number):void {
			*console.log("当前选中的项对象索引： ",index);
			*}
		*}
	*
	*</listing>
	*/
	//class laya.ui.ComboBox extends laya.ui.Component
	var ComboBox=(function(_super){
		function ComboBox(skin,labels){
			this._visibleNum=6;
			this._button=null;
			this._list=null;
			this._isOpen=false;
			this._scrollBar=null;
			this._itemSize=12;
			this._labels=[];
			this._selectedIndex=-1;
			this._selectHandler=null;
			this._itemHeight=NaN;
			this._listHeight=NaN;
			this._listChanged=false;
			this._itemChanged=false;
			this._scrollBarSkin=null;
			this.itemRender=null;
			ComboBox.__super.call(this);
			this._itemColors=Styles.comboBoxItemColors;
			this.skin=skin;
			this.labels=labels;
		}

		__class(ComboBox,'laya.ui.ComboBox',_super);
		var __proto=ComboBox.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._button && this._button.destroy(destroyChild);
			this._list && this._list.destroy(destroyChild);
			this._scrollBar && this._scrollBar.destroy(destroyChild);
			this._button=null;
			this._list=null;
			this._scrollBar=null;
			this._itemColors=null;
			this._labels=null;
			this._selectHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._button=new Button());
			this._button.text.align="left";
			this._button.labelPadding="0,0,0,5";
			this._button.on("mousedown",this,this.onButtonMouseDown);
		}

		__proto._createList=function(){
			this._list=new List();
			this._list.selectEnable=true;
			this._list.on("mousedown",this,this.onListDown);
			this._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,false);
			if (this._scrollBarSkin){
				this._list.addChild(this._scrollBar=new VScrollBar());
				this._scrollBar.skin=this._scrollBarSkin;
				this._scrollBar.name="scrollBar";
				this._scrollBar.y=1;
				this._scrollBar.on("mousedown",this,this.onScrollBarDown);
			}
		}

		/**
		*@private
		*/
		__proto.onListDown=function(e){
			e.stopPropagation();
		}

		__proto.onScrollBarDown=function(e){
			e.stopPropagation();
		}

		__proto.onButtonMouseDown=function(e){
			this.callLater(this.switchTo,[!this._isOpen]);
		}

		/**
		*@private
		*/
		__proto.changeList=function(){
			this._listChanged=false;
			var labelWidth=this.width-2;
			var labelColor=this._itemColors[2];
			this._itemHeight=this._itemSize+6;
			this._list.itemRender=this.itemRender || {type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:labelWidth,height:this._itemHeight,fontSize:this._itemSize,color:labelColor}}]};
			this._list.repeatY=this._visibleNum;
			if (this._scrollBar)this._scrollBar.x=this.width-this._scrollBar.width-1;
			this._list.refresh();
		}

		/**
		*@private
		*下拉列表的鼠标事件响应函数。
		*/
		__proto.onlistItemMouse=function(e,index){
			var type=e.type;
			if (type==="mouseover" || type==="mouseout"){
				var box=this._list.getCell(index);
				if (!box)return;
				var label=box.getChildByName("label");
				if (label){
					if (type==="mouseover"){
						label.bgColor=this._itemColors[0];
						label.color=this._itemColors[1];
						}else {
						label.bgColor=null;
						label.color=this._itemColors[2];
					}
				}
				}else if (type==="click"){
				this.selectedIndex=index;
				this.isOpen=false;
			}
		}

		/**
		*@private
		*/
		__proto.switchTo=function(value){
			this.isOpen=value;
		}

		/**
		*更改下拉列表的打开状态。
		*/
		__proto.changeOpen=function(){
			this.isOpen=!this._isOpen;
		}

		/**
		*更改下拉列表。
		*/
		__proto.changeItem=function(){
			this._itemChanged=false;
			this.runCallLater(this.changeList);
			this._listHeight=this._labels.length > 0 ? Math.min(this._visibleNum,this._labels.length)*this._itemHeight :this._itemHeight;
			if (this._scrollBar)this._scrollBar.height=this._listHeight-2;
			var g=this._list.graphics;
			g.clear();
			g.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);
			var a=this._list.array || [];
			a.length=0;
			for (var i=0,n=this._labels.length;i < n;i++){
				a.push({label:this._labels[i]});
			}
			this._list.array=a;
			if (this._visibleNum > a.length){
				this._list.height=this._listHeight;
				}else {
				this._list.height=0;
			}
		}

		__proto.changeSelected=function(){
			this._button.label=this.selectedLabel;
		}

		/**
		*关闭下拉列表。
		*/
		__proto.removeList=function(e){
			this.isOpen=false;
		}

		/**
		*表示选择的下拉列表项的索引。
		*/
		__getset(0,__proto,'selectedIndex',function(){
			return this._selectedIndex;
			},function(value){
			if (this._selectedIndex !=value){
				this._selectedIndex=value;
				if (this._labels.length > 0)this.changeSelected();
				else this.callLater(this.changeSelected);
				this.event("change",[Event.EMPTY.setTo("change",this,this)]);
				this._selectHandler && this._selectHandler.runWith(this._selectedIndex);
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			return this._button.height;
		});

		/**
		*@copy laya.ui.Button#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._button.skin;
			},function(value){
			if (this._button.skin !=value){
				this._button.skin=value;
				this._listChanged=true;
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			return this._button.width;
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._button.width=this._width;
			this._itemChanged=true;
			this._listChanged=true;
		});

		/**
		*表示选择的下拉列表项的的标签。
		*/
		__getset(0,__proto,'selectedLabel',function(){
			return this._selectedIndex >-1 && this._selectedIndex < this._labels.length ? this._labels[this._selectedIndex] :null;
			},function(value){
			this.selectedIndex=this._labels.indexOf(value);
		});

		/**
		*标签集合字符串。
		*/
		__getset(0,__proto,'labels',function(){
			return this._labels.join(",");
			},function(value){
			if (this._labels.length > 0)this.selectedIndex=-1;
			if (value)this._labels=value.split(",");
			else this._labels.length=0;
			this._itemChanged=true;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._button.height=this._height;
		});

		/**
		*改变下拉列表的选择项时执行的处理器(默认返回参数index:int)。
		*/
		__getset(0,__proto,'selectHandler',function(){
			return this._selectHandler;
			},function(value){
			this._selectHandler=value;
		});

		/**
		*获取或设置没有滚动条的下拉列表中可显示的最大行数。
		*/
		__getset(0,__proto,'visibleNum',function(){
			return this._visibleNum;
			},function(value){
			this._visibleNum=value;
			this._listChanged=true;
		});

		/**
		*表示按钮文本标签是否为粗体字。
		*@see laya.display.Text#bold
		*/
		__getset(0,__proto,'labelBold',function(){
			return this._button.text.bold;
			},function(value){
			this._button.text.bold=value
		});

		/**
		*下拉列表项颜色。
		*<p><b>格式：</b>"悬停或被选中时背景颜色,悬停或被选中时标签颜色,标签颜色,边框颜色,背景颜色"</p>
		*/
		__getset(0,__proto,'itemColors',function(){
			return String(this._itemColors)
			},function(value){
			this._itemColors=UIUtils.fillArray(this._itemColors,value,String);
			this._listChanged=true;
		});

		/**
		*下拉列表项标签的字体大小。
		*/
		__getset(0,__proto,'itemSize',function(){
			return this._itemSize;
			},function(value){
			this._itemSize=value;
			this._listChanged=true;
		});

		/**
		*获取对 <code>ComboBox</code> 组件所包含的 <code>VScrollBar</code> 滚动条组件的引用。
		*/
		__getset(0,__proto,'scrollBar',function(){
			return this._scrollBar;
		});

		/**
		*表示下拉列表的打开状态。
		*/
		__getset(0,__proto,'isOpen',function(){
			return this._isOpen;
			},function(value){
			if (this._isOpen !=value){
				this._isOpen=value;
				this._button.selected=this._isOpen;
				if (this._isOpen){
					this._list || this._createList();
					this._listChanged && this.changeList();
					this._itemChanged && this.changeItem();
					var p=this.localToGlobal(Point.TEMP.setTo(0,0));
					var py=p.y+this._button.height;
					py=py+this._listHeight <=Laya.stage.height ? py :p.y-this._listHeight;
					this._list.pos(p.x,py);
					Laya._currentStage.addChild(this._list);
					Laya.stage.once("mousedown",this,this.removeList);
					this._list.selectedIndex=this._selectedIndex;
					}else {
					this._list && this._list.removeSelf();
				}
			}
		});

		/**
		*滚动条皮肤。
		*/
		__getset(0,__proto,'scrollBarSkin',function(){
			return this._scrollBarSkin;
			},function(value){
			this._scrollBarSkin=value;
		});

		/**
		*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this._button.sizeGrid;
			},function(value){
			this._button.sizeGrid=value;
		});

		/**
		*获取对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的引用。
		*/
		__getset(0,__proto,'button',function(){
			return this._button;
		});

		/**
		*获取对 <code>ComboBox</code> 组件所包含的 <code>List</code> 列表组件的引用。
		*/
		__getset(0,__proto,'list',function(){
			this._list || this._createList();
			return this._list;
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);
			else if ((value instanceof Array))this.labels=(value).join(",");
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的文本标签颜色。
		*<p><b>格式：</b>upColor,overColor,downColor,disableColor</p>
		*/
		__getset(0,__proto,'labelColors',function(){
			return this._button.labelColors;
			},function(value){
			if (this._button.labelColors !=value){
				this._button.labelColors=value;
			}
		});

		/**
		*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的文本边距。
		*<p><b>格式：</b>上边距,右边距,下边距,左边距</p>
		*/
		__getset(0,__proto,'labelPadding',function(){
			return this._button.text.padding.join(",");
			},function(value){
			this._button.text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);
		});

		/**
		*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的标签字体大小。
		*/
		__getset(0,__proto,'labelSize',function(){
			return this._button.text.fontSize;
			},function(value){
			this._button.text.fontSize=value
		});

		/**
		*表示按钮文本标签的字体名称，以字符串形式表示。
		*@see laya.display.Text#font
		*/
		__getset(0,__proto,'labelFont',function(){
			return this._button.text.font;
			},function(value){
			this._button.text.font=value
		});

		/**
		*表示按钮的状态值。
		*@see laya.ui.Button#stateNum
		*/
		__getset(0,__proto,'stateNum',function(){
			return this._button.stateNum;
			},function(value){
			this._button.stateNum=value
		});

		return ComboBox;
	})(Component)


	/**
	*<code>ScrollBar</code> 组件是一个滚动条组件。
	*<p>当数据太多以至于显示区域无法容纳时，最终用户可以使用 <code>ScrollBar</code> 组件控制所显示的数据部分。</p>
	*<p> 滚动条由四部分组成：两个箭头按钮、一个轨道和一个滑块。 </p> *
	*
	*@see laya.ui.VScrollBar
	*@see laya.ui.HScrollBar
	*/
	//class laya.ui.ScrollBar extends laya.ui.Component
	var ScrollBar=(function(_super){
		function ScrollBar(skin){
			this.rollRatio=0.95;
			this.changeHandler=null;
			this.scaleBar=true;
			this.autoHide=false;
			this.elasticDistance=0;
			this.elasticBackTime=500;
			this.upButton=null;
			this.downButton=null;
			this.slider=null;
			this._scrollSize=1;
			this._skin=null;
			this._thumbPercent=1;
			this._target=null;
			this._lastPoint=null;
			this._lastOffset=0;
			this._checkElastic=false;
			this._isElastic=false;
			this._value=NaN;
			this._hide=false;
			this._clickOnly=true;
			this._offsets=null;
			ScrollBar.__super.call(this);
			this._showButtons=UIConfig.showButtons;
			this._touchScrollEnable=UIConfig.touchScrollEnable;
			this._mouseWheelEnable=UIConfig.mouseWheelEnable;
			this.skin=skin;
			this.max=1;
		}

		__class(ScrollBar,'laya.ui.ScrollBar',_super);
		var __proto=ScrollBar.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			this.stopScroll();
			_super.prototype.destroy.call(this,destroyChild);
			this.upButton && this.upButton.destroy(destroyChild);
			this.downButton && this.downButton.destroy(destroyChild);
			this.slider && this.slider.destroy(destroyChild);
			this.upButton=this.downButton=null;
			this.slider=null;
			this.changeHandler=null;
			this._offsets=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this.slider=new Slider());
			this.addChild(this.upButton=new Button());
			this.addChild(this.downButton=new Button());
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			this.slider.showLabel=false;
			this.slider.on("change",this,this.onSliderChange);
			this.slider.setSlider(0,0,0);
			this.upButton.on("mousedown",this,this.onButtonMouseDown);
			this.downButton.on("mousedown",this,this.onButtonMouseDown);
		}

		/**
		*@private
		*滑块位置发生改变的处理函数。
		*/
		__proto.onSliderChange=function(){
			this.value=this.slider.value;
		}

		/**
		*@private
		*向上和向下按钮的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.onButtonMouseDown=function(e){
			var isUp=e.currentTarget===this.upButton;
			this.slide(isUp);
			Laya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[isUp]);
			Laya.stage.once("mouseup",this,this.onStageMouseUp);
		}

		/**@private */
		__proto.startLoop=function(isUp){
			Laya.timer.frameLoop(1,this,this.slide,[isUp]);
		}

		/**@private */
		__proto.slide=function(isUp){
			if (isUp)this.value-=this._scrollSize;
			else this.value+=this._scrollSize;
		}

		/**
		*@private
		*舞台的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.onStageMouseUp=function(e){
			Laya.timer.clear(this,this.startLoop);
			Laya.timer.clear(this,this.slide);
		}

		/**
		*@private
		*更改对象的皮肤及位置。
		*/
		__proto.changeScrollBar=function(){
			this.upButton.visible=this._showButtons;
			this.downButton.visible=this._showButtons;
			if (this._showButtons){
				this.upButton.skin=this._skin.replace(".png","$up.png");
				this.downButton.skin=this._skin.replace(".png","$down.png");
			}
			if (this.slider.isVertical)this.slider.y=this._showButtons ? this.upButton.height :0;
			else this.slider.x=this._showButtons ? this.upButton.width :0;
			this.resetPositions();
		}

		/**@inheritDoc */
		__proto.changeSize=function(){
			_super.prototype.changeSize.call(this);
			this.resetPositions();
			this.event("change");
			this.changeHandler && this.changeHandler.runWith(this.value);
		}

		/**@private */
		__proto.resetPositions=function(){
			if (this.slider.isVertical)this.slider.height=this.height-(this._showButtons ? (this.upButton.height+this.downButton.height):0);
			else this.slider.width=this.width-(this._showButtons ? (this.upButton.width+this.downButton.width):0);
			this.resetButtonPosition();
		}

		/**@private */
		__proto.resetButtonPosition=function(){
			if (this.slider.isVertical)this.downButton.y=this.slider.y+this.slider.height;
			else this.downButton.x=this.slider.x+this.slider.width;
		}

		/**
		*设置滚动条信息。
		*@param min 滚动条最小位置值。
		*@param max 滚动条最大位置值。
		*@param value 滚动条当前位置值。
		*/
		__proto.setScroll=function(min,max,value){
			this.runCallLater(this.changeSize);
			this.slider.setSlider(min,max,value);
			this.slider.bar.visible=max > 0;
			if (!this._hide && this.autoHide)this.visible=false;
		}

		/**@private */
		__proto.onTargetMouseWheel=function(e){
			this.value-=e.delta *this._scrollSize;
			this.target=this._target;
		}

		/**@private */
		__proto.onTargetMouseDown=function(e){
			this._clickOnly=true;
			this._lastOffset=0;
			this._checkElastic=false;
			this._lastPoint || (this._lastPoint=new Point());
			this._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
			Laya.timer.clear(this,this.tweenMove);
			Tween.clearTween(this);
			Laya.stage.once("mouseup",this,this.onStageMouseUp2);
			Laya.stage.once("mouseout",this,this.onStageMouseUp2);
			Laya.timer.frameLoop(1,this,this.loop);
		}

		/**@private */
		__proto.loop=function(){
			var mouseY=Laya.stage.mouseY;
			var mouseX=Laya.stage.mouseX;
			this._lastOffset=this.isVertical ? (mouseY-this._lastPoint.y):(mouseX-this._lastPoint.x);
			if (this._clickOnly){
				if (Math.abs(this._lastOffset *(this.isVertical ? Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))> 1){
					this._clickOnly=false;
					this._offsets || (this._offsets=[]);
					this._offsets.length=0;
					this._target.mouseEnabled=false;
					if (!this.hide && this.autoHide){
						this.alpha=1;
						this.visible=true;
					}
					this.event("start");
				}else return;
			}
			this._offsets.push(this._lastOffset);
			this._lastPoint.x=mouseX;
			this._lastPoint.y=mouseY;
			if (this._lastOffset===0)return;
			if (!this._checkElastic){
				if (this.elasticDistance > 0){
					if (!this._checkElastic && this._lastOffset !=0){
						if ((this._lastOffset > 0 && this._value <=this.min)|| (this._lastOffset < 0 && this._value >=this.max)){
							this._isElastic=true;
							this._checkElastic=true;
							}else {
							this._isElastic=false;
						}
					}
					}else {
					this._checkElastic=true;
				}
			}
			if (this._isElastic){
				if (this._value <=this.min){
					this.value-=this._lastOffset *Math.max(0,(1-((this.min-this._value)/ this.elasticDistance)));
					}else if (this._value >=this.max){
					this.value-=this._lastOffset *Math.max(0,(1-((this._value-this.max)/ this.elasticDistance)));
				}
				}else {
				this.value-=this._lastOffset;
			}
		}

		/**@private */
		__proto.onStageMouseUp2=function(e){
			Laya.stage.off("mouseup",this,this.onStageMouseUp2);
			Laya.stage.off("mouseout",this,this.onStageMouseUp2);
			Laya.timer.clear(this,this.loop);
			if (this._clickOnly)return;
			this._target.mouseEnabled=true;
			if (this._isElastic){
				if (this._value < this.min){
					Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));
					}else if (this._value > this.max){
					Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));
				}
				}else {
				if (this._offsets.length < 1){
					this._offsets[0]=this.isVertical ? Laya.stage.mouseY-this._lastPoint.y :Laya.stage.mouseX-this._lastPoint.x;
				};
				var offset=0;
				var n=Math.min(this._offsets.length,3);
				for (var i=0;i < n;i++){
					offset+=this._offsets[this._offsets.length-1-i];
				}
				this._lastOffset=offset / n;
				offset=Math.abs(this._lastOffset);
				if (offset < 2){
					this.event("end");
					return;
				}
				if (offset > 60)this._lastOffset=this._lastOffset > 0 ? 60 :-60;
				Laya.timer.frameLoop(1,this,this.tweenMove);
			}
		}

		/**@private */
		__proto.elasticOver=function(){
			this._isElastic=false;
			if (!this.hide && this.autoHide){
				Tween.to(this,{alpha:0},500);
			}
			this.event("end");
		}

		/**@private */
		__proto.tweenMove=function(){
			this._lastOffset *=this.rollRatio;
			var tarSpeed=NaN;
			if (this.elasticDistance > 0){
				if (this._lastOffset > 0 && this.value <=this.min){
					this._isElastic=true;
					tarSpeed=-(this.min-this.elasticDistance-this.value)*0.5;
					if (this._lastOffset > tarSpeed)this._lastOffset=tarSpeed;
					}else if (this._lastOffset<0&&this.value>=this.max){
					this._isElastic=true;
					tarSpeed=-(this.max+this.elasticDistance-this.value)*0.5;
					if (this._lastOffset < tarSpeed)this._lastOffset=tarSpeed;
				}
			}
			this.value-=this._lastOffset;
			if (Math.abs(this._lastOffset)< 1){
				Laya.timer.clear(this,this.tweenMove);
				if (this._isElastic){
					if (this._value < this.min){
						Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));
						}else if (this._value > this.max){
						Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));
						}else{
						this.elasticOver();
					}
					return;
				}
				this.event("end");
				if (!this.hide && this.autoHide){
					Tween.to(this,{alpha:0},500);
				}
			}
		}

		/**
		*停止滑动。
		*/
		__proto.stopScroll=function(){
			this.onStageMouseUp2(null);
			Laya.timer.clear(this,this.tweenMove);
			Tween.clearTween(this);
		}

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			if (this.slider.isVertical)return 100;
			return this.slider.height;
		});

		/**
		*@copy laya.ui.Image#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this.slider.skin=this._skin;
				this.callLater(this.changeScrollBar);
			}
		});

		/**
		*获取或设置表示最高滚动位置的数字。
		*/
		__getset(0,__proto,'max',function(){
			return this.slider.max;
			},function(value){
			this.slider.max=value;
		});

		/**一个布尔值，指定是否显示向上、向下按钮，默认值为true。*/
		__getset(0,__proto,'showButtons',function(){
			return this._showButtons;
			},function(value){
			this._showButtons=value;
			this.callLater(this.changeScrollBar);
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			if (this.slider.isVertical)return this.slider.width;
			return 100;
		});

		/**
		*获取或设置表示最低滚动位置的数字。
		*/
		__getset(0,__proto,'min',function(){
			return this.slider.min;
			},function(value){
			this.slider.min=value;
		});

		/**
		*获取或设置表示当前滚动位置的数字。
		*/
		__getset(0,__proto,'value',function(){
			return this._value;
			},function(v){
			if (v!==this._value){
				if (this._isElastic)this._value=v;
				else {
					this.slider.value=v;
					this._value=this.slider.value;
				}
				this.event("change");
				this.changeHandler && this.changeHandler.runWith(this.value);
			}
		});

		/**
		*一个布尔值，指示滚动条是否为垂直滚动。如果值为true，则为垂直滚动，否则为水平滚动。
		*<p>默认值为：true。</p>
		*/
		__getset(0,__proto,'isVertical',function(){
			return this.slider.isVertical;
			},function(value){
			this.slider.isVertical=value;
		});

		/**
		*<p>当前实例的 <code>Slider</code> 实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this.slider.sizeGrid;
			},function(value){
			this.slider.sizeGrid=value;
		});

		/**获取或设置一个值，该值表示按下滚动条轨道时页面滚动的增量。 */
		__getset(0,__proto,'scrollSize',function(){
			return this._scrollSize;
			},function(value){
			this._scrollSize=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**获取或设置一个值，该值表示滑条长度比例，值为：（0-1）。 */
		__getset(0,__proto,'thumbPercent',function(){
			return this._thumbPercent;
			},function(value){
			this.runCallLater(this.changeScrollBar);
			this.runCallLater(this.changeSize);
			value=value >=1 ? 0.99 :value;
			this._thumbPercent=value;
			if (this.scaleBar){
				if (this.slider.isVertical)this.slider.bar.height=Math.max(this.slider.height *value,Styles.scrollBarMinNum);
				else this.slider.bar.width=Math.max(this.slider.width *value,Styles.scrollBarMinNum);
			}
		});

		/**
		*设置滚动对象。
		*@see laya.ui.TouchScroll#target
		*/
		__getset(0,__proto,'target',function(){
			return this._target;
			},function(value){
			if (this._target){
				this._target.off("mousewheel",this,this.onTargetMouseWheel);
				this._target.off("mousedown",this,this.onTargetMouseDown);
			}
			this._target=value;
			if (value){
				this._mouseWheelEnable && this._target.on("mousewheel",this,this.onTargetMouseWheel);
				this._touchScrollEnable && this._target.on("mousedown",this,this.onTargetMouseDown);
			}
		});

		/**是否隐藏滚动条，不显示滚动条，但是可以正常滚动，默认为false。*/
		__getset(0,__proto,'hide',function(){
			return this._hide;
			},function(value){
			this._hide=value;
			this.visible=!value;
		});

		/**一个布尔值，指定是否开启触摸，默认值为true。*/
		__getset(0,__proto,'touchScrollEnable',function(){
			return this._touchScrollEnable;
			},function(value){
			this._touchScrollEnable=value;
			this.target=this._target;
		});

		/**一个布尔值，指定是否滑轮滚动，默认值为true。*/
		__getset(0,__proto,'mouseWheelEnable',function(){
			return this._mouseWheelEnable;
			},function(value){
			this._mouseWheelEnable=value;
		});

		/**
		*滚动的刻度值，滑动数值为tick的整数倍。默认值为1。
		*/
		__getset(0,__proto,'tick',function(){
			return this.slider.tick;
			},function(value){
			this.slider.tick=value;
		});

		return ScrollBar;
	})(Component)


	/**
	*使用 <code>Slider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。
	*<p>滑块的当前值由滑块端点（对应于滑块的最小值和最大值）之间滑块的相对位置确定。</p>
	*<p>滑块允许最小值和最大值之间特定间隔内的值。滑块还可以使用数据提示显示其当前值。</p>
	*
	*@see laya.ui.HSlider
	*@see laya.ui.VSlider
	*/
	//class laya.ui.Slider extends laya.ui.Component
	var Slider=(function(_super){
		function Slider(skin){
			this.changeHandler=null;
			this.isVertical=true;
			this.showLabel=true;
			this._allowClickBack=false;
			this._max=100;
			this._min=0;
			this._tick=1;
			this._value=0;
			this._skin=null;
			this._bg=null;
			this._bar=null;
			this._tx=NaN;
			this._ty=NaN;
			this._maxMove=NaN;
			this._globalSacle=null;
			Slider.__super.call(this);
			this.skin=skin;
		}

		__class(Slider,'laya.ui.Slider',_super);
		var __proto=Slider.prototype;
		/**
		*@inheritDoc
		*/
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._bg && this._bg.destroy(destroyChild);
			this._bar && this._bar.destroy(destroyChild);
			this._bg=null;
			this._bar=null;
			this.changeHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._bg=new Image());
			this.addChild(this._bar=new Button());
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			this._bar.on("mousedown",this,this.onBarMouseDown);
			this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0";
			this.allowClickBack=true;
		}

		/**
		*@private
		*滑块的的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*@param e
		*/
		__proto.onBarMouseDown=function(e){
			this._globalSacle || (this._globalSacle=new Point());
			this._globalSacle.setTo(this.globalScaleX,this.globalScaleY);
			this._maxMove=this.isVertical ? (this.height-this._bar.height):(this.width-this._bar.width);
			this._tx=Laya.stage.mouseX;
			this._ty=Laya.stage.mouseY;
			Laya.stage.on("mousemove",this,this.mouseMove);
			Laya.stage.once("mouseup",this,this.mouseUp);
			this.showValueText();
		}

		/**
		*@private
		*显示标签。
		*/
		__proto.showValueText=function(){
			if (this.showLabel){
				var label=laya.ui.Slider.label;
				this.addChild(label);
				label.textField.changeText(this._value+"");
				if (this.isVertical){
					label.x=this._bar.x+20;
					label.y=(this._bar.height-label.height)*0.5+this._bar.y;
					}else {
					label.y=this._bar.y-20;
					label.x=(this._bar.width-label.width)*0.5+this._bar.x;
				}
			}
		}

		/**
		*@private
		*隐藏标签。
		*/
		__proto.hideValueText=function(){
			laya.ui.Slider.label && laya.ui.Slider.label.removeSelf();
		}

		/**
		*@private
		*@param e
		*/
		__proto.mouseUp=function(e){
			Laya.stage.off("mousemove",this,this.mouseMove);
			this.sendChangeEvent("changed");
			this.hideValueText();
		}

		/**
		*@private
		*@param e
		*/
		__proto.mouseMove=function(e){
			var oldValue=this._value;
			if (this.isVertical){
				this._bar.y+=(Laya.stage.mouseY-this._ty)/ this._globalSacle.y;
				if (this._bar.y > this._maxMove)this._bar.y=this._maxMove;
				else if (this._bar.y < 0)this._bar.y=0;
				this._value=this._bar.y / this._maxMove *(this._max-this._min)+this._min;
				}else {
				this._bar.x+=(Laya.stage.mouseX-this._tx)/ this._globalSacle.x;
				if (this._bar.x > this._maxMove)this._bar.x=this._maxMove;
				else if (this._bar.x < 0)this._bar.x=0;
				this._value=this._bar.x / this._maxMove *(this._max-this._min)+this._min;
			}
			this._tx=Laya.stage.mouseX;
			this._ty=Laya.stage.mouseY;
			var pow=Math.pow(10,(this._tick+"").length-1);
			this._value=Math.round(Math.round(this._value / this._tick)*this._tick *pow)/ pow;
			if (this._value !=oldValue){
				this.sendChangeEvent();
			}
			this.showValueText();
		}

		/**
		*@private
		*@param type
		*/
		__proto.sendChangeEvent=function(type){
			(type===void 0)&& (type="change");
			this.event(type);
			this.changeHandler && this.changeHandler.runWith(this._value);
		}

		/**
		*@private
		*设置滑块的位置信息。
		*/
		__proto.setBarPoint=function(){
			if (this.isVertical)this._bar.x=Math.round((this._bg.width-this._bar.width)*0.5);
			else this._bar.y=Math.round((this._bg.height-this._bar.height)*0.5);
		}

		/**@inheritDoc */
		__proto.changeSize=function(){
			_super.prototype.changeSize.call(this);
			if (this.isVertical)this._bg.height=this.height;
			else this._bg.width=this.width;
			this.setBarPoint();
			this.changeValue();
		}

		/**
		*设置滑动条的信息。
		*@param min 滑块的最小值。
		*@param max 滑块的最小值。
		*@param value 滑块的当前值。
		*/
		__proto.setSlider=function(min,max,value){
			this._value=-1;
			this._min=min;
			this._max=max > min ? max :min;
			this.value=value < min ? min :value > max ? max :value;
		}

		/**
		*@private
		*改变滑块的位置值。
		*/
		__proto.changeValue=function(){
			var pow=Math.pow(10,(this._tick+"").length-1);
			this._value=Math.round(Math.round(this._value / this._tick)*this._tick *pow)/ pow;
			this._value=this._value > this._max ? this._max :this._value < this._min ? this._min :this._value;
			var num=this._max-this._min;
			if (num===0)num=1;
			if (this.isVertical)this._bar.y=(this._value-this._min)/ num *(this.height-this._bar.height);
			else this._bar.x=(this._value-this._min)/ num *(this.width-this._bar.width);
		}

		/**
		*@private
		*滑动条的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.onBgMouseDown=function(e){
			var point=this._bg.getMousePoint();
			if (this.isVertical)this.value=point.y / (this.height-this._bar.height)*(this._max-this._min)+this._min;
			else this.value=point.x / (this.width-this._bar.width)*(this._max-this._min)+this._min;
		}

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			return Math.max(this._bg.height,this._bar.height);
		});

		/**
		*@copy laya.ui.Image#skin
		*@return
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this._bg.skin=this._skin;
				this._bar.skin=this._skin.replace(".png","$bar.png");
				this.setBarPoint();
			}
		});

		/**
		*一个布尔值，指定是否允许通过点击滑动条改变 <code>Slider</code> 的 <code>value</code> 属性值。
		*/
		__getset(0,__proto,'allowClickBack',function(){
			return this._allowClickBack;
			},function(value){
			if (this._allowClickBack !=value){
				this._allowClickBack=value;
				if (value)this._bg.on("mousedown",this,this.onBgMouseDown);
				else this._bg.off("mousedown",this,this.onBgMouseDown);
			}
		});

		/**
		*获取或设置表示最高位置的数字。 默认值为100。
		*/
		__getset(0,__proto,'max',function(){
			return this._max;
			},function(value){
			if (this._max !=value){
				this._max=value;
				this.callLater(this.changeValue);
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			return Math.max(this._bg.width,this._bar.width);
		});

		/**
		*滑动的刻度值，滑动数值为tick的整数倍。默认值为1。
		*/
		__getset(0,__proto,'tick',function(){
			return this._tick;
			},function(value){
			if (this._tick !=value){
				this._tick=value;
				this.callLater(this.changeValue);
			}
		});

		/**
		*<p>当前实例的背景图（ <code>Image</code> ）和滑块按钮（ <code>Button</code> ）实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*@return
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this._bg.sizeGrid;
			},function(value){
			this._bg.sizeGrid=value;
			this._bar.sizeGrid=value;
		});

		/**
		*获取或设置表示最低位置的数字。 默认值为0。
		*/
		__getset(0,__proto,'min',function(){
			return this._min;
			},function(value){
			if (this._min !=value){
				this._min=value;
				this.callLater(this.changeValue);
			}
		});

		/**
		*获取或设置表示当前滑块位置的数字。
		*/
		__getset(0,__proto,'value',function(){
			return this._value;
			},function(num){
			if (this._value !=num){
				var oldValue=this._value;
				this._value=num;
				this.changeValue();
				if (this._value !=oldValue){
					this.sendChangeEvent();
				}
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*表示滑块按钮的引用。
		*/
		__getset(0,__proto,'bar',function(){
			return this._bar;
		});

		__static(Slider,
		['label',function(){return this.label=new Label();}
		]);
		return Slider;
	})(Component)


	/**
	*<code>HTMLImage</code> 用于创建 HTML Image 元素。
	*@private
	*/
	//class laya.resource.HTMLImage extends laya.resource.FileBitmap
	var HTMLImage=(function(_super){
		function HTMLImage(src,def){
			this._recreateLock=false;
			this._needReleaseAgain=false;
			HTMLImage.__super.call(this);
			this._init_(src,def);
		}

		__class(HTMLImage,'laya.resource.HTMLImage',_super);
		var __proto=HTMLImage.prototype;
		__proto._init_=function(src,def){
			this._src=src;
			this._source=new Browser.window.Image();
			if (def){
				def.onload && (this.onload=def.onload);
				def.onerror && (this.onerror=def.onerror);
				def.onCreate && def.onCreate(this);
			}
			if (src.indexOf("data:image")!=0)this._source.crossOrigin="";
			(src)&& (this._source.src=URL.formatURL(src));
		}

		/**
		*@inheritDoc
		*/
		__proto.recreateResource=function(){
			var _$this=this;
			if (this._src==="")
				throw new Error("src no null！");
			this._needReleaseAgain=false;
			if (!this._source){
				this._recreateLock=true;
				this.startCreate();
				var _this=this;
				this._source=new Browser.window.Image();
				this._source.crossOrigin="";
				this._source.onload=function (){
					if (_this._needReleaseAgain){
						_this._needReleaseAgain=false;
						_this._source.onload=null;
						_this._source=null;
						return;
					}
					_this._source.onload=null;
					_this.memorySize=_$this._w *_$this._h *4;
					_this._recreateLock=false;
					_this.completeCreate();
				};
				this._source.src=URL.formatURL(this._src);
				}else {
				if (this._recreateLock)
					return;
				this.startCreate();
				this.memorySize=this._w *this._h *4;
				this._recreateLock=false;
				this.completeCreate();
			}
		}

		/**
		*@inheritDoc
		*/
		__proto.detoryResource=function(){
			if (this._recreateLock)
				this._needReleaseAgain=true;
			(this._source)&& (this._source=null,this.memorySize=0);
		}

		/***调整尺寸。*/
		__proto.onresize=function(){
			this._w=this._source.width;
			this._h=this._source.height;
		}

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'onload',null,function(value){
			var _$this=this;
			this._onload=value;
			this._source && (this._source.onload=this._onload !=null ? (function(){
				_$this.onresize();
				_$this._onload();
			}):null);
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'onerror',null,function(value){
			var _$this=this;
			this._onerror=value;
			this._source && (this._source.onerror=this._onerror !=null ? (function(){
				_$this._onerror()
			}):null);
		});

		HTMLImage.create=function(src,def){
			return new HTMLImage(src,def);
		}

		return HTMLImage;
	})(FileBitmap)


	/**
	*<code>Image</code> 类是用于表示位图图像或绘制图形的显示对象。
	*Image和Clip组件是唯一支持异步加载的两个组件，比如img.skin="abc/xxx.png"，其他UI组件均不支持异步加载。
	*
	*@example 以下示例代码，创建了一个新的 <code>Image</code> 实例，设置了它的皮肤、位置信息，并添加到舞台上。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Image;
		*public class Image_Example
		*{
			*public function Image_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*onInit();
				*}
			*private function onInit():void
			*{
				*var bg:Image=new Image("resource/ui/bg.png");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。
				*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。
				*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。
				*bg.sizeGrid="40,10,5,10";//设置 bg 对象的网格信息。
				*bg.width=150;//设置 bg 对象的宽度。
				*bg.height=250;//设置 bg 对象的高度。
				*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。
				*var image:Image=new Image("resource/ui/image.png");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。
				*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。
				*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。
				*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*onInit();
	*function onInit(){
		*var bg=new laya.ui.Image("resource/ui/bg.png");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。
		*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。
		*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。
		*bg.sizeGrid="40,10,5,10";//设置 bg 对象的网格信息。
		*bg.width=150;//设置 bg 对象的宽度。
		*bg.height=250;//设置 bg 对象的高度。
		*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。
		*var image=new laya.ui.Image("resource/ui/image.png");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。
		*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。
		*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。
		*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*class Image_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.onInit();
			*}
		*private onInit():void {
			*var bg:laya.ui.Image=new laya.ui.Image("resource/ui/bg.png");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。
			*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。
			*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。
			*bg.sizeGrid="40,10,5,10";//设置 bg 对象的网格信息。
			*bg.width=150;//设置 bg 对象的宽度。
			*bg.height=250;//设置 bg 对象的高度。
			*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。
			*var image:laya.ui.Image=new laya.ui.Image("resource/ui/image.png");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。
			*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。
			*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。
			*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。
			*}
		*}
	*</listing>
	*@see laya.ui.AutoBitmap
	*/
	//class laya.ui.Image extends laya.ui.Component
	var Image=(function(_super){
		function Image(skin){
			this._bitmap=null;
			this._skin=null;
			this._group=null;
			Image.__super.call(this);
			this.skin=skin;
		}

		__class(Image,'laya.ui.Image',_super);
		var __proto=Image.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,true);
			this._bitmap && this._bitmap.destroy();
			this._bitmap=null;
		}

		/**
		*销毁对象并释放加载的皮肤资源。
		*/
		__proto.dispose=function(){
			this.destroy(true);
			Laya.loader.clearRes(this._skin);
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.graphics=this._bitmap=new AutoBitmap();
			this._bitmap.autoCacheCmd=false;
		}

		/**
		*@private
		*设置皮肤资源。
		*/
		__proto.setSource=function(url,img){
			if (url===this._skin && img){
				this.source=img
				this.onCompResize();
			}
		}

		/**
		*@copy laya.ui.AutoBitmap#source
		*/
		__getset(0,__proto,'source',function(){
			return this._bitmap.source;
			},function(value){
			if (!this._bitmap)return;
			this._bitmap.source=value;
			this.event("loaded");
			this.repaint();
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='string'))this.skin=value;
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			return this._bitmap.height;
		});

		/**
		*<p>对象的皮肤地址，以字符串表示。</p>
		*<p>如果资源未加载，则先加载资源，加载完成后应用于此对象。</p>
		*<b>注意：</b>资源加载完成后，会自动缓存至资源库中。
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				if (value){
					var source=Loader.getRes(value);
					if (source){
						this.source=source;
						this.onCompResize();
					}else Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,"image",1,true,this._group);
					}else {
					this.source=null;
				}
			}
		});

		/**
		*资源分组。
		*/
		__getset(0,__proto,'group',function(){
			return this._group;
			},function(value){
			if (value && this._skin)Loader.setGroup(this._skin,value);
			this._group=value;
		});

		/**
		*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"。</li></ul></p>
		*@see laya.ui.AutoBitmap#sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			if (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");
			return null;
			},function(value){
			this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			return this._bitmap.width;
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._bitmap.width=value==0 ? 0.0000001 :value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._bitmap.height=value==0 ? 0.0000001 :value;
		});

		return Image;
	})(Component)


	/**
	*<p> <code>Label</code> 类用于创建显示对象以显示文本。</p>
	*
	*@example 以下示例代码，创建了一个 <code>Label</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Label;
		*public class Label_Example
		*{
			*public function Label_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*onInit();
				*}
			*private function onInit():void
			*{
				*var label:Label=new Label();//创建一个 Label 类的实例对象 label 。
				*label.font="Arial";//设置 label 的字体。
				*label.bold=true;//设置 label 显示为粗体。
				*label.leading=4;//设置 label 的行间距。
				*label.wordWrap=true;//设置 label 自动换行。
				*label.padding="10,10,10,10";//设置 label 的边距。
				*label.color="#ff00ff";//设置 label 的颜色。
				*label.text="Hello everyone,我是一个可爱的文本！";//设置 label 的文本内容。
				*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。
				*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。
				*label.width=300;//设置 label 的宽度。
				*label.height=200;//设置 label 的高度。
				*Laya.stage.addChild(label);//将 label 添加到显示列表。
				*var passwordLabel:Label=new Label("请原谅我，我不想被人看到我心里话。");//创建一个 Label 类的实例对象 passwordLabel 。
				*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。
				*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。
				*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。
				*passwordLabel.width=300;//设置 passwordLabel 的宽度。
				*passwordLabel.color="#000000";//设置 passwordLabel 的文本颜色。
				*passwordLabel.bgColor="#ccffff";//设置 passwordLabel 的背景颜色。
				*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。
				*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*onInit();
	*function onInit(){
		*var label=new laya.ui.Label();//创建一个 Label 类的实例对象 label 。
		*label.font="Arial";//设置 label 的字体。
		*label.bold=true;//设置 label 显示为粗体。
		*label.leading=4;//设置 label 的行间距。
		*label.wordWrap=true;//设置 label 自动换行。
		*label.padding="10,10,10,10";//设置 label 的边距。
		*label.color="#ff00ff";//设置 label 的颜色。
		*label.text="Hello everyone,我是一个可爱的文本！";//设置 label 的文本内容。
		*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。
		*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。
		*label.width=300;//设置 label 的宽度。
		*label.height=200;//设置 label 的高度。
		*Laya.stage.addChild(label);//将 label 添加到显示列表。
		*var passwordLabel=new laya.ui.Label("请原谅我，我不想被人看到我心里话。");//创建一个 Label 类的实例对象 passwordLabel 。
		*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。
		*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。
		*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。
		*passwordLabel.width=300;//设置 passwordLabel 的宽度。
		*passwordLabel.color="#000000";//设置 passwordLabel 的文本颜色。
		*passwordLabel.bgColor="#ccffff";//设置 passwordLabel 的背景颜色。
		*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。
		*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*import Label=laya.ui.Label;
	*class Label_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*this.onInit();
			*}
		*private onInit():void {
			*var label:Label=new Label();//创建一个 Label 类的实例对象 label 。
			*label.font="Arial";//设置 label 的字体。
			*label.bold=true;//设置 label 显示为粗体。
			*label.leading=4;//设置 label 的行间距。
			*label.wordWrap=true;//设置 label 自动换行。
			*label.padding="10,10,10,10";//设置 label 的边距。
			*label.color="#ff00ff";//设置 label 的颜色。
			*label.text="Hello everyone,我是一个可爱的文本！";//设置 label 的文本内容。
			*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。
			*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。
			*label.width=300;//设置 label 的宽度。
			*label.height=200;//设置 label 的高度。
			*Laya.stage.addChild(label);//将 label 添加到显示列表。
			*var passwordLabel:Label=new Label("请原谅我，我不想被人看到我心里话。");//创建一个 Label 类的实例对象 passwordLabel 。
			*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。
			*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。
			*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。
			*passwordLabel.width=300;//设置 passwordLabel 的宽度。
			*passwordLabel.color="#000000";//设置 passwordLabel 的文本颜色。
			*passwordLabel.bgColor="#ccffff";//设置 passwordLabel 的背景颜色。
			*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。
			*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。
			*}
		*}
	*</listing>
	*@see laya.display.Text
	*/
	//class laya.ui.Label extends laya.ui.Component
	var Label=(function(_super){
		function Label(text){
			this._tf=null;
			Label.__super.call(this);
			(text===void 0)&& (text="");
			Font.defaultColor=Styles.labelColor;
			this.text=text;
		}

		__class(Label,'laya.ui.Label',_super);
		var __proto=Label.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._tf=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._tf=new Text());
		}

		/**@copy laya.display.Text#changeText()
		**/
		__proto.changeText=function(text){
			this._tf.changeText(text);
		}

		/**
		*<p>边距信息</p>
		*<p>"上边距，右边距，下边距 , 左边距（边距以像素为单位）"</p>
		*@see laya.display.Text.padding
		*/
		__getset(0,__proto,'padding',function(){
			return this._tf.padding.join(",");
			},function(value){
			this._tf.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);
		});

		/**
		*@copy laya.display.Text#bold
		*/
		__getset(0,__proto,'bold',function(){
			return this._tf.bold;
			},function(value){
			this._tf.bold=value;
		});

		/**
		*@copy laya.display.Text#align
		*/
		__getset(0,__proto,'align',function(){
			return this._tf.align;
			},function(value){
			this._tf.align=value;
		});

		/**
		*当前文本内容字符串。
		*@see laya.display.Text.text
		*/
		__getset(0,__proto,'text',function(){
			return this._tf.text;
			},function(value){
			if (this._tf.text !=value){
				if(value)
					value=(value+"").replace(Label._textReg,"\n");
				this._tf.text=value;
				this.event("change");
			}
		});

		/**
		*@copy laya.display.Text#italic
		*/
		__getset(0,__proto,'italic',function(){
			return this._tf.italic;
			},function(value){
			this._tf.italic=value;
		});

		/**
		*@copy laya.display.Text#wordWrap
		*/
		/**
		*@copy laya.display.Text#wordWrap
		*/
		__getset(0,__proto,'wordWrap',function(){
			return this._tf.wordWrap;
			},function(value){
			this._tf.wordWrap=value;
		});

		/**
		*@copy laya.display.Text#font
		*/
		__getset(0,__proto,'font',function(){
			return this._tf.font;
			},function(value){
			this._tf.font=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='number')|| (typeof value=='string'))this.text=value+"";
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*@copy laya.display.Text#color
		*/
		__getset(0,__proto,'color',function(){
			return this._tf.color;
			},function(value){
			this._tf.color=value;
		});

		/**
		*@copy laya.display.Text#valign
		*/
		__getset(0,__proto,'valign',function(){
			return this._tf.valign;
			},function(value){
			this._tf.valign=value;
		});

		/**
		*@copy laya.display.Text#leading
		*/
		__getset(0,__proto,'leading',function(){
			return this._tf.leading;
			},function(value){
			this._tf.leading=value;
		});

		/**
		*@copy laya.display.Text#fontSize
		*/
		__getset(0,__proto,'fontSize',function(){
			return this._tf.fontSize;
			},function(value){
			this._tf.fontSize=value;
		});

		/**
		*@copy laya.display.Text#bgColor
		*/
		__getset(0,__proto,'bgColor',function(){
			return this._tf.bgColor
			},function(value){
			this._tf.bgColor=value;
		});

		/**
		*@copy laya.display.Text#borderColor
		*/
		__getset(0,__proto,'borderColor',function(){
			return this._tf.borderColor
			},function(value){
			this._tf.borderColor=value;
		});

		/**
		*@copy laya.display.Text#stroke
		*/
		__getset(0,__proto,'stroke',function(){
			return this._tf.stroke;
			},function(value){
			this._tf.stroke=value;
		});

		/**
		*@copy laya.display.Text#strokeColor
		*/
		__getset(0,__proto,'strokeColor',function(){
			return this._tf.strokeColor;
			},function(value){
			this._tf.strokeColor=value;
		});

		/**
		*文本控件实体 <code>Text</code> 实例。
		*/
		__getset(0,__proto,'textField',function(){
			return this._tf;
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'measureWidth',function(){
			return this._tf.width;
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'measureHeight',function(){
			return this._tf.height;
		});

		/**
		*@inheritDoc
		*/
		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'width',function(){
			if (this._width || this._tf.text)return _super.prototype._$get_width.call(this);
			return 0;
			},function(value){
			_super.prototype._$set_width.call(this,value);
			this._tf.width=value;
		});

		/**
		*@inheritDoc
		*/
		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'height',function(){
			if (this._height || this._tf.text)return _super.prototype._$get_height.call(this);
			return 0;
			},function(value){
			_super.prototype._$set_height.call(this,value);
			this._tf.height=value;
		});

		/**
		*@copy laya.display.Text#overflow
		*/
		/**
		*@copy laya.display.Text#overflow
		*/
		__getset(0,__proto,'overflow',function(){
			return this._tf.overflow;
			},function(value){
			this._tf.overflow=value;
		});

		/**
		*@copy laya.display.Text#underline
		*/
		/**
		*@copy laya.display.Text#underline
		*/
		__getset(0,__proto,'underline',function(){
			return this._tf.underline;
			},function(value){
			this._tf.underline=value;
		});

		/**
		*@copy laya.display.Text#underlineColor
		*/
		/**
		*@copy laya.display.Text#underlineColor
		*/
		__getset(0,__proto,'underlineColor',function(){
			return this._tf.underlineColor;
			},function(value){
			this._tf.underlineColor=value;
		});

		__static(Label,
		['_textReg',function(){return this._textReg=new RegExp("\\\\n","g");}
		]);
		return Label;
	})(Component)


	/**
	*<code>ProgressBar</code> 组件显示内容的加载进度。
	*@example 以下示例代码，创建了一个新的 <code>ProgressBar</code> 实例，设置了它的皮肤、位置、宽高、网格等信息，并添加到舞台上。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.ProgressBar;
		*import laya.utils.Handler;
		*public class ProgressBar_Example
		*{
			*private var progressBar:ProgressBar;
			*public function ProgressBar_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/progress.png","resource/ui/progress$bar.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*progressBar=new ProgressBar("resource/ui/progress.png");//创建一个 ProgressBar 类的实例对象 progressBar 。
				*progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。
				*progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。
				*progressBar.value=0.3;//设置 progressBar 的进度值。
				*progressBar.width=200;//设置 progressBar 的宽度。
				*progressBar.height=50;//设置 progressBar 的高度。
				*progressBar.sizeGrid="5,10,5,10";//设置 progressBar 的网格信息。
				*progressBar.changeHandler=new Handler(this,onChange);//设置 progressBar 的value值改变时执行的处理器。
				*Laya.stage.addChild(progressBar);//将 progressBar 添加到显示列表。
				*Laya.timer.once(3000,this,changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。
				*}
			*private function changeValue():void
			*{
				*trace("改变进度条的进度值。");
				*progressBar.value=0.6;
				*}
			*private function onChange(value:Number):void
			*{
				*trace("进度发生改变： value=" ,value);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var res=["resource/ui/progress.png","resource/ui/progress$bar.png"];
	*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete()
	*{
		*progressBar=new laya.ui.ProgressBar("resource/ui/progress.png");//创建一个 ProgressBar 类的实例对象 progressBar 。
		*progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。
		*progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。
		*progressBar.value=0.3;//设置 progressBar 的进度值。
		*progressBar.width=200;//设置 progressBar 的宽度。
		*progressBar.height=50;//设置 progressBar 的高度。
		*progressBar.sizeGrid="10,5,10,5";//设置 progressBar 的网格信息。
		*progressBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 progressBar 的value值改变时执行的处理器。
		*Laya.stage.addChild(progressBar);//将 progressBar 添加到显示列表。
		*Laya.timer.once(3000,this,changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。
		*}
	*function changeValue()
	*{
		*console.log("改变进度条的进度值。");
		*progressBar.value=0.6;
		*}
	*function onChange(value)
	*{
		*console.log("进度发生改变： value=" ,value);
		*}
	*</listing>
	*<listing version="3.0">
	*import ProgressBar=laya.ui.ProgressBar;
	*import Handler=laya.utils.Handler;
	*class ProgressBar_Example {
		*private progressBar:ProgressBar;
		*public ProgressBar_Example(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/progress.png","resource/ui/progress$bar.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*this.progressBar=new ProgressBar("resource/ui/progress.png");//创建一个 ProgressBar 类的实例对象 progressBar 。
			*this.progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。
			*this.progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。
			*this.progressBar.value=0.3;//设置 progressBar 的进度值。
			*this.progressBar.width=200;//设置 progressBar 的宽度。
			*this.progressBar.height=50;//设置 progressBar 的高度。
			*this.progressBar.sizeGrid="5,10,5,10";//设置 progressBar 的网格信息。
			*this.progressBar.changeHandler=new Handler(this,this.onChange);//设置 progressBar 的value值改变时执行的处理器。
			*Laya.stage.addChild(this.progressBar);//将 progressBar 添加到显示列表。
			*Laya.timer.once(3000,this,this.changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。
			*}
		*private changeValue():void {
			*console.log("改变进度条的进度值。");
			*this.progressBar.value=0.6;
			*}
		*private onChange(value:number):void {
			*console.log("进度发生改变： value=",value);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.ProgressBar extends laya.ui.Component
	var ProgressBar=(function(_super){
		function ProgressBar(skin){
			this.changeHandler=null;
			this._bg=null;
			this._bar=null;
			this._skin=null;
			this._value=0.5;
			ProgressBar.__super.call(this);
			this.skin=skin;
		}

		__class(ProgressBar,'laya.ui.ProgressBar',_super);
		var __proto=ProgressBar.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._bg && this._bg.destroy(destroyChild);
			this._bar && this._bar.destroy(destroyChild);
			this._bg=this._bar=null;
			this.changeHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._bg=new Image());
			this.addChild(this._bar=new Image());
			this._bar._bitmap.autoCacheCmd=false;
		}

		/**
		*@private
		*更改进度值的显示。
		*/
		__proto.changeValue=function(){
			if (this.sizeGrid){
				var grid=this.sizeGrid.split(",");
				var left=Number(grid[3]);
				var right=Number(grid[1]);
				var max=this.width-left-right;
				var sw=max *this._value;
				this._bar.width=left+right+sw;
				this._bar.visible=this._bar.width > left+right;
				}else {
				this._bar.width=this.width *this._value;
			}
		}

		/**@inheritDoc */
		__getset(0,__proto,'measureHeight',function(){
			return this._bg.height;
		});

		/**
		*@copy laya.ui.Image#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this._bg.skin=this._skin;
				this._bar.skin=this._skin.replace(".png","$bar.png");
				this.callLater(this.changeValue);
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'measureWidth',function(){
			return this._bg.width;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._bg.height=this._height;
			this._bar.height=this._height;
		});

		/**
		*获取进度条对象。
		*/
		__getset(0,__proto,'bar',function(){
			return this._bar;
		});

		/**
		*当前的进度量。
		*<p><b>取值：</b>介于0和1之间。</p>
		*/
		__getset(0,__proto,'value',function(){
			return this._value;
			},function(num){
			if (this._value !=num){
				num=num > 1 ? 1 :num < 0 ? 0 :num;
				this._value=num;
				this.callLater(this.changeValue);
				this.event("change");
				this.changeHandler && this.changeHandler.runWith(num);
			}
		});

		/**
		*获取背景条对象。
		*/
		__getset(0,__proto,'bg',function(){
			return this._bg;
		});

		/**
		*<p>当前 <code>ProgressBar</code> 实例的进度条背景位图（ <code>Image</code> 实例）的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this._bg.sizeGrid;
			},function(value){
			this._bg.sizeGrid=this._bar.sizeGrid=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._bg.width=this._width;
			this.callLater(this.changeValue);
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);
			else _super.prototype._$set_dataSource.call(this,value);
		});

		return ProgressBar;
	})(Component)


	/**
	*自动根据大小填充自己全部区域的显示对象
	*@author ww
	*/
	//class laya.debug.tools.resizer.AutoFillRec extends laya.ui.Component
	var AutoFillRec=(function(_super){
		function AutoFillRec(type){
			this.type=0;
			this.preX=NaN;
			this.preY=NaN;
			AutoFillRec.__super.call(this);
		}

		__class(AutoFillRec,'laya.debug.tools.resizer.AutoFillRec',_super);
		var __proto=AutoFillRec.prototype;
		//super(type);
		__proto.changeSize=function(){
			_super.prototype.changeSize.call(this);
			var g=this.graphics;
			g.clear();
			g.drawRect(0,0,this.width,this.height,"#33c5f5");
		}

		__proto.record=function(){
			this.preX=this.x;
			this.preY=this.y;
		}

		__proto.getDx=function(){
			return this.x-this.preX;
		}

		__proto.getDy=function(){
			return this.y-this.preY;
		}

		return AutoFillRec;
	})(Component)


	/**鼠标提示管理类*/
	//class laya.debug.tools.TipManagerForDebug extends laya.ui.Component
	var TipManagerForDebug=(function(_super){
		function TipManagerForDebug(){
			this._tipBox=null;
			this._tipText=null;
			this._defaultTipHandler=null;
			TipManagerForDebug.__super.call(this);
			this._tipBox=new Component();
			this._tipBox.addChild(this._tipText=new Text());
			this._tipText.x=this._tipText.y=5;
			this._tipText.color=TipManagerForDebug.tipTextColor;
			this._defaultTipHandler=this.showDefaultTip;
			Laya.stage.on("showtip",this,this.onStageShowTip);
			Laya.stage.on("hidetip",this,this.onStageHideTip);
		}

		__class(TipManagerForDebug,'laya.debug.tools.TipManagerForDebug',_super);
		var __proto=TipManagerForDebug.prototype;
		__proto.onStageHideTip=function(e){
			Laya.timer.clear(this,this.showTip);
			this.closeAll();
			this.removeSelf();
		}

		__proto.onStageShowTip=function(data){
			Laya.timer.once(TipManagerForDebug.tipDelay,this,this.showTip,[data],true);
		}

		__proto.showTip=function(tip){
			if ((typeof tip=='string')){
				var text=String(tip);
				if (Boolean(text)){
					this._defaultTipHandler(text);
				}
				}else if ((tip instanceof laya.utils.Handler )){
				(tip).run();
				}else if ((typeof tip=='function')){
				(tip).apply();
			}
			if (true){
				Laya.stage.on("mousemove",this,this.onStageMouseMove);
				Laya.stage.on("mousedown",this,this.onStageMouseDown);
			}
			this.onStageMouseMove(null);
		}

		__proto.onStageMouseDown=function(e){
			this.closeAll();
		}

		__proto.onStageMouseMove=function(e){
			this.showToStage(this,TipManagerForDebug.offsetX,TipManagerForDebug.offsetY);
		}

		__proto.showToStage=function(dis,offX,offY){
			(offX===void 0)&& (offX=0);
			(offY===void 0)&& (offY=0);
			var rec=dis.getBounds();
			dis.x=Laya.stage.mouseX+offX;
			dis.y=Laya.stage.mouseY+offY;
			if (dis.x+rec.width > Laya.stage.width){
				dis.x-=rec.width+offX;
			}
			if (dis.y+rec.height > Laya.stage.height){
				dis.y-=rec.height+offY;
			}
		}

		/**关闭所有鼠标提示*/
		__proto.closeAll=function(){
			Laya.timer.clear(this,this.showTip);
			Laya.stage.off("mousemove",this,this.onStageMouseMove);
			Laya.stage.off("mousedown",this,this.onStageMouseDown);
			this.removeChildren();
		}

		__proto.showDisTip=function(tip){
			this.addChild(tip);
			this.showToStage(this);
			Laya.stage.addChild(this);
		}

		__proto.showDefaultTip=function(text){
			this._tipText.text=text;
			var g=this._tipBox.graphics;
			g.clear();
			g.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,TipManagerForDebug.tipBackColor);
			this.addChild(this._tipBox);
			this.showToStage(this);
			Laya.stage.addChild(this);
		}

		/**默认鼠标提示函数*/
		__getset(0,__proto,'defaultTipHandler',function(){
			return this._defaultTipHandler;
			},function(value){
			this._defaultTipHandler=value;
		});

		TipManagerForDebug.offsetX=10;
		TipManagerForDebug.offsetY=15;
		TipManagerForDebug.tipTextColor="#ffffff";
		TipManagerForDebug.tipBackColor="#111111";
		TipManagerForDebug.tipDelay=200;
		return TipManagerForDebug;
	})(Component)


	/**
	*独立的Canvas模式
	*/
	//class laya.editor.comonents.CanvasView extends laya.display.Stage
	var CanvasView=(function(_super){
		function CanvasView(width,height,awakeInterval,sleepInterval){
			this.canvas=null;
			this.sleepInterval=500;
			this.awakeInterval=33;
			this.awakeDuration=2000;
			this._context=null;
			this._mouseManager=null;
			this._awakeTime=0;
			this._isOver=false;
			this._oldStage=null;
			CanvasView.__super.call(this);
			var _$this=this;
			(awakeInterval===void 0)&& (awakeInterval=33);
			(sleepInterval===void 0)&& (sleepInterval=500);
			this.desginWidth=this.width=width;
			this.desginHeight=this.height=height;
			this.awakeInterval=awakeInterval;
			this.sleepInterval=sleepInterval;
			this.canvas=HTMLCanvas.create('2D');
			this._context=new RenderContext(width,height,this.canvas);
			this._mouseManager=new MouseManager();
			this._mouseManager.__init__(this,this.canvas.source);
			var _this=this;
			_this.awake();
			this._isOver=false;
			this.canvas.source.addEventListener('mouseover',function(e){
				if (!_$this._isOver){
					_this._isOver=true;
					_this.awake();
					_this._oldStage=Laya.stage;
				}
			});
			this.canvas.source.addEventListener('mouseout',function(e){
				if (_$this._isOver){
					_this._awakeTime=Laya.timer.currTimer;
					_this._isOver=false;
				}
			});
		}

		__class(CanvasView,'laya.editor.comonents.CanvasView',_super);
		var __proto=CanvasView.prototype;
		/**
		*唤醒
		*@param duration 唤醒后，没有鼠标活动后，持续多少时间后自动休眠，0为不休眠
		*/
		__proto.awake=function(duration){
			(duration===void 0)&& (duration=2000);
			this.awakeDuration=duration || Number.MAX_VALUE;
			this._awakeTime=Laya.timer.currTimer;
			this._loop();
			Laya.timer.frameLoop(Math.round(60 / Math.min(1000 / this.awakeInterval,60)),this,this._loop);
		}

		/**
		*休眠
		*/
		__proto.sleep=function(){
			Laya.timer.loop(this.sleepInterval,this,this._loop);
		}

		__proto._loop=function(){
			if (!this._isOver && (Laya.timer.currTimer-this._awakeTime)> this.awakeDuration){
				this.sleep();
			}
			this.render(this._context,0,0);
			return true;
		}

		__proto.render=function(context,x,y){
			if (this.renderingEnabled){
				this._mouseManager.runEvent();
				context.clear();
				RenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y);
				this._repaint=0;
			}
		}

		/**
		*浮动到某个位置
		*@param left x左边
		*@param top y坐标
		*/
		__proto.float=function(left,top){
			var style=this.canvas.source.style;
			style.position='absolute';
			style.left=left+"px";
			style.top=top+"px";
			this._canvasTransform.identity();
			this._canvasTransform.translate(left,top);
		}

		__proto.setScreenSize=function(screenWidth,screenHeight){
			this.renderingEnabled=true;
			this._canvasTransform.identity();
			this._canvasTransform.translate(this.canvas.source.offsetLeft,this.canvas.source.offsetTop);
		}

		__getset(0,__proto,'mouseX',function(){
			return Math.round(this._mouseManager.mouseX / this.clientScaleX);
		});

		__getset(0,__proto,'mouseY',function(){
			return Math.round(this._mouseManager.mouseY / this.clientScaleY);
		});

		return CanvasView;
	})(Stage)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.UIViewBase extends laya.ui.Component
	var UIViewBase=(function(_super){
		function UIViewBase(){
			this.minHandler=null;
			this.maxHandler=null;
			this.isFirstShow=true;
			this.dis=null;
			UIViewBase.__super.call(this);
			this.dis=this;
			this.minHandler=new Handler(this,this.close);
			this.maxHandler=new Handler(this,this.show);
			this.createPanel();
			if (this.dis){
				this.dis.on("mousedown",this,this.bringToTop);
				this.dis.cacheAsBitmap=true;
			}
		}

		__class(UIViewBase,'laya.debug.view.nodeInfo.views.UIViewBase',_super);
		var __proto=UIViewBase.prototype;
		__proto.show=function(){
			DebugInfoLayer.I.setTop();
			DebugInfoLayer.I.popLayer.addChild(this.dis);
			if (this.isFirstShow){
				this.firstShowFun();
				this.isFirstShow=false;
			}
		}

		__proto.firstShowFun=function(){
			this.dis.x=(Laya.stage.width-this.dis.width)*0.5;
			this.dis.y=(Laya.stage.height-this.dis.height)*0.5;
			DisControlTool.intFyDisPos(this.dis);
		}

		__proto.bringToTop=function(){
			DisControlTool.setTop(this.dis);
		}

		__proto.switchShow=function(){
			if (this.dis.parent){
				this.close();
				}else{
				this.show();
			}
		}

		__proto.close=function(){
			this.dis.removeSelf();
		}

		__proto.createPanel=function(){}
		__proto.getInput=function(){
			var input;
			input=new DInput();
			input.size(200,30);
			input.fontSize=30;
			return input;
		}

		__proto.getButton=function(){
			var btn;
			btn=new DButton();
			btn.size(40,30);
			btn.fontSize=30;
			return btn;
		}

		return UIViewBase;
	})(Component)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.comonents.ColorPickerItem extends laya.ui.Component
	var ColorPickerItem=(function(_super){
		function ColorPickerItem(){
			this.text=null;
			this.tColorStr="";
			this.recWidth=20;
			ColorPickerItem.__super.call(this);
			this.mouseEnabled=true;
			this.inits();
		}

		__class(ColorPickerItem,'laya.editor.comonents.ColorPickerItem',_super);
		var __proto=ColorPickerItem.prototype;
		__proto.inits=function(){
			this.text=new EditorTextInput();
			this.text.skin="comp/input_22.png";
			this.text.sizeGrid="0,4,0,4";
			this.addChild(this.text);
			this.text.height=22;
			ColorPickerItem._picker=ColorPickerItem._picker||new ColorPickerPanel();
			this.on("click",this,this.onClick);
			this.on("resize",this,this.freshMe);
			this.text.on("enter",this,this.textChange);
			this.text.on("blur",this,this.textChange);
			this.text.text="";
		}

		__proto.textChange=function(){
			if(this.text.text==""){
				this.colorCleared();
				return;
			}
			if(this.text.text==this.getColorStr())return;
			this.tColorStr=this.text.text;
			this.freshMe();
			this.event("ColorChanged",this);
		}

		__proto.colorChanged=function(){
			this.tColorStr=ColorPickerItem._picker.colorTxt.text;
			this.freshMe();
			this.event("ColorChanged",this);
		}

		__proto.colorCleared=function(){
			this.tColorStr="";
			this.freshMe();
			this.text.text="";
			this.event("COLOR_CLEARED",this);
			this.close();
		}

		__proto.onClick=function(){
			this.open();
		}

		/**
		*打开颜色样本列表面板。
		*/
		__proto.open=function(){
			if(ColorPickerItem._picker.prePickerItem){
				ColorPickerItem._picker.prePickerItem.close();
			}
			if (ColorPickerItem.showed){
				this.close();
				return;
			}
			ColorPickerItem._picker.prePickerItem=this;
			ColorPickerItem.showed=true;
			var p=this.localToGlobal(new Point());
			var px=p.x+ColorPickerItem._picker.width <=Laya.stage.width ? p.x :Laya.stage.width-ColorPickerItem._picker.width;
			var py=p.y+this.height;
			py=py+ColorPickerItem._picker.height <=Laya.stage.height ? py :p.y-ColorPickerItem._picker.height;
			ColorPickerItem._picker.setColor(ColorTool.getRGBByRGBStr(this.tColorStr));
			ColorPickerItem._picker.pos(px,py);
			ColorPickerItem._picker.on("ColorChanged",this,this.colorChanged);
			ColorPickerItem._picker.on("COLOR_CLEARED",this,this.colorCleared);
			Laya.stage.addChild(ColorPickerItem._picker);
			Laya.timer.once(10,this,this.addEvent);
		}

		__proto.addEvent=function(){
			Laya.stage.off("click",this,this.removeColorBox);
			Laya.stage.on("click",this,this.removeColorBox);
		}

		/**
		*关闭颜色样本列表面板。
		*/
		__proto.close=function(){
			Laya.stage.off("click",this,this.removeColorBox);
			ColorPickerItem._picker.removeSelf();
			ColorPickerItem._picker.off("ColorChanged",this,this.colorChanged);
			ColorPickerItem._picker.off("COLOR_CLEARED",this,this.colorCleared);
			ColorPickerItem.showed=false;
		}

		/**
		*舞台的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。
		*/
		__proto.removeColorBox=function(e){
			if (DisControlTool.isInTree(ColorPickerItem._picker,e.target))return;
			this.close();
		}

		// public var tColor:Array;
		__proto.getColorStr=function(){
			if(!this.tColorStr||this.tColorStr==""){
				return "";
				return "#000000";
			}
			return this.tColorStr;
		}

		// return ColorTool.getRGBStr(tColor);
		__proto.setColor=function(color){
			if (this.tColorStr !=color){
				this.tColorStr=color;
				this.freshMe();
			}
		}

		__proto.freshMe=function(){
			var g;
			g=this.graphics;
			g.clear();
			this.text.width=this.width-this.recWidth;
			g.drawRect(this.width-this.recWidth,0,this.recWidth,this.height+2,this.getColorStr());
			this.text.text=this.getColorStr();
		}

		__proto.changeSize=function(){
			_super.prototype.changeSize.call(this);
			this.freshMe();
		}

		ColorPickerItem.showed=false;
		ColorPickerItem._picker=null
		return ColorPickerItem;
	})(Component)


	/**拖动条
	*@author yung
	*/
	//class laya.editor.comonents.DragBar extends laya.ui.Component
	var DragBar=(function(_super){
		function DragBar(mouseType){
			this._map={"R":"WE","L":"WE","T":"NS","B":"NS","BL":"NESW","BR":"NWSE"};
			this._cursorType=null;
			this.isDraging=false;
			DragBar.__super.call(this);
			this._bitmap=new Image();
			(mouseType===void 0)&& (mouseType="R");
			switch(mouseType){
				case "R":
					this._cursorType="e-resize";
					break ;
				case "T":
					this._cursorType="n-resize";
					break ;
				default :
				this._cursorType="default";
				}
			this.on("mouseover",this,this.onRollOver);
			this.on("mouseout",this,this.onRollOut);
			this.mouseEnabled=true;
			Laya.stage.on("mouseout",this,this.onRollOut);
			this.on("dragstart",this,this.dragingBegin);
			this.on("dragend",this,this.dragingEnd);
		}

		__class(DragBar,'laya.editor.comonents.DragBar',_super);
		var __proto=DragBar.prototype;
		__proto.dragingBegin=function(e){
			this.isDraging=true;
		}

		__proto.dragingEnd=function(e){
			this.isDraging=false;
			CursorManager.setType("default");
		}

		__proto.onStageMouseLeave=function(e){
			this.onRollOut();
		}

		__proto.onRollOut=function(e){
			if (this.isDraging)return;
			CursorManager.setType("default");
		}

		__proto.onRollOver=function(e){
			CursorManager.setType(this._cursorType);
		}

		__getset(0,__proto,'cusorType',function(){
			return this._cursorType;
		});

		return DragBar;
	})(Component)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-5-31 下午5:26:05
	*/
	//class laya.editor.comonents.SizeGridPanel extends laya.ui.Component
	var SizeGridPanel=(function(_super){
		function SizeGridPanel(){
			this.dLen=100;
			this.LineWidth=1;
			this.dragWidth=21;
			this.lineColor="#ff0000";
			this.tComp=null;
			this.compContainer=null;
			this.maskSp=null;
			this.topLine=null;
			this.rightLine=null;
			this.downLine=null;
			this.leftLine=null;
			this.tSizeGridStr="0,0,0,0";
			this.hasFill=false;
			this.lineDragArea=new Rectangle();
			this.tarRec=new Rectangle();
			SizeGridPanel.__super.call(this);
			this.size(180,180);
			this.compContainer=new Sprite();
			this.topLine=new Sprite();
			this.rightLine=new Sprite();
			this.downLine=new Sprite();
			this.leftLine=new Sprite();
			this.addLineEvents(this.topLine)
			this.addLineEvents(this.rightLine)
			this.addLineEvents(this.downLine)
			this.addLineEvents(this.leftLine)
			this.compContainer.on("rightmousedown",this,this.onRightDown);
			this.compContainer.on("rightmouseup",this,this.onRightUp);
			this.compContainer.pos(20,20);
			this.addChild(this.compContainer);
			this.on("resize",this,this.resizeFun);
			this.resizeFun();
		}

		__class(SizeGridPanel,'laya.editor.comonents.SizeGridPanel',_super);
		var __proto=SizeGridPanel.prototype;
		__proto.addLineEvents=function(line){
			line.on("mousedown",this,this.lineDown);
			line.on("dragend",this,this.lineDragEnd);
		}

		__proto.lineDown=function(e){
			var tar;
			tar=e.target;
			var dragArea;
			dragArea=this.lineDragArea;
			switch(tar){
				case this.topLine:
				case this.downLine:
					dragArea.setTo(tar.x,-200,0,1000);
					break ;
				case this.rightLine:
				case this.leftLine:
					dragArea.setTo(-200,tar.y,1000,0);
					break ;
				}
			tar.startDrag(dragArea);
		}

		__proto.lineDragEnd=function(e){
			this.updateSizeGridStr();
		}

		__proto.updateSizeGridStr=function(){
			var poss;
			poss=[];
			poss.push(Math.ceil(this.topLine.y-this.tarRec.y));
			poss.push(Math.ceil(this.tarRec.right-this.rightLine.x));
			poss.push(Math.ceil(this.tarRec.bottom-this.downLine.y));
			poss.push(Math.ceil(this.leftLine.x-this.tarRec.x));
			if(this.hasFill)poss.push(1);
			this.tSizeGridStr=poss.join(",");
			this.setSizeGridStr(this.tSizeGridStr);
			this.event("change",this.tSizeGridStr);
		}

		__proto.onRightDown=function(){
			this.compContainer.startDrag();
		}

		__proto.onRightUp=function(){
			this.compContainer.stopDrag();
		}

		__proto.resizeFun=function(){
			this.scrollRect=new Rectangle(0,0,this.width,this.height);
		}

		__proto.setUpView=function(path,type){
			if(type=="TextInput"){
				type="Image";
			}
			if(this.tComp)this.tComp.removeSelf();
			var classObj=Utils$1.getClass(UIConfigManager.getCompProp(type,"className"));
			this.tComp=new classObj();
			this.tComp.mouseEnabled=true;
			this.tComp[UIConfigManager.getCompSkinLabel(type)]=path;
			this.compContainer.addChild(this.tComp);
			Laya.timer.once(200,this,this.updateLines);
		}

		__proto.updateLines=function(){
			var rec;
			rec=this.tComp.getBounds();
			this.tarRec.copyFrom(rec);
			this.compContainer.x=(this.width-this.tarRec.width)*0.5;
			this.compContainer.y=(this.height-this.tarRec.height)*0.5;
			this.tComp.size(this.tarRec.width,this.tarRec.height);
			var dWidth=0;
			dWidth=(this.dragWidth-this.LineWidth)/2;
			this.topLine.graphics.clear();
			this.topLine.graphics.drawLine(0,dWidth,rec.width+2*this.dLen,dWidth,this.lineColor,this.LineWidth);
			this.topLine.x=-this.dLen;
			this.topLine.y=this.tarRec.y;
			this.topLine.pivot(0,dWidth);
			this.topLine.size(rec.width+2*this.dLen,this.dragWidth);
			this.compContainer.addChild(this.topLine);
			this.downLine.graphics.clear();
			this.downLine.graphics.drawLine(0,dWidth,rec.width+2*this.dLen,dWidth,this.lineColor,this.LineWidth);
			this.downLine.x=-this.dLen;
			this.downLine.y=this.tarRec.bottom;
			this.downLine.pivot(0,dWidth);
			this.downLine.size(rec.width+2*this.dLen,this.dragWidth);
			this.compContainer.addChild(this.downLine);
			this.leftLine.graphics.clear();
			this.leftLine.graphics.drawLine(dWidth,0,dWidth,rec.height+2*this.dLen,this.lineColor,this.LineWidth);
			this.leftLine.x=this.tarRec.x;
			this.leftLine.y=-this.dLen;
			this.leftLine.pivot(dWidth,0);
			this.leftLine.size(this.dragWidth,this.tarRec.height+2*this.dLen);
			this.compContainer.addChild(this.leftLine);
			this.rightLine.graphics.clear();
			this.rightLine.graphics.drawLine(dWidth,0,dWidth,rec.height+2*this.dLen,this.lineColor,this.LineWidth);
			this.rightLine.x=this.tarRec.right;
			this.rightLine.y=-this.dLen;
			this.rightLine.pivot(dWidth,0);
			this.rightLine.size(this.dragWidth,this.tarRec.height+2*this.dLen);
			this.compContainer.addChild(this.rightLine);
			this.updateLinePos();
		}

		__proto.updateLinePos=function(){
			var poss;
			poss=this.tSizeGridStr.split(",");
			this.adptStrToNum(poss);
			this.topLine.y=this.tarRec.y+poss[0];
			this.rightLine.x=this.tarRec.right-poss[1];
			this.downLine.y=this.tarRec.bottom-poss[2];
			this.leftLine.x=this.tarRec.x+poss[3];
			this.hasFill=poss[4]?true:false;
		}

		__proto.adptStrToNum=function(arr){
			var i=0,len=0;
			len=arr.length;
			for(i=0;i<len;i++){
				arr[i]=LayaBuilder.mParseInt(arr[i]);
			}
		}

		__proto.setSizeGridStr=function(sizeGridStr){
			this.tSizeGridStr=sizeGridStr;
			this.updateLinePos();
		}

		return SizeGridPanel;
	})(Component)


	/**鼠标提示管理类*/
	//class laya.editor.core.managers.TipManager extends laya.ui.Component
	var TipManager$1=(function(_super){
		function TipManager(){
			this._tipBox=null;
			this._tipText=null;
			this._defaultTipHandler=null;
			TipManager.__super.call(this);
			this._tipBox=new Component();
			this._tipBox.addChild(this._tipText=new TextField());
			this._tipText.x=this._tipText.y=5;
			this._tipText.color="#ffffff";
			this._tipText.leading=3;
			this._tipText.width=300;
			this._tipText.wordWrap=true;
			this._defaultTipHandler=this.showDefaultTip;
			Laya.stage.on("showtip",this,this.onStageShowTip);
			Laya.stage.on("hidetip",this,this.onStageHideTip);
		}

		__class(TipManager,'laya.editor.core.managers.TipManager',_super,'TipManager$1');
		var __proto=TipManager.prototype;
		__proto.onStageHideTip=function(e){
			Laya.timer.clear(this,this.showTip);
			this.closeAll();
			this.removeSelf();
		}

		__proto.onStageShowTip=function(data){
			Laya.timer.once(LayaConfig.tipDelay,this,this.showTip,[data],true);
		}

		__proto.showTip=function(tip){
			if ((typeof tip=='string')){
				var text=String(tip);
				if (Boolean(text)){
					this._defaultTipHandler(text);
				}
				}else if ((tip instanceof laya.utils.Handler )){
				(tip).run();
				}else if ((typeof tip=='function')){
				(tip).apply();
			}
			if (LayaConfig.tipFollowMove){
				Laya.stage.on("mousemove",this,this.onStageMouseMove);
				Laya.stage.on("mousedown",this,this.onStageMouseDown);
			}
			this.onStageMouseMove(null);
		}

		__proto.onStageMouseDown=function(e){
			this.closeAll();
		}

		__proto.onStageMouseMove=function(e){
			DisTools.showToStage(this,TipManager.offsetX,TipManager.offsetY);
		}

		/**关闭所有鼠标提示*/
		__proto.closeAll=function(){
			Laya.timer.clear(this,this.showTip);
			Laya.stage.off("mousemove",this,this.onStageMouseMove);
			Laya.stage.off("mousedown",this,this.onStageMouseDown);
			this.removeChildren();
			HtmlLayerManager.closeTip();
		}

		__proto.showDisTip=function(tip){
			this.addChild(tip);
			DisControlTool.showToStage(this);
			Laya._currentStage.addChild(this);
			HtmlLayerManager.openTip();
		}

		__proto.showDefaultTip=function(text){
			this._tipText.text=text;
			var g=this._tipBox.graphics;
			g.clear();
			g.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,"#111111");
			this.addChild(this._tipBox);
			DisTools.showToStage(this);
			Laya._currentStage.addChild(this);
			HtmlLayerManager.openTip();
		}

		/**默认鼠标提示函数*/
		__getset(0,__proto,'defaultTipHandler',function(){
			return this._defaultTipHandler;
			},function(value){
			this._defaultTipHandler=value;
		});

		TipManager.offsetX=10;
		TipManager.offsetY=15;
		return TipManager;
	})(Component)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-1-11 下午3:02:05
	*/
	//class laya.editor.core.RuleGrid extends laya.ui.Component
	var RuleGrid=(function(_super){
		function RuleGrid(){
			this.type=0;
			RuleGrid.__super.call(this);
			this.cacheAsBitmap=true;
		}

		__class(RuleGrid,'laya.editor.core.RuleGrid',_super);
		var __proto=RuleGrid.prototype;
		__proto.clearMe=function(){
			var g;
			g=this.graphics;
			g.clear();
		}

		__proto.renderMe=function(totalLen,startNum,endNum){
			var numLen=NaN;
			numLen=endNum-startNum;
			var g;
			g=this.graphics;
			g.clear();
			var rate=NaN;
			rate=totalLen/numLen;
			var tNum=NaN;
			var dNum=NaN;
			dNum=this.getMinDlen(rate);
			tNum=Math.ceil(startNum/dNum)*dNum;
			var numI=NaN;
			numI=tNum/dNum;
			var tValue=NaN;
			var lineWidth=1;
			var isFirst=true;
			if(this.type==0){
				this.size(totalLen,50);
				for(tNum=tNum;tNum<endNum;tNum+=dNum){
					tValue=Math.ceil((tNum-startNum)*rate+0.5);
					if(numI%10==0){
						lineWidth=3;
						if(isFirst){
							isFirst=false;
							}else{
							g.fillText(tNum+"",tValue,12,RuleGrid.defaultFont,StyleConsts$1.RuleGridTextColor,"center");
						}
					}else
					if(numI%5==0){
						lineWidth=2;
						if(isFirst){
							isFirst=false;
						}
						}else{
						lineWidth=1;
					}
					g.drawLine(tValue,0,tValue,lineWidth*4,StyleConsts$1.RuleGridLineColor,1);
					numI++;
				}
				}else{
				this.size(50,totalLen);
				for(tNum=tNum;tNum<endNum;tNum+=dNum){
					tValue=Math.ceil((tNum-startNum)*rate+0.5);
					if(numI%10==0){
						lineWidth=3;
						if(isFirst){
							isFirst=false;
							}else{
							g.fillText(tNum+"",15,tValue-5,RuleGrid.defaultFont,StyleConsts$1.RuleGridTextColor,"left");
						}
					}else
					if(numI%5==0){
						lineWidth=2;
						if(isFirst){
							isFirst=false;
						}
						}else{
						lineWidth=1;
					}
					g.drawLine(0,tValue,lineWidth*4,tValue,StyleConsts$1.RuleGridLineColor,1);
					numI++;
				}
			}
		}

		__proto.fillTextH=function(g,tNum,tValue){
			g.fillText(tNum+"",tValue,10,RuleGrid.defaultFont,"#00ffff",null);
		}

		__proto.fillTextV=function(g,tNum,tValue){
			g.fillText(tNum+"",10,tValue,RuleGrid.defaultFont,"#00ffff",null);
		}

		__proto.drawLineH=function(g,tValue,lineWidth){
			g.drawLine(tValue,0,tValue,lineWidth*3,"#ff0000",lineWidth);
		}

		__proto.drawLineV=function(g,tValue,lineWidth){
			g.drawLine(0,tValue,lineWidth*3,tValue,"#ff0000",lineWidth);
		}

		__proto.getMinDlen=function(rate){
			var i=0;
			i=1;
			while(i*rate<5){
				i++;
			}
			return i;
		}

		RuleGrid.Vertic=1;
		RuleGrid.Horizon=0;
		RuleGrid.LineColor="#696969";
		RuleGrid.TextColor="#696969";
		RuleGrid.defaultFont="10px Arial";
		RuleGrid.drawLineWidth=1;
		return RuleGrid;
	})(Component)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo extends laya.debug.view.nodeInfo.recinfos.NodeRecInfo
	var ReCacheRecInfo=(function(_super){
		function ReCacheRecInfo(){
			this.isWorking=false;
			this.count=0;
			this.mTime=0;
			ReCacheRecInfo.__super.call(this);
			this.txt.fontSize=12;
		}

		__class(ReCacheRecInfo,'laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo',_super);
		var __proto=ReCacheRecInfo.prototype;
		__proto.addCount=function(time){
			(time===void 0)&& (time=0);
			this.count++;
			this.mTime+=time;
			if (!this.isWorking){
				this.working=true;
			}
		}

		__proto.updates=function(){
			if (!this._tar["displayedInStage"]){
				this.working=false;
				this.removeSelf();
			}
			this.txt.text=ClassTool.getNodeClassAndName(this._tar)+"\n"+"reCache:"+this.count+"\ntime:"+this.mTime;
			if (this.count > 0){
				this.fresh();
				Laya.timer.clear(this,this.removeSelfLater);
				}else{
				this.working=false;
				Laya.timer.once(3000,this,this.removeSelfLater);
			}
			this.count=0;
			this.mTime=0;
		}

		__proto.removeSelfLater=function(){
			this.working=false;
			this.removeSelf();
		}

		__getset(0,__proto,'working',null,function(v){
			this.isWorking=v;
			if (v){
				Laya.timer.loop(1000,this,this.updates);
				}else{
				Laya.timer.clear(this,this.updates);
			}
		});

		ReCacheRecInfo.showTime=3000;
		return ReCacheRecInfo;
	})(NodeRecInfo)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-19 上午11:59:05
	*/
	//class wraps.binarypic.BinaryBitmap extends laya.resource.FileBitmap
	var BinaryBitmap=(function(_super){
		function BinaryBitmap(){
			BinaryBitmap.__super.call(this);
			this._source=new Browser.window.Image();
		}

		__class(BinaryBitmap,'wraps.binarypic.BinaryBitmap',_super);
		var __proto=BinaryBitmap.prototype;
		__proto.setBinaryData=function(data,url){
			var _$this=this;
			var me;
			this._source.onload=function (){
				Laya.timer.frameOnce(2,me,_$this.myOnLoaded);
				_$this._source.onload=null;
			}
			this._source.src=url+"?V="+Math.random();
			var info;
			info=ImageInfo.imageInfo(data);
			this._w=info.width;
			this._h=info.height;
		}

		__proto.myOnLoaded=function(){
			Notice$1.notify("FRESH_CurView");
		}

		return BinaryBitmap;
	})(FileBitmap)


	/**
	*@private
	*/
	//class laya.display.GraphicAnimation extends laya.display.FrameAnimation
	var GraphicAnimation=(function(_super){
		var GraphicNode;
		function GraphicAnimation(){
			this.animationList=null;
			this.animationDic=null;
			this._nodeList=null;
			this._nodeDefaultProps=null;
			this._gList=null;
			this._nodeIDAniDic={};
			this._rootNode=null;
			this._nodeGDic=null;
			GraphicAnimation.__super.call(this);
		}

		__class(GraphicAnimation,'laya.display.GraphicAnimation',_super);
		var __proto=GraphicAnimation.prototype;
		/**
		*@private
		*/
		__proto._parseNodeList=function(uiView){
			if (!this._nodeList){
				this._nodeList=[];
			}
			this._nodeDefaultProps[uiView.compId]=uiView.props;
			if (uiView.compId)
				this._nodeList.push(uiView.compId);
			var childs=uiView.child;
			if (childs){
				var i=0,len=childs.length;
				for (i=0;i < len;i++){
					this._parseNodeList(childs[i]);
				}
			}
		}

		/**
		*@private
		*/
		__proto._calGraphicData=function(aniData){
			this._setUp(null,aniData);
			this._createGraphicData();
		}

		/**
		*@private
		*/
		__proto._createGraphicData=function(){
			var gList=[];
			var i=0,len=this.count;
			for (i=0;i < len;i++){
				gList.push(this._createFrameGraphic(i));
			}
			this._gList=gList;
		}

		/**
		*@private
		*/
		__proto._createFrameGraphic=function(frame){
			var g=new Graphics();
			if (!GraphicAnimation._rootMatrix)
				GraphicAnimation._rootMatrix=new Matrix();
			this._updateNodeGraphic(this._rootNode,frame,GraphicAnimation._rootMatrix,g);
			return g;
		}

		__proto._updateNodeGraphic=function(node,frame,parentTransfrom,g,alpha){
			(alpha===void 0)&& (alpha=1);
			var tNodeG;
			tNodeG=this._nodeGDic[node.compId]=this._getNodeGraphicData(node.compId,frame,this._nodeGDic[node.compId]);
			if (!tNodeG.resultTransform)
				tNodeG.resultTransform=new Matrix();
			var tResultTransform;
			tResultTransform=tNodeG.resultTransform;
			Matrix.mul(tNodeG.transform,parentTransfrom,tResultTransform);
			var tTex;
			if (tNodeG.skin){
				tTex=this._getTextureByUrl(tNodeG.skin);
				if (tTex){
					if (tResultTransform._checkTransform()){
						g.drawTexture(tTex,0,0,tNodeG.width,tNodeG.height,tResultTransform,tNodeG.alpha *alpha);
						tNodeG.resultTransform=null;
						}else {
						g.drawTexture(tTex,tResultTransform.tx,tResultTransform.ty,tNodeG.width,tNodeG.height,null,tNodeG.alpha *alpha);
					}
				}
			};
			var childs;
			childs=node.child;
			if (!childs)
				return;
			var i=0,len=0;
			len=childs.length;
			for (i=0;i < len;i++){
				this._updateNodeGraphic(childs[i],frame,tResultTransform,g,tNodeG.alpha *alpha);
			}
		}

		__proto._updateNoChilds=function(tNodeG,g){
			if (!tNodeG.skin)return;
			var tTex=this._getTextureByUrl(tNodeG.skin);
			if (!tTex)return;
			var tTransform=tNodeG.transform;
			tTransform._checkTransform();
			var onlyTranslate=false;
			onlyTranslate=!tTransform.bTransform;
			if (!onlyTranslate){
				g.drawTexture(tTex,0,0,tNodeG.width,tNodeG.height,tTransform.clone(),tNodeG.alpha);
				}else {
				g.drawTexture(tTex,tTransform.tx,tTransform.ty,tNodeG.width,tNodeG.height,null,tNodeG.alpha);
			}
		}

		__proto._updateNodeGraphic2=function(node,frame,g){
			var tNodeG;
			tNodeG=this._nodeGDic[node.compId]=this._getNodeGraphicData(node.compId,frame,this._nodeGDic[node.compId]);
			if (!node.child){
				this._updateNoChilds(tNodeG,g);
				return;
			};
			var tTransform=tNodeG.transform;
			tTransform._checkTransform();
			var onlyTranslate=false;
			onlyTranslate=!tTransform.bTransform;
			var hasTrans=false;
			hasTrans=onlyTranslate && (tTransform.tx !=0 || tTransform.ty !=0);
			var ifSave=false;
			ifSave=(tTransform.bTransform)|| tNodeG.alpha !=1;
			if (ifSave){
				g.save();
			}
			if (tNodeG.alpha !=1){
				g.alpha(tNodeG.alpha);
			}
			if (!onlyTranslate){
				g.transform(tTransform.clone());
				}else if (hasTrans){
				g.translate(tTransform.tx,tTransform.ty);
			};
			var childs;
			childs=node.child;
			var tTex;
			if (tNodeG.skin){
				tTex=this._getTextureByUrl(tNodeG.skin);
				if (tTex){
					g.drawTexture(tTex,0,0,tNodeG.width,tNodeG.height);
				}
			}
			if (childs){
				var i=0,len=0;
				len=childs.length;
				for (i=0;i < len;i++){
					this._updateNodeGraphic2(childs[i],frame,g);
				}
			}
			if (ifSave){
				g.restore();
				}else {
				if (!onlyTranslate){
					g.transform(tTransform.clone().invert());
					}else if (hasTrans){
					g.translate(-tTransform.tx,-tTransform.ty);
				}
			}
		}

		/**
		*@private
		*/
		__proto._calculateNodeKeyFrames=function(node){
			_super.prototype._calculateNodeKeyFrames.call(this,node);
			this._nodeIDAniDic[node.target]=node;
		}

		/**
		*@private
		*/
		__proto.getNodeDataByID=function(nodeID){
			return this._nodeIDAniDic[nodeID];
		}

		/**
		*@private
		*/
		__proto._getParams=function(obj,params,frame,obj2){
			var rst=GraphicAnimation._temParam;
			rst.length=params.length;
			var i=0,len=params.length;
			for (i=0;i < len;i++){
				rst[i]=this._getObjVar(obj,params[i][0],frame,params[i][1],obj2);
			}
			return rst;
		}

		/**
		*@private
		*/
		__proto._getObjVar=function(obj,key,frame,noValue,obj2){
			if (obj.hasOwnProperty(key)){
				var vArr=obj[key];
				if (frame >=vArr.length)
					frame=vArr.length-1;
				return obj[key][frame];
			}
			if (obj2.hasOwnProperty(key)){
				return obj2[key];
			}
			return noValue;
		}

		__proto._getNodeGraphicData=function(nodeID,frame,rst){
			if (!rst)
				rst=new GraphicNode();
			if (!rst.transform){
				rst.transform=new Matrix();
				}else {
				rst.transform.identity();
			};
			var node=this.getNodeDataByID(nodeID);
			if (!node)
				return rst;
			var frameData=node.frames;
			var params=this._getParams(frameData,GraphicAnimation._drawTextureCmd,frame,this._nodeDefaultProps[nodeID]);
			var url=params[0];
			var width=NaN,height=NaN;
			var px=params[5],py=params[6];
			var aX=params[13],aY=params[14];
			var sx=params[7],sy=params[8];
			var rotate=params[9];
			var skewX=params[11],skewY=params[12]
			width=params[3];
			height=params[4];
			var tex;
			rst.skin=url;
			if (url){
				tex=this._getTextureByUrl(url);
				if (tex){
					}else {
					console.warn("lost skin:",url);
				}
			}
			rst.width=width;
			rst.height=height;
			rst.alpha=params[10];
			var m;
			m=rst.transform;
			if (aX !=0){
				px=aX *width;
			}
			if (aY !=0){
				py=aY *height;
			}
			if (px !=0 || py !=0){
				m.translate(-px,-py);
			};
			var tm=null;
			if (rotate || sx!==1 || sy!==1 || skewX || skewY){
				tm=GraphicAnimation._tempMt;
				tm.identity();
				tm.bTransform=true;
				var skx=(rotate-skewX)*0.0174532922222222;
				var sky=(rotate+skewY)*0.0174532922222222;
				var cx=Math.cos(sky);
				var ssx=Math.sin(sky);
				var cy=Math.sin(skx);
				var ssy=Math.cos(skx);
				tm.a=sx *cx;
				tm.b=sx *ssx;
				tm.c=-sy *cy;
				tm.d=sy *ssy;
				tm.tx=tm.ty=0;
			}
			if (tm){
				m=Matrix.mul(m,tm,m);
			}
			m.translate(params[1],params[2]);
			return rst;
		}

		/**
		*@private
		*/
		__proto._getTextureByUrl=function(url){
			return Loader.getRes(url);
		}

		/**
		*@private
		*/
		__proto.setAniData=function(uiView){
			if (uiView.animations){
				this._nodeDefaultProps={};
				this._nodeGDic={};
				if (this._nodeList)
					this._nodeList.length=0;
				this._rootNode=uiView;
				this._parseNodeList(uiView);
				var aniDic={};
				var anilist=[];
				var animations=uiView.animations;
				var i=0,len=animations.length;
				var tAniO;
				for (i=0;i < len;i++){
					tAniO=animations[i];
					this._labels=null;
					if (!tAniO)
						continue ;
					try {
						this._calGraphicData(tAniO);
						}catch (e){
						console.warn("parse animation fail:"+tAniO.name+",empty animation created");
						this._gList=[];
					};
					var frameO={};
					frameO.interval=1000 / tAniO["frameRate"];
					frameO.frames=this._gList;
					frameO.labels=this._labels;
					frameO.name=tAniO.name;
					anilist.push(frameO);
					aniDic[tAniO.name]=frameO;
				}
				this.animationList=anilist;
				this.animationDic=aniDic;
			}
			GraphicAnimation._temParam.length=0;
		}

		/**
		*@private
		*/
		__proto._clear=function(){
			this.animationList=null;
			this.animationDic=null;
			this._gList=null;
			this._nodeGDic=null;
		}

		GraphicAnimation.parseAnimationData=function(aniData){
			if (!GraphicAnimation._I)
				GraphicAnimation._I=new GraphicAnimation();
			GraphicAnimation._I.setAniData(aniData);
			var rst;
			rst={};
			rst.animationList=GraphicAnimation._I.animationList;
			rst.animationDic=GraphicAnimation._I.animationDic;
			GraphicAnimation._I._clear();
			return rst;
		}

		GraphicAnimation._temParam=[];
		GraphicAnimation._I=null
		GraphicAnimation._rootMatrix=null
		__static(GraphicAnimation,
		['_drawTextureCmd',function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",0],["height",0],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]];},'_tempMt',function(){return this._tempMt=new Matrix();}
		]);
		GraphicAnimation.__init$=function(){
			//class GraphicNode
			GraphicNode=(function(){
				function GraphicNode(){
					this.skin=null;
					this.transform=null;
					this.resultTransform=null;
					this.width=NaN;
					this.height=NaN;
					this.alpha=1;
				}
				__class(GraphicNode,'');
				return GraphicNode;
			})()
		}

		return GraphicAnimation;
	})(FrameAnimation)


	/**
	*动效类
	*@author ww
	*/
	//class laya.ui.EffectAnimation extends laya.display.FrameAnimation
	var EffectAnimation=(function(_super){
		function EffectAnimation(){
			this._target=null;
			this._playEvents=null;
			this._initData={};
			this._aniKeys=null;
			this._effectClass=null;
			EffectAnimation.__super.call(this);
		}

		__class(EffectAnimation,'laya.ui.EffectAnimation',_super);
		var __proto=EffectAnimation.prototype;
		/**@private */
		__proto._onOtherBegin=function(effect){
			if (effect==this)
				return;
			this.stop();
		}

		/**@private */
		__proto.addEvent=function(){
			if (!this._target || !this._playEvents)
				return;
			this._setControlNode(this._target);
			this._target.on(this._playEvents,this,this._onPlayAction);
		}

		/**@private */
		__proto._onPlayAction=function(){
			if (!this._target)
				return;
			this._target.event("effectanimationbegin",[this]);
			this._recordInitData();
			this.play(0,false);
		}

		/**@private */
		__proto._recordInitData=function(){
			if (!this._aniKeys)
				return;
			var i=0,len=0;
			len=this._aniKeys.length;
			var key;
			for (i=0;i < len;i++){
				key=this._aniKeys[i];
				this._initData[key]=this._target[key];
			}
		}

		/**@private */
		__proto._displayToIndex=function(value){
			if (!this._animationData)
				return;
			if (value < 0)
				value=0;
			if (value > this._count)
				value=this._count;
			var nodes=this._animationData.nodes,i=0,len=nodes.length;
			len=len > 1 ? 1 :len;
			for (i=0;i < len;i++){
				this._displayNodeToFrame(nodes[i],value);
			}
		}

		/**@private */
		__proto._displayNodeToFrame=function(node,frame,targetDic){
			if (!this._target)
				return;
			var target;
			target=this._target;
			var frames=node.frames,key,propFrames,value;
			var keys=node.keys,i=0,len=keys.length;
			var secondFrames;
			secondFrames=node.secondFrames;
			var tSecondFrame=0;
			var easeFun;
			var tKeyFrames;
			var startFrame;
			var endFrame;
			for (i=0;i < len;i++){
				key=keys[i];
				propFrames=frames[key];
				tSecondFrame=secondFrames[key];
				if (tSecondFrame==-1){
					value=this._initData[key];
				}
				else {
					if (frame < tSecondFrame){
						tKeyFrames=node.keyframes[key];
						startFrame=tKeyFrames[0];
						if (startFrame.tween){
							easeFun=Ease[startFrame.tweenMethod];
							if (easeFun==null){
								easeFun=Ease.linearNone;
							}
							endFrame=tKeyFrames[1];
							value=easeFun(frame,this._initData[key],endFrame.value-this._initData[key],endFrame.index);
						}
						else {
							value=this._initData[key];
						}
					}
					else {
						if (propFrames.length > frame){
							value=propFrames[frame];
						}
						else {
							value=propFrames[propFrames.length-1];
						}
					}
				}
				target[key]=value;
			}
		}

		/**@private */
		__proto._calculateNodeKeyFrames=function(node){
			_super.prototype._calculateNodeKeyFrames.call(this,node);
			var keyFrames=node.keyframes,key,tKeyFrames,target=node.target;
			var secondFrames;
			secondFrames={};
			node.secondFrames=secondFrames;
			for (key in keyFrames){
				tKeyFrames=keyFrames[key];
				if (tKeyFrames.length <=1){
					secondFrames[key]=-1;
				}
				else {
					secondFrames[key]=tKeyFrames[1].index;
				}
			}
		}

		/**
		*控制对象
		*@param v
		*
		*/
		/**
		*控制对象
		*@return
		*
		*/
		__getset(0,__proto,'target',function(){
			return this._target;
			},function(v){
			if (this._target){
				this._target.off("effectanimationbegin",this,this._onOtherBegin);
			}
			this._target=v;
			if (this._target){
				this._target.on("effectanimationbegin",this,this._onOtherBegin);
			}
			this.addEvent();
		});

		/**
		*设置开始播放的事件
		*@param event
		*
		*/
		__getset(0,__proto,'playEvent',null,function(event){
			this._playEvents=event;
			if (!event)
				return;
			this.addEvent();
		});

		/**
		*设置提供数据的类
		*@param classStr 类路径
		*
		*/
		__getset(0,__proto,'effectClass',null,function(classStr){
			this._effectClass=ClassUtils.getClass(classStr);
			if (this._effectClass){
				var uiData;
				uiData=this._effectClass["uiView"];
				if (uiData){
					var aniData;
					aniData=uiData["animations"];
					if (aniData && aniData[0]){
						this._setUp({},aniData[0]);
						if (aniData[0].nodes && aniData[0].nodes[0]){
							this._aniKeys=aniData[0].nodes[0].keys;
						}
					}
				}
			}
		});

		EffectAnimation.EffectAnimationBegin="effectanimationbegin";
		return EffectAnimation;
	})(FrameAnimation)


	/**
	*关键帧动画播放类
	*
	*/
	//class laya.ui.FrameClip extends laya.display.FrameAnimation
	var FrameClip=(function(_super){
		/**
		*创建一个 <code>FrameClip</code> 实例。
		*/
		function FrameClip(){
			FrameClip.__super.call(this);
		}

		__class(FrameClip,'laya.ui.FrameClip',_super);
		return FrameClip;
	})(FrameAnimation)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.tools.debugUI.DInput extends laya.display.Input
	var DInput=(function(_super){
		function DInput(){
			DInput.__super.call(this);
			this.bgColor="#11ff00";
		}

		__class(DInput,'laya.debug.tools.debugUI.DInput',_super);
		return DInput;
	})(Input)


	/**
	*<code>View</code> 是一个视图类。
	*@internal <p><code>View</code></p>
	*/
	//class laya.ui.View extends laya.ui.Box
	var View=(function(_super){
		function View(){
			this._idMap=null;
			this._aniList=null;
			View.__super.call(this);
		}

		__class(View,'laya.ui.View',_super);
		var __proto=View.prototype;
		/**
		*@private
		*通过视图数据创建视图。
		*@param uiView 视图数据信息。
		*/
		__proto.createView=function(uiView){
			if (uiView.animations && !this._idMap)this._idMap={};
			View.createComp(uiView,this,this);
			if (uiView.animations){
				var anilist=[];
				var animations=uiView.animations;
				var i=0,len=animations.length;
				var tAni;
				var tAniO;
				for (i=0;i < len;i++){
					tAni=new FrameClip();
					tAniO=animations[i];
					tAni._setUp(this._idMap,tAniO);
					this[tAniO.name]=tAni;
					tAni._setControlNode(this);
					switch (tAniO.action){
						case 1:
							tAni.play(0,false);
							break ;
						case 2:
							tAni.play(0,true);
							break ;
						}
					anilist.push(tAni);
				}
				this._aniList=anilist;
			}
			if (this._width > 0 && uiView.props.hitTestPrior==null && !this.mouseThrough)this.hitTestPrior=true;
		}

		/**
		*@private
		*装载UI视图。用于加载模式。
		*@param path UI资源地址。
		*/
		__proto.loadUI=function(path){
			var uiView=View.uiMap[path];
			uiView && this.createView(uiView);
		}

		/**
		*<p>销毁此对象。</p>
		*@param destroyChild 是否同时销毁子节点，若值为true,则销毁子节点，否则不销毁子节点。
		*/
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			if (this._aniList)this._aniList.length=0;
			this._idMap=null;
			this._aniList=null;
			laya.ui.Component.prototype.destroy.call(this,destroyChild);
		}

		View._regs=function(){
			var key;
			for (key in View.uiClassMap){
				ClassUtils.regClass(key,View.uiClassMap[key]);
			}
		}

		View.createComp=function(uiView,comp,view){
			comp=comp || View.getCompInstance(uiView);
			if (!comp){
				console.warn("can not create:"+uiView.type);
				return null;
			};
			var child=uiView.child;
			if (child){
				for (var i=0,n=child.length;i < n;i++){
					var node=child[i];
					if (comp.hasOwnProperty("itemRender")&& (node.props.name=="render" || node.props.renderType==="render")){
						(comp).itemRender=node;
						}else if (node.type=="Graphic"){
						ClassUtils.addGraphicsToSprite(node,comp);
						}else if (ClassUtils.isDrawType(node.type)){
						ClassUtils.addGraphicToSprite(node,comp,true);
						}else {
						var tChild=View.createComp(node,null,view);
						if (node.type=="Script"){
							if (tChild.hasOwnProperty("owner")){
								tChild["owner"]=comp;
								}else if (tChild.hasOwnProperty("target")){
								tChild["target"]=comp;
							}
							}else if (node.props.renderType=="mask" || node.props.name=="mask"){
							comp.mask=tChild;
							}else {(
							tChild instanceof laya.display.Sprite )&& comp.addChild(tChild);
						}
					}
				}
			};
			var props=uiView.props;
			for (var prop in props){
				var value=props[prop];
				View.setCompValue(comp,prop,value,view);
			}
			if (Laya.__typeof(comp,'laya.ui.IItem'))(comp).initItems();
			if (uiView.compId && view && view._idMap){
				view._idMap[uiView.compId]=comp;
			}
			return comp;
		}

		View.setCompValue=function(comp,prop,value,view){
			if (prop==="var" && view){
				view[value]=comp;
				}else {
				comp[prop]=(value==="true" ? true :(value==="false" ? false :value))
			}
		}

		View.getCompInstance=function(json){
			var runtime=json.props?json.props.runtime:null;
			var compClass;
			compClass=runtime ? (View.viewClassMap[runtime] || View.uiClassMap[runtime]|| Laya["__classmap"][runtime]):View.uiClassMap[json.type];
			if (json.props && json.props.hasOwnProperty("renderType")&& json.props["renderType"]=="instance")return compClass["instance"];
			return compClass ? new compClass():null;
		}

		View.regComponent=function(key,compClass){
			View.uiClassMap[key]=compClass;
			ClassUtils.regClass(key,compClass);
		}

		View.regViewRuntime=function(key,compClass){
			View.viewClassMap[key]=compClass;
		}

		View.uiMap={};
		View.viewClassMap={};
		__static(View,
		['uiClassMap',function(){return this.uiClassMap={"ViewStack":ViewStack,"LinkButton":Button,"TextArea":TextArea,"ColorPicker":ColorPicker,"Box":Box,"Button":Button,"CheckBox":CheckBox,"Clip":Clip,"ComboBox":ComboBox,"Component":Component,"HScrollBar":HScrollBar,"HSlider":HSlider,"Image":Image,"Label":Label,"List":List,"Panel":Panel,"ProgressBar":ProgressBar,"Radio":Radio,"RadioGroup":RadioGroup,"ScrollBar":ScrollBar,"Slider":Slider,"Tab":Tab,"TextInput":TextInput,"View":View,"VScrollBar":VScrollBar,"VSlider":VSlider,"Tree":Tree,"HBox":HBox,"VBox":VBox,"Sprite":Sprite,"Animation":Animation,"Text":Text,"FontClip":FontClip};}
		]);
		View.__init$=function(){
			View._regs()
		}

		return View;
	})(Box)


	/**
	*<code>CheckBox</code> 组件显示一个小方框，该方框内可以有选中标记。
	*<code>CheckBox</code> 组件还可以显示可选的文本标签，默认该标签位于 CheckBox 右侧。
	*<p><code>CheckBox</code> 使用 <code>dataSource</code>赋值时的的默认属性是：<code>selected</code>。</p>
	*
	*@example 以下示例代码，创建了一个 <code>CheckBox</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.CheckBox;
		*import laya.utils.Handler;
		*public class CheckBox_Example
		*{
			*public function CheckBox_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load("resource/ui/check.png",Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*trace("资源加载完成！");
				*var checkBox:CheckBox=new CheckBox("resource/ui/check.png","这个是一个CheckBox组件。");//创建一个 CheckBox 类的实例对象 checkBox ,传入它的皮肤skin和标签label。
				*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。
				*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。
				*checkBox.clickHandler=new Handler(this,onClick,[checkBox]);//设置 checkBox 的点击事件处理器。
				*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。
				*}
			*private function onClick(checkBox:CheckBox):void
			*{
				*trace("输出选中状态: checkBox.selected = "+checkBox.selected);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load("resource/ui/check.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*function loadComplete()
	*{
		*console.log("资源加载完成！");
		*var checkBox:laya.ui.CheckBox=new laya.ui.CheckBox("resource/ui/check.png","这个是一个CheckBox组件。");//创建一个 CheckBox 类的类的实例对象 checkBox ,传入它的皮肤skin和标签label。
		*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。
		*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。
		*checkBox.clickHandler=new laya.utils.Handler(this,this.onClick,[checkBox],false);//设置 checkBox 的点击事件处理器。
		*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。
		*}
	*function onClick(checkBox)
	*{
		*console.log("checkBox.selected = ",checkBox.selected);
		*}
	*</listing>
	*<listing version="3.0">
	*import CheckBox=laya.ui.CheckBox;
	*import Handler=laya.utils.Handler;
	*class CheckBox_Example{
		*constructor()
		*{
			*Laya.init(640,800);
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load("resource/ui/check.png",Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete()
		*{
			*var checkBox:CheckBox=new CheckBox("resource/ui/check.png","这个是一个CheckBox组件。");//创建一个 CheckBox 类的实例对象 checkBox ,传入它的皮肤skin和标签label。
			*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。
			*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。
			*checkBox.clickHandler=new Handler(this,this.onClick,[checkBox]);//设置 checkBox 的点击事件处理器。
			*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。
			*}
		*private onClick(checkBox:CheckBox):void
		*{
			*console.log("输出选中状态: checkBox.selected = "+checkBox.selected);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.CheckBox extends laya.ui.Button
	var CheckBox=(function(_super){
		/**
		*创建一个新的 <code>CheckBox</code> 组件实例。
		*@param skin 皮肤资源地址。
		*@param label 文本标签的内容。
		*/
		function CheckBox(skin,label){
			(label===void 0)&& (label="");
			CheckBox.__super.call(this,skin,label);
		}

		__class(CheckBox,'laya.ui.CheckBox',_super);
		var __proto=CheckBox.prototype;
		/**@inheritDoc */
		__proto.preinitialize=function(){
			laya.ui.Component.prototype.preinitialize.call(this);
			this.toggle=true;
			this._autoSize=false;
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			_super.prototype.initialize.call(this);
			this.createText();
			this._text.align="left";
			this._text.valign="top";
			this._text.width=0;
		}

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if ((typeof value=='boolean'))this.selected=value;
			else if ((typeof value=='string'))this.selected=value==="true";
			else _super.prototype._$set_dataSource.call(this,value);
		});

		return CheckBox;
	})(Button)


	/**
	*<code>LayoutBox</code> 是一个布局容器类。
	*/
	//class laya.ui.LayoutBox extends laya.ui.Box
	var LayoutBox=(function(_super){
		function LayoutBox(){
			this._space=0;
			this._align="none";
			this._itemChanged=false;
			LayoutBox.__super.call(this);
		}

		__class(LayoutBox,'laya.ui.LayoutBox',_super);
		var __proto=LayoutBox.prototype;
		/**@inheritDoc */
		__proto.addChild=function(child){
			child.on("resize",this,this.onResize);
			this._setItemChanged();
			return laya.display.Node.prototype.addChild.call(this,child);
		}

		__proto.onResize=function(e){
			this._setItemChanged();
		}

		/**@inheritDoc */
		__proto.addChildAt=function(child,index){
			child.on("resize",this,this.onResize);
			this._setItemChanged();
			return laya.display.Node.prototype.addChildAt.call(this,child,index);
		}

		/**@inheritDoc */
		__proto.removeChild=function(child){
			child.off("resize",this,this.onResize);
			this._setItemChanged();
			return laya.display.Node.prototype.removeChild.call(this,child);
		}

		/**@inheritDoc */
		__proto.removeChildAt=function(index){
			this.getChildAt(index).off("resize",this,this.onResize);
			this._setItemChanged();
			return laya.display.Node.prototype.removeChildAt.call(this,index);
		}

		/**刷新。*/
		__proto.refresh=function(){
			this._setItemChanged();
		}

		/**
		*改变子对象的布局。
		*/
		__proto.changeItems=function(){
			this._itemChanged=false;
		}

		/**
		*排序项目列表。可通过重写改变默认排序规则。
		*@param items 项目列表。
		*/
		__proto.sortItem=function(items){
			if (items)items.sort(function(a,b){return a.y-b.y;});
		}

		__proto._setItemChanged=function(){
			if (!this._itemChanged){
				this._itemChanged=true;
				this.callLater(this.changeItems);
			}
		}

		/**子对象的间隔。*/
		__getset(0,__proto,'space',function(){
			return this._space;
			},function(value){
			this._space=value;
			this._setItemChanged();
		});

		/**子对象对齐方式。*/
		__getset(0,__proto,'align',function(){
			return this._align;
			},function(value){
			this._align=value;
			this._setItemChanged();
		});

		return LayoutBox;
	})(Box)


	/**
	*
	*简单易用的位图字体类
	*
	*/
	//class laya.ui.FontClip extends laya.ui.Clip
	var FontClip=(function(_super){
		function FontClip(url,clipX,clipY){
			this._sheet=null;
			this._valueArr=[];
			this._xDirection=true;
			this._direction="horizontal";
			this._spaceX=0;
			this._spaceY=0;
			this._strValue=null;
			this._indexDir=[];
			FontClip.__super.call(this);
			(clipX===void 0)&& (clipX=1);
			(clipY===void 0)&& (clipY=1);
			this._clipX=clipX;
			this._clipY=clipY;
			this.skin=url;
		}

		__class(FontClip,'laya.ui.FontClip',_super);
		var __proto=FontClip.prototype;
		__proto.createChildren=function(){
			this._bitmap=new AutoBitmap();
			this.on("loaded",this,this.onClipLoaded);
		}

		/**
		*资源加载完毕
		*/
		__proto.onClipLoaded=function(){
			this.callLater(this.changeValue);
		}

		/**渲染数值*/
		__proto.changeValue=function(){
			if(this.sources==null)
				return;
			this.graphics.clear();
			var texture;
			for(var i=0,sz=this._valueArr.length;i<sz;i++){
				var index=this._indexDir[this._valueArr[i]];
				if (!this.sources[index])continue ;
				texture=this.sources[index];
				if(this._xDirection){
					this.graphics.drawTexture(texture,i *(texture.width+this.spaceX),0,texture.width,texture.height);
					}else{
					this.graphics.drawTexture(texture,0,i *(texture.height+this.spaceY),texture.width,texture.height);
				}
			}
			if (!texture)return;
			if(this._xDirection){
				this.size(this._valueArr.length*(texture.width+this.spaceX),texture.height);
				}else{
				this.size(texture.width,(texture.height+this.spaceY)*this._valueArr.length);
			}
		}

		__proto.dispose=function(){
			this._valueArr=null;
			this._indexDir=null;
			this.graphics.clear();
			this.removeSelf();
			this.off("loaded",this,this.onClipLoaded);
			_super.prototype.dispose.call(this);
		}

		/**
		*设置位图字体内容
		*@param value
		*/
		__getset(0,__proto,'sheet',function(){
			return this._sheet;
			},function(value){
			this._indexDir=[];
			value=String(value+"");
			this._sheet=value;
			for(var i=0;i<value.length;i++){
				this._indexDir[value.charAt(i)]=i;
			}
		});

		/**
		*布局方向。
		*<p>默认值为"horizontal"。</p>
		*<p><b>取值：</b>
		*<li>"horizontal"：表示水平布局。</li>
		*<li>"vertical"：表示垂直布局。</li>
		*</p>
		*/
		__getset(0,__proto,'direction',function(){
			return this._direction;
			},function(value){
			this._direction=value;
			this._xDirection=(value=="horizontal");
			this.callLater(this.changeValue);
		});

		/**
		*设置问题字体的显示内容
		*@param value
		*/
		__getset(0,__proto,'value',function(){
			return this._valueArr.join("");
			},function(value){
			value=String(value+"");
			this._valueArr=value.split("");
			this.callLater(this.changeValue);
		});

		/**资源加载完成*/
		__getset(0,__proto,'sources',function(){
			return this._sources;
			},function(value){
			_super.prototype._$set_sources.call(this,value);
			this.callLater(this.changeValue);
		});

		/**X方向间隙*/
		__getset(0,__proto,'spaceX',function(){
			return this._spaceX;
			},function(value){
			this._spaceX=value;
			if(this._xDirection)
				this.callLater(this.changeValue);
		});

		/**Y方向间隙*/
		__getset(0,__proto,'spaceY',function(){
			return this._spaceY;
			},function(value){
			this._spaceY=value;
			if(!this._xDirection)
				this.callLater(this.changeValue);
		});

		return FontClip;
	})(Clip)


	/**
	*<code>List</code> 控件可显示项目列表。默认为垂直方向列表。可通过UI编辑器自定义列表。
	*
	*@example 以下示例代码，创建了一个 <code>List</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.List;
		*import laya.utils.Handler;
		*public class List_Example
		*{
			*public function List_Example()
			*{
				*Laya.init(640,800,"false");//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"],Handler.create(this,onLoadComplete));
				*}
			*private function onLoadComplete():void
			*{
				*var arr:Array=[];//创建一个数组，用于存贮列表的数据信息。
				*for (var i:int=0;i &lt;20;i++)
				*{
					*arr.push({label:"item"+i});
					*}
				*var list:List=new List();//创建一个 List 类的实例对象 list 。
				*list.itemRender=Item;//设置 list 的单元格渲染器。
				*list.repeatX=1;//设置 list 的水平方向单元格数量。
				*list.repeatY=10;//设置 list 的垂直方向单元格数量。
				*list.vScrollBarSkin="resource/ui/vscroll.png";//设置 list 的垂直方向滚动条皮肤。
				*list.array=arr;//设置 list 的列表数据源。
				*list.pos(100,100);//设置 list 的位置。
				*list.selectEnable=true;//设置 list 可选。
				*list.selectHandler=new Handler(this,onSelect);//设置 list 改变选择项执行的处理器。
				*Laya.stage.addChild(list);//将 list 添加到显示列表。
				*}
			*private function onSelect(index:int):void
			*{
				*trace("当前选择的项目索引： index= ",index);
				*}
			*}
		*}
	*import laya.ui.Box;
	*import laya.ui.Label;
	*class Item extends Box
	*{
		*public function Item()
		*{
			*graphics.drawRect(0,0,100,20,null,"#ff0000");
			*var label:Label=new Label();
			*label.text="100000";
			*label.name="label";//设置 label 的name属性值。
			*label.size(100,20);
			*addChild(label);
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*(function (_super){
		*function Item(){
			*Item.__super.call(this);//初始化父类
			*this.graphics.drawRect(0,0,100,20,"#ff0000");
			*var label=new laya.ui.Label();//创建一个 Label 类的实例对象 label 。
			*label.text="100000";//设置 label 的文本内容。
			*label.name="label";//设置 label 的name属性值。
			*label.size(100,20);//设置 label 的宽度、高度。
			*this.addChild(label);//将 label 添加到显示列表。
			*};
		*Laya.class(Item,"mypackage.listExample.Item",_super);//注册类 Item 。
		*})(laya.ui.Box);
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
	*var res=["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"];
	*Laya.loader.load(res,new laya.utils.Handler(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*var arr=[];//创建一个数组，用于存贮列表的数据信息。
		*for (var i=0;i &lt;20;i++){
			*arr.push({label:"item"+i});
			*}
		*var list=new laya.ui.List();//创建一个 List 类的实例对象 list 。
		*list.itemRender=mypackage.listExample.Item;//设置 list 的单元格渲染器。
		*list.repeatX=1;//设置 list 的水平方向单元格数量。
		*list.repeatY=10;//设置 list 的垂直方向单元格数量。
		*list.vScrollBarSkin="resource/ui/vscroll.png";//设置 list 的垂直方向滚动条皮肤。
		*list.array=arr;//设置 list 的列表数据源。
		*list.pos(100,100);//设置 list 的位置。
		*list.selectEnable=true;//设置 list 可选。
		*list.selectHandler=new laya.utils.Handler(this,onSelect);//设置 list 改变选择项执行的处理器。
		*Laya.stage.addChild(list);//将 list 添加到显示列表。
		*}
	*function onSelect(index)
	*{
		*console.log("当前选择的项目索引： index= ",index);
		*}
	*
	*</listing>
	*<listing version="3.0">
	*import List=laya.ui.List;
	*import Handler=laya.utils.Handler;
	*public class List_Example {
		*public List_Example(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"],Handler.create(this,this.onLoadComplete));
			*}
		*private onLoadComplete():void {
			*var arr=[];//创建一个数组，用于存贮列表的数据信息。
			*for (var i:number=0;i &lt;20;i++)
			*{
				*arr.push({label:"item"+i });
				*}
			*var list:List=new List();//创建一个 List 类的实例对象 list 。
			*list.itemRender=Item;//设置 list 的单元格渲染器。
			*list.repeatX=1;//设置 list 的水平方向单元格数量。
			*list.repeatY=10;//设置 list 的垂直方向单元格数量。
			*list.vScrollBarSkin="resource/ui/vscroll.png";//设置 list 的垂直方向滚动条皮肤。
			*list.array=arr;//设置 list 的列表数据源。
			*list.pos(100,100);//设置 list 的位置。
			*list.selectEnable=true;//设置 list 可选。
			*list.selectHandler=new Handler(this,this.onSelect);//设置 list 改变选择项执行的处理器。
			*Laya.stage.addChild(list);//将 list 添加到显示列表。
			*}
		*private onSelect(index:number):void {
			*console.log("当前选择的项目索引： index= ",index);
			*}
		*}
	*import Box=laya.ui.Box;
	*import Label=laya.ui.Label;
	*class Item extends Box {
		*constructor(){
			*this.graphics.drawRect(0,0,100,20,null,"#ff0000");
			*var label:Label=new Label();
			*label.text="100000";
			*label.name="label";//设置 label 的name属性值。
			*label.size(100,20);
			*this.addChild(label);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.List extends laya.ui.Box
	var List=(function(_super){
		function List(){
			this.selectHandler=null;
			this.renderHandler=null;
			this.mouseHandler=null;
			this.selectEnable=false;
			this.totalPage=0;
			this._content=null;
			this._scrollBar=null;
			this._itemRender=null;
			this._repeatX=0;
			this._repeatY=0;
			this._repeatX2=0;
			this._repeatY2=0;
			this._spaceX=0;
			this._spaceY=0;
			this._array=null;
			this._startIndex=0;
			this._selectedIndex=-1;
			this._page=0;
			this._isVertical=true;
			this._cellSize=20;
			this._cellOffset=0;
			this._isMoved=false;
			this.cacheContent=false;
			this._createdLine=0;
			this._cellChanged=false;
			List.__super.call(this);
			this._cells=[];
			this._offset=new Point();
		}

		__class(List,'laya.ui.List',_super);
		var __proto=List.prototype;
		Laya.imps(__proto,{"laya.ui.IRender":true,"laya.ui.IItem":true})
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			this._content && this._content.destroy(destroyChild);
			this._scrollBar && this._scrollBar.destroy(destroyChild);
			laya.ui.Component.prototype.destroy.call(this,destroyChild);
			this._content=null;
			this._scrollBar=null;
			this._itemRender=null;
			this._cells=null;
			this._array=null;
			this.selectHandler=this.renderHandler=this.mouseHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._content=new Box());
		}

		__proto.onScrollStart=function(){
			this._$P.cacheAs || (this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this));
			_super.prototype._$set_cacheAs.call(this,"none");
			this._scrollBar.once("end",this,this.onScrollEnd);
		}

		__proto.onScrollEnd=function(){
			_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs);
		}

		/**
		*@private
		*更改单元格的信息。
		*@internal 在此销毁、创建单元格，并设置单元格的位置等属性。相当于此列表内容发送改变时调用此函数。
		*/
		__proto.changeCells=function(){
			this._cellChanged=false;
			if (this._itemRender){
				this.scrollBar=this.getChildByName("scrollBar");
				var cell=this._getOneCell();
				var cellWidth=(cell.width+this._spaceX)|| 1;
				var cellHeight=(cell.height+this._spaceY)|| 1;
				if (this._width > 0)this._repeatX2=this._isVertical ? Math.round(this._width / cellWidth):Math.ceil(this._width / cellWidth);
				if (this._height > 0)this._repeatY2=this._isVertical ? Math.ceil(this._height / cellHeight):Math.round(this._height / cellHeight);
				var listWidth=this._width ? this._width :(cellWidth *this.repeatX-this._spaceX);
				var listHeight=this._height ? this._height :(cellHeight *this.repeatY-this._spaceY);
				this._cellSize=this._isVertical ? cellHeight :cellWidth;
				this._cellOffset=this._isVertical ? (cellHeight *Math.max(this._repeatY2,this._repeatY)-listHeight-this._spaceY):(cellWidth *Math.max(this._repeatX2,this._repeatX)-listWidth-this._spaceX);
				if (this._isVertical && this._scrollBar)this._scrollBar.height=listHeight;
				else if (!this._isVertical && this._scrollBar)this._scrollBar.width=listWidth;
				this.setContentSize(listWidth,listHeight);
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				var numY=(this._isVertical ? this.repeatY :this.repeatX)+(this._scrollBar ? 1 :0);
				this._createItems(0,numX,numY);
				this._createdLine=numY;
				if (this._array){
					this.array=this._array;
					this.runCallLater(this.renderItems);
				}
			}
		}

		__proto._getOneCell=function(){
			if (this._cells.length===0){
				var item=this.createItem();
				this._offset.setTo(item.x,item.y);
				this._cells.push(item);
			}
			return this._cells[0];
		}

		__proto._createItems=function(startY,numX,numY){
			var box=this._content;
			var cell=this._getOneCell();
			var cellWidth=cell.width+this._spaceX;
			var cellHeight=cell.height+this._spaceY;
			if (this.cacheContent){
				var cacheBox=new Box();
				cacheBox.cacheAsBitmap=true;
				cacheBox.pos((this._isVertical ? 0 :startY)*cellWidth,(this._isVertical ? startY :0)*cellHeight);
				this._content.addChild(cacheBox);
				this._content.optimizeScrollRect=true;
				box=cacheBox;
			};
			var arr=[];
			for (var i=this._cells.length-1;i >-1;i--){
				var item=this._cells[i];
				item.removeSelf();
				arr.push(item);
			}
			this._cells.length=0;
			for (var k=startY;k < numY;k++){
				for (var l=0;l < numX;l++){
					if (arr.length){
						cell=arr.pop();
						}else {
						cell=this.createItem();
					}
					cell.x=(this._isVertical ? l :k)*cellWidth-box.x;
					cell.y=(this._isVertical ? k :l)*cellHeight-box.y;
					cell.name="item"+(k *numX+l);
					box.addChild(cell);
					this.addCell(cell);
				}
			}
		}

		__proto.createItem=function(){
			return (typeof this._itemRender=='function')? new this._itemRender():View.createComp(this._itemRender);
		}

		/**
		*@private
		*添加单元格。
		*@param cell 需要添加的单元格对象。
		*/
		__proto.addCell=function(cell){
			cell.on("click",this,this.onCellMouse);
			cell.on("rightclick",this,this.onCellMouse);
			cell.on("mouseover",this,this.onCellMouse);
			cell.on("mouseout",this,this.onCellMouse);
			cell.on("mousedown",this,this.onCellMouse);
			cell.on("mouseup",this,this.onCellMouse);
			this._cells.push(cell);
		}

		/**
		*初始化单元格信息。
		*/
		__proto.initItems=function(){
			if (!this._itemRender && this.getChildByName("item0")!=null){
				this.repeatX=1;
				var count=0;
				count=0;
				for (var i=0;i < 10000;i++){
					var cell=this.getChildByName("item"+i);
					if (cell){
						this.addCell(cell);
						count++;
						continue ;
					}
					break ;
				}
				this.repeatY=count;
			}
		}

		/**
		*设置可视区域大小。
		*<p>以（0，0，width参数，height参数）组成的矩形区域为可视区域。</p>
		*@param width 可视区域宽度。
		*@param height 可视区域高度。
		*/
		__proto.setContentSize=function(width,height){
			this._content.width=width;
			this._content.height=height;
			this._content.scrollRect || (this._content.scrollRect=new Rectangle());
			this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,width,height);
			this._content.conchModel && this._content.conchModel.scrollRect(-this._offset.x,-this._offset.y,width,height);
			this.event("resize");
		}

		/**
		*@private
		*单元格的鼠标事件侦听处理函数。
		*/
		__proto.onCellMouse=function(e){
			if (e.type==="mousedown")this._isMoved=false;
			var cell=e.currentTarget;
			var index=this._startIndex+this._cells.indexOf(cell);
			if (index < 0)return;
			if (e.type==="click" || e.type==="rightclick"){
				if (this.selectEnable && !this._isMoved)this.selectedIndex=index;
				else this.changeCellState(cell,true,0);
				}else if ((e.type==="mouseover" || e.type==="mouseout")&& this._selectedIndex!==index){
				this.changeCellState(cell,e.type==="mouseover",0);
			}
			this.mouseHandler && this.mouseHandler.runWith([e,index]);
		}

		/**
		*@private
		*改变单元格的可视状态。
		*@param cell 单元格对象。
		*@param visable 是否显示。
		*@param index 单元格的属性 <code>index</code> 值。
		*/
		__proto.changeCellState=function(cell,visable,index){
			var selectBox=cell.getChildByName("selectBox");
			if (selectBox){
				this.selectEnable=true;
				selectBox.visible=visable;
				selectBox.index=index;
			}
		}

		/**@inheritDoc */
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.setContentSize(this.width,this.height);
			if (this._scrollBar)this.callLater(this.onScrollBarChange);
		}

		/**
		*@private
		*滚动条的 <code>Event.CHANGE</code> 事件侦听处理函数。
		*/
		__proto.onScrollBarChange=function(e){
			this.runCallLater(this.changeCells);
			var scrollValue=this._scrollBar.value;
			var lineX=(this._isVertical ? this.repeatX :this.repeatY);
			var lineY=(this._isVertical ? this.repeatY :this.repeatX);
			var scrollLine=Math.floor(scrollValue / this._cellSize);
			if (!this.cacheContent){
				var index=scrollLine *lineX;
				var num=0;
				if (index > this._startIndex){
					num=index-this._startIndex;
					var down=true;
					var toIndex=this._startIndex+lineX *(lineY+1);
					this._isMoved=true;
					}else if (index < this._startIndex){
					num=this._startIndex-index;
					down=false;
					toIndex=this._startIndex-1;
					this._isMoved=true;
				}
				for (var i=0;i < num;i++){
					if (down){
						var cell=this._cells.shift();
						this._cells[this._cells.length]=cell;
						var cellIndex=toIndex+i;
						}else {
						cell=this._cells.pop();
						this._cells.unshift(cell);
						cellIndex=toIndex-i;
					};
					var pos=Math.floor(cellIndex / lineX)*this._cellSize;
					this._isVertical ? cell.y=pos :cell.x=pos;
					this.renderItem(cell,cellIndex);
				}
				this._startIndex=index;
				this.changeSelectStatus();
				}else {
				num=(lineY+1);
				if (this._createdLine-scrollLine < num){
					this._createItems(this._createdLine,lineX,this._createdLine+num);
					this._createdLine+=num;
					this.renderItems(this._createdLine *lineX,0);
				}
			};
			var r=this._content.scrollRect;
			if (this._isVertical){
				r.y=scrollValue-this._offset.y;
				r.x=-this._offset.x;
				}else {
				r.y=-this._offset.y;
				r.x=scrollValue-this._offset.x;
			}
			this._content.conchModel && this._content.conchModel.scrollRect(r.x,r.y,r.width,r.height);
			this.repaint();
		}

		__proto.posCell=function(cell,cellIndex){
			if (!this._scrollBar)return;
			var lineX=(this._isVertical ? this.repeatX :this.repeatY);
			var lineY=(this._isVertical ? this.repeatY :this.repeatX);
			var pos=Math.floor(cellIndex / lineX)*this._cellSize;
			this._isVertical ? cell.y=pos :cell.x=pos;
		}

		/**
		*@private
		*改变单元格的选择状态。
		*/
		__proto.changeSelectStatus=function(){
			for (var i=0,n=this._cells.length;i < n;i++){
				this.changeCellState(this._cells[i],this._selectedIndex===this._startIndex+i,1);
			}
		}

		/**
		*@private
		*渲染单元格列表。
		*/
		__proto.renderItems=function(from,to){
			(from===void 0)&& (from=0);
			(to===void 0)&& (to=0);
			for (var i=0,n=to || this._cells.length;i < n;i++){
				this.renderItem(this._cells[i],this._startIndex+i);
			}
			this.changeSelectStatus();
		}

		/**
		*渲染一个单元格。
		*@param cell 需要渲染的单元格对象。
		*@param index 单元格索引。
		*/
		__proto.renderItem=function(cell,index){
			if (index >=0 && index < this._array.length){
				cell.visible=true;
				cell.dataSource=this._array[index];
				if (!this.cacheContent){
					this.posCell(cell,index);
				}
				if (this.hasListener("render"))this.event("render",[cell,index]);
				if (this.renderHandler)this.renderHandler.runWith([cell,index]);
				}else {
				cell.visible=false;
				cell.dataSource=null;
			}
		}

		/**
		*刷新列表数据源。
		*/
		__proto.refresh=function(){
			this.array=this._array;
		}

		/**
		*获取单元格数据源。
		*@param index 单元格索引。
		*/
		__proto.getItem=function(index){
			if (index >-1 && index < this._array.length){
				return this._array[index];
			}
			return null;
		}

		/**
		*修改单元格数据源。
		*@param index 单元格索引。
		*@param source 单元格数据源。
		*/
		__proto.changeItem=function(index,source){
			if (index >-1 && index < this._array.length){
				this._array[index]=source;
				if (index >=this._startIndex && index < this._startIndex+this._cells.length){
					this.renderItem(this.getCell(index),index);
				}
			}
		}

		/**
		*设置单元格数据源。
		*@param index 单元格索引。
		*@param source 单元格数据源。
		*/
		__proto.setItem=function(index,source){
			this.changeItem(index,source);
		}

		/**
		*添加单元格数据源。
		*@param souce 数据源。
		*/
		__proto.addItem=function(souce){
			this._array.push(souce);
			this.array=this._array;
		}

		/**
		*添加单元格数据源到对应的数据索引处。
		*@param souce 单元格数据源。
		*@param index 索引。
		*/
		__proto.addItemAt=function(souce,index){
			this._array.splice(index,0,souce);
			this.array=this._array;
		}

		/**
		*通过数据源索引删除单元格数据源。
		*@param index 需要删除的数据源索引值。
		*/
		__proto.deleteItem=function(index){
			this._array.splice(index,1);
			this.array=this._array;
		}

		/**
		*通过可视单元格索引，获取单元格。
		*@param index 可视单元格索引。
		*@return 单元格对象。
		*/
		__proto.getCell=function(index){
			this.runCallLater(this.changeCells);
			if (index >-1 && this._cells){
				return this._cells[(index-this._startIndex)% this._cells.length];
			}
			return null;
		}

		/**
		*<p>滚动列表，以设定的数据索引对应的单元格为当前可视列表的第一项。</p>
		*@param index 单元格在数据列表中的索引。
		*/
		__proto.scrollTo=function(index){
			if (this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				this._scrollBar.value=Math.floor(index / numX)*this._cellSize;
				}else {
				this.startIndex=index;
			}
		}

		/**
		*<p>缓动滚动列表，以设定的数据索引对应的单元格为当前可视列表的第一项。</p>
		*@param index 单元格在数据列表中的索引。
		*@param time 缓动时间。
		*@param complete 缓动结束回掉
		*/
		__proto.tweenTo=function(index,time,complete){
			(time===void 0)&& (time=200);
			if (this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				Tween.to(this._scrollBar,{value:Math.floor(index / numX)*this._cellSize},time,null,complete,0,true);
				}else {
				this.startIndex=index;
				if (complete)complete.run();
			}
		}

		/**@private */
		__proto._setCellChanged=function(){
			if (!this._cellChanged){
				this._cellChanged=true;
				this.callLater(this.changeCells);
			}
		}

		__proto.commitMeasure=function(){
			this.runCallLater(this.changeCells);
		}

		/**@inheritDoc */
		__getset(0,__proto,'cacheAs',_super.prototype._$get_cacheAs,function(value){
			_super.prototype._$set_cacheAs.call(this,value);
			if (this._scrollBar){
				this._$P.cacheAs=null;
				if (value!=="none")this._scrollBar.on("start",this,this.onScrollStart);
				else this._scrollBar.off("start",this,this.onScrollStart);
			}
		});

		/**
		*获取对 <code>List</code> 组件所包含的内容容器 <code>Box</code> 组件的引用。
		*/
		__getset(0,__proto,'content',function(){
			return this._content;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._setCellChanged();
		});

		/**
		*单元格渲染器。
		*<p><b>取值：</b>
		*<ol>
		*<li>单元格类对象。</li>
		*<li> UI 的 JSON 描述。</li>
		*</ol></p>
		*/
		__getset(0,__proto,'itemRender',function(){
			return this._itemRender;
			},function(value){
			if (this._itemRender !=value){
				this._itemRender=value;
				for (var i=this._cells.length-1;i >-1;i--){
					this._cells[i].destroy();
				}
				this._cells.length=0;
				this._setCellChanged();
			}
		});

		/**
		*垂直方向滚动条皮肤。
		*/
		__getset(0,__proto,'vScrollBarSkin',function(){
			return this._scrollBar ? this._scrollBar.skin :null;
			},function(value){
			this.removeChildByName("scrollBar");
			var scrollBar=new VScrollBar();
			scrollBar.name="scrollBar";
			scrollBar.right=0;
			if (value && value !=" ")
				scrollBar.skin=value;
			this.scrollBar=scrollBar;
			this.addChild(scrollBar);
			this._setCellChanged();
		});

		/**
		*列表的当前页码。
		*/
		__getset(0,__proto,'page',function(){
			return this._page;
			},function(value){
			this._page=value
			if (this._array){
				this._page=value > 0 ? value :0;
				this._page=this._page < this.totalPage ? this._page :this.totalPage-1;
				this.startIndex=this._page *this.repeatX *this.repeatY;
			}
		});

		/**
		*水平方向滚动条皮肤。
		*/
		__getset(0,__proto,'hScrollBarSkin',function(){
			return this._scrollBar ? this._scrollBar.skin :null;
			},function(value){
			this.removeChildByName("scrollBar");
			var scrollBar=new HScrollBar();
			scrollBar.name="scrollBar";
			scrollBar.bottom=0;
			if (value && value !=" ")
				scrollBar.skin=value;
			this.scrollBar=scrollBar;
			this.addChild(scrollBar);
			this._setCellChanged();
		});

		/**
		*水平方向显示的单元格数量。
		*/
		__getset(0,__proto,'repeatX',function(){
			return this._repeatX > 0 ? this._repeatX :this._repeatX2 > 0 ? this._repeatX2 :1;
			},function(value){
			this._repeatX=value;
			this._setCellChanged();
		});

		/**
		*获取对 <code>List</code> 组件所包含的滚动条 <code>ScrollBar</code> 组件的引用。
		*/
		__getset(0,__proto,'scrollBar',function(){
			return this._scrollBar;
			},function(value){
			if (this._scrollBar !=value){
				this._scrollBar=value;
				if (value){
					this._isVertical=this._scrollBar.isVertical;
					this.addChild(this._scrollBar);
					this._scrollBar.on("change",this,this.onScrollBarChange);
				}
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._setCellChanged();
		});

		/**
		*垂直方向显示的单元格数量。
		*/
		__getset(0,__proto,'repeatY',function(){
			return this._repeatY > 0 ? this._repeatY :this._repeatY2 > 0 ? this._repeatY2 :1;
			},function(value){
			this._repeatY=value;
			this._setCellChanged();
		});

		/**
		*水平方向显示的单元格之间的间距（以像素为单位）。
		*/
		__getset(0,__proto,'spaceX',function(){
			return this._spaceX;
			},function(value){
			this._spaceX=value;
			this._setCellChanged();
		});

		/**
		*垂直方向显示的单元格之间的间距（以像素为单位）。
		*/
		__getset(0,__proto,'spaceY',function(){
			return this._spaceY;
			},function(value){
			this._spaceY=value;
			this._setCellChanged();
		});

		/**
		*表示当前选择的项索引。
		*/
		__getset(0,__proto,'selectedIndex',function(){
			return this._selectedIndex;
			},function(value){
			if (this._selectedIndex !=value){
				this._selectedIndex=value;
				this.changeSelectStatus();
				this.event("change");
				this.selectHandler && this.selectHandler.runWith(value);
			}
		});

		/**
		*当前选中的单元格数据源。
		*/
		__getset(0,__proto,'selectedItem',function(){
			return this._selectedIndex !=-1 ? this._array[this._selectedIndex] :null;
			},function(value){
			this.selectedIndex=this._array.indexOf(value);
		});

		/**
		*列表的数据总个数。
		*/
		__getset(0,__proto,'length',function(){
			return this._array ? this._array.length :0;
		});

		/**
		*获取或设置当前选择的单元格对象。
		*/
		__getset(0,__proto,'selection',function(){
			return this.getCell(this._selectedIndex);
			},function(value){
			this.selectedIndex=this._startIndex+this._cells.indexOf(value);
		});

		/**
		*当前显示的单元格列表的开始索引。
		*/
		__getset(0,__proto,'startIndex',function(){
			return this._startIndex;
			},function(value){
			this._startIndex=value > 0 ? value :0;
			this.callLater(this.renderItems);
		});

		/**
		*列表数据源。
		*/
		__getset(0,__proto,'array',function(){
			return this._array;
			},function(value){
			this.runCallLater(this.changeCells);
			this._array=value || [];
			var length=this._array.length;
			this.totalPage=Math.ceil(length / (this.repeatX *this.repeatY));
			this._selectedIndex=this._selectedIndex < length ? this._selectedIndex :length-1;
			this.startIndex=this._startIndex;
			if (this._scrollBar){
				this._scrollBar.stopScroll();
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				var numY=this._isVertical ? this.repeatY :this.repeatX;
				var lineCount=Math.ceil(length / numX);
				var total=this._cellOffset > 0 ? this.totalPage+1 :this.totalPage;
				if (total > 1){
					this._scrollBar.scrollSize=this._cellSize;
					this._scrollBar.thumbPercent=numY / lineCount;
					this._scrollBar.setScroll(0,(lineCount-numY)*this._cellSize+this._cellOffset,this._scrollBar.value);
					this._scrollBar.target=this._content;
					}else {
					this._scrollBar.setScroll(0,0,0);
					this._scrollBar.target=this._content;
				}
			}
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);
			else if ((value instanceof Array))this.array=value
			else _super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*单元格集合。
		*/
		__getset(0,__proto,'cells',function(){
			this.runCallLater(this.changeCells);
			return this._cells;
		});

		return List;
	})(Box)


	/**
	*<code>Panel</code> 是一个面板容器类。
	*/
	//class laya.ui.Panel extends laya.ui.Box
	var Panel=(function(_super){
		function Panel(){
			this._content=null;
			this._vScrollBar=null;
			this._hScrollBar=null;
			this._scrollChanged=false;
			Panel.__super.call(this);
			this.width=this.height=100;
			this._content.optimizeScrollRect=true;
		}

		__class(Panel,'laya.ui.Panel',_super);
		var __proto=Panel.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			laya.ui.Component.prototype.destroy.call(this,destroyChild);
			this._content && this._content.destroy(destroyChild);
			this._vScrollBar && this._vScrollBar.destroy(destroyChild);
			this._hScrollBar && this._hScrollBar.destroy(destroyChild);
			this._vScrollBar=null;
			this._hScrollBar=null;
			this._content=null;
		}

		/**@inheritDoc */
		__proto.destroyChildren=function(){
			this._content.destroyChildren();
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			laya.display.Node.prototype.addChild.call(this,this._content=new Box());
		}

		/**@inheritDoc */
		__proto.addChild=function(child){
			child.on("resize",this,this.onResize);
			this._setScrollChanged();
			return this._content.addChild(child);
		}

		/**
		*@private
		*子对象的 <code>Event.RESIZE</code> 事件侦听处理函数。
		*/
		__proto.onResize=function(){
			this._setScrollChanged();
		}

		/**@inheritDoc */
		__proto.addChildAt=function(child,index){
			child.on("resize",this,this.onResize);
			this._setScrollChanged();
			return this._content.addChildAt(child,index);
		}

		/**@inheritDoc */
		__proto.removeChild=function(child){
			child.off("resize",this,this.onResize);
			this._setScrollChanged();
			return this._content.removeChild(child);
		}

		/**@inheritDoc */
		__proto.removeChildAt=function(index){
			this.getChildAt(index).off("resize",this,this.onResize);
			this._setScrollChanged();
			return this._content.removeChildAt(index);
		}

		/**@inheritDoc */
		__proto.removeChildren=function(beginIndex,endIndex){
			(beginIndex===void 0)&& (beginIndex=0);
			(endIndex===void 0)&& (endIndex=0x7fffffff);
			for (var i=this._content.numChildren-1;i >-1;i--){
				this._content.removeChildAt(i);
			}
			this._setScrollChanged();
			return this;
		}

		/**@inheritDoc */
		__proto.getChildAt=function(index){
			return this._content.getChildAt(index);
		}

		/**@inheritDoc */
		__proto.getChildByName=function(name){
			return this._content.getChildByName(name);
		}

		/**@inheritDoc */
		__proto.getChildIndex=function(child){
			return this._content.getChildIndex(child);
		}

		/**@private */
		__proto.changeScroll=function(){
			this._scrollChanged=false;
			var contentW=this.contentWidth;
			var contentH=this.contentHeight;
			var vscroll=this._vScrollBar;
			var hscroll=this._hScrollBar;
			var vShow=vscroll && contentH > this._height;
			var hShow=hscroll && contentW > this._width;
			var showWidth=vShow ? this._width-vscroll.width :this._width;
			var showHeight=hShow ? this._height-hscroll.height :this._height;
			if (vscroll){
				vscroll.x=this._width-vscroll.width;
				vscroll.y=0;
				vscroll.height=this._height-(hShow ? hscroll.height :0);
				vscroll.scrollSize=Math.max(this._height *0.033,1);
				vscroll.thumbPercent=showHeight / contentH;
				vscroll.setScroll(0,contentH-showHeight,vscroll.value);
			}
			if (hscroll){
				hscroll.x=0;
				hscroll.y=this._height-hscroll.height;
				hscroll.width=this._width-(vShow ? vscroll.width :0);
				hscroll.scrollSize=Math.max(this._width *0.033,1);
				hscroll.thumbPercent=showWidth / contentW;
				hscroll.setScroll(0,contentW-showWidth,hscroll.value);
			}
		}

		/**@inheritDoc */
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.setContentSize(this._width,this._height);
		}

		/**
		*@private
		*设置内容的宽度、高度（以像素为单位）。
		*@param width 宽度。
		*@param height 高度。
		*/
		__proto.setContentSize=function(width,height){
			var content=this._content;
			content.width=width;
			content.height=height;
			content.scrollRect || (content.scrollRect=new Rectangle());
			content.scrollRect.setTo(0,0,width,height);
			content.conchModel&&content.conchModel.scrollRect(0,0,width,height);
		}

		/**
		*@private
		*滚动条的<code><code>Event.MOUSE_DOWN</code>事件侦听处理函数。</code>事件侦听处理函数。
		*@param scrollBar 滚动条对象。
		*@param e Event 对象。
		*/
		__proto.onScrollBarChange=function(scrollBar){
			var rect=this._content.scrollRect;
			if (rect){
				var start=Math.round(scrollBar.value);
				scrollBar.isVertical ? rect.y=start :rect.x=start;
				this._content.conchModel&&this._content.conchModel.scrollRect(rect.x,rect.y,rect.width,rect.height);
			}
		}

		/**
		*<p>滚动内容容器至设定的垂直、水平方向滚动条位置。</p>
		*@param x 水平方向滚动条属性value值。滚动条位置数字。
		*@param y 垂直方向滚动条属性value值。滚动条位置数字。
		*/
		__proto.scrollTo=function(x,y){
			(x===void 0)&& (x=0);
			(y===void 0)&& (y=0);
			if (this.vScrollBar)this.vScrollBar.value=y;
			if (this.hScrollBar)this.hScrollBar.value=x;
		}

		/**
		*刷新滚动内容。
		*/
		__proto.refresh=function(){
			this.changeScroll();
		}

		__proto.onScrollStart=function(){
			this._$P.cacheAs || (this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this));
			_super.prototype._$set_cacheAs.call(this,"none");
			this._hScrollBar && this._hScrollBar.once("end",this,this.onScrollEnd);
			this._vScrollBar && this._vScrollBar.once("end",this,this.onScrollEnd);
		}

		__proto.onScrollEnd=function(){
			_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs);
		}

		/**@private */
		__proto._setScrollChanged=function(){
			if (!this._scrollChanged){
				this._scrollChanged=true;
				this.callLater(this.changeScroll);
			}
		}

		/**@inheritDoc */
		__getset(0,__proto,'numChildren',function(){
			return this._content.numChildren;
		});

		/**
		*水平方向滚动条皮肤。
		*/
		__getset(0,__proto,'hScrollBarSkin',function(){
			return this._hScrollBar ? this._hScrollBar.skin :null;
			},function(value){
			if (this._hScrollBar==null){
				laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar());
				this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]);
				this._hScrollBar.target=this._content;
				this._setScrollChanged();
			}
			this._hScrollBar.skin=value;
		});

		/**
		*@private
		*获取内容宽度（以像素为单位）。
		*/
		__getset(0,__proto,'contentWidth',function(){
			var max=0;
			for (var i=this._content.numChildren-1;i >-1;i--){
				var comp=this._content.getChildAt(i);
				max=Math.max(comp.x+comp.width *comp.scaleX,max);
			}
			return max;
		});

		/**
		*@private
		*获取内容高度（以像素为单位）。
		*/
		__getset(0,__proto,'contentHeight',function(){
			var max=0;
			for (var i=this._content.numChildren-1;i >-1;i--){
				var comp=this._content.getChildAt(i);
				max=Math.max(comp.y+comp.height *comp.scaleY,max);
			}
			return max;
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._setScrollChanged();
		});

		/**
		*水平方向滚动条对象。
		*/
		__getset(0,__proto,'hScrollBar',function(){
			return this._hScrollBar;
		});

		/**
		*获取内容容器对象。
		*/
		__getset(0,__proto,'content',function(){
			return this._content;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._setScrollChanged();
		});

		/**
		*垂直方向滚动条皮肤。
		*/
		__getset(0,__proto,'vScrollBarSkin',function(){
			return this._vScrollBar ? this._vScrollBar.skin :null;
			},function(value){
			if (this._vScrollBar==null){
				laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar());
				this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]);
				this._vScrollBar.target=this._content;
				this._setScrollChanged();
			}
			this._vScrollBar.skin=value;
		});

		/**
		*垂直方向滚动条对象。
		*/
		__getset(0,__proto,'vScrollBar',function(){
			return this._vScrollBar;
		});

		/**@inheritDoc */
		__getset(0,__proto,'cacheAs',_super.prototype._$get_cacheAs,function(value){
			_super.prototype._$set_cacheAs.call(this,value);
			this._$P.cacheAs=null;
			if (value!=="none"){
				this._hScrollBar && this._hScrollBar.on("start",this,this.onScrollStart);
				this._vScrollBar && this._vScrollBar.on("start",this,this.onScrollStart);
				}else {
				this._hScrollBar && this._hScrollBar.off("start",this,this.onScrollStart);
				this._vScrollBar && this._vScrollBar.off("start",this,this.onScrollStart);
			}
		});

		return Panel;
	})(Box)


	/**
	*使用 <code>HScrollBar</code> （水平 <code>ScrollBar</code> ）控件，可以在因数据太多而不能在显示区域完全显示时控制显示的数据部分。
	*@example 以下示例代码，创建了一个 <code>HScrollBar</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.HScrollBar;
		*import laya.utils.Handler;
		*public class HScrollBar_Example
		*{
			*private var hScrollBar:HScrollBar;
			*public function HScrollBar_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/hscroll.png","resource/ui/hscroll$bar.png","resource/ui/hscroll$down.png","resource/ui/hscroll$up.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*hScrollBar=new HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。
				*hScrollBar.skin="resource/ui/hscroll.png";//设置 hScrollBar 的皮肤。
				*hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。
				*hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。
				*hScrollBar.changeHandler=new Handler(this,onChange);//设置 hScrollBar 的滚动变化处理器。
				*Laya.stage.addChild(hScrollBar);//将此 hScrollBar 对象添加到显示列表。
				*}
			*private function onChange(value:Number):void
			*{
				*trace("滚动条的位置： value="+value);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var hScrollBar;
	*var res=["resource/ui/hscroll.png","resource/ui/hscroll$bar.png","resource/ui/hscroll$down.png","resource/ui/hscroll$up.png"];
	*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*console.log("资源加载完成！");
		*hScrollBar=new laya.ui.HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。
		*hScrollBar.skin="resource/ui/hscroll.png";//设置 hScrollBar 的皮肤。
		*hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。
		*hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。
		*hScrollBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 hScrollBar 的滚动变化处理器。
		*Laya.stage.addChild(hScrollBar);//将此 hScrollBar 对象添加到显示列表。
		*}
	*function onChange(value)
	*{
		*console.log("滚动条的位置： value="+value);
		*}
	*</listing>
	*<listing version="3.0">
	*import HScrollBar=laya.ui.HScrollBar;
	*import Handler=laya.utils.Handler;
	*class HScrollBar_Example {
		*private hScrollBar:HScrollBar;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/hscroll.png","resource/ui/hscroll$bar.png","resource/ui/hscroll$down.png","resource/ui/hscroll$up.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*this.hScrollBar=new HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。
			*this.hScrollBar.skin="resource/ui/hscroll.png";//设置 hScrollBar 的皮肤。
			*this.hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。
			*this.hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。
			*this.hScrollBar.changeHandler=new Handler(this,this.onChange);//设置 hScrollBar 的滚动变化处理器。
			*Laya.stage.addChild(this.hScrollBar);//将此 hScrollBar 对象添加到显示列表。
			*}
		*private onChange(value:number):void {
			*console.log("滚动条的位置： value="+value);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.HScrollBar extends laya.ui.ScrollBar
	var HScrollBar=(function(_super){
		function HScrollBar(){HScrollBar.__super.call(this);;
		};

		__class(HScrollBar,'laya.ui.HScrollBar',_super);
		var __proto=HScrollBar.prototype;
		/**@inheritDoc */
		__proto.initialize=function(){
			_super.prototype.initialize.call(this);
			this.slider.isVertical=false;
		}

		return HScrollBar;
	})(ScrollBar)


	/**
	*<code>Group</code> 是一个可以自动布局的项集合控件。
	*<p> <code>Group</code> 的默认项对象为 <code>Button</code> 类实例。
	*<code>Group</code> 是 <code>Tab</code> 和 <code>RadioGroup</code> 的基类。</p>
	*/
	//class laya.ui.UIGroup extends laya.ui.Box
	var UIGroup=(function(_super){
		function UIGroup(labels,skin){
			this.selectHandler=null;
			this._items=null;
			this._selectedIndex=-1;
			this._skin=null;
			this._direction="horizontal";
			this._space=0;
			this._labels=null;
			this._labelColors=null;
			this._labelStrokeColor=null;
			this._strokeColors=null;
			this._labelStroke=NaN;
			this._labelSize=0;
			this._labelBold=false;
			this._labelPadding=null;
			this._labelAlign=null;
			this._stateNum=0;
			this._labelChanged=false;
			UIGroup.__super.call(this);
			this.skin=skin;
			this.labels=labels;
		}

		__class(UIGroup,'laya.ui.UIGroup',_super);
		var __proto=UIGroup.prototype;
		Laya.imps(__proto,{"laya.ui.IItem":true})
		/**@inheritDoc */
		__proto.preinitialize=function(){
			this.mouseEnabled=true;
		}

		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			laya.ui.Component.prototype.destroy.call(this,destroyChild);
			this._items && (this._items.length=0);
			this._items=null;
			this.selectHandler=null;
		}

		/**
		*添加一个项对象，返回此项对象的索引id。
		*
		*@param item 需要添加的项对象。
		*@param autoLayOut 是否自动布局，如果为true，会根据 <code>direction</code> 和 <code>space</code> 属性计算item的位置。
		*@return
		*/
		__proto.addItem=function(item,autoLayOut){
			(autoLayOut===void 0)&& (autoLayOut=true);
			var display=item;
			var index=this._items.length;
			display.name="item"+index;
			this.addChild(display);
			this.initItems();
			if (autoLayOut && index > 0){
				var preItem=this._items [index-1];
				if (this._direction=="horizontal"){
					display.x=preItem.x+preItem.width+this._space;
					}else {
					display.y=preItem.y+preItem.height+this._space;
				}
				}else {
				if (autoLayOut){
					display.x=0;
					display.y=0;
				}
			}
			return index;
		}

		/**
		*删除一个项对象。
		*@param item 需要删除的项对象。
		*@param autoLayOut 是否自动布局，如果为true，会根据 <code>direction</code> 和 <code>space</code> 属性计算item的位置。
		*/
		__proto.delItem=function(item,autoLayOut){
			(autoLayOut===void 0)&& (autoLayOut=true);
			var index=this._items.indexOf(item);
			if (index !=-1){
				var display=item;
				this.removeChild(display);
				for (var i=index+1,n=this._items.length;i < n;i++){
					var child=this._items [i];
					child.name="item"+(i-1);
					if (autoLayOut){
						if (this._direction=="horizontal"){
							child.x-=display.width+this._space;
							}else {
							child.y-=display.height+this._space;
						}
					}
				}
				this.initItems();
				if (this._selectedIndex >-1){
					var newIndex=0;
					newIndex=this._selectedIndex < this._items.length ? this._selectedIndex :(this._selectedIndex-1);
					this._selectedIndex=-1;
					this.selectedIndex=newIndex;
				}
			}
		}

		/**
		*初始化项对象们。
		*/
		__proto.initItems=function(){
			this._items || (this._items=[]);
			this._items.length=0;
			for (var i=0;i < 10000;i++){
				var item=this.getChildByName("item"+i);
				if (item==null)break ;
				this._items.push(item);
				item.selected=(i===this._selectedIndex);
				item.clickHandler=Handler.create(this,this.itemClick,[i],false);
			}
		}

		/**
		*@private
		*项对象的点击事件侦听处理函数。
		*@param index 项索引。
		*/
		__proto.itemClick=function(index){
			this.selectedIndex=index;
		}

		/**
		*@private
		*通过对象的索引设置项对象的 <code>selected</code> 属性值。
		*@param index 需要设置的项对象的索引。
		*@param selected 表示项对象的选中状态。
		*/
		__proto.setSelect=function(index,selected){
			if (this._items && index >-1 && index < this._items.length)this._items[index].selected=selected;
		}

		/**
		*@private
		*创建一个项显示对象。
		*@param skin 项对象的皮肤。
		*@param label 项对象标签。
		*/
		__proto.createItem=function(skin,label){
			return null;
		}

		/**
		*@private
		*更改项对象的属性值。
		*/
		__proto.changeLabels=function(){
			this._labelChanged=false;
			if (this._items){
				var left=0
				for (var i=0,n=this._items.length;i < n;i++){
					var btn=this._items [i];
					this._skin && (btn.skin=this._skin);
					this._labelColors && (btn.labelColors=this._labelColors);
					this._labelSize && (btn.labelSize=this._labelSize);
					this._labelStroke && (btn.labelStroke=this._labelStroke);
					this._labelStrokeColor && (btn.labelStrokeColor=this._labelStrokeColor);
					this._strokeColors && (btn.strokeColors=this._strokeColors);
					this._labelBold && (btn.labelBold=this._labelBold);
					this._labelPadding && (btn.labelPadding=this._labelPadding);
					this._labelAlign && (btn.labelAlign=this._labelAlign);
					this._stateNum && (btn.stateNum=this._stateNum);
					if (this._direction==="horizontal"){
						btn.y=0;
						btn.x=left;
						left+=btn.width+this._space;
						}else {
						btn.x=0;
						btn.y=left;
						left+=btn.height+this._space;
					}
				}
			}
			this.changeSize();
		}

		/**@inheritDoc */
		__proto.commitMeasure=function(){
			this.runCallLater(this.changeLabels);
		}

		/**@private */
		__proto._setLabelChanged=function(){
			if (!this._labelChanged){
				this._labelChanged=true;
				this.callLater(this.changeLabels);
			}
		}

		/**
		*<p>描边颜色，以字符串表示。</p>
		*默认值为 "#000000"（黑色）;
		*@see laya.display.Text.strokeColor()
		*/
		__getset(0,__proto,'labelStrokeColor',function(){
			return this._labelStrokeColor;
			},function(value){
			if (this._labelStrokeColor !=value){
				this._labelStrokeColor=value;
				this._setLabelChanged();
			}
		});

		/**
		*@copy laya.ui.Image#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this._setLabelChanged();
			}
		});

		/**
		*表示当前选择的项索引。默认值为-1。
		*/
		__getset(0,__proto,'selectedIndex',function(){
			return this._selectedIndex;
			},function(value){
			if (this._selectedIndex !=value){
				this.setSelect(this._selectedIndex,false);
				this._selectedIndex=value;
				this.setSelect(value,true);
				this.event("change");
				this.selectHandler && this.selectHandler.runWith(this._selectedIndex);
			}
		});

		/**
		*标签集合字符串。以逗号做分割，如"item0,item1,item2,item3,item4,item5"。
		*/
		__getset(0,__proto,'labels',function(){
			return this._labels;
			},function(value){
			if (this._labels !=value){
				this._labels=value;
				this.removeChildren();
				this._setLabelChanged();
				if (this._labels){
					var a=this._labels.split(",");
					for (var i=0,n=a.length;i < n;i++){
						var item=this.createItem(this._skin,a[i]);
						item.name="item"+i;
						this.addChild(item);
					}
				}
				this.initItems();
			}
		});

		/**
		*<p>表示各个状态下的描边颜色。</p>
		*@see laya.display.Text.strokeColor()
		*/
		__getset(0,__proto,'strokeColors',function(){
			return this._strokeColors;
			},function(value){
			if (this._strokeColors !=value){
				this._strokeColors=value;
				this._setLabelChanged();
			}
		});

		/**
		*@copy laya.ui.Button#labelColors()
		*/
		__getset(0,__proto,'labelColors',function(){
			return this._labelColors;
			},function(value){
			if (this._labelColors !=value){
				this._labelColors=value;
				this._setLabelChanged();
			}
		});

		/**
		*<p>描边宽度（以像素为单位）。</p>
		*默认值0，表示不描边。
		*@see laya.display.Text.stroke()
		*/
		__getset(0,__proto,'labelStroke',function(){
			return this._labelStroke;
			},function(value){
			if (this._labelStroke !=value){
				this._labelStroke=value;
				this._setLabelChanged();
			}
		});

		/**
		*表示按钮文本标签的字体大小。
		*/
		__getset(0,__proto,'labelSize',function(){
			return this._labelSize;
			},function(value){
			if (this._labelSize !=value){
				this._labelSize=value;
				this._setLabelChanged();
			}
		});

		/**
		*表示按钮文本标签的字体大小。
		*/
		__getset(0,__proto,'stateNum',function(){
			return this._stateNum;
			},function(value){
			if (this._stateNum !=value){
				this._stateNum=value;
				this._setLabelChanged();
			}
		});

		/**
		*表示按钮文本标签是否为粗体字。
		*/
		__getset(0,__proto,'labelBold',function(){
			return this._labelBold;
			},function(value){
			if (this._labelBold !=value){
				this._labelBold=value;
				this._setLabelChanged();
			}
		});

		/**
		*表示按钮文本标签的边距。
		*<p><b>格式：</b>"上边距,右边距,下边距,左边距"。</p>
		*/
		__getset(0,__proto,'labelPadding',function(){
			return this._labelPadding;
			},function(value){
			if (this._labelPadding !=value){
				this._labelPadding=value;
				this._setLabelChanged();
			}
		});

		/**
		*布局方向。
		*<p>默认值为"horizontal"。</p>
		*<p><b>取值：</b>
		*<li>"horizontal"：表示水平布局。</li>
		*<li>"vertical"：表示垂直布局。</li>
		*</p>
		*/
		__getset(0,__proto,'direction',function(){
			return this._direction;
			},function(value){
			this._direction=value;
			this._setLabelChanged();
		});

		/**
		*项对象们之间的间隔（以像素为单位）。
		*/
		__getset(0,__proto,'space',function(){
			return this._space;
			},function(value){
			this._space=value;
			this._setLabelChanged();
		});

		/**
		*项对象们的存放数组。
		*/
		__getset(0,__proto,'items',function(){
			return this._items;
		});

		/**
		*获取或设置当前选择的项对象。
		*/
		__getset(0,__proto,'selection',function(){
			return this._selectedIndex >-1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] :null;
			},function(value){
			this.selectedIndex=this._items.indexOf(value);
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);
			else if ((value instanceof Array))this.labels=(value).join(",");
			else _super.prototype._$set_dataSource.call(this,value);
		});

		return UIGroup;
	})(Box)


	/**
	*<code>Radio</code> 控件使用户可在一组互相排斥的选择中做出一种选择。
	*用户一次只能选择 <code>Radio</code> 组中的一个成员。选择未选中的组成员将取消选择该组中当前所选的 <code>Radio</code> 控件。
	*@see laya.ui.RadioGroup
	*/
	//class laya.ui.Radio extends laya.ui.Button
	var Radio=(function(_super){
		function Radio(skin,label){
			this._value=null;
			(label===void 0)&& (label="");
			Radio.__super.call(this,skin,label);
		}

		__class(Radio,'laya.ui.Radio',_super);
		var __proto=Radio.prototype;
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._value=null;
		}

		/**@inheritDoc */
		__proto.preinitialize=function(){
			laya.ui.Component.prototype.preinitialize.call(this);
			this.toggle=false;
			this._autoSize=false;
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			_super.prototype.initialize.call(this);
			this.createText();
			this._text.align="left";
			this._text.valign="top";
			this._text.width=0;
			this.on("click",this,this.onClick);
		}

		/**
		*@private
		*对象的<code>Event.CLICK</code>事件侦听处理函数。
		*/
		__proto.onClick=function(e){
			this.selected=true;
		}

		/**
		*获取或设置 <code>Radio</code> 关联的可选用户定义值。
		*/
		__getset(0,__proto,'value',function(){
			return this._value !=null ? this._value :this.label;
			},function(obj){
			this._value=obj;
		});

		return Radio;
	})(Button)


	/**
	*使用 <code>HSlider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。
	*<p> <code>HSlider</code> 控件采用水平方向。滑块轨道从左向右扩展，而标签位于轨道的顶部或底部。</p>
	*
	*@example 以下示例代码，创建了一个 <code>HSlider</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.HSlider;
		*import laya.utils.Handler;
		*public class HSlider_Example
		*{
			*private var hSlider:HSlider;
			*public function HSlider_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/hslider.png","resource/ui/hslider$bar.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*hSlider=new HSlider();//创建一个 HSlider 类的实例对象 hSlider 。
				*hSlider.skin="resource/ui/hslider.png";//设置 hSlider 的皮肤。
				*hSlider.min=0;//设置 hSlider 最低位置值。
				*hSlider.max=10;//设置 hSlider 最高位置值。
				*hSlider.value=2;//设置 hSlider 当前位置值。
				*hSlider.tick=1;//设置 hSlider 刻度值。
				*hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。
				*hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。
				*hSlider.changeHandler=new Handler(this,onChange);//设置 hSlider 位置变化处理器。
				*Laya.stage.addChild(hSlider);//把 hSlider 添加到显示列表。
				*}
			*private function onChange(value:Number):void
			*{
				*trace("滑块的位置： value="+value);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800,"canvas");//设置游戏画布宽高、渲染模式
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var hSlider;
	*var res=["resource/ui/hslider.png","resource/ui/hslider$bar.png"];
	*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));
	*function onLoadComplete(){
		*console.log("资源加载完成！");
		*hSlider=new laya.ui.HSlider();//创建一个 HSlider 类的实例对象 hSlider 。
		*hSlider.skin="resource/ui/hslider.png";//设置 hSlider 的皮肤。
		*hSlider.min=0;//设置 hSlider 最低位置值。
		*hSlider.max=10;//设置 hSlider 最高位置值。
		*hSlider.value=2;//设置 hSlider 当前位置值。
		*hSlider.tick=1;//设置 hSlider 刻度值。
		*hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。
		*hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。
		*hSlider.changeHandler=new laya.utils.Handler(this,onChange);//设置 hSlider 位置变化处理器。
		*Laya.stage.addChild(hSlider);//把 hSlider 添加到显示列表。
		*}
	*function onChange(value)
	*{
		*console.log("滑块的位置： value="+value);
		*}
	*</listing>
	*<listing version="3.0">
	*import Handler=laya.utils.Handler;
	*import HSlider=laya.ui.HSlider;
	*class HSlider_Example {
		*private hSlider:HSlider;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/hslider.png","resource/ui/hslider$bar.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*this.hSlider=new HSlider();//创建一个 HSlider 类的实例对象 hSlider 。
			*this.hSlider.skin="resource/ui/hslider.png";//设置 hSlider 的皮肤。
			*this.hSlider.min=0;//设置 hSlider 最低位置值。
			*this.hSlider.max=10;//设置 hSlider 最高位置值。
			*this.hSlider.value=2;//设置 hSlider 当前位置值。
			*this.hSlider.tick=1;//设置 hSlider 刻度值。
			*this.hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。
			*this.hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。
			*this.hSlider.changeHandler=new Handler(this,this.onChange);//设置 hSlider 位置变化处理器。
			*Laya.stage.addChild(this.hSlider);//把 hSlider 添加到显示列表。
			*}
		*private onChange(value:number):void {
			*console.log("滑块的位置： value="+value);
			*}
		*}
	*</listing>
	*
	*@see laya.ui.Slider
	*/
	//class laya.ui.HSlider extends laya.ui.Slider
	var HSlider=(function(_super){
		/**
		*创建一个 <code>HSlider</code> 类实例。
		*@param skin 皮肤。
		*/
		function HSlider(skin){
			HSlider.__super.call(this,skin);
			this.isVertical=false;
		}

		__class(HSlider,'laya.ui.HSlider',_super);
		return HSlider;
	})(Slider)


	/**
	*<code>Tree</code> 控件使用户可以查看排列为可扩展树的层次结构数据。
	*
	*@example 以下示例代码，创建了一个 <code>Tree</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Tree;
		*import laya.utils.Browser;
		*import laya.utils.Handler;
		*public class Tree_Example
		*{
			*public function Tree_Example()
			*{
				*Laya.init(640,800);
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png","resource/ui/clip_selectBox.png","resource/ui/clip_tree_folder.png","resource/ui/clip_tree_arrow.png"],Handler.create(this,onLoadComplete));
				*}
			*private function onLoadComplete():void
			*{
				*var xmlString:String;//创建一个xml字符串，用于存储树结构数据。
				*xmlString="&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;";
				*var domParser:*=new Browser.window.DOMParser();//创建一个DOMParser实例domParser。
				*var xml:*=domParser.parseFromString(xmlString,"text/xml");//解析xml字符。
				*var tree:Tree=new Tree();//创建一个 Tree 类的实例对象 tree 。
				*tree.scrollBarSkin="resource/ui/vscroll.png";//设置 tree 的皮肤。
				*tree.itemRender=Item;//设置 tree 的项渲染器。
				*tree.xml=xml;//设置 tree 的树结构数据。
				*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。
				*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。
				*tree.width=200;//设置 tree 的宽度。
				*tree.height=100;//设置 tree 的高度。
				*Laya.stage.addChild(tree);//将 tree 添加到显示列表。
				*}
			*}
		*}
	*import laya.ui.Box;
	*import laya.ui.Clip;
	*import laya.ui.Label;
	*class Item extends Box
	*{
		*public function Item()
		*{
			*this.name="render";
			*this.right=0;
			*this.left=0;
			*var selectBox:Clip=new Clip("resource/ui/clip_selectBox.png",1,2);
			*selectBox.name="selectBox";
			*selectBox.height=24;
			*selectBox.x=13;
			*selectBox.y=0;
			*selectBox.left=12;
			*addChild(selectBox);
			*var folder:Clip=new Clip("resource/ui/clip_tree_folder.png",1,3);
			*folder.name="folder";
			*folder.x=14;
			*folder.y=4;
			*addChild(folder);
			*var label:Label=new Label("treeItem");
			*label.name="label";
			*label.color="#ffff00";
			*label.width=150;
			*label.height=22;
			*label.x=33;
			*label.y=1;
			*label.left=33;
			*label.right=0;
			*addChild(label);
			*var arrow:Clip=new Clip("resource/ui/clip_tree_arrow.png",1,2);
			*arrow.name="arrow";
			*arrow.x=0;
			*arrow.y=5;
			*addChild(arrow);
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var res=["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png","resource/ui/clip_selectBox.png","resource/ui/clip_tree_folder.png","resource/ui/clip_tree_arrow.png"];
	*Laya.loader.load(res,new laya.utils.Handler(this,onLoadComplete));
	*function onLoadComplete(){
		*var xmlString;//创建一个xml字符串，用于存储树结构数据。
		*xmlString="&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;";
		*var domParser=new laya.utils.Browser.window.DOMParser();//创建一个DOMParser实例domParser。
		*var xml=domParser.parseFromString(xmlString,"text/xml");//解析xml字符。
		*var tree=new laya.ui.Tree();//创建一个 Tree 类的实例对象 tree 。
		*tree.scrollBarSkin="resource/ui/vscroll.png";//设置 tree 的皮肤。
		*tree.itemRender=mypackage.treeExample.Item;//设置 tree 的项渲染器。
		*tree.xml=xml;//设置 tree 的树结构数据。
		*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。
		*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。
		*tree.width=200;//设置 tree 的宽度。
		*tree.height=100;//设置 tree 的高度。
		*Laya.stage.addChild(tree);//将 tree 添加到显示列表。
		*}
	*(function (_super){
		*function Item(){
			*Item.__super.call(this);//初始化父类。
			*this.right=0;
			*this.left=0;
			*var selectBox=new laya.ui.Clip("resource/ui/clip_selectBox.png",1,2);
			*selectBox.name="selectBox";//设置 selectBox 的name 为“selectBox”时，将被识别为树结构的项的背景。2帧：悬停时背景、选中时背景。
			*selectBox.height=24;
			*selectBox.x=13;
			*selectBox.y=0;
			*selectBox.left=12;
			*this.addChild(selectBox);//需要使用this.访问父类的属性或方法。
			*var folder=new laya.ui.Clip("resource/ui/clip_tree_folder.png",1,3);
			*folder.name="folder";//设置 folder 的name 为“folder”时，将被识别为树结构的文件夹开启状态图表。2帧：折叠状态、打开状态。
			*folder.x=14;
			*folder.y=4;
			*this.addChild(folder);
			*var label=new laya.ui.Label("treeItem");
			*label.name="label";//设置 label 的name 为“label”时，此值将用于树结构数据赋值。
			*label.color="#ffff00";
			*label.width=150;
			*label.height=22;
			*label.x=33;
			*label.y=1;
			*label.left=33;
			*label.right=0;
			*this.addChild(label);
			*var arrow=new laya.ui.Clip("resource/ui/clip_tree_arrow.png",1,2);
			*arrow.name="arrow";//设置 arrow 的name 为“arrow”时，将被识别为树结构的文件夹开启状态图表。2帧：折叠状态、打开状态。
			*arrow.x=0;
			*arrow.y=5;
			*this.addChild(arrow);
			*};
		*Laya.class(Item,"mypackage.treeExample.Item",_super);//注册类 Item 。
		*})(laya.ui.Box);
	*</listing>
	*<listing version="3.0">
	*import Tree=laya.ui.Tree;
	*import Browser=laya.utils.Browser;
	*import Handler=laya.utils.Handler;
	*class Tree_Example {
		*constructor(){
			*Laya.init(640,800);
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png","resource/ui/vscroll$up.png","resource/ui/clip_selectBox.png","resource/ui/clip_tree_folder * . * png","resource/ui/clip_tree_arrow.png"],Handler.create(this,this.onLoadComplete));
			*}
		*private onLoadComplete():void {
			*var xmlString:String;//创建一个xml字符串，用于存储树结构数据。
			*xmlString="&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc  * label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;";
			*var domParser:any=new Browser.window.DOMParser();//创建一个DOMParser实例domParser。
			*var xml:any=domParser.parseFromString(xmlString,"text/xml");//解析xml字符。
			*var tree:Tree=new Tree();//创建一个 Tree 类的实例对象 tree 。
			*tree.scrollBarSkin="resource/ui/vscroll.png";//设置 tree 的皮肤。
			*tree.itemRender=Item;//设置 tree 的项渲染器。
			*tree.xml=xml;//设置 tree 的树结构数据。
			*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。
			*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。
			*tree.width=200;//设置 tree 的宽度。
			*tree.height=100;//设置 tree 的高度。
			*Laya.stage.addChild(tree);//将 tree 添加到显示列表。
			*}
		*}
	*import Box=laya.ui.Box;
	*import Clip=laya.ui.Clip;
	*import Label=laya.ui.Label;
	*class Item extends Box {
		*constructor(){
			*super();
			*this.name="render";
			*this.right=0;
			*this.left=0;
			*var selectBox:Clip=new Clip("resource/ui/clip_selectBox.png",1,2);
			*selectBox.name="selectBox";
			*selectBox.height=24;
			*selectBox.x=13;
			*selectBox.y=0;
			*selectBox.left=12;
			*this.addChild(selectBox);
			*var folder:Clip=new Clip("resource/ui/clip_tree_folder.png",1,3);
			*folder.name="folder";
			*folder.x=14;
			*folder.y=4;
			*this.addChild(folder);
			*var label:Label=new Label("treeItem");
			*label.name="label";
			*label.color="#ffff00";
			*label.width=150;
			*label.height=22;
			*label.x=33;
			*label.y=1;
			*label.left=33;
			*label.right=0;
			*this.addChild(label);
			*var arrow:Clip=new Clip("resource/ui/clip_tree_arrow.png",1,2);
			*arrow.name="arrow";
			*arrow.x=0;
			*arrow.y=5;
			*this.addChild(arrow);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.Tree extends laya.ui.Box
	var Tree=(function(_super){
		function Tree(){
			this._list=null;
			this._source=null;
			this._renderHandler=null;
			this._spaceLeft=10;
			this._spaceBottom=0;
			this._keepStatus=true;
			Tree.__super.call(this);
			this.width=this.height=200;
		}

		__class(Tree,'laya.ui.Tree',_super);
		var __proto=Tree.prototype;
		Laya.imps(__proto,{"laya.ui.IRender":true})
		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			laya.ui.Component.prototype.destroy.call(this,destroyChild);
			this._list && this._list.destroy(destroyChild);
			this._list=null;
			this._source=null;
			this._renderHandler=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._list=new List());
			this._list.renderHandler=Handler.create(this,this.renderItem,null,false);
			this._list.repeatX=1;
			this._list.on("change",this,this.onListChange);
		}

		/**
		*@private
		*此对象包含的<code>List</code>实例的<code>Event.CHANGE</code>事件侦听处理函数。
		*/
		__proto.onListChange=function(e){
			this.event("change");
		}

		/**
		*@private
		*获取数据源集合。
		*/
		__proto.getArray=function(){
			var arr=[];
			var item;
			for(var $each_item in this._source){
				item=this._source[$each_item];
				if (this.getParentOpenStatus(item)){
					item.x=this._spaceLeft *this.getDepth(item);
					arr.push(item);
				}
			}
			return arr;
		}

		/**
		*@private
		*获取项对象的深度。
		*/
		__proto.getDepth=function(item,num){
			(num===void 0)&& (num=0);
			if (item.nodeParent==null)return num;
			else return this.getDepth(item.nodeParent,num+1);
		}

		/**
		*@private
		*获取项对象的上一级的打开状态。
		*/
		__proto.getParentOpenStatus=function(item){
			var parent=item.nodeParent;
			if (parent==null){
				return true;
				}else {
				if (parent.isOpen){
					if (parent.nodeParent !=null)return this.getParentOpenStatus(parent);
					else return true;
					}else {
					return false;
				}
			}
		}

		/**
		*@private
		*渲染一个项对象。
		*@param cell 一个项对象。
		*@param index 项的索引。
		*/
		__proto.renderItem=function(cell,index){
			var item=cell.dataSource;
			if (item){
				cell.left=item.x;
				var arrow=cell.getChildByName("arrow");
				if (arrow){
					if (item.hasChild){
						arrow.visible=true;
						arrow.index=item.isOpen ? 1 :0;
						arrow.tag=index;
						arrow.off("click",this,this.onArrowClick);
						arrow.on("click",this,this.onArrowClick);
						}else {
						arrow.visible=false;
					}
				};
				var folder=cell.getChildByName("folder");
				if (folder){
					if (folder.clipY==2){
						folder.index=item.isDirectory ? 0 :1;
						}else {
						folder.index=item.isDirectory ? item.isOpen ? 1 :0 :2;
					}
				}
				this._renderHandler && this._renderHandler.runWith([cell,index]);
			}
		}

		/**
		*@private
		*/
		__proto.onArrowClick=function(e){
			var arrow=e.currentTarget;
			var index=arrow.tag;
			this._list.array[index].isOpen=!this._list.array[index].isOpen;
			this.event("open");
			this._list.array=this.getArray();
		}

		/**
		*设置指定项索引的项对象的打开状态。
		*@param index 项索引。
		*@param isOpen 是否处于打开状态。
		*/
		__proto.setItemState=function(index,isOpen){
			if (!this._list.array[index])return;
			this._list.array[index].isOpen=isOpen;
			this._list.array=this.getArray();
		}

		/**
		*刷新项列表。
		*/
		__proto.fresh=function(){
			this._list.array=this.getArray();
			this.repaint();
		}

		/**
		*@private
		*解析并处理XML类型的数据源。
		*/
		__proto.parseXml=function(xml,source,nodeParent,isRoot){
			var obj;
			var list=xml.childNodes;
			var childCount=list.length;
			if (!isRoot){
				obj={};
				var list2=xml.attributes;
				var attrs;
				for(var $each_attrs in list2){
					attrs=list2[$each_attrs];
					var prop=attrs.nodeName;
					var value=attrs.nodeValue;
					obj[prop]=value=="true" ? true :value=="false" ? false :value;
				}
				obj.nodeParent=nodeParent;
				if (childCount > 0)obj.isDirectory=true;
				obj.hasChild=childCount > 0;
				source.push(obj);
			}
			for (var i=0;i < childCount;i++){
				var node=list[i];
				this.parseXml(node,source,obj,false);
			}
		}

		/**
		*@private
		*处理数据项的打开状态。
		*/
		__proto.parseOpenStatus=function(oldSource,newSource){
			for (var i=0,n=newSource.length;i < n;i++){
				var newItem=newSource[i];
				if (newItem.isDirectory){
					for (var j=0,m=oldSource.length;j < m;j++){
						var oldItem=oldSource[j];
						if (oldItem.isDirectory && this.isSameParent(oldItem,newItem)&& newItem.label==oldItem.label){
							newItem.isOpen=oldItem.isOpen;
							break ;
						}
					}
				}
			}
		}

		/**
		*@private
		*判断两个项对象在树结构中的父节点是否相同。
		*@param item1 项对象。
		*@param item2 项对象。
		*@return 如果父节点相同值为true，否则值为false。
		*/
		__proto.isSameParent=function(item1,item2){
			if (item1.nodeParent==null && item2.nodeParent==null)return true;
			else if (item1.nodeParent==null || item2.nodeParent==null)return false
			else {
				if (item1.nodeParent.label==item2.nodeParent.label)return this.isSameParent(item1.nodeParent,item2.nodeParent);
				else return false;
			}
		}

		/**
		*更新项列表，显示指定键名的数据项。
		*@param key 键名。
		*/
		__proto.filter=function(key){
			if (Boolean(key)){
				var result=[];
				this.getFilterSource(this._source,result,key);
				this._list.array=result;
				}else {
				this._list.array=this.getArray();
			}
		}

		/**
		*@private
		*获取数据源中指定键名的值。
		*/
		__proto.getFilterSource=function(array,result,key){
			key=key.toLocaleLowerCase();
			var item;
			for(var $each_item in array){
				item=array[$each_item];
				if (!item.isDirectory && String(item.label).toLowerCase().indexOf(key)>-1){
					item.x=0;
					result.push(item);
				}
				if (item.child && item.child.length > 0){
					this.getFilterSource(item.child,result,key);
				}
			}
		}

		/**
		*每一项之间的间隔距离（以像素为单位）。
		*/
		__getset(0,__proto,'spaceBottom',function(){
			return this._list.spaceY;
			},function(value){
			this._list.spaceY=value;
		});

		/**
		*数据源发生变化后，是否保持之前打开状态，默认为true。
		*<p><b>取值：</b>
		*<li>true：保持之前打开状态。</li>
		*<li>false：不保持之前打开状态。</li>
		*</p>
		*/
		__getset(0,__proto,'keepStatus',function(){
			return this._keepStatus;
			},function(value){
			this._keepStatus=value;
		});

		/**
		*此对象包含的<code>List</code>实例的单元格渲染器。
		*<p><b>取值：</b>
		*<ol>
		*<li>单元格类对象。</li>
		*<li> UI 的 JSON 描述。</li>
		*</ol></p>
		*/
		__getset(0,__proto,'itemRender',function(){
			return this._list.itemRender;
			},function(value){
			this._list.itemRender=value;
		});

		/**
		*列表数据源，只包含当前可视节点数据。
		*/
		__getset(0,__proto,'array',function(){
			return this._list.array;
			},function(value){
			if (this._keepStatus && this._list.array && value){
				this.parseOpenStatus(this._list.array,value);
			}
			this._source=value;
			this._list.array=this.getArray();
		});

		/**
		*单元格鼠标事件处理器。
		*<p>默认返回参数（e:Event,index:int）。</p>
		*/
		__getset(0,__proto,'mouseHandler',function(){
			return this._list.mouseHandler;
			},function(value){
			this._list.mouseHandler=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			_super.prototype._$set_dataSource.call(this,value);
		});

		/**
		*数据源，全部节点数据。
		*/
		__getset(0,__proto,'source',function(){
			return this._source;
		});

		/**滚动条*/
		__getset(0,__proto,'scrollBar',function(){
			return this._list.scrollBar;
		});

		/**
		*此对象包含的<code>List</code>实例对象。
		*/
		__getset(0,__proto,'list',function(){
			return this._list;
		});

		/**
		*滚动条皮肤。
		*/
		__getset(0,__proto,'scrollBarSkin',function(){
			return this._list.vScrollBarSkin;
			},function(value){
			this._list.vScrollBarSkin=value;
		});

		/**
		*<code>Tree</code> 实例的渲染处理器。
		*/
		__getset(0,__proto,'renderHandler',function(){
			return this._renderHandler;
			},function(value){
			this._renderHandler=value;
		});

		/**
		*表示当前选择的项索引。
		*/
		__getset(0,__proto,'selectedIndex',function(){
			return this._list.selectedIndex;
			},function(value){
			this._list.selectedIndex=value;
		});

		/**
		*左侧缩进距离（以像素为单位）。
		*/
		__getset(0,__proto,'spaceLeft',function(){
			return this._spaceLeft;
			},function(value){
			this._spaceLeft=value;
		});

		/**
		*当前选中的项对象的数据源。
		*/
		__getset(0,__proto,'selectedItem',function(){
			return this._list.selectedItem;
			},function(value){
			this._list.selectedItem=value;
		});

		/**
		*@inheritDoc
		*/
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._list.width=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._list.height=value;
		});

		/**
		*xml结构的数据源。
		*/
		__getset(0,__proto,'xml',null,function(value){
			var arr=[];
			this.parseXml(value.childNodes[0],arr,null,true);
			this.array=arr;
		});

		/**
		*表示选择的树节点项的<code>path</code>属性值。
		*/
		__getset(0,__proto,'selectedPath',function(){
			if (this._list.selectedItem){
				return this._list.selectedItem.path;
			}
			return null;
		});

		return Tree;
	})(Box)


	/**
	*<code>ViewStack</code> 类用于视图堆栈类，用于视图的显示等设置处理。
	*/
	//class laya.ui.ViewStack extends laya.ui.Box
	var ViewStack=(function(_super){
		function ViewStack(){
			this._items=null;
			this._selectedIndex=0;
			ViewStack.__super.call(this);
			this._setIndexHandler=Handler.create(this,this.setIndex,null,false);
		}

		__class(ViewStack,'laya.ui.ViewStack',_super);
		var __proto=ViewStack.prototype;
		Laya.imps(__proto,{"laya.ui.IItem":true})
		/**
		*批量设置视图对象。
		*@param views 视图对象数组。
		*/
		__proto.setItems=function(views){
			this.removeChildren();
			var index=0;
			for (var i=0,n=views.length;i < n;i++){
				var item=views[i];
				if (item){
					item.name="item"+index;
					this.addChild(item);
					index++;
				}
			}
			this.initItems();
		}

		/**
		*添加视图。
		*@internal 添加视图对象，并设置此视图对象的<code>name</code> 属性。
		*@param view 需要添加的视图对象。
		*/
		__proto.addItem=function(view){
			view.name="item"+this._items.length;
			this.addChild(view);
			this.initItems();
		}

		/**
		*初始化视图对象集合。
		*/
		__proto.initItems=function(){
			this._items=[];
			for (var i=0;i < 10000;i++){
				var item=this.getChildByName("item"+i);
				if (item==null){
					break ;
				}
				this._items.push(item);
				item.visible=(i==this._selectedIndex);
			}
		}

		/**
		*@private
		*通过对象的索引设置项对象的 <code>selected</code> 属性值。
		*@param index 需要设置的对象的索引。
		*@param selected 表示对象的选中状态。
		*/
		__proto.setSelect=function(index,selected){
			if (this._items && index >-1 && index < this._items.length){
				this._items[index].visible=selected;
			}
		}

		/**
		*@private
		*设置属性<code>selectedIndex</code>的值。
		*@param index 选中项索引值。
		*/
		__proto.setIndex=function(index){
			this.selectedIndex=index;
		}

		/**@inheritDoc */
		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			this._dataSource=value;
			if (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string')){
				this.selectedIndex=parseInt(value);
				}else {
				for (var prop in this._dataSource){
					if (this.hasOwnProperty(prop)){
						this[prop]=this._dataSource[prop];
					}
				}
			}
		});

		/**
		*表示当前视图索引。
		*/
		__getset(0,__proto,'selectedIndex',function(){
			return this._selectedIndex;
			},function(value){
			if (this._selectedIndex !=value){
				this.setSelect(this._selectedIndex,false);
				this._selectedIndex=value;
				this.setSelect(this._selectedIndex,true);
			}
		});

		/**
		*获取或设置当前选择的项对象。
		*/
		__getset(0,__proto,'selection',function(){
			return this._selectedIndex >-1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] :null;
			},function(value){
			this.selectedIndex=this._items.indexOf(value);
		});

		/**
		*视图集合数组。
		*/
		__getset(0,__proto,'items',function(){
			return this._items;
		});

		/**
		*索引设置处理器。
		*<p>默认回调参数：index:int</p>
		*/
		__getset(0,__proto,'setIndexHandler',function(){
			return this._setIndexHandler;
			},function(value){
			this._setIndexHandler=value;
		});

		return ViewStack;
	})(Box)


	/**
	*
	*使用 <code>VScrollBar</code> （垂直 <code>ScrollBar</code> ）控件，可以在因数据太多而不能在显示区域完全显示时控制显示的数据部分。
	*
	*@example 以下示例代码，创建了一个 <code>VScrollBar</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.vScrollBar;
		*import laya.ui.VScrollBar;
		*import laya.utils.Handler;
		*public class VScrollBar_Example
		*{
			*private var vScrollBar:VScrollBar;
			*public function VScrollBar_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"],Handler.create(this,onLoadComplete));
				*}
			*private function onLoadComplete():void
			*{
				*vScrollBar=new VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。
				*vScrollBar.skin="resource/ui/vscroll.png";//设置 vScrollBar 的皮肤。
				*vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。
				*vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。
				*vScrollBar.changeHandler=new Handler(this,onChange);//设置 vScrollBar 的滚动变化处理器。
				*Laya.stage.addChild(vScrollBar);//将此 vScrollBar 对象添加到显示列表。
				*}
			*private function onChange(value:Number):void
			*{
				*trace("滚动条的位置： value="+value);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var vScrollBar;
	*var res=["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"];
	*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*vScrollBar=new laya.ui.VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。
		*vScrollBar.skin="resource/ui/vscroll.png";//设置 vScrollBar 的皮肤。
		*vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。
		*vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。
		*vScrollBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 vScrollBar 的滚动变化处理器。
		*Laya.stage.addChild(vScrollBar);//将此 vScrollBar 对象添加到显示列表。
		*}
	*function onChange(value){
		*console.log("滚动条的位置： value="+value);
		*}
	*</listing>
	*<listing version="3.0">
	*import VScrollBar=laya.ui.VScrollBar;
	*import Handler=laya.utils.Handler;
	*class VScrollBar_Example {
		*private vScrollBar:VScrollBar;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/vscroll.png","resource/ui/vscroll$bar.png","resource/ui/vscroll$down.png","resource/ui/vscroll$up.png"],Handler.create(this,this.onLoadComplete));
			*}
		*private onLoadComplete():void {
			*this.vScrollBar=new VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。
			*this.vScrollBar.skin="resource/ui/vscroll.png";//设置 vScrollBar 的皮肤。
			*this.vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。
			*this.vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。
			*this.vScrollBar.changeHandler=new Handler(this,this.onChange);//设置 vScrollBar 的滚动变化处理器。
			*Laya.stage.addChild(this.vScrollBar);//将此 vScrollBar 对象添加到显示列表。
			*}
		*private onChange(value:number):void {
			*console.log("滚动条的位置： value="+value);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.VScrollBar extends laya.ui.ScrollBar
	var VScrollBar=(function(_super){
		function VScrollBar(){VScrollBar.__super.call(this);;
		};

		__class(VScrollBar,'laya.ui.VScrollBar',_super);
		return VScrollBar;
	})(ScrollBar)


	/**
	*<code>TextInput</code> 类用于创建显示对象以显示和输入文本。
	*
	*@example 以下示例代码，创建了一个 <code>TextInput</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.display.Stage;
		*import laya.ui.TextInput;
		*import laya.utils.Handler;
		*public class TextInput_Example
		*{
			*public function TextInput_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/input.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*var textInput:TextInput=new TextInput("这是一个TextInput实例。");//创建一个 TextInput 类的实例对象 textInput 。
				*textInput.skin="resource/ui/input.png";//设置 textInput 的皮肤。
				*textInput.sizeGrid="4,4,4,4";//设置 textInput 的网格信息。
				*textInput.color="#008fff";//设置 textInput 的文本颜色。
				*textInput.font="Arial";//设置 textInput 的文本字体。
				*textInput.bold=true;//设置 textInput 的文本显示为粗体。
				*textInput.fontSize=30;//设置 textInput 的字体大小。
				*textInput.wordWrap=true;//设置 textInput 的文本自动换行。
				*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。
				*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。
				*textInput.width=300;//设置 textInput 的宽度。
				*textInput.height=200;//设置 textInput 的高度。
				*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load(["resource/ui/input.png"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*var textInput=new laya.ui.TextInput("这是一个TextInput实例。");//创建一个 TextInput 类的实例对象 textInput 。
		*textInput.skin="resource/ui/input.png";//设置 textInput 的皮肤。
		*textInput.sizeGrid="4,4,4,4";//设置 textInput 的网格信息。
		*textInput.color="#008fff";//设置 textInput 的文本颜色。
		*textInput.font="Arial";//设置 textInput 的文本字体。
		*textInput.bold=true;//设置 textInput 的文本显示为粗体。
		*textInput.fontSize=30;//设置 textInput 的字体大小。
		*textInput.wordWrap=true;//设置 textInput 的文本自动换行。
		*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。
		*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。
		*textInput.width=300;//设置 textInput 的宽度。
		*textInput.height=200;//设置 textInput 的高度。
		*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*import Stage=laya.display.Stage;
	*import TextInput=laya.ui.TextInput;
	*import Handler=laya.utils.Handler;
	*class TextInput_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/input.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*var textInput:TextInput=new TextInput("这是一个TextInput实例。");//创建一个 TextInput 类的实例对象 textInput 。
			*textInput.skin="resource/ui/input.png";//设置 textInput 的皮肤。
			*textInput.sizeGrid="4,4,4,4";//设置 textInput 的网格信息。
			*textInput.color="#008fff";//设置 textInput 的文本颜色。
			*textInput.font="Arial";//设置 textInput 的文本字体。
			*textInput.bold=true;//设置 textInput 的文本显示为粗体。
			*textInput.fontSize=30;//设置 textInput 的字体大小。
			*textInput.wordWrap=true;//设置 textInput 的文本自动换行。
			*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。
			*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。
			*textInput.width=300;//设置 textInput 的宽度。
			*textInput.height=200;//设置 textInput 的高度。
			*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。
			*}
		*}
	*</listing>
	*/
	//class laya.ui.TextInput extends laya.ui.Label
	var TextInput=(function(_super){
		function TextInput(text){
			this._bg=null;
			this._skin=null;
			TextInput.__super.call(this);
			(text===void 0)&& (text="");
			this.text=text;
			this.skin=this.skin;
		}

		__class(TextInput,'laya.ui.TextInput',_super);
		var __proto=TextInput.prototype;
		/**@inheritDoc */
		__proto.preinitialize=function(){
			this.mouseEnabled=true;
		}

		/**@inheritDoc */
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._bg && this._bg.destroy();
			this._bg=null;
		}

		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._tf=new Input());
			this._tf.padding=Styles.inputLabelPadding;
			this._tf.on("input",this,this._onInput);
			this._tf.on("enter",this,this._onEnter);
			this._tf.on("blur",this,this._onBlur);
			this._tf.on("focus",this,this._onFocus);
		}

		/**
		*@private
		*/
		__proto._onFocus=function(){
			this.event("focus",this);
		}

		/**
		*@private
		*/
		__proto._onBlur=function(){
			this.event("blur",this);
		}

		/**
		*@private
		*/
		__proto._onInput=function(){
			this.event("input",this);
		}

		/**
		*@private
		*/
		__proto._onEnter=function(){
			this.event("enter",this);
		}

		/**@inheritDoc */
		__proto.initialize=function(){
			this.width=128;
			this.height=22;
		}

		/**选中输入框内的文本。*/
		__proto.select=function(){
			(this._tf).select();
		}

		__proto.setSelection=function(startIndex,endIndex){
			(this._tf).setSelection(startIndex,endIndex);
		}

		/**
		*表示此对象包含的文本背景 <code>AutoBitmap</code> 组件实例。
		*/
		__getset(0,__proto,'bg',function(){
			return this._bg;
			},function(value){
			this.graphics=this._bg=value;
		});

		/**
		*<p>指示当前是否是文本域。</p>
		*值为true表示当前是文本域，否则不是文本域。
		*/
		__getset(0,__proto,'multiline',function(){
			return (this._tf).multiline;
			},function(value){
			(this._tf).multiline=value;
		});

		/**
		*设置原生input输入框的y坐标偏移。
		*/
		__getset(0,__proto,'inputElementYAdjuster',function(){
			return (this._tf).inputElementYAdjuster;
			},function(value){
			(this._tf).inputElementYAdjuster=value;
		});

		/**
		*@copy laya.ui.Image#skin
		*/
		__getset(0,__proto,'skin',function(){
			return this._skin;
			},function(value){
			if (this._skin !=value){
				this._skin=value;
				this._bg || (this.graphics=this._bg=new AutoBitmap());
				this._bg.source=Loader.getRes(this._skin);
				this._width && (this._bg.width=this._width);
				this._height && (this._bg.height=this._height);
			}
		});

		/**
		*<p>当前实例的背景图（ <code>AutoBitmap</code> ）实例的有效缩放网格数据。</p>
		*<p>数据格式："上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)"，以逗号分隔。
		*<ul><li>例如："4,4,4,4,1"</li></ul></p>
		*@see laya.ui.AutoBitmap.sizeGrid
		*/
		__getset(0,__proto,'sizeGrid',function(){
			return this._bg && this._bg.sizeGrid ? this._bg.sizeGrid.join(","):null;
			},function(value){
			this._bg || (this.graphics=this._bg=new AutoBitmap());
			this._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);
		});

		/**
		*设置原生input输入框的x坐标偏移。
		*/
		__getset(0,__proto,'inputElementXAdjuster',function(){
			return (this._tf).inputElementXAdjuster;
			},function(value){
			(this._tf).inputElementXAdjuster=value;
		});

		/**@inheritDoc */
		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this._bg && (this._bg.width=value);
		});

		/**@inheritDoc */
		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this._bg && (this._bg.height=value);
		});

		/**
		*设置可编辑状态。
		*/
		__getset(0,__proto,'editable',function(){
			return (this._tf).editable;
			},function(value){
			(this._tf).editable=value;
		});

		/**限制输入的字符。*/
		__getset(0,__proto,'restrict',function(){
			return (this._tf).restrict;
			},function(pattern){
			(this._tf).restrict=pattern;
		});

		/**
		*@copy laya.display.Input#prompt
		*/
		__getset(0,__proto,'prompt',function(){
			return (this._tf).prompt;
			},function(value){
			(this._tf).prompt=value;
		});

		/**
		*@copy laya.display.Input#promptColor
		*/
		__getset(0,__proto,'promptColor',function(){
			return (this._tf).promptColor;
			},function(value){
			(this._tf).promptColor=value;
		});

		/**
		*@copy laya.display.Input#maxChars
		*/
		__getset(0,__proto,'maxChars',function(){
			return (this._tf).maxChars;
			},function(value){
			(this._tf).maxChars=value;
		});

		/**
		*@copy laya.display.Input#focus
		*/
		__getset(0,__proto,'focus',function(){
			return (this._tf).focus;
			},function(value){
			(this._tf).focus=value;
		});

		/**
		*@copy laya.display.Input#type
		*/
		__getset(0,__proto,'type',function(){
			return (this._tf).type;
			},function(value){
			(this._tf).type=value;
		});

		/**
		*@copy laya.display.Input#asPassword
		*/
		__getset(0,__proto,'asPassword',function(){
			return (this._tf).asPassword;
			},function(value){
			(this._tf).asPassword=value;
		});

		return TextInput;
	})(Label)


	/**
	*使用 <code>VSlider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。
	*<p> <code>VSlider</code> 控件采用垂直方向。滑块轨道从下往上扩展，而标签位于轨道的左右两侧。</p>
	*
	*@example 以下示例代码，创建了一个 <code>VSlider</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.HSlider;
		*import laya.ui.VSlider;
		*import laya.utils.Handler;
		*public class VSlider_Example
		*{
			*private var vSlider:VSlider;
			*public function VSlider_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/vslider.png","resource/ui/vslider$bar.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*vSlider=new VSlider();//创建一个 VSlider 类的实例对象 vSlider 。
				*vSlider.skin="resource/ui/vslider.png";//设置 vSlider 的皮肤。
				*vSlider.min=0;//设置 vSlider 最低位置值。
				*vSlider.max=10;//设置 vSlider 最高位置值。
				*vSlider.value=2;//设置 vSlider 当前位置值。
				*vSlider.tick=1;//设置 vSlider 刻度值。
				*vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。
				*vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。
				*vSlider.changeHandler=new Handler(this,onChange);//设置 vSlider 位置变化处理器。
				*Laya.stage.addChild(vSlider);//把 vSlider 添加到显示列表。
				*}
			*private function onChange(value:Number):void
			*{
				*trace("滑块的位置： value="+value);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var vSlider;
	*Laya.loader.load(["resource/ui/vslider.png","resource/ui/vslider$bar.png"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*vSlider=new laya.ui.VSlider();//创建一个 VSlider 类的实例对象 vSlider 。
		*vSlider.skin="resource/ui/vslider.png";//设置 vSlider 的皮肤。
		*vSlider.min=0;//设置 vSlider 最低位置值。
		*vSlider.max=10;//设置 vSlider 最高位置值。
		*vSlider.value=2;//设置 vSlider 当前位置值。
		*vSlider.tick=1;//设置 vSlider 刻度值。
		*vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。
		*vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。
		*vSlider.changeHandler=new laya.utils.Handler(this,onChange);//设置 vSlider 位置变化处理器。
		*Laya.stage.addChild(vSlider);//把 vSlider 添加到显示列表。
		*}
	*function onChange(value){
		*console.log("滑块的位置： value="+value);
		*}
	*</listing>
	*<listing version="3.0">
	*import HSlider=laya.ui.HSlider;
	*import VSlider=laya.ui.VSlider;
	*import Handler=laya.utils.Handler;
	*class VSlider_Example {
		*private vSlider:VSlider;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/vslider.png","resource/ui/vslider$bar.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*this.vSlider=new VSlider();//创建一个 VSlider 类的实例对象 vSlider 。
			*this.vSlider.skin="resource/ui/vslider.png";//设置 vSlider 的皮肤。
			*this.vSlider.min=0;//设置 vSlider 最低位置值。
			*this.vSlider.max=10;//设置 vSlider 最高位置值。
			*this.vSlider.value=2;//设置 vSlider 当前位置值。
			*this.vSlider.tick=1;//设置 vSlider 刻度值。
			*this.vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。
			*this.vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。
			*this.vSlider.changeHandler=new Handler(this,this.onChange);//设置 vSlider 位置变化处理器。
			*Laya.stage.addChild(this.vSlider);//把 vSlider 添加到显示列表。
			*}
		*private onChange(value:number):void {
			*console.log("滑块的位置： value="+value);
			*}
		*}
	*</listing>
	*@see laya.ui.Slider
	*/
	//class laya.ui.VSlider extends laya.ui.Slider
	var VSlider=(function(_super){
		function VSlider(){VSlider.__super.call(this);;
		};

		__class(VSlider,'laya.ui.VSlider',_super);
		return VSlider;
	})(Slider)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-24 下午2:58:37
	*/
	//class laya.debug.uicomps.ContextMenu extends laya.ui.Box
	var ContextMenu=(function(_super){
		function ContextMenu(){
			this._tY=0;
			ContextMenu.__super.call(this);
			StyleConsts.setViewScale(this);
		}

		__class(ContextMenu,'laya.debug.uicomps.ContextMenu',_super);
		var __proto=ContextMenu.prototype;
		__proto.addItem=function(item){
			this.addChild(item);
			item.y=this._tY;
			this._tY+=item.height;
			item.on("mousedown",this,this.onClick);
		}

		__proto.onClick=function(e){
			this.event("select",e);
			this.removeSelf();
		}

		__proto.show=function(posX,posY){
			(posX===void 0)&& (posX=-999);
			(posY===void 0)&& (posY=-999);
			Laya.timer.once(100,this,ContextMenu.showMenu,[this,posX,posY]);
		}

		ContextMenu.init=function(){
			Laya.stage.on("click",null,ContextMenu.cleanMenu);
		}

		ContextMenu.cleanMenu=function(e){
			var i=0;
			var len=0;
			len=ContextMenu._menuList.length;
			for(i=0;i<len;i++){
				if(ContextMenu._menuList[i]){
					ContextMenu._menuList[i].removeSelf();
				}
			}
			ContextMenu._menuList.length=0;
		}

		ContextMenu.showMenu=function(menu,posX,posY){
			(posX===void 0)&& (posX=-999);
			(posY===void 0)&& (posY=-999);
			ContextMenu.cleanMenu();
			ContextMenu.adptMenu(menu);
			Laya.stage.addChild(menu);
			DisControlTool.showToStage(menu);
			if (posX !=-999 && posY !=-999){
				menu.pos(posX,posY);
			}
			ContextMenu._menuList.push(menu);
		}

		ContextMenu.createMenu=function(__args){
			var args=arguments;
			return ContextMenu.createMenuByArray(args);
		}

		ContextMenu.createMenuByArray=function(args){
			var menu=new ContextMenu();
			var separatorBefore=false;
			var item;
			for (var i=0,n=args.length;i < n;i++){
				var obj=args[i];
				var info={};
				if ((typeof obj=='string')){
					info.label=obj;
					}else {
					info=obj;
				}
				if (info.label !=""){
					item=new ContextMenuItem(info.label,separatorBefore);
					item.data=obj;
					menu.addItem(item);
					separatorBefore=false;
					}else {
					item=new ContextMenuItem("",separatorBefore);
					item.data=obj;
					menu.addItem(item);
					separatorBefore=true;
				}
			}
			menu.zOrder=9999;
			return menu;
		}

		ContextMenu.adptMenu=function(menu){
			var tWidth=80;
			var maxWidth=80;
			var i=0,len=menu.numChildren;
			for (i=0;i < len;i++){
				tWidth=(menu.getChildAt(i)).width;
				if (maxWidth < tWidth){
					maxWidth=tWidth;
				}
			}
			for (i=0;i < len;i++){
				(menu.getChildAt(i)).width=maxWidth;
			}
		}

		ContextMenu._menuList=[];
		return ContextMenu;
	})(Box)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.uicomps.ContextMenuItem extends laya.ui.Button
	var ContextMenuItem=(function(_super){
		function ContextMenuItem(txt,isSeparator){
			this.data=null;
			this.img=null;
			ContextMenuItem.__super.call(this);
			if(!this.img)this.img=new Image();
			if(txt!=""){
				this.label=txt;
				this.name=txt;
				}else{
				this.label="------";
				this.height=5;
				this.mouseEnabled=false;
				this.img.skin=Base64AtlasManager.base64.getAdptUrl("comp/line2.png");
				this.img.sizeGrid="0,2,0,2";
				this.addChild(this.img);
			}
			this.labelColors="#000000,#000000,#000000,#000000";
			this._text.x=10;
			this._text.padding=[-2,0,0,0];
			this._text.align="left";
			this._text.wordWrap=false;
			this._text.typeset();
			this.width=this._text.width+25;
			this.sizeGrid="3,3,3,3";
			this.skin=Base64AtlasManager.base64.getAdptUrl("comp/button1.png");
		}

		__class(ContextMenuItem,'laya.debug.uicomps.ContextMenuItem',_super);
		var __proto=ContextMenuItem.prototype;
		__getset(0,__proto,'width',_super.prototype._$get_width,function(v){
			_super.prototype._$set_width.call(this,v);
			this.img.width=this.width;
			this.img.x=0;
		});

		return ContextMenuItem;
	})(Button)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-11-25 下午3:24:13
	*/
	//class laya.editor.core.components.InputSelect extends laya.ui.ComboBox
	var InputSelect=(function(_super){
		function InputSelect(){
			this._input=null;
			InputSelect.__super.call(this);
		}

		__class(InputSelect,'laya.editor.core.components.InputSelect',_super);
		var __proto=InputSelect.prototype;
		/**@inheritDoc */
		__proto.createChildren=function(){
			_super.prototype.createChildren.call(this);
			this._input=new EditorTextInput();
			this._input.left=0;
			this._input.right=20;
			this._input.height=24;
			this._button["_text"].visible=false;
			this.addChild(this._input);
		}

		__proto.mchangeSelected=function(){
			this._button.label=this.selectedLabel;
			this._input.text=this.selectedLabel;
		}

		__getset(0,__proto,'input',function(){
			return this._input;
		});

		__getset(0,__proto,'selectedIndex',_super.prototype._$get_selectedIndex,function(value){
			if (this._selectedIndex !=value){
				this._selectedIndex=value;
				if (this._labels.length > 0)this.mchangeSelected();
				else this.callLater(this.mchangeSelected);
				this.event("change",[Event.EMPTY.setTo("change",this,this)]);
				this._selectHandler && this._selectHandler.runWith(this._selectedIndex);
			}
		});

		__getset(0,__proto,'selectedLabel',_super.prototype._$get_selectedLabel,function(value){
			_super.prototype._$set_selectedLabel.call(this,value);
			this._input.text=value;
		});

		return InputSelect;
	})(ComboBox)


	//class laya.editor.core.UIBox extends laya.ui.Box
	var UIBox=(function(_super){
		function UIBox(){
			this.stateInit={};
			UIBox.__super.call(this);
			this.recordState();
		}

		__class(UIBox,'laya.editor.core.UIBox',_super);
		var __proto=UIBox.prototype;
		__proto.recordState=function(){
			var i=0,len=0;
			var key;
			len=UIBox.stateKeys.length;
			for(i=0;i<len;i++){
				key=UIBox.stateKeys[i];
				this.stateInit[key]=this[key];
			}
		}

		__proto.resetState=function(){
			var i=0,len=0;
			var key;
			len=UIBox.stateKeys.length;
			for(i=0;i<len;i++){
				key=UIBox.stateKeys[i];
				this[key]=this.stateInit[key];
			}
		}

		__static(UIBox,
		['stateKeys',function(){return this.stateKeys=["x","y","scaleX","scaleY"];}
		]);
		return UIBox;
	})(Box)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-10-24 下午2:58:37
	*/
	//class laya.editor.core.Wraps.ContextMenu extends laya.ui.Box
	var ContextMenu$1=(function(_super){
		function ContextMenu(){
			this.nativeMenu=null;
			this._tY=0;
			ContextMenu.__super.call(this);
		}

		__class(ContextMenu,'laya.editor.core.Wraps.ContextMenu',_super,'ContextMenu$1');
		var __proto=ContextMenu.prototype;
		__proto.addItem=function(item){
			this.addChild(item);
			item.y=this._tY;
			this._tY+=item.height;
			item.on("mousedown",this,this.onClick);
		}

		__proto.onClick=function(e){
			this.event("select",e);
			this.removeSelf();
		}

		__proto.show=function(posX,posY){
			(posX===void 0)&& (posX=-999);
			(posY===void 0)&& (posY=-999);
			Laya.timer.once(50,this,this.nativeMenu.popup,[Laya.stage.mouseX,Laya.stage.mouseY]);
		}

		ContextMenu.init=function(){
			Laya.stage.on("click",null,ContextMenu.cleanMenu);
		}

		ContextMenu.cleanMenu=function(e){
			var i=0;
			var len=0;
			len=ContextMenu._menuList.length;
			for (i=0;i < len;i++){
				if (ContextMenu._menuList[i]){
					ContextMenu._menuList[i].removeSelf();
				}
			}
			ContextMenu._menuList.length=0;
			HtmlLayerManager.closeMenu();
		}

		ContextMenu.showMenu=function(menu,posX,posY){
			(posX===void 0)&& (posX=-999);
			(posY===void 0)&& (posY=-999);
			ContextMenu.cleanMenu();
			ContextMenu.adptMenu(menu);
			Laya._currentStage.addChild(menu);
			DisTools.showToStage(menu);
			if (posX !=-999 && posY !=-999){
				menu.pos(posX,posY);
			}
			ContextMenu._menuList.push(menu);
			HtmlLayerManager.openMenu();
		}

		ContextMenu.createMenu=function(__args){
			var args=arguments;
			return ContextMenu.createMenuByArray2(args);
		}

		ContextMenu.createMenuByArray=function(args){
			var menu=new ContextMenu();
			var separatorBefore=false;
			var item;
			for (var i=0,n=args.length;i < n;i++){
				var obj=args[i];
				var info={};
				if ((typeof obj=='string')){
					info.label=obj;
					}else {
					info=obj;
				}
				if (info.label !=""){
					item=new ContextMenuItem$1(Sys.lang(info.label),separatorBefore);
					item.data=obj;
					menu.addItem(item);
					separatorBefore=false;
					}else {
					item=new ContextMenuItem$1("",separatorBefore);
					item.data=obj;
					menu.addItem(item);
					separatorBefore=true;
				}
			}
			return menu;
		}

		ContextMenu.getContextMenuLang=function(str){
			var langStr;
			langStr=Sys.lang(str);
			if(langStr!=str){
				ContextMenu.revertLangDic[langStr]=str;
			}
			return langStr;
		}

		ContextMenu.revertMenuLang=function(str){
			if(ContextMenu.revertLangDic[str])return ContextMenu.revertLangDic[str];
			return str;
		}

		ContextMenu.createMenuByArray2=function(args){
			var cmenu=new ContextMenu();
			var template=[];
			for (var j=0,n=args.length;j < n;j++){
				var item=args[j];
				if (item==""){
					template.push({type:"separator"});
					}else if ((item instanceof Array)){
					var arr=item;
					var last=template[template.length-1];
					for (var k=0;k < arr.length;k++){
						if (arr[k]==""){
							arr[k]={type:"separator"};
							}else {
							arr[k]={label:ContextMenu.getContextMenuLang(arr[k]),click:click}
						}
					}
					last.submenu=arr;
					}else {
					template.push({label:ContextMenu.getContextMenuLang(item),click:click});
				}
			}
			function click (item,focusedWindow){
				cmenu.event("select",ContextMenu.revertMenuLang(item.label));
			}
			if (SystemSetting.isCMDVer)return;
			var menu;
			const remote=require("electron").remote;;
			const Menu=remote.Menu;;
			const MenuItem=remote.MenuItem;
			menu=Menu.buildFromTemplate(template);
			cmenu.nativeMenu=menu;
			return cmenu;
		}

		ContextMenu.adptMenu=function(menu){
			var tWidth=80;
			var maxWidth=80;
			var i=0,len=menu.numChildren;
			for (i=0;i < len;i++){
				tWidth=(menu.getChildAt(i)).width;
				if (maxWidth < tWidth){
					maxWidth=tWidth;
				}
			}
			for (i=0;i < len;i++){
				(menu.getChildAt(i)).width=maxWidth;
			}
		}

		ContextMenu._menuList=[];
		ContextMenu.revertLangDic={};
		return ContextMenu;
	})(Box)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.core.components.TextField extends laya.ui.Label
	var TextField=(function(_super){
		function TextField(text){
			(text===void 0)&& (text="");
			TextField.__super.call(this,text);
		}

		__class(TextField,'laya.editor.core.components.TextField',_super);
		var __proto=TextField.prototype;
		__getset(0,__proto,'text',_super.prototype._$get_text,function(value){
			if (this._tf.text !=value){
				this._tf.text=value;
				this._tf.typeset();
				this.event("change");
			}
		});

		__getset(0,__proto,'width',function(){
			return this._tf.textWidth;
		},_super.prototype._$set_width);

		return TextField;
	})(Label)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.core.Wraps.ContextMenuItem extends laya.ui.Button
	var ContextMenuItem$1=(function(_super){
		function ContextMenuItem(txt,isSeparator){
			this.data=null;
			this.img=null;
			ContextMenuItem.__super.call(this);
			if(!this.img)this.img=new Image();
			if(txt!=""){
				this.label=txt;
				this.name=txt;
				}else{
				this.label="------";
				this.height=5;
				this.mouseEnabled=false;
				this.img.skin="comp/line2.png";
				this.img.sizeGrid="0,2,0,2";
				this.addChild(this.img);
			}
			this.labelColors="#000000,#000000,#000000,#000000";
			this._text.x=10;
			this._text.padding=[-2,0,0,0];
			this._text.align="left";
			this._text.wordWrap=false;
			this._text.typeset();
			this.width=this._text.width+25;
			this.sizeGrid="3,3,3,3";
			this.skin="comp/button1.png";
		}

		__class(ContextMenuItem,'laya.editor.core.Wraps.ContextMenuItem',_super,'ContextMenuItem$1');
		var __proto=ContextMenuItem.prototype;
		__getset(0,__proto,'width',_super.prototype._$get_width,function(v){
			_super.prototype._$set_width.call(this,v);
			this.img.width=this.width;
			this.img.x=0;
		});

		return ContextMenuItem;
	})(Button)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.CacheRankView extends laya.debug.view.nodeInfo.views.UIViewBase
	var CacheRankView=(function(_super){
		function CacheRankView(){
			this.view=null;
			CacheRankView.__super.call(this);
		}

		__class(CacheRankView,'laya.debug.view.nodeInfo.views.CacheRankView',_super);
		var __proto=CacheRankView.prototype;
		__proto.createPanel=function(){
			this.view=new Rank();
			this.view.top=this.view.bottom=this.view.left=this.view.right=0;
			this.addChild(this.view);
			NodeMenu.I.setNodeListAction(this.view.itemList);
			this.view.closeBtn.on("click",this,this.close);
			this.view.freshBtn.on("click",this,this.fresh);
			this.view.itemList.scrollBar.hide=true;
			this.view.autoUpdate.on("change",this,this.onAutoUpdateChange);
			this.dis=this;
			this.view.itemList.array=[];
			this.onAutoUpdateChange();
			this.fresh();
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.itemList;
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		__proto.onAutoUpdateChange=function(){
			this.autoUpdate=this.view.autoUpdate.selected;
		}

		__proto.fresh=function(){
			CacheAnalyser.counter.updates();
			this.view.title.text="ReCache排行";
			if (!DebugTool.enableCacheAnalyse){
				this.view.title.text="ReCache排行(未开启)";
				this.view.title.toolTip="DebugTool.init(true)可开启该功能";
			};
			var nodeDic;
			nodeDic=CacheAnalyser.counter.resultNodeDic;
			var key;
			var tNode;
			var tData;
			var dataList;
			dataList=[];
			for (key in nodeDic){
				tNode=nodeDic[key];
				if (CacheRankView.filterDebugNodes && DisControlTool.isInTree(DebugInfoLayer.I,tNode))continue ;
				if (CacheAnalyser.counter.getCount(tNode)<=0)continue ;
				tData={};
				tData.time=CacheAnalyser.counter.getCount(tNode);
				tData.path=tNode;
				tData.label=ClassTool.getNodeClassAndName(tNode)+":"+tData.time;
				dataList.push(tData);
			}
			dataList.sort(MathTools.sortByKey("time",true,true));
			this.view.itemList.array=dataList;
		}

		__getset(0,__proto,'autoUpdate',null,function(v){
			Laya.timer.clear(this,this.fresh);
			if (v){
				this.fresh();
				Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh);
			}
		});

		__getset(1,CacheRankView,'I',function(){
			if (!CacheRankView._I)
				CacheRankView._I=new CacheRankView();
			return CacheRankView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		CacheRankView._I=null
		CacheRankView.filterDebugNodes=true;
		return CacheRankView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.DebugPanelView extends laya.debug.view.nodeInfo.views.UIViewBase
	var DebugPanelView=(function(_super){
		function DebugPanelView(){
			this.view=null;
			this.dragIcon=null;
			this.tSelectTar=null;
			this._selectTip=new Sprite();
			DebugPanelView.__super.call(this);
			this._selectTip.setBounds(new Rectangle(0,0,0,0));
		}

		__class(DebugPanelView,'laya.debug.view.nodeInfo.views.DebugPanelView',_super);
		var __proto=DebugPanelView.prototype;
		__proto.createPanel=function(){
			this.view=new DebugPage();
			this.dis=this.view;
			this.view.minBtn.minHandler=this.minHandler;
			this.view.minBtn.maxHandler=this.maxHandler;
			this.view.minBtn.tar=this.view;
			DisControlTool.setDragingItem(this.view.bg,this.view);
			DisControlTool.setDragingItem(this.view.tab,this.view);
			DisControlTool.setDragingItem(this.view.clearBtn,this.view);
			this.clickSelectChange();
			this.view.selectWhenClick.on("change",this,this.clickSelectChange);
			Notice.listen("ItemClicked",this,this.itemClicked);
			StyleConsts.setViewScale(this.view);
			this.dragIcon=this.view.dragIcon;
			this.dragIcon.removeSelf();
			this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown);
			this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd);
			this.view.clearBtn.on("mousedown",this,this.clearBtnClick);
		}

		__proto.clearBtnClick=function(){
			DebugTool.clearDebugLayer();
		}

		__proto.mouseAnalyserMouseDown=function(){
			var gPos=DebugPanelView.tempPos;
			gPos.setTo(0,0);
			gPos=this.view.mouseAnalyseBtn.localToGlobal(gPos);
			this.dragIcon.pos(gPos.x,gPos.y);
			this.dragIcon.mouseEnabled=false;
			Laya.stage.addChild(this.dragIcon);
			this.dragIcon.startDrag();
		}

		__proto.mouseAnalyserDragEnd=function(){
			this.dragIcon.removeSelf();
			this.selectTarget(DisplayHook.instance.getDisUnderMouse());
			NodeToolView.I.showByNode(DisplayHook.instance.getDisUnderMouse(),false);
		}

		//}
		__proto.switchToTree=function(){
			this.view.tab.selectedIndex=0;
		}

		__proto.swichToSelect=function(){
			this.view.tab.selectedIndex=1;
		}

		__proto.itemClicked=function(tar){
			if (!DebugPanelView.isClickSelectState)return;
			if (DebugPanelView.ignoreDebugTool){
				if (DebugInfoLayer.I.isDebugItem(tar))return;
			}
			if ((tar instanceof laya.debug.uicomps.ContextMenuItem )|| (tar.parent instanceof laya.debug.uicomps.ContextMenuItem )){
				return;
			}
			ToolPanel.I.showSelectInStage(tar);
			NodeToolView.I.showByNode(tar,false);
			this.view.selectWhenClick.selected=false;
			DebugTool.showDisBound(tar);
			this.clickSelectChange();
		}

		__proto.selectTarget=function(tar){
			if (!tar)return;
			ToolPanel.I.showSelectInStage(tar);
			DebugTool.showDisBound(tar);
		}

		__proto.clickSelectChange=function(){
			DebugPanelView.isClickSelectState=this.view.selectWhenClick.selected;
			if (!Browser.onPC)return;
			this.tSelectTar=null;
			this.clearSelectTip();
			if (DebugPanelView.isClickSelectState){
				Laya.timer.loop(200,this,this.updateSelectTar,null,true);
				}else{
				Laya.timer.clear(this,this.updateSelectTar);
			}
		}

		__proto.clearSelectTip=function(){
			this._selectTip.removeSelf();
		}

		__proto.updateSelectTar=function(){
			this.clearSelectTip();
			this.tSelectTar=DisplayHook.instance.getDisUnderMouse();
			if (!this.tSelectTar){
				return;
			}
			if (DebugInfoLayer.I.isDebugItem(this.tSelectTar))return;
			var g;
			g=this._selectTip.graphics;
			g.clear();
			var rec;
			rec=NodeUtils.getGRec(this.tSelectTar);
			DebugInfoLayer.I.popLayer.addChild(this._selectTip);
			g.drawRect(0,0,rec.width,rec.height,null,"#00ffff",2);
			this._selectTip.pos(rec.x,rec.y);
		}

		__getset(1,DebugPanelView,'I',function(){
			if (!DebugPanelView._I)DebugPanelView._I=new DebugPanelView();
			return DebugPanelView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		DebugPanelView._I=null
		DebugPanelView.ignoreDebugTool=true;
		DebugPanelView.isClickSelectState=false;
		__static(DebugPanelView,
		['tempPos',function(){return this.tempPos=new Point();}
		]);
		return DebugPanelView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.FilterView extends laya.debug.view.nodeInfo.views.UIViewBase
	var FilterView=(function(_super){
		function FilterView(){
			this.input=null;
			FilterView.__super.call(this);
		}

		__class(FilterView,'laya.debug.view.nodeInfo.views.FilterView',_super);
		var __proto=FilterView.prototype;
		__proto.createPanel=function(){
			this.input=new Input();
			this.input.size(400,500);
			this.input.multiline=true;
			this.input.bgColor="#ff00ff";
			this.input.fontSize=24;
			this.addChild(this.input);
		}

		__proto.show=function(){
			this.input.text=NodeInfosItem.showValues.join("\n");
			_super.prototype.show.call(this);
		}

		__proto.close=function(){
			_super.prototype.close.call(this);
			NodeInfosItem.showValues=this.input.text.split("\n");
		}

		return FilterView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.FindSmallView extends laya.debug.view.nodeInfo.views.UIViewBase
	var FindSmallView=(function(_super){
		function FindSmallView(){
			this.view=null;
			FindSmallView.__super.call(this);
		}

		__class(FindSmallView,'laya.debug.view.nodeInfo.views.FindSmallView',_super);
		var __proto=FindSmallView.prototype;
		__proto.createPanel=function(){
			this.view=new FindNodeSmall();
			StyleConsts.setViewScale(this.view);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			this.view.typeSelect.selectedIndex=1;
			this.view.closeBtn.on("click",this,this.close);
			this.view.findBtn.on("click",this,this.onFind);
			this.dis=this.view;
		}

		__proto.onFind=function(){
			var key;
			key=this.view.findTxt.text;
			key=StringTool.trimSide(key);
			var nodeList;
			if (this.view.typeSelect.selectedIndex==0){
				nodeList=DebugTool.findNameHas(key,false);
				}else{
				nodeList=DebugTool.findClassHas(Laya.stage,key);
			}
			ToolPanel.I.showSelectItems(nodeList);
			this.close();
		}

		__getset(1,FindSmallView,'I',function(){
			if (!FindSmallView._I)FindSmallView._I=new FindSmallView();
			return FindSmallView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		FindSmallView._I=null
		return FindSmallView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.FindView extends laya.debug.view.nodeInfo.views.UIViewBase
	var FindView=(function(_super){
		function FindView(){
			this.view=null;
			FindView.__super.call(this);
		}

		__class(FindView,'laya.debug.view.nodeInfo.views.FindView',_super);
		var __proto=FindView.prototype;
		__proto.createPanel=function(){
			this.view=new FindNode();
			DisControlTool.setDragingItem(this.view.bg,this.view);
			this.view.result.scrollBar.hide=true;
			this.view.result.array=[];
			this.view.typeSelect.selectedIndex=1;
			this.view.closeBtn.on("click",this,this.close);
			this.view.findBtn.on("click",this,this.onFind);
			NodeMenu.I.setNodeListAction(this.view.result);
			this.dis=this.view;
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.result;
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		//}
		__proto.onFind=function(){
			var key;
			key=this.view.findTxt.text;
			key=StringTool.trimSide(key);
			var nodeList;
			if (this.view.typeSelect.selectedIndex==0){
				nodeList=DebugTool.findNameHas(key,false);
				}else{
				nodeList=DebugTool.findClassHas(Laya.stage,key);
			}
			this.showFindResult(nodeList);
		}

		__proto.showFindResult=function(nodeList){
			if (!nodeList)return;
			var i=0,len=0;
			len=nodeList.length;
			var showList;
			showList=[];
			var tData;
			var tSprite;
			for (i=0;i < len;i++){
				tSprite=nodeList[i];
				tData={};
				tData.label=ClassTool.getNodeClassAndName(tSprite);
				tData.path=tSprite;
				showList.push(tData);
			}
			this.view.result.array=showList;
		}

		__getset(1,FindView,'I',function(){
			if (!FindView._I)FindView._I=new FindView();
			return FindView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		FindView._I=null
		return FindView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.NodeListPanelView extends laya.debug.view.nodeInfo.views.UIViewBase
	var NodeListPanelView=(function(_super){
		function NodeListPanelView(){
			this.view=null;
			NodeListPanelView.__super.call(this);
		}

		__class(NodeListPanelView,'laya.debug.view.nodeInfo.views.NodeListPanelView',_super);
		var __proto=NodeListPanelView.prototype;
		__proto.createPanel=function(){
			this.view=new NodeListPanel();
			this.addChild(this.view);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			NodeMenu.I.setNodeListAction(this.view.itemList);
			this.view.closeBtn.on("click",this,this.close);
			this.view.itemList.scrollBar.hide=true;
			this.dis=this;
			this.view.itemList.array=[];
		}

		//fresh();
		__proto.showList=function(list){
			this.view.itemList.array=list;
			this.show();
		}

		__getset(1,NodeListPanelView,'I',function(){
			if (!NodeListPanelView._I)
				NodeListPanelView._I=new NodeListPanelView();
			return NodeListPanelView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		NodeListPanelView._I=null
		NodeListPanelView.filterDebugNodes=true;
		return NodeListPanelView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.NodeToolView extends laya.debug.view.nodeInfo.views.UIViewBase
	var NodeToolView=(function(_super){
		function NodeToolView(){
			this.view=null;
			this.dragIcon=null;
			this._tar=null;
			NodeToolView.__super.call(this);
		}

		__class(NodeToolView,'laya.debug.view.nodeInfo.views.NodeToolView',_super);
		var __proto=NodeToolView.prototype;
		__proto.show=function(){
			this.showByNode();
		}

		__proto.createPanel=function(){
			this.view=new NodeTool();
			this.addChild(this.view);
			this.view.on("click",this,this.onBtnClick);
			this.view.closeBtn.on("click",this,this.onCloseBtn);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			this.dis=this.view;
			this.view.freshBtn.on("click",this,this.onFreshBtn);
			this.dragIcon=this.view.dragIcon;
			this.dragIcon.removeSelf();
			this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd);
			this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown);
		}

		__proto.mouseAnalyserMouseDown=function(){
			var gPos=NodeToolView.tempPos;
			gPos.setTo(0,0);
			gPos=this.view.mouseAnalyseBtn.localToGlobal(gPos);
			this.dragIcon.pos(gPos.x,gPos.y);
			this.dragIcon.mouseEnabled=false;
			Laya.stage.addChild(this.dragIcon);
			this.dragIcon.startDrag();
		}

		__proto.mouseAnalyserDragEnd=function(){
			this.dragIcon.removeSelf();
			if (laya.debug.view.nodeInfo.views.NodeToolView.I.target){
				MouseEventAnalyser.analyseNode(laya.debug.view.nodeInfo.views.NodeToolView.I.target);
			}
		}

		__proto.onFreshBtn=function(){
			if (!this._tar)return;
			this._tar.reCache();
			this._tar.repaint();
		}

		__proto.onCloseBtn=function(){
			this.close();
		}

		__proto.onBtnClick=function(e){
			if (!this._tar)return;
			var tar;
			tar=e.target;
			console.log("onBtnClick:",tar);
			var txt;
			txt=(tar).label;
			switch(txt){
				case "父链":
					DebugTool.showParentChain(this._tar);
					SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
					break ;
				case "子":
					DebugTool.showAllChild(this._tar);
					SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
					break ;
				case "兄弟":
					DebugTool.showAllBrother(this._tar);
					SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
					break ;
				case "Enable链":
					OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar));
					SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
					break ;
				case "Size链":
					OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar));
					SelectInfosView.I.setSelectList(DebugTool.selectedNodes);
					break ;
				case "隐藏旁支":
					NodeInfoPanel.I.recoverNodes();
					NodeInfoPanel.I.hideOtherChain(this._tar);
					break ;
				case "隐藏兄弟":
					NodeInfoPanel.I.recoverNodes();
					NodeInfoPanel.I.hideBrothers(this._tar);
					break ;
				case "隐藏子":
					NodeInfoPanel.I.recoverNodes();
					NodeInfoPanel.I.hideChilds(this._tar);
					break ;
				case "恢复":
					NodeInfoPanel.I.recoverNodes();
					break ;
				case "节点树定位":
					ToolPanel.I.showSelectInStage(this._tar);
					break ;
				case "显示边框":
					DebugTool.showDisBound(this._tar);
					break ;
				case "输出到控制台":
					console.log(this._tar);
					break ;
				case "显示切换":
					this._tar.visible=!this._tar.visible;
					break ;
				}
		}

		__proto.showByNode=function(node,ifShow){
			(ifShow===void 0)&& (ifShow=true);
			if (!node)node=Laya.stage;
			if(ifShow)
				_super.prototype.show.call(this);
			this._tar=node;
			this.fresh();
		}

		__proto.fresh=function(){
			if (!this._tar)return;
			this.view.tarTxt.text=ClassTool.getNodeClassAndName(this._tar);
		}

		__getset(0,__proto,'target',function(){
			return this._tar;
		});

		__getset(1,NodeToolView,'I',function(){
			if (!NodeToolView._I)NodeToolView._I=new NodeToolView();
			return NodeToolView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		NodeToolView._I=null
		__static(NodeToolView,
		['tempPos',function(){return this.tempPos=new Point();}
		]);
		return NodeToolView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.NodeTreeSettingView extends laya.debug.view.nodeInfo.views.UIViewBase
	var NodeTreeSettingView=(function(_super){
		function NodeTreeSettingView(){
			this.view=null;
			this._handler=null;
			NodeTreeSettingView.__super.call(this);
		}

		__class(NodeTreeSettingView,'laya.debug.view.nodeInfo.views.NodeTreeSettingView',_super);
		var __proto=NodeTreeSettingView.prototype;
		__proto.createPanel=function(){
			_super.prototype.createPanel.call(this);
			this.view=new NodeTreeSetting();
			StyleConsts.setViewScale(this.view);
			this.addChild(this.view);
			this.inits();
			this.dis=this.view;
		}

		__proto.show=function(){
			_super.prototype.show.call(this);
		}

		__proto.showSetting=function(filters,callBack,tar){
			if ((tar instanceof laya.display.Node )){
				this.view.showTxt.text=NodeConsts.defaultFitlerStr.split(",").join("\n");
				}else{
				this.view.showTxt.text=filters.join("\n");
			}
			this._handler=callBack;
			this.show();
		}

		__proto.inits=function(){
			this.view.okBtn.on("click",this,this.onOkBtn);
			this.view.closeBtn.on("click",this,this.onCloseBtn);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			this.dis=this.view;
		}

		__proto.onCloseBtn=function(){
			this.close();
		}

		__proto.onOkBtn=function(){
			this.close();
			var showArr;
			showArr=this.view.showTxt.text.split("\n");
			if (this._handler){
				this._handler.runWith([showArr]);
				this._handler=null
			}
		}

		__getset(1,NodeTreeSettingView,'I',function(){
			if (!NodeTreeSettingView._I)NodeTreeSettingView._I=new NodeTreeSettingView();
			return NodeTreeSettingView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		NodeTreeSettingView._I=null
		return NodeTreeSettingView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.NodeTreeView extends laya.debug.view.nodeInfo.views.UIViewBase
	var NodeTreeView=(function(_super){
		function NodeTreeView(){
			this.nodeTree=null;
			NodeTreeView.__super.call(this);
		}

		__class(NodeTreeView,'laya.debug.view.nodeInfo.views.NodeTreeView',_super);
		var __proto=NodeTreeView.prototype;
		__proto.show=function(){
			this.showByNode();
		}

		__proto.showByNode=function(node){
			if (!node)node=Laya.stage;
			this.nodeTree.setDis(node);
		}

		//super.show();
		__proto.createPanel=function(){
			_super.prototype.createPanel.call(this);
			if (!this.nodeTree)this.nodeTree=new NodeTree();
			this.dis=null;
			var view;
			view=this.nodeTree;
			view.top=view.bottom=view.left=view.right=0;
			this.addChild(view);
			this.showByNode(Laya.stage);
		}

		__proto.showSelectInStage=function(node){
			this.showByNode(Laya.stage);
			this.nodeTree.selectByNode(node);
		}

		return NodeTreeView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.ObjectCreateView extends laya.debug.view.nodeInfo.views.UIViewBase
	var ObjectCreateView=(function(_super){
		function ObjectCreateView(){
			this.view=null;
			this._menu=null;
			this._menuItems=["统计详情","增量详情"];
			this._tSelectKey=null;
			this.preInfo={};
			ObjectCreateView.__super.call(this);
			ObjectCreateView._I=this;
		}

		__class(ObjectCreateView,'laya.debug.view.nodeInfo.views.ObjectCreateView',_super);
		var __proto=ObjectCreateView.prototype;
		__proto.createPanel=function(){
			this.view=new ObjectCreate();
			this.view.top=this.view.bottom=this.view.left=this.view.right=0;
			this.addChild(this.view);
			this.view.itemList.on(DebugTool.getMenuShowEvent(),this,this.onRightClick);
			this.view.closeBtn.on("click",this,this.close);
			this.view.freshBtn.on("click",this,this.fresh);
			this.view.itemList.scrollBar.hide=true;
			this._menu=ContextMenu.createMenuByArray(this._menuItems);
			this._menu.on("select",this,this.onEmunSelect);
			this.fresh();
		}

		__proto.onEmunSelect=function(e){
			if (!this._tSelectKey)return;
			var data=(e.target).data;
			if ((typeof data=='string')){
				var key;
				key=data;
				var count;
				switch (key){
					case "统计详情":
						count=RunProfile.getRunInfo(this._tSelectKey);
						if (count){
							OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+count.traceSelfR());
						}
						break ;
					case "增量详情":
						count=RunProfile.getRunInfo(this._tSelectKey);
						if (count){
							OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+count.traceSelfR(count.changeO));
						}
						break ;
					}
			}
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.itemList;
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				this._tSelectKey=tarNode;
				if (this._tSelectKey){
					this._menu.show();
				}
			}
		}

		__proto.show=function(){
			this.fresh();
		}

		__proto.fresh=function(){
			var dataO;
			dataO=ClassCreateHook.I.createInfo;
			var key;
			var dataList;
			dataList=[];
			var tData;
			var count;
			for (key in dataO){
				if (!this.preInfo[key])
					this.preInfo[key]=0;
				tData={};
				tData.path=key;
				tData.count=dataO[key];
				tData.add=dataO[key]-this.preInfo[key];
				if (tData.add > 0){
					tData.label=key+":"+dataO[key]+" +"+tData.add;
				}
				else{
					tData.label=key+":"+dataO[key];
				}
				count=RunProfile.getRunInfo(key);
				if (count){
					count.record();
				}
				tData.rank=tData.add *1000+tData.count;
				this.preInfo[key]=dataO[key];
				dataList.push(tData);
			}
			dataList.sort(MathTools.sortByKey("rank",true,true));
			this.view.itemList.array=dataList;
		}

		__getset(1,ObjectCreateView,'I',function(){
			if (!ObjectCreateView._I)
				ObjectCreateView._I=new ObjectCreateView();
			return ObjectCreateView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		ObjectCreateView._I=null
		return ObjectCreateView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.ObjectInfoView extends laya.debug.view.nodeInfo.views.UIViewBase
	var ObjectInfoView=(function(_super){
		function ObjectInfoView(){
			this.view=null;
			this.showKeys=["x","y","width","height","renderCost"];
			this._closeSettingHandler=null;
			this._tar=null;
			ObjectInfoView.__super.call(this);
		}

		__class(ObjectInfoView,'laya.debug.view.nodeInfo.views.ObjectInfoView',_super);
		var __proto=ObjectInfoView.prototype;
		__proto.createPanel=function(){
			_super.prototype.createPanel.call(this);
			this.view=new ObjectInfo();
			StyleConsts.setViewScale(this.view);
			this.addChild(this.view);
			this.inits();
		}

		__proto.inits=function(){
			this.view.closeBtn.on("click",this,this.close);
			this.view.settingBtn.on("click",this,this.onSettingBtn);
			this.view.autoUpdate.on("change",this,this.onAutoUpdateChange);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			DisControlTool.setResizeAbleEx(this.view);
			this._closeSettingHandler=new Handler(this,this.closeSetting);
			this.dis=this.view;
		}

		__proto.onAutoUpdateChange=function(){
			this.autoUpdate=this.view.autoUpdate.selected;
		}

		__proto.onSettingBtn=function(){
			NodeTreeSettingView.I.showSetting(this.showKeys,this._closeSettingHandler,this._tar);
		}

		__proto.reset=function(){
			this.showKeys=["x","y","width","height","renderCost"];
		}

		__proto.closeSetting=function(newKeys){
			this.showKeys=newKeys;
			this.fresh();
		}

		__proto.showObjectInfo=function(obj){
			this._tar=obj;
			this.fresh();
			this.show();
			this.onAutoUpdateChange();
		}

		__proto.fresh=function(){
			if (!this._tar){
				this.view.showTxt.text="";
				this.view.title.text="未选中对象";
			}
			else{
				this.view.title.text=ClassTool.getNodeClassAndName(this._tar);
				this.view.showTxt.text=ObjectInfoView.getObjValueStr(this._tar,this.showKeys,false);
			}
		}

		__proto.freshKeyInfos=function(){
			this.fresh();
		}

		__proto.close=function(){
			_super.prototype.close.call(this);
			this.autoUpdate=false;
			Pool.recover("ObjectInfoView",this);
		}

		__proto.show=function(){
			_super.prototype.show.call(this);
		}

		__getset(0,__proto,'autoUpdate',null,function(v){
			Laya.timer.clear(this,this.freshKeyInfos);
			if (v){
				Laya.timer.loop(2000,this,this.freshKeyInfos);
			}
		});

		ObjectInfoView.getObjValueStr=function(obj,keys,withTitle){
			(withTitle===void 0)&& (withTitle=true);
			var i=0,len=0;
			var tKey;
			ObjectInfoView._txts.length=0;
			len=keys.length;
			if (withTitle){
				if (obj.name){
					ObjectInfoView._txts.push(ClassTool.getClassName(obj)+"("+obj.name+")");
				}
				else{
					ObjectInfoView._txts.push(ClassTool.getClassName(obj));
				}
			}
			for (i=0;i < len;i++){
				tKey=keys[i];
				ObjectInfoView._txts.push(tKey+":"+ObjectInfoView.getNodeValue(obj,tKey));
			}
			return ObjectInfoView._txts.join("\n");
		}

		ObjectInfoView.getNodeValue=function(node,key){
			var rst;
			if ((node instanceof laya.display.Sprite )){
				var tNode;
				tNode=node;
				switch (key){
					case "gRec":
						rst=NodeUtils.getGRec(tNode).toString();
						break ;
					case "gAlpha":
						rst=NodeUtils.getGAlpha(tNode)+"";
						break ;
					case "cmdCount":
						rst=NodeUtils.getNodeCmdCount(tNode)+"";
						break ;
					case "cmdAll":
						rst=NodeUtils.getNodeCmdTotalCount(tNode)+"";
						break ;
					case "nodeAll":
						rst=""+NodeUtils.getNodeCount(tNode);
						break ;
					case "nodeVisible":
						rst=""+NodeUtils.getNodeCount(tNode,true);
						break ;
					case "nodeRender":
						rst=""+NodeUtils.getRenderNodeCount(tNode);
						break ;
					case "nodeReCache":
						rst=""+NodeUtils.getReFreshRenderNodeCount(tNode);
						break ;
					case "renderCost":
						rst=""+RenderAnalyser.I.getTime(tNode);
						break ;
					case "renderCount":
						rst=""+RenderAnalyser.I.getCount(tNode);
						break ;
					default :
						rst=node[key]+"";
					}
			}
			else{
				rst=node[key]+"";
			}
			return rst;
		}

		ObjectInfoView.showObject=function(obj){
			var infoView;
			infoView=Pool.getItemByClass("ObjectInfoView",ObjectInfoView);
			infoView.reset();
			infoView.showObjectInfo(obj);
		}

		ObjectInfoView._txts=[];
		return ObjectInfoView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.OutPutView extends laya.debug.view.nodeInfo.views.UIViewBase
	var OutPutView=(function(_super){
		function OutPutView(){
			this.view=null;
			OutPutView.__super.call(this);
			DebugTool._logFun=OutPutView.log;
		}

		__class(OutPutView,'laya.debug.view.nodeInfo.views.OutPutView',_super);
		var __proto=OutPutView.prototype;
		__proto.createPanel=function(){
			this.view=new OutPut();
			DisControlTool.setDragingItem(this.view.txt,this.view);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			StyleConsts.setViewScale(this.view);
			this.view.txt.textField.overflow=Text.SCROLL;
			this.view.txt.textField.wordWrap=true;
			this.view.on("mousewheel",this,this.mouseWheel);
			this.view.txt.text="";
			DisControlTool.setResizeAbleEx(this.view);
			this.view.closeBtn.on("click",this,this.close);
			this.view.clearBtn.on("click",this,this.onClearBtn);
			this.dis=this.view;
		}

		__proto.onClearBtn=function(){
			this.clearText();
		}

		__proto.mouseWheel=function(e){
			this.view.txt.textField.scrollY-=e.delta*10;
		}

		__proto.showTxt=function(str){
			this.view.txt.text=str;
			this.show();
			this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY;
		}

		__proto.clearText=function(){
			this.view.txt.text="";
		}

		__proto.dTrace=function(__arg){
			var arg=arguments;
			if (this.view.txt.textField.scrollY > 1000){
				this.view.txt.text="";
			};
			var str;
			var i=0,len=0;
			len=arg.length;
			str=arg[0];
			for (i=1;i < len;i++){
				str+=" "+arg[i];
			}
			this.addStr(str);
		}

		__proto.addStr=function(str){
			this.view.txt.text+="\n"+str;
			this.show();
			this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY;
		}

		__getset(1,OutPutView,'I',function(){
			if (!OutPutView._I)OutPutView._I=new OutPutView();
			return OutPutView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		OutPutView.log=function(str){
			OutPutView.I.addStr(str);
		}

		OutPutView._I=null
		return OutPutView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.RenderCostRankView extends laya.debug.view.nodeInfo.views.UIViewBase
	var RenderCostRankView=(function(_super){
		function RenderCostRankView(){
			this.view=null;
			RenderCostRankView.__super.call(this);
		}

		__class(RenderCostRankView,'laya.debug.view.nodeInfo.views.RenderCostRankView',_super);
		var __proto=RenderCostRankView.prototype;
		__proto.createPanel=function(){
			this.view=new Rank();
			this.view.top=this.view.bottom=this.view.left=this.view.right=0;
			this.addChild(this.view);
			NodeMenu.I.setNodeListAction(this.view.itemList);
			this.view.closeBtn.on("click",this,this.close);
			this.view.freshBtn.on("click",this,this.fresh);
			this.view.itemList.scrollBar.hide=true;
			this.view.autoUpdate.on("change",this,this.onAutoUpdateChange);
			this.dis=this;
			this.view.itemList.array=[];
			this.onAutoUpdateChange();
			this.fresh();
			Laya.timer.once(5000,this,this.fresh);
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.itemList;
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		__proto.onAutoUpdateChange=function(){
			this.autoUpdate=this.view.autoUpdate.selected;
		}

		__proto.fresh=function(){
			this.view.title.text="渲染用时排行("+NodeConsts.RenderCostMaxTime+"ms)";
			var nodeDic;
			nodeDic=RenderAnalyser.I.nodeDic;
			var key;
			var tNode;
			var tData;
			var dataList;
			dataList=[];
			for (key in nodeDic){
				tNode=nodeDic[key];
				if (RenderCostRankView.filterDebugNodes && DisControlTool.isInTree(DebugInfoLayer.I,tNode))continue ;
				if (RenderAnalyser.I.getTime(tNode)<=0)continue ;
				tData={};
				tData.time=RenderAnalyser.I.getTime(tNode);
				if (RenderCostRankView.filterDebugNodes && tNode==Laya.stage){
					tData.time-=RenderAnalyser.I.getTime(DebugInfoLayer.I);
				}
				tData.path=tNode;
				tData.label=ClassTool.getNodeClassAndName(tNode)+":"+tData.time;
				dataList.push(tData);
			}
			dataList.sort(MathTools.sortByKey("time",true,true));
			this.view.itemList.array=dataList;
		}

		__getset(0,__proto,'autoUpdate',null,function(v){
			Laya.timer.clear(this,this.fresh);
			if (v){
				this.fresh();
				Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh);
			}
		});

		__getset(1,RenderCostRankView,'I',function(){
			if (!RenderCostRankView._I)
				RenderCostRankView._I=new RenderCostRankView();
			return RenderCostRankView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		RenderCostRankView._I=null
		RenderCostRankView.filterDebugNodes=true;
		return RenderCostRankView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.ResRankView extends laya.debug.view.nodeInfo.views.UIViewBase
	var ResRankView=(function(_super){
		function ResRankView(){
			this.view=null;
			ResRankView.__super.call(this);
		}

		__class(ResRankView,'laya.debug.view.nodeInfo.views.ResRankView',_super);
		var __proto=ResRankView.prototype;
		__proto.createPanel=function(){
			this.view=new Rank();
			this.view.top=this.view.bottom=this.view.left=this.view.right=0;
			this.addChild(this.view);
			this.view.closeBtn.on("click",this,this.close);
			this.view.freshBtn.on("click",this,this.fresh);
			this.view.itemList.scrollBar.hide=true;
			this.view.autoUpdate.on("change",this,this.onAutoUpdateChange);
			this.dis=this;
			this.view.itemList.array=[];
			this.view.itemList.on("rightclick",this,this.onRightClick);
			this.onAutoUpdateChange();
			this.fresh();
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.itemList;
			if (list.selectedItem){
				console.log(list.selectedItem["url"]);
			}
		}

		__proto.onAutoUpdateChange=function(){
			this.autoUpdate=this.view.autoUpdate.selected;
		}

		__proto.fresh=function(){
			this.view.title.text="图片缓存列表";
			var resList;
			resList=ResTools.getCachedResList();
			var key;
			var tNode;
			var tData;
			var dataList;
			dataList=[];
			var i=0,len=0;
			len=resList.length;
			for (i=0;i < len;i++){
				tData={};
				var tUrl;
				tUrl=resList[i];
				tUrl=tUrl.replace(URL.rootPath,"")
				tData.label=tUrl;
				tData.url=tUrl;
				dataList.push(tData);
			}
			this.view.itemList.array=dataList;
		}

		__getset(0,__proto,'autoUpdate',null,function(v){
			Laya.timer.clear(this,this.fresh);
			if (v){
				this.fresh();
				Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh);
			}
		});

		__getset(1,ResRankView,'I',function(){
			if (!ResRankView._I)
				ResRankView._I=new ResRankView();
			return ResRankView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		ResRankView._I=null
		ResRankView.filterDebugNodes=true;
		return ResRankView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.SelectInfosView extends laya.debug.view.nodeInfo.views.UIViewBase
	var SelectInfosView=(function(_super){
		function SelectInfosView(){
			this.showKeys=[];
			this.view=null;
			this.fliterTxt=null;
			this.itemList=null;
			SelectInfosView.__super.call(this);
			SelectInfosView._I=this;
			this.setSelectList(null);
		}

		__class(SelectInfosView,'laya.debug.view.nodeInfo.views.SelectInfosView',_super);
		var __proto=SelectInfosView.prototype;
		__proto.createPanel=function(){
			this.view=new SelectInfos();
			this.addChild(this.view);
			this.view.top=this.view.bottom=this.view.left=this.view.right=0;
			NodeMenu.I.setNodeListAction(this.view.selectList);
			this.view.closeBtn.on("click",this,this.close);
			this.view.selectList.scrollBar.hide=true;
			this.dis=null;
			this.view.findBtn.on("click",this,this.onFindBtn);
			this.fliterTxt=this.view.fliterTxt;
			this.view.fliterTxt.on("enter",this,this.onFliterTxtChange);
			this.view.fliterTxt.on("blur",this,this.onFliterTxtChange);
		}

		__proto.onFliterTxtChange=function(e){
			var key;
			key=this.fliterTxt.text;
			if (key==""){
				if (this.showKeys.length !=0){
					this.showKeys.length=0;
					this.fresh();
				}
			}else
			if (key !=this.showKeys.join(",")){
				this.showKeys=key.split(",");
				this.fresh();
			}
		}

		__proto.onFindBtn=function(){
			FindSmallView.I.show();
		}

		__proto.onRightClick=function(){
			var list;
			list=this.view.selectList;
			if (list.selectedItem){
				var tarNode;
				tarNode=list.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		//}
		__proto.setSelectTarget=function(node){
			if (!node)return;
			this.setSelectList([node]);
		}

		__proto.setSelectList=function(list){
			this.itemList=list;
			this.fresh();
		}

		//show();
		__proto.fresh=function(){
			var list;
			list=this.itemList;
			if (!list || list.length < 1){
				this.view.selectList.array=[];
				return;
			};
			var i=0,len=0;
			var tDis;
			var tData;
			len=list.length;
			var disList;
			disList=[];
			for (i=0;i < len;i++){
				tDis=list[i];
				tData={};
				tData.label=this.getLabelTxt(tDis);
				tData.path=tDis;
				disList.push(tData);
			}
			this.view.selectList.array=disList;
		}

		__proto.getLabelTxt=function(item){
			var rst;
			rst=ClassTool.getNodeClassAndName(item);
			var i=0,len=0;
			len=this.showKeys.length;
			for (i=0;i < len;i++){
				rst+=","+ObjectInfoView.getNodeValue(item,this.showKeys[i]);
			}
			return rst;
		}

		__getset(1,SelectInfosView,'I',function(){
			if (!SelectInfosView._I)SelectInfosView._I=new SelectInfosView();
			return SelectInfosView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		SelectInfosView._I=null
		return SelectInfosView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.ToolBarView extends laya.debug.view.nodeInfo.views.UIViewBase
	var ToolBarView=(function(_super){
		function ToolBarView(){
			this.view=null;
			ToolBarView.__super.call(this);
		}

		__class(ToolBarView,'laya.debug.view.nodeInfo.views.ToolBarView',_super);
		var __proto=ToolBarView.prototype;
		__proto.createPanel=function(){
			this.view=new ToolBar();
			this.addChild(this.view);
			DisControlTool.setDragingItem(this.view.bg,this.view);
			this.view.on("click",this,this.onBtnClick);
			this.view.minBtn.minHandler=this.minHandler;
			this.view.minBtn.maxHandler=this.maxHandler;
			this.view.minBtn.tar=this.view;
			this.clickSelectChange();
			this.view.selectWhenClick.on("change",this,this.clickSelectChange);
			Notice.listen("ItemClicked",this,this.itemClicked);
			this.dis=this.view;
		}

		__proto.itemClicked=function(tar){
			if (!ToolBarView.isClickSelectState)return;
			if (DisControlTool.isInTree(this.view.selectWhenClick,tar))return;
			if (ToolBarView.ignoreDebugTool){
				if (DebugInfoLayer.I.isDebugItem(tar))return;
			}
		}

		__proto.clickSelectChange=function(){
			ToolBarView.isClickSelectState=this.view.selectWhenClick.selected;
		}

		__proto.firstShowFun=function(){
			this.dis.x=Laya.stage.width-this.dis.width-20;
			this.dis.y=5;
		}

		__proto.onBtnClick=function(e){
			switch(e.target){
				case this.view.treeBtn:
					ToolPanel.I.switchShow("Tree");
					break ;
				case this.view.findBtn:
					ToolPanel.I.switchShow("Find");
					break ;
				case this.view.clearBtn:
					DebugTool.clearDebugLayer();
					break ;
				case this.view.rankBtn:
					RenderCostRankView.I.show();
					break ;
				case this.view.nodeRankBtn:
					ObjectCreateView.I.show();
					break ;
				case this.view.cacheBtn:
					NodeUtils.showCachedSpriteRecs();
					break ;
				}
		}

		__getset(1,ToolBarView,'I',function(){
			if (!ToolBarView._I)ToolBarView._I=new ToolBarView();
			return ToolBarView._I;
		},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I);

		ToolBarView._I=null
		ToolBarView.ignoreDebugTool=true;
		ToolBarView.isClickSelectState=false;
		return ToolBarView;
	})(UIViewBase)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.views.TxtInfoView extends laya.debug.view.nodeInfo.views.UIViewBase
	var TxtInfoView=(function(_super){
		function TxtInfoView(){
			this.input=null;
			this.btn=null;
			TxtInfoView.__super.call(this);
		}

		__class(TxtInfoView,'laya.debug.view.nodeInfo.views.TxtInfoView',_super);
		var __proto=TxtInfoView.prototype;
		__proto.createPanel=function(){
			this.input=new Input();
			this.input.size(200,400);
			this.input.multiline=true;
			this.input.bgColor="#ff00ff";
			this.input.fontSize=12;
			this.input.wordWrap=true;
			this.addChild(this.input);
			this.btn=this.getButton();
			this.btn.text="关闭";
			this.btn.size(50,20);
			this.btn.align="center";
			this.btn.on("mousedown",this,this.onCloseBtn);
			this.btn.pos(5,this.input.height+5);
			this.addChild(this.btn);
		}

		__proto.showInfo=function(txt){
			this.input.text=txt;
			this.show();
		}

		__proto.show=function(){
			DebugInfoLayer.I.setTop();
			DebugInfoLayer.I.popLayer.addChild(this);
			this.x=(Laya.stage.width-this.width);
			this.y=0;
		}

		__proto.onCloseBtn=function(){
			this.close();
		}

		return TxtInfoView;
	})(UIViewBase)


	/**
	*时间轴当前帧标志线
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-5 上午11:05:12
	*/
	//class laya.editor.view.timeline.TimeCursor extends laya.ui.Box
	var TimeCursor=(function(_super){
		function TimeCursor(){
			this.head=null;
			this.headWidth=3;
			this.headHeight=20;
			this.txt=null;
			TimeCursor.__super.call(this);
			this.headWidth=TimeGrid.frameWidth-1;
			this.head=new Sprite();
			var cHeight=0;
			cHeight=8;
			var g;
			g=this.head.graphics;
			var headWHalf=NaN;
			headWHalf=Math.ceil(0.5*this.headWidth);
			g.drawPoly(-this.head.width+0.5,0,[-headWHalf,-cHeight,headWHalf,-cHeight,0,0],"#00ffff");
			this.head.x=0;
			this.head.y=-5;
			this.head.width=this.headWidth;
			this.head.height=this.headHeight;
			this.head.mouseEnabled=true;
			this.addChild(this.head);
			this.txt=new Text();
			this.addChild(this.txt);
			this.txt.align="center";
			this.txt.color="#00ffff";
			this.txt.width=30;
			this.txt.pos(-this.txt.width*0.5,-28);
			this.size(1,1);
		}

		__class(TimeCursor,'laya.editor.view.timeline.TimeCursor',_super);
		var __proto=TimeCursor.prototype;
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
		}

		// head.x=-0.5*head.width;
		__proto.setFrame=function(frame){
			this.txt.text=frame+"";
		}

		__proto.sizeTo=function(height){
			var g;
			g=this.graphics;
			g.clear();
			g.drawLine(0,this.head.y,0,height,"#00ffff",1);
		}

		return TimeCursor;
	})(Box)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-7 上午10:26:19
	*/
	//class laya.editor.view.timeline.tree.TreeNodeRender extends laya.ui.Box
	var TreeNodeRender=(function(_super){
		function TreeNodeRender(){
			this.arrow=null;
			this.icon=null;
			this.selectBox=null;
			this.label=null;
			this.dY=3;
			TreeNodeRender.__super.call(this);
			this.selectBox=new Clip("comp/clip_selectBox.png",1,2);
			this.selectBox.pos(13,0);
			this.selectBox.height=TimeGrid.frameHeight;
			this.selectBox.left=12;
			this.selectBox.right=0;
			this.selectBox.name="selectBox";
			this.addChild(this.selectBox);
			this.arrow=new Clip("comp/clip_tree.png",1,2);
			this.arrow.pos(0,5+this.dY);
			this.arrow.name="arrow";
			this.arrow.size(11,12);
			this.addChild(this.arrow);
			this.icon=new Image("comp/clip_folder.png");
			this.icon.pos(14,4+this.dY);
			this.icon.name="folder";
			this.addChild(this.icon);
			this.label=new Label();
			this.label.left=33;
			this.label.right=0;
			this.label.text="tree node";
			this.label.name="label";
			this.label.color="#ffffff";
			this.label.height=TimeGrid.frameHeight;
			this.label.y=5+this.dY;
			this.addChild(this.label);
			this.left=this.right=0;
			this.height=TimeGrid.frameHeight;
		}

		__class(TreeNodeRender,'laya.editor.view.timeline.tree.TreeNodeRender',_super);
		return TreeNodeRender;
	})(Box)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.comonents.LayoutDragBar extends laya.editor.comonents.DragBar
	var LayoutDragBar=(function(_super){
		function LayoutDragBar(mouseType){
			this.type=0;
			this.mId=0;
			this.walked=false;
			this._updaters=[];
			this.relativeO={};
			this.sortByXFun=MathUtil.sortByKey("x",false,true);
			this.sortByYFun=MathUtil.sortByKey("y",false,true);
			(mouseType===void 0)&& (mouseType="R");
			LayoutDragBar.__super.call(this,mouseType);
			this.mId=LayoutDragBar.ID;
			LayoutDragBar.ID++;
			CanvasSprite.setSpriteRenderEmpty(this);
		}

		__class(LayoutDragBar,'laya.editor.comonents.LayoutDragBar',_super);
		var __proto=LayoutDragBar.prototype;
		/**
		*获取可拖动范围
		*@return
		*
		*/
		__proto.getDragArea=function(){
			var area;
			area=new Rectangle();
			var borderVar=NaN;
			switch (this.type){
				case 0:
					area.y=this.y;
					area.height=0;
					area.x=this.getBorderVar("right","left",0,false)+165;
					borderVar=this.x+this.getBorderVar("left","width",999,true);
					borderVar-=165;
					if (borderVar < this.x)
						borderVar=this.x;
					area.width=borderVar-area.x;
					break ;
				case 1:
					area.y=this.getBorderVar("down","top",0,false)+165;
					borderVar=this.y+this.getBorderVar("up","height",999,true);
					borderVar-=165;
					if (borderVar < this.y)
						borderVar=this.y;
					area.height=borderVar-area.y;
					area.x=this.x;
					area.width=0;
					break ;
				}
			return area;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			var g=this.graphics;
			g.clear();
			this.updates();
		}

		__proto.updates=function(){
			var i=0,len=0;
			len=this._updaters.length;
			for (i=0;i < len;i++){
				this._updaters[i].update();
			}
		}

		__proto.getBorderVar=function(type,sign,sValue,isMin){
			(isMin===void 0)&& (isMin=true);
			var i=0,len=0;
			var uList=this._updaters;
			len=uList.length;
			var tValue=NaN;
			tValue=sValue;
			var tUpdater;
			var tFun;
			tFun=RelativePos.typeToFunO[type];
			if (isMin){
				for (i=0;i < len;i++){
					tUpdater=uList[i];
					if (tUpdater._fun==tFun){
						if (tUpdater.tar[sign] < tValue){
							tValue=tUpdater.tar[sign];
						}
					}
				}
			}
			else{
				for (i=0;i < len;i++){
					tUpdater=uList[i];
					if (tUpdater._fun==tFun){
						if (tUpdater.tar[sign] > tValue){
							tValue=tUpdater.tar[sign];
						}
					}
				}
			}
			return tValue;
		}

		__proto.clear=function(){
			this._updaters.length=0;
		}

		/**
		*
		*@param tar
		*
		*/
		__proto.mergeUpdates=function(tar){
			if (!tar)
				return;
			var i=0,len=0;
			var tarUpdaters;
			tarUpdaters=tar._updaters;
			tarUpdaters=ObjectTools.setValueArr([],tarUpdaters);
			len=tarUpdaters.length;
			var tR;
			var tType;
			for (i=0;i < len;i++){
				tR=tarUpdaters[i];
				tType=RelativePos.getTypeByFun(tR._fun);
				if(tR.tar==this||tR.to==this)continue ;
				RelativePos.addRelative(tR.tar,this,tType,tR.d);
			}
			this.updates();
		}

		__proto.copyUpdates=function(tar,side){
			var i=0,len=0;
			var tarUpdaters;
			tarUpdaters=tar._updaters;
			tarUpdaters=ObjectTools.setValueArr([],tarUpdaters);
			len=tarUpdaters.length;
			var tR;
			var tType;
			for (i=0;i < len;i++){
				tR=tarUpdaters[i];
				tType=RelativePos.getTypeByFun(tR._fun);
				if(tR.tar==this||tR.to==this)continue ;
				if(side==tType){
					RelativePos.addRelative(tR.tar,this,tType,tR.d);
				}
			}
			this.updates();
		}

		/**
		*
		*@param tar
		*
		*/
		__proto.removeTarget=function(tar){
			var i=0,len=0;
			len=this._updaters.length;
			for (i=len-1;i >=0;i--){
				if (this._updaters[i].tar==tar){
					this._updaters.splice(i,1);
				}
			}
		}

		__proto.findTarType=function(tar){
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			for (i=0;i < len;i++){
				tR=this._updaters[i];
				if (tR.tar==tar){
					return tR._fun;
				}
			}
			return null;
		}

		__proto.canMove=function(dirType,len){
			if (!LayoutDragBar.canMoveO){
				LayoutDragBar.canMoveO={};
				var tO;
				tO={};
				tO["left"]=true;
				tO["right"]=true;
				LayoutDragBar.canMoveO[0]=tO;
				tO={};
				tO["up"]=true;
				tO["down"]=true;
				LayoutDragBar.canMoveO[1]=tO;
			}
			if (!LayoutDragBar.canMoveO[this.type][dirType])return false;
			return false;
		}

		/**
		*对象所在的方向是否只有它一个对象
		*@param tar
		*@return
		*
		*/
		__proto.isOnly=function(tar){
			if (this.type==2)
				return false;
			var i=0,len=0;
			len=this._updaters.length;
			var fun=this.findTarType(tar);
			if (fun==null)
				return false;
			var tR;
			for (i=0;i < len;i++){
				tR=this._updaters[i];
				if ((tR._fun==fun)&& (tR.tar !=tar)){
					return false;
				}
				if (tR.tar !=tar){
					if ((tR.tar instanceof laya.editor.view.LayoutRec )){
						if ((tR.tar).disMode==1){
							return false;
						}
					}
				}
			}
			return true;
		}

		__proto.getSideType=function(){
			if(this._updaters.length>0){
				return RelativePos.getTypeByFun(this._updaters[0]._fun);
			}
			return null;
		}

		__proto.addItem=function(tar,fun,d){
			(d===void 0)&& (d=0);
			var updater;
			updater=new RelativePos(fun,tar,this,0);
			this._updaters.push(updater);
		}

		__proto.clears=function(){
			this.clear();
			this.destroy(false);
		}

		__proto.getTarsByType=function(type){
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var tFun;
			tFun=tFun=RelativePos.typeToFunO[type];
			var rst;
			rst=[];
			for (i=0;i < len;i++){
				tR=this._updaters[i];
				if (tR._fun==tFun){
					rst.push(tR.tar);
				}
			}
			return rst;
		}

		__proto.getDragBarInfo=function(type){
			var rsts;
			rsts=[];
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=this._updaters[i];
				if((tR.tar instanceof laya.editor.view.LayoutRec )){
					if(type&&type==RelativePos.getTypeByFun(tR._fun))
						rsts.push((tR.tar).tTabTxt);
				}
			}
			return "id:"+this.mId+"_"+rsts.join(",");
		}

		/**
		*调整垂直方向的拖动条
		*@param dis
		*@return
		*
		*/
		__proto.tryMoveRight=function(dis){
			if(this.walked)return false;
			this.walked=true;
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=this._updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="e-resize"&&RelativePos.getTypeByFun(tR._fun)=="up"){
						dragBarList.push(tDragBar);
					}
				}
			}
			if(dragBarList.length<2){
				return false;
			}
			dragBarList.sort(this.sortByXFun);
			var tWidth=NaN;
			tWidth=0;
			var maxWidth=NaN;
			maxWidth=0;
			var tSelecteDragBar;
			len=dragBarList.length;
			for(i=1;i<len;i++){
				tWidth=dragBarList[i].x-dragBarList[i-1].x;
				if(tWidth>maxWidth){
					maxWidth=tWidth;
					tSelecteDragBar=dragBarList[i];
				}
			}
			if(tSelecteDragBar){
				tSelecteDragBar.moveRightWork(dis);
			}
			return true;
		}

		/**
		*调整水平方向的拖动条
		*@param dis
		*
		*/
		__proto.moveRightWork=function(dis){
			if(this.walked)return;
			this.walked=true;
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=this._updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="n-resize"&&RelativePos.getTypeByFun(tR._fun)=="right"){
						dragBarList.push(tDragBar);
					}
				}
			};
			var tSelecteDragBar;
			dragBarList.sort(this.sortByYFun);
			len=dragBarList.length;
			for(i=0;i<len;i++){
				tSelecteDragBar=dragBarList[i];
				tSelecteDragBar.tryMoveRight(dis);
			}
			this.left+=dis;
		}

		/**
		*调整垂直方向的拖动条
		*@param dis
		*@return
		*
		*/
		__proto.tryMoveDown=function(dis){
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=this._updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="n-resize"){
						dragBarList.push(tDragBar);
					}
				}
			}
			if(dragBarList.length<2){
				return false;
			}
			dragBarList.sort(this.sortByYFun);
			var tWidth=NaN;
			tWidth=0;
			var maxWidth=NaN;
			maxWidth=0;
			var tSelecteDragBar;
			len=dragBarList.length;
			for(i=1;i<len;i++){
				tWidth=dragBarList[i].y-dragBarList[i-1].y;
				if(tWidth>maxWidth){
					maxWidth=tWidth;
					tSelecteDragBar=dragBarList[i];
				}
			}
			if(tSelecteDragBar){
				tSelecteDragBar.moveDownWork(dis);
			}
			return true;
		}

		/**
		*调整水平方向的拖动条
		*@param dis
		*
		*/
		__proto.moveDownWork=function(dis){
			if(this.walked)return;
			this.walked=true;
			var i=0,len=0;
			len=this._updaters.length;
			var tR;
			var dragBarList;
			dragBarList=[];
			var tDragBar;
			for (i=len-1;i >=0;i--){
				tR=this._updaters[i];
				if((tR.tar instanceof laya.editor.comonents.LayoutDragBar )){
					tDragBar=tR.tar;
					if(tDragBar.cusorType=="e-resize"&&RelativePos.getTypeByFun(tR._fun)=="down"){
						if(!tDragBar.walked)
							dragBarList.push(tDragBar);
					}
				}
			};
			var tSelecteDragBar;
			dragBarList.sort(this.sortByXFun);
			len=dragBarList.length;
			for(i=0;i<len;i++){
				tSelecteDragBar=dragBarList[i];
				tSelecteDragBar.tryMoveDown(dis);
			}
			this.top+=dis;
		}

		LayoutDragBar.hasFreeTar=function(items){
			var i=0,len=0;
			len=items.length;
			var tRec;
			for (i=0;i < len;i++){
				tRec=items[i];
				if ((tRec instanceof laya.editor.view.LayoutRec )){
					if(tRec.sizeFree){
						return true;
					}
				}
			}
			return false;
		}

		LayoutDragBar.ID=1;
		LayoutDragBar.debugMode=true;
		LayoutDragBar.minWidth=165;
		LayoutDragBar.canMoveO=null;
		return LayoutDragBar;
	})(DragBar)


	/**
	*...
	*@author ww
	*/
	//class laya.ide.managers.focus.FocusItem extends laya.ui.Box
	var FocusItem=(function(_super){
		function FocusItem(){
			FocusItem.__super.call(this);
		}

		__class(FocusItem,'laya.ide.managers.focus.FocusItem',_super);
		var __proto=FocusItem.prototype;
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			var g=this.graphics;
			g.clear();
			g.drawRect(0,0,this.width,this.height,"#33c5f5");
		}

		return FocusItem;
	})(Box)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-10 下午3:12:59
	*/
	//class laya.ide.plugin.PluginPanel extends laya.ui.Box
	var PluginPanel=(function(_super){
		function PluginPanel(){
			PluginPanel.__super.call(this);
		}

		__class(PluginPanel,'laya.ide.plugin.PluginPanel',_super);
		var __proto=PluginPanel.prototype;
		__proto.show=function(){
			LayoutRecManager.showPanelToStage(this);
		}

		__proto.close=function(){
			LayoutRecManager.removePanel(this);
		}

		return PluginPanel;
	})(Box)


	/**
	*自动根据宽布局的容器
	*@author ww
	*@version 1.0
	*
	*@created 2016-1-4 下午5:39:35
	*/
	//class laya.ide.ui.BoxFitToWidth extends laya.ui.Box
	var BoxFitToWidth=(function(_super){
		function BoxFitToWidth(){
			this._items=null;
			this.dX=0;
			this.dY=0;
			this.sX=0;
			this.sY=0;
			BoxFitToWidth.__super.call(this);
		}

		__class(BoxFitToWidth,'laya.ide.ui.BoxFitToWidth',_super);
		var __proto=BoxFitToWidth.prototype;
		__proto.setItems=function(items){
			this.removeChildren();
			this._items=items;
			DisControlTool.addItems(items,this);
			this.reRender();
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.reRender();
		}

		__proto.reRender=function(){
			LayoutTools.layoutToWidth(this._items,this.width,this.dX,this.dY,this.sX,this.sY);
		}

		return BoxFitToWidth;
	})(Box)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-3 下午2:43:22
	*/
	//class laya.rendercanvas.CanvasSprite extends laya.ui.Box
	var CanvasSprite=(function(_super){
		function CanvasSprite(){
			this.canvas=null;
			this._context=null;
			this.clearWhenRemove=false;
			this.mat=null;
			this.tar=null;
			CanvasSprite.__super.call(this);
			this.rate
			this.prePoint=new Point();
			this.canvas=HTMLCanvas.create('2D');
			this._context=new RenderContext(100,100,this.canvas);
			JSTools.setZIndex(this.canvas.source,100);
			this.rate=Browser.pixelRatio;
			if(this.rate<1)this.rate=1;
			if (this.rate!=1){
				this.mat=new Matrix();
				this.mat.scale(1 / this.rate,1 / this.rate);
				JSTools.setTransform(this.canvas.source,this.mat);
			}
			this.canvas.source.addEventListener("mouseup",this.passEvent);
			this.canvas.source.addEventListener("mousemove",this.passEvent);
			this.canvas.source.addEventListener("mousedown",this.passEvent);
			this.canvas.source.addEventListener('mousewheel',this.passEvent);
		}

		__class(CanvasSprite,'laya.rendercanvas.CanvasSprite',_super);
		var __proto=CanvasSprite.prototype;
		// Laya.timer.loop(1,this,updateCanvas);
		__proto.passEvent=function(e){
			var evt;
			evt=Browser.document.createEvent("Events");
			evt.initEvent(e.type,true,true);
			var key;
			for(key in e){
				if(!((typeof (e[key])=='function'))){
					evt[key]=e[key];
				}
			}
			Render.canvas.dispatchEvent(evt);
		}

		__proto.setTarget=function(tar){
			this.tar=tar;
			tar["render"]=Utils.bind(this.newRender,this);
			tar.on("display",this,this._$5__onDisplay);
			tar.on("undisplay",this,this._$5__onDisplay);
			this.canvas.source.id=ClassTool.getNodeClassAndName(tar);
			tar["_repaint"]=1;
		}

		__proto.canvasMouseOver=function(){}
		// JSTools.setMouseEnable(canvas.source,false);
		__proto.tarMouseOut=function(){
			if(HtmlZIndexManager.isMouseDown)return;
			JSTools.setMouseEnable(this.canvas.source,true);
		}

		__proto.clearMe=function(){
			if(this.tar){
				this.tar.off("display",this,this._$5__onDisplay);
				this.tar.off("undisplay",this,this._$5__onDisplay);
				this.tar.off("mouseout",this,this.tarMouseOut);
				var canvasSprite;
				canvasSprite=this.tar["canvasSprite"];
				if(canvasSprite){
					delete this.tar["canvasSprite"];
					JSTools.removeElement(this.canvas.source);
				}
			}
			Pool.recover("CanvasSprite",this);
		}

		/**@private */
		__proto._$5__onDisplay=function(){
			if(!this.tar)return;
			if(this.tar.displayedInStage){
				}else{
				JSTools.removeElement(this.canvas.source);
				if (this.clearWhenRemove){
					this.clearMe();
				}
			}
		}

		__proto.renderOld=function(context,x,y){
			Stat.spriteCount++;
			RenderSprite.renders[this.tar._renderType]._fun(this.tar,context,x,y);
			this.tar["_repaint"]=0;
		}

		__proto.newRender=function(context,x,y){
			this.updateCanvas(x,y);
		}

		__proto.updateCanvas=function(x,y){
			if(this.tar.displayedInStage){
				var point;
				point=NodeUtils.getGPos(this.tar);
				if(!JSTools.isElementInDom(this.canvas.source)){
					JSTools.showToParent(this.canvas.source,point.x,point.y,CanvasSprite.parentNode);
					this.prePoint.setTo(point.x,point.y);
					}else{
					if(this.prePoint.x!=point.x||this.prePoint.y!=point.y){
						JSTools.setPos(this.canvas.source,point.x,point.y);
						this.prePoint.setTo(point.x,point.y);
					}
				}
				if(this.tar["_repaint"]==0)return;
				if(IDEConsts.showRenderDebug){
					console.log("CanvasSprite:",this.tar);
				};
				var gRec;
				gRec=this.tar.getSelfBounds();
				this.canvas.size(gRec.width*this.rate,gRec.height*this.rate);
				this.canvas.clear();
				if (this.rate !=1){
					this.canvas.context.save();
					this.canvas.context.scale(this.rate,this.rate);
					this.renderOld(this._context,0,0);
					this.canvas.context.restore();
					}else{
					this.renderOld(this._context,0,0);
				}
				}else{
				JSTools.removeElement(this.canvas.source);
			}
		}

		CanvasSprite.setSpriteCanvasRender=function(tar,index,autoClear){
			(index===void 0)&& (index=100);
			(autoClear===void 0)&& (autoClear=false);
			if(!CanvasSprite.enableCanvasSprite)return;
			if(tar["canvasSprite"])return;
			var canvasSprite;
			canvasSprite=Pool.getItemByClass("CanvasSprite",CanvasSprite);
			canvasSprite.clearWhenRemove=autoClear;
			canvasSprite.setTarget(tar);
			tar["canvasSprite"]=canvasSprite;
			CanvasSprite.setSpriteCanvasIndex(tar,index);
		}

		CanvasSprite.setSpriteCanvasIndex=function(tar,index){
			var canvasSprite;
			canvasSprite=tar["canvasSprite"];
			if(canvasSprite){
				JSTools.setZIndex(canvasSprite.canvas.source,index);
			}
		}

		CanvasSprite.removeSpriteCanvas=function(tar){
			var canvasSprite;
			canvasSprite=tar["canvasSprite"];
			if(canvasSprite){
				canvasSprite.clearMe();
				delete tar["canvasSprite"];
			}
		}

		CanvasSprite.inits=function(){
			CanvasSprite.setSpriteCanvasRender(QuickTool.instance);
			CanvasSprite.hookDialog();
		}

		CanvasSprite.hookDialog=function(){
			DialogHook.I.hookDialog();
		}

		CanvasSprite.setSpriteRenderEmpty=function(tar){
			tar["render"]=CanvasSprite.renderEmpty;
		}

		CanvasSprite.renderEmpty=function(){}
		CanvasSprite.parentNode=null
		CanvasSprite.enableCanvasSprite=true;
		return CanvasSprite;
	})(Box)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-9 上午11:59:23
	*/
	//class laya.rendercanvas.HtmlSprite extends laya.ui.Box
	var HtmlSprite=(function(_super){
		function HtmlSprite(){
			this.canClose=true;
			this.disableAutoControl=true;
			this.div=null;
			this.prePoint=new Point();
			var _$this=this;
			HtmlSprite.__super.call(this);
			HtmlSprite.parentNode=Browser.container;
			this.mouseEnabled=true;
			this.createHtml();
			this.size(100,100);
			this.on("display",this,this._$5__onDisplay);
			this.on("undisplay",this,this._$5__onDisplay);
			this.setZIndex(101);
			this.on("mouseover",this,this.renderMouseHandler);
			JSTools.setMouseEnable(this.div,false);
			this.div.addEventListener("mouseout",function(e){
				_$this.divMouseOut();
			})
		}

		__class(HtmlSprite,'laya.rendercanvas.HtmlSprite',_super);
		var __proto=HtmlSprite.prototype;
		__proto.divMouseOut=function(){
			JSTools.setMouseEnable(this.div,false);
		}

		__proto.renderMouseHandler=function(e){
			if(Input.isInputting){
				HtmlZIndexManager.isMouseDown=false;
			}
			if(HtmlZIndexManager.isMouseDown)return;
			JSTools.setMouseEnable(this.div,true);
		}

		__proto.createHtml=function(){
			this.div=Browser.createElement("div");
		}

		__proto.setHtmlTxt=function(html){
			this.div.innerHTML=html;
		}

		__proto.setZIndex=function(zIndex){
			(zIndex===void 0)&& (zIndex=101);
			JSTools.setZIndex(this.div,zIndex);
		}

		/**@private */
		__proto._$5__onDisplay=function(){
			if(this.displayedInStage){
				Laya.timer.frameLoop(1,this,this.updateMyPos);
				if(!this.disableAutoControl)
					HtmlZIndexManager.addHtml(this.div);
				}else{
				Laya.timer.clear(this,this.updateMyPos);
				JSTools.removeElement(this.div);
				HtmlZIndexManager.removeHtml(this.div);
			}
		}

		__proto.render=function(context,x,y){
			laya.display.Sprite.prototype.render.call(this,context,x,y);
		}

		// updateMyPos();
		__proto.updateMyPos=function(){
			if(this.displayedInStage&&this.visible){
				var point;
				point=NodeUtils.getGPos(this);
				if(!JSTools.isElementInDom(this.div)){
					JSTools.showToParent(this.div,point.x,point.y,HtmlSprite.parentNode);
					this.prePoint.setTo(point.x,point.y);
					}else{
					if(this.prePoint.x!=point.x||this.prePoint.y!=point.y){
						JSTools.setPos(this.div,point.x,point.y);
						this.prePoint.setTo(point.x,point.y);
					}
				}
				}else{
				JSTools.removeElement(this.div);
			}
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			JSTools.setSize(this.div,this.width,this.height);
		}

		HtmlSprite.testDiv="";
		HtmlSprite.parentNode=null
		return HtmlSprite;
	})(Box)


	/**
	*自动根据大小填充自己全部区域的显示对象
	*@author ww
	*/
	//class laya.ide.managers.resizer.AutoFillRec extends laya.editor.comonents.DragBar
	var AutoFillRec$1=(function(_super){
		function AutoFillRec(type){
			this.type=0;
			this.preX=NaN;
			this.preY=NaN;
			AutoFillRec.__super.call(this,type);
		}

		__class(AutoFillRec,'laya.ide.managers.resizer.AutoFillRec',_super,'AutoFillRec$1');
		var __proto=AutoFillRec.prototype;
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			var g=this.graphics;
			g.clear();
			g.drawRect(0,0,this.width,this.height,"#33c5f5");
		}

		__proto.record=function(){
			this.preX=this.x;
			this.preY=this.y;
		}

		__proto.getDx=function(){
			return this.x-this.preX;
		}

		__proto.getDy=function(){
			return this.y-this.preY;
		}

		return AutoFillRec;
	})(DragBar)


	/**
	*<code>Dialog</code> 组件是一个弹出对话框，实现对话框弹出，拖动，模式窗口功能。
	*可以通过UIConfig设置弹出框背景透明度，模式窗口点击边缘是否关闭等
	*通过设置zOrder属性，可以更改弹出的层次
	*通过设置manager.popupEffect和manager.closeEffect可以设置弹出效果和关闭效果
	*
	*@example 以下示例代码，创建了一个 <code>Dialog</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Dialog;
		*import laya.utils.Handler;
		*public class Dialog_Example
		*{
			*private var dialog:Dialog_Instance;
			*public function Dialog_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load("resource/ui/btn_close.png",Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*dialog=new Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。
				*dialog.dragArea="0,0,150,50";//设置 dialog 的拖拽区域。
				*dialog.show();//显示 dialog。
				*dialog.closeHandler=new Handler(this,onClose);//设置 dialog 的关闭函数处理器。
				*}
			*private function onClose(name:String):void
			*{
				*if (name==Dialog.CLOSE)
				*{
					*trace("通过点击 name 为"+name+"的组件，关闭了dialog。");
					*}
				*}
			*}
		*}
	*import laya.ui.Button;
	*import laya.ui.Dialog;
	*import laya.ui.Image;
	*class Dialog_Instance extends Dialog
	*{
		*function Dialog_Instance():void
		*{
			*var bg:Image=new Image("resource/ui/bg.png");
			*bg.sizeGrid="40,10,5,10";
			*bg.width=150;
			*bg.height=250;
			*addChild(bg);
			*var image:Image=new Image("resource/ui/image.png");
			*addChild(image);
			*var button:Button=new Button("resource/ui/btn_close.png");
			*button.name=Dialog.CLOSE;//设置button的name属性值。
			*button.x=0;
			*button.y=0;
			*addChild(button);
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*var dialog;
	*Laya.loader.load("resource/ui/btn_close.png",laya.utils.Handler.create(this,loadComplete));//加载资源
	*(function (_super){//新建一个类Dialog_Instance继承自laya.ui.Dialog。
		*function Dialog_Instance(){
			*Dialog_Instance.__super.call(this);//初始化父类
			*var bg=new laya.ui.Image("resource/ui/bg.png");//新建一个 Image 类的实例 bg 。
			*bg.sizeGrid="10,40,10,5";//设置 bg 的网格信息。
			*bg.width=150;//设置 bg 的宽度。
			*bg.height=250;//设置 bg 的高度。
			*this.addChild(bg);//将 bg 添加到显示列表。
			*var image=new laya.ui.Image("resource/ui/image.png");//新建一个 Image 类的实例 image 。
			*this.addChild(image);//将 image 添加到显示列表。
			*var button=new laya.ui.Button("resource/ui/btn_close.png");//新建一个 Button 类的实例 bg 。
			*button.name=laya.ui.Dialog.CLOSE;//设置 button 的 name 属性值。
			*button.x=0;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。
			*button.y=0;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。
			*this.addChild(button);//将 button 添加到显示列表。
			*};
		*Laya.class(Dialog_Instance,"mypackage.dialogExample.Dialog_Instance",_super);//注册类Dialog_Instance。
		*})(laya.ui.Dialog);
	*function loadComplete(){
		*console.log("资源加载完成！");
		*dialog=new mypackage.dialogExample.Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。
		*dialog.dragArea="0,0,150,50";//设置 dialog 的拖拽区域。
		*dialog.show();//显示 dialog。
		*dialog.closeHandler=new laya.utils.Handler(this,onClose);//设置 dialog 的关闭函数处理器。
		*}
	*function onClose(name){
		*if (name==laya.ui.Dialog.CLOSE){
			*console.log("通过点击 name 为"+name+"的组件，关闭了dialog。");
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*import Dialog=laya.ui.Dialog;
	*import Handler=laya.utils.Handler;
	*class Dialog_Example {
		*private dialog:Dialog_Instance;
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load("resource/ui/btn_close.png",Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*this.dialog=new Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。
			*this.dialog.dragArea="0,0,150,50";//设置 dialog 的拖拽区域。
			*this.dialog.show();//显示 dialog。
			*this.dialog.closeHandler=new Handler(this,this.onClose);//设置 dialog 的关闭函数处理器。
			*}
		*private onClose(name:string):void {
			*if (name==Dialog.CLOSE){
				*console.log("通过点击 name 为"+name+"的组件，关闭了dialog。");
				*}
			*}
		*}
	*import Button=laya.ui.Button;
	*class Dialog_Instance extends Dialog {
		*Dialog_Instance():void {
			*var bg:laya.ui.Image=new laya.ui.Image("resource/ui/bg.png");
			*bg.sizeGrid="40,10,5,10";
			*bg.width=150;
			*bg.height=250;
			*this.addChild(bg);
			*var image:laya.ui.Image=new laya.ui.Image("resource/ui/image.png");
			*this.addChild(image);
			*var button:Button=new Button("resource/ui/btn_close.png");
			*button.name=Dialog.CLOSE;//设置button的name属性值。
			*button.x=0;
			*button.y=0;
			*this.addChild(button);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.Dialog extends laya.ui.View
	var Dialog=(function(_super){
		function Dialog(){
			this.popupCenter=true;
			this.closeHandler=null;
			this.group=null;
			this.isModal=false;
			this._dragArea=null;
			Dialog.__super.call(this);
		}

		__class(Dialog,'laya.ui.Dialog',_super);
		var __proto=Dialog.prototype;
		/**@inheritDoc */
		__proto.initialize=function(){
			this._dealDragArea();
			this.on("click",this,this._onClick);
		}

		/**@private */
		__proto._dealDragArea=function(){
			var dragTarget=this.getChildByName("drag");
			if (dragTarget){
				this.dragArea=dragTarget.x+","+dragTarget.y+","+dragTarget.width+","+dragTarget.height;
				dragTarget.removeSelf();
			}
		}

		/**
		*@private (protected)
		*对象的 <code>Event.CLICK</code> 点击事件侦听处理函数。
		*/
		__proto._onClick=function(e){
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "close":
					case "cancel":
					case "sure":
					case "no":
					case "ok":
					case "yes":
						this.close(btn.name);
						break ;
					}
			}
		}

		/**
		*显示对话框（以非模式窗口方式显示）。
		*@param closeOther 是否关闭其它的对话框。若值为true则关闭其它对话框。
		*/
		__proto.show=function(closeOther){
			(closeOther===void 0)&& (closeOther=false);
			this._open(false,closeOther);
		}

		/**
		*显示对话框（以模式窗口方式显示）。
		*@param closeOther 是否关闭其它的对话框。若值为true则关闭其它对话框。
		*/
		__proto.popup=function(closeOther){
			(closeOther===void 0)&& (closeOther=false);
			this._open(true,closeOther);
		}

		/**@private */
		__proto._open=function(modal,closeOther){
			Dialog.manager.lock(false);
			this.isModal=modal;
			Dialog.manager.open(this,closeOther);
		}

		/**打开完成后，调用此方法（如果有弹出动画，则在动画完成后执行）*/
		__proto.onOpened=function(){}
		/**
		*关闭对话框。
		*@param type 如果是点击默认关闭按钮触发，则传入关闭按钮的名字(name)，否则为null。
		*/
		__proto.close=function(type){
			Dialog.manager.close(this,type);
		}

		/**关闭完成后，调用此方法（如果有关闭动画，则在动画完成后执行）
		*@param type 如果是点击默认关闭按钮触发，则传入关闭按钮的名字(name)，否则为null。
		*/
		__proto.onClosed=function(type){}
		/**@private */
		__proto._onMouseDown=function(e){
			var point=this.getMousePoint();
			if (this._dragArea.contains(point.x,point.y))this.startDrag();
			else this.stopDrag();
		}

		/**
		*用来指定对话框的拖拽区域。默认值为"0,0,0,0"。
		*<p><b>格式：</b>构成一个矩形所需的 x,y,width,heith 值，用逗号连接为字符串。
		*例如："0,0,100,200"。
		*</p>
		*
		*@see #includeExamplesSummary 请参考示例
		*@return
		*/
		__getset(0,__proto,'dragArea',function(){
			if (this._dragArea)return this._dragArea.toString();
			return null;
			},function(value){
			if (value){
				var a=UIUtils.fillArray([0,0,0,0],value,Number);
				this._dragArea=new Rectangle(a[0],a[1],a[2],a[3]);
				this.on("mousedown",this,this._onMouseDown);
				}else {
				this._dragArea=null;
				this.off("mousedown",this,this._onMouseDown);
			}
		});

		/**
		*弹出框的显示状态；如果弹框处于显示中，则为true，否则为false;
		*/
		__getset(0,__proto,'isPopup',function(){
			return this.parent !=null;
		});

		__getset(0,__proto,'zOrder',_super.prototype._$get_zOrder,function(value){
			_super.prototype._$set_zOrder.call(this,value);
			Dialog.manager._checkMask();
		});

		/**对话框管理容器，所有的对话框都在该容器内，并且受管理器管，可以自定义自己的管理器，来更改窗口管理的流程。
		*任意对话框打开和关闭，都会触发管理类的open和close事件*/
		__getset(1,Dialog,'manager',function(){
			return Dialog._manager=Dialog._manager|| new DialogManager();
			},function(value){
			Dialog._manager=value;
		});

		Dialog.setLockView=function(view){
			Dialog.manager.setLockView(view);
		}

		Dialog.lock=function(value){
			Dialog.manager.lock(value);
		}

		Dialog.closeAll=function(){
			Dialog.manager.closeAll();
		}

		Dialog.getDialogsByGroup=function(group){
			return Dialog.manager.getDialogsByGroup(group);
		}

		Dialog.closeByGround=function(group){
			return Dialog.manager.closeByGround(group);
		}

		Dialog.CLOSE="close";
		Dialog.CANCEL="cancel";
		Dialog.SURE="sure";
		Dialog.NO="no";
		Dialog.OK="ok";
		Dialog.YES="yes";
		Dialog._manager=null
		return Dialog;
	})(View)


	/**
	*<code>VBox</code> 是一个垂直布局容器类。
	*/
	//class laya.ui.HBox extends laya.ui.LayoutBox
	var HBox=(function(_super){
		function HBox(){HBox.__super.call(this);;
		};

		__class(HBox,'laya.ui.HBox',_super);
		var __proto=HBox.prototype;
		/**@inheritDoc */
		__proto.sortItem=function(items){
			if (items)items.sort(function(a,b){return a.x-b.x;});
		}

		/**@inheritDoc */
		__proto.changeItems=function(){
			this._itemChanged=false;
			var items=[];
			var maxHeight=0;
			for (var i=0,n=this.numChildren;i < n;i++){
				var item=this.getChildAt(i);
				if (item){
					items.push(item);
					maxHeight=Math.max(maxHeight,item.height *item.scaleY);
				}
			}
			this.sortItem(items);
			var left=0;
			for (i=0,n=this.numChildren;i < n;i++){
				item=items[i];
				item.x=left;
				left+=item.width *item.scaleX+this._space;
				if (this._align=="top"){
					item.y=0;
					}else if (this._align=="middle"){
					item.y=(maxHeight-item.height *item.scaleY)*0.5;
					}else if (this._align=="bottom"){
					item.y=maxHeight-item.height *item.scaleY;
				}
			}
			this.changeSize();
		}

		HBox.NONE="none";
		HBox.TOP="top";
		HBox.MIDDLE="middle";
		HBox.BOTTOM="bottom";
		return HBox;
	})(LayoutBox)


	/**
	*<code>VBox</code> 是一个垂直布局容器类。
	*/
	//class laya.ui.VBox extends laya.ui.LayoutBox
	var VBox=(function(_super){
		function VBox(){VBox.__super.call(this);;
		};

		__class(VBox,'laya.ui.VBox',_super);
		var __proto=VBox.prototype;
		/**@inheritDoc */
		__proto.changeItems=function(){
			this._itemChanged=false;
			var items=[];
			var maxWidth=0;
			for (var i=0,n=this.numChildren;i < n;i++){
				var item=this.getChildAt(i);
				if (item){
					items.push(item);
					maxWidth=Math.max(maxWidth,item.width *item.scaleX);
				}
			}
			this.sortItem(items);
			var top=0;
			for (i=0,n=this.numChildren;i < n;i++){
				item=items[i];
				item.y=top;
				top+=item.height *item.scaleY+this._space;
				if (this._align=="left"){
					item.x=0;
					}else if (this._align=="center"){
					item.x=(maxWidth-item.width *item.scaleX)*0.5;
					}else if (this._align=="right"){
					item.x=maxWidth-item.width *item.scaleX;
				}
			}
			this.changeSize();
		}

		VBox.NONE="none";
		VBox.LEFT="left";
		VBox.CENTER="center";
		VBox.RIGHT="right";
		return VBox;
	})(LayoutBox)


	/**
	*<code>RadioGroup</code> 控件定义一组 <code>Radio</code> 控件，这些控件相互排斥；
	*因此，用户每次只能选择一个 <code>Radio</code> 控件。
	*
	*@example 以下示例代码，创建了一个 <code>RadioGroup</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Radio;
		*import laya.ui.RadioGroup;
		*import laya.utils.Handler;
		*public class RadioGroup_Example
		*{
			*public function RadioGroup_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/radio.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*var radioGroup:RadioGroup=new RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。
				*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。
				*radioGroup.labels="item0,item1,item2";//设置 radioGroup 的标签集。
				*radioGroup.skin="resource/ui/radio.png";//设置 radioGroup 的皮肤。
				*radioGroup.space=10;//设置 radioGroup 的项间隔距离。
				*radioGroup.selectHandler=new Handler(this,onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。
				*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。
				*}
			*private function onSelect(index:int):void
			*{
				*trace("当前选择的单选按钮索引: index= ",index);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load(["resource/ui/radio.png"],laya.utils.Handler.create(this,onLoadComplete));
	*function onLoadComplete(){
		*var radioGroup=new laya.ui.RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。
		*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。
		*radioGroup.labels="item0,item1,item2";//设置 radioGroup 的标签集。
		*radioGroup.skin="resource/ui/radio.png";//设置 radioGroup 的皮肤。
		*radioGroup.space=10;//设置 radioGroup 的项间隔距离。
		*radioGroup.selectHandler=new laya.utils.Handler(this,onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。
		*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。
		*}
	*function onSelect(index){
		*console.log("当前选择的单选按钮索引: index= ",index);
		*}
	*</listing>
	*<listing version="3.0">
	*import Radio=laya.ui.Radio;
	*import RadioGroup=laya.ui.RadioGroup;
	*import Handler=laya.utils.Handler;
	*class RadioGroup_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/radio.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*var radioGroup:RadioGroup=new RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。
			*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。
			*radioGroup.labels="item0,item1,item2";//设置 radioGroup 的标签集。
			*radioGroup.skin="resource/ui/radio.png";//设置 radioGroup 的皮肤。
			*radioGroup.space=10;//设置 radioGroup 的项间隔距离。
			*radioGroup.selectHandler=new Handler(this,this.onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。
			*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。
			*}
		*private onSelect(index:number):void {
			*console.log("当前选择的单选按钮索引: index= ",index);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.RadioGroup extends laya.ui.UIGroup
	var RadioGroup=(function(_super){
		function RadioGroup(){RadioGroup.__super.call(this);;
		};

		__class(RadioGroup,'laya.ui.RadioGroup',_super);
		var __proto=RadioGroup.prototype;
		/**@inheritDoc */
		__proto.createItem=function(skin,label){
			return new Radio(skin,label);
		}

		return RadioGroup;
	})(UIGroup)


	/**
	*<code>Tab</code> 组件用来定义选项卡按钮组。 *
	*@internal <p>属性：<code>selectedIndex</code> 的默认值为-1。</p>
	*
	*@example 以下示例代码，创建了一个 <code>Tab</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.Tab;
		*import laya.utils.Handler;
		*public class Tab_Example
		*{
			*public function Tab_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/tab.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*var tab:Tab=new Tab();//创建一个 Tab 类的实例对象 tab 。
				*tab.skin="resource/ui/tab.png";//设置 tab 的皮肤。
				*tab.labels="item0,item1,item2";//设置 tab 的标签集。
				*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。
				*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。
				*tab.selectHandler=new Handler(this,onSelect);//设置 tab 的选择项发生改变时执行的处理器。
				*Laya.stage.addChild(tab);//将 tab 添到显示列表。
				*}
			*private function onSelect(index:int):void
			*{
				*trace("当前选择的表情页索引: index= ",index);
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load(["resource/ui/tab.png"],laya.utils.Handler.create(this,onLoadComplete));
	*function onLoadComplete(){
		*var tab=new laya.ui.Tab();//创建一个 Tab 类的实例对象 tab 。
		*tab.skin="resource/ui/tab.png";//设置 tab 的皮肤。
		*tab.labels="item0,item1,item2";//设置 tab 的标签集。
		*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。
		*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。
		*tab.selectHandler=new laya.utils.Handler(this,onSelect);//设置 tab 的选择项发生改变时执行的处理器。
		*Laya.stage.addChild(tab);//将 tab 添到显示列表。
		*}
	*function onSelect(index){
		*console.log("当前选择的标签页索引: index= ",index);
		*}
	*</listing>
	*<listing version="3.0">
	*import Tab=laya.ui.Tab;
	*import Handler=laya.utils.Handler;
	*class Tab_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/tab.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*var tab:Tab=new Tab();//创建一个 Tab 类的实例对象 tab 。
			*tab.skin="resource/ui/tab.png";//设置 tab 的皮肤。
			*tab.labels="item0,item1,item2";//设置 tab 的标签集。
			*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。
			*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。
			*tab.selectHandler=new Handler(this,this.onSelect);//设置 tab 的选择项发生改变时执行的处理器。
			*Laya.stage.addChild(tab);//将 tab 添到显示列表。
			*}
		*private onSelect(index:number):void {
			*console.log("当前选择的表情页索引: index= ",index);
			*}
		*}
	*</listing>
	*/
	//class laya.ui.Tab extends laya.ui.UIGroup
	var Tab=(function(_super){
		function Tab(){Tab.__super.call(this);;
		};

		__class(Tab,'laya.ui.Tab',_super);
		var __proto=Tab.prototype;
		/**
		*@private
		*@inheritDoc
		*/
		__proto.createItem=function(skin,label){
			return new Button(skin,label);
		}

		return Tab;
	})(UIGroup)


	/**
	*<code>TextArea</code> 类用于创建显示对象以显示和输入文本。
	*@example 以下示例代码，创建了一个 <code>TextArea</code> 实例。
	*<listing version="3.0">
	*package
	*{
		*import laya.ui.TextArea;
		*import laya.utils.Handler;
		*public class TextArea_Example
		*{
			*public function TextArea_Example()
			*{
				*Laya.init(640,800);//设置游戏画布宽高。
				*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
				*Laya.loader.load(["resource/ui/input.png"],Handler.create(this,onLoadComplete));//加载资源。
				*}
			*private function onLoadComplete():void
			*{
				*var textArea:TextArea=new TextArea("这个一个TextArea实例。");//创建一个 TextArea 类的实例对象 textArea 。
				*textArea.skin="resource/ui/input.png";//设置 textArea 的皮肤。
				*textArea.sizeGrid="4,4,4,4";//设置 textArea 的网格信息。
				*textArea.color="#008fff";//设置 textArea 的文本颜色。
				*textArea.font="Arial";//设置 textArea 的字体。
				*textArea.bold=true;//设置 textArea 的文本显示为粗体。
				*textArea.fontSize=20;//设置 textArea 的文本字体大小。
				*textArea.wordWrap=true;//设置 textArea 的文本自动换行。
				*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。
				*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。
				*textArea.width=300;//设置 textArea 的宽度。
				*textArea.height=200;//设置 textArea 的高度。
				*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。
				*}
			*}
		*}
	*</listing>
	*<listing version="3.0">
	*Laya.init(640,800);//设置游戏画布宽高、渲染模式
	*Laya.stage.bgColor="#efefef";//设置画布的背景颜色
	*Laya.loader.load(["resource/ui/input.png"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。
	*function onLoadComplete(){
		*var textArea=new laya.ui.TextArea("这个一个TextArea实例。");//创建一个 TextArea 类的实例对象 textArea 。
		*textArea.skin="resource/ui/input.png";//设置 textArea 的皮肤。
		*textArea.sizeGrid="4,4,4,4";//设置 textArea 的网格信息。
		*textArea.color="#008fff";//设置 textArea 的文本颜色。
		*textArea.font="Arial";//设置 textArea 的字体。
		*textArea.bold=true;//设置 textArea 的文本显示为粗体。
		*textArea.fontSize=20;//设置 textArea 的文本字体大小。
		*textArea.wordWrap=true;//设置 textArea 的文本自动换行。
		*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。
		*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。
		*textArea.width=300;//设置 textArea 的宽度。
		*textArea.height=200;//设置 textArea 的高度。
		*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。
		*}
	*</listing>
	*<listing version="3.0">
	*import TextArea=laya.ui.TextArea;
	*import Handler=laya.utils.Handler;
	*class TextArea_Example {
		*constructor(){
			*Laya.init(640,800);//设置游戏画布宽高、渲染模式。
			*Laya.stage.bgColor="#efefef";//设置画布的背景颜色。
			*Laya.loader.load(["resource/ui/input.png"],Handler.create(this,this.onLoadComplete));//加载资源。
			*}
		*private onLoadComplete():void {
			*var textArea:TextArea=new TextArea("这个一个TextArea实例。");//创建一个 TextArea 类的实例对象 textArea 。
			*textArea.skin="resource/ui/input.png";//设置 textArea 的皮肤。
			*textArea.sizeGrid="4,4,4,4";//设置 textArea 的网格信息。
			*textArea.color="#008fff";//设置 textArea 的文本颜色。
			*textArea.font="Arial";//设置 textArea 的字体。
			*textArea.bold=true;//设置 textArea 的文本显示为粗体。
			*textArea.fontSize=20;//设置 textArea 的文本字体大小。
			*textArea.wordWrap=true;//设置 textArea 的文本自动换行。
			*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。
			*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。
			*textArea.width=300;//设置 textArea 的宽度。
			*textArea.height=200;//设置 textArea 的高度。
			*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。
			*}
		*}
	*</listing>
	*/
	//class laya.ui.TextArea extends laya.ui.TextInput
	var TextArea=(function(_super){
		function TextArea(text){
			this._vScrollBar=null;
			this._hScrollBar=null;
			(text===void 0)&& (text="");
			TextArea.__super.call(this,text);
		}

		__class(TextArea,'laya.ui.TextArea',_super);
		var __proto=TextArea.prototype;
		__proto.destroy=function(destroyChild){
			(destroyChild===void 0)&& (destroyChild=true);
			_super.prototype.destroy.call(this,destroyChild);
			this._vScrollBar && this._vScrollBar.destroy();
			this._hScrollBar && this._hScrollBar.destroy();
			this._vScrollBar=null;
			this._hScrollBar=null;
		}

		__proto.initialize=function(){
			this.width=180;
			this.height=150;
			this._tf.wordWrap=true;
			this.multiline=true;
		}

		__proto.onVBarChanged=function(e){
			if (this._tf.scrollY !=this._vScrollBar.value){
				this._tf.scrollY=this._vScrollBar.value;
			}
		}

		__proto.onHBarChanged=function(e){
			if (this._tf.scrollX !=this._hScrollBar.value){
				this._tf.scrollX=this._hScrollBar.value;
			}
		}

		__proto.changeScroll=function(){
			var vShow=this._vScrollBar && this._tf.maxScrollY > 0;
			var hShow=this._hScrollBar && this._tf.maxScrollX > 0;
			var showWidth=vShow ? this._width-this._vScrollBar.width :this._width;
			var showHeight=hShow ? this._height-this._hScrollBar.height :this._height;
			var padding=this._tf.padding || Styles.labelPadding;
			this._tf.width=showWidth;
			this._tf.height=showHeight;
			if (this._vScrollBar){
				this._vScrollBar.x=this._width-this._vScrollBar.width-padding[2];
				this._vScrollBar.y=padding[1];
				this._vScrollBar.height=this._height-(hShow ? this._hScrollBar.height :0)-padding[1]-padding[3];
				this._vScrollBar.scrollSize=1;
				this._vScrollBar.thumbPercent=showHeight / Math.max(this._tf.textHeight,showHeight);
				this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY);
				this._vScrollBar.visible=vShow;
			}
			if (this._hScrollBar){
				this._hScrollBar.x=padding[0];
				this._hScrollBar.y=this._height-this._hScrollBar.height-padding[3];
				this._hScrollBar.width=this._width-(vShow ? this._vScrollBar.width :0)-padding[0]-padding[2];
				this._hScrollBar.scrollSize=Math.max(showWidth *0.033,1);
				this._hScrollBar.thumbPercent=showWidth / Math.max(this._tf.textWidth,showWidth);
				this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX);
				this._hScrollBar.visible=hShow;
			}
		}

		/**滚动到某个位置*/
		__proto.scrollTo=function(y){
			this.commitMeasure();
			this._tf.scrollY=y;
		}

		/**垂直滚动值*/
		__getset(0,__proto,'scrollY',function(){
			return this._tf.scrollY;
		});

		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			this.callLater(this.changeScroll);
		});

		/**水平滚动条实体*/
		__getset(0,__proto,'hScrollBar',function(){
			return this._hScrollBar;
		});

		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			this.callLater(this.changeScroll);
		});

		/**水平滚动最大值*/
		__getset(0,__proto,'maxScrollX',function(){
			return this._tf.maxScrollX;
		});

		/**垂直滚动条皮肤*/
		__getset(0,__proto,'vScrollBarSkin',function(){
			return this._vScrollBar ? this._vScrollBar.skin :null;
			},function(value){
			if (this._vScrollBar==null){
				this.addChild(this._vScrollBar=new VScrollBar());
				this._vScrollBar.on("change",this,this.onVBarChanged);
				this._vScrollBar.target=this._tf;
				this.callLater(this.changeScroll);
			}
			this._vScrollBar.skin=value;
		});

		/**水平滚动条皮肤*/
		__getset(0,__proto,'hScrollBarSkin',function(){
			return this._hScrollBar ? this._hScrollBar.skin :null;
			},function(value){
			if (this._hScrollBar==null){
				this.addChild(this._hScrollBar=new HScrollBar());
				this._hScrollBar.on("change",this,this.onHBarChanged);
				this._hScrollBar.mouseWheelEnable=false;
				this._hScrollBar.target=this._tf;
				this.callLater(this.changeScroll);
			}
			this._hScrollBar.skin=value;
		});

		/**垂直滚动条实体*/
		__getset(0,__proto,'vScrollBar',function(){
			return this._vScrollBar;
		});

		/**垂直滚动最大值*/
		__getset(0,__proto,'maxScrollY',function(){
			return this._tf.maxScrollY;
		});

		/**水平滚动值*/
		__getset(0,__proto,'scrollX',function(){
			return this._tf.scrollX;
		});

		return TextArea;
	})(TextInput)


	//class laya.debug.ui.debugui.comps.ListItemUI extends laya.ui.View
	var ListItemUI=(function(_super){
		function ListItemUI(){
			ListItemUI.__super.call(this);
		}

		__class(ListItemUI,'laya.debug.ui.debugui.comps.ListItemUI',_super);
		var __proto=ListItemUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ListItemUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(ListItemUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"base64pic":true,"width":244,"height":19},"child":[{"type":"Clip","props":{"y":-1,"skin":"comp/clip_selectBox.png","clipY":2,"height":19,"name":"selectBox","left":2,"right":2,"x":0}},{"type":"Label","props":{"x":25,"text":"render","color":"#dcea36","width":77,"height":17,"name":"label","y":2,"fontSize":12}},{"type":"Clip","props":{"skin":"comp/clip_tree_arrow.png","clipY":2,"name":"arrow","x":8,"y":4,"mouseEnabled":false}}]};}
		]);
		return ListItemUI;
	})(View)


	//class laya.debug.ui.debugui.comps.RankListItemUI extends laya.ui.View
	var RankListItemUI=(function(_super){
		function RankListItemUI(){
			RankListItemUI.__super.call(this);
		}

		__class(RankListItemUI,'laya.debug.ui.debugui.comps.RankListItemUI',_super);
		var __proto=RankListItemUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(RankListItemUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(RankListItemUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"y":-1,"skin":"comp/clip_selectBox.png","clipY":2,"height":19,"name":"selectBox","left":0,"right":0,"x":0},"type":"Clip"},{"props":{"text":"render","color":"#a0a0a0","height":15,"name":"label","y":2,"left":11,"right":5,"fontSize":12,"x":11,"width":163},"type":"Label"}],"props":{"width":179,"height":19}};}
		]);
		return RankListItemUI;
	})(View)


	//class laya.debug.ui.debugui.DebugPanelUI extends laya.ui.View
	var DebugPanelUI=(function(_super){
		function DebugPanelUI(){
			this.bg=null;
			this.minBtn=null;
			this.treePanel=null;
			this.selectWhenClick=null;
			this.profilePanel=null;
			this.resizeBtn=null;
			this.mouseAnalyseBtn=null;
			this.dragIcon=null;
			this.clearBtn=null;
			this.selectPanel=null;
			this.tab=null;
			DebugPanelUI.__super.call(this);
		}

		__class(DebugPanelUI,'laya.debug.ui.debugui.DebugPanelUI',_super);
		var __proto=DebugPanelUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(DebugPanelUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp);
			View.regComponent("laya.debug.view.nodeInfo.views.NodeTreeView",NodeTreeView);
			View.regComponent("laya.debug.view.nodeInfo.nodetree.Profile",Profile);
			View.regComponent("laya.debug.view.nodeInfo.views.SelectInfosView",SelectInfosView);
		}

		__static(DebugPanelUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"base64pic":true,"width":260,"height":400},"child":[{"type":"Image","props":{"x":205,"y":254,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"}},{"type":"Image","props":{"y":0,"skin":"view/bg_top.png","left":0,"right":0}},{"type":"MinBtnComp","props":{"y":-3,"var":"minBtn","runtime":"laya.debug.view.nodeInfo.nodetree.MinBtnComp","right":-3,"x":207}},{"type":"NodeTree","props":{"left":0,"right":0,"top":32,"bottom":0,"name":"节点树","var":"treePanel","runtime":"laya.debug.view.nodeInfo.views.NodeTreeView"}},{"type":"CheckBox","props":{"x":8,"y":9,"skin":"view/clickselect.png","toolTip":"点击选取","var":"selectWhenClick","mouseEnabled":true,"width":14,"height":14}},{"type":"Profile","props":{"name":"性能","top":32,"right":0,"left":0,"bottom":0,"var":"profilePanel","runtime":"laya.debug.view.nodeInfo.nodetree.Profile"}},{"type":"Button","props":{"x":169,"y":247,"skin":"view/resize.png","right":2,"bottom":2,"name":"resizeBtn","var":"resizeBtn","stateNum":3}},{"type":"Clip","props":{"y":9,"skin":"view/clickanalyse.png","var":"mouseAnalyseBtn","toolTip":"拖动选取","left":33,"x":33,"clipY":3}},{"type":"Clip","props":{"y":0,"skin":"view/clickanalyse.png","var":"dragIcon","x":33,"clipY":3}},{"type":"Button","props":{"y":7,"skin":"view/res.png","stateNum":2,"toolTip":"清除边框","var":"clearBtn","right":34,"x":184}},{"type":"SelectInfos","props":{"top":32,"left":0,"right":0,"bottom":0,"name":"选中","var":"selectPanel","runtime":"laya.debug.view.nodeInfo.views.SelectInfosView"}},{"type":"Tab","props":{"x":59,"y":0,"name":"tab","var":"tab","selectedIndex":0},"child":[{"type":"Button","props":{"skin":"view/tab_panel.png","label":"节点","width":42,"height":32,"name":"item0","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":42,"skin":"view/tab_panel.png","label":"查询","width":42,"height":32,"name":"item1","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":84,"skin":"view/tab_panel.png","label":"性能","width":42,"height":32,"name":"item2","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}}]}]};}
		]);
		return DebugPanelUI;
	})(View)


	//class laya.debug.ui.debugui.FindNodeSmallUI extends laya.ui.View
	var FindNodeSmallUI=(function(_super){
		function FindNodeSmallUI(){
			this.bg=null;
			this.closeBtn=null;
			this.title=null;
			this.typeSelect=null;
			this.findTxt=null;
			this.findBtn=null;
			FindNodeSmallUI.__super.call(this);
		}

		__class(FindNodeSmallUI,'laya.debug.ui.debugui.FindNodeSmallUI',_super);
		var __proto=FindNodeSmallUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(FindNodeSmallUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(FindNodeSmallUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":185,"y":234,"skin":"view/bg_tool.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg"},"type":"Image"},{"props":{"x":185,"y":15,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2},"type":"Button"},{"props":{"x":6,"y":4,"text":"查找对象","width":67,"height":20,"color":"#288edf","var":"title"},"type":"Label"},{"props":{"x":60,"y":81,"skin":"comp/combobox.png","labels":"name,class","width":63,"height":21,"var":"typeSelect","sizeGrid":"5,35,5,5","labelColors":"#a0a0a0,#fffff,#ffffff#fffff"},"type":"ComboBox"},{"props":{"x":27,"y":83,"text":"类型","width":27,"height":20,"color":"#288edf","align":"right"},"type":"Label"},{"props":{"x":7,"y":40,"text":"包含内容","width":47,"height":20,"color":"#288edf","align":"right"},"type":"Label"},{"props":{"x":60,"y":37,"skin":"comp/textinput.png","text":"Sprite","width":164,"height":22,"var":"findTxt","sizeGrid":"5,5,5,5","color":"#a0a0a0"},"type":"TextInput"},{"props":{"x":158,"y":79,"skin":"comp/button.png","label":"查找","width":65,"height":23,"var":"findBtn","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"},"type":"Button"}],"props":{"base64pic":true,"width":233,"height":120}};}
		]);
		return FindNodeSmallUI;
	})(View)


	//class laya.debug.ui.debugui.FindNodeUI extends laya.ui.View
	var FindNodeUI=(function(_super){
		function FindNodeUI(){
			this.bg=null;
			this.closeBtn=null;
			this.title=null;
			this.typeSelect=null;
			this.findTxt=null;
			this.result=null;
			this.findBtn=null;
			FindNodeUI.__super.call(this);
		}

		__class(FindNodeUI,'laya.debug.ui.debugui.FindNodeUI',_super);
		var __proto=FindNodeUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(FindNodeUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.RankListItem",RankListItem);
		}

		__static(FindNodeUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":185,"y":234,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":185,"y":15,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2},"type":"Button"},{"props":{"x":6,"y":4,"text":"查找对象","width":67,"height":20,"color":"#88ef19","var":"title"},"type":"Label"},{"props":{"x":52,"y":75,"skin":"comp/combobox.png","labels":"name,class","width":63,"height":21,"var":"typeSelect","sizeGrid":"5,35,5,5","labelColors":"#a0a0a0,#fffff,#ffffff#fffff"},"type":"ComboBox"},{"props":{"x":10,"y":77,"text":"类型","width":27,"height":20,"color":"#88ef19","align":"right"},"type":"Label"},{"props":{"x":7,"y":34,"text":"包含内容","width":47,"height":20,"color":"#88ef19","align":"right"},"type":"Label"},{"props":{"x":59,"y":31,"skin":"comp/textinput.png","text":"Sprite","width":131,"height":22,"var":"findTxt","sizeGrid":"5,5,5,5","color":"#a0a0a0"},"type":"TextInput"},{"type":"List","child":[{"type":"RankListItem","props":{"y":30,"left":5,"right":5,"name":"render","x":30,"runtime":"laya.debug.uicomps.RankListItem"}}],"props":{"x":6,"y":106,"width":188,"height":180,"vScrollBarSkin":"comp/vscroll.png","var":"result"}},{"props":{"x":125,"y":73,"skin":"comp/button.png","label":"查找","width":65,"height":23,"var":"findBtn","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"},"type":"Button"}],"props":{"width":200,"height":300,"base64pic":true}};}
		]);
		return FindNodeUI;
	})(View)


	//class laya.debug.ui.debugui.MinBtnCompUI extends laya.ui.View
	var MinBtnCompUI=(function(_super){
		function MinBtnCompUI(){
			this.minBtn=null;
			this.maxUI=null;
			this.bg=null;
			this.maxBtn=null;
			MinBtnCompUI.__super.call(this);
		}

		__class(MinBtnCompUI,'laya.debug.ui.debugui.MinBtnCompUI',_super);
		var __proto=MinBtnCompUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(MinBtnCompUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(MinBtnCompUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":7,"y":8,"skin":"comp/minBtn.png","stateNum":"3","var":"minBtn","width":22,"height":20,"toolTip":"最小化"},"type":"Button"},{"type":"Box","child":[{"props":{"x":0,"y":0,"skin":"view/bg_panel.png","var":"bg","width":36,"height":36,"sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":6,"y":8,"skin":"view/zoom_out.png","stateNum":"2","var":"maxBtn"},"type":"Button"}],"props":{"var":"maxUI"}}],"props":{"width":36,"height":36,"base64pic":true}};}
		]);
		return MinBtnCompUI;
	})(View)


	//class laya.debug.ui.debugui.NodeListPanelUI extends laya.ui.View
	var NodeListPanelUI=(function(_super){
		function NodeListPanelUI(){
			this.bg=null;
			this.closeBtn=null;
			this.title=null;
			this.itemList=null;
			NodeListPanelUI.__super.call(this);
		}

		__class(NodeListPanelUI,'laya.debug.ui.debugui.NodeListPanelUI',_super);
		var __proto=NodeListPanelUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(NodeListPanelUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.RankListItem",RankListItem);
		}

		__static(NodeListPanelUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":235,"y":284,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":204,"y":32,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2,"visible":true},"type":"Button"},{"props":{"x":10,"y":6,"text":"节点信息","width":147,"height":16,"color":"#288edf","var":"title"},"type":"Label"},{"type":"List","child":[{"type":"RankListItem","props":{"left":5,"right":5,"name":"render","runtime":"laya.debug.uicomps.RankListItem"}}],"props":{"vScrollBarSkin":"comp/vscroll.png","var":"itemList","left":2,"right":2,"top":26,"bottom":0,"repeatX":1,"x":20}}],"props":{"width":200,"height":300}};}
		]);
		return NodeListPanelUI;
	})(View)


	//class laya.debug.ui.debugui.NodeToolUI extends laya.ui.View
	var NodeToolUI=(function(_super){
		function NodeToolUI(){
			this.bg=null;
			this.closeBtn=null;
			this.tarTxt=null;
			this.freshBtn=null;
			this.mouseAnalyseBtn=null;
			this.dragIcon=null;
			NodeToolUI.__super.call(this);
		}

		__class(NodeToolUI,'laya.debug.ui.debugui.NodeToolUI',_super);
		var __proto=NodeToolUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(NodeToolUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(NodeToolUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"base64pic":true,"width":200,"height":341},"child":[{"type":"Image","props":{"x":195,"y":244,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"}},{"type":"Label","props":{"x":9,"y":5,"text":"当前选中对象","width":67,"height":16,"color":"#a0a0a0"}},{"type":"Button","props":{"x":195,"y":25,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2}},{"type":"Label","props":{"x":10,"y":25,"text":"当前对象","width":67,"height":16,"color":"#a0a0a0","var":"tarTxt"}},{"type":"Button","props":{"x":15,"y":65,"skin":"comp/button.png","label":"父链","width":39,"height":23,"mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":66,"y":65,"skin":"comp/button.png","label":"子","width":35,"height":23,"mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":112,"y":65,"skin":"comp/button.png","label":"兄弟","width":49,"height":23,"mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":13,"y":117,"skin":"comp/button.png","label":"Enable链","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":100,"y":117,"skin":"comp/button.png","label":"Size链","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Label","props":{"x":14,"y":97,"text":"节点链信息","width":67,"height":16,"color":"#a0a0a0"}},{"type":"Label","props":{"x":15,"y":45,"text":"对象选取","width":67,"height":16,"color":"#a0a0a0"}},{"type":"Label","props":{"x":16,"y":145,"text":"节点显示","width":67,"height":16,"color":"#a0a0a0"}},{"type":"Button","props":{"x":13,"y":164,"skin":"comp/button.png","label":"隐藏旁支","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":100,"y":164,"skin":"comp/button.png","label":"隐藏兄弟","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":13,"y":197,"skin":"comp/button.png","label":"隐藏子","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":99,"y":197,"skin":"comp/button.png","label":"恢复","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Label","props":{"x":15,"y":228,"text":"其他","width":67,"height":16,"color":"#a0a0a0"}},{"type":"Button","props":{"x":12,"y":247,"skin":"comp/button.png","label":"节点树定位","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":99,"y":247,"skin":"comp/button.png","label":"显示边框","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Label","props":{"x":12,"y":315,"text":"Alt+A分析鼠标能否够点中对象","width":173,"height":16,"color":"#a0a0a0"}},{"type":"Button","props":{"x":156,"y":1,"skin":"view/refresh2.png","var":"freshBtn","left":156,"toolTip":"recache节点"}},{"type":"Button","props":{"x":12,"y":279,"skin":"comp/button.png","label":"输出到控制台","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Button","props":{"x":99,"y":279,"skin":"comp/button.png","label":"显示切换","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"}},{"type":"Clip","props":{"y":44,"skin":"view/clickanalyse.png","var":"mouseAnalyseBtn","toolTip":"拖动到对象上方判断是否能够点中","left":84,"x":84,"clipY":3}},{"type":"Clip","props":{"y":35,"skin":"view/clickanalyse.png","var":"dragIcon","x":94,"clipY":3}}]};}
		]);
		return NodeToolUI;
	})(View)


	//class laya.debug.ui.debugui.NodeTreeSettingUI extends laya.ui.View
	var NodeTreeSettingUI=(function(_super){
		function NodeTreeSettingUI(){
			this.bg=null;
			this.showTxt=null;
			this.okBtn=null;
			this.closeBtn=null;
			NodeTreeSettingUI.__super.call(this);
		}

		__class(NodeTreeSettingUI,'laya.debug.ui.debugui.NodeTreeSettingUI',_super);
		var __proto=NodeTreeSettingUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(NodeTreeSettingUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(NodeTreeSettingUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":0,"y":0,"skin":"view/bg_panel.png","left":0,"top":0,"bottom":0,"right":0,"var":"bg","width":200,"height":300,"sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":9,"y":7,"text":"要显示的属性","width":76,"height":16,"color":"#ffffff","align":"left"},"type":"Label"},{"props":{"x":6,"y":29,"skin":"comp/textinput.png","text":"x\\ny\\nwidth\\nheight","width":188,"height":230,"multiline":true,"var":"showTxt","color":"#a0a0a0","sizeGrid":"5,5,5,5"},"type":"TextInput"},{"props":{"x":57,"y":269,"skin":"comp/button.png","label":"确定","var":"okBtn","mouseEnabled":"true","labelColors":"#ffffff,#ffffff,#ffffff,#ffffff"},"type":"Button"},{"props":{"x":175,"y":5,"skin":"view/btn_close.png","var":"closeBtn"},"type":"Button"}],"props":{"base64pic":true,"width":200,"height":300}};}
		]);
		return NodeTreeSettingUI;
	})(View)


	//class laya.debug.ui.debugui.NodeTreeUI extends laya.ui.View
	var NodeTreeUI=(function(_super){
		function NodeTreeUI(){
			this.nodeTree=null;
			this.controlBar=null;
			this.settingBtn=null;
			this.freshBtn=null;
			this.fliterTxt=null;
			this.closeBtn=null;
			this.ifShowProps=null;
			NodeTreeUI.__super.call(this);
		}

		__class(NodeTreeUI,'laya.debug.ui.debugui.NodeTreeUI',_super);
		var __proto=NodeTreeUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(NodeTreeUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.TreeListItem",TreeListItem);
		}

		__static(NodeTreeUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"width":200,"height":260,"base64pic":true},"child":[{"type":"Image","props":{"x":-22,"y":-47,"skin":"view/bg_panel.png","width":211,"height":206,"left":0,"right":0,"top":0,"bottom":0,"sizeGrid":"5,5,5,5"}},{"props":{"y":0,"skin":"view/bg_tool.png","left":0,"right":0},"type":"Image"},{"type":"Tree","props":{"x":0,"scrollBarSkin":"comp/vscroll.png","width":195,"height":229,"var":"nodeTree","left":0,"right":0,"top":38,"bottom":20},"child":[{"type":"ListItem","props":{"y":0,"name":"render","left":0,"right":0,"runtime":"laya.debug.uicomps.TreeListItem"}}]},{"type":"Box","props":{"x":3,"y":5,"var":"controlBar","left":3,"right":3,"top":5,"height":23},"child":[{"type":"Button","props":{"x":6,"skin":"view/setting.png","stateNum":3,"var":"settingBtn","toolTip":"设置显示的属性","y":6}},{"type":"Button","props":{"y":6,"skin":"view/refresh.png","var":"freshBtn","left":30,"toolTip":"刷新数据"}},{"type":"TextInput","props":{"y":0,"skin":"view/bg_top.png","height":22,"var":"fliterTxt","left":53,"right":0,"color":"#a0a0a0"}},{"type":"Button","props":{"x":172,"y":2,"skin":"view/btn_close.png","var":"closeBtn","right":1,"visible":false}}]},{"props":{"y":243,"skin":"comp/checkbox.png","label":"显示属性","var":"ifShowProps","bottom":3,"selected":true,"visible":true,"x":2,"width":70,"height":14,"labelColors":"#a0a0a0,#fffff,#ffffff,#fffff"},"type":"CheckBox"}]};}
		]);
		return NodeTreeUI;
	})(View)


	//class laya.debug.ui.debugui.ObjectCreateUI extends laya.ui.View
	var ObjectCreateUI=(function(_super){
		function ObjectCreateUI(){
			this.bg=null;
			this.closeBtn=null;
			this.itemList=null;
			this.freshBtn=null;
			ObjectCreateUI.__super.call(this);
		}

		__class(ObjectCreateUI,'laya.debug.ui.debugui.ObjectCreateUI',_super);
		var __proto=ObjectCreateUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ObjectCreateUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.RankListItem",RankListItem);
		}

		__static(ObjectCreateUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":215,"y":264,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":184,"y":12,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2,"visible":false},"type":"Button"},{"props":{"x":11,"y":5,"text":"对象创建统计","width":83,"height":16,"color":"#288edf"},"type":"Label"},{"type":"List","child":[{"type":"RankListItem","props":{"y":0,"left":5,"right":5,"name":"render","runtime":"laya.debug.uicomps.RankListItem"}}],"props":{"vScrollBarSkin":"comp/vscroll.png","var":"itemList","top":26,"bottom":5,"left":5,"right":5,"repeatX":1}},{"props":{"y":1,"skin":"view/refresh2.png","var":"freshBtn","toolTip":"刷新数据","right":1,"x":178},"type":"Button"}],"props":{"width":200,"height":300,"base64pic":true}};}
		]);
		return ObjectCreateUI;
	})(View)


	//class laya.debug.ui.debugui.ObjectInfoUI extends laya.ui.View
	var ObjectInfoUI=(function(_super){
		function ObjectInfoUI(){
			this.bg=null;
			this.title=null;
			this.showTxt=null;
			this.closeBtn=null;
			this.autoUpdate=null;
			this.settingBtn=null;
			ObjectInfoUI.__super.call(this);
		}

		__class(ObjectInfoUI,'laya.debug.ui.debugui.ObjectInfoUI',_super);
		var __proto=ObjectInfoUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ObjectInfoUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(ObjectInfoUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":-1,"y":0,"skin":"view/bg_panel.png","left":-1,"right":1,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":7,"y":5,"text":"对象类型","width":67,"height":20,"color":"#ffffff","var":"title","left":7,"right":6},"type":"Label"},{"props":{"x":2,"skin":"comp/textinput.png","text":"属性内容","width":196,"height":228,"left":2,"right":2,"var":"showTxt","top":25,"bottom":20,"editable":false,"multiline":true,"sizeGrid":"5,5,5,5","color":"#a0a0a0"},"type":"TextArea"},{"props":{"x":178,"y":4,"skin":"view/btn_close.png","var":"closeBtn","top":4,"right":2},"type":"Button"},{"props":{"skin":"comp/checkbox.png","label":"自动刷新属性","var":"autoUpdate","bottom":2,"x":3,"labelColors":"#a0a0a0,#fffff,#ffffff,#fffff"},"type":"CheckBox"},{"props":{"x":164,"skin":"view/setting.png","stateNum":"3","var":"settingBtn","y":6,"top":6,"right":24,"toolTip":"设置显示属性"},"type":"Button"},{"props":{"x":179,"y":257,"skin":"view/resize.png","right":2,"bottom":2,"name":"resizeBtn","stateNum":3},"type":"Button"}],"props":{"base64pic":true,"width":200,"height":200}};}
		]);
		return ObjectInfoUI;
	})(View)


	//class laya.debug.ui.debugui.OutPutUI extends laya.ui.View
	var OutPutUI=(function(_super){
		function OutPutUI(){
			this.bg=null;
			this.txt=null;
			this.closeBtn=null;
			this.clearBtn=null;
			OutPutUI.__super.call(this);
		}

		__class(OutPutUI,'laya.debug.ui.debugui.OutPutUI',_super);
		var __proto=OutPutUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(OutPutUI.uiView);
		}

		__proto.viewMapRegists=function(){}
		__static(OutPutUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"width":300,"height":200,"base64pic":true},"child":[{"type":"Image","props":{"x":205,"y":254,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"}},{"type":"Label","props":{"skin":"comp/textarea.png","text":"TextArea","color":"#a0a0a0","var":"txt","left":5,"right":5,"top":22,"bottom":5,"mouseEnabled":true,"sizeGrid":"3,3,3,3"}},{"type":"Button","props":{"x":185,"y":15,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2}},{"props":{"x":253,"y":1,"skin":"view/re.png","stateNum":"2","var":"clearBtn","right":25},"type":"Button"},{"props":{"x":169,"y":247,"skin":"view/resize.png","right":2,"bottom":2,"name":"resizeBtn","stateNum":3},"type":"Button"}]};}
		]);
		return OutPutUI;
	})(View)


	//class laya.debug.ui.debugui.ProfileUI extends laya.ui.View
	var ProfileUI=(function(_super){
		function ProfileUI(){
			this.renderPanel=null;
			this.createPanel=null;
			this.cachePanel=null;
			this.tab=null;
			this.resPanel=null;
			ProfileUI.__super.call(this);
		}

		__class(ProfileUI,'laya.debug.ui.debugui.ProfileUI',_super);
		var __proto=ProfileUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ProfileUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.view.nodeInfo.views.RenderCostRankView",RenderCostRankView);
			View.regComponent("laya.debug.view.nodeInfo.views.ObjectCreateView",ObjectCreateView);
			View.regComponent("laya.debug.view.nodeInfo.views.CacheRankView",CacheRankView);
			View.regComponent("laya.debug.view.nodeInfo.views.ResRankView",ResRankView);
		}

		__static(ProfileUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"width":260,"height":329,"base64pic":true},"child":[{"type":"Image","props":{"y":0,"skin":"view/bg_tool.png","right":0,"left":0}},{"type":"Rank","props":{"var":"renderPanel","top":29,"runtime":"laya.debug.view.nodeInfo.views.RenderCostRankView","right":0,"name":"渲染用时","left":0,"bottom":0}},{"type":"ObjectCreate","props":{"var":"createPanel","top":29,"runtime":"laya.debug.view.nodeInfo.views.ObjectCreateView","right":0,"name":"对象创建统计","left":0,"bottom":0}},{"type":"Rank","props":{"x":10,"var":"cachePanel","top":29,"runtime":"laya.debug.view.nodeInfo.views.CacheRankView","right":0,"name":"cache用时","left":0,"bottom":0}},{"type":"Tab","props":{"y":9,"x":7,"width":191,"var":"tab","selectedIndex":0,"height":19},"child":[{"type":"CheckBox","props":{"y":0,"x":0,"width":50,"skin":"view/create.png","name":"item0","labelColors":"#a0a0a0,#ffffff,#ffffff,#ffffff","label":"  对象","height":17}},{"type":"CheckBox","props":{"y":0,"x":55,"width":50,"skin":"view/rendertime.png","name":"item1","labelColors":"#a0a0a0,#ffffff,#ffffff,#ffffff","label":" 渲染","height":19}},{"type":"CheckBox","props":{"y":0,"x":110,"width":50,"skin":"view/cache.png","name":"item2","labelColors":"#a0a0a0,#ffffff,#ffffff,#ffffff","label":" 重绘","height":16}},{"type":"CheckBox","props":{"y":0,"x":165,"width":50,"skin":"view/cache.png","name":"item3","labelColors":"#a0a0a0,#ffffff,#ffffff,#ffffff","label":" 资源","height":16}}]},{"type":"Rank","props":{"y":40,"x":50,"var":"resPanel","top":29,"runtime":"laya.debug.view.nodeInfo.views.ResRankView","right":0,"name":"资源缓存","left":0,"bottom":0}}]};}
		]);
		return ProfileUI;
	})(View)


	//class laya.debug.ui.debugui.RankUI extends laya.ui.View
	var RankUI=(function(_super){
		function RankUI(){
			this.bg=null;
			this.closeBtn=null;
			this.title=null;
			this.itemList=null;
			this.autoUpdate=null;
			this.freshBtn=null;
			RankUI.__super.call(this);
		}

		__class(RankUI,'laya.debug.ui.debugui.RankUI',_super);
		var __proto=RankUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(RankUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.RankListItem",RankListItem);
		}

		__static(RankUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":225,"y":274,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"x":194,"y":22,"skin":"view/btn_close.png","var":"closeBtn","top":2,"right":2,"visible":false},"type":"Button"},{"props":{"x":8,"y":5,"text":"渲染用时表(3000ms)","width":109,"height":16,"color":"#288edf","var":"title"},"type":"Label"},{"type":"List","child":[{"type":"RankListItem","props":{"left":5,"right":5,"name":"render","runtime":"laya.debug.uicomps.RankListItem"}}],"props":{"vScrollBarSkin":"comp/vscroll.png","var":"itemList","left":2,"right":2,"top":26,"bottom":25,"repeatX":1,"x":10,"y":10}},{"props":{"skin":"comp/checkbox.png","label":"自动刷新属性","var":"autoUpdate","bottom":3,"selected":false,"visible":true,"left":2,"labelColors":"#a0a0a0,#fffff,#ffffff,#fffff"},"type":"CheckBox"},{"props":{"y":1,"skin":"view/refresh2.png","var":"freshBtn","toolTip":"刷新数据","right":1},"type":"Button"}],"props":{"width":200,"height":300}};}
		]);
		return RankUI;
	})(View)


	//class laya.debug.ui.debugui.SelectInfosUI extends laya.ui.View
	var SelectInfosUI=(function(_super){
		function SelectInfosUI(){
			this.bg=null;
			this.closeBtn=null;
			this.selectList=null;
			this.findBtn=null;
			this.fliterTxt=null;
			SelectInfosUI.__super.call(this);
		}

		__class(SelectInfosUI,'laya.debug.ui.debugui.SelectInfosUI',_super);
		var __proto=SelectInfosUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SelectInfosUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.uicomps.RankListItem",RankListItem);
		}

		__static(SelectInfosUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"props":{"x":205,"y":254,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"},"type":"Image"},{"props":{"skin":"view/btn_close.png","var":"closeBtn","top":32,"visible":false,"right":2},"type":"Button"},{"props":{"x":7,"y":36,"text":"当前选中列表","width":83,"height":16,"color":"#288edf"},"type":"Label"},{"type":"List","child":[{"type":"RankListItem","props":{"left":5,"right":5,"name":"render","runtime":"laya.debug.uicomps.RankListItem"}}],"props":{"vScrollBarSkin":"comp/vscroll.png","var":"selectList","left":5,"right":5,"top":56,"bottom":25,"repeatX":1,"x":20}},{"props":{"x":6,"text":"Alt+V选取鼠标下的对象","width":189,"height":16,"color":"#a0a0a0","bottom":3},"type":"Label"},{"type":"Image","props":{"y":0,"skin":"view/bg_tool.png","left":0,"right":0}},{"type":"Clip","props":{"y":6,"skin":"view/search.png","clipY":2,"var":"findBtn","right":5,"toolTip":"查找","x":174}},{"type":"TextInput","props":{"y":6,"skin":"view/bg_top.png","height":22,"var":"fliterTxt","left":8,"right":45,"color":"#a0a0a0","x":8,"width":147}}],"props":{"width":200,"height":300,"base64pic":true}};}
		]);
		return SelectInfosUI;
	})(View)


	//class laya.debug.ui.debugui.ToolBarUI extends laya.ui.View
	var ToolBarUI=(function(_super){
		function ToolBarUI(){
			this.bg=null;
			this.treeBtn=null;
			this.findBtn=null;
			this.minBtn=null;
			this.selectWhenClick=null;
			this.clearBtn=null;
			this.rankBtn=null;
			this.nodeRankBtn=null;
			this.cacheBtn=null;
			ToolBarUI.__super.call(this);
		}

		__class(ToolBarUI,'laya.debug.ui.debugui.ToolBarUI',_super);
		var __proto=ToolBarUI.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ToolBarUI.uiView);
		}

		__proto.viewMapRegists=function(){
			View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp);
		}

		__static(ToolBarUI,
		['uiView',function(){return this.uiView={"type":"View","props":{"base64pic":true,"width":250,"height":30},"child":[{"type":"Image","props":{"x":195,"y":244,"skin":"view/bg_panel.png","left":0,"right":0,"top":0,"bottom":0,"var":"bg","sizeGrid":"5,5,5,5"}},{"type":"Button","props":{"x":2,"y":6,"skin":"view/save.png","stateNum":2,"var":"treeBtn","toolTip":"节点树"}},{"type":"Button","props":{"x":25,"y":6,"skin":"view/save.png","stateNum":2,"var":"findBtn","toolTip":"查找面板"}},{"type":"MinBtnComp","props":{"x":218,"y":-3,"var":"minBtn","runtime":"laya.debug.view.nodeInfo.nodetree.MinBtnComp"}},{"type":"CheckBox","props":{"x":124,"y":8,"skin":"comp/checkbox.png","label":"点击选取","var":"selectWhenClick","labelColors":"#a0a0a0,#fffff,#ffffff,#fffff"}},{"type":"Button","props":{"x":193,"y":5,"skin":"view/res.png","stateNum":2,"toolTip":"清除边框","var":"clearBtn"}},{"type":"Button","props":{"x":49,"y":6,"skin":"view/save.png","stateNum":2,"var":"rankBtn","toolTip":"渲染用时排行"}},{"type":"Button","props":{"x":72,"y":6,"skin":"view/save.png","stateNum":2,"var":"nodeRankBtn","toolTip":"创建对象排行"}},{"type":"Button","props":{"x":94,"y":6,"skin":"view/save.png","stateNum":2,"var":"cacheBtn","toolTip":"cache对象"}}]};}
		]);
		return ToolBarUI;
	})(View)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-6 上午9:42:46
	*/
	//class laya.debug.uicomps.ListBase extends laya.ui.List
	var ListBase=(function(_super){
		function ListBase(){
			ListBase.__super.call(this);
		}

		__class(ListBase,'laya.debug.uicomps.ListBase',_super);
		var __proto=ListBase.prototype;
		__getset(0,__proto,'selectedIndex',_super.prototype._$get_selectedIndex,function(value){
			if (this._selectedIndex !=value){
				this._selectedIndex=value;
				this.changeSelectStatus();
				this.event("change");
				this.selectHandler && this.selectHandler.runWith(value);
			}
			if (this.selectEnable && this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				if (value < this._startIndex || (value+numX > this._startIndex+this.repeatX *this.repeatY)){
					this.scrollTo(value);
				}
			}
		});

		return ListBase;
	})(List)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-6 上午9:49:47
	*/
	//class laya.debug.uicomps.TreeBase extends laya.ui.Tree
	var TreeBase=(function(_super){
		function TreeBase(){
			TreeBase.__super.call(this);
		}

		__class(TreeBase,'laya.debug.uicomps.TreeBase',_super);
		var __proto=TreeBase.prototype;
		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._list=new ListBase());
			this._list.renderHandler=Handler.create(this,this.renderItem,null,false);
			this._list.repeatX=1;
			this._list.on("change",this,this.onListChange);
		}

		return TreeBase;
	})(Tree)


	//class laya.editor.ui.other.ColorPickerPanelUI extends laya.ui.View
	var ColorPickerPanelUI=(function(_super){
		function ColorPickerPanelUI(){
			this.pickBack=null;
			this.colorTxt=null;
			this.redTxt=null;
			this.greenTxt=null;
			this.blueTxt=null;
			ColorPickerPanelUI.__super.call(this);
		}

		__class(ColorPickerPanelUI,'laya.editor.ui.other.ColorPickerPanelUI',_super);
		var __proto=ColorPickerPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ColorPickerPanelUI.uiView);
		}

		__static(ColorPickerPanelUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"y":"137","bottom":"0","left":"0","sizeGrid":"4,4,4,4","top":"0","skin":"view/bg_panel4.png","right":"0","x":"165"}},{"type":"Image","props":{"y":"5","width":"189","height":"180","skin":"comp/blank2.png","var":"pickBack","x":"5"}},{"type":"Label","props":{"y":"202","text":"Color：","width":"50","align":"right","height":"18","color":"#c5c5c5","x":"2"}},{"type":"TextInput","props":{"height":"22","y":"200","text":"#ffffff","width":"138","left":"50","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","var":"colorTxt","x":"50"}},{"type":"Label","props":{"y":"229","text":"Red：","width":"50","align":"right","height":"18","color":"#c5c5c5","x":"2"}},{"type":"TextInput","props":{"height":"22","y":"227","text":"255","width":"135","left":"50","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","var":"redTxt","x":"50"}},{"type":"Label","props":{"y":"258","text":"Green：","width":"50","align":"right","height":"18","color":"#c5c5c5","x":"2"}},{"type":"TextInput","props":{"height":"22","y":"256","text":"255","width":"132","left":"50","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","var":"greenTxt","x":"50"}},{"type":"Label","props":{"y":"287","text":"Blue：","width":"50","align":"right","height":"18","color":"#c5c5c5","x":"2"}},{"type":"TextInput","props":{"height":"22","y":"285","text":"255","width":"135","left":"50","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","var":"blueTxt","x":"50"}}],"props":{"height":"320","scenecolor":"#dddddd","width":"200"}};}
		]);
		return ColorPickerPanelUI;
	})(View)


	//class laya.editor.ui.comp.LayoutTabUI extends laya.ui.View
	var LayoutTabUI=(function(_super){
		function LayoutTabUI(){
			this.btn=null;
			this.close=null;
			LayoutTabUI.__super.call(this);
		}

		__class(LayoutTabUI,'laya.editor.ui.comp.LayoutTabUI',_super);
		var __proto=LayoutTabUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(LayoutTabUI.uiView);
		}

		__static(LayoutTabUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Button","props":{"y":"0","labelColors":"#dddddd,#888888,#e0e0e0","label":"label","height":"25","skin":"view/tab_panel.png","var":"btn","width":"75","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","y":"7","scaleY":"0.5","skin":"view/btn_close1.png","var":"close","x":"59"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return LayoutTabUI;
	})(View)


	//class laya.editor.ui.comp.viewTabUI extends laya.ui.View
	var viewTabUI=(function(_super){
		function viewTabUI(){
			this.btn=null;
			this.close=null;
			viewTabUI.__super.call(this);
		}

		__class(viewTabUI,'laya.editor.ui.comp.viewTabUI',_super);
		var __proto=viewTabUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(viewTabUI.uiView);
		}

		__static(viewTabUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Button","props":{"y":"0","labelColors":"#dddddd,#888888,#e0e0e0","label":"label","labelMargin":"0,0,15,0","height":"25","skin":"view/tab_panel.png","var":"btn","width":"75","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","y":"7","scaleY":"0.5","skin":"view/btn_close1.png","var":"close","x":"58"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return viewTabUI;
	})(View)


	/**
	*可拖动布局框的基类
	*@author ww
	*/
	//class laya.ide.ui.DragView extends laya.ui.View
	var DragView=(function(_super){
		function DragView(){
			this.minWidth=50;
			this.minHeight=50;
			this.defaultWidth=100;
			this.defaultHeight=100;
			this.title="";
			this.canClose=true;
			this.canMix=true;
			this.freeSize=false;
			DragView.__super.call(this);
		}

		__class(DragView,'laya.ide.ui.DragView',_super);
		return DragView;
	})(View)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.core.components.EditorTextInput extends laya.ui.TextInput
	var EditorTextInput=(function(_super){
		function EditorTextInput(text){
			this._oldSkin=null;
			(text===void 0)&& (text="");
			EditorTextInput.__super.call(this,text);
			this._tf.on("blur",this,this.mOnBlur);
			this._tf.on("focus",this,this.mOnFocus);
			this.color=StyleConsts$1.TextInputColor;
		}

		__class(EditorTextInput,'laya.editor.core.components.EditorTextInput',_super);
		var __proto=EditorTextInput.prototype;
		__proto.mOnBlur=function(e){
			if(this._oldSkin)
				this.skin=this._oldSkin;
		}

		__proto.mOnFocus=function(e){
			if(this._oldSkin)
				this.skin=this._oldSkin.replace(".png","_selected.png");
			this.select();
		}

		__getset(0,__proto,'skin',_super.prototype._$get_skin,function(value){
			_super.prototype._$set_skin.call(this,value);
			if (!this._oldSkin){
				this._oldSkin=value;
			}
		});

		return EditorTextInput;
	})(TextInput)


	//class laya.editor.ui.group.ItemGroupUI extends laya.ui.View
	var ItemGroupUI=(function(_super){
		function ItemGroupUI(){
			this.groubBar=null;
			this.groupLabl=null;
			this.arrowClip=null;
			this.groupBox=null;
			ItemGroupUI.__super.call(this);
		}

		__class(ItemGroupUI,'laya.editor.ui.group.ItemGroupUI',_super);
		var __proto=ItemGroupUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ItemGroupUI.uiView);
		}

		__static(ItemGroupUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"y":"0","right":"0","width":"100","left":"0","mouseEnabled":"true","height":"20","skin":"view/bg_bar.png","var":"groubBar","x":"0"}},{"type":"Label","props":{"y":"0","text":"label","mouseChildren":"false","mouseEnabled":"false","color":"#d8d8d8","var":"groupLabl","x":"29"}},{"type":"Clip","props":{"x":"15","y":"4","mouseChildren":"false","mouseEnabled":"false","height":"12","skin":"comp/clip_tree.png","var":"arrowClip","width":"11","clipY":"2"}},{"type":"Box","child":[{"type":"Button","props":{"sizeGrid":"0,4,0,4","skin":"comp/button.png","labelColors":"#dddddd,#dddddd,#dddddd","label":"label"}}],"props":{"x":"0","y":"20","right":"0","left":"0","var":"groupBox","mouseEnabled":"true"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return ItemGroupUI;
	})(View)


	//class laya.editor.ui.LayoutRecUI extends laya.ui.View
	var LayoutRecUI=(function(_super){
		function LayoutRecUI(){
			this.back=null;
			this.tab=null;
			LayoutRecUI.__super.call(this);
		}

		__class(LayoutRecUI,'laya.editor.ui.LayoutRecUI',_super);
		var __proto=LayoutRecUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(LayoutRecUI.uiView);
		}

		__static(LayoutRecUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"sizeGrid":"0,3,0,3","y":"0","var":"back","width":"600","left":"0","height":"25","top":"0","skin":"view/bg_panel_layoutrec.png","right":"0","x":"0"}},{"type":"Tab","props":{"y":"0","skin":"view/tab_panel.png","var":"tab","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"0"}}],"props":{"hitTestPrior":"true"}};}
		]);
		return LayoutRecUI;
	})(View)


	//class laya.editor.ui.MenuBarUI extends laya.ui.View
	var MenuBarUI=(function(_super){
		function MenuBarUI(){
			this.tab=null;
			this.btnBox=null;
			this.minBtn=null;
			this.backBtn=null;
			this.closeBtn=null;
			this.switchBtn=null;
			MenuBarUI.__super.call(this);
		}

		__class(MenuBarUI,'laya.editor.ui.MenuBarUI',_super);
		var __proto=MenuBarUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(MenuBarUI.uiView);
		}

		__static(MenuBarUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"0","width":"200","left":"0","height":"34","skin":"view/bg_menu.png","right":"0","x":"0"}},{"type":"Image","props":{"y":"6","skin":"view/logo.png","x":"13"}},{"type":"Tab","child":[{"type":"Button","props":{"name":"item0","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"项目(P)"}},{"type":"Button","props":{"name":"item1","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"文件(F)","x":"68"}},{"type":"Button","props":{"name":"item2","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"编辑(E)","x":"136"}},{"type":"Button","props":{"name":"item3","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"视图(V)","x":"204"}},{"type":"Button","props":{"name":"item5","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"发布(I)","x":"340"}},{"type":"Button","props":{"name":"item6","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","label":"插件(T)","x":"408"}},{"type":"Button","props":{"name":"item7","label":"关于(A)","visible":"false","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","x":"476"}},{"type":"Button","props":{"name":"item4","label":"窗口(W)","y":"0","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","x":"272"}}],"props":{"y":"5","var":"tab","x":"40"}},{"type":"Box","child":[{"type":"Button","props":{"y":"0","skin":"view/btn_min.png","var":"minBtn","x":"65"}},{"type":"Button","props":{"y":"0","skin":"view/btn_max.png","var":"backBtn","x":"98"}},{"type":"Button","props":{"y":"0","skin":"view/btn_close2.png","var":"closeBtn","x":"131"}},{"type":"Button","props":{"name":"item5","var":"switchBtn","label":"代码模式","height":"24","y":"5","skin":"view/btn_menu.png","labelColors":"#e0e0e0,#e0e0e0,#e0e0e0","width":"79","x":"-12"}}],"props":{"y":"1","var":"btnBox","right":"1","x":"712"}}],"props":{"height":"34","scenecolor":"#dddddd","width":"600"}};}
		]);
		return MenuBarUI;
	})(View)


	//class laya.editor.ui.page.AddGraphicAniUI extends laya.ui.View
	var AddGraphicAniUI=(function(_super){
		function AddGraphicAniUI(){
			this.nametip=null;
			this.widthTip=null;
			this.heightTip=null;
			this.nameTxt=null;
			this.widthTxt=null;
			this.heightTxt=null;
			this.bgColorPicker=null;
			this.typetip=null;
			this.typeDrop=null;
			AddGraphicAniUI.__super.call(this);
		}

		__class(AddGraphicAniUI,'laya.editor.ui.page.AddGraphicAniUI',_super);
		var __proto=AddGraphicAniUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddGraphicAniUI.uiView);
		}

		__static(AddGraphicAniUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Label","props":{"y":"96","color":"#c5c5c5","text":"参考宽度，实际无效","x":"428"}},{"type":"Label","props":{"y":"134","color":"#c5c5c5","text":"参考高度，实际无效","x":"428"}},{"type":"Label","props":{"y":"54","color":"#c5c5c5","text":"页面名称：","var":"nametip","x":"10"}},{"type":"Label","props":{"y":"93","color":"#c5c5c5","text":"页面宽度：","var":"widthTip","x":"10"}},{"type":"Label","props":{"y":"133","color":"#c5c5c5","text":"页面高度：","var":"heightTip","x":"10"}},{"type":"Label","props":{"y":"171","wordWrap":"true","text":"参考背景：","width":"73","height":"40","color":"#c5c5c5","x":"10"}},{"type":"TextInput","props":{"height":"32","y":"47","width":"451","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"83"}},{"type":"TextInput","props":{"height":"32","y":"86","text":"600","width":"339","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"widthTxt","x":"83"}},{"type":"TextInput","props":{"height":"32","y":"126","text":"400","width":"339","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"heightTxt","x":"83"}},{"type":"ColorPicker","props":{"scaleX":"0.5","y":"171","scaleY":"0.5","selectedcolor":"#dddddd","skin":"comp/color.png","var":"bgColorPicker","x":"83"}},{"type":"Label","props":{"y":"173","text":"(可选，设计面板的背景颜色)","width":"417","height":"18","color":"#c5c5c5","x":"103"}},{"type":"Label","props":{"y":"16","text":"动画类型：","width":"74","height":"18","color":"#c5c5c5","var":"typetip","x":"10"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"8","selectedIndex":"0","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"451","skin":"comp/combo_32.png","sizeGrid":"0,20,0,3","labels":"View,Dialog","var":"typeDrop","x":"83"}}],"props":{"height":"250","scenecolor":"#dddddd","width":"550"}};}
		]);
		return AddGraphicAniUI;
	})(View)


	//class laya.editor.ui.page.AddPageUI extends laya.ui.View
	var AddPageUI=(function(_super){
		function AddPageUI(){
			this.typetip=null;
			this.nametip=null;
			this.widthTip=null;
			this.heightTip=null;
			this.typeDrop=null;
			this.nameTxt=null;
			this.imgTxt=null;
			this.widthTxt=null;
			this.heightTxt=null;
			this.bgColorPicker=null;
			this.selectBtn=null;
			this.widthCheck=null;
			this.heightCheck=null;
			AddPageUI.__super.call(this);
		}

		__class(AddPageUI,'laya.editor.ui.page.AddPageUI',_super);
		var __proto=AddPageUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddPageUI.uiView);
		}

		__static(AddPageUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Label","props":{"y":"16","color":"#c5c5c5","text":"页面类型：","var":"typetip","x":"10"}},{"type":"Label","props":{"y":"54","color":"#c5c5c5","text":"页面名称：","var":"nametip","x":"10"}},{"type":"Label","props":{"y":"94","color":"#c5c5c5","text":"参考视图：","x":"10"}},{"type":"Label","props":{"y":"133","color":"#c5c5c5","text":"页面宽度：","var":"widthTip","x":"10"}},{"type":"Label","props":{"y":"173","color":"#c5c5c5","text":"页面高度：","var":"heightTip","x":"10"}},{"type":"Label","props":{"y":"211","wordWrap":"true","text":"参考背景：","width":"72","height":"40","color":"#c5c5c5","x":"10"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"8","selectedIndex":"0","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"451","skin":"comp/combo_32.png","sizeGrid":"0,20,0,3","labels":"View,Dialog","var":"typeDrop","x":"83"}},{"type":"TextInput","props":{"height":"32","y":"47","width":"451","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"83"}},{"type":"TextInput","props":{"sizeGrid":"0,3,0,3","y":"86","width":"300","height":"32","color":"#c5c5c5","skin":"comp/input_32.png","var":"imgTxt","x":"83"}},{"type":"TextInput","props":{"height":"32","y":"126","text":"600","width":"339","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"widthTxt","x":"83"}},{"type":"TextInput","props":{"height":"32","y":"166","text":"400","width":"339","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"heightTxt","x":"83"}},{"type":"ColorPicker","props":{"scaleX":"0.5","y":"211","scaleY":"0.5","selectedcolor":"#dddddd","skin":"comp/color.png","var":"bgColorPicker","x":"83"}},{"type":"Label","props":{"y":"94","wordWrap":"true","text":"(可选，参考背景)","height":"40","color":"#c5c5c5","x":"435"}},{"type":"Label","props":{"y":"213","text":"(可选，设计面板的背景颜色)","width":"352","height":"18","color":"#c5c5c5","x":"105"}},{"type":"Button","props":{"y":"86","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","width":"40","height":"32","skin":"comp/btn_browser.png","var":"selectBtn","label":"选择","x":"383"}},{"type":"CheckBox","props":{"y":"138","var":"widthCheck","label":"仅作为参考宽度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"428"}},{"type":"CheckBox","props":{"y":"178","var":"heightCheck","label":"仅作为参考高度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"428"}}],"props":{"height":"250","scenecolor":"#dddddd","width":"550"}};}
		]);
		return AddPageUI;
	})(View)


	//class laya.editor.ui.page.AddParticleUI extends laya.ui.View
	var AddParticleUI=(function(_super){
		function AddParticleUI(){
			this.nameTxt=null;
			this.typeDrop=null;
			AddParticleUI.__super.call(this);
		}

		__class(AddParticleUI,'laya.editor.ui.page.AddParticleUI',_super);
		var __proto=AddParticleUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddParticleUI.uiView);
		}

		__static(AddParticleUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Label","props":{"y":"54","color":"#c5c5c5","text":"粒子名称：","x":"10"}},{"type":"TextInput","props":{"height":"32","y":"47","width":"451","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"83"}},{"type":"Label","props":{"y":"16","color":"#c5c5c5","text":"粒子类型：","x":"10"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"8","selectedIndex":"0","var":"typeDrop","width":"451","sizeGrid":"0,20,0,3","labels":"重力模式,半径模式","skin":"comp/combo_32.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"83"}}],"props":{"height":"250","scenecolor":"#dddddd","width":"550"}};}
		]);
		return AddParticleUI;
	})(View)


	//class laya.editor.ui.page.AddScriptUI extends laya.ui.View
	var AddScriptUI=(function(_super){
		function AddScriptUI(){
			this.nameTxt=null;
			this.typeDrop=null;
			this.classTxt=null;
			AddScriptUI.__super.call(this);
		}

		__class(AddScriptUI,'laya.editor.ui.page.AddScriptUI',_super);
		var __proto=AddScriptUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddScriptUI.uiView);
		}

		__static(AddScriptUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Label","props":{"y":"54","color":"#c5c5c5","text":"脚本名称：","x":"10"}},{"type":"TextInput","props":{"height":"32","y":"47","width":"451","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"83"}},{"type":"Label","props":{"y":"16","color":"#c5c5c5","text":"脚本类型：","x":"10"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"8","selectedIndex":"0","var":"typeDrop","width":"451","sizeGrid":"0,20,0,3","labels":"扩展脚本,附加脚本","skin":"comp/combo_32.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"83"}},{"type":"Label","props":{"y":"94","color":"#c5c5c5","text":"运行类名：","x":"10"}},{"type":"TextInput","props":{"height":"32","y":"87","width":"340","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"classTxt","x":"83"}},{"type":"Label","props":{"y":"91","wordWrap":"true","text":"(运行时的类名，比如game.view.MyScript)","width":"117","height":"41","color":"#c5c5c5","x":"433"}}],"props":{"height":"250","scenecolor":"#dddddd","width":"550"}};}
		]);
		return AddScriptUI;
	})(View)


	//class laya.editor.ui.prop.PropGroupUI extends laya.ui.View
	var PropGroupUI=(function(_super){
		function PropGroupUI(){
			this.groubBar=null;
			this.groupLabl=null;
			this.arrowClip=null;
			this.groupBox=null;
			PropGroupUI.__super.call(this);
		}

		__class(PropGroupUI,'laya.editor.ui.prop.PropGroupUI',_super);
		var __proto=PropGroupUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PropGroupUI.uiView);
		}

		__static(PropGroupUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"y":"0","right":"0","width":"100","left":"0","mouseEnabled":"true","height":"24","skin":"view/bg_bar.png","var":"groubBar","x":"0"}},{"type":"Label","props":{"y":"3","text":"label","mouseChildren":"false","mouseEnabled":"false","color":"#efeded","var":"groupLabl","x":"19"}},{"type":"Clip","props":{"x":"5","y":"4","mouseChildren":"false","mouseEnabled":"false","height":"12","skin":"comp/clip_tree.png","var":"arrowClip","width":"11","clipY":"2"}},{"type":"Box","child":[{"type":"Button","props":{"sizeGrid":"0,4,0,4","skin":"comp/button.png","labelColors":"#dddddd,#dddddd,#dddddd","label":"label"}}],"props":{"x":"0","y":"24","right":"0","left":"0","var":"groupBox","mouseEnabled":"true"}}],"props":{"scenecolor":"#dddddd","hitTestPrior":"true"}};}
		]);
		return PropGroupUI;
	})(View)


	//class laya.editor.ui.QuickToolUI extends laya.ui.View
	var QuickToolUI=(function(_super){
		function QuickToolUI(){
			QuickToolUI.__super.call(this);
		}

		__class(QuickToolUI,'laya.editor.ui.QuickToolUI',_super);
		var __proto=QuickToolUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(QuickToolUI.uiView);
		}

		__static(QuickToolUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"新建页面文件夹","name":"addFolder","skin":"view/folder_add.png","x":"20"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"新建页面","name":"addPage","skin":"view/page_add.png","x":"54"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"保存页面","name":"save","skin":"view/save.png","x":"94"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"保存所有页面","name":"saveAll","skin":"view/saveall.png","x":"128"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"恢复","name":"back","skin":"view/back.png","x":"168"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"撤销恢复","name":"reBack","skin":"view/re.png","x":"202"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"缩小视图","name":"zoomIn","skin":"view/zoom_in.png","x":"242"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"放大视图","name":"zoomOut","skin":"view/zoom_out.png","x":"276"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"恢复视图","name":"zoomBack","skin":"view/zoom_back.png","x":"310"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"刷新资源及页面","name":"refresh","skin":"view/res.png","x":"354"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"发布","name":"publish","skin":"view/publish.png","x":"388"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"左对齐","name":"alignLeft","skin":"view/align_left.png","x":"432"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"垂直居中对齐","name":"alignCenter","skin":"view/align_center.png","x":"466"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"右对齐","name":"alignRight","skin":"view/align_right.png","x":"500"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"顶部对齐","name":"alignTop","skin":"view/align_top.png","x":"534"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"水平居中对齐","name":"alignMiddle","skin":"view/align_middle.png","x":"566"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"底部对齐","name":"alignbottom","skin":"view/align_bottom.png","x":"600"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"水平平均间隔","name":"spaceH","skin":"view/space_h.png","x":"644"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"垂直平均间隔","name":"spaceV","skin":"view/space_v.png","x":"678"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到左上角","name":"topLeft","skin":"view/move_top_left.png","x":"722"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到右上角","name":"topRight","skin":"view/move_top_right.png","x":"756"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到水平居中","name":"center","skin":"view/center.png","x":"850"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到垂直居中","name":"middle","skin":"view/middle.png","x":"884"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到左下角","name":"bottomLeft","skin":"view/move_bottom_left.png","x":"786"}},{"type":"Button","props":{"stateNum":"2","y":"5","toolTip":"移动到右下角","name":"bottomRight","skin":"view/move_bottom_right.png","x":"816"}},{"type":"Button","props":{"stateNum":"2","y":"4","toolTip":"相对原点居中","name":"tomiddle","skin":"view/tomiddle.png","x":"915"}}],"props":{"height":"32","hitTestPrior":"true","scenecolor":"#dddddd","title":"工具","width":"900"}};}
		]);
		return QuickToolUI;
	})(View)


	//class laya.editor.ui.template.TemplateItemUI extends laya.ui.View
	var TemplateItemUI=(function(_super){
		function TemplateItemUI(){
			this.imgBg=null;
			this.tLabel=null;
			TemplateItemUI.__super.call(this);
		}

		__class(TemplateItemUI,'laya.editor.ui.template.TemplateItemUI',_super);
		var __proto=TemplateItemUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(TemplateItemUI.uiView);
		}

		__static(TemplateItemUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"bottom":"0","left":"0","sizeGrid":"5,5,5,5","top":"0","skin":"view/bg_content.png","right":"0"}},{"type":"Image","props":{"y":"8","bottom":"15","left":"2","top":"2","skin":"comp/blank.png","right":"2","var":"imgBg","x":"8"}},{"type":"Image","props":{"sizeGrid":"5,5,5,5","y":"60","width":"74","left":"0","height":"20","skin":"view/bg_content.png","right":"0","x":"0"}},{"type":"Label","props":{"y":"61","text":"控件名","width":"65","left":"5","align":"center","height":"18","color":"#dddddd","var":"tLabel","right":"5","x":"7"}}],"props":{"height":"80","scenecolor":"#dddddd","width":"80"}};}
		]);
		return TemplateItemUI;
	})(View)


	//class laya.editor.ui.timeline.PlayControlUI extends laya.ui.View
	var PlayControlUI=(function(_super){
		function PlayControlUI(){
			this.play=null;
			this.next=null;
			this.toEndPos=null;
			this.stop=null;
			this.toBeginPos=null;
			this.pre=null;
			PlayControlUI.__super.call(this);
		}

		__class(PlayControlUI,'laya.editor.ui.timeline.PlayControlUI',_super);
		var __proto=PlayControlUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PlayControlUI.uiView);
		}

		__static(PlayControlUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"播放","mouseEnabled":"true","name":"play","scaleY":"0.5","skin":"play/btn_play.png","var":"play","x":"50"}},{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"前进","mouseEnabled":"true","name":"next","scaleY":"0.5","skin":"play/btn_forward.png","var":"next","x":"72"}},{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"跳到末尾","mouseEnabled":"true","name":"toEndPos","scaleY":"0.5","skin":"play/btn_end.png","var":"toEndPos","x":"94"}},{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"停止","mouseEnabled":"true","name":"stop","scaleY":"0.5","skin":"play/btn_stop.png","var":"stop","x":"50"}},{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"跳到开始","mouseEnabled":"true","name":"toBeginPos","scaleY":"0.5","skin":"play/btn_begin.png","var":"toBeginPos","x":"6"}},{"type":"Button","props":{"scaleX":"0.5","y":"4","toolTip":"后退","mouseEnabled":"true","name":"pre","scaleY":"0.5","skin":"play/btn_back.png","var":"pre","x":"28"}}],"props":{"height":"34","scenecolor":"#dddddd","width":"123"}};}
		]);
		return PlayControlUI;
	})(View)


	//class laya.editor.ui.timeline.TimeGridUI extends laya.ui.View
	var TimeGridUI=(function(_super){
		function TimeGridUI(){
			this.bgPic=null;
			TimeGridUI.__super.call(this);
		}

		__class(TimeGridUI,'laya.editor.ui.timeline.TimeGridUI',_super);
		var __proto=TimeGridUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(TimeGridUI.uiView);
		}

		__static(TimeGridUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"183","skin":"view/bg_panel4.png","var":"bgPic","x":"202"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return TimeGridUI;
	})(View)


	//class laya.editor.ui.UIViewerUI extends laya.ui.View
	var UIViewerUI=(function(_super){
		function UIViewerUI(){
			this.viewStack=null;
			this.designView=null;
			this.codeView=null;
			this.scaleInfo=null;
			this.compInfo=null;
			this.typeBtn=null;
			UIViewerUI.__super.call(this);
		}

		__class(UIViewerUI,'laya.editor.ui.UIViewerUI',_super);
		var __proto=UIViewerUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(UIViewerUI.uiView);
		}

		__static(UIViewerUI,
		['uiView',function(){return this.uiView={"type":"View","child":[{"type":"Image","props":{"y":"-62","bottom":"0","left":"0","sizeGrid":"4,4,4,4","top":"0","skin":"view/bg_panel.png","right":"0","x":"482"}},{"type":"ViewStack","child":[{"type":"Box","props":{"name":"item0","var":"designView","width":"600","left":"2","height":"280","top":"2","bottom":"2","right":"2"}},{"type":"TextArea","props":{"name":"item1","text":"TextArea","top":"2","color":"#8080ff","fontSize":"14","var":"codeView","leading":"10","x":"563","y":"445","bottom":"30","multiline":"true","left":"2","font":"Consolas","right":"2","padding":"5,5,5,5"}}],"props":{"y":"2283","right":"0","left":"0","mouseEnabled":"true","top":"0","var":"viewStack","bottom":"28","x":"82"}},{"type":"Image","props":{"y":"387","bottom":"0","left":"0","mouseEnabled":"true","sizeGrid":"0,4,0,4","skin":"view/bg_panel_bar.png","right":"0","x":"5"}},{"type":"Label","props":{"y":"378","var":"scaleInfo","width":"102","mouseEnabled":"false","align":"right","height":"20","color":"#333333","right":"10","bottom":"0","x":"488"}},{"type":"Label","props":{"text":"label111","color":"#9f9f9f","bottom":"0","x":"35","y":"373","wordWrap":"false","var":"compInfo","width":"359","left":"35","align":"left","height":"22","valign":"center","padding":"0,10,0,10"}},{"type":"Image","props":{"y":"378","width":"14","left":"15","height":"14","skin":"comp/infoicon.png","bottom":"8","x":"4"}},{"type":"Clip","props":{"y":"379","index":"0","bottom":"5","width":"70","x":"420","height":"18","skin":"view/codeswitch.png","var":"typeBtn","right":"110","clipY":"2"}}],"props":{"height":"400","hitTestPrior":"true","width":"600"}};}
		]);
		return UIViewerUI;
	})(View)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.group.GroupList extends laya.ui.Panel
	var GroupList=(function(_super){
		function GroupList(){
			this._groups=null;
			GroupList.__super.call(this);
			this.vScrollBarSkin="comp/vscroll.png";
			this.content.mouseEnabled=true;
		}

		__class(GroupList,'laya.editor.view.group.GroupList',_super);
		var __proto=GroupList.prototype;
		__proto.setGroups=function(groups){
			this.clearPreGroups();
			this._groups=groups;
			var i=0,len=0;
			var tGroup;
			len=groups.length;
			for (i=0;i < len;i++){
				tGroup=groups[i];
				tGroup.on("UIChange",this,this.freshUI);
				this.addChild(tGroup);
			}
			this.callLater(this.freshUI);
		}

		__proto.clearPreGroups=function(){
			if (!this._groups)return;
			var groups=this._groups;
			var i=0,len=0;
			var tGroup;
			len=groups.length;
			for (i=0;i < len;i++){
				tGroup=groups[i];
				tGroup.off("UIChange",this,this.freshUI);
				tGroup.removeSelf();
			}
		}

		__proto.changeSize=function(){
			_super.prototype.changeSize.call(this);
			this.callLater(this.freshUI);
		}

		__proto.freshUI=function(){
			var _panel=this;
			var y=0;
			for (var i=0,n=_panel.numChildren;i < n;i++){
				var item=_panel.getChildAt(i);
				if (item){
					item.y=y;
					y=y+item.height+5;
				}
			}
			Laya.timer.once(200,this,this.freshPanel,[_panel]);
		}

		__proto.freshPanel=function(_panel){
			_panel.refresh();
			this.event("UIChange");
		}

		return GroupList;
	})(Panel)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-6 上午9:42:46
	*/
	//class laya.ide.ui.ListBase extends laya.ui.List
	var ListBase$1=(function(_super){
		function ListBase(){
			ListBase.__super.call(this);
		}

		__class(ListBase,'laya.ide.ui.ListBase',_super,'ListBase$1');
		var __proto=ListBase.prototype;
		__proto.scrollToIndex=function(value){
			if (this.selectEnable && this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				if (value < this._startIndex || (value+numX > this._startIndex+this.repeatX *this.repeatY)){
					this.scrollTo(value);
				}
			}
		}

		__getset(0,__proto,'selectedIndex',_super.prototype._$get_selectedIndex,function(value){
			if (this._selectedIndex !=value){
				this._selectedIndex=value;
				this.changeSelectStatus();
				this.event("change");
				this.selectHandler && this.selectHandler.runWith(value);
			}
			if (this.selectEnable && this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				if (value < this._startIndex || (value+numX > this._startIndex+this.repeatX *this.repeatY)){
					this.scrollTo(value);
				}
			}
		});

		return ListBase;
	})(List)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-3-1 下午8:14:05
	*/
	//class laya.ide.hook.ViewHook extends laya.ui.View
	var ViewHook=(function(_super){
		function ViewHook(){
			ViewHook.__super.call(this);
		}

		__class(ViewHook,'laya.ide.hook.ViewHook',_super);
		var __proto=ViewHook.prototype;
		/**
		*@private
		*通过视图数据创建视图。
		*@param uiView 视图数据信息。
		*/
		__proto.createView1=function(uiView){
			ViewHook.adptUIView(uiView,true);
			if (uiView.animations && !this._idMap)this._idMap={};
			View.createComp(uiView,this,this);
			if (uiView.animations){
				var anilist=[];
				var animations=uiView.animations;
				var i=0,len=animations.length;
				var tAni;
				var tAniO;
				for (i=0;i < len;i++){
					tAni=new FrameClip();
					tAniO=animations[i];
					tAni._setUp(this._idMap,tAniO);
					this[tAniO.name]=tAni;
					tAni._setControlNode(this);
					switch (tAniO.action){
						case 1:
							tAni.play(0,false);
							break ;
						case 2:
							tAni.play(0,true);
							break ;
						}
					anilist.push(tAni);
				}
				this._aniList=anilist;
			}
			if (this._width > 0 && uiView.props.hitTestPrior==null && !this.mouseThrough)this.hitTestPrior=true;
		}

		ViewHook.init=function(){
			if(!ViewHook.I){
				ViewHook.I=new ViewHook();
				View["prototype"]["createView"]=ViewHook.I.createView1;
				View["setCompValue"]=ViewHook.setCompValue;
			}
		}

		ViewHook.setCompValue=function(comp,prop,value,view){
			if (prop==="var" && view){
				view[value]=comp;
			}
			else if (prop==="x" || prop==="y" || prop==="width" || prop==="height" || (typeof (comp[prop])=='number')){
				comp[prop]=parseFloat(value);
			}
			else {
				comp[prop]=(value==="true" ? true :(value==="false" ? false :value))
			}
		}

		ViewHook.adptUIView=function(uiView,isRoot){
			(isRoot===void 0)&& (isRoot=false);
			if(!((typeof uiView=='object')))return;
			if(uiView["adpted"])return;
			if(!Sys.langPack)return;
			var key;
			var tV;
			for(key in uiView){
				tV=uiView[key];
				if((typeof tV=='string')){
					uiView[key]=Sys.lang(tV);
					continue ;
				}
				if((tV instanceof Array)){
					var i=0,len=0;
					len=tV.length;
					for(i=0;i<len;i++){
						ViewHook.adptUIView(tV[i]);
					}
				};
				if((typeof tV=='object'))ViewHook.adptUIView(tV);
			}
			if(isRoot)
				uiView["adpted"]=true;
		}

		ViewHook.I=null
		ViewHook.__init$=function(){
			ViewHook.init();
		}

		return ViewHook;
	})(View)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-18 下午2:46:28
	*/
	//class laya.ide.managers.HookedView extends laya.ui.View
	var HookedView=(function(_super){
		function HookedView(){
			HookedView.__super.call(this);
		}

		__class(HookedView,'laya.ide.managers.HookedView',_super);
		HookedView.recordConfig=function(rst){
			if(!rst)rst={};
			ObjectTools.clearObj(rst);
			var i=0,len=0;
			len=HookedView.StyleVars.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=HookedView.StyleVars[i];
				rst[tKey]=StyleConsts$1[tKey];
			}
			console.log(ObjectTools.getJsonString(rst));
			return rst;
		}

		HookedView.initStylesByObj=function(configO){
			var i=0,len=0;
			len=HookedView.StyleVars.length;
			var tKey;
			for(i=0;i<len;i++){
				tKey=HookedView.StyleVars[i];
				if(configO.hasOwnProperty(tKey))
					StyleConsts$1[tKey]=configO[tKey];
			}
		}

		HookedView.initByStyleFile=function(path){
			HookedView.initStylesByObj(HookedView.DefaultConfigO);
			if(!FileTools.exist(path))return;
			var config;
			try{
				config=FileManager.readJSONFile(path);
				HookedView.initStylesByObj(config);
				}catch(e){
				console.log("initStyleFileFail:",path);
			}
			HookedView.hookVars();
		}

		HookedView.hookView=function(){
			HookedView.recordConfig(HookedView.DefaultConfigO);
			View["createComp"]=HookedView.createCompT;
		}

		HookedView.hookVars=function(){
			laya.ide.managers.HookedView.registVar("Label","color","#c5c5c5",StyleConsts$1.DefaultTextColor);
			laya.ide.managers.HookedView.registVar("Label","color","#00cc00",StyleConsts$1.PanelTipTextColor);
			laya.ide.managers.HookedView.registVar("Label","color","#cccc00",StyleConsts$1.PanelTipTextColor2);
			laya.ide.managers.HookedView.registVar("TextInput","color","#c5c5c5",StyleConsts$1.TextInputColor);
			laya.ide.managers.HookedView.registVar("TextArea","color","#c5c5c5",StyleConsts$1.TextInputColor);
			laya.ide.managers.HookedView.registVar("ComboBox","labelColors","#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5",StyleConsts$1.ComboBoxLabelColors);
			laya.ide.managers.HookedView.registVar("CheckBox","labelColors","#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5",StyleConsts$1.CheckBoxLabelColors);
			laya.ide.managers.HookedView.registVar("Button","labelColors","#efefef,#ffffff,#c5c5c5,#c5c5c5",StyleConsts$1.ButtonLabelColors);
			laya.ide.managers.HookedView.registVar("Button","labelColors","#c5c5c5,#c5c5c5,#c5c5c5",StyleConsts$1.BroswerButtonLabelColors);
		}

		HookedView.InitDefaultStyles=function(){
			return;
			StyleConsts$1.DefaultTextColor="#ff0000";
			StyleConsts$1.TextInputColor="#ff0000,#ff0000,#ff0000,#ff0000";
			StyleConsts$1.LayoutTabTitleBtnColor="#ff0000,#ff0000,#ff0000,#ff0000";
			StyleConsts$1.CheckBoxLabelColors="#ff0000,#ff0000,#ff0000,#ff0000";
			StyleConsts$1.ButtonLabelColors="#ff0000,#ff0000,#ff0000,#ff0000";
			StyleConsts$1.BroswerButtonLabelColors="#ff0000,#ff0000,#ff0000,#ff0000";
			StyleConsts$1.PropPanelTitleColor="#ff0000";
			StyleConsts$1.FolderTxtColor="#ff0000";
			StyleConsts$1.ItemTxtColor="#ff0000";
			StyleConsts$1.ItemSelectColor="#ff0000";
			StyleConsts$1.MenuButtonLabelColor="#ff0000";
			StyleConsts$1.SkinBtnLabelColor="#ff0000";
			StyleConsts$1.TextInputColorDefault="#ff0000";
			StyleConsts$1.PanelTipTextColor="#ff0000";
			StyleConsts$1.PanelTipTextColor2="#ff0000";
			StyleConsts$1.SelectItemInfoColor="#ff0000";
			HookedView.recordConfig(null);
		}

		HookedView.registVar=function(type,prop,preValue,newValue){
			if(!HookedView.ConstVars[type])HookedView.ConstVars[type]={};
			if(!HookedView.ConstVars[type][prop])HookedView.ConstVars[type][prop]={};
			HookedView.ConstVars[type][prop][preValue]=newValue;
		}

		HookedView.hasVar=function(type,prop,preValue){
			if(!HookedView.ConstVars[type])return false;
			if(!HookedView.ConstVars[type][prop])return false;
			if(!HookedView.ConstVars[type][prop].hasOwnProperty(preValue))return false;
			return true;
		}

		HookedView.getVar=function(type,prop,preValue){
			return HookedView.ConstVars[type][prop][preValue];
		}

		HookedView.createCompT=function(uiView,comp,view){
			comp=comp || View.getCompInstance(uiView);
			var child=uiView.child;
			if (child){
				for (var i=0,n=child.length;i < n;i++){
					var node=child[i];
					if (comp.hasOwnProperty("itemRender")&& node.props.name=="render"){
						(comp).itemRender=node;
						}else {
						comp.addChild(View.createComp(node,null,view));
					}
				}
			};
			var props=uiView.props;
			for (var prop in props){
				var value=props[prop];
				if(HookedView.hasVar(uiView.type,prop,value)){
					value=HookedView.getVar(uiView.type,prop,value);
				}
				View["setCompValue"](comp,prop,value,view);
			}
			if (Laya.__typeof(comp,'laya.ui.IItem')){
				(comp).initItems();
			}
			if (uiView.compId&&view&&view["_idMap"]){
				view["_idMap"][uiView.compId]=comp;
			}
			return comp;
		}

		HookedView.DefaultConfigO={};
		HookedView.ConstVars={};
		__static(HookedView,
		['StyleVars',function(){return this.StyleVars=
			[
			"DefaultTextColor",
			"TextInputColor",
			"LayoutTabTitleBtnColor",
			"CheckBoxLabelColors",
			"ButtonLabelColors",
			"BroswerButtonLabelColors",
			"PropPanelTitleColor",
			"FolderTxtColor",
			"ItemTxtColor",
			"ItemSelectColor",
			"MenuButtonLabelColor",
			"SkinBtnLabelColor",
			"TextInputColorDefault",
			"PanelTipTextColor",
			"PanelTipTextColor2",
			"SelectItemInfoColor",
			"RuleGridLineColor",
			"RuleGridTextColor",
			"TimelineTitleTxtColor",
			"ComboBoxLabelColors",
			"RuleRangeColor"];}
		]);
		return HookedView;
	})(View)


	/**
	*节点树基类
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-25 下午2:21:31
	*/
	//class laya.ide.ui.NodeTree extends laya.ui.Tree
	var NodeTree$1=(function(_super){
		function NodeTree(){
			this._treeData=null;
			this.arrFilterFun=null;
			NodeTree.__super.call(this);
			this.spaceLeft=15;
		}

		__class(NodeTree,'laya.ide.ui.NodeTree',_super,'NodeTree$1');
		var __proto=NodeTree.prototype;
		// list.spaceY=2;
		__proto.refreshList=function(){
			this._list.array=this.getArray();
		}

		__proto.selectByCompId=function(compId){
			var arr;
			arr=this.list.array;
			var i=0,len=0;
			len=arr.length;
			var tItem;
			for(i=0;i<len;i++){
				tItem=arr[i];
				if(tItem.compId==compId){
					this.list.selectedIndex=i;
					return;
				}
			}
		}

		__proto.setTreeData=function(treeData){
			this._treeData=treeData;
			var treeArr;
			treeArr=treeData.getTreeArr();
			if(this.arrFilterFun!=null){
				this.array=this.arrFilterFun(treeArr);
				}else{
				this.array=treeArr;
			}
		}

		// trace("treeArr:",treeArr);
		__proto.getDepth=function(item,num){
			(num===void 0)&& (num=0);
			if(!this._treeData){
				return _super.prototype.getDepth.call(this,item,num);
			};
			var parent;
			parent=this._treeData.getNodeParent(item);
			if (parent==null)return num;
			else return this.getDepth(parent,num+1);
		}

		/**
		*@private
		*获取项对象的上一级的打开状态。
		*@param item
		*@return
		*/
		__proto.getParentOpenStatus=function(item){
			if(!this._treeData){
				return _super.prototype.getParentOpenStatus.call(this,item);
			};
			var parent=this._treeData.getNodeParent(item);
			if (parent==null){
				return true;
				}else {
				if (parent.isOpen){
					if (this._treeData.getNodeParent(parent)!=null)return this.getParentOpenStatus(parent);
					else return true;
					}else {
					return false;
				}
			}
		}

		/**
		*@private
		*判断两个项对象在树结构中的父节点是否相同。
		*@param item1 项对象。
		*@param item2 项对象。
		*@return
		*/
		__proto.isSameParent=function(item1,item2){
			if(!this._treeData){
				return _super.prototype.isSameParent.call(this,item1,item2);
			};
			var parent1;
			var parent2;
			parent1=this._treeData.getNodeParent(item1);
			parent2=this._treeData.getNodeParent(item2);
			if (parent1==null && parent2==null)return true;
			else if (parent1==null || parent2==null)return false
			else {
				if (parent1.label==parent2.label)return this.isSameParent(parent1,parent2);
				else return false;
			}
		}

		__proto.isSameNode=function(tarA,tarB){
			if(!tarA)return false;
			if(!tarB)return false;
			if(tarA==tarB)return true;
			if(tarA.compId){
				if(tarA.compId==tarB.compId)return true;
				return false;
			}
			return tarA.label==tarB.label;
		}

		/**
		*@private
		*处理数据项的打开状态。
		*/
		__proto.parseOpenStatus=function(oldSource,newSource){
			for (var i=0,n=newSource.length;i < n;i++){
				var newItem=newSource[i];
				if (newItem.isDirectory){
					for (var j=0,m=oldSource.length;j < m;j++){
						var oldItem=oldSource[j];
						if (oldItem.isDirectory && this.isSameNode(oldItem,newItem)){
							newItem.isOpen=oldItem.isOpen;
							break ;
						}
					}
				}
			}
		}

		NodeTree.TreeSpaceLeft=15;
		return NodeTree;
	})(Tree)


	//class laya.editor.core.UIView extends laya.editor.core.UIBox
	var UIView=(function(_super){
		function UIView(){
			this._viewLayer=null;
			UIView.__super.call(this);
			this.addChild(this._viewLayer=new UIBox());
			this._viewLayer.mouseEnabled=true;
		}

		__class(UIView,'laya.editor.core.UIView',_super);
		var __proto=UIView.prototype;
		/**创建视图*/
		__proto.createView=function(xml){
			if(this._viewLayer)
				this._viewLayer.removeSelf();
			if(this.hasClassByType(xml.type)){
				this._viewLayer=this.createComp(xml,null,{});
				}else{
				this._viewLayer=this.createComp(xml,new UIBox(),{});
			};
			var n=0;
			n=this.numChildren>0?1:0;
			this._viewLayer["disableLayout"]=true;
			this.addChildAt(this._viewLayer,n);
			this._viewLayer.mouseEnabled=true;
		}

		__proto.createViewCC=function(xml){
			this._viewLayer.removeChildren();
			this._viewLayer.resetState();
			this.createComp(xml,this._viewLayer,{});
		}

		/**根据容器创建，重新创建子对象，容器保持不变*/
		__proto.createByBox=function(box,xml){
			var map=this.getLayersInfo(xml);
			box.comXml=xml;
			var sprite=box;
			sprite.removeChildren();
			var list=xml.child;
			for (var j=0,n=list.length;j < n;j++){
				var node=list[j];
				var child=this.createComp(node,null,map);
				child && sprite.addChild(child);
			}
			return sprite;
		}

		__proto.getLayersInfo=function(xml){
			var obj={};
			return obj;
		}

		/**创建组件*/
		__proto.createComp=function(xml,comp,visibleMap){
			var layer=xml.layer;
			if (layer){
				if (visibleMap[layer]==0){
					return null;
				}
			}
			comp=comp || UIView.getCompInstance(xml);
			if (comp==null)return null;
			comp.mouseEnabled=true;
			var map=this.getLayersInfo(xml);
			var child;
			var list=xml.child;
			var addChilds;
			addChilds=[];
			if (list){
				for (var j=0,n=list.length;j < n;j++){
					var node=list[j];
					if (Laya.__typeof(comp,'laya.ui.IRender')&& node.props&&(node.props.name=="render"||node.props["renderType"]=="render")){
						child=this.createComp(node,null,map);
						if (child){
							child.name="render";
							comp.addChild(child);
						}
						try {
							comp["itemRender"]=node;
						}catch (e){}
						}else if(node){
						child=this.createComp(node,null,map);
						if (child){
							comp.addChild(child);
							if(xml.type=="Graphic"||node.type=="Graphic"||ClassUtils.isDrawType(node.type)){
								addChilds.push(child);
							}
							if(node.props["renderType"]=="mask"){
								comp.mask=child;
								child.removeSelf();
							}
						}
					}
				}
			}
			UIView.addGraphicsToSp(addChilds,comp);
			var props=xml.props;
			if(props){
				if(props["renderType"]=="hit"||props["renderType"]=="unHit"){
					comp.alpha=0.5;
				}
			}
			if(xml.hasOwnProperty(Signs.HideSign)){
				comp[Signs.HideSign]=xml[Signs.HideSign];
				comp.visible=comp.visible&&!xml[Signs.HideSign];
			}
			if(xml.hasOwnProperty(Signs.LockSign)){
				comp[Signs.LockSign]=xml[Signs.LockSign];
			};
			var prop,value;
			for (prop in props){
				value=props[prop];
				if (prop !="visible"){
					try {
						if (prop==="width" || prop==="height" || prop==="x" || prop==="y" || (typeof (comp[prop])=='number')){
							comp[prop]=Number(value);
							}else {
							comp[prop]=(value==="true" ? true :(value==="false" ? false :value))
						}
						}catch (e){
						var msg=Sys.lang("对[{0}]的{1}属性赋值{2}时遇错误：",xml.type,prop,value)+"\n"+e.message;
						alert(msg);
					}
				}
			};
			var compType=xml.type;
			var prefabO;
			prefabO=PreFabManager.I.getPreFabByNode(xml);
			if (compType !="View" && compType !="Dialog"){
				if (compType !="UIView"){
					var skinLabel=UIConfigManager.getCompSkinLabel(compType);
					var skin;
					if(xml.props)skin=xml.props[skinLabel];
					if(prefabO&&prefabO.props&&prefabO.props[skinLabel]){
						skin=prefabO.props[skinLabel];
					}
					if (skin){
						var defaultProps=ResStyleManager.getPropArr(skin);
						UIView.setDefaultValue(comp,xml,defaultProps);
					}
					}else {
					var source=xml.source;
					if (source){
						defaultProps=ResStyleManager.getPropArrByPropStr(PageStyleManager.getPageProps(source));
						UIView.setDefaultValue(comp,xml,defaultProps);
					}
				}
			}
			PreFabManager.I.insertPrefabVar(xml,comp);
			if (comp["initItems"])(comp).initItems();
			return comp;
		}

		__proto.hasClassByType=function(type){
			if(!UIConfigManager.getCompProp(type,"className"))return false;
			return Utils$1.getClass(UIConfigManager.getCompProp(type,"className"))?true:false;
		}

		__getset(0,__proto,'width',_super.prototype._$get_width,function(value){
			_super.prototype._$set_width.call(this,value);
			if((this._viewLayer instanceof laya.ui.View ))
				this._viewLayer.width=value;
		});

		__getset(0,__proto,'height',_super.prototype._$get_height,function(value){
			_super.prototype._$set_height.call(this,value);
			if((this._viewLayer instanceof laya.ui.View ))
				this._viewLayer.height=value;
		});

		UIView.setDefaultValue=function(comp,xml,props){
			for (var i=0,n=props.length;i < n;i++){
				var a=props[i].split("=");
				if (a.length==2){
					var key=a[0];
					var val=a[1];
					if (xml.props[key]==null){
						try {
							val=ObjectTools.getAutoValue(val);
							comp[key]=(val=="true" ? true :(val=="false" ? false :val))
							}catch (e){
							var msg=Sys.lang("对[{0}]的{1}属性赋值{2}时遇错误：",xml.name,key,val)+"\n"+e.message;
							alert(msg);
						}
					}
				}
			}
		}

		UIView.createCompS=function(xml,comp,visibleMap){
			if(UIView._createCompS_!=null){
			};
			var layer=xml.layer;
			if (layer){
				if (visibleMap[layer]==0){
					return null;
				}
			}
			comp=comp || UIView.getCompInstance(xml);
			if (comp==null)return null;
			var map={};
			var list=xml.child;
			var child;
			var addChilds;
			addChilds=[];
			if (list){
				for (var j=0,n=list.length;j < n;j++){
					var node=list[j];
					if (Laya.__typeof(comp,'laya.ui.IRender')&&node.props&& (node.props.name=="render"||node.props["renderType"]=="render")){
						child=UIView.createCompS(node,null,map);
						if (child){
							child.name="render";
							comp.addChild(child);
						}
						try {
							comp["itemRender"]=node;
						}catch (e){}
						}else if(node){
						child=UIView.createCompS(node,null,map);
						if (child){
							comp.addChild(child);
							if(xml.type=="Graphic"||node.type=="Graphic"||ClassUtils.isDrawType(node.type)){
								addChilds.push(child);
							}
						}
					}
				}
			}
			UIView.addGraphicsToSp(addChilds,comp);
			var props=xml.props;
			if(xml.hasOwnProperty(Signs.HideSign)){
				comp[Signs.HideSign]=xml[Signs.HideSign];
				comp.visible=comp.visible&&!xml[Signs.HideSign];
			}
			if(xml.hasOwnProperty(Signs.LockSign)){
				comp[Signs.LockSign]=xml[Signs.LockSign];
			};
			var prop,value;
			for (prop in props){
				value=props[prop];
				if (prop !="visible"){
					try {
						if (prop==="width" || prop==="height" || prop==="x" || prop==="y" || (typeof (comp[prop])=='number')){
							comp[prop]=Number(value);
							}else {
							comp[prop]=(value==="true" ? true :(value==="false" ? false :value))
						}
						}catch (e){
						var msg=Sys.lang("对[{0}]的{1}属性赋值{2}时遇错误：",xml.type,prop,value)+"\n"+e.message;
						alert(msg);
					}
				}
			};
			var prefabO;
			prefabO=PreFabManager.I.getPreFabByNode(xml);
			var compType=xml.type;
			if (compType !="View" && compType !="Dialog"){
				if (compType !="UIView"){
					var skinLabel=UIConfigManager.getCompSkinLabel(compType);
					var skin;
					if(xml.props)skin=xml.props[skinLabel];
					if(prefabO&&prefabO.props&&prefabO.props[skinLabel]){
						skin=prefabO.props[skinLabel];
					}
					if (skin){
						var defaultProps=ResStyleManager.getPropArr(skin);
						UIView.setDefaultValue(comp,xml,defaultProps);
					}
					}else {
					var source=xml.source;
					if (source){
						defaultProps=ResStyleManager.getPropArrByPropStr(PageStyleManager.getPageProps(source));
						UIView.setDefaultValue(comp,xml,defaultProps);
					}
				}
			}
			PreFabManager.I.insertPrefabVar(xml,comp);
			return comp;
		}

		UIView.addGraphicsToSp=function(addChilds,comp){
			if(comp.numChildren<1)return;
			try{
				var i=0,len=0;
				len=addChilds.length;
				for(i=0;i<len;i++){
					comp.setChildIndex(addChilds[len-1-i],0);
				}
			}catch(e){}
		}

		UIView.getCompInstance=function(xml){
			var name=xml.type;
			var source=xml.source;
			if (name=="UIView"){
				try {
					var sourcePath;
					sourcePath=FileManager.getPath(SystemSetting.pagesPath,source.replace(".xml","."+TypeManager.getExtension("page")));
					xml=FileManager.readJSONFile(sourcePath);
					if(TypeManager.isPreFabNodeType(xml.type)){
						if(PreFabManager.PrefabHasWrap){
							return UIView.createCompS(xml.child[0]);
							}else{
							return UIView.createCompS(xml);
						}
						}else{
						var view=new UIView();
						view.createView(xml);
						return view;
					}
					}catch (e){
					var msg=Sys.lang("创建页面嵌套时遇到错误，可能是嵌套的页面丢失或者错误 \n页面:{0}\n路径:{1}\n错误{2}",source,sourcePath,e.toString());
					Alert.show(msg);
					var classObj=Utils$1.getClass(UIConfigManager.getCompProp("Image","className"));
					var rst;
					rst=new classObj();
					rst.skin="comp/loseskin.png";
					return rst;
				}
				}else {
				try {
					classObj=Utils$1.getClass(UIConfigManager.getCompProp(name,"className"));
					return new classObj();
					}catch (e){
					msg=Sys.lang("创建[{0}]时遇到错误(手动实例一次本组件可定位错误)",name)+"\n"+e.toString();
					Alert.show(msg);
					classObj=Utils$1.getClass(UIConfigManager.getCompProp("Image","className"));
					rst=new classObj();
					rst.skin="comp/loseskin.png";
					return rst;
				}
			}
			return null;
		}

		UIView._createCompS_=null
		return UIView;
	})(UIBox)


	//class laya.editor.manager.DragBoxManager extends laya.editor.core.UIBox
	var DragBoxManager=(function(_super){
		function DragBoxManager(){
			this._selfControledDrag=[];
			DragBoxManager.__super.call(this);
			this._drags=new Dictionary();
		}

		__class(DragBoxManager,'laya.editor.manager.DragBoxManager',_super);
		var __proto=DragBoxManager.prototype;
		__proto.addDrag=function(target,type){
			if(target["setIDESelectState"]!=null){
				target["setIDESelectState"](true);
				if(this._selfControledDrag.indexOf(target)<0){
					this._selfControledDrag.push(this._selfControledDrag);
				}
				return;
			}
			this.removeDrag(target);
			this.setTargetFocusState(target,true);
			var dragBox;
			dragBox=Pool.getItem("DragBox_"+type);
			if (!dragBox){
				dragBox=new DragBox$1(type);
			}
			this.addChild(dragBox);
			dragBox.setTarget(target);
			this._drags.add(target,dragBox);
		}

		__proto.removeDrag=function(target){
			this.setTargetFocusState(target,false);
			if(target["setIDESelectState"]!=null){
				target["setIDESelectState"](false);
				if(this._selfControledDrag.indexOf(target)>=0){
					this._selfControledDrag.splice(this._selfControledDrag.indexOf(target),1);
				}
				return;
			};
			var dragBox=this._drags.getValue(target);
			if (dragBox){
				dragBox.removeSelf();
				this._drags.deleteKey(target);
				Pool.recover("DragBox_"+dragBox.type,dragBox);
			}
		}

		__proto.removeAll=function(){
			this.removeChildren();
			this._drags.reset();
			var i=0;
			var target;
			for(i=this._selfControledDrag.length-1;i>=0;i--){
				target=this._selfControledDrag[i];
				this.setTargetFocusState(target,false);
				if(target["setIDESelectState"]!=null){
					target["setIDESelectState"](false);
				}
			}
			this._selfControledDrag.length=0;
		}

		__proto.setTargetFocusState=function(target,focus){
			if(!target)return;
			if(!target["setIDEFocusState"])return;
			target["setIDEFocusState"](focus);
		}

		// trace("setFocus:",focus);
		__proto.refreshDrag=function(target){
			if(target["freshIDESelect"]!=null){
				target["freshIDESelect"]();
				return;
			};
			var dragBox=this._drags.getValue(target);
			if (dragBox){
				dragBox.refresh();
			}
		}

		return DragBoxManager;
	})(UIBox)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-6 上午9:49:47
	*/
	//class laya.ide.ui.TreeBase extends laya.ui.Tree
	var TreeBase$1=(function(_super){
		function TreeBase(){
			TreeBase.__super.call(this);
		}

		__class(TreeBase,'laya.ide.ui.TreeBase',_super,'TreeBase$1');
		var __proto=TreeBase.prototype;
		/**@inheritDoc */
		__proto.createChildren=function(){
			this.addChild(this._list=new ListBase$1());
			this._list.renderHandler=Handler.create(this,this.renderItem,null,false);
			this._list.repeatX=1;
			this._list.on("change",this,this.onListChange);
		}

		return TreeBase;
	})(Tree)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-12 上午11:35:20
	*/
	//class laya.rendercanvas.IFrameSprite extends laya.rendercanvas.HtmlSprite
	var IFrameSprite=(function(_super){
		function IFrameSprite(){
			IFrameSprite.__super.call(this);
		}

		__class(IFrameSprite,'laya.rendercanvas.IFrameSprite',_super);
		var __proto=IFrameSprite.prototype;
		__proto.createHtml=function(){
			this.div=Browser.createElement("iframe");
			this.div.style.border="0px";
		}

		__proto.setUrl=function(path){
			this.div.src=path;
		}

		return IFrameSprite;
	})(HtmlSprite)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-9 下午2:22:33
	*/
	//class laya.rendercanvas.JSPlugin extends laya.rendercanvas.HtmlSprite
	var JSPlugin=(function(_super){
		function JSPlugin(){
			this.title="我是插件";
			JSPlugin.__super.call(this);
		}

		__class(JSPlugin,'laya.rendercanvas.JSPlugin',_super);
		var __proto=JSPlugin.prototype;
		__proto.show=function(){
			LayoutRecManager.showPanelToStage(this);
		}

		__proto.close=function(){
			LayoutRecManager.removePanel(this);
		}

		JSPlugin.loadPlugin=function(plugin){
			(plugin===void 0)&& (plugin="testplugin");
			var htmlSp;
			var uiFile;
			uiFile=FileManager.readTxtFile(FileManager.getAppPath("h5/plugins/"+plugin+"/ui.div"));
			var jsFile;
			jsFile=FileManager.readTxtFile(FileManager.getAppPath("h5/plugins/"+plugin+"/code.js"));
			htmlSp=new JSPlugin();
			htmlSp.setHtmlTxt(uiFile);
			htmlSp.title=plugin;
			eval(jsFile);
			window.tPlugin.setUI(htmlSp.div);
			return htmlSp;
		}

		return JSPlugin;
	})(HtmlSprite)


	//class laya.editor.ui.comp.AlertUI extends laya.ui.Dialog
	var AlertUI=(function(_super){
		function AlertUI(){
			this.titleLbl=null;
			this.msgLbl=null;
			AlertUI.__super.call(this);
		}

		__class(AlertUI,'laya.editor.ui.comp.AlertUI',_super);
		var __proto=AlertUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AlertUI.uiView);
		}

		__static(AlertUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"180","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"397","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"提示","color":"#c5c5c5","fontSize":"14","var":"titleLbl","x":"28"}},{"type":"Label","props":{"text":"确认内容","mouseEnabled":"false","color":"#c5c5c5","var":"msgLbl","multiline":"true","x":"43","y":"66","wordWrap":"true","width":"364","align":"center","height":"56","isHtml":"true","mouseChildren":"false"}},{"type":"Button","props":{"name":"sure","label":"确定","sizeGrid":"0,4,0,4","y":"123","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"182"}}],"props":{"height":"180","scenecolor":"#dddddd","width":"450"}};}
		]);
		return AlertUI;
	})(Dialog)


	//class laya.editor.ui.comp.ConfirmUI extends laya.ui.Dialog
	var ConfirmUI=(function(_super){
		function ConfirmUI(){
			this.titleLbl=null;
			this.msgLbl=null;
			ConfirmUI.__super.call(this);
		}

		__class(ConfirmUI,'laya.editor.ui.comp.ConfirmUI',_super);
		var __proto=ConfirmUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ConfirmUI.uiView);
		}

		__static(ConfirmUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"180","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"397","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"确认框","color":"#c5c5c5","fontSize":"14","var":"titleLbl","x":"28"}},{"type":"Label","props":{"text":"确认内容","mouseEnabled":"false","color":"#c5c5c5","var":"msgLbl","multiline":"true","x":"35.5","y":"67","wordWrap":"true","width":"379","align":"center","height":"54","isHtml":"true","mouseChildren":"false"}},{"type":"Button","props":{"name":"cancel","label":"取消","sizeGrid":"0,4,0,4","y":"125","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"247"}},{"type":"Button","props":{"name":"sure","label":"确定","sizeGrid":"0,4,0,4","y":"125","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"117"}}],"props":{"height":"180","scenecolor":"#dddddd","width":"450"}};}
		]);
		return ConfirmUI;
	})(Dialog)


	//class laya.editor.ui.comp.WaitingUI extends laya.ui.Dialog
	var WaitingUI=(function(_super){
		function WaitingUI(){
			this.titleLbl=null;
			this.msgLbl=null;
			WaitingUI.__super.call(this);
		}

		__class(WaitingUI,'laya.editor.ui.comp.WaitingUI',_super);
		var __proto=WaitingUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(WaitingUI.uiView);
		}

		__static(WaitingUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"180","skin":"view/bg_dialog.png","x":"0"}},{"type":"Image","props":{"y":"8","width":"433","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"处理中","color":"#dddddd","fontSize":"14","var":"titleLbl","x":"28"}},{"type":"Label","props":{"height":"49","y":"89","wordWrap":"true","text":"确认内容","width":"386","align":"center","multiline":"true","color":"#dddddd","var":"msgLbl","isHtml":"true","x":"29.5"}}],"props":{"height":"180","scenecolor":"#dddddd","width":"450"}};}
		]);
		return WaitingUI;
	})(Dialog)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.uicomps.RankListItem extends laya.debug.ui.debugui.comps.RankListItemUI
	var RankListItem=(function(_super){
		function RankListItem(){
			RankListItem.__super.call(this);
			Base64AtlasManager.replaceRes(RankListItemUI.uiView);
			this.createView(RankListItemUI.uiView);
		}

		__class(RankListItem,'laya.debug.uicomps.RankListItem',_super);
		var __proto=RankListItem.prototype;
		__proto.createChildren=function(){}
		return RankListItem;
	})(RankListItemUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.uicomps.TreeListItem extends laya.debug.ui.debugui.comps.ListItemUI
	var TreeListItem=(function(_super){
		function TreeListItem(){
			TreeListItem.__super.call(this);
			Base64AtlasManager.replaceRes(ListItemUI.uiView);
			this.createView(ListItemUI.uiView);
		}

		__class(TreeListItem,'laya.debug.uicomps.TreeListItem',_super);
		var __proto=TreeListItem.prototype;
		__proto.createChildren=function(){}
		return TreeListItem;
	})(ListItemUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.DebugPage extends laya.debug.ui.debugui.DebugPanelUI
	var DebugPage=(function(_super){
		function DebugPage(){
			this.views=null;
			DebugPage.__super.call(this);
			this.msRec=new Rectangle();
			Base64AtlasManager.replaceRes(DebugPanelUI.uiView);
			this.createView(DebugPanelUI.uiView);
			DisControlTool.setResizeAbleEx(this);
			this.views=[this.treePanel,this.selectPanel,this.profilePanel];
			this.tab.selectedIndex=0;
			this.tabChange();
			this.tab.on("change",this,this.tabChange);
			this.changeSize();
		}

		__class(DebugPage,'laya.debug.view.nodeInfo.nodetree.DebugPage',_super);
		var __proto=DebugPage.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		__proto.tabChange=function(){
			DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this);
			DisControlTool.setTop(this.resizeBtn);
		}

		__proto.changeSize=function(){
			if (this.width < 245){
				this.width=245;
			}
			if (this.height < 100){
				this.height=200;
			}
			laya.ui.Component.prototype.changeSize.call(this);
			this.msRec.setTo(0,0,this.width,this.height);
			this.scrollRect=this.msRec;
		}

		return DebugPage;
	})(DebugPanelUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.FindNode extends laya.debug.ui.debugui.FindNodeUI
	var FindNode=(function(_super){
		function FindNode(){
			FindNode.__super.call(this);
			Base64AtlasManager.replaceRes(FindNodeUI.uiView);
			this.createView(FindNodeUI.uiView);
		}

		__class(FindNode,'laya.debug.view.nodeInfo.nodetree.FindNode',_super);
		var __proto=FindNode.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		return FindNode;
	})(FindNodeUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.FindNodeSmall extends laya.debug.ui.debugui.FindNodeSmallUI
	var FindNodeSmall=(function(_super){
		function FindNodeSmall(){
			FindNodeSmall.__super.call(this);
			Base64AtlasManager.replaceRes(FindNodeSmallUI.uiView);
			this.createView(FindNodeSmallUI.uiView);
		}

		__class(FindNodeSmall,'laya.debug.view.nodeInfo.nodetree.FindNodeSmall',_super);
		var __proto=FindNodeSmall.prototype;
		__proto.createChildren=function(){}
		return FindNodeSmall;
	})(FindNodeSmallUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.MinBtnComp extends laya.debug.ui.debugui.MinBtnCompUI
	var MinBtnComp=(function(_super){
		function MinBtnComp(){
			this.tar=null;
			this.minHandler=null;
			this.maxHandler=null;
			this.prePos=new Point();
			MinBtnComp.__super.call(this);
			Base64AtlasManager.replaceRes(MinBtnCompUI.uiView);
			this.createView(MinBtnCompUI.uiView);
			this.init();
		}

		__class(MinBtnComp,'laya.debug.view.nodeInfo.nodetree.MinBtnComp',_super);
		var __proto=MinBtnComp.prototype;
		__proto.createChildren=function(){}
		__proto.init=function(){
			this.minBtn.on("click",this,this.onMinBtn);
			this.maxBtn.on("click",this,this.onMaxBtn);
			this.minState=false;
			this.maxUI.removeSelf();
			DisControlTool.setDragingItem(this.bg,this.maxUI);
		}

		__proto.onMaxBtn=function(){
			this.maxUI.removeSelf();
			if (this.maxHandler){
				this.maxHandler.run();
			}
			if (this.tar){
				this.tar.x+=this.maxUI.x-this.prePos.x;
				this.tar.y+=this.maxUI.y-this.prePos.y;
			}
		}

		__proto.onMinBtn=function(){
			if (!this.displayedInStage)return;
			var tPos;
			tPos=Point.TEMP;
			tPos.setTo(0,0);
			tPos=this.localToGlobal(tPos);
			tPos=DebugInfoLayer.I.popLayer.globalToLocal(tPos);
			this.maxUI.pos(tPos.x,tPos.y);
			DebugInfoLayer.I.popLayer.addChild(this.maxUI);
			if (this.tar){
				this.prePos.setTo(tPos.x,tPos.y);
			}
			if (this.minHandler){
				this.minHandler.run();
			}
		}

		__getset(0,__proto,'minState',null,function(v){
		});

		return MinBtnComp;
	})(MinBtnCompUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.NodeListPanel extends laya.debug.ui.debugui.NodeListPanelUI
	var NodeListPanel=(function(_super){
		function NodeListPanel(){
			NodeListPanel.__super.call(this);
			Base64AtlasManager.replaceRes(NodeListPanelUI.uiView);
			this.createView(NodeListPanelUI.uiView);
		}

		__class(NodeListPanel,'laya.debug.view.nodeInfo.nodetree.NodeListPanel',_super);
		var __proto=NodeListPanel.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		return NodeListPanel;
	})(NodeListPanelUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.NodeTool extends laya.debug.ui.debugui.NodeToolUI
	var NodeTool=(function(_super){
		function NodeTool(){
			NodeTool.__super.call(this);
			Base64AtlasManager.replaceRes(NodeToolUI.uiView);
			this.createView(NodeToolUI.uiView);
		}

		__class(NodeTool,'laya.debug.view.nodeInfo.nodetree.NodeTool',_super);
		var __proto=NodeTool.prototype;
		__proto.createChildren=function(){}
		return NodeTool;
	})(NodeToolUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.NodeTree extends laya.debug.ui.debugui.NodeTreeUI
	var NodeTree=(function(_super){
		function NodeTree(){
			this.showProps=false;
			this._closeSettingHandler=null;
			this._tar=null;
			NodeTree.__super.call(this);
			Base64AtlasManager.replaceRes(NodeTreeUI.uiView);
			View.regComponent("Tree",TreeBase);
			this.createView(NodeTreeUI.uiView);
			View.regComponent("Tree",Tree);
			this.inits();
			NodeTree.I=this;
		}

		__class(NodeTree,'laya.debug.view.nodeInfo.nodetree.NodeTree',_super);
		var __proto=NodeTree.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		__proto.inits=function(){
			this.nodeTree.list.scrollBar.hide=true;
			this.nodeTree.list.selectEnable=true;
			this.settingBtn.on("click",this,this.onSettingBtn);
			this.freshBtn.on("click",this,this.fresh);
			this.closeBtn.on("click",this,this.onCloseBtn);
			this.fliterTxt.on("enter",this,this.onFliterTxtChange);
			this.fliterTxt.on("blur",this,this.onFliterTxtChange);
			NodeMenu.I.setNodeListAction(this.nodeTree.list);
			this.nodeTree.list.on("click",this,this.onListClick,[this.nodeTree.list]);
			this.nodeTree.renderHandler=new Handler(this,this.treeRender);
			this._closeSettingHandler=new Handler(this,this.closeSetting);
			this.onIfShowPropsChange();
			this.ifShowProps.on("change",this,this.onIfShowPropsChange);
		}

		__proto.onIfShowPropsChange=function(){
			this.showProps=this.ifShowProps.selected;
			this.fresh();
		}

		__proto.onListClick=function(list){
			if (list.selectedItem){
				if (list.selectedItem.isDirectory){
					list.selectedItem.isOpen=!list.selectedItem.isOpen;
					this.nodeTree.fresh();
				}
			}
		}

		//}
		__proto.onFindBtn=function(){
			FindSmallView.I.show();
		}

		__proto.onCloseBtn=function(){
			this.removeSelf();
		}

		__proto.onTreeDoubleClick=function(e){
			if (this.nodeTree.selectedItem){
				var tarNode;
				tarNode=this.nodeTree.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		//}
		__proto.onTreeRightMouseDown=function(e){
			if (this.nodeTree.selectedItem){
				var tarNode;
				tarNode=this.nodeTree.selectedItem.path;
				NodeMenu.I.objRightClick(tarNode);
			}
		}

		//}
		__proto.onSettingBtn=function(){
			NodeTreeSettingView.I.showSetting(NodeTree.showKeys,this._closeSettingHandler,this._tar);
		}

		__proto.closeSetting=function(newKeys){
			NodeTree.showKeys=newKeys;
			this.fresh();
		}

		__proto.onFliterTxtChange=function(e){
			var key;
			key=this.fliterTxt.text;
			if (key=="")return;
			if (key !=NodeTree.showKeys.join(",")){
				NodeTree.showKeys=key.split(",");
				this.fresh();
			}
			return;
			this.selecteByFile(key);
		}

		__proto.selecteByFile=function(key){
			var arr;
			arr=this.nodeTree.source;
			var rsts;
			rsts=DebugTool.findNameHas(key,false);
			if (rsts && rsts.length > 0){
				var tar;
				tar=rsts[0];
				this.parseOpen(arr,tar);
			}
		}

		__proto.showSelectInStage=function(node){
			this.setDis(Laya.stage);
			this.selectByNode(node);
		}

		__proto.selectByNode=function(node){
			if (!node)return;
			var arr;
			arr=this.nodeTree.source;
			this.parseOpen(arr,node);
		}

		__proto.showNodeList=function(nodeList){
			if (!nodeList)return;
			var i=0,len=0;
			len=nodeList.length;
			var showList;
			showList=[];
			var tData;
			var tSprite;
			for (i=0;i < len;i++){
				tSprite=nodeList[i];
				tData={};
				tData.label=ClassTool.getNodeClassAndName(tSprite);
				tData.path=tSprite;
				showList.push(tData);
			}
			this.nodeTree.array=showList;
		}

		__proto.parseOpen=function(tree,node){
			if (tree.length < 1)return;
			if (!node)return;
			var i=0,len=0;
			len=tree.length;
			var tItem;
			for(i=0;i<len;i++){
				tItem=tree[i];
				if(tItem.path==node){
					var sItem;
					sItem=tItem;
					while (tItem){
						tItem.isOpen=true;
						this.nodeTree.fresh();
						tItem=tItem.nodeParent;
					}
					this.nodeTree.selectedItem=sItem;
					return;
				}
			}
		}

		/**
		*@private
		*获取数据源中指定键名的值。
		*/
		__proto.getFilterSource=function(array,result,key){
			key=key.toLocaleLowerCase();
			var item;
			for(var $each_item in array){
				item=array[$each_item];
				if (item.isDirectory && String(item.label).toLowerCase().indexOf(key)>-1){
					item.x=0;
					result.push(item);
				}
				if (item.child && item.child.length > 0){
					this.getFilterSource(item.child,result,key);
				}
			}
		}

		__proto.onControlDown=function(){
			this.startDrag();
		}

		__proto.setDis=function(sprite){
			this._tar=sprite;
			this.fresh();
		}

		__proto.fresh=function(){
			var preTar;
			if (this.nodeTree.selectedItem){
				var tItem;
				tItem=this.nodeTree.selectedItem;
				while (tItem && (! (tItem.path instanceof laya.display.Sprite ))){
					tItem=tItem.nodeParent;
				}
				if (tItem && tItem.path){
					preTar=tItem.path;
				}
			}
			if (!this._tar){
				this.nodeTree.array=[];
				}else{
				this.nodeTree.array=NodeUtils.getNodeTreeData(this._tar,this.showProps?NodeTree.showKeys:NodeTree.emptyShowKey);
			}
			if (preTar){
				this.selectByNode(preTar);
			}
		}

		__proto.treeRender=function(cell,index){
			var item=cell.dataSource;
			if (item){
				var isDirectory=item.child || item.isDirectory;
				var label=cell.getChildByName("label");
				if ((item.path instanceof laya.display.Node )){
					label.color="#09a4f6";
					}else{
					if (item.isChilds){
						label.color="#00ff11";
						}else{
						label.color="#838bc5";
					}
				}
			}
		}

		NodeTree.I=null
		NodeTree.emptyShowKey=[];
		__static(NodeTree,
		['showKeys',function(){return this.showKeys=["x","y","width","height","renderCost"];}
		]);
		return NodeTree;
	})(NodeTreeUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.NodeTreeSetting extends laya.debug.ui.debugui.NodeTreeSettingUI
	var NodeTreeSetting=(function(_super){
		function NodeTreeSetting(){
			NodeTreeSetting.__super.call(this);
			Base64AtlasManager.replaceRes(NodeTreeSettingUI.uiView);
			this.createView(NodeTreeSettingUI.uiView);
		}

		__class(NodeTreeSetting,'laya.debug.view.nodeInfo.nodetree.NodeTreeSetting',_super);
		var __proto=NodeTreeSetting.prototype;
		//inits();
		__proto.createChildren=function(){}
		return NodeTreeSetting;
	})(NodeTreeSettingUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.ObjectCreate extends laya.debug.ui.debugui.ObjectCreateUI
	var ObjectCreate=(function(_super){
		function ObjectCreate(){
			ObjectCreate.__super.call(this);
			Base64AtlasManager.replaceRes(ObjectCreateUI.uiView);
			this.createView(ObjectCreateUI.uiView);
		}

		__class(ObjectCreate,'laya.debug.view.nodeInfo.nodetree.ObjectCreate',_super);
		var __proto=ObjectCreate.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		return ObjectCreate;
	})(ObjectCreateUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.ObjectInfo extends laya.debug.ui.debugui.ObjectInfoUI
	var ObjectInfo=(function(_super){
		function ObjectInfo(){
			ObjectInfo.__super.call(this);
			Base64AtlasManager.replaceRes(ObjectInfoUI.uiView);
			this.createView(ObjectInfoUI.uiView);
		}

		__class(ObjectInfo,'laya.debug.view.nodeInfo.nodetree.ObjectInfo',_super);
		var __proto=ObjectInfo.prototype;
		__proto.createChildren=function(){}
		return ObjectInfo;
	})(ObjectInfoUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.OutPut extends laya.debug.ui.debugui.OutPutUI
	var OutPut=(function(_super){
		function OutPut(){
			OutPut.__super.call(this);
			Base64AtlasManager.replaceRes(OutPutUI.uiView);
			this.createView(OutPutUI.uiView);
		}

		__class(OutPut,'laya.debug.view.nodeInfo.nodetree.OutPut',_super);
		var __proto=OutPut.prototype;
		__proto.createChildren=function(){}
		return OutPut;
	})(OutPutUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.Profile extends laya.debug.ui.debugui.ProfileUI
	var Profile=(function(_super){
		function Profile(){
			this.views=null;
			Profile.__super.call(this);
			Base64AtlasManager.replaceRes(ProfileUI.uiView);
			this.createView(ProfileUI.uiView);
			this.views=[this.createPanel,this.renderPanel,this.cachePanel,this.resPanel];
			this.tab.selectedIndex=0;
			this.tabChange();
			this.tab.on("change",this,this.tabChange);
		}

		__class(Profile,'laya.debug.view.nodeInfo.nodetree.Profile',_super);
		var __proto=Profile.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		__proto.tabChange=function(){
			DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this);
		}

		return Profile;
	})(ProfileUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.Rank extends laya.debug.ui.debugui.RankUI
	var Rank=(function(_super){
		function Rank(){
			Rank.__super.call(this);
			Base64AtlasManager.replaceRes(RankUI.uiView);
			this.createView(RankUI.uiView);
		}

		__class(Rank,'laya.debug.view.nodeInfo.nodetree.Rank',_super);
		var __proto=Rank.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		return Rank;
	})(RankUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.SelectInfos extends laya.debug.ui.debugui.SelectInfosUI
	var SelectInfos=(function(_super){
		function SelectInfos(){
			SelectInfos.__super.call(this);
			Base64AtlasManager.replaceRes(SelectInfosUI.uiView);
			this.createView(SelectInfosUI.uiView);
		}

		__class(SelectInfos,'laya.debug.view.nodeInfo.nodetree.SelectInfos',_super);
		var __proto=SelectInfos.prototype;
		__proto.createChildren=function(){
			this.viewMapRegists();
		}

		return SelectInfos;
	})(SelectInfosUI)


	/**
	*...
	*@author ww
	*/
	//class laya.debug.view.nodeInfo.nodetree.ToolBar extends laya.debug.ui.debugui.ToolBarUI
	var ToolBar=(function(_super){
		function ToolBar(){
			ToolBar.__super.call(this);
			Base64AtlasManager.replaceRes(ToolBarUI.uiView);
			this.createView(ToolBarUI.uiView);
		}

		__class(ToolBar,'laya.debug.view.nodeInfo.nodetree.ToolBar',_super);
		var __proto=ToolBar.prototype;
		__proto.createChildren=function(){}
		return ToolBar;
	})(ToolBarUI)


	//class laya.editor.ui.other.BoxCompUI extends laya.ui.Dialog
	var BoxCompUI=(function(_super){
		function BoxCompUI(){
			this.typeDrop=null;
			BoxCompUI.__super.call(this);
		}

		__class(BoxCompUI,'laya.editor.ui.other.BoxCompUI',_super);
		var __proto=BoxCompUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(BoxCompUI.uiView);
		}

		__static(BoxCompUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"470","height":"230","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"418","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"转换为容器","x":"28"}},{"type":"Label","props":{"y":"70","text":"容器类型：","width":"129","height":"18","color":"#c5c5c5","x":"40"}},{"type":"Button","props":{"y":"165","label":"确定","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"192"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"104","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"390","sizeGrid":"0,20,0,3","skin":"comp/combo_32.png","var":"typeDrop","x":"40.5"}}],"props":{"height":"230","scenecolor":"#dddddd","width":"470"}};}
		]);
		return BoxCompUI;
	})(Dialog)


	//class laya.editor.ui.other.ConvertProjectUI extends laya.ui.Dialog
	var ConvertProjectUI=(function(_super){
		function ConvertProjectUI(){
			this.pathTxt=null;
			this.browseBtn=null;
			this.pathOldTxt=null;
			this.browseOldBtn=null;
			ConvertProjectUI.__super.call(this);
		}

		__class(ConvertProjectUI,'laya.editor.ui.other.ConvertProjectUI',_super);
		var __proto=ConvertProjectUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ConvertProjectUI.uiView);
		}

		__static(ConvertProjectUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"530","height":"290","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"478","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"转换项目","x":"28"}},{"type":"Button","props":{"name":"sure","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","sizeGrid":"0,4,0,4","centerX":"0","skin":"comp/button.png","bottom":"24","width":"100"}},{"type":"TextInput","props":{"height":"32","y":"144","width":"406","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"pathTxt","x":"32"}},{"type":"Button","props":{"y":"144","text":"项目名称：","label":"浏览","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"32","skin":"comp/btn_browser.png","var":"browseBtn","width":"60","x":"438"}},{"type":"TextInput","props":{"height":"32","y":"86","width":"406","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"pathOldTxt","x":"32"}},{"type":"Button","props":{"y":"86","text":"项目名称：","label":"浏览","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"32","skin":"comp/btn_browser.png","var":"browseOldBtn","width":"60","x":"438"}},{"type":"Label","props":{"y":"193","wordWrap":"true","text":"项目转换可以把旧的MornUI项目转换成LayaUI项目。","width":"466","height":"43","color":"#646464","fontSize":"12","x":"32"}}],"props":{"height":"290","scenecolor":"#dddddd","width":"530"}};}
		]);
		return ConvertProjectUI;
	})(Dialog)


	//class laya.editor.ui.other.FindAndReplaceUI extends laya.ui.Dialog
	var FindAndReplaceUI=(function(_super){
		function FindAndReplaceUI(){
			this.msgTxt=null;
			this.list=null;
			this.findTxt=null;
			this.replaceTxt=null;
			this.findBtn=null;
			this.replaceBtn=null;
			FindAndReplaceUI.__super.call(this);
		}

		__class(FindAndReplaceUI,'laya.editor.ui.other.FindAndReplaceUI',_super);
		var __proto=FindAndReplaceUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(FindAndReplaceUI.uiView);
		}

		__static(FindAndReplaceUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"500","height":"380","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"449","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"查找替换","x":"28"}},{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"214","width":"454","height":"144","skin":"view/bg_panel.png","x":"24"}},{"type":"Label","props":{"y":"193","text":"共找到 {0} 个页面，双击列表打开页面","width":"454","height":"18","color":"#c5c5c5","var":"msgTxt","x":"25"}},{"type":"List","child":[{"type":"Box","child":[{"type":"Clip","props":{"name":"selectBox","left":"0","height":"24","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Label","props":{"name":"label","text":"label","width":"150","left":"10","height":"24","color":"#c5c5c5","right":"80","x":"20"}}],"props":{"name":"render","right":"0","left":"0"}}],"props":{"y":"217","width":"450","x":"26","height":"140","var":"list","repeatX":"1","vScrollBarSkin":"comp/vscroll.png"}},{"type":"Label","props":{"y":"67.5","text":"查找文本：","width":"108","align":"right","height":"18","color":"#c5c5c5","x":"6"}},{"type":"TextInput","props":{"height":"32","y":"63","width":"315","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"findTxt","x":"117"}},{"type":"Label","props":{"y":"107","text":"替换文本：","width":"114","align":"right","height":"18","color":"#c5c5c5","x":"0"}},{"type":"TextInput","props":{"height":"32","y":"103","width":"315","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"replaceTxt","x":"117"}},{"type":"Button","props":{"y":"147","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"查找","sizeGrid":"0,4,0,4","skin":"comp/button.png","var":"findBtn","width":"100","x":"128"}},{"type":"Button","props":{"y":"147","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"100","sizeGrid":"0,4,0,4","skin":"comp/btn.png","var":"replaceBtn","label":"替换","x":"272"}}],"props":{"height":"380","scenecolor":"#dddddd","width":"500"}};}
		]);
		return FindAndReplaceUI;
	})(Dialog)


	//class laya.editor.ui.other.FindUnUsedResUI extends laya.ui.Dialog
	var FindUnUsedResUI=(function(_super){
		function FindUnUsedResUI(){
			this.resultBox=null;
			this.msgTxt=null;
			this.delBtn=null;
			this.checkSelectAll=null;
			this.list=null;
			this.findBtn=null;
			FindUnUsedResUI.__super.call(this);
		}

		__class(FindUnUsedResUI,'laya.editor.ui.other.FindUnUsedResUI',_super);
		var __proto=FindUnUsedResUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(FindUnUsedResUI.uiView);
		}

		__static(FindUnUsedResUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"500","height":"380","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"450","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"查找未被使用的资源","x":"28"}},{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"158","width":"454","height":"200","skin":"view/bg_panel.png","x":"24"}},{"type":"Box","child":[{"type":"Label","props":{"color":"#c5c5c5","text":"共找到 {0} 个资源","var":"msgTxt"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"0","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"50","height":"20","skin":"comp/btn.png","var":"delBtn","label":"删除","x":"347"}},{"type":"CheckBox","props":{"y":"3","var":"checkSelectAll","label":"全选","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"410"}},{"type":"List","child":[{"type":"Box","child":[{"type":"Clip","props":{"name":"selectBox","left":"0","height":"24","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Label","props":{"name":"label","text":"label","width":"360","height":"24","y":"0","color":"#c5c5c5","x":"5"}},{"type":"CheckBox","props":{"y":"4","width":"13","height":"13","name":"check","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"409"}}],"props":{"name":"render","right":"0","left":"0"}}],"props":{"y":"26","width":"450","x":"1","height":"195","var":"list","vScrollBarSkin":"comp/vscroll.png"}}],"props":{"y":"135","var":"resultBox","x":"25"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"63","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"120","height":"40","skin":"comp/button.png","var":"findBtn","label":"查找","x":"190"}}],"props":{"height":"380","scenecolor":"#dddddd","width":"500"}};}
		]);
		return FindUnUsedResUI;
	})(Dialog)


	//class laya.editor.ui.other.LangPanelUI extends laya.ui.Dialog
	var LangPanelUI=(function(_super){
		function LangPanelUI(){
			this.langPath=null;
			this.langPathBtn=null;
			LangPanelUI.__super.call(this);
		}

		__class(LangPanelUI,'laya.editor.ui.other.LangPanelUI',_super);
		var __proto=LangPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(LangPanelUI.uiView);
		}

		__static(LangPanelUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"396","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"导出语言包","x":"28"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"sure","label":"确定","height":"30","y":"158","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"100","x":"100"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"cancel","width":"100","height":"30","y":"158","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"取消","x":"250"}},{"type":"Label","props":{"y":"90","text":"导出路径：","width":"117","align":"right","height":"20","color":"#c5c5c5","x":"9"}},{"type":"TextInput","props":{"height":"32","y":"85","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"langPath","x":"134"}},{"type":"Button","props":{"y":"85","text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"32","skin":"comp/btn_browser.png","var":"langPathBtn","label":"浏览","x":"335"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return LangPanelUI;
	})(Dialog)


	//class laya.editor.ui.other.PluginDialogUI extends laya.ui.Dialog
	var PluginDialogUI=(function(_super){
		function PluginDialogUI(){
			this.title=null;
			PluginDialogUI.__super.call(this);
		}

		__class(PluginDialogUI,'laya.editor.ui.other.PluginDialogUI',_super);
		var __proto=PluginDialogUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PluginDialogUI.uiView);
		}

		__static(PluginDialogUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","bottom":"0","width":"450","left":"0","height":"220","top":"0","skin":"view/bg_dialog.png","right":"0","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"7","width":"396","left":"9","height":"38","name":"drag","skin":"comp/blank.png","right":"40","x":"9"}},{"type":"Label","props":{"y":"17","text":"提取语言包","width":"169","height":"18","color":"#c5c5c5","fontSize":"14","var":"title","x":"21"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return PluginDialogUI;
	})(Dialog)


	//class laya.editor.ui.other.PreviewUI extends laya.ui.Dialog
	var PreviewUI=(function(_super){
		function PreviewUI(){
			this.panel=null;
			PreviewUI.__super.call(this);
		}

		__class(PreviewUI,'laya.editor.ui.other.PreviewUI',_super);
		var __proto=PreviewUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PreviewUI.uiView);
		}

		__static(PreviewUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"y":"137","right":"0","left":"0","sizeGrid":"4,4,4,4","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"164"}},{"type":"Panel","child":[{"type":"Button","props":{"sizeGrid":"0,4,0,4","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"label"}}],"props":{"vScrollBarSkin":"comp/vscroll.png","y":"26","hScrollBarSkin":"comp/hscroll.png","bottom":"5","left":"5","top":"5","right":"5","var":"panel","x":"21"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","y":"33","top":"5","skin":"view/btn_close.png","right":"5","x":"550"}}],"props":{"height":"400","scenecolor":"#dddddd","width":"600"}};}
		]);
		return PreviewUI;
	})(Dialog)


	//class laya.editor.ui.other.RepeatCompUI extends laya.ui.Dialog
	var RepeatCompUI=(function(_super){
		function RepeatCompUI(){
			this.rowTxt=null;
			this.columnTxt=null;
			this.paddingXTxt=null;
			this.paddingYTxt=null;
			RepeatCompUI.__super.call(this);
		}

		__class(RepeatCompUI,'laya.editor.ui.other.RepeatCompUI',_super);
		var __proto=RepeatCompUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(RepeatCompUI.uiView);
		}

		__static(RepeatCompUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"399","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"重复组件","x":"28"}},{"type":"Label","props":{"y":"78","text":"行个数：","width":"114","align":"right","height":"18","color":"#c5c5c5","x":"30"}},{"type":"TextInput","props":{"height":"24","y":"76","text":"5","width":"60","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"rowTxt","x":"145"}},{"type":"Button","props":{"y":"159","width":"100","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","x":"175"}},{"type":"Label","props":{"y":"78","text":"列个数：","width":"85","align":"right","height":"18","color":"#c5c5c5","x":"209"}},{"type":"TextInput","props":{"height":"24","y":"76","text":"1","width":"60","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"columnTxt","x":"295"}},{"type":"Label","props":{"y":"118","text":"右间距：","width":"125","align":"right","height":"18","color":"#c5c5c5","x":"19"}},{"type":"TextInput","props":{"height":"24","y":"114","text":"8","width":"60","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"paddingXTxt","x":"145"}},{"type":"Label","props":{"y":"118","text":"下间距：","width":"85","align":"right","height":"18","color":"#c5c5c5","x":"209"}},{"type":"TextInput","props":{"height":"24","y":"114","text":"8","width":"60","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"paddingYTxt","x":"295"}}],"props":{"height":"220","scenecolor":"#dddddd","width":"450"}};}
		]);
		return RepeatCompUI;
	})(Dialog)


	//class laya.editor.ui.other.SetIDEUI extends laya.ui.Dialog
	var SetIDEUI=(function(_super){
		function SetIDEUI(){
			this.autoSwitch=null;
			this.showRule=null;
			this.uiType=null;
			this.uiExportPath=null;
			SetIDEUI.__super.call(this);
		}

		__class(SetIDEUI,'laya.editor.ui.other.SetIDEUI',_super);
		var __proto=SetIDEUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetIDEUI.uiView);
		}

		__static(SetIDEUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"y":"0","bottom":"0","left":"0","sizeGrid":"60,10,10,10","top":"0","skin":"view/bg_dialog.png","right":"0","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"249","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"IDE设置","x":"28"}},{"type":"Button","props":{"y":"157","label":"确定","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"115"}},{"type":"CheckBox","props":{"y":"72","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"autoSwitch","label":"发布后自动切换到代码模式","x":"81"}},{"type":"CheckBox","props":{"y":"95","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"showRule","label":"默认是否显示标尺","x":"80"}},{"type":"Box","child":[{"type":"Label","props":{"y":"1","text":"UI模式：","width":"120","align":"right","height":"20","color":"#c5c5c5"}},{"type":"ComboBox","props":{"height":"24","labels":"内嵌模式,加载模式","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"200","sizeGrid":"0,20,0,3","skin":"comp/combo_24.png","var":"uiType","x":"118"}},{"type":"Label","props":{"y":"32","text":"加载UI发布目录：","width":"120","align":"right","height":"20","color":"#c5c5c5"}},{"type":"TextInput","props":{"height":"24","y":"31","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"uiExportPath","x":"118"}},{"type":"Label","props":{"align":"left","y":"32","color":"#c5c5c5","text":"加载模式可用","x":"323"}}],"props":{"visible":"false","y":"267","x":"58"}}],"props":{"height":"220","scenecolor":"#dddddd","width":"300"}};}
		]);
		return SetIDEUI;
	})(Dialog)


	//class laya.editor.ui.other.SetProjectUI extends laya.ui.Dialog
	var SetProjectUI=(function(_super){
		function SetProjectUI(){
			this.resTypes=null;
			this.resExportPath=null;
			this.resExportPathBtn=null;
			this.codeImports=null;
			this.codeExportPath=null;
			this.codeExportPathBtn=null;
			this.boxTypes=null;
			this.pageTypes=null;
			this.langPath=null;
			this.langPathBtn=null;
			this.codeType=null;
			this.defaultFont=null;
			this.resExportPathE=null;
			this.resExportPathEBtn=null;
			this.shareResPath=null;
			this.shareResPathBtn=null;
			this.picType=null;
			this.textureWidth=null;
			this.textureHeight=null;
			this.picWidth=null;
			this.picHeight=null;
			this.power2=null;
			this.trimempty=null;
			this.uiType=null;
			this.uiExportPath=null;
			SetProjectUI.__super.call(this);
		}

		__class(SetProjectUI,'laya.editor.ui.other.SetProjectUI',_super);
		var __proto=SetProjectUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetProjectUI.uiView);
		}

		__static(SetProjectUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"600","height":"671","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"547","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"项目设置","x":"28"}},{"type":"Label","props":{"y":"64.5","text":"位图资源类型：","width":"140","align":"right","height":"20","color":"#c5c5c5","x":"12"}},{"type":"TextInput","props":{"height":"24","y":"62","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"resTypes","x":"150"}},{"type":"Button","props":{"y":"610","label":"确定","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"250"}},{"type":"Label","props":{"y":"99","text":"资源发布目录：","width":"142","align":"right","height":"20","color":"#c5c5c5","x":"10"}},{"type":"TextInput","props":{"height":"24","y":"97","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"resExportPath","x":"150"}},{"type":"Button","props":{"y":"97","text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"24","skin":"comp/btn_browser.png","var":"resExportPathBtn","label":"浏览","x":"351"}},{"type":"Image","props":{"y":"265","skin":"comp/line.png","width":"496","x":"40"}},{"type":"Label","props":{"y":"289","text":"UICode导入类：","width":"141","align":"right","height":"20","color":"#c5c5c5","x":"11"}},{"type":"TextArea","props":{"scrollBarSkin":"comp/vscroll.png","sizeGrid":"0,3,0,3","y":"290","padding":"5,5,5,5","width":"300","height":"60","color":"#c5c5c5","skin":"comp/input_32.png","var":"codeImports","multiline":"true","x":"150"}},{"type":"Label","props":{"align":"left","y":"309","color":"#c5c5c5","text":"回车换行","x":"459"}},{"type":"Label","props":{"y":"361","text":"UICode发布目录：","width":"142","align":"right","height":"20","color":"#c5c5c5","x":"10"}},{"type":"TextInput","props":{"height":"24","y":"359","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"codeExportPath","x":"150"}},{"type":"Button","props":{"y":"359","text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"24","skin":"comp/btn_browser.png","var":"codeExportPathBtn","label":"浏览","x":"351"}},{"type":"Image","props":{"y":"480","skin":"comp/line.png","width":"496","x":"40"}},{"type":"Label","props":{"y":"490","text":"容器列表：","width":"120","align":"right","height":"20","color":"#c5c5c5","x":"32"}},{"type":"TextInput","props":{"height":"24","y":"488","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"boxTypes","x":"150"}},{"type":"Label","props":{"y":"522","text":"页面类型：","width":"120","align":"right","height":"20","color":"#c5c5c5","x":"32"}},{"type":"TextInput","props":{"height":"24","y":"520","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"pageTypes","x":"150"}},{"type":"Label","props":{"align":"left","y":"490","color":"#c5c5c5","text":"转换为容器功能使用","x":"355"}},{"type":"Label","props":{"align":"left","y":"522","color":"#c5c5c5","text":"用于自定义页面继承","x":"355"}},{"type":"Label","props":{"y":"558","text":"UI语言包路径：","width":"143","align":"right","height":"20","color":"#c5c5c5","x":"9"}},{"type":"TextInput","props":{"height":"24","y":"555","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"langPath","x":"150"}},{"type":"Button","props":{"y":"555","text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"24","skin":"comp/btn_browser.png","var":"langPathBtn","label":"浏览","x":"351"}},{"type":"Label","props":{"y":"554","wordWrap":"true","text":"设置后，会按照语言包内的配置替换UI界面语言","width":"169","align":"left","height":"45","color":"#c5c5c5","x":"409"}},{"type":"Label","props":{"y":"101","wordWrap":"true","text":"需和项目在同一个盘符","width":"131","align":"left","height":"30","color":"#c5c5c5","x":"406"}},{"type":"Label","props":{"y":"360","wordWrap":"true","text":"需和项目在同一个盘符","width":"175","align":"left","height":"37","color":"#c5c5c5","x":"409"}},{"type":"Label","props":{"y":"391","text":"语言：","width":"120","align":"right","height":"20","color":"#c5c5c5","x":"32"}},{"type":"ComboBox","props":{"height":"24","y":"389","labels":"ActionScript3,TypeScript,JavaScript","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"200","sizeGrid":"0,20,0,3","skin":"comp/combo_24.png","var":"codeType","x":"150"}},{"type":"Label","props":{"y":"226","text":"默认字体：","width":"142","align":"right","height":"20","color":"#c5c5c5","x":"11"}},{"type":"TextInput","props":{"height":"24","y":"224","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"defaultFont","x":"150"}},{"type":"Label","props":{"y":"130","text":"发布html目录：","width":"142","align":"right","height":"20","color":"#c5c5c5","x":"9"}},{"type":"TextInput","props":{"height":"24","y":"128","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"resExportPathE","x":"149"}},{"type":"Button","props":{"y":"128","text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"24","skin":"comp/btn_browser.png","var":"resExportPathEBtn","label":"浏览","x":"350"}},{"type":"Label","props":{"y":"131","wordWrap":"true","text":"未打包图片输出目录","width":"128","align":"left","height":"31","color":"#c5c5c5","x":"405"}},{"type":"Box","child":[{"type":"Label","props":{"y":"2","text":"共用资源目录：","width":"120","align":"right","height":"20","color":"#c5c5c5"}},{"type":"TextInput","props":{"height":"24","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"shareResPath","x":"118"}},{"type":"Button","props":{"text":"项目名称：","width":"50","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","height":"24","skin":"comp/btn_browser.png","var":"shareResPathBtn","label":"浏览","x":"319"}},{"type":"Label","props":{"align":"left","y":"2","color":"#c5c5c5","text":"多项目共用的资源目录","x":"377"}}],"props":{"visible":"false","y":"409","x":"50"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","y":"223","labels":"png32,png8","selectedIndex":"0","width":"84","height":"24","skin":"comp/combo_24.png","var":"picType","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"435"}},{"type":"Label","props":{"y":"226","text":"图片格式：","width":"78","align":"right","height":"20","color":"#c5c5c5","x":"359"}},{"type":"Label","props":{"y":"163","text":"图集最大宽：","width":"143","align":"right","height":"20","color":"#c5c5c5","x":"9"}},{"type":"TextInput","props":{"height":"24","y":"161","width":"80","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"textureWidth","x":"150"}},{"type":"Label","props":{"y":"163","text":"图集最大高：","width":"100","align":"right","height":"20","color":"#c5c5c5","x":"221"}},{"type":"TextInput","props":{"height":"24","y":"159","width":"80","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"textureHeight","x":"319"}},{"type":"Label","props":{"y":"194","text":"单图最大宽：","width":"145","align":"right","height":"20","color":"#c5c5c5","x":"8"}},{"type":"TextInput","props":{"height":"24","y":"193","width":"80","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"picWidth","x":"150"}},{"type":"Label","props":{"y":"194","text":"单图最大高：","width":"79","align":"right","height":"20","color":"#c5c5c5","x":"242"}},{"type":"TextInput","props":{"height":"24","y":"191","width":"80","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"picHeight","x":"319"}},{"type":"CheckBox","props":{"y":"165","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"power2","label":"是否限定2的幂次方","x":"407"}},{"type":"CheckBox","props":{"y":"194","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"false","skin":"comp/checkbox.png","var":"trimempty","label":"是否裁剪空白区域","x":"408"}},{"type":"Box","child":[{"type":"Label","props":{"y":"1","text":"UI模式：","width":"120","align":"right","height":"20","color":"#c5c5c5","x":"23"}},{"type":"ComboBox","props":{"height":"24","labels":"内嵌模式,加载模式,分离模式","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"200","sizeGrid":"0,20,0,3","skin":"comp/combo_24.png","var":"uiType","x":"141"}},{"type":"Label","props":{"y":"32","text":"加载UI发布目录：","width":"143","align":"right","height":"20","color":"#c5c5c5"}},{"type":"TextInput","props":{"height":"24","y":"31","width":"200","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"uiExportPath","x":"141"}},{"type":"Label","props":{"align":"left","y":"32","color":"#c5c5c5","text":"加载模式可用","x":"346"}}],"props":{"visible":"true","y":"420","x":"10"}}],"props":{"height":"670","scenecolor":"#dddddd","width":"600"}};}
		]);
		return SetProjectUI;
	})(Dialog)


	//class laya.editor.ui.page.AddAnimationUI extends laya.ui.Dialog
	var AddAnimationUI=(function(_super){
		function AddAnimationUI(){
			this.title=null;
			this.typeDrop=null;
			this.nameTxt=null;
			this.imgTxt=null;
			this.widthTxt=null;
			this.heightTxt=null;
			this.bgColorPicker=null;
			this.sureBtn=null;
			this.selectBtn=null;
			this.widthCheck=null;
			this.heightCheck=null;
			AddAnimationUI.__super.call(this);
		}

		__class(AddAnimationUI,'laya.editor.ui.page.AddAnimationUI',_super);
		var __proto=AddAnimationUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddAnimationUI.uiView);
		}

		__static(AddAnimationUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"330","skin":"view/bg_dialog.png","x":"0"}},{"type":"Image","props":{"y":"8","width":"400","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Label","props":{"y":"15","color":"#c5c5c5","text":"新增动画","var":"title","x":"16"}},{"type":"Label","props":{"y":"57","color":"#c5c5c5","text":"页面类型：","x":"78"}},{"type":"Label","props":{"y":"90","color":"#c5c5c5","text":"页面名称：","x":"78"}},{"type":"Label","props":{"y":"123","color":"#c5c5c5","text":"参考视图：","x":"78"}},{"type":"Label","props":{"y":"156","color":"#c5c5c5","text":"页面宽度：","x":"78"}},{"type":"Label","props":{"y":"189","color":"#c5c5c5","text":"页面高度：","x":"78"}},{"type":"Label","props":{"y":"222","color":"#c5c5c5","text":"参考背景：","x":"78"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"24","y":"55","selectedIndex":"0","var":"typeDrop","width":"140","sizeGrid":"0,20,0,3","labels":"View,Dialog","skin":"comp/combo_24.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"89","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"nameTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"122","width":"100","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"imgTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"155","text":"600","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"widthTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"188","text":"400","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"heightTxt","x":"151"}},{"type":"ColorPicker","props":{"scaleX":"0.5","y":"221","scaleY":"0.5","selectedcolor":"#dddddd","skin":"comp/color.png","var":"bgColorPicker","x":"151"}},{"type":"Button","props":{"y":"272","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"新增","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","var":"sureBtn","width":"100","x":"175"}},{"type":"Label","props":{"y":"123","color":"#c5c5c5","text":"(可选，参考背景)","x":"306"}},{"type":"Label","props":{"y":"221","wordWrap":"true","text":"(可选，设计面板的背景颜色)","width":"207","height":"36","color":"#c5c5c5","x":"173"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"122","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"40","height":"22","skin":"comp/btn.png","var":"selectBtn","label":"选择","x":"251"}},{"type":"CheckBox","props":{"y":"159","var":"widthCheck","label":"仅作为参考宽度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"298"}},{"type":"CheckBox","props":{"y":"192","var":"heightCheck","label":"仅作为参考高度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"298"}}],"props":{"height":"330","scenecolor":"#dddddd","width":"450"}};}
		]);
		return AddAnimationUI;
	})(Dialog)


	//class laya.editor.ui.page.AddDirectoryUI extends laya.ui.Dialog
	var AddDirectoryUI=(function(_super){
		function AddDirectoryUI(){
			this.nameTxt=null;
			AddDirectoryUI.__super.call(this);
		}

		__class(AddDirectoryUI,'laya.editor.ui.page.AddDirectoryUI',_super);
		var __proto=AddDirectoryUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddDirectoryUI.uiView);
		}

		__static(AddDirectoryUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"470","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"412","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","text":"新增目录","x":"28"}},{"type":"Label","props":{"y":"96","text":"目录名称：","width":"92","align":"right","height":"18","color":"#c5c5c5","x":"12"}},{"type":"TextInput","props":{"height":"32","y":"89","width":"322","sizeGrid":"0,3,0,3","color":"#dddddd","skin":"comp/input_32.png","var":"nameTxt","x":"101"}},{"type":"Button","props":{"y":"145","label":"新增","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"192"}}],"props":{"height":"220","scenecolor":"#dddddd","width":"470"}};}
		]);
		return AddDirectoryUI;
	})(Dialog)


	//class laya.editor.ui.page.AddDocumentUI extends laya.ui.Dialog
	var AddDocumentUI=(function(_super){
		function AddDocumentUI(){
			this.tab=null;
			this.title=null;
			this.views=null;
			this.sureBtn=null;
			this.tipImg=null;
			AddDocumentUI.__super.call(this);
		}

		__class(AddDocumentUI,'laya.editor.ui.page.AddDocumentUI',_super);
		var __proto=AddDocumentUI.prototype;
		__proto.createChildren=function(){
			View.viewClassMap["laya.editor.view.page.AddAnimation"]=AddAnimation;
			View.viewClassMap["laya.editor.view.page.AddPage"]=AddPage;
			View.viewClassMap["laya.editor.view.page.AddParticle"]=AddParticle;
			View.viewClassMap["laya.editor.view.page.AddScript"]=AddScript;
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddDocumentUI.uiView);
		}

		__static(AddDocumentUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"610","height":"430","skin":"view/bg_dialog.png","x":"0"}},{"type":"Image","props":{"sizeGrid":"3,3,3,3","y":"89","width":"578","height":"325","skin":"view/bg_dialog2.png","x":"15"}},{"type":"Tab","child":[{"type":"Button","props":{"name":"item0","label":"页面","height":"30","skin":"comp/tab3.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"75"}},{"type":"Button","props":{"name":"item1","width":"75","height":"30","y":"0","skin":"comp/tab3.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","label":"粒子","x":"75"}},{"type":"Button","props":{"name":"item2","width":"75","height":"30","y":"0","skin":"comp/tab3.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","label":"动画","x":"150"}},{"type":"Button","props":{"name":"item3","width":"75","height":"30","y":"0","skin":"comp/tab3.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","label":"脚本","x":"225"}}],"props":{"y":"59","selectedIndex":"0","var":"tab","x":"15"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"558","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"新建","color":"#c5c5c5","fontSize":"14","var":"title","x":"28"}},{"type":"ViewStack","child":[{"type":"AddPage","props":{"name":"item0","runtime":"laya.editor.view.page.AddPage"}},{"type":"AddParticle","props":{"name":"item1","runtime":"laya.editor.view.page.AddParticle"}},{"type":"AddGraphicAni","props":{"name":"item2","runtime":"laya.editor.view.page.AddAnimation"}},{"type":"AddScript","props":{"name":"item3","runtime":"laya.editor.view.page.AddScript"}}],"props":{"mouseEnabled":"true","y":"96","var":"views","x":"29"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"362","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","height":"30","name":"sure","skin":"comp/button.png","var":"sureBtn","width":"100","x":"458"}},{"type":"Image","props":{"y":"108","skin":"view/question.png","var":"tipImg","x":"563"}}],"props":{"height":"430","scenecolor":"#dddddd","width":"610"}};}
		]);
		return AddDocumentUI;
	})(Dialog)


	//class laya.editor.ui.page.AddSceneUI extends laya.ui.Dialog
	var AddSceneUI=(function(_super){
		function AddSceneUI(){
			this.nameTxt=null;
			this.imgTxt=null;
			this.widthTxt=null;
			this.heightTxt=null;
			this.bgColorPicker=null;
			this.selectBtn=null;
			this.widthCheck=null;
			this.heightCheck=null;
			AddSceneUI.__super.call(this);
		}

		__class(AddSceneUI,'laya.editor.ui.page.AddSceneUI',_super);
		var __proto=AddSceneUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddSceneUI.uiView);
		}

		__static(AddSceneUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Label","props":{"y":"12","color":"#dddddd","text":"场景名称：","x":"10"}},{"type":"Label","props":{"y":"45","color":"#dddddd","text":"参考视图：","x":"10"}},{"type":"Label","props":{"y":"78","color":"#dddddd","text":"场景宽度：","x":"10"}},{"type":"Label","props":{"y":"111","color":"#dddddd","text":"场景高度：","x":"10"}},{"type":"Label","props":{"y":"144","color":"#dddddd","text":"参考背景：","x":"10"}},{"type":"TextInput","props":{"height":"24","y":"10","width":"160","sizeGrid":"0,3,0,3","color":"#dddddd","skin":"comp/input_24.png","var":"nameTxt","x":"83"}},{"type":"TextInput","props":{"height":"24","y":"43","width":"120","sizeGrid":"0,3,0,3","color":"#dddddd","skin":"comp/input_24.png","var":"imgTxt","x":"83"}},{"type":"TextInput","props":{"height":"24","y":"76","text":"600","width":"160","sizeGrid":"0,3,0,3","color":"#dddddd","skin":"comp/input_24.png","var":"widthTxt","x":"83"}},{"type":"TextInput","props":{"height":"24","y":"109","text":"400","width":"160","sizeGrid":"0,3,0,3","color":"#dddddd","skin":"comp/input_24.png","var":"heightTxt","x":"83"}},{"type":"ColorPicker","props":{"scaleX":"0.5","y":"142","scaleY":"0.5","selectedcolor":"#dddddd","skin":"comp/color.png","var":"bgColorPicker","x":"83"}},{"type":"Label","props":{"y":"44","color":"#dddddd","text":"(可选，参考背景)","x":"248"}},{"type":"Label","props":{"y":"142","color":"#dddddd","text":"(可选，设计面板的背景颜色)","x":"104"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"43","var":"selectBtn","width":"40","height":"22","skin":"comp/btn.png","labelColors":"#dddddd,#dddddd,#dddddd","label":"选择","x":"202"}},{"type":"CheckBox","props":{"y":"80","var":"widthCheck","label":"仅作为参考宽度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"248"}},{"type":"CheckBox","props":{"y":"113","var":"heightCheck","label":"仅作为参考高度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"248"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return AddSceneUI;
	})(Dialog)


	//class laya.editor.ui.page.MovePageUI extends laya.ui.Dialog
	var MovePageUI=(function(_super){
		function MovePageUI(){
			this.msgLbl=null;
			this.updateCheck=null;
			MovePageUI.__super.call(this);
		}

		__class(MovePageUI,'laya.editor.ui.page.MovePageUI',_super);
		var __proto=MovePageUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(MovePageUI.uiView);
		}

		__static(MovePageUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"440","height":"200","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"388","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"移动页面","x":"28"}},{"type":"Label","props":{"y":"55","wordWrap":"true","text":"确定移动页面吗？","width":"332","align":"center","height":"43","color":"#c5c5c5","var":"msgLbl","multiline":"true","x":"54"}},{"type":"CheckBox","props":{"y":"107","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"updateCheck","label":"是否更新页面嵌套引用(不选择能提高性能)","x":"99"}},{"type":"Button","props":{"name":"sure","label":"确定","sizeGrid":"0,4,0,4","y":"139","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"100"}},{"type":"Button","props":{"name":"cancel","label":"取消","sizeGrid":"0,4,0,4","y":"139","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"240"}}],"props":{"height":"200","scenecolor":"#dddddd","width":"440"}};}
		]);
		return MovePageUI;
	})(Dialog)


	//class laya.editor.ui.page.NeedSaveUI extends laya.ui.Dialog
	var NeedSaveUI=(function(_super){
		function NeedSaveUI(){
			this.msgLbl=null;
			NeedSaveUI.__super.call(this);
		}

		__class(NeedSaveUI,'laya.editor.ui.page.NeedSaveUI',_super);
		var __proto=NeedSaveUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(NeedSaveUI.uiView);
		}

		__static(NeedSaveUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"470","height":"200","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"418","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"提醒","x":"28"}},{"type":"Label","props":{"y":"73","wordWrap":"true","text":"是否保存修改？","width":"383","align":"center","height":"21","color":"#c5c5c5","var":"msgLbl","multiline":"true","x":"43.5"}},{"type":"Box","child":[{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"保存"}},{"type":"Button","props":{"name":"cancel","label":"不保存","sizeGrid":"0,4,0,4","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"130"}},{"type":"Button","props":{"name":"close","label":"取消关闭","sizeGrid":"0,4,0,4","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"260"}}],"props":{"y":"123","x":"62"}}],"props":{"height":"200","scenecolor":"#dddddd","width":"470"}};}
		]);
		return NeedSaveUI;
	})(Dialog)


	//class laya.editor.ui.page.RenamePageUI extends laya.ui.Dialog
	var RenamePageUI=(function(_super){
		function RenamePageUI(){
			this.nameTxt=null;
			this.updateCheck=null;
			this.resLbl=null;
			RenamePageUI.__super.call(this);
		}

		__class(RenamePageUI,'laya.editor.ui.page.RenamePageUI',_super);
		var __proto=RenamePageUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(RenamePageUI.uiView);
		}

		__static(RenamePageUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"400","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"重命名页面","x":"28"}},{"type":"Label","props":{"y":"88","text":"新名称：","width":"122","align":"right","height":"18","color":"#c5c5c5","x":"31"}},{"type":"TextInput","props":{"height":"32","y":"82","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"157"}},{"type":"CheckBox","props":{"y":"121","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"updateCheck","label":"是否更新页面嵌套引用(不选择能提高性能)","x":"155"}},{"type":"Label","props":{"y":"56","text":"原名称：","width":"111","align":"right","height":"18","color":"#c5c5c5","x":"42"}},{"type":"Label","props":{"y":"56","text":"页面内容","width":"214","height":"20","color":"#cccc00","var":"resLbl","x":"157"}},{"type":"Button","props":{"name":"sure","label":"确定","sizeGrid":"0,4,0,4","y":"156","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"108"}},{"type":"Button","props":{"name":"cancel","label":"取消","sizeGrid":"0,4,0,4","y":"156","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","x":"248"}}],"props":{"height":"220","scenecolor":"#dddddd","width":"450"}};}
		]);
		return RenamePageUI;
	})(Dialog)


	//class laya.editor.ui.page.SetPagePropUI extends laya.ui.Dialog
	var SetPagePropUI=(function(_super){
		function SetPagePropUI(){
			this.nameLbl=null;
			this.propsTxt=null;
			this.packType=null;
			SetPagePropUI.__super.call(this);
		}

		__class(SetPagePropUI,'laya.editor.ui.page.SetPagePropUI',_super);
		var __proto=SetPagePropUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetPagePropUI.uiView);
		}

		__static(SetPagePropUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"360","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"395","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"设置页面默认属性","x":"28"}},{"type":"Label","props":{"y":"58","text":"页面内容","width":"260","height":"20","color":"#cccc00","var":"nameLbl","x":"126"}},{"type":"Label","props":{"y":"58","text":"页面名称：","width":"95","align":"right","height":"18","color":"#c5c5c5","x":"27"}},{"type":"Label","props":{"y":"89","text":"默认属性：","width":"93","align":"right","height":"18","color":"#c5c5c5","x":"29"}},{"type":"Label","props":{"y":"120","wordWrap":"true","text":"示例(回车换行)\\ncolor=#00ff00\\nsize=14\\ntext=test","width":"100","height":"85","color":"#c5c5c5","isHtml":"true","multiline":"true","x":"26"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"299","width":"100","height":"30","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","x":"126"}},{"type":"TextArea","props":{"sizeGrid":"3,3,3,3","color":"#c5c5c5","skin":"comp/input_32.png","padding":"5,5,5,5","multiline":"true","vScrollBarSkin":"comp/vscroll.png","y":"87","wordWrap":"true","var":"propsTxt","width":"249","x":"126","height":"150","margin":"2,2,2,2"}},{"type":"Label","props":{"y":"248","wordWrap":"true","text":"提示：页面嵌套时，会自动应用上面设置默认属性，此属性为全局属性","width":"269","height":"41","color":"#cc00","multiline":"true","x":"123"}},{"type":"Label","props":{"y":"59","text":"导出类型：","width":"85","align":"right","height":"19","color":"#c5c5c5","x":"219"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","y":"55","labels":"默认,内嵌模式,加载模式,分离模式","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"75","height":"22","skin":"comp/combo_22.png","var":"packType","x":"299"}}],"props":{"height":"360","scenecolor":"#dddddd","width":"450"}};}
		]);
		return SetPagePropUI;
	})(Dialog)


	//class laya.editor.ui.page.SetPageUI extends laya.ui.Dialog
	var SetPageUI=(function(_super){
		function SetPageUI(){
			this.title=null;
			this.widthCheck=null;
			this.heightCheck=null;
			this.typeDrop=null;
			this.nameTxt=null;
			this.imgTxt=null;
			this.widthTxt=null;
			this.heightTxt=null;
			this.bgColorPicker=null;
			this.sureBtn=null;
			this.selectBtn=null;
			SetPageUI.__super.call(this);
		}

		__class(SetPageUI,'laya.editor.ui.page.SetPageUI',_super);
		var __proto=SetPageUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetPageUI.uiView);
		}

		__static(SetPageUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"470","height":"330","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"420","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"设置页面","color":"#c5c5c5","fontSize":"14","var":"title","x":"28"}},{"type":"CheckBox","props":{"y":"159","var":"widthCheck","label":"仅作为参考宽度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"298"}},{"type":"CheckBox","props":{"y":"192","var":"heightCheck","label":"仅作为参考高度","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"298"}},{"type":"Label","props":{"y":"57","color":"#c5c5c5","text":"页面类型：","x":"78"}},{"type":"Label","props":{"y":"90","color":"#c5c5c5","text":"页面名称：","x":"78"}},{"type":"Label","props":{"y":"123","color":"#c5c5c5","text":"参考视图：","x":"78"}},{"type":"Label","props":{"y":"156","color":"#c5c5c5","text":"页面宽度：","x":"78"}},{"type":"Label","props":{"y":"189","color":"#c5c5c5","text":"页面高度：","x":"78"}},{"type":"Label","props":{"y":"222","wordWrap":"true","text":"参考背景：","width":"68","height":"60","color":"#c5c5c5","x":"78"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"24","y":"55","selectedIndex":"0","var":"typeDrop","width":"140","sizeGrid":"0,20,0,3","labels":"View,Dialog","skin":"comp/combo_24.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"89","disabled":"true","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"nameTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"122","width":"108","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"imgTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"155","text":"600","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"widthTxt","x":"151"}},{"type":"TextInput","props":{"height":"24","y":"188","text":"400","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"heightTxt","x":"151"}},{"type":"ColorPicker","props":{"scaleX":"0.5","y":"221","scaleY":"0.5","selectedcolor":"#dddddd","skin":"comp/color.png","var":"bgColorPicker","x":"151"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"271","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"修改","height":"30","name":"sure","skin":"comp/button.png","var":"sureBtn","width":"100","x":"175"}},{"type":"Label","props":{"y":"123","wordWrap":"true","text":"(可选，参考背景)","width":"146","height":"32","color":"#c5c5c5","x":"306"}},{"type":"Label","props":{"y":"223","text":"(可选，设计面板的背景颜色)","width":"226","height":"18","color":"#c5c5c5","x":"172"}},{"type":"Button","props":{"y":"122","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5","label":"浏览","height":"24","skin":"comp/btn_browser.png","var":"selectBtn","width":"46","x":"259"}}],"props":{"height":"330","scenecolor":"#dddddd","width":"470"}};}
		]);
		return SetPageUI;
	})(Dialog)


	//class laya.editor.ui.res.MoveResUI extends laya.ui.Dialog
	var MoveResUI=(function(_super){
		function MoveResUI(){
			this.msgLbl=null;
			this.updateCheck=null;
			MoveResUI.__super.call(this);
		}

		__class(MoveResUI,'laya.editor.ui.res.MoveResUI',_super);
		var __proto=MoveResUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(MoveResUI.uiView);
		}

		__static(MoveResUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"200","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"396","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"移动资源","x":"28"}},{"type":"Label","props":{"y":"62","wordWrap":"true","leading":"10","text":"确定移动资源吗？","width":"350","align":"center","height":"66","color":"#c5c5c5","var":"msgLbl","multiline":"true","x":"50"}},{"type":"CheckBox","props":{"y":"108","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","visible":"false","skin":"comp/checkbox.png","var":"updateCheck","label":"是否更新页面引用(不选择能提高性能)","x":"116"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"sure","label":"确定","height":"30","y":"140","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"100","x":"100"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"cancel","width":"100","height":"30","y":"140","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"取消","x":"250"}}],"props":{"height":"200","scenecolor":"#dddddd","width":"450"}};}
		]);
		return MoveResUI;
	})(Dialog)


	//class laya.editor.ui.res.RenameResUI extends laya.ui.Dialog
	var RenameResUI=(function(_super){
		function RenameResUI(){
			this.nameTxt=null;
			this.updateCheck=null;
			this.resLbl=null;
			RenameResUI.__super.call(this);
		}

		__class(RenameResUI,'laya.editor.ui.res.RenameResUI',_super);
		var __proto=RenameResUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(RenameResUI.uiView);
		}

		__static(RenameResUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"450","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"396","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"重命名资源","x":"28"}},{"type":"Label","props":{"y":"94","text":"新名称：","width":"134","align":"right","height":"18","color":"#c5c5c5","x":"12"}},{"type":"TextInput","props":{"height":"32","y":"89","width":"150","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_32.png","var":"nameTxt","x":"150"}},{"type":"CheckBox","props":{"y":"129","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","selected":"true","skin":"comp/checkbox.png","var":"updateCheck","label":"是否更新页面引用(不选择能提高性能)","x":"151"}},{"type":"Label","props":{"y":"63","text":"原名称：","width":"123","align":"right","height":"18","color":"#c5c5c5","x":"23"}},{"type":"Label","props":{"y":"63","text":"资源内容","width":"214","height":"20","color":"#cccc00","var":"resLbl","x":"150"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"sure","label":"确定","height":"30","y":"158","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"100","x":"100"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","name":"cancel","width":"100","height":"30","y":"158","skin":"comp/btn.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"取消","x":"250"}}],"props":{"scenecolor":"#dddddd"}};}
		]);
		return RenameResUI;
	})(Dialog)


	//class laya.editor.ui.res.SetDirPropUI extends laya.ui.Dialog
	var SetDirPropUI=(function(_super){
		function SetDirPropUI(){
			this.nameLbl=null;
			this.packType=null;
			SetDirPropUI.__super.call(this);
		}

		__class(SetDirPropUI,'laya.editor.ui.res.SetDirPropUI',_super);
		var __proto=SetDirPropUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetDirPropUI.uiView);
		}

		__static(SetDirPropUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"510","mouseEnabled":"true","height":"240","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"468","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"目录属性设置","x":"28"}},{"type":"Label","props":{"y":"60","text":"目录名称：","width":"145","align":"right","height":"18","color":"#c5c5c5","x":"13"}},{"type":"Button","props":{"y":"171","width":"100","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","x":"190"}},{"type":"Label","props":{"y":"60","text":"页面内容","width":"260","height":"20","color":"#cccc00","var":"nameLbl","x":"162"}},{"type":"Label","props":{"y":"109","text":"打包类型：","width":"145","align":"right","height":"19","color":"#c5c5c5","x":"13"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","y":"105","labels":"默认,打包,不打包","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"237","height":"22","skin":"comp/combo_22.png","var":"packType","x":"161"}}],"props":{"height":"240","scenecolor":"#dddddd","width":"510"}};}
		]);
		return SetDirPropUI;
	})(Dialog)


	//class laya.editor.ui.res.SetResPropUI extends laya.ui.Dialog
	var SetResPropUI=(function(_super){
		function SetResPropUI(){
			this.nameLbl=null;
			this.propsTxt=null;
			this.typeDrop=null;
			this.setSizeGridBtn=null;
			this.packType=null;
			this.picType=null;
			SetResPropUI.__super.call(this);
		}

		__class(SetResPropUI,'laya.editor.ui.res.SetResPropUI',_super);
		var __proto=SetResPropUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetResPropUI.uiView);
		}

		__static(SetResPropUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"520","mouseEnabled":"true","height":"410","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"468","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","color":"#c5c5c5","fontSize":"14","text":"资源属性设置","x":"28"}},{"type":"Label","props":{"y":"60","text":"资源名称：","width":"137","align":"right","height":"18","color":"#c5c5c5","x":"21"}},{"type":"Label","props":{"y":"134","text":"默认全局属性：","width":"143","align":"right","height":"18","color":"#c5c5c5","x":"14"}},{"type":"Label","props":{"y":"166","wordWrap":"true","text":"示例(回车换行)\\ncolor=#00ff00\\nsize=14\\ntext=test","width":"100","height":"115","color":"#c5c5c5","multiline":"true","x":"62"}},{"type":"Button","props":{"y":"363","width":"100","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","x":"162"}},{"type":"Label","props":{"y":"60","text":"页面内容","width":"260","height":"20","color":"#cccc00","var":"nameLbl","x":"162"}},{"type":"TextArea","props":{"sizeGrid":"3,3,3,3","color":"#c5c5c5","skin":"comp/input_32.png","padding":"5,5,5,5","multiline":"true","vScrollBarSkin":"comp/vscroll.png","y":"133","var":"propsTxt","width":"250","x":"162","height":"150","margin":"2,2,2,2"}},{"type":"Label","props":{"y":"93","text":"组件类型：","width":"142","align":"right","height":"18","color":"#c5c5c5","x":"16"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"32","y":"88","labels":"Button,CheckBox,Clip,ComboBox,HScrollBar,HSlider,Image,Label,LinkButton,List,ProgressBar,Radio,RadioGroup,Tab,TextArea,TextInput,VScrollBar,VSlider,Tree","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"150","sizeGrid":"0,20,0,3","skin":"comp/combo_32.png","var":"typeDrop","x":"162"}},{"type":"Label","props":{"y":"292","wordWrap":"true","text":"提示：使用组件时，会自动应用上面设置默认属性。此属性为全局属性，","width":"312","height":"38","color":"#00cc00","x":"160"}},{"type":"Button","props":{"y":"90","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","width":"81","sizeGrid":"0,4,0,4","skin":"comp/btn.png","var":"setSizeGridBtn","label":"设置九宫","x":"330"}},{"type":"Label","props":{"y":"333","text":"打包类型：","width":"64","height":"19","color":"#c5c5c5","x":"162"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","y":"329","labels":"默认,打包,不打包","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"59","height":"22","skin":"comp/combo_22.png","var":"packType","x":"221"}},{"type":"Label","props":{"y":"333","text":"图片类型：","width":"72","align":"right","height":"19","color":"#c5c5c5","x":"283"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","y":"329","labels":"默认,Repeat","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"59","height":"22","skin":"comp/combo_22.png","var":"picType","x":"352"}}],"props":{"height":"420","scenecolor":"#dddddd","width":"520"}};}
		]);
		return SetResPropUI;
	})(Dialog)


	//class laya.editor.ui.res.SetSizeGridUI extends laya.ui.Dialog
	var SetSizeGridUI=(function(_super){
		function SetSizeGridUI(){
			this.upTxt=null;
			this.rightTxt=null;
			this.downTxt=null;
			this.leftTxt=null;
			this.nameLbl=null;
			this.typeDrop=null;
			this.typeTxt=null;
			this.desTxt=null;
			this.demoRec=null;
			this.opRec=null;
			SetSizeGridUI.__super.call(this);
		}

		__class(SetSizeGridUI,'laya.editor.ui.res.SetSizeGridUI',_super);
		var __proto=SetSizeGridUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(SetSizeGridUI.uiView);
		}

		__static(SetSizeGridUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"520","height":"420","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"468","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"14","color":"#c5c5c5","fontSize":"14","text":"九宫格设置","x":"23"}},{"type":"Label","props":{"align":"right","y":"335","color":"#c5c5c5","text":"上：","x":"47"}},{"type":"TextInput","props":{"height":"24","y":"331","disabled":"true","width":"72","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"upTxt","x":"76"}},{"type":"Label","props":{"align":"right","y":"335","color":"#c5c5c5","text":"右：","x":"156"}},{"type":"TextInput","props":{"height":"24","y":"331","disabled":"true","width":"72","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"rightTxt","x":"185"}},{"type":"Label","props":{"y":"335","text":"下：","width":"33","align":"right","height":"18","color":"#c5c5c5","x":"264"}},{"type":"TextInput","props":{"height":"24","y":"331","disabled":"true","width":"72","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"downTxt","x":"298"}},{"type":"Label","props":{"align":"right","y":"335","color":"#c5c5c5","text":"左：","x":"385"}},{"type":"TextInput","props":{"height":"24","y":"332","disabled":"true","width":"72","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"leftTxt","x":"414"}},{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"103","width":"485","height":"215","skin":"view/bg_panel.png","x":"14"}},{"type":"Label","props":{"y":"54","color":"#c5c5c5","text":"资源名称：","x":"21"}},{"type":"Button","props":{"y":"366","width":"100","sizeGrid":"0,4,0,4","name":"sure","skin":"comp/button.png","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"确定","x":"205"}},{"type":"Label","props":{"y":"54","text":"页面内容","width":"260","height":"20","color":"#cccc00","var":"nameLbl","x":"89"}},{"type":"Label","props":{"y":"45","visible":"false","color":"#c5c5c5","text":"组件类型：","x":"223"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"24","y":"47","labels":"Button,CheckBox,Clip,ComboBox,HScrollBar,HSlider,Image,Label,LinkButton,List,ProgressBar,Radio,RadioGroup,Tab,TextArea,TextInput,VScrollBar,VSlider,Tree","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"127","sizeGrid":"0,20,0,3","visible":"false","skin":"comp/combo_24.png","var":"typeDrop","x":"366"}},{"type":"Label","props":{"y":"46","text":"页面内容","width":"64","height":"20","visible":"false","color":"#cccc00","var":"typeTxt","x":"290"}},{"type":"Label","props":{"y":"78","text":"提示：拖动红线调整数值，右键按下可整体拖动","width":"473","height":"20","color":"#c5c5c5","var":"desTxt","x":"19"}},{"type":"Image","props":{"sizeGrid":"5,5,5,5","y":"107","width":"233","height":"205","skin":"view/bg_content.png","var":"demoRec","x":"18"}},{"type":"Image","props":{"sizeGrid":"5,5,5,5","y":"107","width":"235","height":"205","skin":"view/bg_content.png","var":"opRec","x":"259"}},{"type":"Label","props":{"y":"105","text":"预览","width":"64","height":"20","visible":"true","color":"#c5c5c5","x":"24"}}],"props":{"height":"420","scenecolor":"#dddddd","width":"520"}};}
		]);
		return SetSizeGridUI;
	})(Dialog)


	//class laya.editor.ui.template.AddTemplateUI extends laya.ui.Dialog
	var AddTemplateUI=(function(_super){
		function AddTemplateUI(){
			this.title=null;
			this.typeDrop=null;
			this.nameTxt=null;
			this.sureBtn=null;
			AddTemplateUI.__super.call(this);
		}

		__class(AddTemplateUI,'laya.editor.ui.template.AddTemplateUI',_super);
		var __proto=AddTemplateUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(AddTemplateUI.uiView);
		}

		__static(AddTemplateUI,
		['uiView',function(){return this.uiView={"type":"Dialog","child":[{"type":"Image","props":{"sizeGrid":"60,10,10,10","y":"0","width":"470","height":"220","skin":"view/bg_dialog.png","x":"0"}},{"type":"Button","props":{"scaleX":"0.5","name":"close","scaleY":"0.5","top":"18","skin":"view/btn_close.png","right":"18"}},{"type":"Image","props":{"y":"8","width":"418","height":"38","name":"drag","skin":"comp/blank.png","x":"9"}},{"type":"Label","props":{"y":"18","text":"转换成模板","width":"119","height":"18","color":"#c5c5c5","fontSize":"14","var":"title","x":"28"}},{"type":"Label","props":{"y":"74","text":"目录：","width":"164","align":"right","height":"18","color":"#c5c5c5","x":"18"}},{"type":"Label","props":{"y":"108","text":"页面名称：","width":"159","align":"right","height":"18","color":"#c5c5c5","x":"23"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","height":"24","y":"72","selectedIndex":"0","labelColors":"#dddddd","width":"140","sizeGrid":"0,20,0,3","labels":"自定义模板,常用模板","skin":"comp/combo_24.png","var":"typeDrop","x":"191"}},{"type":"TextInput","props":{"height":"24","y":"107","width":"140","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_24.png","var":"nameTxt","x":"191"}},{"type":"Button","props":{"sizeGrid":"0,4,0,4","y":"159","labelColors":"#efefef,#ffffff,#c5c5c5,#c5c5c5","label":"新增","height":"30","name":"sure","skin":"comp/button.png","var":"sureBtn","width":"100","x":"190"}}],"props":{"height":"220","scenecolor":"#dddddd","width":"470"}};}
		]);
		return AddTemplateUI;
	})(Dialog)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.comonents.ColorPickerPanel extends laya.editor.ui.other.ColorPickerPanelUI
	var ColorPickerPanel=(function(_super){
		function ColorPickerPanel(){
			this.prePickerItem=null;
			this.picker=null;
			ColorPickerPanel.__super.call(this);
			this.createUI();
			CanvasSprite.setSpriteCanvasRender(this,101);
		}

		__class(ColorPickerPanel,'laya.editor.comonents.ColorPickerPanel',_super);
		var __proto=ColorPickerPanel.prototype;
		__proto.createUI=function(){
			this.picker=new ColorSelector();
			this.pickBack.addChild(this.picker);
			this.picker.on("ColorChanged",this,this.updateToUI);
			this.updateToUI();
			this.addTxtChangeH(this.colorTxt,this.colorTxtChange);
			this.addTxtChangeH(this.redTxt,this.rgbTxtChange);
			this.addTxtChangeH(this.greenTxt,this.rgbTxtChange);
			this.addTxtChangeH(this.blueTxt,this.rgbTxtChange);
		}

		__proto.addTxtChangeH=function(tar,fun){
			tar.on("enter",this,fun);
			tar.on("blur",this,fun);
		}

		__proto.updateToUI=function(){
			var rgb;
			rgb=this.picker.tColor;
			this.setColorTxts(rgb,true);
		}

		__proto.setColor=function(rgb){
			this.setColorTxts(rgb);
		}

		__proto.setColorTxts=function(rgb,fromPicker){
			(fromPicker===void 0)&& (fromPicker=false);
			this.colorTxt.text=ColorTool.getRGBStr(rgb);
			this.redTxt.text=Math.floor(rgb[0])+"";
			this.greenTxt.text=Math.floor(rgb[1])+"";
			this.blueTxt.text=Math.floor(rgb[2])+"";
			if(!fromPicker)
				this.picker.setColor(rgb[0],rgb[1],rgb[2],false);
			this.event("ColorChanged",this);
		}

		__proto.colorTxtChange=function(){
			if(this.colorTxt.text==""){
				this.event("COLOR_CLEARED",this);
				return;
			};
			var rgb;
			rgb=ColorTool.getRGBByRGBStr(this.colorTxt.text);
			this.setColorTxts(rgb);
		}

		__proto.rgbTxtChange=function(){
			var rgb;
			rgb=[this.getInt(this.redTxt.text),this.getInt(this.greenTxt.text),this.getInt(this.blueTxt.text)];
			this.setColorTxts(rgb);
		}

		__proto.getInt=function(str){
			return Math.floor(parseFloat(str));
		}

		__proto.updateFromUI=function(){}
		return ColorPickerPanel;
	})(ColorPickerPanelUI)


	/**
	*布局框标签
	*@author ww
	*/
	//class laya.editor.comonents.LayoutTab extends laya.editor.ui.comp.LayoutTabUI
	var LayoutTab=(function(_super){
		function LayoutTab(tabUI){
			this._ui=null;
			this._rec=null;
			LayoutTab.__super.call(this);
			this._ui=tabUI;
			this._ui.left=this._ui.right=this._ui.bottom=0;
			if((this._ui instanceof laya.rendercanvas.HtmlSprite )){
				this._ui.left=this._ui.right=this._ui.bottom=5;
			}
			this._ui.top=25;
			if(!this.canMix){
				this._ui.top=0;
			}
			this.close.on("click",this,this.onCloseClick);
			this.btn.on("mousedown",this,this.onBtnDown);
			this.onTitleChange();
			if(!this.canClose){
				this.close.visible=false;
			}
			this.btn.labelAlign="left";
			this.btn.labelPadding="-2,5,0,5"
			this.btn.labelColors=StyleConsts$1.LayoutTabTitleBtnColor;
		}

		__class(LayoutTab,'laya.editor.comonents.LayoutTab',_super);
		var __proto=LayoutTab.prototype;
		__proto.onBtnDown=function(e){
			if(LayoutRecManager.popLocked())return;
			if(this._rec&&!this._rec.canDragMe)return;
			var clip=new Clip(SkinDefines.LayoutTabDragIcon,1,3);
			clip.index=2;
			var type="LayoutTab";
			LayaBuilder.drag.doDrag(this ,clip,{type:type,target:this._rec},DragManager.dragOffset);
		}

		__proto.onCloseClick=function(e){
			if(this._rec)
				this._rec.removeTab(this,true);
			this.clears();
		}

		__proto.onTitleChange=function(e){
			var title;
			title=this._ui["title"]?this._ui["title"]:"我是标题啊";
			var len=ObjectUtils.getTextField(null,"*"+title).width+20;
			this.btn.width=len;
			this.close.x=len-this.close.displayWidth-3;
			this.btn.label=title;
		}

		__proto.clears=function(){
			this._ui=null;
		}

		__getset(0,__proto,'ui',function(){
			return this._ui;
		});

		__getset(0,__proto,'canClose',function(){
			if(!this._ui)return true;
			return this._ui["canClose"];
		});

		/**点击处理器(无默认参数)*/
		__getset(0,__proto,'clickHandler',function(){
			return this.btn.clickHandler;
			},function(value){
			this.btn.clickHandler=value;
		});

		__getset(0,__proto,'canMix',function(){
			if(!this._ui||!this._ui.hasOwnProperty("canMix"))return true;
			return this._ui["canMix"];
		});

		__getset(0,__proto,'freeSize',function(){
			if(!this._ui||!this._ui.hasOwnProperty("freeSize"))return false;
			return this._ui["freeSize"];
		});

		__getset(0,__proto,'width',function(){
			return this.btn.width;
		},_super.prototype._$set_width);

		/**是否是选择状态*/
		__getset(0,__proto,'selected',function(){
			return this.btn.selected;
			},function(value){
			this.btn.selected=value;
		});

		return LayoutTab;
	})(LayoutTabUI)


	/**视图标签
	*@author yung
	*/
	//class laya.editor.comonents.ViewTab extends laya.editor.ui.comp.viewTabUI
	var ViewTab=(function(_super){
		function ViewTab(uiViewer,tip){
			this._uiViewer=null;
			ViewTab.__super.call(this);
			this._uiViewer=uiViewer;
			uiViewer.left=uiViewer.right=uiViewer.bottom=0;
			uiViewer.top=0;
			if ((uiViewer instanceof laya.editor.view.UIViewer )){
				uiViewer.design.on("change",this,this.onDesignChange);
				}else{
				Laya.stage.on("pageChanged",this,this.onDesignChange);
			}
			this.onDesignChange(null);
			this.close.on("click",this,this.onCloseClick);
			this.btn.labelAlign="left";
			this.btn.labelPadding="-2,5,0,5"
			this.btn.labelColors=StyleConsts$1.LayoutTabTitleBtnColor;
			this.toolTip=tip?tip:FileManager.getRelativePath(SystemSetting.pagesPath,uiViewer.pagePath);
		}

		__class(ViewTab,'laya.editor.comonents.ViewTab',_super);
		var __proto=ViewTab.prototype;
		__proto.onCloseClick=function(e){
			UIPanel.instance.tryToClose(this._uiViewer);
		}

		//e.stopPropagation();
		__proto.onDesignChange=function(e){
			var len=ObjectUtils.getTextField(null,"*"+this._uiViewer.title).width+25;
			this.btn.width=len;
			this.close.x=len-this.close.displayWidth-3;
			this.btn.label=(this._uiViewer.hasChange ? "*" :"")+this._uiViewer.title;
		}

		__getset(0,__proto,'width',function(){
			return this.btn.width;
		},_super.prototype._$set_width);

		__getset(0,__proto,'uiViewer',function(){
			return this._uiViewer;
		});

		/**点击处理器(无默认参数)*/
		__getset(0,__proto,'clickHandler',function(){
			return this.btn.clickHandler;
			},function(value){
			this.btn.clickHandler=value;
		});

		/**是否是选择状态*/
		__getset(0,__proto,'selected',function(){
			return this.btn.selected;
			},function(value){
			this.btn.selected=value;
		});

		return ViewTab;
	})(viewTabUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.core.components.NumberInput extends laya.editor.core.components.EditorTextInput
	var NumberInput=(function(_super){
		function NumberInput(text){
			this._slideBtn=null;
			this._preX=NaN;
			this._preValue=NaN;
			this._isChanging=false;
			this._moveRate=0.2;
			(text===void 0)&& (text="");
			NumberInput.__super.call(this,text);
			this._slideBtn=new Image("comp/blank2.png");
			this._slideBtn.on("mousedown",this,this.slideMouseDown);
			this._slideBtn.top=1;
			this._slideBtn.bottom=1;
			this._slideBtn.width=10;
			this._slideBtn.right=1;
			this._slideBtn.toolTip=Sys.lang("鼠标按下上下拖动可修改值");
			this.addChild(this._slideBtn);
			this._tf.on("focus",this,this._$7_mOnFocus);
			this._tf.on("mousewheel",this,this.mOnMouseWheel);
		}

		__class(NumberInput,'laya.editor.core.components.NumberInput',_super);
		var __proto=NumberInput.prototype;
		__proto.mOnMouseWheel=function(e){
			console.log("mouseWheel:",e);
		}

		__proto._$7_mOnFocus=function(e){
			if (this._isChanging){
				this.stageMouseUp(null);
			}
		}

		__proto.slideMouseDown=function(e){
			if (!this.text||this.text.length<1)return;
			this._preValue=parseFloat(this.text);
			this._preX=Laya.stage.mouseY;
			this.clearSlideEvents();
			if(e&&e.shiftKey){
				this._moveRate=2;
				}else{
				this._moveRate=0.5;
			}
			Laya.timer.loop(100,this,this.updateValue);
			Laya.stage.on("mouseup",this,this.stageMouseUp);
			this._isChanging=true;
		}

		__proto.updateValue=function(){
			this.text=((Laya.stage.mouseY-this._preX)*this._moveRate+this._preValue).toFixed(0);
			this.event("changing",this);
		}

		__proto.stageMouseUp=function(e){
			this.clearSlideEvents();
			this.event("enter",this);
			this._isChanging=false;
		}

		__proto.clearSlideEvents=function(){
			Laya.stage.off("mouseup",this,this.stageMouseUp);
			Laya.timer.clear(this,this.updateValue);
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
		}

		__getset(0,__proto,'width',function(){
			return _super.prototype._$get_width.call(this)+12;
			},function(value){
			_super.prototype._$set_width.call(this,value-12);
		});

		return NumberInput;
	})(EditorTextInput)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-2-29 下午3:07:35
	*/
	//class laya.ide.ui.TabEx extends laya.ui.Tab
	var TabEx=(function(_super){
		function TabEx(){
			this._otherBack=null;
			this.maxLen=-1;
			this._otherContainer=null;
			this._otherBtn=null;
			TabEx.__super.call(this);
			this._otherContainer=new Box();
			this._otherContainer.mouseEnabled=true;
			this._otherBtn=new Button();
			this._otherBtn.skin="comp/button.png";
			this._otherBtn.width=20;
			this._otherBtn.on("click",this,this.switchOtherContainer);
			this._otherContainer.on("click",this,this.hideOtherContainer);
		}

		__class(TabEx,'laya.ide.ui.TabEx',_super);
		var __proto=TabEx.prototype;
		__proto.switchOtherContainer=function(){
			if(this._otherContainer.parent){
				this.hideOtherContainer();
				}else{
				this.showOtherContainer();
			}
		}

		__proto.hideOtherContainer=function(){
			this._otherContainer.removeSelf();
			Laya.stage.off("click",this,this.hideOtherContainer);
		}

		__proto.showOtherContainer=function(){
			var tPoint;
			tPoint=Point.TEMP;
			tPoint.setTo(this._otherBtn.width,this._otherBtn.height);
			tPoint=this._otherBtn.localToGlobal(tPoint);
			Laya._currentStage.addChild(this._otherContainer);
			this._otherContainer.pos(tPoint.x-this._otherContainer.width,tPoint.y);
			Laya.timer.once(100,this,this.addRemoveEvents);
		}

		__proto.addRemoveEvents=function(){
			if(!this._otherContainer.parent)return;
			Laya.stage.off("click",this,this.hideOtherContainer);
			Laya.stage.on("click",this,this.hideOtherContainer);
		}

		__proto.addItem=function(item,autoLayOut){
			(autoLayOut===void 0)&& (autoLayOut=true);
			var rst=0;
			rst=laya.ui.UIGroup.prototype.addItem.call(this,item,autoLayOut);
			this.updateUI();
			if(this.maxLen<0)return rst;
			if((item).parent==this._otherContainer){
				this.itemClick(rst);
			}
			return this._items.indexOf(item);
		}

		__proto.delItem=function(item,autoLayOut){
			(autoLayOut===void 0)&& (autoLayOut=true);
			var index=this._items.indexOf(item);
			if (index !=-1){
				var display=item;
				this.removeChild(display);
				for (var i=index+1,n=this._items.length;i < n;i++){
					var child=this._items [i];
					child.name="item"+(i-1);
					if (autoLayOut){
						if (this._direction=="horizontal"){
							child.x-=display.width+this._space;
							}else {
							child.y-=display.height+this._space;
						}
					}
				}
				this._items.splice(index,1);
				this.initItems();
				if (this._selectedIndex >-1){
					var newIndex=0;
					newIndex=this._selectedIndex < this._items.length ? this._selectedIndex :(this._selectedIndex-1);
					this._selectedIndex=99;
					this.selectedIndex=newIndex;
				}
			}
			this.updateUI();
		}

		__proto.switchItemToDis=function(index){
			var tItem;
			tItem=this._items[index];
			this._items.splice(index,1);
			this._items.unshift(tItem);
			this.reNameItems();
			this.initItems();
			this.updateUI();
			return this._items.indexOf(tItem);
		}

		__proto.reNameItems=function(){
			var i=0,len=0;
			var tItem;
			len=this._items.length;
			for(i=0;i<len;i++){
				tItem=this._items [i];
				tItem.name="item"+i;
			}
		}

		__proto.itemClick=function(index){
			laya.ui.UIGroup.prototype.itemClick.call(this,index);
		}

		__proto.updateUI=function(){
			if(this.maxLen<0)return;
			var maxUILen=NaN;
			maxUILen=this.maxLen-this._otherBtn.width-2;
			var i=0,len=0;
			len=this._items.length;
			var _otherList;
			_otherList=[];
			var preItem;
			var tItem;
			var tX=NaN;
			var tY=NaN;
			tX=0;
			tY=0;
			for(i=0;i<len;i++){
				tItem=this._items [i];
				tItem.pos(tX,tY);
				this.addChild(tItem);
				if (this._direction=="horizontal"){
					tX=tItem.x+tItem.width+this._space;
					if(tX>maxUILen){
						_otherList.push(tItem);
					}
					}else {
					tY=tItem.y+tItem.height+this._space;
				}
			}
			if(_otherList.length>0){
				this.addChild(this._otherBtn);
				this._otherBtn.pos(this.maxLen-this._otherBtn.width,0);
				}else{
				this._otherBtn.removeSelf();
			}
			this.setUpOtherList(_otherList);
		}

		__proto.setUpOtherList=function(_items){
			if(!this._otherBack){
				this._otherBack=new Image();
				this._otherBack.skin="view/bg_menu.png";
			}
			this._otherContainer.removeChildren();
			this._otherBack.size(10,10);
			this._otherContainer.addChild(this._otherBack);
			var i=0,len=0;
			len=_items.length;
			var tItem;
			var tX=NaN;
			var tY=NaN;
			tX=0;
			tY=0;
			for(i=0;i<len;i++){
				tItem=_items[i];
				tItem.pos(tX,tY);
				this._otherContainer.addChild(tItem);
				tY=tItem.y+tItem.height+this._space;
			}
			this._otherBack.size(this._otherContainer.width,this._otherContainer.height);
		}

		__proto.initItems=function(){
			if(this.maxLen>0){
				if(this._items){
					var i=0,len=0;
					len=this._items.length;
					var tItem;
					for(i=0;i<len;i++){
						tItem=this._items [i];
						this.addChild(tItem);
					}
				}
			}
			laya.ui.UIGroup.prototype.initItems.call(this);
		}

		__getset(0,__proto,'selectedIndex',_super.prototype._$get_selectedIndex,function(value){
			if(this.maxLen<0){
				_super.prototype._$set_selectedIndex.call(this,value);
				return;
			};
			var tItem;
			tItem=this._items [value];
			if(tItem){
				if(tItem.parent==this._otherContainer){
					var newIndex=0;
					newIndex=this.switchItemToDis(value);
					this._selectedIndex=-2;
					_super.prototype._$set_selectedIndex.call(this,newIndex);
					return;
				}
			}
			this.setSelect(this._selectedIndex,false);
			this._selectedIndex=-2;
			_super.prototype._$set_selectedIndex.call(this,value);
		});

		return TabEx;
	})(Tab)


	//class laya.editor.ui.BasicPanelUI extends laya.ide.ui.DragView
	var BasicPanelUI=(function(_super){
		function BasicPanelUI(){
			this.resTree=null;
			this.opBox=null;
			BasicPanelUI.__super.call(this);
		}

		__class(BasicPanelUI,'laya.editor.ui.BasicPanelUI',_super);
		var __proto=BasicPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(BasicPanelUI.uiView);
		}

		__static(BasicPanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"48","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"415"}},{"type":"TreeEx","child":[{"type":"Box","child":[{"type":"Clip","props":{"x":"13","y":"0","left":"9","height":"25","name":"selectBox","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Image","props":{"name":"icon","width":"16","height":"16","y":"4","skin":"comp/folder.png","x":"14"}},{"type":"Label","props":{"y":"2","text":"label","width":"150","left":"38","height":"22","name":"label","color":"#d8d8d8","right":"0","padding":"4,0,0,0","x":"33"}},{"type":"Clip","props":{"y":"6","width":"11","clipY":"2","height":"12","name":"arrow","skin":"comp/clip_tree.png","x":"0"}}],"props":{"name":"render","right":"0","left":"0"}}],"props":{"scrollBarSkin":"comp/vscroll.png","y":"552","hitTestPrior":"true","right":"2","width":"196","left":"2","height":"136","top":"2","var":"resTree","bottom":"29","x":"173"}},{"type":"Box","child":[{"type":"Image","props":{"bottom":"0","width":"191","left":"0","sizeGrid":"0,4,0,4","top":"0","skin":"view/bg_panel_bar.png","right":"0"}},{"type":"Button","props":{"stateNum":"3","y":"3","name":"openDirBtn","scaleX":"0.5","toolTip":"打开所在目录","scaleY":"0.5","skin":"view/login2.png","x":"3"}},{"type":"Button","props":{"stateNum":"3","y":"4","name":"refreshBtn","scaleX":"0.5","toolTip":"刷新资源树","scaleY":"0.5","skin":"view/refresh2.png","x":"26"}}],"props":{"y":"271","right":"0","width":"198","left":"0","height":"28","bottom":"0","var":"opBox","x":"1"}}],"props":{"title":"元件","height":"300","hitTestPrior":"true","scenecolor":"#dddddd","width":"200"}};}
		]);
		return BasicPanelUI;
	})(DragView)


	//class laya.editor.ui.DisplayTreePanelUI extends laya.ide.ui.DragView
	var DisplayTreePanelUI=(function(_super){
		function DisplayTreePanelUI(){
			this.opBox=null;
			this.fliterTxt=null;
			this.clearSearchBtn=null;
			this.displayTree=null;
			DisplayTreePanelUI.__super.call(this);
		}

		__class(DisplayTreePanelUI,'laya.editor.ui.DisplayTreePanelUI',_super);
		var __proto=DisplayTreePanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(DisplayTreePanelUI.uiView);
		}

		__static(DisplayTreePanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"10","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"10"}},{"type":"Box","child":[{"type":"Image","props":{"bottom":"0","width":"191","left":"0","sizeGrid":"0,4,0,4","top":"0","skin":"view/bg_panel_bar.png","right":"0"}},{"type":"TextInput","props":{"y":"4","var":"fliterTxt","width":"115","left":"80","sizeGrid":"0,3,0,3","toolTip":"输入关键词过滤","color":"#dddddd","skin":"comp/input_filter.png","right":"5","padding":"0,10,0,18","x":"80"}},{"type":"Button","props":{"stateNum":"3","y":"4","name":"refreshBtn","scaleX":"0.5","toolTip":"刷新层级列表","scaleY":"0.5","skin":"view/refresh2.png","x":"3"}},{"type":"Clip","props":{"scaleX":"0.5","y":"9","name":"ifShowAll","x":"31","toolTip":"全部隐藏","scaleY":"0.5","skin":"view/clip_hide.png","clipY":"2"}},{"type":"Clip","props":{"y":"3","name":"ifLockAll","width":"24","x":"55","height":"24","toolTip":"全部锁定","skin":"view/clip_lock.png","clipY":"2"}},{"type":"Clip","props":{"scaleX":"0.5","y":"4","scaleY":"0.5","index":"1","x":"82","skin":"view/search.png","clipY":"2"}},{"type":"Button","props":{"scaleX":"0.5","y":"10","scaleY":"0.5","var":"clearSearchBtn","skin":"view/btn_close1.png","right":"5","x":"181"}}],"props":{"y":"291","right":"0","left":"0","height":"28","bottom":"0","var":"opBox","x":"25"}},{"type":"TreeEx","child":[{"type":"Box","child":[{"type":"Clip","props":{"x":"12","y":"0","width":"184","left":"9","height":"26","name":"selectBox","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Label","props":{"y":"3","text":"label","width":"108","left":"38","height":"18","name":"label","color":"#d8d8d8","right":"50","padding":"4,0,0,0","x":"38"}},{"type":"Clip","props":{"y":"6","width":"11","clipY":"2","height":"12","name":"arrow","skin":"comp/clip_tree.png","x":"0"}},{"type":"Clip","props":{"y":"0","clipX":"1","width":"22","mouseEnabled":"true","height":"26","name":"ifShow","skin":"view/clip_hide1.png","right":"22","clipY":"2"}},{"type":"Clip","props":{"y":"0","clipX":"1","width":"22","x":"160","mouseEnabled":"true","height":"26","name":"ifLock","skin":"view/clip_lock1.png","right":"0","clipY":"2"}},{"type":"Image","props":{"y":"5","width":"16","height":"16","name":"icon","skin":"comp/folder.png","x":"14"}}],"props":{"height":"26","name":"render","right":"0","left":"0"}}],"props":{"scrollBarSkin":"comp/vscroll.png","y":"45","bottom":"30","left":"2","top":"10","right":"2","var":"displayTree","x":"15"}}],"props":{"title":"层级","height":"400","hitTestPrior":"true","scenecolor":"#dddddd","width":"200"}};}
		]);
		return DisplayTreePanelUI;
	})(DragView)


	//class laya.editor.ui.FramePropUI extends laya.ide.ui.DragView
	var FramePropUI=(function(_super){
		function FramePropUI(){
			this.tweenTip=null;
			this.tweenSelect=null;
			this.nameTxt=null;
			this.keyTxt=null;
			this.valueTxt=null;
			this.hasTween=null;
			this.targetTxt=null;
			this.targetIDTxt=null;
			this.labelTipTxt=null;
			this.labelTxt=null;
			FramePropUI.__super.call(this);
		}

		__class(FramePropUI,'laya.editor.ui.FramePropUI',_super);
		var __proto=FramePropUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(FramePropUI.uiView);
		}

		__static(FramePropUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"0","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"0"}},{"type":"Label","props":{"y":"145","text":"缓动类型","align":"right","color":"#c5c5c5","var":"tweenTip","x":"13"}},{"type":"Label","props":{"y":"15","color":"#c5c5c5","text":"动效名称","x":"12"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","labels":"自定义模板,常用模板","right":"5","sizeGrid":"0,20,0,3","skin":"comp/combo_22.png","var":"tweenSelect","x":"70","y":"141","selectedIndex":"0","width":"124","left":"70","height":"22","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5"}},{"type":"TextInput","props":{"height":"22","y":"11","var":"nameTxt","width":"109","left":"70","restrict":"0-9A-Za-z_","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","x":"83"}},{"type":"Label","props":{"y":"66","text":"关键帧值","width":"58","height":"18","color":"#c5c5c5","var":"keyTxt","x":"12"}},{"type":"TextInput","props":{"height":"22","y":"63","var":"valueTxt","width":"109","left":"70","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","x":"70"}},{"type":"CheckBox","props":{"y":"120","var":"hasTween","label":"是否缓动","skin":"comp/checkbox.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"15"}},{"type":"Label","props":{"y":"41","text":"目标对象","width":"58","height":"18","color":"#c5c5c5","var":"targetTxt","x":"12"}},{"type":"TextInput","props":{"height":"22","y":"37","var":"targetIDTxt","width":"109","left":"70","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","x":"70"}},{"type":"Label","props":{"y":"91","text":"标签label","width":"58","height":"18","color":"#c5c5c5","var":"labelTipTxt","x":"12"}},{"type":"TextInput","props":{"height":"22","y":"89","var":"labelTxt","width":"109","left":"70","sizeGrid":"0,3,0,3","color":"#c5c5c5","skin":"comp/input_22.png","right":"5","x":"68"}}],"props":{"height":"300","scenecolor":"#dddddd","title":"帧属性","width":"200"}};}
		]);
		return FramePropUI;
	})(DragView)


	//class laya.editor.ui.PagePanelUI extends laya.ide.ui.DragView
	var PagePanelUI=(function(_super){
		function PagePanelUI(){
			this.pageTree=null;
			this.opBox=null;
			this.fliterTxt=null;
			this.clearSearchBtn=null;
			PagePanelUI.__super.call(this);
		}

		__class(PagePanelUI,'laya.editor.ui.PagePanelUI',_super);
		var __proto=PagePanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PagePanelUI.uiView);
		}

		__static(PagePanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"0","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"0"}},{"type":"TreeEx","child":[{"type":"Box","child":[{"type":"Clip","props":{"x":"13","y":"0","left":"9","height":"24","name":"selectBox","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Image","props":{"name":"icon","width":"16","height":"16","y":"3","skin":"comp/folder.png","x":"15"}},{"type":"Label","props":{"y":"1","text":"label","width":"150","left":"38","height":"22","name":"label","color":"#d8d8d8","right":"0","padding":"4,0,0,0","x":"33"}},{"type":"Clip","props":{"y":"5","width":"11","clipY":"2","height":"12","name":"arrow","skin":"comp/clip_tree.png","x":"0"}}],"props":{"name":"render","right":"0","left":"0"}}],"props":{"scrollBarSkin":"comp/vscroll.png","y":"22","right":"2","width":"190","left":"2","height":"260","top":"5","var":"pageTree","bottom":"29","x":"306"}},{"type":"Box","child":[{"type":"Image","props":{"bottom":"0","width":"191","left":"0","sizeGrid":"0,4,0,4","top":"0","skin":"view/bg_panel_bar.png","right":"0"}},{"type":"TextInput","props":{"y":"4","var":"fliterTxt","width":"148","left":"80","sizeGrid":"0,3,0,3","toolTip":"输入关键词过滤","color":"#dddddd","skin":"comp/input_filter.png","right":"5","padding":"0,10,0,18","x":"80"}},{"type":"Button","props":{"stateNum":"3","y":"3","toolTip":"打开所在目录","scaleX":"0.5","name":"openDirBtn","scaleY":"0.5","skin":"view/login2.png","x":"3"}},{"type":"Button","props":{"stateNum":"3","y":"3","name":"setPropBtn","scaleX":"0.5","toolTip":"设置默认属性","scaleY":"0.5","skin":"view/settings2.png","x":"29"}},{"type":"Button","props":{"stateNum":"3","y":"4","name":"refreshBtn","scaleX":"0.5","toolTip":"刷新页面列表","scaleY":"0.5","skin":"view/refresh2.png","x":"55"}},{"type":"Clip","props":{"scaleX":"0.5","y":"4","scaleY":"0.5","index":"1","x":"79","skin":"view/search.png","clipY":"2"}},{"type":"Button","props":{"scaleX":"0.5","y":"10","scaleY":"0.5","var":"clearSearchBtn","skin":"view/btn_close1.png","right":"5","x":"180"}}],"props":{"y":"271","right":"0","width":"198","left":"0","height":"28","bottom":"0","var":"opBox","x":"1"}}],"props":{"title":"项目","height":"300","hitTestPrior":"true","scenecolor":"#dddddd","width":"200"}};}
		]);
		return PagePanelUI;
	})(DragView)


	//class laya.editor.ui.PropPanelUI extends laya.ide.ui.DragView
	var PropPanelUI=(function(_super){
		function PropPanelUI(){
			this.typeIcon=null;
			this.typeLbl=null;
			PropPanelUI.__super.call(this);
		}

		__class(PropPanelUI,'laya.editor.ui.PropPanelUI',_super);
		var __proto=PropPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(PropPanelUI.uiView);
		}

		__static(PropPanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"0","bottom":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","right":"0","x":"0"}},{"type":"Image","props":{"y":"10","skin":"comp/image.png","var":"typeIcon","x":"7"}},{"type":"Label","props":{"y":"10","text":"label","color":"#ffff00","fontSize":"14","var":"typeLbl","bold":"true","x":"34"}}],"props":{"hitTestPrior":"true","minWidth":"200","scenecolor":"#dddddd","title":"属性","mouseEnabled":"true"}};}
		]);
		return PropPanelUI;
	})(DragView)


	//class laya.editor.ui.ResPanelUI extends laya.ide.ui.DragView
	var ResPanelUI=(function(_super){
		function ResPanelUI(){
			this.resTree=null;
			this.resViewer=null;
			this.opBox=null;
			this.fliterTxt=null;
			this.clearSearchBtn=null;
			this.sizeTxt=null;
			ResPanelUI.__super.call(this);
		}

		__class(ResPanelUI,'laya.editor.ui.ResPanelUI',_super);
		var __proto=ResPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(ResPanelUI.uiView);
		}

		__static(ResPanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"48","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"415"}},{"type":"TreeEx","child":[{"type":"Box","child":[{"type":"Clip","props":{"x":"13","y":"0","left":"9","height":"25","name":"selectBox","skin":"comp/clip_selectBox.png","right":"0","clipY":"2"}},{"type":"Image","props":{"name":"icon","width":"16","height":"16","y":"4","skin":"comp/folder.png","x":"14"}},{"type":"Label","props":{"y":"2","text":"label","width":"150","left":"38","height":"22","name":"label","color":"#d8d8d8","right":"0","padding":"4,0,0,0","x":"33"}},{"type":"Clip","props":{"y":"6","width":"11","clipY":"2","height":"12","name":"arrow","skin":"comp/clip_tree.png","x":"0"}}],"props":{"name":"render","right":"0","left":"0"}}],"props":{"scrollBarSkin":"comp/vscroll.png","y":"552","hitTestPrior":"true","right":"2","width":"196","left":"2","height":"136","top":"112","var":"resTree","bottom":"29","x":"173"}},{"type":"Image","props":{"y":"3","var":"resViewer","width":"198","left":"1","height":"100","right":"1","x":"222"}},{"type":"Image","props":{"y":"106","left":"0","height":"1","skin":"comp/line.png","right":"0","x":"2"}},{"type":"Box","child":[{"type":"Image","props":{"bottom":"0","width":"191","left":"0","sizeGrid":"0,4,0,4","top":"0","skin":"view/bg_panel_bar.png","right":"0"}},{"type":"TextInput","props":{"y":"4","var":"fliterTxt","width":"148","left":"80","sizeGrid":"0,3,0,3","toolTip":"输入关键词过滤","color":"#dddddd","skin":"comp/input_filter.png","right":"5","padding":"0,10,0,18","x":"80"}},{"type":"Button","props":{"stateNum":"3","y":"3","name":"openDirBtn","scaleX":"0.5","toolTip":"打开所在目录","scaleY":"0.5","skin":"view/login2.png","x":"3"}},{"type":"Button","props":{"stateNum":"3","y":"3","name":"setPropBtn","scaleX":"0.5","toolTip":"设置默认属性","scaleY":"0.5","skin":"view/settings2.png","x":"29"}},{"type":"Button","props":{"stateNum":"3","y":"4","name":"refreshBtn","scaleX":"0.5","toolTip":"刷新资源树","scaleY":"0.5","skin":"view/refresh2.png","x":"55"}},{"type":"Clip","props":{"scaleX":"0.5","y":"4","scaleY":"0.5","index":"1","x":"79","skin":"view/search.png","clipY":"2"}},{"type":"Button","props":{"scaleX":"0.5","y":"10","scaleY":"0.5","var":"clearSearchBtn","skin":"view/btn_close1.png","right":"5","x":"182"}}],"props":{"y":"271","right":"0","width":"198","left":"0","height":"28","bottom":"0","var":"opBox","x":"1"}},{"type":"Label","props":{"y":"82","text":"512*512","width":"162","align":"left","height":"19","name":"label","color":"#d8d8d8","padding":"4,0,0,0","var":"sizeTxt","x":"6"}}],"props":{"title":"资源","height":"300","hitTestPrior":"true","scenecolor":"#dddddd","width":"200"}};}
		]);
		return ResPanelUI;
	})(DragView)


	//class laya.editor.ui.template.CompPanelUI extends laya.ide.ui.DragView
	var CompPanelUI=(function(_super){
		function CompPanelUI(){
			this.bg=null;
			this.groupBox=null;
			CompPanelUI.__super.call(this);
		}

		__class(CompPanelUI,'laya.editor.ui.template.CompPanelUI',_super);
		var __proto=CompPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(CompPanelUI.uiView);
		}

		__static(CompPanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"20","var":"bg","left":"0","height":"31","top":"0","skin":"view/bg_panel.png","right":"0","bottom":"0","x":"20"}},{"type":"Box","child":[{"type":"Button","props":{"sizeGrid":"0,4,0,4","skin":"comp/button.png","labelColors":"#dddddd,#dddddd,#dddddd","label":"label"}}],"props":{"x":"0","y":"0","right":"0","left":"0","top":"2","var":"groupBox","bottom":"2","mouseEnabled":"true"}}],"props":{"title":"模板","height":"400","scenecolor":"#dddddd","width":"600"}};}
		]);
		return CompPanelUI;
	})(DragView)


	//class laya.editor.ui.TimeLinePanelUI extends laya.ide.ui.DragView
	var TimeLinePanelUI=(function(_super){
		function TimeLinePanelUI(){
			this.timeLine=null;
			this.mHScroll=null;
			this.mVScroll=null;
			this.aniSelect=null;
			this.addBtn=null;
			this.removeBtn=null;
			this.editMode=null;
			this.cloneBtn=null;
			this.frameRateTxt=null;
			this.action=null;
			this.frameTxt=null;
			this.timelineSizeControl=null;
			this.circlePlay=null;
			this.playControlBar=null;
			this.opMask=null;
			TimeLinePanelUI.__super.call(this);
		}

		__class(TimeLinePanelUI,'laya.editor.ui.TimeLinePanelUI',_super);
		var __proto=TimeLinePanelUI.prototype;
		__proto.createChildren=function(){
			View.viewClassMap["laya.editor.view.timeline.PlayControl"]=PlayControl;
			View.viewClassMap["laya.editor.view.timeline.TimeGrid"]=TimeGrid;
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(TimeLinePanelUI.uiView);
		}

		__static(TimeLinePanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"4,4,4,4","y":"0","right":"0","width":"200","left":"0","height":"300","top":"0","skin":"view/bg_panel.png","bottom":"0","x":"0"}},{"type":"TimeGrid","props":{"runtime":"laya.editor.view.timeline.TimeGrid","y":"35","var":"timeLine","x":"203"}},{"type":"HScrollBar","props":{"y":"282","bottom":"5","width":"177","height":"13","skin":"comp/hscroll.png","var":"mHScroll","right":"5","x":"443"}},{"type":"VScrollBar","props":{"y":"15","var":"mVScroll","width":"13","height":"264","top":"30","skin":"comp/vscroll.png","bottom":"20","right":"-2","x":"582"}},{"type":"Box","child":[{"type":"Label","props":{"y":"4","color":"#c5c5c5","text":"动效：","x":"94"}},{"type":"ComboBox","props":{"scrollBarSkin":"comp/vscroll.png","sizeGrid":"0,20,0,3","selectedIndex":"0","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","width":"97","skin":"comp/combo_22.png","height":"22","labels":"自定义模板,常用模板","var":"aniSelect","x":"129"}},{"type":"Button","props":{"scaleX":"0.5","toolTip":"添加","name":"sure","y":"1","scaleY":"0.5","skin":"play/btn_add.png","var":"addBtn","x":"233"}},{"type":"Button","props":{"scaleX":"0.5","toolTip":"删除","name":"sure","y":"1","scaleY":"0.5","skin":"play/btn_del.png","var":"removeBtn","x":"283"}},{"type":"CheckBox","props":{"labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","y":"4","skin":"comp/checkbox.png","var":"editMode","label":" 动画编辑模式"}},{"type":"Button","props":{"scaleX":"0.5","y":"1","scaleY":"0.5","toolTip":"复制","skin":"play/btn_clone.png","var":"cloneBtn","x":"258"}}],"props":{"y":"3","x":"7"}},{"type":"Image","props":{"y":"26","width":"587","left":"5","height":"1","skin":"comp/line.png","right":"5","x":"5"}},{"type":"HBox","child":[{"type":"Label","props":{"y":"4","wordWrap":"false","text":"帧率：","align":"right","height":"20","color":"#c5c5c5","x":"0"}},{"type":"TextInput","props":{"sizeGrid":"0,3,0,3","disabled":"true","width":"26","mouseEnabled":"true","restrict":"0-9","height":"22","color":"#c5c5c5","skin":"comp/input_22.png","text":"24","var":"frameRateTxt","x":"48"}},{"type":"Label","props":{"y":"4","wordWrap":"false","text":"加载后：","align":"right","height":"20","color":"#c5c5c5","x":"66"}},{"type":"ComboBox","props":{"sizeGrid":"0,20,0,3","selectedIndex":"0","var":"action","width":"76","height":"22","labels":"不播放,播放一次,循环播放","skin":"comp/combo_22.png","labelColors":"#c5c5c5,#c5c5c5,#c5c5c5,#c5c5c5","x":"127"}},{"type":"Label","props":{"y":"4","wordWrap":"false","text":"帧：","align":"right","height":"20","color":"#c5c5c5","x":"194"}},{"type":"TextInput","props":{"sizeGrid":"0,3,0,3","text":"0","width":"26","mouseEnabled":"true","restrict":"0-9","height":"22","color":"#c5c5c5","skin":"comp/input_22.png","var":"frameTxt","x":"246"}}],"props":{"x":"2","mouseEnabled":"true","y":"275","bottom":"0","left":"5"}},{"type":"HSlider","props":{"value":"12","x":"370","skin":"comp/hslider.png","bottom":"8","tick":"2","y":"293","max":"20","var":"timelineSizeControl","width":"62","min":"6","height":"6","right":"190"}},{"type":"CheckBox","props":{"scaleX":"0.5","y":"33","scaleY":"0.5","toolTip":"循环","skin":"play/btn_replay.png","var":"circlePlay","x":"133"}},{"type":"PlayControl","props":{"name":"playControl","y":"29","runtime":"laya.editor.view.timeline.PlayControl","var":"playControlBar","x":"3"}},{"type":"Image","props":{"mouseEnabled":"true","sizeGrid":"4,4,4,4","top":"28","skin":"view/bg_panel.png","var":"opMask","x":"1","y":"28","bottom":"2","width":"600","left":"2","height":"270","right":"2"}}],"props":{"scenecolor":"#dddddd","minWidth":"400","hitTestPrior":"true","bottom":"0","width":"600","left":"0","height":"300","title":"时间轴","right":"0"}};}
		]);
		return TimeLinePanelUI;
	})(DragView)


	//class laya.editor.ui.UIPanelUI extends laya.ide.ui.DragView
	var UIPanelUI=(function(_super){
		function UIPanelUI(){
			this.tab=null;
			UIPanelUI.__super.call(this);
		}

		__class(UIPanelUI,'laya.editor.ui.UIPanelUI',_super);
		var __proto=UIPanelUI.prototype;
		__proto.createChildren=function(){
			laya.ui.Component.prototype.createChildren.call(this);
			this.createView(UIPanelUI.uiView);
		}

		__static(UIPanelUI,
		['uiView',function(){return this.uiView={"type":"DragView","child":[{"type":"Image","props":{"sizeGrid":"0,3,0,3","y":"0","width":"164","left":"0","height":"25","skin":"view/bg_panel_layoutrec.png","right":"0","x":"0"}},{"type":"Tab","props":{"y":"0","skin":"comp/tab.png","var":"tab","labelColors":"#aaaaaa,#aaaaaa,#aaaaaa","x":"0"}}],"props":{"hitTestPrior":"true","scenecolor":"#dddddd","title":"UI"}};}
		]);
		return UIPanelUI;
	})(DragView)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.group.ItemGroup extends laya.editor.ui.group.ItemGroupUI
	var ItemGroup=(function(_super){
		function ItemGroup(){
			this._itemBox=null;
			ItemGroup.__super.call(this);
			this.groupBox.removeChildren();
			this.groubBar.on("mousedown",this,this.onGroubBarClick);
			this.left=0;
			this.right=0;
			this.groupBox.left=0;
			this.groupBox.right=0;
			this.groupLabl.color=StyleConsts$1.FolderTxtColor;
		}

		__class(ItemGroup,'laya.editor.view.group.ItemGroup',_super);
		var __proto=ItemGroup.prototype;
		__proto.setData=function(name,itemBox){
			this._itemBox=itemBox;
			this.groupLabl.text=name;
			this.arrowClip.index=1;
			this.groupBox.removeChildren();
			this.groupBox.addChild(itemBox);
		}

		//
		__proto.onGroubBarClick=function(e){
			if (this.groupBox.parent){
				this.groupBox.removeSelf();
				this.arrowClip.index=0;
				}else {
				this.addChild(this.groupBox);
				this.arrowClip.index=1;
			}
			this.event("UIChange");
		}

		return ItemGroup;
	})(ItemGroupUI)


	/**
	*布局框
	*@author ww
	*/
	//class laya.editor.view.LayoutRec extends laya.editor.ui.LayoutRecUI
	var LayoutRec=(function(_super){
		function LayoutRec(){
			this.disList=null;
			this._dragBox=null;
			this._backHeight=NaN;
			this.preWidth=0;
			this.preHeight=0;
			this._curUI=null;
			this.tTabTxt=null;
			this.relativeO={};
			this._disMode=2;
			LayoutRec.__super.call(this);
			this.tab.on("change",this,this.onTabChange);
			this.back.on("mousedown",this,this.onBackDown);
			this.back.on("doubleclick",this,this.onBackDoubleDown);
			this.disList=[this.tab];
			this._backHeight=this.back.height;
			this.on("Draging_Hit",this,this._$7_onMouseOver);
			this.on("mouseover",this,this.onMouseOverThis);
			this.updateUIState();
			CanvasSprite.setSpriteCanvasRender(this);
			this.on("added",this,this._$7_onAdded);
			Notice$1.listen("SHOW_LayoutTab_By_Name",this,this.showTabByName);
		}

		__class(LayoutRec,'laya.editor.view.LayoutRec',_super);
		var __proto=LayoutRec.prototype;
		// visible=false;
		__proto._$7_onAdded=function(){
			if(this.parent==LayerManager.stage){
				CanvasSprite.setSpriteCanvasIndex(this,102);
			}
		}

		__proto.updateUIState=function(){
			this.back.visible=this.tab.visible=this.canAddTab;
		}

		__proto.onMouseOverThis=function(E){
			if (this.parent==LayerManager.stage){
				DisResizer$1.setUp(this,true);
			}
		}

		__proto.onThisDown=function(e){
			if (this.parent==LayerManager.stage){
				DisResizer$1.setUp(this,true);
			}
		}

		__proto.onBackDown=function(e){
			if (this.parent==LayerManager.stage){
				this.startDrag();
				this.once("dragend",this,this.stopDrag);
				}else{
				this.startDragMe();
			}
		}

		__proto.onBackDoubleDown=function(e){
			if (this.parent !=LayerManager.stage){
				LayoutRecManager.popRec(this);
			}
			else{
			}
		}

		//DisResizer.setUp(this);
		__proto.goMinState=function(){
			DisControlTool.removeItems(this.disList);
		}

		//back.bottom=0;
		__proto.goMaxState=function(){
			DisControlTool.addItems(this.disList,this);
		}

		//Laya.timer.once(100,this,later);
		__proto.later=function(){
			this.back.height=this._backHeight;
		}

		__proto._$7_onMouseOver=function(e){
			if (!DragManager.isDraging)return;
			if (!(DragManager.getDragType()=="LayoutRec" || DragManager.getDragType()=="LayoutTab"))return;
			var type=RelativePos.getDisMouseRelativePos(this);
			if(DragManager.getDragTarget()==this){
				if(type=="up"){
					type="center";
				}
			}
			if(DragManager.getDragType()=="LayoutTab"){
				if(type=="up"){
					type="center";
				}
			};
			var focusWidth=NaN;
			switch (type){
				case "right":
				case "left":
					focusWidth=0.5*this.width;
					FocusManager.showBorder(this,type,true,null,focusWidth);
					break ;
				case "up":
				case "down":
					focusWidth=0.5*this.height;
					FocusManager.showBorder(this,type,true,null,focusWidth);
					break ;
				case "center":
					FocusManager.showFocus(this);
					break ;
				}
			DisControlTool.setTop(this);
		}

		__proto._$7_onMouseOut=function(e){}
		__proto.onDragDown=function(e){
			e.stopPropagation();
			this.startDragMe();
		}

		__proto.startDragMe=function(self){
			(self===void 0)&& (self=false);
			if(LayoutRecManager.popLocked())return;
			if(!this.canDragMe)return;
			var clip=new Clip(SkinDefines.LayoutRecDragIcon,1,3);
			clip.index=2;
			var type="LayoutRec";
			LayaBuilder.drag.doDrag(this,self?null:clip,{type:type,target:this},DragManager.dragOffset);
		}

		__proto.closeHandler=function(e){
			LayoutRecManager.removeRec(this);
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
		}

		__proto.onTabChange=function(e){
			if (this._curUI){
				this._curUI.removeSelf();
				this._curUI=null;
			}
			if (this.tab.selectedIndex !=-1){
				this._curUI=(this.tab.selection).ui;
				this.addChildAt(this._curUI,0);
				this.tTabTxt=this._curUI["title"];
				if((this._curUI instanceof laya.editor.view.UIPanel )){
					this.cacheAsBitmap=false;
					(this.tab.selection).cacheAsBitmap=false;
				}
			}
		}

		__proto.addUI=function(ui){
			var uiTab=new LayoutTab(ui);
			this.addTab(uiTab);
		}

		__proto.addTab=function(uiTab){
			var index=0;
			index=this.tab.addItem(uiTab);
			this.tab.selectedIndex=index;
			uiTab._rec=this;
			this.updateUIState();
		}

		__proto.removeTab=function(uiTab,autoRemove){
			(autoRemove===void 0)&& (autoRemove=false);
			this.tab.delItem(uiTab);
			uiTab._rec=null;
			this.updateUIState();
			if(autoRemove&&this.tab.items.length<1){
				LayoutRecManager.removeRec(this);
			}
		}

		// onTabChange(null);
		__proto.removeUI=function(ui,autoRemove){
			(autoRemove===void 0)&& (autoRemove=false);
			var tabList;
			tabList=this.tab.items;
			var i=0,len=0;
			len=tabList.length;
			for(i=0;i<len;i++){
				if(tabList[i].ui==ui){
					this.removeTab(tabList[i],autoRemove);
					return;
				}
			}
		}

		__proto.getUIs=function(){
			var i=0,len=0;
			var items;
			items=this.tab.items;
			len=items.length;
			var rst;
			rst=[];
			for (i=0;i < len;i++){
				rst.push((items [i]).ui);
			}
			return rst;
		}

		__proto.clearRelative=function(){
			RelativePos.clearBar(this);
		}

		__proto.showTabByName=function(tabName){
			if(this._curUI&&this._curUI["title"]==tabName)return;
			var tabList;
			tabList=this.tab.items;
			var i=0,len=0;
			len=tabList.length;
			for(i=0;i<len;i++){
				if(tabList[i].ui&&tabList[i].ui["title"]==tabName){
					this.tab.selectedIndex=i;
					return;
				}
			}
		}

		__proto.clears=function(){
			Notice$1.cancel("SHOW_LayoutTab_By_Name",this,this.showTabByName);
			this.clearRelative();
			this.tab.destroy();
			this.destroy(false);
			CanvasSprite.removeSpriteCanvas(this);
		}

		__getset(0,__proto,'disMode',function(){
			return this._disMode;
			},function(type){
			if (this._disMode !=1){
				this.preWidth=this.width;
				this.preHeight=this.height;
			}
			if (this._disMode==type)
				return;
			this._disMode=type;
			switch (this._disMode){
				case 1:
					this.goMinState();
					LayoutRecManager.minRec(this);
					this.back.off("mousedown",this,this.onBackDown);
					this.back.on("mousedown",this,this.onBackDown);
					break ;
				default :
					this.back.off("mousedown",this,this.onBackDown);
					this.goMaxState();
					LayoutRecManager.recoverRec(this);
				}
		});

		__getset(0,__proto,'canAddTab',function(){
			var tabList;
			tabList=this.tab.items;
			var i=0,len=0;
			len=tabList.length;
			for(i=0;i<len;i++){
				if(!tabList[i].canMix)return false;
			}
			return true;
		});

		__getset(0,__proto,'canClose',function(){
			var tabList;
			tabList=this.tab.items;
			var i=0,len=0;
			len=tabList.length;
			for(i=0;i<len;i++){
				if(!tabList[i].canClose)return false;
			}
			return true;
		});

		__getset(0,__proto,'hasFree',function(){
			var tabList;
			tabList=this.tab.items;
			var i=0,len=0;
			len=tabList.length;
			for(i=0;i<len;i++){
				if(tabList[i].freeSize)return true;
			}
			return false;
		});

		__getset(0,__proto,'canDragMe',function(){
			return this.canAddTab;
		});

		__getset(0,__proto,'sizeFree',function(){
			if(this.hasFree){
				return true;
			}
			return !this.canAddTab;
		});

		LayoutRec.Min=1;
		LayoutRec.Normal=2;
		LayoutRec.Max=3;
		return LayoutRec;
	})(LayoutRecUI)


	/**菜单
	*@author yung
	*/
	//class laya.editor.view.MenuBar extends laya.editor.ui.MenuBarUI
	var MenuBar=(function(_super){
		function MenuBar(){
			this._isMax=false;
			this._menuMap={};
			this._menuContexts={
				item0:[ "转换项目","","设置项目(F9)"],
				item1:["新建目录(Ctrl+D)","新建文件(Ctrl+N)","","设置页面(Ctrl+P)","资源转换工具","图集打包工具"],
				item2:["撤销(Ctrl+Z)","重做(Ctrl+Y)","","删除(Delete)","复制(Ctrl+C)","粘贴(Ctrl+V)","原位粘贴(Ctrl+Shift+V)","剪贴(Ctrl+X)","全选(Ctrl+A)","","移动组件(方向键)","快速移动(Ctrl+方向键)","","转换为容器(Ctrl+B)","移除容器(Ctrl+U)","重复复制(Ctrl+R)","定位资源(Ctrl+K)","","查找替换(Ctrl+F)","保存文件(Ctrl+S)","保存所有文件(Ctrl+Shift+S)"],
				item3:["放大视图(Ctrl++)","缩小视图(Ctrl+-)","恢复视图(Ctrl+|)","","拖动视图(鼠标右键)","显示/隐藏参考视图(F8)","显示/隐藏标尺(Ctrl+Shift+R)","","节点向上(Ctrl+↑)","节点向下(Ctrl+↓)"],
				item4:["项目面板","资源面板","属性面板","层级面板","模板面板","","恢复面板位置(F3)"],
				item5:["发布(F12)","清理并发布(Ctrl+F12)","正式发布(不打包未使用资源)(F11)","","刷新资源及页面(F5)","刷新页面(F6)","刷新资源(F7)","","查找未被使用的资源(F4)"],
				item6:[],
				item7:["关于","帮助"]
			};
			MenuBar.__super.call(this);
			Laya.stage.on("click",this,this.onStageClick);
			this.tab.on("mousedown",this,this.onTabMouseDown);
			this.tab.on("click",this,this.onTabClick);
			this.tab.on("change",this,this.onTabChange);
			this.on("mousedown",this,this.onMouseDown);
			this.on("doubleclick",this,this.onDoubleClick);
			this.minBtn.on("click",this,this.onMinBtnClick);
			this.backBtn.on("click",this,this.onBackBtnClick);
			this.closeBtn.on("click",this,this.onCloseBtnClick);
			this.switchBtn.on("click",this,this.onSwitchBtnDown);
			var img=new Image();
			img.skin="view/editmode.png";
			img.pos(1,6);
			this.switchBtn.addChild(img);
			this.switchBtn.labelPadding="0,0,0,8";
			var btns;
			btns=this.tab.items;
			var i=0,len=0;
			len=btns.length;
			for(i=0;i<len;i++){
				(btns [i]).labelColors=StyleConsts$1.MenuButtonLabelColor;
			}
			this.cacheAsBitmap=IDEConsts.cachePanels;;
		}

		__class(MenuBar,'laya.editor.view.MenuBar',_super);
		var __proto=MenuBar.prototype;
		__proto.onSwitchBtnDown=function(e){
			if(Browser.window["changeLayaIDECodeMode"]){
				Browser.window["changeLayaIDECodeMode"]();
			}
		}

		__proto.onTabMouseDown=function(e){
			if (e.target==this.tab.selection){
				this.tab.selectedIndex=-1;
			}
		}

		__proto.onCloseBtnClick=function(e){
			Device.winFun("close");
		}

		//stage.nativeWindow.dispatchEvent(new Event(Event.CLOSING));
		__proto.onBackBtnClick=function(e){
			if (this._isMax){
				Device.winFun("unmaximize");
			}
			else{
				Device.winFun("maximize");
			}
			this._isMax=!this._isMax;
		}

		__proto.onMinBtnClick=function(e){
			Device.winFun("minimize");
		}

		//stage.nativeWindow.minimize();
		__proto.onDoubleClick=function(e){
			var target=e.target;
			if (!target.parent==this.tab && !target.parent==this.btnBox){
				this.onBackBtnClick(null);
			}
		}

		__proto.onMouseDown=function(e){
			return;
			var target=e.target;
		}

		// }
		__proto.onStageMouseUp=function(e){
			this.off("mousemove",this,this.onMouseMove);
			this.off("mousemove",this,this.onStageMouseUp);
		}

		__proto.onMouseMove=function(e){
			this.off("mousemove",this,this.onMouseMove);
			this.off("mousemove",this,this.onStageMouseUp);
			this.onBackBtnClick(null);
		}

		__proto.onTabChange=function(e){
			if (this.tab.selectedIndex !=-1){
				this.showMenu(this.tab.selection);
			}
		}

		__proto.onTabClick=function(e){
			e.stopPropagation();
		}

		__proto.onStageClick=function(e){
			this.tab.selectedIndex=-1;
		}

		__proto.showMenu=function(btn){
			var type=btn.name;
			var menu=this._menuMap[type];
			if (menu==null){
				menu=ContextMenu$1.createMenuByArray(this._menuContexts[type]);
				menu.on("select",this,this.onEmunSelect);
				this._menuMap[type]=menu;
			};
			var p=btn.localToGlobal(new Point());
			menu.show(p.x,p.y+btn.height);
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(e){
			var data=(e.target).data;
			if ((typeof data=='string')){
				var name=data;
				switch (name){
					case "新建项目":
						break ;
					case "设置项目(F9)":
						ShortcutManager.exeKey(120);
						break ;
					case "转换项目":
						ConvertProject.instance.start();
						break ;
					case "打开项目(Ctrl+O)":
						ShortcutManager.exeKey(79,true);
						break ;
					case "打开项目所在目录":
						ProjectManager.openProjectDir();
						break ;
					case "新建文件(Ctrl+N)":
						ShortcutManager.exeKey(78,true);
						break ;
					case "新建粒子":
						Notice$1.notify("open_AddParticle");
						return;
						break ;
					case "新建场景":
						Notice$1.notify("OPEN_ADDSCENE");
						return;
						break ;
					case "新建时间轴动画":
						Notice$1.notify("OPEN_ADD_TIMELINE_ANIMATION");
						return;
						break ;
					case "新建目录(Ctrl+D)":
						ShortcutManager.exeKey(68,true);
						break ;
					case "设置页面(Ctrl+P)":
						ShortcutManager.exeKey(80,true);
						break ;
					case "保存页面(Ctrl+S)":
						ShortcutManager.exeKey(83,true);
						break ;
					case "保存所有页面(Ctrl+Shift+S)":
						ShortcutManager.exeKey(83,true,true);
						break ;
					case "放大视图(Ctrl++)":
						ShortcutManager.exeKey(187,true);
						break ;
					case "缩小视图(Ctrl+-)":
						ShortcutManager.exeKey(189,true);
						break ;
					case "恢复视图(Ctrl+|)":
						ShortcutManager.exeKey(220,true);
						break ;
					case "显示/隐藏参考视图(F8)":
						ShortcutManager.exeKey(119);
						break ;
					case "显示/隐藏标尺(Ctrl+Shift+R)":
						ShortcutManager.exeKey(82,true,true);
						IDEEvent.emitKeyEvent(82,true,true);
						break ;
					case "预览视图(Ctrl+Enter)":
						ShortcutManager.exeKey(13,true);
						break ;
					case "撤销(Ctrl+Z)":
						ShortcutManager.exeKey(90,true);
						break ;
					case "重做(Ctrl+Y)":
						ShortcutManager.exeKey(89,true);
						break ;
					case "复制(Ctrl+C)":
						ShortcutManager.exeKey(67,true);
						break ;
					case "粘贴(Ctrl+V)":
						ShortcutManager.exeKey(86,true);
						break ;
					case "原位粘贴(Ctrl+Shift+V)":
						ShortcutManager.exeKey(86,true,true);
						break ;
					case "剪贴(Ctrl+X)":
						ShortcutManager.exeKey(88,true);
						break ;
					case "全选(Ctrl+A)":
						ShortcutManager.exeKey(65,true);
						break ;
					case "转换为容器(Ctrl+B)":
						ShortcutManager.exeKey(66,true);
						break ;
					case "移除容器(Ctrl+U)":
						ShortcutManager.exeKey(85,true);
						break ;
					case "重复复制(Ctrl+R)":
						ShortcutManager.exeKey(82,true);
						break ;
					case "查找替换(Ctrl+F)":
						ShortcutManager.exeKey(70,true);
						break ;
					case "向上(Ctrl+↑)":
						ShortcutManager.exeKey(38,true);
						IDEEvent.emitKeyEvent(38,true);
						break ;
					case "向下(Ctrl+↓)":
						ShortcutManager.exeKey(40,true);
						IDEEvent.emitKeyEvent(40,true);
						break ;
					case "到上一层(Ctrl+→)":
						ShortcutManager.exeKey(39,true);
						break ;
					case "到下一层(Ctrl+←)":
						ShortcutManager.exeKey(37,true);
						break ;
					case "刷新资源及页面(F5)":
						ShortcutManager.exeKey(116);
						break ;
					case "刷新页面(F6)":
						ShortcutManager.exeKey(117);
						break ;
					case "刷新资源(F7)":
						ShortcutManager.exeKey(118);
						break ;
					case "查找未被使用的资源(F4)":
						ShortcutManager.exeKey(115);
						break ;
					case "发布(F12)":
						ShortcutManager.exeKey(123);
						break ;
					case "清理并发布(Ctrl+F12)":
						ShortcutManager.exeKey(123,true);
						break ;
					case "正式发布(不打包未使用资源)(F11)":
						ShortcutManager.exeKey(122);
						break ;
					case "编辑器设置(F10)":
						ShortcutManager.exeKey(121);
						break ;
					case "恢复面板位置(F3)":
						ShortcutManager.exeKey(114);
						break ;
					case "显示/隐藏日志(Ctrl+L)":
						ShortcutManager.exeKey(76,true);
						break ;
					case "扩展(F1)":
						break ;
					case "关于":
						break ;
					case "帮助":
						Help.instance.start();
						break ;
					case "项目面板":
						LayoutRecManager.showPanelByClassName("PagePanel");
						break ;
					case "资源面板":
						LayoutRecManager.showPanelByClassName("ResPanel");
						break ;
					case "模板面板":
						LayoutRecManager.showPanelByClassName("CompPanel");
						break ;
					case "属性面板":
						LayoutRecManager.showPanelByClassName("PropPanel");
						break ;
					case "层级面板":
						LayoutRecManager.showPanelByClassName("DisplayTreePanel");
						break ;
					case "时间轴":
						LayoutRecManager.showPanelByClassName("TimeLinePanel");
						break ;
					case "资源转换工具":
						CMDShell.exeFile(FileManager.getAppPath("libs/LayaAirTool/LayaAirTool"),null,null);
						break ;
					case "图集打包工具":
						break ;
					case "定位资源(Ctrl+K)":
						IDEEvent.emitKeyEvent(75,true,false);
						break ;
					}
			}
			else{
				if (data.key=="project"){
					ProjectManager.openProjectByPath(data.label);
				}
			}
			this.tab.selectedIndex=-1;
		}

		/**添加插件菜单*/
		__proto.addPluginMenu=function(name){
			var menus=this._menuContexts["item7"];
			if (menus.length > 0){
				menus.push("");
			}
			menus.push({label:name,key:"plugin"});
			this._menuMap["item7"]=null;
		}

		/**显示最近打开的项目*/
		__proto.showProjectOpened=function(projects){
			return;
			var menus=this._menuContexts["item0"];
			if (menus.length > 5){
				menus.length=5;
			}
			menus.push("");
			for (var i=0;i < projects.length && i < 5;i++){
				menus.push({label:projects[i],key:"project"});
			}
			this._menuMap["item0"]=null;
		}

		__getset(1,MenuBar,'instance',function(){
			return MenuBar._instance ? MenuBar._instance :MenuBar._instance=new MenuBar();
		},laya.editor.ui.MenuBarUI._$SET_instance);

		MenuBar.registButton=function(id,title,notice){
			var registFun=Browser.window["addMenuListItem"];
			if(registFun!=null){
				registFun(id,title,notice);
			}
		}

		MenuBar._instance=null
		return MenuBar;
	})(MenuBarUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-15 上午10:50:52
	*/
	//class laya.editor.view.page.AddAnimation extends laya.editor.ui.page.AddGraphicAniUI
	var AddAnimation=(function(_super){
		function AddAnimation(){
			AddAnimation.__super.call(this);
			this.typeDrop.labels="GraphicAnimation"+","+"EffectAnimation";
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.widthTxt.restrict="0-9";
			this.heightTxt.restrict="0-9";
			this.typetip.text=Sys.lang("动画类型：");
			this.nametip.text=Sys.lang("动画名称：");
			this.widthTip.text=Sys.lang("动画宽度：");
			this.heightTip.text=Sys.lang("动画高度：");
			this.typeDrop.selectedIndex=0;
		}

		__class(AddAnimation,'laya.editor.view.page.AddAnimation',_super);
		var __proto=AddAnimation.prototype;
		__proto.initListener=function(){}
		// Notice.listen(IDEEvent.OPEN_ADD_TIMELINE_ANIMATION,this,start);
		__proto.onSelectBtnClick=function(e){
			DialogTools.showOpenFile(Sys.lang("请选择视图参考图片"),Utils.bind(this.onSelected,this),DialogTools.imgFilterO);
		}

		__proto.onSelected=function(files){}
		__proto.reset=function(){
			this.bgColorPicker.selectedColor="#F00000";
			this.bgColorPicker.selectedColor="#000000";
			this.nameTxt.text="";
			this.widthTxt.text="600";
			this.heightTxt.text="400";
			IDEConfigsManager.I.insertDefaultValue(this,AddAnimation.ConfigO);
		}

		__proto.start=function(){}
		__proto.check=function(){
			if (!Boolean(this.nameTxt.text)){
				Alert.show(Sys.lang("动画名称不能为空"));
				return false;
			}
			Notice$1.notify("ADDTimeLineAnimation",[this.typeDrop.selectedLabel,this.nameTxt.text,"",LayaBuilder.mParseInt(this.widthTxt.text),LayaBuilder.mParseInt(this.heightTxt.text),this.bgColorPicker.selectedColor,true,true]);
			Notice$1.notify("Focus_design");
			IDEConfigsManager.I.saveDefaultValue(this,AddAnimation.ConfigO);
			return true;
		}

		__getset(1,AddAnimation,'instance',function(){
			return AddAnimation._instance ? AddAnimation._instance :AddAnimation._instance=new AddAnimation();
		},laya.editor.ui.page.AddGraphicAniUI._$SET_instance);

		AddAnimation._instance=null
		AddAnimation.GraphicAnimation="GraphicAnimation";
		AddAnimation.MoveEffectAnimation="EffectAnimation";
		__static(AddAnimation,
		['ConfigO',function(){return this.ConfigO={
				"sign":"AddAnimation",
				"vars":["widthTxt","heightTxt"]
		};}

		]);
		return AddAnimation;
	})(AddGraphicAniUI)


	/**添加页面
	*@author yung
	*/
	//class laya.editor.view.page.AddPage extends laya.editor.ui.page.AddPageUI
	var AddPage=(function(_super){
		function AddPage(){
			AddPage.__super.call(this);
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.widthTxt.restrict="0-9";
			this.heightTxt.restrict="0-9";
			this.selectBtn.on("click",this,this.onSelectBtnClick);
		}

		__class(AddPage,'laya.editor.view.page.AddPage',_super);
		var __proto=AddPage.prototype;
		__proto.onSelectBtnClick=function(e){
			DialogTools.showOpenFile(Sys.lang("请选择视图参考图片"),Utils.bind(this.onSelected,this),DialogTools.imgFilterO);
		}

		__proto.onSelected=function(files){
			if (files && files[0])this.imgTxt.text=FileManager.adptToCommonUrl(files[0]);
		}

		__proto.reset=function(){
			this.typeDrop.labels=ProjectSetting.getPageTypeLabel();
			this.typeDrop.selectedIndex=0;
			this.bgColorPicker.selectedColor="#F00000";
			this.bgColorPicker.selectedColor="#000000";
			this.nameTxt.text="";
			this.imgTxt.text="";
			this.widthTxt.text="600";
			this.heightTxt.text="400";
			IDEConfigsManager.I.insertDefaultValue(this,AddPage.ConfigO);
			this.widthCheck.selected=false;
			this.heightCheck.selected=false;
		}

		__proto.check=function(){
			if (!this.nameTxt.text){
				Alert.show(Sys.lang("页面名称不能为空"));
				return false;
			}
			Notice$1.notify("ADDPage",[this.typeDrop.selectedLabel,this.nameTxt.text,this.imgTxt.text,LayaBuilder.mParseInt(this.widthTxt.text),LayaBuilder.mParseInt(this.heightTxt.text),this.bgColorPicker.selectedColor,this.widthCheck.selected,this.heightCheck.selected]);
			Notice$1.notify("Focus_design");
			IDEConfigsManager.I.saveDefaultValue(this,AddPage.ConfigO);
			return true;
		}

		__static(AddPage,
		['ConfigO',function(){return this.ConfigO={
				"sign":"AddPage",
				"vars":["widthTxt","heightTxt"]
		};}

		]);
		return AddPage;
	})(AddPageUI)


	/**UI视图
	*@author yung
	*/
	//class laya.editor.view.UIViewer extends laya.editor.ui.UIViewerUI
	var UIViewer=(function(_super){
		function UIViewer(){
			this._design=null;
			this._title=null;
			this._uiName=null;
			this._pagePath=null;
			this._lastSelectXml=null;
			this.ruleSideLen=2;
			this.iFrameCodeView=null;
			this.isUserChanged=false;
			this._gridPoints=[new Point(),new Point()];
			this.preXmlStr=null;
			UIViewer.__super.call(this);
			this._ruleH=new RuleGrid();
			this._ruleV=new RuleGrid();
			this._ruleRangeLayer=new Sprite();
			this.initPanel();
		}

		__class(UIViewer,'laya.editor.view.UIViewer',_super);
		var __proto=UIViewer.prototype;
		__proto.initPanel=function(){
			if(UIViewer.EnableXMLEditor){
				this.iFrameCodeView=new XMLEditorSprite();
				this.viewStack.items[1]=this.iFrameCodeView;
				this.iFrameCodeView.top=this.iFrameCodeView.bottom=this.iFrameCodeView.left=0;
				this.iFrameCodeView.right=0;
				this.iFrameCodeView.bottom=0;
				var carr;
				carr=[this.viewStack.items[0],this.iFrameCodeView];
				this.viewStack.setItems(carr);
			}
			this.viewStack.on("resize",this,this.onResize);
			this.on("mousedown",this,this.onMouseDown);
			this.on("dragDrop",this,this.onDragDrop);
			this.createDesign();
			this.designView.on("rightmousedown",this,this.onDesignRightMouseDown);
			this.designView.addChild(this._design);
			this.typeBtn.index=1;
			this.typeBtn.on("click",this,this.typeBtnClick);
			this.addChild(this._ruleH);
			this._ruleH.y=this.designView.y-0;
			this._ruleH.type=0;
			this._ruleH.x=this.ruleSideLen;
			this.addChild(this._ruleV);
			this._ruleV.y=this._ruleH.y+5;
			this._ruleV.type=1;
			this._ruleV.x=this.ruleSideLen;
			this._ruleRangeLayer.mouseEnabled=false;
			this.addChild(this._ruleRangeLayer);
			this.onResize(null);
			this.on("display",this,this.addListens);
			this.on("undisplay",this,this.removeListens);
			this.compInfo.color=this.scaleInfo.color=StyleConsts$1.SelectItemInfoColor;
			this.setScaleInfo(1);
			this.addChild(this.typeBtn);
			this.codeView.wordWrap=true;
			Notice$1.listen("RULE_SHOW_CHANGE",this,this.freshRule,null,true);
		}

		__proto.createDesign=function(){
			if(IDEVars.cacheBothTreeAndAnimation){
				this._design=new AnimationDesignBothCache();
				}else{
				this._design=new AnimationDesign();
			}
		}

		__proto.typeBtnClick=function(e){
			this.typeBtn.index=1-this.typeBtn.index;
			this.onTabSelect(1-this.typeBtn.index);
		}

		__proto.addListens=function(){
			Notice$1.listen("SHOW_RULE_RANGE",this,this.showRuleRange,null,true);
			Notice$1.listen("Clear_RULE_RANGE",this,this.clearRuleRange,null,true);
			Notice$1.listen("Add_node_byDragDrop",this,this.onDragDrop,null,true);
		}

		__proto.removeListens=function(){
			Notice$1.cancel("SHOW_RULE_RANGE",this,this.showRuleRange);
			Notice$1.cancel("Clear_RULE_RANGE",this,this.clearRuleRange);
			Notice$1.cancel("Add_node_byDragDrop",this,this.onDragDrop);
		}

		__proto.clears=function(){
			Notice$1.cancel("RULE_SHOW_CHANGE",this,this.freshRule);
		}

		__proto.clearRuleRange=function(){
			this._ruleRangeLayer.graphics.clear();
		}

		__proto.showRuleRange=function(pointList){
			if(!SystemSetting.ifShowRuleGrid){
				this.clearRuleRange();
				return;
			};
			var i=0,len=0;
			var tPoint;
			len=pointList.length;
			for(i=0;i<len;i++){
				tPoint=pointList[i];
				tPoint=this.globalToLocal(tPoint);
			};
			var g;
			g=this._ruleRangeLayer.graphics;
			g.clear();
			var sY=NaN;
			sY=this._ruleH.y;
			g.drawLine(pointList[0].x,sY,pointList[0].x,sY+20,StyleConsts$1.RuleRangeColor,1);
			g.drawLine(pointList[1].x,sY,pointList[1].x,sY+20,StyleConsts$1.RuleRangeColor,1);
			var sX=NaN;
			sX=this._ruleV.x;
			g.drawLine(sX,pointList[0].y,sX+20,pointList[0].y,StyleConsts$1.RuleRangeColor,1);
			g.drawLine(sX,pointList[1].y,sX+20,pointList[1].y,StyleConsts$1.RuleRangeColor,1);
		}

		__proto.switchRuleGrid=function(){
			SystemSetting.ifShowRuleGrid=!SystemSetting.ifShowRuleGrid;
			Notice$1.notify("RULE_SHOW_CHANGE");
		}

		// freshRule();
		__proto.dealAction=function(funName,param){
			if ((typeof (this[funName])=='function')){
				this[funName].apply(this,param);
			}else
			if(this.design){
				this.design.dealAction(funName,param);
			}
		}

		__proto.onMouseDown=function(event){
			if (this.viewStack.selectedIndex==0){
				this._lastSelectXml=this._design.selectedCompXml;
				Laya.stage.focus=this._design;
				if(event.target!=this.typeBtn)
					this._design.event("mousedown",event);
			}
		}

		__proto.onActive=function(){
			this._design.onActive();
		}

		__proto.onAddedToStage=function(e){
			this.showAndHidePanels();
		}

		__proto.onDesignRightMouseUp=function(e){
			this._design.stopDrag();
			this.freshRule();
			CursorManager.setType("default");
		}

		__proto.onDesignRightMouseDown=function(e){
			this._design.startDrag();
			CursorManager.setType("all-scroll");
			this.isUserChanged=true;
			Laya.stage.once("rightmouseup",this,this.onDesignRightMouseUp);
		}

		__proto.onResize=function(e){
			if(this.designView.width<0){
				Laya.timer.frameOnce(1,this,this.onResize);
				return;
			}
			this.designView.scrollRect=new Rectangle(0,0,this.designView.width,this.designView.height);
			if(this.isUserChanged)return;
			switch(this._design.pageType){
				case "graphic_animation":
				case "MoveEffect":
					this._design.x=Math.floor((this.designView.width-this._design.width*0)*0.5);
					this._design.y=Math.floor((this.designView.height-this._design.height*0)*0.5);
					break ;
				case "Prefab":
					this._design.x=Math.floor((this.designView.width-this._design.width*0)*0.5);
					this._design.y=Math.floor((this.designView.height-this._design.height*0)*0.5);
					break ;
				case "prefab_ui":
					this._design.x=Math.floor((this.designView.width-this._design.width*0)*0.5);
					this._design.y=Math.floor((this.designView.height-this._design.height*0)*0.5);
					break ;
				default :
					this._design.x=Math.floor((this.designView.width-this._design.width)*0.5);
					this._design.y=Math.floor((this.designView.height-this._design.height)*0.5);
				}
			this.freshRule();
		}

		__proto.freshRule=function(){
			this.clearRuleRange();
			if(!SystemSetting.ifShowRuleGrid){
				this._ruleH.clearMe();
				this._ruleV.clearMe();
				return;
			}
			this._ruleV.height=this.height-40;
			this._gridPoints[0].setTo(this._ruleH.x,this._ruleV.y);
			this._gridPoints[1].setTo(this.width+this._ruleH.x,this._ruleV.height+this._ruleV.y);
			var i=0,len=0;
			var tPoint;
			for(i=0;i<2;i++){
				tPoint=this._gridPoints[i];
				tPoint=this.localToGlobal(tPoint);
				tPoint=this._design.globalToLocal(tPoint);
			}
			this._ruleH.width=this.width;
			var ruleWidth=50;
			this._ruleH.setBounds(new Rectangle(0,0,this._ruleH.width,ruleWidth));
			this._ruleH.renderMe(this.width,this._gridPoints[0].x,this._gridPoints[1].x);
			this._ruleV.setBounds(new Rectangle(0,0,ruleWidth,this._ruleV.height));
			this._ruleV.cacheAsBitmap=false;
			this._ruleV.renderMe(this._ruleV.height,this._gridPoints[0].y,this._gridPoints[1].y);
			this._ruleV.cacheAsBitmap=true;
		}

		/**根据页面地址加载页面*/
		__proto.loadPage=function(path){
			try {
				var con=FileManager.readTxtFile(path);
				var uiView=JSON.parse(con);
				if(this._design.pageType=="page"){
					if(TypeManager.isPreFabNodeType(uiView.type)){
						this._design.pageType="prefab_ui";
					}
				}
				this._design.init(uiView);
				}catch (e){
				Alert.show(Sys.lang("读取视图({0})出错\n{1}" ,path,e.toString()),Sys.lang("读取视图出错"));
				var xml;
				xml={
					type:"View",
					child:[],
					props:{}
				};
				this._design.init(xml);
				return;
			}
		}

		__proto.setScaleInfo=function(value){
			this.scaleInfo.text=Sys.lang("当前缩放：")+Math.floor(value*100)+"%";
		}

		/**保存*/
		__proto.save=function(){
			if (this.typeBtn.index==1){
				if (this._design.hasChange){
					var dataO;
					if(this._design.isAnimationMode){
						dataO=this._design.uiXmlRestored;
						}else{
						dataO=this._design.xml;
					}
					if(this._design.animation){
						dataO.animations=AnimationDataWorker.cleanAnimationData(this._design.animation.animations,true);
					}
					PagePanel.instance.save(this._pagePath,dataO);
					delete dataO.animations;
					this._design.hasChange=false;
					MessageManager.instance.show(Sys.lang("保存成功"));
					Laya.stage.event("pageSaved");
					if(TypeManager.getFileType(this._pagePath)=="Prefab"){
						PreFabManager.I.prefabFileChange(this._pagePath);
					}
				}
				}else {
				Alert.instance.start(Sys.lang("请先切换到设计模式后再保存"),Sys.lang("保存出错"));
			}
		}

		__proto.getDesignData=function(){
			var dataO;
			if(this._design.isAnimationMode){
				dataO=this._design.uiXmlRestored;
				}else{
				dataO=this._design.xml;
			}
			if(this._design.animation){
				dataO.animations=AnimationDataWorker.cleanAnimationData(this._design.animation.animations,true);
			}
			return dataO;
		}

		__proto.changeDataO=function(dataO){
			if(this._design.animation){
				this._design.animation.animations=dataO.animations;
			}
			this._design.changeFromRepalce(dataO,true);
		}

		/**容器线框动画*/
		__proto.playBoxEffect=function(gx,gy,isBack){
			(isBack===void 0)&& (isBack=false);
			var point=this.localToGlobal(new Point(0,0));
			var effect=new BoxEffect();
			Laya._currentStage.addChild(effect);
			effect.play(gx,gy,new Rectangle(point.x,point.y,this.designView.width,this.designView.height),isBack);
		}

		/**处理资源或页面拖入*/
		__proto.onDragDrop=function(e,x,y,parentId,index){
			(x===void 0)&& (x=-1);
			(y===void 0)&& (y=-1);
			(parentId===void 0)&& (parentId=-1);
			(index===void 0)&& (index=-1);
			if(!this._design.canAddComp){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			}
			switch(e.data.type){
				case "res":
				case "page":
					this._design.addCompWork(this._design.getAddDataByDragEvent(e),x,y,parentId,false,index);
					break ;
				case "template":
					this._design.addTemplate(e.data.data.path,x,y,parentId);
					break ;
				}
		}

		__proto.showAndHidePanels=function(){}
		//}
		__proto.findSelecteStrPos=function(xmlStr,compID){
			if(compID<1)return null;
			var pos=0;
			pos=xmlStr.indexOf("compId="+compID+"\"");
			if(pos<0)return null;
			var posBegin=0;
			posBegin=xmlStr.lastIndexOf("<",pos);
			var i=0;
			var compType;
			var posEnd=0;
			compType="";
			for(i=posBegin+1;i<xmlStr.length;i++){
				if(xmlStr.charAt(i)==" ")break ;
				compType+=xmlStr.charAt(i);
			};
			var iCount=0;
			iCount=1;
			var tStr;
			var isFirst=true;
			for(i=pos;i<xmlStr.length;i++){
				if(xmlStr.charAt(i)==">"){
					iCount--;
					if(xmlStr.charAt(i-1)=="/"&& isFirst){
						if(iCount==0){
							console.log("posOk");
							posEnd=i+1;
							break ;
						}
					};
					tStr=xmlStr.substr(i-compType.length,compType.length);
					if(tStr==compType&&iCount==0){
						console.log("posOk");
						posEnd=i+1;
						break ;
					}
					isFirst=false;
				}
				if(xmlStr.charAt(i)=="<")iCount++;
			}
			return xmlStr.substring(posBegin,posEnd);
		}

		/**切换设计和代码视图*/
		__proto.onTabSelect=function(index){
			this.viewStack.selectedIndex=index;
			this._ruleH.visible=this._ruleV.visible=index==0;
			var backData;
			if (index==1){
				var xmlStr;
				xmlStr=DesignInfo.uiObjToXml(this._design.xml).toXMLString();
				var selecteID=0;
				if(this._design.selectedCompXml){
					selecteID=this._design.selectedCompXml.compId;
					}else{
					selecteID=-1;
				}
				this.codeView.text=xmlStr;
				if(this.codeView.parent){
					this.clearRuleRange();
				}
				DisControlTool.setTop(this.codeView);
				if(this.iFrameCodeView){
					this.iFrameCodeView.setCode(xmlStr);
					if(selecteID>0)
						this.iFrameCodeView.find(this.findSelecteStrPos(xmlStr.toString(),selecteID));
				}
				this.preXmlStr=xmlStr;
				}else {
				var changeCode;
				changeCode=this.codeView.text;
				if(this.iFrameCodeView){
					changeCode=this.iFrameCodeView.getCode();
				}
				if(this.preXmlStr&&this.preXmlStr!=changeCode){
					try{
						backData=DesignInfo.xmlStrToUIObj(changeCode);
						this._design.changeXml(backData);
						}catch(e){
						Alert.show(Sys.lang("文本格式有错误！修改未生效"));
					}
					}else{
				}
			}
			this.showAndHidePanels();
		}

		/**页面显示的标题*/
		__getset(0,__proto,'title',function(){
			return this._title;
			},function(value){
			this._title=value;
		});

		/**页面地址*/
		__getset(0,__proto,'pagePath',function(){
			return this._pagePath;
			},function(value){
			if (this._pagePath !=value){
				this._pagePath=value;
				if(this._design){
					this._design.pageType=TypeManager.getFileType(this._pagePath);
				}
				this.title=this._uiName=FileManager.getFileName(this._pagePath);
				this.loadPage(this._pagePath);
			}
		});

		__getset(0,__proto,'hasChange',function(){
			return this.design.hasChange;
		});

		/**获得编辑器实体*/
		__getset(0,__proto,'design',function(){
			return this._design;
		});

		/**缩放页面视图*/
		__getset(0,__proto,'scaleView',function(){
			return this._design.scaleX;
			},function(value){
			value=Math.round(value *100)/ 100;
			if (this._design.scaleX !=value){
				var center=this.localToGlobal(new Point(this.width *0.5,this.height *0.5));
				var tCenter=new Point();
				tCenter.setTo(center.x,center.y);
				var viewCenter=this._design.globalToLocal(tCenter);
				this._design.scaleY=this._design.scaleX=value;
				var newCenter=this._design.localToGlobal(viewCenter);
				this._design.x+=center.x-newCenter.x;
				this._design.y+=center.y-newCenter.y;
				this.setScaleInfo(value);
				this._design.refreshDragBlocks();
			}
			this.freshRule();
		});

		UIViewer.EnableXMLEditor=true;
		return UIViewer;
	})(UIViewerUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.page.AddParticle extends laya.editor.ui.page.AddParticleUI
	var AddParticle=(function(_super){
		function AddParticle(){
			AddParticle.__super.call(this);
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.typeDrop.labels=PageExportType.ParticleTypeList.join(",");
			this.typeDrop.selectedIndex=0;
			this.on("doubleclick",this,this.onDoubleClick);
		}

		__class(AddParticle,'laya.editor.view.page.AddParticle',_super);
		var __proto=AddParticle.prototype;
		__proto.onDoubleClick=function(){
			this.typeDrop.labels="重力模式,半径模式,粒子3D,PolyEmitter";
		}

		__proto.reset=function(){
			this.nameTxt.text="";
		}

		__proto.check=function(){
			if (!this.nameTxt.text){
				Alert.show(Sys.lang("粒子名称不能为空"));
				return false;
			}
			Notice$1.notify("AddParticle",[this.typeDrop.selectedLabel,this.nameTxt.text]);
			Notice$1.notify("Focus_design");
			return true;
		}

		return AddParticle;
	})(AddParticleUI)


	/**
	*...
	*@author yung
	*/
	//class laya.editor.view.page.AddScript extends laya.editor.ui.page.AddScriptUI
	var AddScript=(function(_super){
		function AddScript(){
			AddScript.__super.call(this);
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.classTxt.restrict=StyleConsts$1.fileNameRestrict+".";
		}

		__class(AddScript,'laya.editor.view.page.AddScript',_super);
		var __proto=AddScript.prototype;
		__proto.reset=function(){
			this.nameTxt.text="";
			this.classTxt.text="";
		}

		__proto.check=function(){
			if (!this.nameTxt.text){
				Alert.show(Sys.lang("脚本名称不能为空"));
				return false;
			}
			if (!this.classTxt.text){
				Alert.show(Sys.lang("运行时类名不能为空"));
				return false;
			}
			Notice$1.notify("addScript",[this.typeDrop.selectedIndex,this.nameTxt.text,this.classTxt.text]);
			Notice$1.notify("Focus_design");
			return true;
		}

		return AddScript;
	})(AddScriptUI)


	/**属性组
	*@author yung
	*/
	//class laya.editor.view.prop.PropGroup extends laya.editor.ui.prop.PropGroupUI
	var PropGroup=(function(_super){
		function PropGroup(name,props,inputList){
			this._props=[];
			this._isSettingValue=false;
			this._xml=null;
			this.isSpecial=false;
			this.layouter=null;
			this._items=null;
			this.ItemHeight=30;
			this.ItemD=5;
			this.inputList=null;
			this.nameTypeO={};
			this._nameList=[];
			this.groupData=null;
			this.removeBtn=null;
			this.node=null;
			this.x2=85;
			this.x1=15;
			this.rightD=15;
			this.sizeGridSetHandler=null;
			this._data=null;
			this.itemType=null;
			PropGroup.__super.call(this);
			if(!name)return;
			this.createBy(name,props,inputList);
		}

		__class(PropGroup,'laya.editor.view.prop.PropGroup',_super);
		var __proto=PropGroup.prototype;
		__proto.removeBtnClick=function(){
			if(!this.groupData)return;
			if(this.groupData.type=="appendProps"&&this.node){
				AppendPropGroupTool.removeAppendPropsFromData(this.groupData.path,this.node);
				Notice$1.notify("Prop_Changed");
				PropPanel.instance.refresh();
			}
		}

		__proto.createBy=function(name,props,inputList,groupData){
			this.groupData=groupData;
			if(this.removeBtn){
				this.removeBtn.removeSelf();
			}
			if(this.groupData&&this.groupData.removeAble){
				if(!this.removeBtn){
					this.removeBtn=new Button();
					this.removeBtn.stateNum=1;
					this.removeBtn.skin="view/del.png";
					this.removeBtn.right=5;
					this.removeBtn.top=2;
					this.removeBtn.toolTip=Sys.lang("删除");
					this.removeBtn.on("click",this,this.removeBtnClick);
				}
				this.addChild(this.removeBtn);
			}
			this.inputList=inputList?inputList:[];
			this._props.length=0;
			this.groupLabl.text=name;
			this.groupLabl.color=StyleConsts$1.FolderTxtColor;
			this.groupLabl.bold=true;
			this.groupBox.removeChildren();
			this.arrowClip.index=1;
			this._items=[];
			if (name=="公用"){
			};
			var nickName;
			var tY=NaN;
			for (var i=0,n=props.length;i < n;i++){
				var prop=props[i].p||props[i];
				nickName=prop.nickname || prop.name;
				tY=i *this.ItemHeight+this.ItemD;
				if (this.isSpecial){
					tY=Math.floor(i / 2)*this.ItemHeight+this.ItemD;
				}
				if(prop.type=="group"){
					this.createGroupProp(props[i],tY);
					}else{
					this.createPropUI(prop.name,nickName,prop.type,prop.tips,tY,prop.option,prop);
				}
			}
			this.groubBar.on("mousedown",this,this.onGroubBarClick);
			var len=0;
			var lItems;
			lItems=[];
			len=this._items.length;
			var tLayout;
			var items;
			if (this.isSpecial){
				for (i=0;i < len;i+=2){
					if (this._items[i+1]){
						items=[this._items[i],this._items[i+1]];
						(this._items [i+1]).items[0].align="right";
						}else{
						items=[ this._items[i+1]];
					}
					tLayout=LayoutFuns.getSameWidthLayout(items,5);
					lItems.push(tLayout);
				}
				this._items=lItems;
			}
			if(this._items.length>0){
				this.layouter=LayoutFuns.getFullFillLayout(this._items,0,20);
			}
			this.cacheAsBitmap=true;
		}

		__proto.reset=function(){
			var childs;
			childs=this.groupBox._childs;
			var i=0,len=0;
			var tChild;
			for(i=0;i<len;i++){
				tChild=childs[i];
				tChild.offAll();
				if(this.inputList){
					ObjectTools.removeFromArr(this.inputList,tChild);
				}
			}
			this.groupBox.removeChildren();
			this._nameList.length=0;
			this.node=null;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			if (this.layouter){
				this.layouter.width=this.width;
			}
		}

		__proto.onGroubBarClick=function(e){
			if (this.groupBox.parent){
				this.groupBox.removeSelf();
				this.arrowClip.index=0;
				}else {
				this.addChild(this.groupBox);
				this.arrowClip.index=1;
			}
			PropPanel.instance.refreshGroupsPosition();
		}

		__proto.createGroupProp=function(groupData,tY){
			var tgLayout;
			var props;
			props=groupData.cList;
			var i=0,len=0;
			len=props.length;
			var nickName;
			var items;
			items=[];
			for(i=0;i<len;i++){
				var prop=props[i].p||props[i];
				nickName=prop.nickname || prop.name;
				items.push(this.createPropUI(prop.name,nickName,prop.type,prop.tips,tY,prop.option,prop,66));
			}
			tgLayout=LayoutFuns.getSameWidthLayout(items,5);
			this._items.push(tgLayout);
		}

		/**创建属性设置面板*/
		__proto.createPropUI=function(name,nickName,type,tips,y,option,data,labelWidth){
			(labelWidth===void 0)&& (labelWidth=105);
			this._props.push(data);
			var label=new Label();
			label.text=nickName;
			label.pos(this.x1,y+4);
			label.color=StyleConsts$1.ItemTxtColor;
			label.width=labelWidth;
			label.height=20;
			label.toolTip=nickName+"\n"+Sys.lang(tips);
			label.textField.overflow=Text.HIDDEN;
			this._nameList.push(name);
			if (this.isSpecial){
				label.width=60;
				}else{
			}
			this.x2=label.width;
			this.groupBox.addChild(label);
			var tItems;
			tItems=[];
			tItems.push(label);
			if(PropGroup.typeTrans[type]){
				type=PropGroup.typeTrans[type];
			}
			this.nameTypeO[name]=type;
			if(type=="editoption"){
				var dropInput=new InputSelect();
				dropInput.skin="comp/combo_22.png";
				dropInput.name=name;
				dropInput.labels=type=="bool" ? ",false,true" :","+option;
				dropInput.left=this.x2;
				dropInput.sizeGrid="0,30,0,3";
				dropInput.right=this.rightD;
				dropInput.labelColors="#8a8a8a, #ffffff, #efefef";
				dropInput.scrollBarSkin="comp/vscroll.png";
				tItems.push(dropInput);
				dropInput.input.name=name;
				dropInput.input.on("enter",this,this.onInput);
				dropInput.input.on("blur",this,this.onInput);
				dropInput.input.on("focus",this,this.inputFocus,[dropInput.input]);
				dropInput.y=y;
				dropInput.on("change",this,this.onDropChange);
				this.groupBox.addChild(dropInput);
			}else
			if (type=="bool" || type=="option" ||type=="comboBox"){
				var drop=new ComboBox();
				drop.skin="comp/combo_22.png";
				drop.name=name;
				drop.labels=type=="bool" ? ",false,true" :","+option;
				drop.left=this.x2;
				drop.sizeGrid="0,30,0,3";
				drop.right=this.rightD;
				drop.labelColors="#8a8a8a, #ffffff, #efefef";
				drop.scrollBarSkin="comp/vscroll.png";
				tItems.push(drop);
				drop.y=y;
				drop.on("change",this,this.onDropChange);
				this.groupBox.addChild(drop);
				}else if (type=="color"){
				var picker;
				picker=new ColorPickerItem();
				picker.right=this.rightD;
				picker.left=this.x2;
				picker.height=20;
				picker.y=y;
				picker.name=name;
				this.groupBox.addChild(picker);
				picker.on("ColorChanged",this,this.onColorChangeNew);
				picker.on("COLOR_CLEARED",this,this.onColorCleared);
				tItems.push(picker);
				}else if (type=="colorBox"){
				var colorInput=new TextInput();
				colorInput.skin="comp/input_22.png";
				colorInput.sizeGrid="4,4,4,4";
				colorInput.name=name;
				colorInput.left=this.x2;
				colorInput.right=this.rightD+15;
				colorInput.y=y;
				this.groupBox.addChild(colorInput);
				var colorPic=new ColorPicker();
				colorPic.skin="comp/color.png";
				colorPic.name=name+"_color";
				colorPic.on("change",this,this.onColorBoxChange);
				colorPic.right=this.rightD;
				colorPic.y=y;
				this.groupBox.addChild(colorPic);
				tItems.push(colorInput,colorPic);
				}else if (type=="sNumber"){
				var slider=new HSlider("comp/hslider.png");
				slider.name=name;
				slider.left=this.x2;
				slider.right=this.rightD;
				slider.y=y+8;
				slider.tick=0.01;
				slider.setSlider(parseFloat(data.min),parseFloat(data.max),0.5*(parseFloat(data.min)+parseFloat(data.max)));
				this.groupBox.addChild(slider);
				slider.on("changed",this,this.onSliderChange,[slider]);
				this.groupBox.addChild(label);
				tItems.push(slider);
				}else {
				var input;
				if (type=="number"||type=="Number"){
					input=new NumberInput();
					input.on("changing",this,this.onInputChanging);
					}else{
					input=new EditorTextInput();
				}
				input.skin="comp/input_22.png";
				input.name=name;
				input.left=this.x2;
				input.right=this.rightD;
				input.y=y;
				input.color=StyleConsts$1.TextInputColor;
				input.padding="0,0,0,5";
				input.height=24;
				input.sizeGrid="0,4,0,4";
				input.overflow=Text.HIDDEN;
				this.inputList.push(input);
				input.on("keydown",this,this.onkeyDown,[input]);
				this.mouseEnabled=true;
				input.on("enter",this,this.onInput);
				input.on("blur",this,this.onInput);
				input.on("focus",this,this.inputFocus,[input]);
				this.groupBox.addChild(input);
				if (type=="stringdrag"||name=="skin"||data.accept=="res"){
					input.padding="1,36,1,3"
					input.on("dragDrop",this,this.onDragDrop,[data.acceptTypes]);
					var btn=new Button();
					btn.label="";
					btn.y=y+6;
					btn.skin="comp/skinres.png";
					btn.scale(0.5,0.5);
					btn.right=this.rightD-1;
					btn.labelColors=StyleConsts$1.SkinBtnLabelColor;
					btn.on("mousedown",this,this.onSkinDown,[input]);
					btn.toolTip=Sys.lang("拖动资源到输入框可替换皮肤\n点击skin可快速定位皮肤资源");
					this.groupBox.addChild(btn);
				}
				if(data.accept=="files"){
					input.on("dragDrop",this,this.onMutiDragDrop,[data.acceptTypes,data.failtip]);
				}
				if(name=="sizeGrid"){
					input.padding="1,36,1,3"
					btn=new Button();
					btn.label="";
					btn.y=y+6;
					btn.scale(0.5,0.5);
					btn.skin="comp/gridset.png";
					btn.right=this.rightD-1;
					btn.labelColors=StyleConsts$1.SkinBtnLabelColor;
					btn.on("mousedown",this,this.sizeGridBtnClick,[input]);
					btn.toolTip=Sys.lang("点击设置九宫数据");
					this.groupBox.addChild(btn);
				}
				if(type=="Number"||type=="number"){
					input.restrict=StyleConsts$1.NumberRestrict;
				}
				if(type=="int"){
					input.restrict=StyleConsts$1.IntRestrict;
				}
				tItems.push(input);
			}
			LayoutFuns.clearItemsRelativeInfo(tItems);
			var tLayout;
			tLayout=LayoutFuns.getFixPos(tItems,5,false);
			this._items.push(tLayout);
			return tLayout;
		}

		__proto.sizeGridBtnClick=function(input){
			var skinLabel=UIConfigManager.getCompSkinLabel(this.itemType);
			var skin;
			skin=this._data[skinLabel];
			if (skin){
				var defaultProps=ResStyleManager.getResPropsObj(skin);
				}else{
				Alert.show(Sys.lang("没有皮肤资源，不可设置九宫"));
				return;
			};
			var sizeGridStr;
			sizeGridStr=input.text;
			if(sizeGridStr==""&&defaultProps["sizeGrid"]){
				sizeGridStr=defaultProps["sizeGrid"];
			}
			if(!this.sizeGridSetHandler)this.sizeGridSetHandler=new Handler(this,this.sizeGridSetBack,[input]);
			SetSizeGrid.instance.start(skin,this.itemType,sizeGridStr,this.sizeGridSetHandler,this._data);
		}

		__proto.sizeGridSetBack=function(input,sizeGridStr){
			this.setCompProp(input.name,sizeGridStr);
		}

		__proto.inputFocus=function(input){
			Laya.timer.once(100,this,this.setFocus,[input],true);
		}

		__proto.setFocus=function(input){
			Laya.stage.focus=input;
		}

		__proto.onkeyDown=function(input,event){
			if(event.keyCode!=9)return;
			var index=0;
			var tInputList;
			tInputList=this.inputList;
			index=tInputList.indexOf(input);
			if(index>=0){
				index++;
				if(index>=tInputList.length){
					index=0;
				}
				input=this.findNextInput(index,tInputList);
				(input.textField).focus=true;
				Notice$1.notify("SELECTE_INPUT",[input]);
			}
		}

		__proto.findNextInput=function(startIndex,inputList){
			var i=0,len=0;
			len=inputList.length;
			var tInput;
			for(i=startIndex;i<len;i++){
				tInput=inputList[i];
				if(tInput.displayedInStage)return tInput;
			}
			for(i=0;i<startIndex;i++){
				tInput=inputList[i];
				if(tInput.displayedInStage)return tInput;
			}
			return inputList[0];
		}

		__proto.onSkinDown=function(input,e){
			Notice$1.notify("SelecteResFile",[input.text]);
		}

		__proto.onDragDrop=function(types,e,failTip){
			var tar=e.target;
			var data=e.data;
			var asset;
			asset=data.asset||data.path;
			if(!asset)return;
			if(! (typeof asset=='string'))return;
			var prefix;
			prefix=FileTools.getExtensionName(asset);
			if(types&&prefix){
				var typeArr;
				typeArr=types.split(",");
				if(typeArr.indexOf(prefix)<0){
					if(failTip)
						Alert.show(failTip);
					return;
				}
			}
			if(!types){
				if(data.type!="res")return;
			};
			var src=e.dragInitiator;
			var path;
			switch(data.type){
				case "res":
					path=FileManager.getRelativePath(SystemSetting.assetsPath,asset);
					break ;
				case "page":
					path=FileManager.getRelativePath(SystemSetting.pagesPath,asset);
					break ;
				default :
					path=FileManager.getWorkRelativePath(asset);
				}
			path=FileManager.adptToCommonUrl(path);
			tar.text=path;
			this.onInput(tar);
		}

		__proto.onMutiDragDrop=function(types,failTip,e){
			var tar=e.target;
			var data=e.data;
			if(data.type!="multiResFile"&&data.type!="resDir"){
				if(types){
					this.onDragDrop(types,e,failTip);
				}
				return;
			};
			var files;
			files=DragEvent.getMutiDragFiles(e);
			if(!files||files.length<1)return;
			tar.text=files.join(",");
			this.onInput(tar);
		}

		__proto.onSliderChanging=function(txt,tar){}
		//txt.text=tar.value+"";
		__proto.onSliderChange=function(slider){
			this.setCompProp(slider.name,slider.value);
		}

		/**处理颜色变化*/
		__proto.onColorChange=function(e){
			var color=e.currentTarget;
			this.setCompProp(color.name,color.selectedColor);
		}

		__proto.onColorChangeNew=function(picker){
			this.setCompProp(picker.name,picker.getColorStr());
		}

		__proto.onColorCleared=function(picker){
			this.setCompProp(picker.name,"");
		}

		/**处理颜色变化*/
		__proto.onColorBoxChange=function(e){
			var color=e.currentTarget;
			var colorStr=color.selectedColor;
			var propName=color.name.replace("_color","");
			var input=color.parent.getChildByName(propName);
			var arr=input.text.split(",");
			if (input.text !="" && arr){
				for (var i=0;i < arr.length;i++){
					var item=arr[i];
					if (item.indexOf("#")>-1){
						arr[i]=colorStr;
						break ;
					}
				}
				input.text=arr.join(",");
				}else {
				input.text=colorStr;
			}
			this.setCompProp(input.name,input.text);
		}

		/**处理下拉框变化*/
		__proto.onDropChange=function(e){
			var drop=e.currentTarget;
			this.setCompProp(drop.name,drop.selectedLabel);
		}

		__proto.onInputChanging=function(input){
			this.setCompProp(input.name,input.text,true);
		}

		__proto.onInput=function(input){
			this.setCompProp(input.name,input.text);
		}

		/**处理输入框回车*/
		__proto.onInputKeyDown=function(e){
			if (e.keyCode==13){
				var input=e.currentTarget;
				this.setCompProp(input.name,input.text);
			}
		}

		/**输入框获得焦点处理*/
		__proto.onTextFocusIn=function(e){
			var input=e.currentTarget;
			Laya.timer.once(1,this,this.selectAllText,[input]);
		}

		__proto.selectAllText=function(input){}
		/**处理输入框失去焦点*/
		__proto.onTextFocusOut=function(e){
			var input=e.currentTarget;
			this.setCompProp(input.name,input.text);
		}

		/**设置组件属性*/
		__proto.setCompProp=function(key,value,isChanging){
			(isChanging===void 0)&& (isChanging=false);
			if (!this._isSettingValue){
				var flag=false;
				var oldValue=String(this._data[key]);
				if(value==""&&!this._data.hasOwnProperty(key))return;
				if (oldValue !=value){
					if (Boolean(value)){
						this._data[key]=value;
						flag=true;
						}else if (Boolean(oldValue)){
						delete this._data[key];
						flag=true;
					}
				}
				if (flag){
					this.event("change",[]);
					PropPanel.instance.valueChange(key,value,isChanging,this.nameTypeO[key],this.name!="appendProps");
				}
			}
		}

		/**设置属性*/
		__proto.setData=function(data){}
		// setValueD(data.cList[0].p);
		__proto.setValueD=function(data,defaultData,itemType,node){
			this.itemType=itemType;
			this._data=data=data;
			this.node=node;
			this._isSettingValue=true;
			for (var i=0,n=this._props.length;i < n;i++){
				var prop=this._props[i].p||this._props[i];;
				var name=prop.name;
				var value="";
				var isDefault=false;
				if (!data.hasOwnProperty(name)){
					if(defaultData&&defaultData.hasOwnProperty(name)){
						value=ObjectTools.getAutoValue(defaultData[name]);
						if(prop.type=="bool"){
							value=value?"true":"false";
						}
						isDefault=true;
					}
					}else{
					value=data[name];
					if(prop.type=="bool"){
						value=value?"true":"false";
					}
				};
				var target=this.groupBox.getChildByName(name);
				if ((target instanceof laya.ui.TextInput )){
					(target).text=value+"";
					(target).color=isDefault?StyleConsts$1.TextInputColorDefault:StyleConsts$1.TextInputColor;
					}else if ((target instanceof laya.ui.ComboBox )){
					(target).selectedLabel=value;
					(target).labelColors=isDefault?StyleConsts$1.TextInputColorDefault:StyleConsts$1.TextInputColor;
					}else if ((target instanceof laya.ui.ColorPicker )){
					(target).selectedColor=value;
					}else if ((target instanceof laya.ui.Slider )){
					(target).value=parseFloat(value);
					}else if ((target instanceof laya.editor.comonents.ColorPickerItem )){
					(target).setColor(value);
				}
			}
			this._isSettingValue=false;
		}

		__static(PropGroup,
		['typeTrans',function(){return this.typeTrans={
				"Boolean":"bool",
				"String":"string"
		};}

		]);
		return PropGroup;
	})(PropGroupUI)


	//class laya.editor.core.Design extends laya.editor.core.UIView
	var Design=(function(_super){
		function Design(){
			this._xml=null;
			this._autoId=1;
			this._compMap={};
			this._selectedBox=null;
			this._selectedComps=[];
			this._isMove=false;
			this._isDragSelect=false;
			this._hasChange=false;
			this._maskLayer=null;
			this._sceneWidth=0;
			this._sceneHeight=0;
			this._sceneColor=null;
			this._sceneBg=null;
			this.animation=null;
			this.myID=0;
			this.aniSign=null;
			this.pageType=null;
			this.animationNodeMenu=null;
			this._menu=null;
			this.isRightClick=false;
			this.uiXmlRestored=null;
			this._isAnimationMode=false;
			this._count=0;
			this._MouseTar=null;
			this.isFirstReFresh=true;
			this._treeData=null;
			this._createComp=null;
			this._idUsed={};
			Design.__super.call(this);
			this._xmls=[];
			this._xmlsRemoved=[];
			this._currMouse=new Point();
			this._bgLayer=new Image();
			this._maskAboveLayer=new UIBox();
			this._dragBoxLayer=new DragBoxManager();
			this._selectLineLayer=new Sprite();
			this.rightMouseDownPos=new Point();
			this.parseInt=LayaBuilder.mParseInt;
			this.graphics.drawRect(0,0,100,100,null,"#ff0000");
			this.addChildAt(this._bgLayer,0);
			this.myID=Design.designID;
			Design.designID++;
			this.aniSign="designAni:"+this.myID;
			this._dragBoxLayer.mouseThrough=true;
			this._dragBoxLayer.height=2;
			this._dragBoxLayer.mouseEnabled=true;
			this._maskLayer=Utils$1.createMaskArea(5000,5000,"#575757",0.5);
			this._maskLayer.pivot(2500,2500);
			this._maskLayer.mouseEnabled=true;
			this._maskLayer.on("doubleclick",this,this.onMaskDoubleClick);
			this._maskLayer.visible=false;
			this._maskLayer.width=this._maskLayer.height=5000;
			this._maskLayer.name="_maskLayer";
			this.addChild(this._maskLayer);
			this.addChild(this._maskAboveLayer);
			this._maskAboveLayer.width=this._maskAboveLayer.height=5000;
			this._maskAboveLayer.visible=false;
			this._maskAboveLayer.on("doubleclick",this,this.onDoubleClick);
			this._maskAboveLayer.name="_maskAboveLayer";
			this.addChild(this._dragBoxLayer);
			this.addChild(this._selectLineLayer);
			this.on("keydown",this,this.onKeyDown);
			this.on("mousedown",this,this.onMouseDown);
			this.on("mouseup",this,this.onMouseClick);
			this.on("doubleclick",this,this.onDoubleClick);
			this.mouseThrough=true;
			this.on("display",this,this.addListens);
			this.on("undisplay",this,this.removeListens);
			this.on("rightmousedown",this,this.onRightMouseDown);
			this.on("rightmouseup",this,this.onRightMouseUp);
			this.animationNodeMenu=ContextMenu$1.createMenu("创建关键帧");
			this.animationNodeMenu.on("select",this,this.onEmunSelect);
			this._menu=ContextMenu$1.createMenuByArray2(["复制","粘贴","删除","","转换为容器","打散容器","","Sprite节点","2D",ObjectTools.setValueArr([],TypeManager.Res2D),"Graphics",ObjectTools.setValueArr([],TypeManager.GraphicRes),"UI组件",ObjectTools.setValueArr([],TypeManager.UIRes)]);
			this._menu.on("select",this,this.onEmunSelect);
		}

		__class(Design,'laya.editor.core.Design',_super);
		var __proto=Design.prototype;
		__proto.onEmunSelect=function(name){
			var target;
			target=this.selectedCompXml;
			if(!target)return;
			if(TypeManager.isResTypeName(name)){
				Notice$1.notify("AddNode",[name,0,0,target.compId]);
				return;
			}
			switch (name){
				case "存储为预设":
					break ;
				case "创建关键帧":
					if(target)
						Notice$1.notify("RECORD_KEYFRAME",[target.compId]);
					break ;
				case "转换为容器":
					ShortcutManager.exeKey(66,true,false);
					break ;
				case "打散容器":
					ShortcutManager.exeKey(85,true,false);
					break ;
				case "删除":
					Notice$1.notify("DELETE_SELECTED");
					break ;
				case "切断预设":
					Notice$1.notify("CutOff_Prefab",[target.compId]);
					break ;
				case "定位预设":
					if(target&&target.props&&target.props.preset){
						var pPath=target.props.preset;
						pPath=StringTool.getReplace(pPath,"laya/assets/","");
						Notice$1.notify("SelecteResFile",[pPath]);
					}
					break ;
				case "粘贴":
					Laya.stage.focus=this;
					ShortcutManager.exeKey(86,true,false);
					break ;
				case "复制":
					Laya.stage.focus=this;
					ShortcutManager.exeKey(67,true,false);
					break ;
				case "Sprite节点":
					Notice$1.notify("AddNode",["Sprite",0,0,target.compId]);
					break ;
				}
			switch (name){
				case "创建关键帧":
					if(this.selectedCompXml){
						Notice$1.notify("RECORD_KEYFRAME",[this.selectedCompXml.compId]);
					}
					break ;
				}
		}

		__proto.onRightMouseDown=function(){
			this.isRightClick=false;
			if(this.selectedComp){
				this.rightMouseDownPos.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
				this.isRightClick=true;
			}
		}

		__proto.onRightMouseUp=function(){
			if(!this.isRightClick)return;
			this.isRightClick=false;
			if(Math.abs(Laya.stage.mouseX-this.rightMouseDownPos.x)>5||Math.abs(Laya.stage.mouseX-this.rightMouseDownPos.x)>5){
				return;
			}
			if(!this.selectedComp)return;
			if(!this.isAnimationMode){
				this._menu.show();
				}else{
				this.animationNodeMenu.show();
			}
		}

		__proto.addListens=function(){
			Notice$1.listen("Prop_Changed",this,this.propChangedNotice,null,true);
			Notice$1.listen("Prop_change",this,this.changeProps,null,true);
			Notice$1.listen("Prop_changeing",this,this.changeingProps,null,true);
			Notice$1.listen("Display_selected",this,this.selectCompChainHandler,null,true);
			Notice$1.listen("Display_multiSelected",this,this.mutiSelectComps,null,true);
			Notice$1.listen("ClearDesignSelect",this,this.clearSelect,null,true);
			Notice$1.listen("display_value_changes",this,this.displayValueChangeHandler,null,true);
			Notice$1.listen("Display_tree_change",this,this.displayTreeChangeHandler,null,true);
			Notice$1.listen("IDEKey_Event",this,this.onKeyDown,null,true);
			Notice$1.listen("Display_transParent",this,this.transNodeParent,null,true);
			Notice$1.listen("Display_Enter",this,this.enterComp,null,true);
			Notice$1.listen("AddNode",this,this.addNode,null,true);
			Notice$1.listen("CutOff_Prefab",this,this.cutOffPrefab,null,true);
			Notice$1.listen("REPLACE_SELECTEDCOMPS",this,this.replaceSelecteCompsByRes,null,true);
			Notice$1.listen("CLIP_VIEW",this,this.fitSizeToUI);
		}

		__proto.removeListens=function(){
			Notice$1.cancel("Prop_Changed",this,this.propChangedNotice);
			Notice$1.cancel("Prop_change",this,this.changeProps);
			Notice$1.cancel("Display_selected",this,this.selectCompChainHandler);
			Notice$1.cancel("Display_multiSelected",this,this.mutiSelectComps);
			Notice$1.cancel("display_value_changes",this,this.displayValueChangeHandler);
			Notice$1.cancel("Display_tree_change",this,this.displayTreeChangeHandler);
			Notice$1.cancel("IDEKey_Event",this,this.onKeyDown);
			Notice$1.cancel("Display_transParent",this,this.transNodeParent);
			Notice$1.cancel("Display_Enter",this,this.enterComp);
			Notice$1.cancel("AddNode",this,this.addNode);
			Notice$1.cancel("CutOff_Prefab",this,this.cutOffPrefab);
			Notice$1.cancel("REPLACE_SELECTEDCOMPS",this,this.replaceSelecteCompsByRes);
			Notice$1.cancel("CLIP_VIEW",this,this.fitSizeToUI);
		}

		__proto.replaceSelecteCompsByRes=function(path){
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var items;
			var i=0,len=0;
			var tItem;
			items=this._selectedComps;
			if(!items)return;
			len=items.length;
			if(items.length<1)return;
			var compType;
			compType=ResStyleManager.getResCompType(FileManager.getResRelativePath(path));
			var replaceNodeData;
			replaceNodeData=this.getAddCompData(path,compType);
			if(!replaceNodeData)return;
			delete replaceNodeData["compId"];
			var tData;
			for(i=0;i<len;i++){
				tItem=items[i];
				if(!tItem)continue ;
				tData=tItem.comXml;
				if(!tData)continue ;
				if(tData["compId"]==this.getRootID())continue ;
				this.replaceCompData(tData,replaceNodeData);
			}
			this.changeXml(this._xml,true);
		}

		__proto.replaceCompData=function(oData,newData){
			var oldProps;
			var newProps;
			oldProps=oData.props;
			newProps=newData.props;
			var key;
			if(oldProps){
				for(key in oldProps){
					if(!Design.KeepKeys[key]){
						delete oldProps[key];
					}
				}
			}
			if(newProps){
				for(key in newProps){
					if(!oldProps.hasOwnProperty(key)){
						oldProps[key]=newProps[key];
					}
				}
			}
			for(key in newData){
				if(key !="props"&&key!="child"){
					oData[key]=newData[key];
				}
			}
		}

		__proto.cutOffPrefab=function(nodeID){
			var node;
			node=this.findXmlById(this._xml,nodeID);
			if(!node)node=this.selectedCompXml;
			if(!node)return;
			PreFabManager.I.cutOffNodeTreePrefab(node);
			this.changeXml(this._xml,true);
		}

		__proto.addNode=function(type,x,y,parentId,abPos){
			(abPos===void 0)&& (abPos=false);
			this.addCompWork(this.getAddCompData("",type),x,y,parentId,abPos);
		}

		__proto.getCompByNodeData=function(node){
			if(!node)return null;
			if(!node.compId)return null;
			return this.getCompById(node.compId);
		}

		__proto.transNodeParent=function(tar,newParent){
			var tarNode;
			var newParentNode;
			tarNode=this.getCompByNodeData(tar);
			newParentNode=this.getCompByNodeData(newParent);
			if(!tarNode||!tarNode.displayedInStage)return;
			if(!newParentNode||!newParentNode.displayedInStage)return;
			var preParent;
			preParent=tarNode.parent;
			if(!preParent&&preParent.displayedInStage)return;
			var pos;
			pos=Design._tempTransPoint;
			pos.setTo(tarNode.x,tarNode.y);
			pos=preParent.localToGlobal(pos);
			pos=newParentNode.globalToLocal(pos);
			tar.props.x=pos.x;
			tar.props.y=pos.y;
		}

		// tar.pos(pos.x,pos.y);
		__proto.propChangedNotice=function(){
			this.hasChange=true;
			this.changeXml(this._xml,false);
		}

		__proto.isActive=function(){
			if(!UIPanel.instance.currViewer)return false;
			return this==UIPanel.instance._currViewer.design;
		}

		__proto.onActive=function(){
			this.setAnimationData();
		}

		__proto.setAnimationData=function(){
			if(!this.animation)return;
			Notice$1.notify("Fresh_animationData",[this.animation]);
		}

		__proto.displayValueChangeHandler=function(itemId,key,value){
			this.changeCompProp(itemId,key,value);
		}

		__proto.displayTreeChangeHandler=function(){
			this.changeXml(this._xml,true);
		}

		__proto.getRootID=function(){
			return this._xml.compId;
		}

		__proto.goToRoot=function(){
			if(this.getRootID()==this.getSelectRootID())return;
			this.enterComp(this.getRootID());
		}

		//改变属性通知
		__proto.changeMixItemProps=function(proName,pro,targetID,cache){
			(cache===void 0)&& (cache=true);
			var mixO;
			mixO=this.getSelectePropItem();
			var dValue=NaN;
			switch(proName){
				case "x":
				case "y":
					dValue=pro-mixO.props[proName];
					this.changeSelecteCompValues(proName,dValue,cache);
					mixO.props[proName]=pro;
					break ;
				case "mouseEnabled":
				case "visible":
					this.setSelecteCompValues(proName,pro,cache);
					break ;
				}
			if(this._selectedComps){
				var tComp;
				var len=0;
				var i=0;
				len=this._selectedComps.length;
				for(i=0;i<len;i++){
					this.nodeChanged(this._selectedComps[i].comXml,["x","y","mouseEnabled","visible"]);
				}
			}
			this.refreshStatusInfo();
		}

		__proto.changeSelecteCompValues=function(key,dValue,cache){
			(cache===void 0)&& (cache=true);
			var items;
			var i=0,len=0;
			var tItem;
			items=this._selectedComps;
			len=items.length;
			for(i=0;i<len;i++){
				tItem=items[i];
				tItem[key]+=dValue;
				this._dragBoxLayer.refreshDrag(tItem);
				tItem.comXml.props[key]=tItem[key];
			}
			if(cache)
				this.changeXml(this._xml,false);
		}

		__proto.refreshDragBlocks=function(){
			var items;
			var i=0,len=0;
			var tItem;
			items=this._selectedComps;
			len=items.length;
			for(i=0;i<len;i++){
				tItem=items[i];
				this._dragBoxLayer.refreshDrag(tItem);
			}
		}

		__proto.setSelecteCompValues=function(key,dValue,cache){
			(cache===void 0)&& (cache=true);
			var items;
			var i=0,len=0;
			var tItem;
			items=this._selectedComps;
			len=items.length;
			for(i=0;i<len;i++){
				tItem=items[i];
				if(key!="visible")
					tItem[key]=dValue;
				this._dragBoxLayer.refreshDrag(tItem);
				tItem.comXml.props[key]=dValue;
			}
			if(cache)
				this.changeXml(this._xml,false);
		}

		__proto.changeingProps=function(proName,pro,targetID){
			this.changeProps(proName,pro,targetID,false);
		}

		__proto.checkVarOk=function(proName,pro){
			if(proName!="var")return true;
			var data;
			data=this._xml;
			var varsO;
			varsO={};
			return Design.parseVarByObj(data,varsO);
		}

		__proto.changeProps=function(proName,pro,targetID,cache,ifRefreshComp){
			(targetID===void 0)&& (targetID=-1);
			(cache===void 0)&& (cache=true);
			(ifRefreshComp===void 0)&& (ifRefreshComp=true);
			if(!this.checkVarOk(proName,pro)){
			}
			if(this._selectedComps&&this._selectedComps.length>1){
				this.changeMixItemProps(proName,pro,targetID,cache);
				return;
			};
			var hasDelete=false;
			hasDelete=false;
			var selected;
			if(targetID>0){
				selected=this.findXmlById(this._xml,targetID);
				}else{
			}
			if(!selected){
				selected=this.selectedCompXml?this.selectedCompXml:this._xml;
			}
			if(!selected)return;
			var propNames;
			propNames=[proName];
			var preComp;
			preComp=this.getCompById(selected.compId);
			var prePValue=NaN;
			var DPValue=NaN;
			var newPValue=NaN;
			newPValue=LayaBuilder.mParseInt(pro);
			if(proName=="pivotX"){
				prePValue=preComp.pivotX;
				DPValue=preComp.pivotX-newPValue;
				preComp.x-=DPValue;
				preComp.x=Math.floor(preComp.x);
				selected.props.x=preComp.x;
				propNames.push("x");
			};
			var newPV=NaN;
			if(proName=="anchorX"){
				newPValue=LayaBuilder.mParserFloat(pro);
				prePValue=preComp.pivotX;
				newPV=preComp.width*newPValue;
				DPValue=preComp.pivotX-newPV;
				preComp.x-=DPValue;
				preComp.x=Math.floor(preComp.x);
				selected.props.x=preComp.x;
				propNames.push("x");
			}
			if(proName=="pivotY"){
				prePValue=preComp.pivotY;
				DPValue=preComp.pivotY-newPValue;
				preComp.y-=DPValue;
				preComp.y=Math.floor(preComp.y);
				selected.props.y=preComp.y;
				propNames.push("y");
			}
			if(proName=="anchorY"){
				newPValue=LayaBuilder.mParserFloat(pro);
				prePValue=preComp.pivotY;
				newPV=preComp.height*newPValue;
				DPValue=preComp.pivotY-newPV;
				preComp.y-=DPValue;
				preComp.y=Math.floor(preComp.y);
				selected.props.y=preComp.y;
				propNames.push("y");
			}
			if(pro===""){
				delete selected.props[proName];
				hasDelete=true;
				}else{
				ObjectTools.setObjValue(selected.props,proName,pro);
			};
			var dataO;
			dataO=selected.props;
			var conflictKey;
			var i=0,len=0;
			var dKey;
			if(selected!=this._xml){
				len=Design.conflictGroups.length;
				var tGroup;
				var gId;
				for(i=0;i<len;i++){
					tGroup=Design.conflictGroups[i];
					if(tGroup[proName]){
						gId=tGroup[proName];
						for(dKey in tGroup){
							if(dataO.hasOwnProperty(dKey)){
								if(tGroup[dKey]!=gId){
									delete dataO[dKey];
									hasDelete=true;
								}
							}
						}
						break ;
					}
				}
				len=Design.conditionChangeDic.length;
				var tCondition;
				for(i=0;i<len;i++){
					tCondition=Design.conditionChangeDic[i];
					if(ObjectTools.hasKeys(dataO,tCondition["keys"])){
						dKey=tCondition["trans"][proName];
						delete dataO[dKey];
						hasDelete=true;
						break ;
					}
				}
			}
			if(ifRefreshComp){
				this.refreshComp(this.getCompById(selected.compId),proName,pro,hasDelete);
			}
			this.nodeChanged(selected,propNames);
			if(cache)
				this.changeXml(this._xml,false);
			if(proName=="name"||proName=="var"){
				if(this._treeData){
					this._treeData=TreeData.createByUIObj(this._xml);
				}
				this.updateNameToPanels();
			}
			if(ifRefreshComp){
				this.clearSelect();
				if(preComp!=this.getCompById(selected.compId)){
					this.removeBorder(preComp);
					this.unSelectComp(preComp);
					this.selectComp(this.getCompById(selected.compId),true,true,false);
					}else{
					this.removeBorder(preComp);
					this.selectComp(this.getCompById(selected.compId),true,true,false);
				}
			}
		}

		// addBorder(getCompById(selected.compId));
		__proto.updateChanges=function(){}
		__proto.changeCompProp=function(itemId,key,value){
			var comp;
			comp=this.getCompById(itemId);
			var dataO;
			dataO=this._treeData.getNodeByID(itemId);
			if(key==Signs.HideSign){
				if(comp)
					comp["visible"]=!value;
				ObjectTools.setAutoTypeValue(dataO,key,value);
				if(value&&this._treeData.isNodeSame(this.selectedCompXml,dataO)){
					this.clearSelect();
				}
				}else if(key==Signs.LockSign){
				ObjectTools.setAutoTypeValue(dataO,key,value);
				if(value&&this._treeData.isNodeSame(this.selectedCompXml,dataO)){
					this.clearSelect();
				}
				}else{
				ObjectTools.setAutoTypeValue(dataO.props,key,value);
			}
			if(comp){
			}
			this.callLater(this.changeXmlLater);
		}

		__proto.changeXmlLater=function(){
			this.changeXml(this._xml,false);
		}

		// trace("_coount:",_count++);
		__proto.enterComp=function(compId){
			var item;
			item=this.getCompById(compId);
			if(!item)return;
			if(!FilterFuns.isEditorEnterAble(item))return;
			this.clearSelect();
			this._xml.selectedBox=(item).comXml.compId;
			this.refresh();
		}

		__proto.mutiSelectComps=function(compList){
			var i=0,len=0;
			len=compList.length;
			this.clearSelect();
			var rootID=0;
			rootID=this.getSelectRootID();
			for(i=0;i<len;i++){
				var tID=0;
				tID=compList[i];
				if(this.getCompParentID(tID)==rootID){
					this.selectCompByID(tID,true,true);
				}
			}
		}

		__proto.getSelectRootID=function(){
			if(this._selectedBox&&this._selectedBox["comXml"]&&this.selectedBox["comXml"].compId){
				return this.selectedBox["comXml"].compId;
				}else{
				return this.getRootID();
			}
		}

		__proto.getCompParentID=function(compID){
			var item;
			item=this.getCompById(compID);
			if(item&&item.comXml&&item.comXml.nodeParent){
				return item.comXml.nodeParent;
			}
			return-1;
		}

		//
		__proto.selectCompChainHandler=function(compId,ignoreLock,ignoreHide){
			(ignoreLock===void 0)&& (ignoreLock=false);
			(ignoreHide===void 0)&& (ignoreHide=false);
			var item;
			item=this.getCompById(compId);
			if(!item)return;
			if(this.selectedCompXml&&compId==this.selectedCompXml.compId)return;
			if(!FilterFuns.isEditorSelectableChain(item,ignoreLock,ignoreHide)){
				return;
			}
			if(compId==this.getRootID()){
				this.clearSelect(true);
				return;
			};
			var tParent;
			tParent=this.getCompById((item).comXml.nodeParent);
			var isSameSelectBox=false;
			if(this._selectedBox&&this._selectedBox["comXml"]&&this.selectedBox["comXml"].compId==(item).comXml.nodeParent){
				isSameSelectBox=true;
				}else{
				isSameSelectBox=false;
			}
			if(!tParent)return;
			this.clearSelect();
			if(FilterFuns.isEditorEnterAble(item)&&0){
				this.selectComp(item);
				}else{
				if(!isSameSelectBox){
					if(FilterFuns.isEditorEnterAble(tParent)){
						if(tParent==this._viewLayer||tParent.parent==this){
							if(this._selectedBox!=this._viewLayer){
								this._xml.selectedBox=this.getRootID();
							}
							}else{
							this._xml.selectedBox=(item).comXml.nodeParent;
						}
					}
					this.refresh();
				}
			}
			this.selectComp(this.getCompById(compId),ignoreLock,ignoreHide);
		}

		/**处理鼠标按下*/
		__proto.onMouseDown=function(e){
			Design._isClickOK=false;
			if(Design.isCtrlAdding){
				this.pasetCompUnderMouse();
				return;
			}
			if(e&&e.ctrlKey&&e.shiftKey){
				this.pasetCompUnderMouse();
				return;
			}
			this._MouseTar=this.selectedBox;
			this.callLater(this.onMouseDownWork,[e]);
			this.stage.focus=this;
		}

		//Laya.timer.once(100,this,onMouseDownWork,[e]);
		__proto.onMouseClick=function(e){
			if(!Design._isClickOK)return;
			Design._isClickOK=false;
			if(ColorPickerItem.showed)return;
			var comp=this.getCompSelectedAtCurrBox;
			if (comp !=null && (comp).comXml){
				var index=this._selectedComps.indexOf(comp);
				if (e&&(e.nativeEvent.ctrlKey || e.nativeEvent.shiftKey)){
					if (index==-1){
						this.selectComp(comp);
						}else {
						this.unSelectComp(comp);
					}
					}else {
					if (index==-1){
						this.clearSelect();
						this.selectComp(comp);
					}
				}
			}
		}

		/**单击选择和取消*/
		__proto.onMouseDownWork=function(e){
			if(ColorPickerItem.showed)return;
			if(this.isSelectedCompsUnderMouse()){
				if(this._selectedComps&&this._selectedComps.length==1){
					if(this._selectedComps[0]["disableDragMove"]){
						return;
					}
				}
				Design._isClickOK=true;
				this.readyToMove();
				}else{
				var comp=this.getCompSelectedAtCurrBox;
				if (comp !=null && (comp).comXml){
					Design._isClickOK=true;
					}else{
					this.clearSelect();
					this.readyToDragSelect();
				}
			}
		}

		/**准备移动*/
		__proto.readyToMove=function(){
			this._isDragSelect=false;
			if (this._selectedComps.length > 0){
				this._currMouse.x=this._MouseTar.mouseX;
				this._currMouse.y=this._MouseTar.mouseY;
				this.stage.on("mousemove",this,this.onStageMouseMove);
				this.stage.on("mouseup",this,this.onStageMouseUp);
			}
		}

		/**开始选择（显示选择框）*/
		__proto.readyToDragSelect=function(){
			this._isDragSelect=true;
			this._selectLineLayer.x=this.mouseX;
			this._selectLineLayer.y=this.mouseY;
			this.stage.on("mousemove",this,this.onStageMouseMove);
			this.stage.on("mouseup",this,this.onStageMouseUp);
		}

		__proto.cancelMouseState=function(){
			return;
			this._isDragSelect=false;
			this.stage.off("mousemove",this,this.onStageMouseMove);
			this.stage.off("mouseup",this,this.onStageMouseUp);
			this._selectLineLayer.graphics.clear();
		}

		/**移动组件*/
		__proto.onStageMouseMove=function(e){
			if (this._isDragSelect){
				this._selectLineLayer.graphics.clear();
				Utils$1.drawDashedRect(this._selectLineLayer.graphics,this.mouseX-this._selectLineLayer.x,this.mouseY-this._selectLineLayer.y);
				}else {
				var mx=(this._MouseTar.mouseX-this._currMouse.x);
				var my=(this._MouseTar.mouseY-this._currMouse.y);
				if (this._isMove==false && (Math.abs(mx)> 2 || Math.abs(my)> 2)){
					this._isMove=true;
					Design._isClickOK=false;
				}
				if (this._isMove){
					this._currMouse.x+=mx;
					this._currMouse.y+=my;
					for (var i=0,n=this._selectedComps.length;i < n;i++){
						var comp=this._selectedComps[i];
						comp.x=Math.round(comp.x+mx);
						comp.y=Math.round(comp.y+my);
						var info=(comp).comXml.props;
						this.updateNodePosInfo(info,comp);
						this._dragBoxLayer.refreshDrag(comp);
					}
					this.refreshStatusInfo();
					this.showSelectRuleRange();
				}
			}
		}

		__proto.updateNodePosInfo=function(info,comp){
			if(info.hasOwnProperty("left")){
				info.left=comp.x;
				delete info.x;
				}else{
				info.x=comp.x;
			}
			if(info.hasOwnProperty("top")){
				info.top=comp.y;
				delete info.y;
				}else{
				info.y=comp.y;
			};
			var tParent;
			tParent=comp.parent;
			if(!tParent)return;
			if(info.hasOwnProperty("right")){
				info.right=tParent.width-comp.x-comp.width;
				delete info.x;
			}
			if(info.hasOwnProperty("bottom")){
				info.bottom=tParent.height-comp.y-comp.height;
				delete info.y;
			}
			if(info.hasOwnProperty("centerY")){
				comp["centerY"]=info.centerY=comp.y-(tParent.height-comp.height*comp.scaleY)*0.5-comp.pivotY*comp.scaleY;
				delete info.y;
			}
			if(info.hasOwnProperty("centerX")){
				comp["centerX"]=info.centerX=comp.x-(tParent.width-comp.width*comp.scaleX)*0.5-comp.pivotX*comp.scaleX;
				delete info.x;
			}
		}

		__proto.showCompRuleRange=function(comp){
			Design._recPoints[0].setTo(comp.x,comp.y);
			Design._recPoints[1].setTo(comp.x+comp.width,comp.y+comp.height);
			this.showRuleRange(comp.parent);
		}

		__proto.showSelectRuleRange=function(){
			if(!this._selectedComps||this._selectedComps.length<1){
				Notice$1.notify("Clear_RULE_RANGE");
				return;
			};
			var tComp;
			tComp=this._selectedComps[0];
			this.calculateSelecteRange();
			this.showRuleRange(tComp.parent);
		}

		__proto.calculateSelecteRange=function(){
			var sPoint;
			var ePoint;
			sPoint=Design._recPoints[0];
			ePoint=Design._recPoints[1];
			var i=0,len=0;
			len=this._selectedComps.length;
			var tCompRec;
			tCompRec=this._selectedComps[0].getBounds();
			sPoint.x=tCompRec.x;
			sPoint.y=tCompRec.y;
			ePoint.x=tCompRec.x+tCompRec.width;
			ePoint.y=tCompRec.y+tCompRec.height;
			for(i=1;i<len;i++){
				tCompRec=this._selectedComps[i];
				if(sPoint.x>tCompRec.x){
					sPoint.x=tCompRec.x;
				}
				if(sPoint.y>tCompRec.y){
					sPoint.y=tCompRec.y;
				}
				if(ePoint.x<tCompRec.x+tCompRec.width){
					ePoint.x=tCompRec.x+tCompRec.width;
				}
				if(ePoint.y<tCompRec.y+tCompRec.height){
					ePoint.y=tCompRec.y+tCompRec.height;
				}
			}
		}

		__proto.getSelectePropItem=function(){
			this.calculateSelecteRange();
			var sPoint;
			var ePoint;
			sPoint=Design._recPoints[0];
			ePoint=Design._recPoints[1];
			var prop;
			prop=Design._selectePropItem.props;
			var key;
			for(key in prop){
				delete prop[key];
			}
			prop.x=sPoint.x;
			prop.y=sPoint.y;
			prop.width=ePoint.x-sPoint.x;
			prop.height=ePoint.y-sPoint.y;
			return Design._selectePropItem;
		}

		__proto.showRuleRange=function(container){
			if(!container)return;
			var i=0,len=0;
			var tPoint;
			len=Design._recPoints.length;
			for(i=0;i<len;i++){
				tPoint=Design._recPoints[i];
				tPoint=container.localToGlobal(tPoint);
			}
			Notice$1.notify("SHOW_RULE_RANGE",[Design._recPoints]);
		}

		/**处理鼠标点开*/
		__proto.onStageMouseUp=function(e){
			this.stage.off("mousemove",this,this.onStageMouseMove);
			this.stage.off("mouseup",this,this.onStageMouseUp);
			if (this._isDragSelect){
				this._selectLineLayer.width=this.mouseX-this._selectLineLayer.x;this._selectLineLayer.height=this.mouseY-this._selectLineLayer.y;
				var rect=this._selectLineLayer.getBounds();
				var point;
				point=new Point();
				point.setTo(rect.x,rect.y);
				point=(this._selectLineLayer.parent).localToGlobal(point);
				point=this._selectedBox.globalToLocal(point);
				rect.x=point.x;
				rect.y=point.y;
				if (rect.width>0){
					var box=new Rectangle();
					box.copyFrom(rect);
					var compRect=new Rectangle();
					for (var i=0,n=this._selectedBox.numChildren;i < n;i++){
						var display=this._selectedBox.getChildAt(i);
						if ((display).comXml){
							compRect.copyFrom(display.getBounds());
							if(compRect.width==0||compRect.height==0){
								compRect.x=display.x;
								compRect.y=display.y;
							}
							if (box.intersects(compRect)){
								if(FilterFuns.isEditorSelectableChain(display))
									this.selectComp(display);
							}
						}
					}
				}
				this._selectLineLayer.graphics.clear();
				}else if (this._isMove){
				if(this._selectedComps){
					var tComp;
					var len=0;
					len=this._selectedComps.length;
					for(i=0;i<len;i++){
						this.nodeChanged(this._selectedComps[i].comXml,["x","y","width","height"]);
					}
				}
				this.changeXml(this._xml,false);
				this._isMove=false;
				this.callLater(this.changeSelectComp);
			}
		}

		/**刷新参考视图*/
		__proto.refreshBg=function(){
			if (Boolean(this._sceneBg)){
				this._bgLayer.skin="";
				ResFileManager.clearRes(FileTools.getAbsPath(FileManager.getWorkPath(this._sceneBg)));
				this._bgLayer.skin=FileTools.getAbsPath(FileManager.getWorkPath(this._sceneBg));
				}else {
				this._bgLayer.skin=null;
			}
		}

		/**显示隐藏参考视图*/
		__proto.toggleBg=function(){
			this._bgLayer.visible=!this._bgLayer.visible;
		}

		/**更改场景大小*/
		__proto.changeSceneSize=function(){
			var g=this.graphics;
			g.clear();
			var offX=0;
			var offY=0;
			if(this.isGraphicAnimation||this.pageType=="MoveEffect"){
				offX=this._sceneWidth*0.5;
				offY=this._sceneHeight*0.5;
				g.drawRect(-offX,-offY,this._sceneWidth,this._sceneHeight,this._sceneColor);
				g.drawLine(0,-offY,0,-offY+this._sceneHeight,"#ff0000");
				g.drawLine(-offX,0,-offX+this._sceneWidth,0,"#ff0000");
				}else{
				g.drawRect(-offX,-offY,this._sceneWidth,this._sceneHeight,this._sceneColor);
			}
			if(this._sceneWidth>0&&this._sceneHeight>0){
				if(this.pageType!="prefab_ui"&&this.pageType!="Prefab")
					this._viewLayer.size(this._sceneWidth,this._sceneHeight);
			}
		}

		/**初始化视图*/
		__proto.init=function(viewXml){
			delete viewXml.selecteID;
			delete viewXml.selectedBox;
			this._xml=viewXml;
			this.animation=new AnimationDataWorker();
			this.animation.design=this;
			this.animation.animations=this._xml.animations;
			this.animation.compMap=this._compMap;
			if(!this.animation.animations)this.animation.animations=[];
			delete this._xml.animations;
		}

		__proto.recoverFromData=function(uixml,animations){
			if(this.animation){
				this.animation.animations=animations;
				if(!this.animation.animations)this.animation.animations=[];
			}
			this.xml=uixml;
			if(this.isAnimationMode){
				if(this.animation){
					this.animation.compMap=this._compMap;
					this.uiXmlRestored=uixml;
				}
				this.animation.isFirstSetUp=true;
				this.setAnimationData();
			}
		}

		/**更改视图*/
		__proto.change=function(reCreate){
			(reCreate===void 0)&& (reCreate=true);
			this.changeXml(this._xml,reCreate);
		}

		/**改变视图*/
		__proto.changeXml=function(newXml,reCreate){
			(reCreate===void 0)&& (reCreate=true);
			if (reCreate){
				this.xml=newXml;
			}
			this.cacheXML(newXml);
			this.hasChange=true;
			this._xmlsRemoved.length=0;
		}

		__proto.changeFromRepalce=function(newXml,reCreate){
			(reCreate===void 0)&& (reCreate=true);
			this.changeXml(newXml,reCreate);
		}

		/**缓存视图*/
		__proto.cacheXML=function(newXml){
			if(this.isAnimationMode){
				return;
			};
			var cacheData;
			cacheData=ObjectTools.copyObj(newXml);
			this._xmls.push(cacheData);
			if (this._xmls.length > 500+50){
				this._xmls.splice(1,50);
			}
		}

		__proto.getLastCache=function(){
			if(this._xmls&&this._xmls.length>1){
				return this._xmls[this._xmls.length-2];
			}
			return null;
		}

		__proto.cacheAni=function(){
			if(this.animation){
				StateManager.updateState(this.aniSign,this.animation.animations);
			}
		}

		/**向前恢复*/
		__proto.goForward=function(){
			if(this.isAnimationMode){
				if(this.animation){
					var tAnis;
					tAnis=StateManager.getState(this.aniSign).forward();
					if(tAnis){
						this.animation.animations=tAnis;
						this.setAnimationData();
					}
				}
				return;
			}
			if (this._xmlsRemoved.length > 0){
				this.clearSelect();
				var newXml=this._xmlsRemoved.pop();
				this.xml=newXml;
				this.cacheXML(newXml);
				this.hasChange=true;
			}
		}

		/**向后恢复*/
		__proto.goBack=function(){
			if(this.isAnimationMode){
				var tAnis;
				tAnis=StateManager.getState(this.aniSign).back();
				if(tAnis){
					this.animation.animations=tAnis;
					this.setAnimationData();
				}
				return;
			}
			this.clearSelect();
			if (this._xmls.length > 1){
				this._xmlsRemoved.push(this._xmls.pop());
			}
			this.xml=Utils$1.clone(this._xmls[this._xmls.length-1]);
			this.hasChange=true;
		}

		/**清除选择*/
		__proto.clearSelect=function(ifGotoRoot){
			(ifGotoRoot===void 0)&& (ifGotoRoot=false);
			if(!this.displayedInStage)return;
			var comp;
			for(var $each_comp in this._selectedComps){
				comp=this._selectedComps[$each_comp];
				this.removeBorder(comp);
			}
			this._selectedComps.length=0;
			this.callLater(this.changeSelectComp);
			if(ifGotoRoot){
				this.goToRoot();
			}
		}

		/**改变选择*/
		__proto.changeSelectComp=function(){
			if(!this.displayedInStage)return;
			this.updatePropPanel();
			this.refreshStatusInfo();
			this.showSelectRuleRange();
			Notice$1.notify("select_changed");
			Notice$1.notify("SELECTED_NODES",[this._selectedComps]);
		}

		__proto.updateDisplayTreeSelect=function(){
			DisplayTreePanel.instance.selectBySelectList(this._selectedComps);
		}

		__proto.updatePropPanel=function(){
			var selectedXml=this.selectedCompXml;
			this.updateDisplayTreeSelect();
			if (selectedXml){
				PropPanel.instance.init(selectedXml,selectedXml.compId);
				Notice$1.notify("DesignItemSelected",[selectedXml.compId]);
				}else if (this._selectedComps.length==0&&this.selectedBox){
				PropPanel.instance.init((this.selectedBox).comXml,(this.selectedBox).comXml.compId);
				}else if(this._selectedComps&&this._selectedComps.length>1){
				PropPanel.instance.init(this.getSelectePropItem());
				}else{
				PropPanel.instance.init(null);
			}
		}

		__proto.updateNameToPanels=function(){
			this.updateDisTreePanel();
			this.updateTimeLinePanel();
		}

		/**状态栏信息*/
		__proto.refreshStatusInfo=function(){
			var rect=this.getSelectCompsBonus();
			if(!UIPanel.instance.currViewer)return;
			if(!UIPanel.instance.currViewer.compInfo)return;
			if (rect){
				UIPanel.instance.currViewer.compInfo.text=Sys.lang("选择对象：")+"x:"+rect.x+" y:"+rect.y+"  w:"+rect.width+" h:"+rect.height;
				}else {
				UIPanel.instance.currViewer.compInfo.text=Sys.lang("使用右键拖动视窗，使用滚轮缩放视窗，Ctrl+0键恢复缩放");
			}
		}

		/**获得多个选择对象的区域*/
		__proto.getSelectCompsBonus=function(){
			if (this._selectedComps.length < 1){
				return null;
				}else {
				var rect=Design._designCompsBouns;
				rect.width=-1;
				for (var i=0,n=this._selectedComps.length;i < n;i++){
					var comp=this._selectedComps[i];
					var rt=comp.getBounds();
					rect=rect.width >=0 ? rect.union(rt,rect):rect.setTo(rt.x,rt.y,rt.width,rt.height);
				}
				return rect;
			}
		}

		/**刷新视图*/
		__proto.refresh=function(){
			this.xml=this._xml;
			this.changeSelectedBox();
			this.changeSelectComp();
			if(this.isFirstReFresh){
				this.isFirstReFresh=false;
				this.cacheXML(this._xml);
				this.setAnimationData();
				this.cacheAni();
				if(this.isGraphicAnimation){
					this.isAnimationMode=true;
				}
			}
		}

		// freshDatasLater();
		__proto.freshDatasLater=function(){
			if(!this.displayedInStage)return;
			this.setAnimationData();
			this.updateTreePanels();
			this.showSelectRuleRange();
		}

		__proto.updateTreePanels=function(){
			this.updateDisTreePanel();
			this.updateTimeLinePanel();
		}

		__proto.updateTimeLinePanel=function(){}
		__proto.updateDisTreePanel=function(){
			DisplayTreePanel.instance.init(this._treeData);
			this.updateDisplayTreeSelect();
		}

		__proto.createView=function(xml){
			if(!this.findXmlById(xml,xml.selectedBox)){
				xml.selectedBox=xml.compId;
			};
			var box=this.getCompById(xml.selectedBox);
			if(box&&box.parent==this){
				box=null;
			}
			if (box&&box.parent){
				_super.prototype.createView.call(this,xml);
				this.changeSceneSize();
				TimeTool.runAllCallLater();
				this.adptRootTree();
				var preSelects;
				preSelects=ObjectTools.concatArr([],this._selectedComps);
				this.selectedBox=this.getCompById(xml.selectedBox,false);
				Design.adptIRender(this.getCompById(xml.selectedBox,false));
				this.reSelectSelects(preSelects);
				}else {
				_super.prototype.createView.call(this,xml);
				this.changeSceneSize();
				this.adptRootTree();
				TimeTool.runAllCallLater();
				this.setSelectedBoxLater(this._viewLayer,xml);
			}
		}

		// trace("_selectedBox after create",_selectedBox);
		__proto.adptRootTree=function(){
			WalkTools.walkTargetEX(this._viewLayer,Design.removeRenders,this);
		}

		__proto.findSelecteBoxAndSet=function(xml){
			var nowBox=this.getCompById(xml.selectedBox);
			if(!nowBox.displayedInStage){
				Laya.timer.once(100,this,this.findSelecteBoxAndSet,[xml],true);
				}else{
				this.setSelectedBoxLater(nowBox,xml);
			}
		}

		__proto.setSelectedBoxLater=function(tSelectBox,xml){
			var preSelects;
			preSelects=ObjectTools.concatArr([],this._selectedComps);
			this.selectedBox=tSelectBox;
			if(!xml.props){
				xml.props={};
			}
			this.sceneColor=xml.props.sceneColor;
			this.sceneWidth=this.parseInt(xml.props.width || xml.props.sceneWidth || "800");
			this.sceneHeight=this.parseInt(xml.props.height || xml.props.sceneHeight || "600");
			this.size(this.sceneWidth,this.sceneHeight);
			this.sceneBg=xml.props.sceneBg;
			this._dragBoxLayer.removeAll();
			var arr=[];
			var comp;
			for(var $each_comp in preSelects){
				comp=preSelects[$each_comp];
				var display=this.getCompById((comp).comXml.compId);
				if (display !=null){
					arr.push(display);
					this.addBorder(display);
				}
			}
			this._selectedComps=arr;
		}

		__proto.getPropWidth=function(){
			return this.parseInt(this.xml.props.width || this.xml.props.sceneWidth || "0");
		}

		__proto.getPropHeight=function(){
			return this.parseInt(this.xml.props.height || this.xml.props.sceneHeight || "0");
		}

		__proto.reSelectSelects=function(preSelects){
			var arr=[];
			var comp;
			for(var $each_comp in preSelects){
				comp=preSelects[$each_comp];
				var display=this.getCompById((comp).comXml.compId);
				if (display !=null){
					arr.push(display);
					this.addBorder(display);
				}
			}
			this._selectedComps=arr;
		}

		/**根据compId查找xml*/
		__proto.findXmlById=function(xml,id){
			var map={};
			Utils$1.xmlToMapByCompId(xml,map);
			return map[id];
		}

		__proto.createComp=function(xml,comp,visibleMap){
			if(this._createComp==null){
				this._createComp=Utils$1.bind(this.createComp,this);
			}
			UIView._createCompS_=this._createComp;
			comp=_super.prototype.createComp.call(this,xml,comp,visibleMap);
			if (comp==null){
				return null;
			};
			var compId=(xml.compId)? xml.compId :this._autoId++;
			this._autoId=Math.max(compId+1,this._autoId);
			xml.compId=compId;
			this._compMap[compId]=comp;
			(comp).comXml=xml;
			return comp;
		}

		/**画矩形*/
		__proto.drawBox=function(width,height){
			var box=new Sprite();
			box.size(width,height);
			box.graphics.drawRect(0,0,width,height,null,"#ff0000");
			return box;
		}

		/**添加描边*/
		__proto.addBorder=function(target){
			if(target&&target.parent==this)return;
			var dragType=this.parseInt(UIConfigManager.getCompProp((target).comXml.type,"drag"));
			this._dragBoxLayer.addDrag(target,dragType);
		}

		/**去除描边*/
		__proto.removeBorder=function(target){
			this._dragBoxLayer.removeDrag(target);
		}

		/**根据id获取组件*/
		__proto.getCompById=function(id,adpt){
			(adpt===void 0)&& (adpt=true);
			if(adpt)this.adptCompMapByID(id);
			return this._compMap[id];
		}

		__proto.getCompOById=function(id){
			var node;
			node=this.getCompById(id);
			if(!node)return null;
			return node.comXml;
		}

		__proto.adptCompMapByID=function(id){
			if(this._compMap[id]&&(this._compMap [id]).displayedInStage)return;
			if(this._selectedBox)
				WalkTools.walkTarget(this._selectedBox,this.adptTTID,this);
		}

		__proto.adptTTID=function(item){
			if(item["comXml"]&&item["comXml"].compId){
				if(this._compMap)
					this._compMap[item["comXml"].compId]=item;
			}
		}

		__proto.selectCompByID=function(id,ignoreLock,ignoreHide){
			(ignoreLock===void 0)&& (ignoreLock=false);
			(ignoreHide===void 0)&& (ignoreHide=false);
			var comp;
			comp=this.getCompById(id);
			if(comp){
				this.selectComp(comp,ignoreLock,ignoreHide);
			}
		}

		__proto.recoverSelected=function(){
			if(this._selectedBox==this._viewLayer)return;
			this._maskLayer.visible=false;
			if (this._selectedBox !=null && this._selectedBox !=this._viewLayer){
				var boxParent=this.getCompById((this._selectedBox).comXml.nodeParent);
				boxParent.addChild(this._selectedBox);
			}
			this._selectedBox=null;
			this._xml.selectedBox=-1;
		}

		__proto.isItemSame=function(itemA,itemB){
			if(!itemA||!itemB)return false;
			if(itemA==itemB)return true;
			if(itemA.compId==itemB.compId&&itemA.compId)return true;
			return false;
		}

		/**选择容器变化*/
		__proto.changeSelectedBox=function(){}
		/**双击选择父容器*/
		__proto.onMaskDoubleClick=function(e){
			if(e){
				e.stopPropagation();
			}
			this.cancelMouseState();
			if (this._selectedBox !=this._viewLayer){
				}else{
				return;
			}
			this.selectCompChainHandler(this._xml.selectedBox,true);
			this.playBoxEffect(true);
		}

		/**
		*取消层级选中，回到最顶层
		*
		*/
		__proto.goBackToStage=function(){
			delete this._xml.selectedBox;
			this.xml=this._xml;
		}

		/**处理双击*/
		__proto.onDoubleClick=function(e){
			e.stopPropagation();
			var target=this.selectedComp;
			if(target==null){
				this.onMaskDoubleClick(null);
				return;
			}
			if ((target).comXml.type=="UIView"){
				var path=FileManager.getPath(SystemSetting.pagesPath,(target).comXml.source);
				path=path.replace(".xml","."+TypeManager.getExtension("page"));
				Notice$1.notify("openPAGE",[path]);
				}else if (target && this._selectedBox !=target && FilterFuns.isEditorEnterAble(target)){
				if(this.isAnimationMode){
					var tType;
					tType=(target).comXml.type;
					if(FilterFuns.isUnAnimationAbleType(tType)){
						return;
					}
				}
				this._xml.selectedBox=(target).comXml.compId;
				this.cacheXML(this._xml);
				this.selectedBox=target;
				this.playBoxEffect(false);
			}
		}

		// if(!DisControlTool.isInTree(tar
		__proto.playBoxEffect=function(isBack){
			return;
			var point=(this._selectedBox.parent).localToGlobal(new Point(this._selectedBox.x+this._selectedBox.width *0.5,this._selectedBox.y+this._selectedBox.height *0.5));
			UIPanel.instance.currViewer.playBoxEffect(point.x,point.y,isBack);
		}

		__proto.isSelectedCompsUnderMouse=function(){
			if(!this._selectedComps||this._selectedComps.length<1)return false;
			if(!this._selectedBox)return false;
			var compRect=new Rectangle();
			var mousePos;
			mousePos=this._selectedBox.getMousePoint();
			Design.smousePos.setTo(mousePos.x,mousePos.y);
			mousePos=Design.smousePos;
			for (var i=this._selectedComps.length-1;i>=0;i--){
				var display=this._selectedComps[i];
				if ((display).comXml){
					compRect.setTo(display.x,display.y,display.width,display.height);
					compRect.copyFrom(display.getBounds());
					if (compRect.contains(mousePos.x,mousePos.y)){
						return true;
					}
				}
			}
			return false;
		}

		/**移动组件*/
		__proto.moveSelectedComps=function(mx,my){
			if (this._selectedComps.length > 0){
				for (var i=0,n=this._selectedComps.length;i < n;i++){
					var comp=this._selectedComps[i];
					comp.x+=mx;
					comp.y+=my;
					var info=(comp).comXml;
					info.props.x=comp.x;
					info.props.y=comp.y;
					this.updateNodePosInfo(info.props,comp);
					this._dragBoxLayer.refreshDrag(comp);
					this.nodeChanged(info,["x","y"]);
				}
				this.changeXml(this._xml,false);
				this.callLater(this.changeSelectComp);
			}
		}

		/**选择组件*/
		__proto.selectComp=function(comp,ignoreLock,ignoreHide,dealInput){
			(ignoreLock===void 0)&& (ignoreLock=false);
			(ignoreHide===void 0)&& (ignoreHide=false);
			(dealInput===void 0)&& (dealInput=true);
			if(!comp)return;
			if(!FilterFuns.isEditorSelectableChain(comp,ignoreLock,ignoreHide))return;
			this._selectedComps.push(comp);
			this.addBorder(comp);
			this.callLater(this.changeSelectComp);
			this._xml.selecteID=(comp).comXml.compId;
		}

		/**撤销组件选择*/
		__proto.unSelectComp=function(comp){
			var index=this._selectedComps.indexOf(comp);
			if (index !=-1){
				this._selectedComps.splice(index,1);
				this.removeBorder(comp);
				this.callLater(this.changeSelectComp);
			}
		}

		/**选择所有*/
		__proto.selectAll=function(){
			this.clearSelect();
			var box=this._selectedBox;
			for (var i=0,n=box.numChildren;i < n;i++){
				var comp=box.getChildAt(i);
				if(!FilterFuns.isEditorSelectableChain(comp))continue ;
				if ((comp).comXml){
					this.selectComp(comp);
				}
			}
		}

		__proto.getIDedSelectedXmls=function(){
			return this.getSelectedXmls(true);
		}

		__proto.getSelectedXmls=function(withID){
			(withID===void 0)&& (withID=false);
			var arr=[];
			if (this._selectedComps.length > 0){
				var comp;
				for(var $each_comp in this._selectedComps){
					comp=this._selectedComps[$each_comp];
					var info=(comp).comXml;
					var clone=Utils$1.clone(info);
					if(!withID)
						this.deleteCompId(clone);
					var parentChilds=this._treeData.getNodeParent(info).child;
					arr.push({index:parentChilds.indexOf(info),xml:clone});
				}
				arr.sort(MathUtil.sortByKey("index"));
			}
			return arr;
		}

		__proto.deleteCompId=function(xml){
			delete xml.compId;
			var list=xml.child;
			if(!list)return;
			var child;
			for(var $each_child in list){
				child=list[$each_child];
				this.deleteCompId(child);
			}
		}

		__proto.onDelConfirm=function(sure){
			if(sure){
				this.delSelectedCompsWork();
			}
		}

		/**删除组件*/
		__proto.delSelectedComps=function(){
			if(this.isAnimationMode||this.isGraphicAnimation){
				Confirm.show(Sys.lang("是否确认删除（可能会导致其他动画丢失）"),Sys.lang("是否删除"),Utils$1.bind(this.onDelConfirm,this));
				return;
			}
			this.delSelectedCompsWork();
		}

		__proto.delSelectedCompsWork=function(){
			if(!this._selectedComps||this._selectedComps.length<1)return;
			var deletedIds;
			deletedIds=[];
			for (var i=0,n=this._selectedComps.length;i < n;i++){
				var comp=this._selectedComps[i];
				if (comp.parent){
					var compX;
					compX=(comp).comXml;
					var info=this._treeData.getNodeParent(compX).child;
					info.splice(info.indexOf(compX),1);
					comp.parent.removeChild(comp);
					deletedIds.push(compX.compId);
					if(this.animation&&this.animation.animations){
						AnimationDataWorker.removeNodeFromAnimationData(this.animation.animations,compX.compId);
					}
				}
			}
			Notice$1.notify("Node_deleted",[deletedIds]);
			this.clearSelect();
			this.changeXml(this._xml,true);
			this.updateTreePanels();
		}

		/**根据层选择组件*/
		__proto.selectByLayer=function(layer){
			this.clearSelect();
			var box=(this._selectedBox).comXml;
			var list=box.child;
			var child;
			for(var $each_child in list){
				child=list[$each_child];
				if (child.layer==layer){
					this.selectComp(this.getCompById(child.compId));
				}
			}
		}

		/**转换容器内部坐标为相对坐标*/
		__proto.parseAutoBox=function(box,dX,dy){
			(dX===void 0)&& (dX=0);
			(dy===void 0)&& (dy=0);
			var list=box.child;
			var length=list.length;
			if(!box.props.x){
				box.props.x=0;
			}
			if(!box.props.y){
				box.props.y=0;
			}
			if (length < 1 || box.props.width || box.props.height||box.props.pivotX||box.props.pivotY){
				return box;
			};
			var mx=this.parseInt(list[0].props.x)||0;
			var my=this.parseInt(list[0].props.y)||0;
			for (var i=1;i < length;i++){
				var child=list[i];
				mx=Math.min(mx,child.props.x||0);
				my=Math.min(my,child.props.y||0);
			}
			if(dX!=0&&dy!=0){
				mx=dX;
				my=dy;
			}
			if (mx !=0 || my !=0){
				box.props.x=this.parseInt(box.props.x)+mx;
				box.props.y=this.parseInt(box.props.y)+my;
				for (var j=0;j < length;j++){
					child=list[j];
					child.props.x=this.parseInt(child.props.x)-mx;
					child.props.y=this.parseInt(child.props.y)-my;
					if (child.props.x=="0"){
						delete child.props.x;
					}
					if (child.props.y=="0"){
						delete child.props.y;
					}
				}
			}
			return box;
		}

		/**根据图层清理选择*/
		__proto.clearSelectByLayer=function(layer){
			for (var i=this._selectedComps.length-1;i >-1;i--){
				var comp=this._selectedComps[i];
				if ((comp).comXml.layer==layer){
					this.removeBorder(comp);
					this._selectedComps.splice(i,1);
				}
			}
		}

		/**根据图层控制，隐藏关闭的图层上面的组件*/
		__proto.refreshCompsByLayer=function(){
			var info=(this._selectedBox).comXml;
			var layers=String(info.layers).split(";");
			var closeLayers=[];
			for (var i=0,n=layers.length;i < n;i++){
				var a=layers[i].split(",");
				if (a[1]==0){
					closeLayers.push(a[0]);
				}
			}
			for (var j=0,m=this._selectedBox.numChildren;j < m;j++){
				var comp=this._selectedBox.getChildAt(j);
				if (Laya.__typeof(comp,'laya.ui.IComponent')&& (comp).comXml !=null){
					comp.visible=closeLayers.indexOf(String((comp).comXml.layer))==-1;
				}
			}
		}

		__proto.getAddPrefabData=function(resPath){
			var obj;
			try{
				var prefabPath;
				prefabPath=resPath;
				obj=FileManager.readJSONFile(prefabPath);
				TreeDataTool.deleteAllKeyBut(obj,PreFabManager.reserveKeys);
				if(PreFabManager.PrefabHasWrap){
					if(obj.child&&obj.child[0]){
						obj=obj.child[0];
					}
				}
				}catch(e){
				obj=null;
			}
			if(!obj){
				Alert.show(Sys.lang("创建预设实例失败！")+prefabPath);
				return null;
			};
			var compId=this._autoId++;
			obj.compId=compId;
			return obj;
		}

		__proto.getAddCompData=function(resPath,type){
			var compId=this._autoId++;
			var str="";
			var obj;
			obj={};
			var prop=UIConfigManager.getCompSkinLabel(type);
			if(type=="Prefab"){
				return this.getAddPrefabData(resPath);
			}else
			if(type=="Script"){
				obj.type=type;
				obj.props={};
				obj.source=FileManager.getWorkRelativePath(resPath);
				}else{
				obj.type=type;
				obj.props={};
				if(resPath!=""){
					obj.props[prop]=FileManager.getResRelativePath(resPath);
				}
				UIConfigManager.inserDefaultValue(obj);
			}
			obj.compId=compId;
			return obj;
		}

		__proto.addCompWork=function(compData,x,y,parentId,abPos,index){
			(x===void 0)&& (x=-1);
			(y===void 0)&& (y=-1);
			(parentId===void 0)&& (parentId=-1);
			(abPos===void 0)&& (abPos=false);
			(index===void 0)&& (index=-1);
			if(!compData)return;
			this.stage.focus=this;
			var point=new Point();
			var box;
			if(parentId<0){
				parentId=this.xml.selectedBox;
				x=(x==-1 ? this.stage.mouseX :x);
				y=(y==-1 ? this.stage.mouseY :y);
				point.setTo(x,y);
				box=this.getCompById(parentId);
				if(!abPos){
					point=box.globalToLocal(point);
				}
				}else{
				box=this.getCompById(parentId);
				point.setTo(0,0);
			}
			if(!box)return;
			var boxXml=(box).comXml;
			if(boxXml==null){
				return;
			}
			boxXml=this.findXmlById(this._xml,(box).comXml.compId);
			if(point.x!=0){
				compData.props.x=Math.round(point.x);
			}
			if(point.y!=0){
				compData.props.y=Math.round(point.y);
			}
			if(!TypeManager.canNodeAddToType(compData.type,boxXml.type)){
				MessageManager.instance.show(Sys.lang("{0}不可创建{1}子对象",boxXml.type,compData.type));
				return;
			}
			if(index<0||index>=boxXml.child.length){
				boxXml.child.push(compData);
				}else{
				boxXml.child.splice(index,0,compData);
			}
			if(this.isGraphicAnimation&&this.isAnimationMode){
				var preProp;
				preProp=compData.props;
				compData.props={};
			}
			this._xml.selectedBox=parentId;
			this.changeXml(this._xml);
			var compId=compData.compId;
			if(this.getCompById(compId)){
				this.clearSelect();
				this.selectComp(this.getCompById(compId));
			}
			if(this.isGraphicAnimation&&this.isAnimationMode){
				compData.props=preProp;
			}
			this.addCompHandler(compData,boxXml.compId);
			Design.beginCtrlAdd();
		}

		// }
		__proto.addCompHandler=function(node,parentId){}
		__proto.getAddDataByDragEvent=function(e){
			if(this.isGraphicAnimation){
				if(e.data.type=="res"){
					if(e.data.asset=="")return null;
					if(!ResFileManager.isResFile(e.data.asset))return null;
					return this.getAddCompData(e.data.asset,TypeManager.GraphicPic);
					}else{
					return null;
				}
			};
			var addData;
			switch(e.data.type){
				case "res":
					addData=this.getAddCompData(e.data.asset,e.data.compType);
					break ;
				case "page":
					addData=this.getAddUIViewData(e.data.path);
					break ;
				}
			return addData;
		}

		__proto.getAddParticlePlayerData=function(particlePath){
			var compId=this._autoId++;
			var path=FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.pagesPath,particlePath));
			var nData;
			nData={
				type:"Particle2D",
				compId:compId,
				source:path,
				props:{
					url:path
				},
				child:[]
			};
			return nData;
		}

		__proto.getAddUIViewData=function(uiPath){
			if(FileManager.adptToCommonUrl(uiPath)==FileManager.adptToCommonUrl(IDEAPIS.getCurPagePath())){
				Alert.show(Sys.lang("不能循环嵌套！"));
				return null;
			};
			var nData;
			switch(TypeManager.getFileType(uiPath)){
				case "particle":
					nData=this.getAddParticlePlayerData(uiPath);
					break ;
				case "ui_template":
					break ;
				case "particle3D":
					break ;
				case "Script":
					nData=this.getAddCompData(uiPath,"Script");
					break ;
				case "graphic_animation":
					break ;
				case "Prefab":
					nData=this.getAddPrefabData(uiPath);
					break ;
				default :;
					var compId=this._autoId++;
					var path=FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.pagesPath,uiPath));
					nData={
						type:"UIView",
						compId:compId,
						source:path,
						props:{
						},
						child:[]
					};
				}
			return nData;
		}

		// }
		__proto.addTemplate=function(tempPath,x,y,parentId){
			(x===void 0)&& (x=-1);
			(y===void 0)&& (y=-1);
			(parentId===void 0)&& (parentId=-1);
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			}
			this.stage.focus=this;
			x=(x==-1 ? this.stage.mouseX :x);
			y=(y==-1 ? this.stage.mouseY :y);
			var box=this.getCompById(this.xml.selectedBox);
			var point=box.globalToLocal(new Point(x,y));
			var boxXml=(box).comXml;
			if (boxXml !=null){
				var compId=0;
				var path=FileManager.adptToCommonUrl(FileManager.getRelativePath(SystemSetting.pagesPath,tempPath));
				var filePath;
				filePath=TemplateManager.getUIFilePath(tempPath);
				var resPath;
				resPath=TemplateManager.getUIResPath(tempPath);
				FileTools.copyDir(resPath,FileManager.getResPath("template"+"/"+FileTools.getFileName(tempPath)));
				Notice$1.notify("FRESH_RES");
				var tempData;
				tempData=FileManager.readJSONFile(filePath);
				this.reIDNode(tempData);
				var addChilds;
				addChilds=tempData.child;
				if(!addChilds)addChilds=[];
				var tarChilds;
				if(!boxXml.child)boxXml.child=[];
				tarChilds=boxXml.child;
				var i=0,len=0;
				var tChild;
				len=addChilds.length;
				var tProp;
				var addCompIds;
				addCompIds=[];
				for(i=0;i<len;i++){
					tChild=addChilds[i];
					compId=tChild.compId;
					addCompIds.push(compId);
					tProp=tChild.props;
					tProp.x=tProp.x?tProp.x:0;
					tProp.y=tProp.y?tProp.y:0;
					tProp.x=Math.floor(parseFloat(tProp.x)+point.x);
					tProp.y=Math.floor(parseFloat(tProp.y)+point.y);
					tarChilds.push(tChild);
				}
				Laya.timer.once(1000,this,this.freshUI,[this._xml,addCompIds]);
			}
		}

		__proto.reIDNode=function(node){
			this._autoId++;
			node.compId=this._autoId;
			var childs;
			if(!node.child)node.child=[];
			childs=node.child;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				this.reIDNode(childs[i]);
			}
		}

		__proto.cleanIDUsed=function(){
			var key;
			for(key in this._idUsed){
				delete this._idUsed[key];
			}
		}

		__proto.ensureIDNode=function(node,root){
			(root===void 0)&& (root=false);
			if(root){
				this.cleanIDUsed();
			}
			this.idNode(node,false);
			var childs;
			if(!node.child)node.child=[];
			childs=node.child;
			var i=0,len=0;
			len=childs.length;
			for(i=0;i<len;i++){
				this.ensureIDNode(childs[i]);
			}
		}

		__proto.freshUI=function(newXML,selects){
			this.changeXml(newXML);
			this.clearSelect();
			var i=0,len=0;
			len=selects.length;
			for(i=0;i<len;i++){
				this.selectCompByID(selects[i]);
			}
		}

		/**层变化后切换*/
		__proto.refreshAtLayerChanged=function(){
			this.sortXmlByLayer((this._selectedBox).comXml);
			this.changeXml(this._xml);
		}

		/**根据层进行排序*/
		__proto.sortXmlByLayer=function(box){}
		/**将所选组件打包到容器内*/
		__proto.boxComp=function(type){
			if(this.isAnimationMode||this.isGraphicAnimation){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			}
			if (type && this._selectedComps.length > 0){
				var box;
				var compId=this._autoId++;
				box={
					type:type,
					compId:compId,
					child:[],
					props:{}
				};
				var comps=this.getIDedSelectedXmls();
				var parent=(this._selectedBox).comXml;
				var parentChilds=parent.child;
				if(!Design.boxC)
					Design.boxC=new Box();
				Design.boxC.removeChildren();
				for (var i=comps.length-1;i >-1;i--){
					var info=comps[i];
					parentChilds.splice(info.index,1);
					Design.boxC.addChild(this.getCompById(info.xml.compId));
					this._treeData.addChild(info.xml,box);
				}
				box.child=box.child.reverse();
				var rec;
				rec=Design.boxC.getSelfBounds();
				box=this.parseAutoBox(box,rec.x,rec.y);
				this._treeData.addChild(box,parent);
				this.clearSelect();
				this.changeXml(this._xml);
			}
		}

		__proto.idNode=function(node,force){
			(force===void 0)&& (force=false);
			if(!force&&node.compId&&(!this._idUsed[node.compId])){
				}else{
				var compId=this._autoId++;
				while(this._idUsed[compId])compId++;
				this._autoId=compId+1;
				node.compId=compId;
			}
			this._idUsed[node.compId]=true;
		}

		__proto.dealAction=function(funName,param){
			if ((typeof (this[funName])=='function')){
				this[funName].apply(this,param);
			}
		}

		__proto.refreshComp=function(comp,key,value,hasDelete){
			(hasDelete===void 0)&& (hasDelete=false);
			if(!comp){
				console.log("refreshComp but comp==null");
				return;
			};
			var data=(comp).comXml;
			if(data.compId==this._xml.compId){
				if(key=="width"){
					this.sceneWidth=value;
				}
				if(key=="height"){
					this.sceneHeight=value;
				}
			}
			if(this._treeData.isNodeSame(data,this._treeData.root)){
				this.xml=this._xml;
				return;
			}
			if(comp==this._selectedBox||(Design.simpleValueDic[key]&&value!=""&&!hasDelete)){
				ObjectTools.setObjValue(comp,key,value);
				return;
			};
			var newComp;
			newComp=this.createComp(data);
			if(comp.parent){
				var preIndex=0;
				var preParent;
				preParent=comp.parent;
				preIndex=preParent.getChildIndex(comp);
				preParent.addChildAt(newComp,preIndex);
				comp.removeSelf();
			}
		}

		/**
		*获取节点的配置信息
		*@param comp
		*@return
		*
		*/
		__proto.getConfigData=function(comp){
			if(!comp)return null;
			var data=(comp).comXml;
			if(!data)return null;
			var i=0,len=0;
			var childList;
			if(!data.child)data.child=[];
			var dataChildList;
			dataChildList=data.child;
			dataChildList.length=0;
			childList=DisControlTool.getAllChild(comp);
			len=childList.length;
			var tChildData;
			for(i=0;i<len;i++){
				tChildData=this.getConfigData(childList[i]);
				if(tChildData){
					if(!tChildData.type){
						debugger;
					}
					dataChildList.push(tChildData);
				}
			}
			return data;
		}

		/**把组件从容器内打散*/
		__proto.unBoxComp=function(){
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var target=this.selectedComp;
			if (target !=null && Laya.__typeof(target,'laya.ui.IBox')){
				var box=(target).comXml;
				var parent=this._treeData.getNodeParent(box).child;
				var parentIndex=0;
				parentIndex=parent.indexOf(box);
				var preChilds;
				preChilds=parent.slice(0,parentIndex);
				var afterChilds;
				afterChilds=parent.slice(parentIndex+1);
				var ox=box.props.x || 0;
				var oy=box.props.y || 0;
				var list=box.child;
				var newChilds=[];
				for (var j=0,n=list.length;j < n;j++){
					var child=list[j];
					preChilds.push(child);
					child.props.x=this.parseInt(child.props.x || "0")+ox;
					child.props.y=this.parseInt(child.props.y ||"0")+oy;
				}
				preChilds=preChilds.concat(afterChilds);
				this._treeData.getNodeParent(box).child=preChilds;
				this.clearSelect();
				this.changeXml(this._xml);
			}
		}

		__proto.toInt=function(v){
			return Math.floor(v);
		}

		/**对齐选中的组件*/
		__proto.alignComp=function(type){
			if (Boolean(type)&& this._selectedComps.length > 1){
				var goal=0;
				var target=this._selectedComps[0];
				if (type=="left"){
					goal=target.x;
					}else if (type=="right"){
					goal=target.x+target.width*target.scaleX;
					}else if (type=="top"){
					goal=target.y;
					}else if (type=="bottom"){
					goal=target.y+target.height*target.scaleY;
					}else if (type=="middle"){
					goal=target.y+target.height *0.5*target.scaleY;
					}else if (type=="center"){
					goal=target.x+target.width *0.5*target.scaleX;
				}
				for (var i=1,n=this._selectedComps.length;i < n;i++){
					target=this._selectedComps[i];
					if (type=="left"){
						goal=Math.min(target.x,goal);
						}else if (type=="right"){
						goal=Math.max(target.x+target.width*target.scaleX,goal);
						}else if (type=="top"){
						goal=Math.min(target.y,goal);
						}else if (type=="bottom"){
						goal=Math.max(target.y+target.height*target.scaleY,goal);
						}else if (type=="middle"){
						goal=Math.max(target.y+target.height*target.scaleY *0.5,goal);
						}else if (type=="center"){
						goal=Math.max(target.x+target.width*target.scaleX *0.5,goal);
					}
				}
				for (var j=0,m=this._selectedComps.length;j < m;j++){
					target=this._selectedComps[j];
					var info=(target).comXml;
					var props;
					props=info.props;
					if (type=="left"){
						target.x=props.x=goal;
						}else if (type=="right"){
						target.x=props.x=goal-target.width*target.scaleX;
						}else if (type=="top"){
						target.y=props.y=goal;
						}else if (type=="bottom"){
						target.y=props.y=goal-target.height*target.scaleY;
						}else if (type=="middle"){
						target.y=props.y=goal-target.height*target.scaleY *0.5;
						}else if (type=="center"){
						target.x=props.x=goal-target.width*target.scaleX *0.5;
						}else if(type=="toCenter"){
						target.x=props.x=-target.width*0.5*target.scaleX;
						target.y=props.y=-target.height*0.5*target.scaleY;
					}
					this.adptPosToInt(target,props);
					this._dragBoxLayer.refreshDrag(target);
					this.nodeChanged(info,["x","y"]);
				}
				this.changeXml(this._xml,false);
			}
		}

		__proto.adptPosToInt=function(target,props){
			if(!target||!props)return;
			target.x=props.x=this.toInt(target.x);
			target.y=props.y=this.toInt(target.y);
		}

		/**调整组件对其*/
		__proto.placeComp=function(type){
			var target=this.selectedComp;
			if(!target||!target.parent)return;
			var width=(target.parent).width;
			var height=(target.parent).height;
			if(this.isGraphicAnimation){
				width=this.getPropWidth();
				height=this.getPropHeight();
			}
			if (target !=null){
				var info=(target).comXml;
				if (type=="top_left"){
					target.x=info.props.x=target.pivotX;
					target.y=info.props.y=target.pivotY
					}else if (type=="top_right" && target.parent){
					target.x=info.props.x=width-target.width*target.scaleX+target.pivotX;
					target.y=info.props.y=target.pivotY;
					}else if (type=="bottom_left" && target.parent){
					target.x=info.props.x=target.pivotX;
					target.y=info.props.y=height-target.height*target.scaleY+target.pivotY;
					}else if (type=="bottom_right" && target.parent){
					target.x=info.props.x=width-target.width*target.scaleX+target.pivotX;
					target.y=info.props.y=height-target.height*target.scaleY+target.pivotY;
					}else if (type=="center" && target.parent){
					target.x=info.props.x=(width-target.width*target.scaleX)*0.5+target.pivotX;
					}else if (type=="middle" && target.parent){
					target.y=info.props.y=(height-target.height*target.scaleY)*0.5+target.pivotY;
					}else if(type=="toCenter"){
					target.x=info.props.x=-target.width*0.5*target.scaleX;
					target.y=info.props.y=-target.height*0.5*target.scaleY;
				}
				this.adptPosToInt(target,info.props);
				this._dragBoxLayer.refreshDrag(target);
				this.changeSelectComp();
				this.nodeChanged(info,["x","y"]);
				this.changeXml(this._xml,false);
			}
		}

		/**平均分配组件*/
		__proto.spaceComp=function(type){
			if (this._selectedComps.length > 2){
				var total=0;
				var count=0;
				var num=this._selectedComps.length;
				this._selectedComps.sort(MathUtil.sortByKey(type=="h" ? "x" :"y"));
				var first=this._selectedComps[0];
				var last=this._selectedComps[num-1];
				total=type=="h" ? last.x+last.width-first.x :last.y+last.height-this._selectedComps[0].y;
				for (var i=0;i < num;i++){
					var comp=this._selectedComps[i];
					count+=type=="h" ? comp.width :comp.height;
				};
				var space=(total-count)/ (num-1);
				var start=type=="h" ? first.x :first.y;
				for (var j=0;j < num;j++){
					comp=this._selectedComps[j];
					var info=(comp).comXml;
					if (type=="h"){
						comp.x=info.props.x=Math.round(start);
						start+=comp.width+space;
						}else {
						comp.y=info.props.y=Math.round(start);
						start+=comp.height+space;
					}
					this._dragBoxLayer.refreshDrag(comp);
					this.nodeChanged(info,["x","y"]);
				}
				this.changeXml(this._xml,false);
			}
		}

		/**重复组件*/
		__proto.repeatComp=function(row,column,paddingX,paddingY){
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var target=this.selectedComp;
			if (target !=null){
				var currXml=(target).comXml;
				var parent=target.parent;
				for (var i=0;i < row;i++){
					for (var j=0;j < column;j++){
						if (i==0 && j==0){
							currXml.props.name="item0";
							}else {
							var clone=Utils$1.clone(currXml);
							clone.props.x=this.parseInt(clone.props.x)+j *(paddingX+target.width);
							clone.props.y=this.parseInt(clone.props.y)+i *(paddingY+target.height);
							clone.props.name="item"+(j+i *column);
							delete clone.compId;
							parent.comXml.child.push(clone);
						}
					}
				}
				this.changeXml(this._xml);
			}
		}

		/**粘贴组件*/
		__proto.pasteComp=function(copyTemp,samePoint){
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var ids=[];
			var parent=(this._selectedBox).comXml;
			var obj;
			for(var $each_obj in copyTemp){
				obj=copyTemp[$each_obj];
				var temp=obj.xml;
				temp.props.x=this.parseInt(temp.props.x)+(samePoint ? 0 :10);
				temp.props.y=this.parseInt(temp.props.y)+(samePoint ? 0 :10);
				var newXml=Utils$1.clone(temp);
				ids.push(this._autoId);
				newXml.compId=this._autoId++;
				parent.child.push(newXml);
			}
			this.changeXml(this._xml);
			this.clearSelect();
			var compId;
			for(var $each_compId in ids){
				compId=ids[$each_compId];
				this.selectComp(this.getCompById(compId));
			}
		}

		__proto.pasetCompUnderMouse=function(){
			var copyTemp;
			copyTemp=UIPanel.instance.getCopyTemp();
			if(!copyTemp||copyTemp.length<1)return;
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var ids=[];
			var parent=(this._selectedBox).comXml;
			var dx=NaN;
			var dy=NaN;
			dx=0;
			dy=0;
			var i=0,len=0;
			len=copyTemp.length;
			var temp;
			temp=copyTemp[0].xml;
			dx=this.parseInt(temp.props.x);
			dy=this.parseInt(temp.props.y);
			var tx=NaN;
			var ty=NaN;
			for(i=1;i<len;i++){
				temp=copyTemp[i].xml;
				tx=this.parseInt(temp.props.x);
				ty=this.parseInt(temp.props.y);
				if(dx>tx)dx=tx;
				if(dy>ty)dy=ty;
			}
			dx=this.selectedBox.mouseX-dx;
			dy=this.selectedBox.mouseY-dy;
			var obj;
			for(var $each_obj in copyTemp){
				obj=copyTemp[$each_obj];
				temp=obj.xml;
				temp.props.x=this.parseInt(temp.props.x)+dx;
				temp.props.y=this.parseInt(temp.props.y)+dy;
				var newXml=Utils$1.clone(temp);
				ids.push(this._autoId);
				newXml.compId=this._autoId++;
				parent.child.push(newXml);
			}
			this.changeXml(this._xml);
			this.clearSelect();
			var compId;
			for(var $each_compId in ids){
				compId=ids[$each_compId];
				this.selectComp(this.getCompById(compId));
			}
		}

		__proto.nodeChanged=function(node,props){}
		/**更改同层先后顺序*/
		__proto.sortComp1=function(up){
			(up===void 0)&& (up=true);
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var arr=this._selectedComps.sort(this.sortOnIndex);
			if (up){
				arr.reverse();
			};
			var flag=false;
			for (var i=0,n=arr.length;i < n;i++){
				var target=arr[i];
				var info=(target).comXml;
				var parent=(target.parent).comXml;
				var index=info.childIndex();
				delete parent.children()[index];
				var insertIndex=up ? index :index-1;
				var count=parent.children().length();
				insertIndex=insertIndex < 0 ? 0 :(insertIndex > count-1 ? count-1 :insertIndex);
				if (up){
					parent.insertChildAfter(parent.children()[insertIndex],info);
					}else {
					parent.insertChildBefore(parent.children()[insertIndex],info);
				}
				flag=true;
				this.nodeChanged(info);
			}
			if (flag){
				this.sortXmlByLayer((target.parent).comXml);
				this.changeXml(this._xml);
			}
		}

		/**更改同层先后顺序*/
		__proto.sortComp=function(up){
			(up===void 0)&& (up=true);
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var arr=this._selectedComps.sort(this.sortOnIndex);
			if (up){
				arr.reverse();
			};
			var flag=false;
			for (var i=0,n=arr.length;i < n;i++){
				var target=arr[i];
				var info=(target).comXml;
				var parent=this._treeData.getNodeParent(info);
				var index=this._treeData.getChildIndex(info,parent);
				this._treeData.removeSelf(info);
				var insertIndex=up ? index+1 :index-1;
				var count=TreeData.getNodeChilds(parent).length;
				insertIndex=insertIndex < 0 ? 0 :(insertIndex > count ? count :insertIndex);
				this._treeData.addChildAt(info,insertIndex,parent);
				flag=true;
				this.nodeChanged(info);
			}
			if (flag){
				this.changeXml(this._xml);
			}
		}

		__proto.sortOnIndex=function(a,b){
			var parent=a.parent;
			var aindex=parent.getChildIndex(a);
			var bindex=parent.getChildIndex(b);
			if (aindex > bindex){
				return 1;
				}else if (aindex < bindex){
				return-1;
				}else {
				return 0;
			}
		}

		/**改变层*/
		__proto.moveLayer=function(isUp){}
		/**
		*将页面大小自适应到实际对象大小
		*
		*/
		__proto.fitSizeToUI=function(){
			if(!UIPanel.instance.currViewer)return;
			if(UIPanel.instance.currViewer.design!=this)return;
			if(this.isAnimationMode){
				Alert.show(Sys.lang("动画编辑模式中，该功能不可用。"));
				return;
			};
			var view=new UIView();
			view.createViewCC(this.xml);
			Laya.timer.once(100,this,this.fitSizeToUILater,[view]);
		}

		__proto.fitSizeToUILater=function(view){
			var rec=view.getBounds();
			var width=Math.ceil(rec.x+rec.width);
			var height=Math.ceil(rec.y+rec.height);
			delete this.xml.props.width;
			delete this.xml.props.sceneWidth;
			this.xml.props.sceneWidth=width;
			this.xml.props.width=width;
			delete this.xml.props.height;
			delete this.xml.props.sceneHeight;
			this.xml.props.sceneHeight=height;
			this.xml.props.height=height;
			this.change()
		}

		__proto.designOnEnterDown=function(){
			if(this.isAnimationMode){
				Notice$1.notify("PLAYCONTROL_SwitchPlay",["PLAYCONTROL_Play"]);
				return;
			}
			if(this._selectedComps&&this._selectedComps.length>1){
				return;
			};
			var selected;
			selected=this.selectedCompXml?this.selectedCompXml:this._xml;
			if(!selected)return;
			var comp;
			comp=this.getCompByNodeData(selected);
			if((comp instanceof laya.display.AnimationPlayerBase )){
				if(comp.isPlaying){
					comp.stop();
					}else{
					comp.play(0,true);
				}
			}
		}

		/**处理快捷键*/
		__proto.onKeyDown=function(e){
			if(!UIPanel.instance.currViewer)return;
			if(UIPanel.instance.currViewer.design!=this)return;
			if(e.keyCode==13){
				this.designOnEnterDown();
				return;
			};
			var isCtrlKey=false;
			isCtrlKey=KeyManager.I.isCommandKeyDown||e.ctrlKey;
			if (isCtrlKey && e.altKey && e.keyCode==86){
				}else if (isCtrlKey && e.keyCode==38){
				this.sortComp(true);
				}else if (isCtrlKey && e.keyCode==40){
				this.sortComp(false);
				}else if (isCtrlKey && e.keyCode==76){
				}else if (isCtrlKey && e.keyCode==75){
				this.showSelecteRes();
				}else if (isCtrlKey && e.keyCode==37){
				this.moveLayer(false);
				}else if (isCtrlKey && e.keyCode==39){
				this.moveLayer(true);
				}else if (e.keyCode==38 && e.shiftKey){
				this.moveSelectedComps(0,-10);
				}else if (e.keyCode==40 && e.shiftKey){
				this.moveSelectedComps(0,10);
				}else if (e.keyCode==37 && e.shiftKey){
				this.moveSelectedComps(-10,0);
				}else if (e.keyCode==39 && e.shiftKey){
				this.moveSelectedComps(10,0);
				}else if (e.keyCode==38){
				this.moveSelectedComps(0,-1);
				}else if (e.keyCode==40){
				this.moveSelectedComps(0,1);
				}else if (e.keyCode==37){
				this.moveSelectedComps(-1,0);
				}else if (e.keyCode==39){
				this.moveSelectedComps(1,0);
				}else if (e.keyCode==13){
				var target=this.selectedComp;
				if (target !=null){
					if (Laya.__typeof(target,'laya.editor.core.IClip')){
						(target).autoPlay=!(target).autoPlay;
					}
				}
				}else if(e.shiftKey &&isCtrlKey && e.keyCode==82){
			}
		}

		__proto.showSelecteRes=function(){
			var selecteO=this.selectedCompXml;
			if(selecteO){
				if(selecteO.props&&selecteO.props.skin){
					Notice$1.notify("SelecteResFile",[selecteO.props.skin]);
				}
			}
		}

		/**场景背景颜色*/
		__getset(0,__proto,'sceneColor',function(){
			return this._sceneColor;
			},function(value){
			if (this._sceneColor !=value){
				this._sceneColor=value;
				this.callLater(this.changeSceneSize);
			}
		});

		__getset(0,__proto,'isAnimationMode',function(){
			return this._isAnimationMode;
			},function(v){
			if(!v==this._isAnimationMode){
				if(v){
					this.goBackToStage();
					this.uiXmlRestored=ObjectTools.copyObj(this._xml);
					this.cacheXML(this._xml);
					this._isAnimationMode=v;
					DisplayTreePanel.instance.refresh();
					this.animation.isFirstSetUp=true;
					if(this.isGraphicAnimation){
						if(this.getLastCache()){
							this.uiXmlRestored=this.getLastCache();
						}
					}
					}else{
					this._isAnimationMode=v;
					PropPanel.instance.initByObj(null,null,-1);
					if(this.animation){
						this.animation.targetAnimation.displayToInitState();
					};
					var preChange=this.hasChange;
					this.uiXmlRestored=null;
					this.goBack();
					this.hasChange=preChange;
				}
			}
			Notice$1.notify("AnimationMode_Change");
		});

		__getset(0,__proto,'isGraphicAnimation',function(){
			return this.pageType=="graphic_animation";
		});

		__getset(0,__proto,'measureWidth',function(){
			var max=0;
			for (var i=this.numChildren-1;i >-1;i--){
				var comp=this.getChildAt(i);
				if (comp !=this._maskLayer){
					max=Math.max(comp.x+comp.width *comp.scaleX,max);
				}
			}
			return max;
		});

		/**获得当前选中的单一组件XML*/
		__getset(0,__proto,'selectedCompXml',function(){
			var selectComp=this.selectedComp;
			return selectComp !=null ? (selectComp).comXml :null;
		});

		__getset(0,__proto,'measureHeight',function(){
			var max=0;
			for (var i=this.numChildren-1;i >-1;i--){
				var comp=this.getChildAt(i);
				if (comp !=this._maskLayer){
					max=Math.max(comp.y+comp.height *comp.scaleY,max);
				}
			}
			return max;
		});

		/**场景高度*/
		__getset(0,__proto,'sceneHeight',function(){
			return this._sceneHeight;
			},function(value){
			if (this._sceneHeight !=value){
				this._sceneHeight=value;
				if((this._viewLayer instanceof laya.ui.View ))
					this._viewLayer.height=this._sceneHeight;
				this.callLater(this.changeSceneSize);
			}
		});

		__getset(0,__proto,'mouseX',function(){
			return DisControlTool.getMousePoint(this).x;
		});

		/**是否有变化*/
		__getset(0,__proto,'hasChange',function(){
			return this._hasChange;
			},function(value){
			if (this._hasChange !=value){
				this._hasChange=value;
				this.event("change");
			}
		});

		__getset(0,__proto,'mouseY',function(){
			return DisControlTool.getMousePoint(this).y;
		});

		/**场景宽度*/
		__getset(0,__proto,'sceneWidth',function(){
			return this._sceneWidth;
			},function(value){
			if (this._sceneWidth !=value){
				this._sceneWidth=value;
				if((this._viewLayer instanceof laya.ui.View ))
					this._viewLayer.width=this._sceneWidth;
				this.callLater(this.changeSceneSize);
			}
		});

		/**参考视图*/
		__getset(0,__proto,'sceneBg',function(){
			return this._sceneBg;
			},function(value){
			if (this._sceneBg !=value){
				this._sceneBg=value;
				this.refreshBg();
			}
		});

		/**视图代码*/
		__getset(0,__proto,'xml',function(){
			return this._xml;
			},function(value){
			this._xml=value;
			if(!this._xml)return;
			this.ensureIDNode(this._xml,true);
			this._treeData=TreeData.createByUIObj(this._xml);
			this.createView(this._xml);
			this.animation.treeData=this._treeData;
			this.callLater(this.freshDatasLater);
		});

		/**当前选择的容器*/
		__getset(0,__proto,'selectedBox',function(){
			return this._selectedBox;
			},function(value){
			if(!value)debugger;
			if(value.alpha<1)value.alpha=1;
			Design.adptIRender(value);
			if(!value.parent){
				if(!value["comXml"]||!value["comXml"].nodeParent)return;
				var vParent;
				vParent=this.getCompById(value["comXml"].nodeParent);
				if(!vParent)return;
				vParent.addChild(value);
			}
			if (!this.isItemSame(this._selectedBox,value)&&this._selectedBox !=value && FilterFuns.isEditorEnterAble(value)&& !((value instanceof laya.editor.core.UIView ))){
				if (this._selectedBox !=null && this._selectedBox !=this._viewLayer && (value.parent==this._selectedBox || (Laya.__typeof(this._selectedBox,'laya.editor.core.IContent')&& value.parent==(this._selectedBox).content))){
					var boxParent=this.getCompById((this._selectedBox).comXml.nodeParent);
					if(boxParent)
						boxParent.addChild(this._selectedBox);
				}
				value.mask=null;
				this._selectedBox=value;
				var point;
				var newPoint;
				if(this._selectedBox.parent){
					point=(this._selectedBox.parent).localToGlobal(new Point());
					newPoint=(this._maskAboveLayer.parent).globalToLocal(point);
				}
				this._maskAboveLayer.removeChildren();
				this.clearSelect();
				if (this._selectedBox !=this._viewLayer){
					this._maskLayer.visible=true;
					this._maskAboveLayer.visible=true;
					this._maskAboveLayer.x=newPoint.x;
					this._maskAboveLayer.y=newPoint.y;
					this._maskAboveLayer.width=(this._selectedBox.parent).width;
					this._maskAboveLayer.height=(this._selectedBox.parent).height;
					(this._selectedBox).comXml.nodeParent=this._treeData.getNodeParent((this._selectedBox).comXml).compId;
					this._maskAboveLayer.addChild(this._selectedBox);
					if (Laya.__typeof(this._selectedBox,'laya.ui.IRender')){
						this.createByBox((this._selectedBox),(this._selectedBox).comXml);
					}
					}else if (this._maskLayer.visible){
					this._maskLayer.visible=false;
					this._maskAboveLayer.visible=false;
				}
			}
			if(this._selectedBox){
				this._xml.selectedBox=this._selectedBox["comXml"].compId;
			}
			this.callLater(this.changeSelectedBox);
		});

		__getset(0,__proto,'canAddComp',function(){
			return this.isGraphicAnimation||!this.isAnimationMode;
		});

		/**获得当前选中的单一组件*/
		__getset(0,__proto,'selectedComp',function(){
			return this._selectedComps.length==1 ? this._selectedComps[0] :null;
		});

		/**获取当前点击被选中的组件*/
		__getset(0,__proto,'getCompSelectedAtCurrBox',function(){
			var compRect=new Rectangle();
			var mousePos;
			mousePos=this._selectedBox.getMousePoint();
			Design.smousePos.setTo(mousePos.x,mousePos.y);
			mousePos=Design.smousePos;
			for (var i=this._selectedBox.numChildren-1;i>=0;i--){
				var display=this._selectedBox.getChildAt(i);
				if ((display).comXml){
					compRect.setTo(display.x,display.y,display.width,display.height);
					compRect.copyFrom(display.getBounds());
					if (compRect.contains(mousePos.x,mousePos.y)){
						if(FilterFuns.isEditorSelectableChain(display)){
							return display;
						}
					}
				}
			}
			return null;
		});

		/**选择的所有组件*/
		__getset(0,__proto,'selectedComps',function(){
			return this._selectedComps;
		});

		/**获得被选中的内容*/
		__getset(0,__proto,'selectedXmls',function(){
			return this.getSelectedXmls(false);
		});

		Design.parseVarByObj=function(obj,varsO){
			if(obj.props["var"]){
				var tVar;
				tVar=obj.props["var"];
				if(varsO[tVar]){
					Alert.show(Sys.lang("存在重复的值为{0}的var属性",tVar));
					return false;
				}
				varsO[tVar]=true;
			};
			var list=obj.child;
			if(list)
				for (var j=0,n=list.length;j < n;j++){
				if(!Design.parseVarByObj(list[j],varsO)){
					return false;
				}
			}
			return true;
		}

		Design.removeRenders=function(sprite){
			if(!sprite)return;
			if(sprite.getChildByName("render")){
				(sprite.getChildByName("render")).alpha=0.1;
			}
		}

		Design.adptIRender=function(value){
			if(!value)return;
			Design.clearIRender(value);
			if(value.mask){
				value.addChild(value.mask);
			}
			if(value&&value.name=="render"&&value.parent){
				Design.clearIRender(value.parent);
			}
		}

		Design.clearIRender=function(value){
			if (value !=null && Laya.__typeof(value,'laya.ui.IRender')){
				if (value.getChildByName("render")){
					for (var i=value.numChildren-1;i >-1;i--){
						var child=value.getChildAt(i);
						if (child.name.indexOf("item")!=-1){
							value.removeChild(child);
						}
					}
				}
				(value).itemRender=null;
			}
		}

		Design.beginCtrlAdd=function(){
			if(KeyManager.I.isCommandKeyDown){
				Design.isCtrlAdding=true;
				ShortcutManager.exeKey(67,true,false);
				Laya.stage.off("keyup",null,Design.onStageKeyUp);
				Laya.stage.on("keyup",null,Design.onStageKeyUp);
				if(!Design.clip){
					Design.clip=new Clip(SkinDefines.ResDragIcon,1,3);
					Design.clip.scale(0.5,0.5);
					Design.clip.index=2;
				}
				Laya._currentStage.addChild(Design.clip);
				Laya.stage.off("mousemove",null,this.onStageMouseMove);
				Laya.stage.on("mousemove",null,this.onStageMouseMove);
			}
		}

		Design.onStageMouseMove=function(){
			Design.clip.pos(Laya._currentStage.mouseX,Laya._currentStage.mouseY);
		}

		Design.onStageKeyUp=function(){
			Design.clip.removeSelf();
			Laya.stage.off("keyup",null,Design.onStageKeyUp);
			Laya.stage.off("mousemove",null,this.onStageMouseMove);
			Design.isCtrlAdding=false;
		}

		Design.MAX_HISTORY=500;
		Design.designID=1;
		Design._isClickOK=false;
		Design.isCtrlAdding=false;
		Design.clip=null
		Design.boxC=null
		__static(Design,
		['KeepKeys',function(){return this.KeepKeys={
				"x":true,
				"y":true,
				"alpha":true,
				"left":true,
				"right":true,
				"top":true,
				"bottom":true,
				"centerX":true,
				"centerY":true
				};},'_tempTransPoint',function(){return this._tempTransPoint=new Point();},'ConflictKeys',function(){return this.ConflictKeys={
				"anchorX":"pivotX",
				"anchorY":"pivotY",
				"pivotX":"anchorX",
				"pivotY":"anchorY",
				"left":"x",
				"top":"y",
				"x":"left",
				"y":"top"
			};},'conditionChangeDic',function(){return this.conditionChangeDic=
			[{
				keys:["left","width","right"],
				trans:{
					"left":"width",
					"width":"right",
					"right":"width"
				}
				},{
				keys:["top","height","bottom"],
				trans:{
					"top":"height",
					"height":"bottom",
					"bottom":"height"
				}
			}];},'conflictGroups',function(){return this.conflictGroups=
			[{
				"x":1,
				"centerX":2,
				"left":3,
				"right":3
				},{
				"y":1,
				"centerY":2,
				"top":3,
				"bottom":3
				},{
				"anchorX":1,
				"pivotX":2
				},{
				"anchorY":1,
				"pivotY":2
				}];},'_recPoints',function(){return this._recPoints=[new Point(),new Point()];},'_selectePropItem',function(){return this._selectePropItem={type:"MixItems",props:{}};},'_designCompsBouns',function(){return this._designCompsBouns=new Rectangle();},'smousePos',function(){return this.smousePos=new Point();},'simpleValueDic',function(){return this.simpleValueDic={
				"x":true,
				"y":true,
				"width":true,
				"height":true,
				"skin":true,
				"left":true,
				"right":true,
				"top":true,
				"disabled":true,
				"visible":true,
				"bottom":true
		};}

		]);
		return Design;
	})(UIView)


	/**快捷工具栏
	*@author yung
	*/
	//class laya.editor.view.QuickTool extends laya.editor.ui.QuickToolUI
	var QuickTool=(function(_super){
		function QuickTool(){
			this.commonBtns=
			[
			"addFolder",
			"addPage",
			"|",
			"save",
			"saveAll",
			"|",
			"back",
			"reBack",
			"|",
			"refresh",
			"publish"];
			this.zoomBtns=
			[
			"zoomIn",
			"zoomOut",
			"zoomBack"];
			this.alignBtns=
			[
			"alignLeft",
			"alignCenter",
			"alignRight",
			"alignTop",
			"alignMiddle",
			"alignbottom",
			"|",
			"spaceH",
			"spaceV",
			"|",
			"topLeft",
			"topRight",
			"bottomLeft",
			"bottomRight",
			"center",
			"middle",
			"tomiddle"];
			this.allBtns=null;
			this.tBtns=null;
			this.btnDic=null;
			this.typeBtnsDic={};
			this._BtnList=null;
			QuickTool.__super.call(this);
			this._visibleRec=new Rectangle();
			this.on("click",this,this.onClick);
			var _btnNames=
			[
			"addFolder",
			"addPage",
			"save",
			"saveAll",
			"back",
			"reBack",
			"zoomIn",
			"zoomOut",
			"zoomBack",
			"refresh",
			"publish",
			"alignLeft",
			"alignCenter",
			"alignRight",
			"alignTop",
			"alignMiddle",
			"alignbottom",
			"spaceH",
			"spaceV",
			"topLeft",
			"topRight",
			"bottomLeft",
			"bottomRight",
			"center",
			"middle",
			"tomiddle"];
			this._BtnList=[];
			var i=0,len=0;
			len=_btnNames.length;
			this.btnDic={};
			var tBtn;
			for(i=0;i<len;i++){
				tBtn=this.getChildByName(_btnNames[i]);
				tBtn.width=22;
				tBtn.height=20;
				this._BtnList.push(tBtn);
				this.btnDic[_btnNames[i]]=tBtn;
			}
			DisControlTool.removeItems(this._BtnList);
			this.allBtns=ObjectTools.setValueArr([],this._BtnList);
			this.typeBtnsDic["Common"]=this.commonBtns;
			this.typeBtnsDic["Zoom"]=this.zoomBtns;
			this.typeBtnsDic["Align"]=this.alignBtns;
			this.namesToBtns(this.commonBtns);
			this.namesToBtns(this.zoomBtns);
			this.namesToBtns(this.alignBtns);
			this.setShowBtns(["Common"]);
			this.cacheAsBitmap=IDEConsts.cachePanels;
		}

		__class(QuickTool,'laya.editor.view.QuickTool',_super);
		var __proto=QuickTool.prototype;
		// cacheAsBitmap=false;
		__proto.namesToBtns=function(names){
			var i=0,len=0;
			len=names.length;
			for(i=0;i<len;i++){
				if(names[i]=="|"){
					names[i]=new Image("view/line.png");
					}else{
					names[i]=this.btnDic[names[i]];
				}
			}
			return names[i];
		}

		__proto.setShowBtns=function(types){
			DisControlTool.removeItems(this.allBtns);
			if(this._BtnList)
				DisControlTool.removeItems(this._BtnList);
			var i=0,len=0;
			var tType;
			var tTypeBtns;
			len=types.length;
			ObjectTools.clearArr(this._BtnList);
			for(i=0;i<len;i++){
				if(this._BtnList.length>0){
					this._BtnList.push(new Image("view/line.png"));
				}
				ObjectTools.concatArr(this._BtnList,this.typeBtnsDic[types[i]]);
			}
			DisControlTool.addItems(this._BtnList,this);
			this.changeSize();
			return this._BtnList;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			var nWidth=NaN;
			nWidth=this.width;
			LayoutTools.layoutToWidth(this._BtnList,nWidth,5,5,20,9);
			this._visibleRec.setTo(0,0,this.width,this.height);
			this.scrollRect=this._visibleRec;
		}

		//public var title:String="工具";
		__proto.onClick=function(e){
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "addFolder":
						ShortcutManager.exeKey(68,true);
						break ;
					case "addPage":
						ShortcutManager.exeKey(78,true);
						break ;
					case "save":
						ShortcutManager.exeKey(83,true);
						break ;
					case "saveAll":
						ShortcutManager.exeKey(83,true,true);
						break ;
					case "back":
						ShortcutManager.exeKey(90,true);
						break ;
					case "reBack":
						ShortcutManager.exeKey(89,true);
						break ;
					case "zoomIn":
						ShortcutManager.exeKey(189,true);
						break ;
					case "zoomOut":
						ShortcutManager.exeKey(187,true);
						break ;
					case "zoomBack":
						ShortcutManager.exeKey(220,true);
						break ;
					case "refresh":
						ShortcutManager.exeKey(116);
						break ;
					case "publish":
						ShortcutManager.exeKey(123);
						break ;
					case "alignLeft":
						UIPanel.instance.alignComp("left");
						break ;
					case "alignCenter":
						UIPanel.instance.alignComp("center");
						break ;
					case "alignRight":
						UIPanel.instance.alignComp("right");
						break ;
					case "alignTop":
						UIPanel.instance.alignComp("top");
						break ;
					case "alignMiddle":
						UIPanel.instance.alignComp("middle");
						break ;
					case "alignbottom":
						UIPanel.instance.alignComp("bottom");
						break ;
					case "spaceH":
						UIPanel.instance.spaceComp("h");
						break ;
					case "spaceV":
						UIPanel.instance.spaceComp("v");
						break ;
					case "topLeft":
						UIPanel.instance.placeComp("top_left");
						break ;
					case "topRight":
						UIPanel.instance.placeComp("top_right");
						break ;
					case "bottomLeft":
						UIPanel.instance.placeComp("bottom_left");
						break ;
					case "bottomRight":
						UIPanel.instance.placeComp("bottom_right");
						break ;
					case "center":
						UIPanel.instance.placeComp("center");
						break ;
					case "middle":
						UIPanel.instance.placeComp("middle");
						break ;
					case "tomiddle":
						UIPanel.instance.placeComp("toCenter");
						break ;
					}
			}
		}

		__getset(1,QuickTool,'instance',function(){
			return QuickTool._instance ? QuickTool._instance :QuickTool._instance=new QuickTool();
		},laya.editor.ui.QuickToolUI._$SET_instance);

		QuickTool._instance=null
		QuickTool.Common="Common";
		QuickTool.Zoom="Zoom";
		QuickTool.Align="Align";
		return QuickTool;
	})(QuickToolUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-2-24 上午11:13:48
	*/
	//class laya.editor.view.template.TemplateItem extends laya.editor.ui.template.TemplateItemUI
	var TemplateItem=(function(_super){
		function TemplateItem(){
			this.imgWidth=NaN;
			this.imgHeight=NaN;
			this.tImg=null;
			TemplateItem.__super.call(this);
			this.tImg=new Image();
			this.tImg.on("loaded",this,this.adptImg);
			this.imgWidth=this.imgBg.width;
			this.imgHeight=this.imgBg.height;
			this.addChild(this.tImg);
			this.tLabel.textField.overflow=Text.HIDDEN;
			this.tLabel.color=StyleConsts$1.ItemTxtColor;
		}

		__class(TemplateItem,'laya.editor.view.template.TemplateItem',_super);
		var __proto=TemplateItem.prototype;
		__proto.initData=function(tData,picWidth,picHeight,tipFun){
			this.tImg.skin=tData.icon;
			this.tImg["uData"]=tData;
			this.tImg.mouseEnabled=true;
			this.mouseEnabled=true;
			this.toolTip=new Handler(null,tipFun,[tData]);
			this.size(picWidth,picHeight);
			this.tLabel.text=tData.title;
			this.tLabel.align="center";
		}

		__proto.adptImg=function(){
			this.imgWidth=this.imgBg.width;
			this.imgHeight=this.imgBg.height;
			this.imgWidth=76;
			this.imgHeight=65;
			var tt;
			tt=this.tImg.source;
			if(!tt)return;
			var sX=NaN;
			sX=this.imgWidth/tt.width;
			var sY=NaN;
			sY=this.imgHeight/tt.height;
			var scale=NaN;
			scale=sX<sY?sX:sY;
			this.tImg.width*=scale;
			this.tImg.height*=scale;
			this.tImg.x=(this.imgWidth-this.tImg.width)*0.5;
			this.tImg.y=(this.imgHeight-this.tImg.height)*0.5;
		}

		return TemplateItem;
	})(TemplateItemUI)


	/**
	*动画播放控制
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-19 上午11:10:12
	*/
	//class laya.editor.view.timeline.PlayControl extends laya.editor.ui.timeline.PlayControlUI
	var PlayControl=(function(_super){
		function PlayControl(){
			this.isPlaying=false;
			PlayControl.__super.call(this);
			this.on("mousedown",this,this.mouseClickHandler);
			this.setIfPlay(false);
		}

		__class(PlayControl,'laya.editor.view.timeline.PlayControl',_super);
		var __proto=PlayControl.prototype;
		__proto.mouseClickHandler=function(e){
			var tKey;
			tKey=e.target.name;
			if(PlayControl.nameToActionDic.hasOwnProperty(tKey)){
				Notice$1.notify(PlayControl.nameToActionDic[tKey],[PlayControl.nameToActionDic[tKey]])
			}
		}

		__proto.setIfPlay=function(v){
			this.isPlaying=v;
			this.play.visible=!v;
			this.stop.visible=!this.play.visible;
		}

		__static(PlayControl,
		['nameToActionDic',function(){return this.nameToActionDic={
				"toBeginPos":"PlayControl_ToBeginPos",
				"pre":"PLAYCONTROL_Pre",
				"play":"PLAYCONTROL_Play",
				"next":"PLAYCONTROL_Next",
				"toEndPos":"PLAYCONTROL_TOEndPOS",
				"stop":"PLAYCONTROL_Stop"
		};}

		]);
		return PlayControl;
	})(PlayControlUI)


	/**
	*时间轴网格
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-4 上午11:06:05
	*/
	//class laya.editor.view.timeline.TimeGrid extends laya.editor.ui.timeline.TimeGridUI
	var TimeGrid=(function(_super){
		function TimeGrid(){
			this.SideDistance=3;
			this._holder=null;
			this.preMouseX=0;
			this.preCursourX=0;
			this.tSelectFrame=null;
			this.clickLayer=0;
			this.clickFrame=0;
			this._isDragSelect=false;
			this.selectFrames=[];
			this.preScrollValue=NaN;
			this.preStageMouseX=NaN;
			this.tempFrameData={};
			this._isMultiDragEndRefresh=false;
			this._selectFramesInfo={};
			this._selectFrame=0;
			this.titleLayer=null;
			this.lineLayer=null;
			this.frameLayer=null;
			this.markLayer=null;
			this.timeCursor=null;
			this.topLayer=null;
			this.frameCount=130;
			this.lineStartPos=6;
			this.bigLine=5;
			this.lineScrollX=0;
			this.lineScrollY=0;
			this.keyIndexDic={};
			this.layerDataList=null;
			this.frameDic={};
			this._selectLineLayer=new Sprite();
			TimeGrid.__super.call(this);
			this.bgPic.visible=false;
			this.lineLayer=new Sprite();
			this.addChild(this.lineLayer);
			this.titleLayer=new Sprite();
			this.addChild(this.titleLayer);
			this.titleLayer.on("mousedown",this,this.onTitleMouseDown);
			this.titleLayer.x=0;
			this.titleLayer.y=0;
			this.titleLayer.height=TimeGrid.titleHeight;
			this.lineLayer.x=0;
			this.lineLayer.y=TimeGrid.titleHeight;
			this.scrollRect=new Rectangle(0,0,this.width,this.height);
			this.lineLayer.on("mousedown",this,this.lineClick);
			this.lineLayer.on("rightmousedown",this,this.lineClick);
			this.lineLayer.cacheAsBitmap=true;
			this.timeCursor=new TimeCursor();
			this.timeCursor.visible=false;
			this.timeCursor.y=this.lineLayer.y;
			this.addChild(this.timeCursor);
			this.timeCursor.on("mousedown",this,this.cursorMouseDown);
			this.timeCursor.on("rightmousedown",this,this.cursorMouseDown);
			this.timeCursor.on("dragend",this,this.cursorDragEnd);
			this.timeCursor.on("dragmove",this,this.cursorMove);
			this.frameLayer=new Sprite();
			this.addChild(this.frameLayer);
			this.frameLayer.x=this.lineLayer.x;
			this.frameLayer.y=this.lineLayer.y;
			this.frameLayer.size(1,1);
			this.frameLayer.on("mousedown",this,this.lineClick);
			this.frameLayer.on("rightmousedown",this,this.lineClick);
			this.topLayer=new Sprite();
			this.topLayer.mouseEnabled=true;
			this.addChild(this.topLayer);
			this.topLayer.x=this.lineLayer.x;
			this.topLayer.y=this.lineLayer.y;
			this.topLayer.size(1,1);
			this.markLayer=new Sprite();
			this.addChild(this.markLayer);
			this.markLayer.mouseEnabled=false;
			this.markLayer.y=this.titleLayer.y;
			this.markLayer.x=this.lineLayer.x;
			this.addChild(this._selectLineLayer);
			this._holder=new TimeFrame();
			var hData;
			hData=new TimeFrameData();
			hData.type=2;
			hData.props=this.tempFrameData;
			this._holder.setData(hData);
			this.addListens();
			this.on("dragDrop",this,this.onDragDrop);
		}

		__class(TimeGrid,'laya.editor.view.timeline.TimeGrid',_super);
		var __proto=TimeGrid.prototype;
		// this.parent.on(Event.KEY_DOWN,this,onKeyDown);
		__proto.onKeyDown=function(e){
			if (e.keyCode==46||e.keyCode==8){
				this.removeSelectFrames();
			}
		}

		//e.stopPropagation();
		__proto.onDragDrop=function(e){
			if(!IDEVars.isGraphicAnimationMode){
				MessageManager.instance.show(Sys.lang("动画文件编辑才支持该功能"));
				return;
			};
			var mousePoint;
			mousePoint=DisControlTool.getMousePoint(this.lineLayer);
			var tLayer=0;
			var tFrame=0;
			tLayer=this.getLayerByY(mousePoint.y);
			tFrame=this.getFrameByX(mousePoint.x);
			var layerItem;
			layerItem=this.layerDataList[tLayer];
			if(layerItem){
				this.selectFrame=tFrame;
				this.addFilesByDragEvent(e,layerItem,tFrame);
				}else{
				if(this.layerDataList.length<1){
					this.selectFrame=0;
					Notice$1.notify("AddNode",[TypeManager.GraphicPic,0,0,-1,true]);
					layerItem=this.layerDataList[0];
					if(layerItem){
						this.addFilesByDragEvent(e,layerItem,0);
						}else{
						Laya.timer.once(100,this,this.addFilesLater,[e]);
					}
					}else{
					this.selectFrame=0;
					Notice$1.notify("AddNode",[TypeManager.GraphicPic,0,0,-1,true]);
					Laya.timer.once(100,this,this.addFilesLater,[e]);
				}
			}
		}

		__proto.addFilesLater=function(e){
			var layerItem;
			layerItem=this.layerDataList[this.layerDataList.length-1];
			if(layerItem){
				this.addFilesByDragEvent(e,layerItem,0);
			}
		}

		__proto.addFilesByDragEvent=function(e,layerItem,tFrame){
			var data=e.data;
			var asset;
			asset=data.asset||data.path;
			var type;
			type=data.type;
			if(type=="res"){
				if(!asset||asset=="")return;
				asset=FileManager.getRelativePath(SystemSetting.assetsPath,asset);
				Notice$1.notify("Prop_change",["skin",asset,layerItem.target]);
			}
			if(type=="multiResFile"||type=="resDir"){
				this.addFiles(DragEvent.getMutiDragFiles(e),layerItem.target,tFrame);
			}
		}

		__proto.addFiles=function(files,target,startFrame){
			if(!files||files.length<1)return;
			if(target<0)return;
			if(startFrame<0)return;
			var i=0,len=0;
			len=files.length;
			for(i=0;i<len;i++){
				this.selectFrame=startFrame;
				Notice$1.notify("Prop_change",["skin",files[i],target]);
				startFrame++;
			}
		}

		__proto.onTitleMouseDown=function(e){
			var mousePoint;
			mousePoint=DisControlTool.getMousePoint(this.lineLayer);
			this.clickFrame=this.getFrameByX(mousePoint.x);
			this.selectFrame=this.clickFrame;
			this.cursorMouseDown(null);
			this.event("TIMELINE_CLICKFRAME",[-1,this.clickFrame]);
			this.updateFocusFrame();
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(name){
			var tarData;
			var layerItem;
			var frameList;
			switch (name){
				case "删除帧":
					if(this.tSelectFrame){
						tarData=this.tSelectFrame.data.props;
						layerItem=this.layerDataList[this.clickLayer];
						if(layerItem){
							TimeLinePanel.instance.aniData.displayToInitState();
							frameList=layerItem.path;
							if(frameList&&frameList.indexOf(tarData)>=0){
								frameList.splice(frameList.indexOf(tarData),1);
								TimeLinePanel.instance.reFresh();
							}
						}
					}
					break ;
				case "批量删除帧":
					if(this.tSelectFrame&&this.tSelectFrame.data.type==3){
						TimeLinePanel.instance.aniData.removeNodeFrameByNodeID(this.tSelectFrame.data.props.target,this.tSelectFrame.data.props.index);
						TimeLinePanel.instance.reFresh();
					}
					break ;
				case "删除选中的帧":
					this.removeSelectFrames();
					break ;
				case "删除本帧所有关键帧":
					TimeLinePanel.instance.aniData.removeFrame(null,this.selectFrame);
					TimeLinePanel.instance.reFresh();
					break ;
				case "删除Tween":
					if(this.tSelectFrame){
						tarData=this.tSelectFrame.data.props;
						layerItem=this.layerDataList[this.clickLayer];
						if(layerItem){
							tarData.tween=false;
							TimeLinePanel.instance.reFresh();
						}
					}
					break ;
				case "添加Tween":
					if(this.tSelectFrame){
						tarData=this.tSelectFrame.data.props;
						layerItem=this.layerDataList[this.clickLayer];
						if(layerItem){
							tarData.tween=true;
							TimeLinePanel.instance.reFresh();
						}
					}
					break ;
				case "转换为关键帧":
					if(this._holder.parent){
						this.removeHolder();
						if(!this.tempFrameData.isDirectory){
							TimeFrame.selecteData=TimeLinePanel.instance.aniData.makeKeyFrame(this.tempFrameData.target,this.tempFrameData.key,this.selectFrame);
							TimeLinePanel.instance.reFresh();
						}
					}
					break ;
				}
		}

		__proto.removeSelectFrames=function(){
			var tarData;
			var layerItem;
			var frameList;
			if(this.selectFrames&&this.selectFrames.length>0){
				var i=0,len=0;
				len=this.selectFrames.length;
				var tWorkFrame;
				var tPropsO;
				for(i=0;i<len;i++){
					tWorkFrame=this.selectFrames[i];
					if(tWorkFrame){
						if(tWorkFrame.data.type==3){
							tPropsO=tWorkFrame.data.props;
							TimeLinePanel.instance.aniData.removeNodeFrameByNodeID(tPropsO.target,tPropsO.index);
							}else if(tWorkFrame.data.type==1){
							tPropsO=tWorkFrame.data.props;
							TimeLinePanel.instance.aniData.removeNodePropFrameByKeyAndFrame(tPropsO.target,tPropsO.key,tPropsO.index);
						}
					}
				}
				TimeLinePanel.instance.reFresh();
				}else{
				if(this.tSelectFrame){
					tWorkFrame=this.tSelectFrame;
					if(tWorkFrame.data.type==3){
						tPropsO=tWorkFrame.data.props;
						TimeLinePanel.instance.aniData.removeNodeFrameByNodeID(tPropsO.target,tPropsO.index);
						}else if(tWorkFrame.data.type==1){
						tPropsO=tWorkFrame.data.props;
						TimeLinePanel.instance.aniData.removeNodePropFrameByKeyAndFrame(tPropsO.target,tPropsO.key,tPropsO.index);
					}
					TimeLinePanel.instance.reFresh();
				}
			}
		}

		__proto.addListens=function(){}
		__proto.removeListens=function(){}
		__proto.removeHolder=function(){
			this._holder.removeSelf();
		}

		__proto.fakeFrameData=function(){
			var layerList;
			layerList=[];
			var frameList;
			frameList=[];
			var tFrameData;
			tFrameData=new TimeFrameData();
			tFrameData.frame=9;
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=10;
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=34;
			frameList.push(tFrameData);
			tFrameData=new TimeFrameData();
			tFrameData.frame=79;
			frameList.push(tFrameData);
			layerList.push([]);
			layerList.push(frameList);
			layerList.push([]);
			layerList.push([]);
			this.layerDataList=layerList;
		}

		__proto.cursorMouseDown=function(e){
			if(!e||e.type=="mousedown"){
				var option;
				option={};
				option.area=new Rectangle(0,this.timeCursor.y,this.width,0);
				this.preMouseX=Laya.stage.mouseX;
				this.preCursourX=this.timeCursor.x;
				this.timeCursor.startDrag(option.area);
				}else{
			}
		}

		__proto.cursorMove=function(){
			this.updateTimeCursorToMouse();
		}

		__proto.cursorDragEnd=function(e){
			this.updateTimeCursorToMouse();
			this.updateFocusFrame();
		}

		__proto.updateTimeCursorToMouse=function(){
			this.timeCursor.x=this.preCursourX+Laya.stage.mouseX-this.preMouseX;
			this.selectFrame=this.getFrameByX(this.timeCursor.x);
		}

		__proto.getFrameByX=function(xPos){
			return this.lineScrollX+Math.floor(xPos/TimeGrid.frameWidth);
		}

		__proto.getLayerByY=function(yPos){
			return this.lineScrollY+Math.floor(yPos/TimeGrid.frameHeight);
		}

		__proto.updateFocusFrame=function(){
			this.removeHolder();
			this.lineClick(null,false);
		}

		__proto.lineClick=function(e,fromMouse){
			(fromMouse===void 0)&& (fromMouse=true);
			var tType;
			if(fromMouse){
				tType=e.type;
				}else{
				tType="NOTMOUSE";
			}
			this._isDragSelect=false;
			if(fromMouse){
				var mousePoint;
				mousePoint=DisControlTool.getMousePoint(this.lineLayer);
				this.clickLayer=this.getLayerByY(mousePoint.y);
				this.clickFrame=this.getFrameByX(mousePoint.x);
			};
			var tFrame;
			tFrame=this.frameDic[this.clickLayer+"_"+this.clickFrame];
			if(fromMouse&&tFrame&&this.isTimeFrameSelected(tFrame)&&this.selectFrames.length>1&&fromMouse){
				if(tType=="rightmousedown"){
					MenuManager.showMenu("删除选中的帧",this,this.onEmunSelect);
					return;
				}
			}
			if(!tFrame||!this.isTimeFrameSelected(tFrame)||tType!="mousedown"){
				if(fromMouse)
					this.clearSelectFrames();
			}
			if(this.selectFrames.length>0&&tType=="mousedown"){
				this.beginDragSelectFrames();
				return;
			}
			if(fromMouse){
				this.selectFrame=this.clickFrame;
				this.event("TIMELINE_CLICKFRAME",[this.clickLayer,this.clickFrame]);
			}
			if(!tFrame){
				if(this._holder.parent&&this.getLayerByY(this._holder.y)==this.clickLayer&&this.getFrameByX(this._holder.x)==this.clickFrame){
					tFrame=this._holder;
				}
			}
			this.removeHolder();
			if(tFrame){
				if(tFrame.data.type==2){
					this.frameLayer.addChild(this._holder);
					if(!this.tempFrameData.isDirectory&&tType=="rightmousedown"){
						MenuManager.showMenu("转换为关键帧",this,this.onEmunSelect);
					}
					return;
				}
				if(tFrame.data.type==3){
					if(this.tSelectFrame)this.tSelectFrame.isSelect=false;
					this.tSelectFrame=tFrame;
					this.tSelectFrame.isSelect=true;
					this.tempFrameData.target=tFrame.data.props.target;
					this.tempFrameData.isDirectory=true;
					FramePropPanel.instance.setNodeData(this.tempFrameData);
					if(tType=="rightmousedown"){
						MenuManager.showMenu("批量删除帧",this,this.onEmunSelect);
						}else{
						if(tFrame.data.frame!=0){
							this.offFrameDragEvents(tFrame);
							tFrame.on("dragend",this,this.frameDragEnd,[tFrame]);
							var option;
							option={};
							option.area=new Rectangle(0,tFrame.y,this.width,0);
							if(fromMouse){
								tFrame.startDrag(option.area);
							}
						}
					}
					return;
				}
				this.removeHolder();
				if(tType=="mousedown"){
					if(this.tSelectFrame)this.tSelectFrame.isSelect=false;
					this.tSelectFrame=tFrame;
					this.tSelectFrame.isSelect=true;
					if(tFrame.data.frame!=0&&fromMouse){
						this.offFrameDragEvents(tFrame);
						tFrame.on("dragend",this,this.frameDragEnd,[tFrame]);
						option={};
						option.area=new Rectangle(0,tFrame.y,this.width,0);
						tFrame.startDrag(option.area);
					}
					}else if(tType=="rightmousedown"){
					if(this.tSelectFrame)this.tSelectFrame.isSelect=false;
					this.tSelectFrame=tFrame;
					this.tSelectFrame.isSelect=true;
					if(tFrame.data){
						if(tFrame.data.props.tween){
							MenuManager.showMenu("删除帧,删除Tween",this,this.onEmunSelect);
							}else{
							MenuManager.showMenu("删除帧,添加Tween",this,this.onEmunSelect);
						}
					}
				}
				if(tType=="NOTMOUSE"){
					if(this.tSelectFrame)this.tSelectFrame.isSelect=false;
					this.tSelectFrame=tFrame;
					tFrame.isSelect=true;
				}
				FramePropPanel.instance.setFrameData(tFrame.data);
				}else{
				this.clearSelectFrames();
				if(tType=="rightmousedown"){
					this.startRecDrag();
					return;
				}
				if(this.tSelectFrame)this.tSelectFrame.isSelect=false;
				if(this.clickLayer<this.layerCount&&this.clickFrame<this.frameCount){
					this.frameLayer.addChild(this._holder);
					this._holder.x=this.getXByFrame(this.clickFrame);
					this._holder.y=this.getYByLayer(this.clickLayer);
					var propData;
					propData=this.layerDataList[this.clickLayer];
					if(!propData.isDirectory){
						this.tempFrameData.key=propData.key;
						this.tempFrameData.target=propData.target;
						this.tempFrameData.value=TimeLinePanel.instance.aniData.targetAnimation.getNodeFrameProp(propData.target,this.clickFrame,propData.key);
						this.tempFrameData.isDirectory=false;
						FramePropPanel.instance.setNoKeyFrameData(this.tempFrameData);
						}else{
						this.tempFrameData.target=propData.target;
						this.tempFrameData.isDirectory=true;
						FramePropPanel.instance.setNodeData(this.tempFrameData);
					}
					this.tSelectFrame=this._holder;
					if(fromMouse){
						this.readyToDragSelect();
					}
					}else{
					FramePropPanel.instance.clearData();
				}
			}
		}

		/**开始选择（显示选择框）*/
		__proto.readyToDragSelect=function(){
			this.clearSelectFrames();
			this._isDragSelect=true;
			this._selectLineLayer.x=this.mouseX;
			this._selectLineLayer.y=this.mouseY;
			this.stage.on("mousemove",this,this.onStageMouseMove);
			this.stage.on("mouseup",this,this.onStageMouseUp);
		}

		/**移动组件*/
		__proto.onStageMouseMove=function(e){
			if (this._isDragSelect){
				if(Math.abs(this.mouseX-this._selectLineLayer.x)+Math.abs(this.mouseY-this._selectLineLayer.y)>5){
					this.removeHolder();
				}
				this._selectLineLayer.graphics.clear();
				Utils$1.drawDashedRect(this._selectLineLayer.graphics,this.mouseX-this._selectLineLayer.x,this.mouseY-this._selectLineLayer.y);
			}
		}

		/**处理鼠标点开*/
		__proto.onStageMouseUp=function(e){
			this.stage.off("mousemove",this,this.onStageMouseMove);
			this.stage.off("mouseup",this,this.onStageMouseUp);
			this.clearSelectFrames();
			if (this._isDragSelect){
				this._selectLineLayer.width=this.mouseX-this._selectLineLayer.x;this._selectLineLayer.height=this.mouseY-this._selectLineLayer.y;
				var rect=this._selectLineLayer.getBounds();
				var point;
				point=new Point();
				point.setTo(rect.x,rect.y);
				point=(this._selectLineLayer.parent).localToGlobal(point);
				point=this.frameLayer.globalToLocal(point);
				rect.x=point.x;
				rect.y=point.y;
				if (rect.width>0){
					var box=new Rectangle();
					box.copyFrom(rect);
					var compRect=new Rectangle();
					for (var i=0,n=this.frameLayer.numChildren;i < n;i++){
						var display=this.frameLayer.getChildAt(i);
						if ((display instanceof laya.editor.view.timeline.TimeFrame )&&display!=this._holder){
							compRect.copyFrom(display.getBounds());
							if(compRect.width==0||compRect.height==0){
								compRect.x=display.x;
								compRect.y=display.y;
							}
							if (box.intersects(compRect)){
								this.selectFrames.push(display);
								display.isSelect=true;
							}
						}
					}
				}
				this._selectLineLayer.graphics.clear();
			}
		}

		__proto.selectFramesByArr=function(frameList){
			var i=0,len=0;
			len=frameList.length;
			var tFrame;
			for(i=0;i<len;i++){
				tFrame=frameList[i];
				this.selectFrames.push(tFrame);
				tFrame.isSelect=true;
			}
		}

		__proto.isTimeFrameSelected=function(frame){
			return this.selectFrames.indexOf(frame)>=0;
		}

		__proto.clearSelectFrames=function(){
			var i=0,len=0;
			len=this.selectFrames.length;
			for(i=0;i<len;i++){
				this.selectFrames[i].isSelect=false;
			}
			this.selectFrames.length=0;
		}

		__proto.startRecDrag=function(){
			this.preStageMouseX=Laya.stage.mouseX;
			this.preScrollValue=TimeLinePanel.instance.mHScroll.value;
			this.clearRightMouseEvents();
			Laya.stage.on("mousemove",this,this.rightMouseMove);
			Laya.stage.on("rightmouseup",this,this.rightMouseUp);
		}

		__proto.rightMouseMove=function(){
			var newValue=NaN;
			newValue=this.preScrollValue-Laya.stage.mouseX+this.preStageMouseX;
			var bar;
			bar=TimeLinePanel.instance.mHScroll;
			if(newValue<bar.min)newValue=bar.min;
			if(newValue>bar.max)newValue=bar.max;
			bar.value=newValue;
		}

		__proto.rightMouseUp=function(){
			this.clearRightMouseEvents();
		}

		__proto.clearRightMouseEvents=function(){
			Laya.stage.off("mousemove",this,this.rightMouseMove);
			Laya.stage.off("rightmouseup",this,this.rightMouseUp);
		}

		__proto.multiFrameDragEnd=function(frames){
			if(frames.length<1)return;
			var i=0,len=0;
			var tFrame;
			len=this.selectFrames.length;
			var adptFrames=[];
			tFrame=this.selectFrames[0];
			var newIndex=0;
			newIndex=this.getFrameByX(tFrame.x);
			var type=0;
			type=newIndex-tFrame.data.frame;
			for(i=0;i<len;i++){
				tFrame=this.selectFrames[i];
				this.offFrameDragEvents(tFrame);
				this.adptFramePos(tFrame);
				if(!this.hasParentInList(tFrame,this.selectFrames)){
					adptFrames.push(tFrame);
				}
			}
			if(type==0){
				return;
			}
			len=adptFrames.length;
			adptFrames.sort(this.sortFrameFun);
			if(type>0){
				adptFrames=adptFrames.reverse();
			}
			for(i=0;i<len;i++){
				tFrame=adptFrames[i];
				this.dealFrameDragEnd(tFrame);
			}
			this.recordSelectFrames();
			this.clearSelectFrames();
			this._isMultiDragEndRefresh=true;
			TimeLinePanel.instance.reFresh();
		}

		__proto.recordSelectFrames=function(){
			ObjectTools.clearObj(this._selectFramesInfo);
			var i=0,len=0;
			len=this.selectFrames.length;
			var tFrame;
			var tLayer=0;
			var tFrameID=0;
			for(i=0;i<len;i++){
				tFrame=this.selectFrames[i];
				tLayer=this.getLayerByY(tFrame.y);
				tFrameID=this.getFrameByX(tFrame.x);
				this._selectFramesInfo[tLayer+"_"+tFrameID]=true;
			}
		}

		__proto.sortFrameFun=function(frameA,frameB){
			return frameA.data.frame-frameB.data.frame;
		}

		__proto.adptFramePos=function(frame){
			frame.x=this.getXByFrame(this.getFrameByX(frame.x));
		}

		__proto.hasParentInList=function(tFrame,frames){
			if(tFrame.data.type==3)return false;
			var i=0,len=0;
			var tPFrame;
			len=frames.length;
			var tTarget=0;
			tTarget=tFrame.data.props.target;
			for(i=0;i<len;i++){
				tPFrame=frames[i];
				if(tPFrame.data.type==3&&tPFrame.data.props.target==tTarget){
					return true;
				}
			}
			return false;
		}

		__proto.beginDragSelectFrames=function(){
			var i=0,len=0;
			var tFrame;
			len=this.selectFrames.length;
			var option;
			for(i=0;i<len;i++){
				tFrame=this.selectFrames[i];
				this.offFrameDragEvents(tFrame);
				if(i==0){
					tFrame.on("dragend",this,this.multiFrameDragEnd,[this.selectFrames]);
				}
				option={};
				option.area=new Rectangle(0,tFrame.y,this.width,0);
				tFrame.startDrag(option.area);
			}
		}

		__proto.offFrameDragEvents=function(tFrame){
			tFrame.off("dragend",this,this.multiFrameDragEnd);
			tFrame.off("dragend",this,this.frameDragEnd);
			tFrame.off("dragstart",this,this.frameDragStart);
		}

		__proto.frameDragStart=function(frame){
			this.removeHolder();
		}

		__proto.frameDragEnd=function(frame){
			this.offFrameDragEvents(frame);
			var layer=0;
			layer=this.getLayerByY(frame.y);
			this.selectFrame=this.getFrameByX(frame.x);
			frame.x=this.getXByFrame(this.selectFrame);
			if(frame.data.frame==this.selectFrame)return;
			if(frame.data.frame==0){
				var newFrameData;
				frame.data.frame=this.selectFrame;
				newFrameData=TreeData.addFrame(this.layerDataList[layer],0,ObjectTools.copyObj(frame.data.props));
				var newFrame;
				newFrame=new TimeFrame();
				newFrame.setData(newFrameData);
				frame.parent.addChild(newFrame);
				newFrame.y=frame.y;
				newFrame.x=this.getXByFrame(0);
				}else{
			};
			var tNodeData;
			tNodeData=frame.data.props;
			if(frame.data.type==3){
				TimeLinePanel.instance.aniData.moveNodeFrameTo(tNodeData.target,tNodeData.index,this.selectFrame);
				}else{
				TimeLinePanel.instance.aniData.moveNodePropFrameTo(tNodeData.target,tNodeData.key,tNodeData.index,this.selectFrame);
			}
			TimeLinePanel.instance.reFresh();
		}

		//Notice.notify(IDEEvent.TIMELINE_CHANGED);
		__proto.dealFrameDragEnd=function(frame){
			var newFrameIndex=this.getFrameByX(frame.x);
			var layer=0;
			layer=this.getLayerByY(frame.y);
			if(frame.data.frame==newFrameIndex)return;
			if(frame.data.frame==0){
				var newFrameData;
				frame.data.frame=newFrameIndex;
				newFrameData=TreeData.addFrame(this.layerDataList[layer],0,ObjectTools.copyObj(frame.data.props));
				var newFrame;
				newFrame=new TimeFrame();
				newFrame.setData(newFrameData);
				frame.parent.addChild(newFrame);
				newFrame.y=frame.y;
				newFrame.x=this.getXByFrame(0);
				}else{
			};
			var tNodeData;
			tNodeData=frame.data.props;
			if(frame.data.type==3){
				TimeLinePanel.instance.aniData.moveNodeFrameTo(tNodeData.target,tNodeData.index,newFrameIndex);
				}else{
				TimeLinePanel.instance.aniData.moveNodePropFrameTo(tNodeData.target,tNodeData.key,tNodeData.index,newFrameIndex);
			}
		}

		__proto.updateCursor=function(){
			if(this.selectFrame<this.lineScrollX||this.selectFrame>this.lineScrollX+this.xCount){
				this.timeCursor.visible=false;
				}else{
				this.timeCursor.visible=true;
				this.timeCursor.x=this.getXByFrame(this.selectFrame);
				this.timeCursor.setFrame(this.selectFrame);
			}
			Notice$1.notify("TimeLineFrameSelected",[this.selectFrame]);
		}

		__proto.getFramePos=function(layer,frame){
			TimeGrid.framePos.x=this.getXByFrame(frame);
			TimeGrid.framePos.y=this.getYByLayer(layer);
			return TimeGrid.framePos;
		}

		__proto.getXByFrame=function(frame){
			return (frame-this.lineScrollX)*TimeGrid.frameWidth+this.lineStartPos;
		}

		__proto.getYByLayer=function(layer){
			return (layer-this.lineScrollY)*TimeGrid.frameHeight;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.adptToSize();
		}

		__proto.adptToSize=function(){
			var rec;
			rec=this.scrollRect;
			rec.width=this.width;
			rec.height=this.height;
			this.titleLayer.width=this.width;
			this.lineLayer.width=this.width;
			this.lineLayer.height=this.height-this.lineLayer.y;
			this.timeCursor.sizeTo(this.lineLayer.height);
			this.renderData();
		}

		__proto.changeFrameWidth=function(newWidth){
			if(TimeGrid.frameWidth==newWidth)return;
			TimeGrid.frameWidth=newWidth;
			this.renderData();
		}

		__proto.setHScrollValue=function(value){
			this.lineScrollX=Math.floor(value);
			this.renderData();
		}

		__proto.setVScrollValue=function(value){
			this.lineScrollY=Math.floor(value);
			this.renderData();
		}

		__proto.setData=function(layerList){
			if(!layerList){
				this.frameLayer.removeChildren();
				this.lineLayer.removeChildren();
				var g=this.lineLayer.graphics;
				g.clear();
				return;
			}
			this.layerDataList=layerList;
			this.renderData();
		}

		__proto.renderData=function(){
			this.clearSelectFrames();
			this.lineStartPos=TimeGrid.frameWidth*0.5;
			this.drawTitle();
			this.drawGrids();
			this.updateCursor();
			this.renderItems();
		}

		// private var frameIndexDic:Object={};
		__proto.renderItems=function(){
			var i=0,len=0;
			var tFrame;
			for(i=this.frameLayer.numChildren-1;i>=0;i--){
				tFrame=this.frameLayer.getChildAt(i);
				if((tFrame instanceof laya.editor.view.timeline.TimeFrame )){
					if(tFrame!=this._holder)
						tFrame.recover();
				}
			}
			ObjectTools.clearObj(this.frameDic);
			this.frameLayer.removeChildren();
			if(!this.layerDataList)return;
			var layerStart=0;
			var layerMax=0;
			layerStart=this.lineScrollY;
			layerMax=layerStart+this.yCount+1;
			var toSelectList=[];
			for(i=layerStart;i<layerMax;i++){
				this.renderLayerData(i,toSelectList);
			}
			Laya.timer.once(1000,this,this.clearSelectInfo);
			this.selectFramesByArr(toSelectList);
		}

		__proto.clearSelectInfo=function(){
			this._isMultiDragEndRefresh=false;
			ObjectTools.clearObj(this._selectFramesInfo);
		}

		__proto.renderLayerData=function(layer,toSelects){
			if(!this.layerDataList||!this.layerDataList[layer])return;
			var frameStart=0;
			var frameMax=0;
			var i=0;
			frameStart=this.lineScrollX;
			frameMax=frameStart+this.xCount+1;
			var dataO;
			dataO=this.layerDataList[layer];
			var frameList;
			var isNode=false;
			isNode=dataO.isDirectory;
			if(isNode){
				frameList=dataO.keyFrames;
				debugger;
				}else{
				frameList=dataO.path;
			};
			var len=0;
			len=frameList.length;
			var tFrame;
			var tData;
			var tY=NaN;
			tY=this.getYByLayer(layer);
			var frameO;
			var g;
			g=this.lineLayer.graphics;
			var preIndex=0;
			preIndex=-1;
			var frameType=0;
			frameType=isNode?3:1;
			var tg=this.titleLayer.graphics;
			for(i=0;i<len;i++){
				frameO=frameList[i];
				tData=TimeFrameData.create(frameO.index,frameO,frameType);
				if(preIndex>=0){
					g.drawLine(this.getXByFrame(preIndex),tY+13,this.getXByFrame(frameO.index),tY+13,"#cbcbcb");
				}
				if(tData.props.tween){
					preIndex=tData.frame;
					}else{
					preIndex=-1;
				}
				if(tData.frame<frameStart)continue ;
				if(tData.frame>frameMax)break ;
				tFrame=Pool.getItemByClass("TimeFrame",TimeFrame);
				tFrame.setData(tData);
				tFrame.pos(this.getXByFrame(tData.frame),tY);
				this.frameLayer.addChild(tFrame);
				if(this._selectFramesInfo[layer+"_"+tData.frame]&&this._isMultiDragEndRefresh){
					toSelects.push(tFrame);
				}
				if(tFrame.isSelect){
					this.tSelectFrame=tFrame;
					if(tFrame.data.type!=3){
						FramePropPanel.instance.setFrameData(tFrame.data);
						}else{
						FramePropPanel.instance.setNodeData(this.tempFrameData);
					}
				}
				this.frameDic[layer+"_"+tData.frame]=tFrame;
			}
		}

		/**
		*画标题部分
		*
		*/
		__proto.drawTitle=function(){
			var i=0,len=0;
			var g=this.titleLayer.graphics;
			g.clear();
			this.recoverTopFrame(this.topLayer);
			var tX=NaN;
			tX=0;
			tX=this.lineStartPos;
			var startI=NaN;
			startI=this.lineScrollX;
			var maxX=NaN;
			maxX=tX+this.titleLayer.width;
			var mY=0;
			mY=TimeGrid.titleHeight;
			var top;
			for(i=startI;tX<maxX;i++){
				if(i%this.bigLine==0){
					g.drawLine(tX,mY,tX,mY-10,"#009999",1);
					g.fillText(i+"",tX,2,null,StyleConsts$1.TimelineTitleTxtColor,"center");
					}else{
					g.drawLine(tX,mY,tX,mY-5,"#006666",1);
				}
				if(this.keyIndexDic&&this.keyIndexDic[i]){
					top=this.getATopFrame();
					top.frame=i;
					this.topLayer.addChild(top);
					top.pos(tX,-3.5+1);
				}
				tX+=TimeGrid.frameWidth;
			}
		}

		__proto.recoverTopFrame=function(container){
			var i=0,len=0;
			var tChild;
			for(i=container.numChildren-1;i>=0;i--){
				tChild=container.getChildAt(i);
				if((tChild instanceof laya.editor.view.timeline.TopFrame )){
					tChild.removeSelf();
					Pool.recover("TopFrame",tChild);
				}
			}
		}

		__proto.getATopFrame=function(){
			var rst;
			rst=Pool.getItemByClass("TopFrame",TopFrame);
			rst.on("mousedown",this,this.topFrameMouseDown,[rst]);
			rst.on("dragend",this,this.topFrameDragEnd,[rst]);
			rst.on("rightmousedown",this,this.topFrameRightMouseDown,[rst]);
			return rst;
		}

		__proto.topFrameMouseDown=function(frame){
			var option;
			option={};
			option.area=new Rectangle(0,frame.y,this.width,0);
			frame.startDrag(option.area);
		}

		__proto.topFrameRightMouseDown=function(frame){
			this.selectFrame=frame.frame;
			MenuManager.showMenu("删除本帧所有关键帧",this,this.onEmunSelect);
		}

		__proto.topFrameDragEnd=function(frame){
			var tFrame=this.getFrameByX(frame.x);
			frame.x=this.getXByFrame(tFrame);
			if(tFrame==frame.frame)return;
			TimeLinePanel.instance.aniData.moveFrameTo(null,frame.frame,tFrame);
			TimeLinePanel.instance.reFresh();
		}

		/**
		*画主体底图
		*
		*/
		__proto.drawGrids=function(){
			var i=0,len=0;
			this.lineLayer.removeChildren();
			var g=this.lineLayer.graphics;
			g.clear();
			var sx=NaN;
			sx=0;
			var startYI=0;
			startYI=this.lineScrollY;
			var maxY=NaN;
			maxY=this.lineLayer.height;
			var lineWidth=0;
			lineWidth=this.lineLayer.width;
			var tY=NaN;
			tY=0;
			var colorList=TimeLineStyles.FrameColors;
			for(i=startYI;tY<=maxY;i++){
				if(i>=this.layerCount)break ;
				g.drawRect(sx,tY,lineWidth,TimeGrid.frameHeight-2,colorList[i%3],"#222222",1);
				tY+=TimeGrid.frameHeight;
			};
			var tX=NaN;
			tX=this.scrollRect.x;
			var startI=NaN;
			startI=this.lineScrollX;
			tX=0;
			tX=this.lineStartPos;
			var lineHeight=NaN;
			lineHeight=tY-2;
			var maxX=NaN;
			maxX=tX+this.lineLayer.width;
			for(i=startI;tX<maxX;i++){
				if(i%this.bigLine==0){
					g.drawLine(tX,0,tX,lineHeight,"#343434",1);
					}else{
				}
				tX+=TimeGrid.frameWidth;
			}
		}

		__getset(0,__proto,'xCount',function(){
			return Math.floor(this.lineLayer.width/TimeGrid.frameWidth);
		});

		__getset(0,__proto,'selectFrame',function(){
			return this._selectFrame;
			},function(value){
			this._selectFrame=value;
			if(this._selectFrame<0)this._selectFrame=0;
			TimeLinePanel.instance.frameTxt.text=this._selectFrame+"";
			this.clickFrame=value;
			this.updateCursor();
		});

		// public var layerCount:int=6;
		__getset(0,__proto,'layerCount',function(){
			if(!this.layerDataList)return 0;
			return this.layerDataList.length;
		});

		__getset(0,__proto,'startXRange',function(){
			return this.frameCount-Math.floor(this.lineLayer.width/TimeGrid.frameWidth);
		});

		__getset(0,__proto,'startYRange',function(){
			return this.layerCount-Math.floor(this.lineLayer.height/TimeGrid.frameHeight);
		});

		__getset(0,__proto,'yCount',function(){
			return Math.floor(this.lineLayer.height/TimeGrid.frameHeight);
		});

		TimeGrid.NOTMOUSE="NOTMOUSE";
		TimeGrid.frameWidth=12;
		TimeGrid.frameHeight=29;
		TimeGrid.titleHeight=30;
		__static(TimeGrid,
		['framePos',function(){return this.framePos=new Point();}
		]);
		return TimeGrid;
	})(TimeGridUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-7 上午10:20:12
	*/
	//class laya.editor.view.timeline.tree.TimeLineList extends laya.ide.ui.ListBase
	var TimeLineList=(function(_super){
		function TimeLineList(){
			TimeLineList.__super.call(this);
		}

		__class(TimeLineList,'laya.editor.view.timeline.tree.TimeLineList',_super);
		var __proto=TimeLineList.prototype;
		__proto.changeCells=function(){
			if (this._itemRender){
				for (var i=this._cells.length-1;i >-1;i--){
					this._cells[i].destroy();
				}
				this._cells.length=0;
				if(!this.scrollBar)return;
				var cell=this.createItem();
				var cellWidth=cell.width+this._spaceX;
				var cellHeight=cell.height+this._spaceY;
				if (this._repeatX < 1 && this._width > 0)this._repeatX2=Math.round(this._width / cellWidth);
				if (this._repeatY < 1 && this._height > 0)this._repeatY2=Math.round(this._height / cellHeight);
				var listWidth=this._width ? this._width :(cellWidth *this.repeatX-this._spaceX);
				var listHeight=this._height ? this._height :(cellHeight *this.repeatY-this._spaceY);
				this._cellSize=this._isVertical ? cellHeight :cellWidth;
				if (this._isVertical && this._scrollBar)this._scrollBar.height=listHeight;
				else if (!this._isVertical && this._scrollBar)this._scrollBar.width=listWidth;
				this.setContentSize(listWidth,listHeight);
				this._content.removeChildren();
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				var numY=(this._isVertical ? this.repeatY :this.repeatX)+(this._scrollBar ? 1 :0);
				for (var k=0;k < numY;k++){
					for (var l=0;l < numX;l++){
						cell=this.createItem();
						cell.x=(this._isVertical ? l :k)*cellWidth;
						cell.y=(this._isVertical ? k :l)*cellHeight;
						cell.name="item"+(k *numX+l);
						this._content.addChild(cell);
						this.addCell(cell);
					}
				}
				if (this._array){
					this.array=this._array;
					this.runCallLater(this.renderItems);
				}
			}
		}

		__proto.freshUI=function(){
			this.array=this.array;
		}

		__proto.onScrollBarChange=function(e){
			this.runCallLater(this.changeCells);
			var scrollValue=Math.ceil(this._scrollBar.value);
			var lineX=(this._isVertical ? this.repeatX :this.repeatY);
			var lineY=(this._isVertical ? this.repeatY :this.repeatX);
			var index=scrollValue *lineX;
			if (index > this._startIndex){
				var num=index-this._startIndex;
				var down=true;
				var toIndex=this._startIndex+lineX *(lineY+1);
				this._isMoved=true;
				}else if (index < this._startIndex){
				num=this._startIndex-index;
				down=false;
				toIndex=this._startIndex-1;
				this._isMoved=true;
			}
			for (var i=0;i < num;i++){
				if (down){
					var cell=this._cells.shift();
					this._cells[this._cells.length]=cell;
					var cellIndex=toIndex+i;
					}else {
					cell=this._cells.pop();
					this._cells.unshift(cell);
					cellIndex=toIndex-i;
				};
				var pos=Math.ceil(cellIndex / lineX)*this._cellSize;
				this._isVertical ? cell.y=pos :cell.x=pos;
				this.renderItem(cell,cellIndex);
			}
			this._startIndex=index;
			if (this._isVertical)this._content.scrollRect.y=scrollValue*this._cellSize;
			else this._content.scrollRect.x=scrollValue*this._cellSize;
		}

		__proto.replaceScrollBar=function(value){
			if(this._scrollBar){
				this._scrollBar.removeSelf();
				this._scrollBar.offAll();
			}
			this.scrollBar=value;
			this.callLater(this.changeCells);
		}

		__proto.changeSize=function(){
			laya.ui.List.prototype.changeSize.call(this);
			if (this._scrollBar)
				Laya.timer.once(10,this,this.changeCells);
		}

		__getset(0,__proto,'scrollBar',_super.prototype._$get_scrollBar,function(value){
			if (this._scrollBar !=value){
				this._scrollBar=value;
				if (value){
					this._scrollBar.on("change",this,this.onScrollBarChange);
					this._isVertical=this._scrollBar.isVertical;
				}
			}
		});

		// hideScrollBar=_hideScrollBar;
		__getset(0,__proto,'array',_super.prototype._$get_array,function(value){
			this.runCallLater(this.changeCells);
			this._array=value || [];
			var length=this._array.length;
			this.totalPage=Math.ceil((length / (this.repeatX *this.repeatY))+0.5);
			this._selectedIndex=this._selectedIndex < length ? this._selectedIndex :length-1;
			this.startIndex=this._startIndex;
			if (this._scrollBar){
				var numX=this._isVertical ? this.repeatX :this.repeatY;
				var numY=this._isVertical ? this.repeatY :this.repeatX;
				var lineCount=Math.ceil(length / numX);
				if (this.totalPage > 1){
					this._scrollBar.scrollSize=this._cellSize;
					this._scrollBar.thumbPercent=numY / lineCount;
					this._scrollBar.setScroll(0,(lineCount-numY+1),Math.ceil(this._startIndex / numX));
					this._scrollBar.target=this._content;
					}else {
					this._scrollBar.setScroll(0,0,0);
					this._scrollBar.target=this._content;
				}
			}
			this.event("ListChange",[value]);
		});

		return TimeLineList;
	})(ListBase$1)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-7 上午10:20:44
	*/
	//class laya.editor.view.timeline.tree.TimeLineTree extends laya.ide.ui.NodeTree
	var TimeLineTree=(function(_super){
		function TimeLineTree(){
			TimeLineTree.__super.call(this);
		}

		__class(TimeLineTree,'laya.editor.view.timeline.tree.TimeLineTree',_super);
		var __proto=TimeLineTree.prototype;
		__proto.createChildren=function(){
			this.addChild(this._list=new TimeLineList());
			this._list.renderHandler=Handler.create(this,this.renderItem,null,false);
			this._list.repeatX=1;
			this._list.on("change",this,this.onListChange);
		}

		__getset(0,__proto,'mList',function(){
			return this._list;
		});

		return TimeLineTree;
	})(NodeTree$1)


	/**
	*节点树上用的List 支持多选
	*@author ww
	*@version 1.0
	*
	*@created 2015-11-13 上午11:27:36
	*/
	//class laya.ide.ui.ListEx extends laya.ide.ui.ListBase
	var ListEx=(function(_super){
		function ListEx(){
			this._selectIndexs=[];
			this._preIndex=0;
			this._preClickIndex=0;
			this.onlySameParentSelect=false;
			this.mutiSelectEnable=true;
			this._preNoShiftIndex=-1;
			this.changeCellStateH=null;
			this._selectItems=[];
			this._plainSelectList=[];
			ListEx.__super.call(this);
		}

		__class(ListEx,'laya.ide.ui.ListEx',_super);
		var __proto=ListEx.prototype;
		__proto.isIDSelected=function(id){
			return this._selectIndexs.indexOf(id)>=0;
		}

		__proto.setSelectList=function(selectList){
			this._selectIndexs=selectList;
			this.changeSelectStatus();
			if(this._selectIndexs&&this._selectIndexs.length>0){
				this._selectedIndex=selectList[0];
				this.scrollToIndex(this._selectIndexs[0]);
			}
		}

		__proto.getCellUnderMouse=function(maxLen){
			(maxLen===void 0)&& (maxLen=5);
			if(!this._cells||this._cells.length<1)return null;
			var mouseY=this.mouseY;
			var i=0,len=0;
			len=this._cells.length;
			var tCell;
			var mCell;
			for(i=0;i<len;i++){
				tCell=this._cells[i];
				if(tCell.y<=mouseY&&tCell.y+tCell.height>=mouseY){
					return tCell;
				}
				console.log(Math.abs(tCell.y-mouseY));
				if(Math.abs(tCell.y-mouseY)<maxLen){
					mCell=tCell;
				}
			}
			return mCell;
		}

		__proto.getParentByIndex=function(index){
			var item;
			item=this.getItem(index);
			if(item){
				return item.nodeParent;
			}
			return-1;
		}

		__proto.onCellMouse=function(e){
			if (e.type==="mousedown")this._isMoved=false;
			var cell=e.currentTarget;
			var index=this._startIndex+this._cells.indexOf(cell);
			var ctrl=e.nativeEvent.ctrlKey;
			var shift=e.nativeEvent.shiftKey;
			if (index < 0)return;
			if (e.type==="mousedown" || e.type==="rightmousedown"){
				this._preIndex=-1;
				this._preClickIndex=index;
				if(ctrl&&this.mutiSelectEnable){
					if(this.onlySameParentSelect){
						var tP=0;
						tP=this.tSelectParent;
						if(tP<=0||tP==this.getParentByIndex(index)){
							this.switchSelect(index);
						}
						}else{
						this.switchSelect(index);
					}
					}else{
					if(shift&&this.mutiSelectEnable){
					}else
					if(this.isIDSelected(index)){
						}else{
						this.clearSelect();
						if (this.selectEnable && !this._isMoved){
							this.selectedIndex=index;
							this._preIndex=index;
						}
						else this.changeCellState(cell,true,0);
					}
				}
			}else
			if (e.type==="click" || e.type==="rightclick"){
				var isShiftSelectSuccess=false;
				if(shift&&this.mutiSelectEnable){
					if(this.mutiSelectEnable){
						isShiftSelectSuccess=this.dealShiftSelect(index);
					}
				}
				else
				if(ctrl){
					}else{
					if(this.isIDSelected(index)&&index!=this._preIndex&&index==this._preClickIndex){
						if(this._selectIndexs.length==1&&this._selectIndexs[0]==index||e.type=="rightclick"){
							}else{
							this.clearSelect();
							this.changeSelectStatus();
							if (this.selectEnable && !this._isMoved)this.selectedIndex=index;
							else this.changeCellState(cell,true,0);
						}
					}
				}
				if(!isShiftSelectSuccess){
					if(this.isIDSelected(index)){
						this._preNoShiftIndex=index;
					}
				}
				}else if ((e.type==="mouseover" || e.type==="mouseout")&& !this.isIDSelected(index)){
				this.changeCellState(cell,e.type==="mouseover",0);
			}
			this.mouseHandler && this.mouseHandler.runWith([e,index]);
		}

		__proto.dealShiftSelect=function(index){
			if(this._preNoShiftIndex<0)return false;
			if(!this.isIDSelected(this._preNoShiftIndex))return false;
			var i=0,len=0;
			this.clearSelect();
			var min=0,max=0;
			if(index>this._preNoShiftIndex){
				min=this._preNoShiftIndex;
				max=index;
				}else{
				max=this._preNoShiftIndex;
				min=index;
			};
			var parent=0;
			parent=this.getParentByIndex(min);
			if(parent!=this.getParentByIndex(max))return false;
			for(i=min;i<=max;i++){
				if(this.getParentByIndex(i)==parent){
					this._selectIndexs.push(i);
				}
			}
			this.changeSelectStatus();
			return true;
		}

		__proto.reRender=function(){
			this.renderItems();
		}

		/**
		*@private
		*改变单元格的可视状态。
		*@param cell 单元格对象。
		*@param visable 是否显示。
		*@param index 单元格的属性 <code>index</code> 值。
		*/
		__proto.changeCellState=function(cell,visable,index){
			laya.ui.List.prototype.changeCellState.call(this,cell,visable,index);
			if(this.changeCellStateH){
				this.changeCellStateH.runWith([cell,visable,index]);
			}
		}

		__proto.changeSelectStatus=function(){
			for (var i=0,n=this._cells.length;i < n;i++){
				this.changeCellState(this._cells[i],this.isIDSelected(this._startIndex+i),1);
			}
		}

		__proto.renderItem=function(cell,index){
			if (index >=0 && index < this._array.length){
				cell.visible=true;
				cell.dataSource=this._array[index];
				this._$7_posCell(cell,index);
				}else {
				cell.visible=false;
				cell.dataSource=null;
			}
			this.event("render",[cell,index]);
			this.renderHandler && this.renderHandler.runWith([cell,index]);
		}

		__proto._$7_posCell=function(cell,cellIndex){
			if (!this._scrollBar)return;
			if (!this._isVertical)return;
			var lineX=(this._isVertical ? this.repeatX :this.repeatY);
			var lineY=(this._isVertical ? this.repeatY :this.repeatX);
			var pos=Math.floor(cellIndex / lineX)*this._cellSize;
			this._isVertical ? cell.y=pos :cell.x=pos;
		}

		__proto.getIndexByCell=function(cell){
			return this._array.indexOf(cell.dataSource);
		}

		__proto.clearSelect=function(autoChange){
			(autoChange===void 0)&& (autoChange=false);
			this._selectedIndex=-1;
			this._selectIndexs.length=0;
			if(autoChange){
				this.changeSelectStatus();
			}
		}

		__proto.switchSelect=function(index){
			var i=0;
			for(i=this._selectIndexs.length-1;i>=0;i--){
				if(index==this._selectIndexs[i]){
					this._selectIndexs.splice(i,1);
					this.changeSelectStatus();
					return;
				}
			}
			this._selectIndexs.push(index);
			this.changeSelectStatus();
		}

		__proto.addSelect=function(index){
			if(!this.isIDSelected(index)){
				this._selectIndexs.push(index);
			}
		}

		__getset(0,__proto,'selectedItem',function(){
			return _super.prototype._$get_selectedItem.call(this);
			},function(value){
			_super.prototype._$set_selectedItem.call(this,value);
		});

		__getset(0,__proto,'tSelectParent',function(){
			if(!this._selectIndexs||this._selectIndexs.length<1)return-1;
			var i=0,len=0;
			var item;
			return this.getParentByIndex(this._selectIndexs[0]);
		});

		__getset(0,__proto,'selectItems',function(){
			this._selectItems.length=0;
			var i=0,len=0;
			len=this._selectIndexs.length;
			for(i=0;i<len;i++){
				this._selectItems.push(this.getItem(this._selectIndexs[i]));
			}
			return this._selectItems;
		});

		__getset(0,__proto,'plainSelectItems',function(){
			this._plainSelectList.length=0;
			var selectList;
			selectList=this.selectItems;
			var i=0,len=0;
			len=selectList.length;
			var tItem;
			var tItemParent;
			for(i=0;i<len;i++){
				tItem=selectList[i];
				if(selectList.indexOf(tItem.parent)<0){
					this._plainSelectList.push(tItem);
				}
			}
			return this._plainSelectList;
		});

		__getset(0,__proto,'selectedIndex',function(){
			return _super.prototype._$get_selectedIndex.call(this);
			},function(value){
			this.clearSelect();
			this.addSelect(value);
			this._selectedIndex=-1;
			_super.prototype._$set_selectedIndex.call(this,value);
		});

		ListEx.dealAbcKey=function(keyCode,list){
			if(!list)return;
			var key;
			key=KeyManager.getCharByCode(keyCode);
			key=key.toLowerCase();
			var i=0,len=0;
			var startI=0;
			startI=list.selectedIndex;
			if(startI<0)startI=0;
			var arr;
			arr=list.array;
			len=arr.length;
			var tLabel;
			for(i=startI+1;i<len;i++){
				if(arr[i])
					tLabel=arr[i]["label"];
				if(tLabel&&tLabel.charAt(0).toLowerCase()==key){
					list.selectedIndex=i;
					return;
				}
			}
			for(i=0;i<len;i++){
				if(arr[i])
					tLabel=arr[i]["label"];
				if(tLabel&&tLabel.charAt(0).toLowerCase()==key){
					list.selectedIndex=i;
					return;
				}
			}
		}

		return ListEx;
	})(ListBase$1)


	/**
	*...
	*@author ww
	*/
	//class laya.ide.ui.TreeEx extends laya.ide.ui.NodeTree
	var TreeEx=(function(_super){
		function TreeEx(){
			TreeEx.__super.call(this);
		}

		__class(TreeEx,'laya.ide.ui.TreeEx',_super);
		var __proto=TreeEx.prototype;
		__proto.createChildren=function(){
			this.addChild(this._list=new ListEx());
			this._list.renderHandler=Handler.create(this,this.renderItem,null,false);
			this._list.repeatX=1;
			this._list.on("change",this,this.onListChange);
		}

		/**
		*更新项列表，显示指定键名的数据项。
		*@param key 键名。
		*/
		__proto.filter=function(key){
			if (Boolean(key)){
				var result=[];
				this.__getFilterSource(this._source,result,key);
				this._list.array=result;
				}else {
				this._list.array=this.getArray();
			}
		}

		/**
		*@private
		*获取数据源中指定键名的值。
		*/
		__proto.__getFilterSource=function(array,result,key){
			key=key.toLocaleLowerCase();
			var item;
			for(var $each_item in array){
				item=array[$each_item];
				if (!item.isDirectory && String(item.label).toLowerCase().indexOf(key)>-1){
					item.x=0;
					if(result.indexOf(item)<0)
						result.push(item);
				}
				if (item.child && item.child.length > 0){
					this.__getFilterSource(item.child,result,key);
				}
			}
		}

		__getset(0,__proto,'mList',function(){
			return this._list;
		});

		return TreeEx;
	})(NodeTree$1)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-12 下午2:46:09
	*/
	//class laya.rendercanvas.XMLEditorSprite extends laya.rendercanvas.IFrameSprite
	var XMLEditorSprite=(function(_super){
		function XMLEditorSprite(){
			this.contentWindow=null;
			this.codeStr="";
			this.editor=null;
			this.isOned=false;
			this.findStr=null;
			var _$this=this;
			XMLEditorSprite.__super.call(this);
			this.disableAutoControl=true;
			var me=this;
			this.div.addEventListener("load",function(){
				_$this.contentWindow=_$this.div.contentWindow;
				_$this.editor=_$this.contentWindow.editor;
				_$this.setCode(_$this.codeStr);
				_$this.find(_$this.findStr);
				if(!_$this.isOned){
					_$this.editor.getSession().on('change',function(e){
						me.event("txtchange");
					});
					_$this.editor.commands.addCommand({
						name:'myCommand',
						bindKey:{win:'Ctrl-S',mac:'Command-S'},
						exec:function (editor){
							me.event("editorsave");
						}
					});
				}
			},false);
			var path;
			path=FileManager.getAppPath("h5/plugin/ace/index.html");
			this.setUrl(path);
		}

		__class(XMLEditorSprite,'laya.rendercanvas.XMLEditorSprite',_super);
		var __proto=XMLEditorSprite.prototype;
		__proto.setCode=function(code){
			this.codeStr=code;
			if (this.editor){
				this.editor.setValue(code);
				this.editor.moveCursorTo(0);
			}
		}

		__proto.getCode=function(){
			return this.editor?this.editor.getValue():this.codeStr;
		}

		__proto.find=function(str){
			this.findStr=str;
			if(!str)return;
			if(this.editor){
				this.editor.find(str);
			}
		}

		__proto.select=function(start,end){
			if(!this.editor)return;
			var i;
			i={};
			i.start=start;
			i.end=end;
			this.editor.selection.setRange(i);
		}

		return XMLEditorSprite;
	})(IFrameSprite)


	/**提示框
	*@author yung
	*/
	//class laya.editor.comonents.Alert extends laya.editor.ui.comp.AlertUI
	var Alert=(function(_super){
		function Alert(){Alert.__super.call(this);;
		};

		__class(Alert,'laya.editor.comonents.Alert',_super);
		var __proto=Alert.prototype;
		__proto.start=function(msg,title){
			this.titleLbl.text=title;
			this.msgLbl.text=msg;
			this.popup();
		}

		__getset(1,Alert,'instance',function(){
			return Alert._instance?Alert._instance:Alert._instance=new Alert();
		},laya.editor.ui.comp.AlertUI._$SET_instance);

		Alert.show=function(msg,title){
			(title===void 0)&& (title="提示");
			if(title=="提示"){
				title=Sys.lang("提示");
			}
			if (SystemSetting.isCMDVer){
				console.log(msg,title);
				return;
			}
			Alert.instance.start(msg,title);
		}

		Alert._instance=null
		return Alert;
	})(AlertUI)


	/**确认框
	*@author yung
	*/
	//class laya.editor.comonents.Confirm extends laya.editor.ui.comp.ConfirmUI
	var Confirm=(function(_super){
		function Confirm(){
			this._handler=null;
			this._args=null;
			Confirm.__super.call(this);
			this.on("keydown",this,this.onKeyDown);
		}

		__class(Confirm,'laya.editor.comonents.Confirm',_super);
		var __proto=Confirm.prototype;
		__proto.start=function(msg,title,handler,args){
			this.titleLbl.text=title;
			this.msgLbl.text=msg;
			this._handler=handler;
			this._args=args;
			this.popup();
			KeyManager.setNewFocus(this);
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (this._handler !=null){
				var data=[type=="sure",type];
				this._handler.apply(null,this._args ? this._args.concat(data):data);
			}
			KeyManager.restoreFocus();
		}

		__proto.onKeyDown=function(e){
			switch(e.keyCode){
				case 13:
					this.close("sure");
					break ;
				case 27:
					this.close("cancel");
					break ;
				}
		}

		__getset(1,Confirm,'instance',function(){
			return Confirm._instance ? Confirm._instance :Confirm._instance=new Confirm();
		},laya.editor.ui.comp.ConfirmUI._$SET_instance);

		Confirm.show=function(msg,title,handler,args){
			Confirm.instance.start(msg,title,handler,args);
		}

		Confirm._instance=null
		return Confirm;
	})(ConfirmUI)


	/**等待提示框
	*@author yung
	*/
	//class laya.editor.comonents.Waiting extends laya.editor.ui.comp.WaitingUI
	var Waiting=(function(_super){
		function Waiting(){Waiting.__super.call(this);;
		};

		__class(Waiting,'laya.editor.comonents.Waiting',_super);
		var __proto=Waiting.prototype;
		__proto.start=function(msg,title){
			this.titleLbl.text=title;
			this.msgLbl.text=msg;
			this.popup();
		}

		__getset(1,Waiting,'instance',function(){
			return Waiting._instance ? Waiting._instance :Waiting._instance=new Waiting();
		},laya.editor.ui.comp.WaitingUI._$SET_instance);

		Waiting.show=function(msg,title){
			Waiting.instance.start(msg,title);
		}

		Waiting.hide=function(){
			Waiting.instance.close();
		}

		Waiting._instance=null
		return Waiting;
	})(WaitingUI)


	/**打包组件
	*@author yung
	*/
	//class laya.editor.view.other.BoxComp extends laya.editor.ui.other.BoxCompUI
	var BoxComp=(function(_super){
		function BoxComp(){BoxComp.__super.call(this);;
		};

		__class(BoxComp,'laya.editor.view.other.BoxComp',_super);
		var __proto=BoxComp.prototype;
		__proto.start=function(){
			this.popup();
			this.typeDrop.labels=ProjectSetting.boxTypes.join(",");
			this.typeDrop.selectedIndex=0;
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				var boxType=this.typeDrop.selectedLabel;
				if (Boolean(boxType)){
					UIPanel.instance.boxComp(boxType);
				}
			}
			UIPanel.instance.focusDesign();
			Notice$1.notify("Focus_design");
		}

		__getset(1,BoxComp,'instance',function(){
			return BoxComp._instance ? BoxComp._instance :BoxComp._instance=new BoxComp();
		},laya.editor.ui.other.BoxCompUI._$SET_instance);

		BoxComp._instance=null
		return BoxComp;
	})(BoxCompUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.other.ConvertProject extends laya.editor.ui.other.ConvertProjectUI
	var ConvertProject=(function(_super){
		function ConvertProject(){
			ConvertProject.__super.call(this);
			this.pathOldTxt.prompt=Sys.lang("原项目位置");
			this.pathTxt.prompt=Sys.lang("目标项目位置");
			this.browseBtn.on("click",this,this.onBrowseBtnClick);
			this.browseOldBtn.on("click",this,this.onOldBrowseBtnClick);
		}

		__class(ConvertProject,'laya.editor.view.other.ConvertProject',_super);
		var __proto=ConvertProject.prototype;
		__proto.onBrowseBtnClick=function(e){
			DialogTools.showOpenDir(Sys.lang("选择目标项目所在的位置"),Utils.bind(this.onFileSelect,this));
		}

		__proto.onFileSelect=function(files){
			if(files&&files[0])
				this.pathTxt.text=FileManager.adptToCommonUrl(files[0]);
		}

		__proto.onOldBrowseBtnClick=function(e){
			DialogTools.showOpenFile(Sys.lang("打开项目"),Utils.bind(this.onOldFileSelect,this),DialogTools.getOpenProO(Sys.lang("打开要转换的项目"),"morn"));
		}

		__proto.onOldFileSelect=function(files){
			if(files&&files[0])
				this.pathOldTxt.text=FileManager.adptToCommonUrl(files[0]);
		}

		__proto.start=function(){
			this.pathTxt.text="";
			this.popup();
		}

		__proto.close=function(type){
			if (type=="sure"){
				if(this.pathOldTxt.text==this.pathOldTxt.prompt){
					Alert.show(Sys.lang("请选择旧项目"));
					return;
				}
				if(this.pathTxt.text==this.pathTxt.prompt){
					Alert.show(Sys.lang("请选择目标项目"));
					return;
				}
				if(!FileTools.exist(this.pathOldTxt.text)){
					Alert.show(Sys.lang("旧项目不存在"));
					return;
				}
				if (Boolean(this.pathOldTxt.text)&& Boolean(this.pathTxt.text)){
					if (FileTools.exist(FileManager.getPath(this.pathTxt.text,"laya"))){
						Confirm.instance.start(Sys.lang("此目录已经有Laya项目了，确定覆盖掉吗？"),Sys.lang("是否覆盖"),Utils.bind(this.createProject,this));
						}else{
						this.createProject(true);
					}
					laya.ui.Dialog.prototype.close.call(this,type);
					}else {
					Alert.show(Sys.lang("项目名称及路径不能为空"));
				}
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__proto.createProject=function(sure){
			if (sure){
				ProjectConvertManager.convertProject(this.pathOldTxt.text,this.pathTxt.text);
			}
		}

		__getset(1,ConvertProject,'instance',function(){
			return ConvertProject._instance ? ConvertProject._instance :ConvertProject._instance=new ConvertProject();
		},laya.editor.ui.other.ConvertProjectUI._$SET_instance);

		ConvertProject._instance=null
		return ConvertProject;
	})(ConvertProjectUI)


	/**查找替换
	*@author yung
	*/
	//class laya.editor.view.other.FindAndReplace extends laya.editor.ui.other.FindAndReplaceUI
	var FindAndReplace=(function(_super){
		function FindAndReplace(){
			FindAndReplace.__super.call(this);
			this.findBtn.on("click",this,this.onFindBtnClick);
			this.replaceBtn.on("click",this,this.onReplaceBtnClick);
			this.list.on("doubleclick",this,this.onListDoubleClick);
		}

		__class(FindAndReplace,'laya.editor.view.other.FindAndReplace',_super);
		var __proto=FindAndReplace.prototype;
		__proto.initListener=function(){
			Notice$1.listen("findResRefer",this,this.start);
		}

		// list.doubleClickEnabled=true;
		__proto.onListDoubleClick=function(e){
			if(!this.list.array[this.list.selectedIndex])return;
			var path=this.list.array[this.list.selectedIndex].path;
			if (path){
				Notice$1.notify("openPAGE",[path]);
			}
		}

		__proto.onReplaceBtnClick=function(e){
			if (this.findTxt.text !="" && this.findTxt.text !=this.replaceTxt.text){
				if(PageManager.find(this.findTxt.text).length>0){
					Confirm.show(Sys.lang("你确定要将 [{0}] 替换为 [{1}] 吗？替换后不能直接恢复",this.findTxt.text,this.replaceTxt.text),Sys.lang("确定替换"),Utils.bind(this.onConfirmBack,this));
					}else{
					Alert.show(Sys.lang("未找到指定内容"));
				}
			}
		}

		__proto.onConfirmBack=function(sure){
			if (sure){
				var arr=PageManager.replace(new RegExp(this.findTxt.text,"g"),this.replaceTxt.text);
				this.list.array=arr;
				this.msgTxt.text=Sys.lang("共替换了 {0} 个页面，双击列表打开页面",arr.length);
			}
		}

		__proto.onFindBtnClick=function(e){
			if (this.findTxt.text !=""){
				this.doFind();
			}
		}

		__proto.doFind=function(){
			var arr=PageManager.find(this.findTxt.text);
			this.list.array=arr;
			if(arr.length>0){
				this.msgTxt.text=Sys.lang("共找到 {0} 个页面，双击列表打开页面",arr.length);
				}else{
				this.msgTxt.text=Sys.lang("共找到 {0} 个页面",arr.length);
			}
		}

		__proto.start=function(content){
			this.popup(true);
			this.msgTxt.text="";
			if(content){
				this.findTxt.text=content;
			}
			this.list.array=[];
		}

		__getset(1,FindAndReplace,'instance',function(){
			return FindAndReplace._instance ? FindAndReplace._instance :FindAndReplace._instance=new FindAndReplace();
		},laya.editor.ui.other.FindAndReplaceUI._$SET_instance);

		FindAndReplace._instance=null
		return FindAndReplace;
	})(FindAndReplaceUI)


	/**查找未被使用的资源
	*@author yung
	*/
	//class laya.editor.view.other.FindUnUsedRes extends laya.editor.ui.other.FindUnUsedResUI
	var FindUnUsedRes=(function(_super){
		function FindUnUsedRes(){
			this._arr=null;
			this.isCodeChange=false;
			FindUnUsedRes.__super.call(this);
			this.findBtn.on("click",this,this.onFindBtnClick);
			this.list.mouseHandler=new Handler(this,this.onList);
			this.delBtn.on("click",this,this.onDelBtnClick);
		}

		__class(FindUnUsedRes,'laya.editor.view.other.FindUnUsedRes',_super);
		var __proto=FindUnUsedRes.prototype;
		__proto.onDelBtnClick=function(e){
			if (this.getSelecteList().length > 0){
				Confirm.show(Sys.lang("你确定删除选中的资源吗(删除后可在垃圾箱内找回)"),Sys.lang("确定删除"),Utils.bind(this.onConfirmBack,this));
				}else{
				Alert.show(Sys.lang("还未选中任何资源，请重试"));
			}
		}

		__proto.getSelecteList=function(){
			var i=0,len=0;
			len=this._arr.length;
			var rst;
			rst=[];
			for(i=0;i<len;i++){
				if(this._arr[i].check.selected){
					rst.push(this._arr[i]);
				}
			}
			return rst;
		}

		__proto.onConfirmBack=function(sure){
			if (sure){
				var item;
				for(var $each_item in this._arr){
					item=this._arr[$each_item];
					if (item.check.selected){
						ResManager.removeRes(item.path);
					}
				}
				Notice$1.notify("FRESH_RES");
				this.onFindBtnClick(null);
			}
		}

		__proto.onList=function(e,index){
			if (e.type=="click"){
				if ((e.target instanceof laya.ui.CheckBox )){
					this._arr[index].check.selected=(e.target).selected;
					this.list.refresh();
					this.updateCheckStatu();
				}
			}
		}

		__proto.updateCheckStatu=function(){
			if(!this._arr)return;
			var i=0,len=0;
			len=this._arr.length;
			var selecteCount=0;
			selecteCount=0;
			for(i=0;i<len;i++){
				if(this._arr[i].check.selected){
					selecteCount++;
				}
			}
			this.isCodeChange=true;
			if(selecteCount==0){
				this.checkSelectAll.selected=false;
				}else{
				if(selecteCount==this._arr.length){
					this.checkSelectAll.selected=true;
				}
			}
			this.isCodeChange=false;
		}

		__proto.onCheckSelectAllChange=function(e){
			if(this.isCodeChange)return;
			var item;
			for(var $each_item in this._arr){
				item=this._arr[$each_item];
				if (Boolean(item.path)){
					item.check={selected:this.checkSelectAll.selected,visible:true};
					}else {
					item.check={selected:false,visible:false};
				}
			}
			this.list.array=this._arr;
		}

		__proto.onFindBtnClick=function(e){
			this.resultBox.visible=true;
			this._arr=ResManager.findUnUsed();
			this.msgTxt.text=Sys.lang("共找到 {0} 个资源",this._arr.length);
			this.checkSelectAll.selected=true;
			this.onCheckSelectAllChange(null);
			this.checkSelectAll.on("change",this,this.onCheckSelectAllChange);
		}

		__proto.start=function(){
			this.popup(true);
			this.resultBox.visible=false;
			this.checkSelectAll.off("change",this,this.onCheckSelectAllChange);
		}

		__getset(1,FindUnUsedRes,'instance',function(){
			return FindUnUsedRes._instance ? FindUnUsedRes._instance :FindUnUsedRes._instance=new FindUnUsedRes();
		},laya.editor.ui.other.FindUnUsedResUI._$SET_instance);

		FindUnUsedRes._instance=null
		return FindUnUsedRes;
	})(FindUnUsedResUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-5 下午8:42:38
	*/
	//class laya.editor.view.other.LangPanel extends laya.editor.ui.other.LangPanelUI
	var LangPanel=(function(_super){
		function LangPanel(){
			LangPanel.__super.call(this);
			this.langPathBtn.on("click",this,this.onLangPathBtnClick);
		}

		__class(LangPanel,'laya.editor.view.other.LangPanel',_super);
		var __proto=LangPanel.prototype;
		__proto.initListener=function(){
			Notice$1.listen("LangPanel",this,this.start);
		}

		__proto.start=function(){
			this.langPath.text="";
			this.popup();
		}

		__proto.onLangPathBtnClick=function(e){
			DialogTools.showOpenDir(Sys.lang("选择导出路径"),Utils$1.bind(this.onFileSelect4,this),FileManager.getWorkPath(ProjectSetting.resExportPath));
		}

		__proto.onFileSelect4=function(path){
			if (!path)return;
			this.langPath.text=path[0];
		}

		__proto.close=function(type){
			if (type=="sure"){
				if(this.langPath.text==""){
					Alert.show(Sys.lang("请选择导出路径"));
					}else{
					if(FileTools.exist(this.langPath.text)){
						LanguageManager.saveLanguagePack(this.langPath.text);
						laya.ui.Dialog.prototype.close.call(this,type);
						}else{
						Alert.show(Sys.lang("导出路径不存在"));
					}
				}
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,LangPanel,'instance',function(){
			return LangPanel._instance ? LangPanel._instance :LangPanel._instance=new LangPanel();
		},laya.editor.ui.other.LangPanelUI._$SET_instance);

		LangPanel._instance=null
		return LangPanel;
	})(LangPanelUI)


	/**预览
	*@author yung
	*/
	//class laya.editor.view.other.Preview extends laya.editor.ui.other.PreviewUI
	var Preview=(function(_super){
		function Preview(){
			Preview.__super.call(this);
		}

		__class(Preview,'laya.editor.view.other.Preview',_super);
		var __proto=Preview.prototype;
		__proto.start=function(xml){
			this.size(Laya.stage.width,Laya.stage.height);
			this.popup();
			this.panel.removeChildren();
			var view=new UIView();
			view.createView(Utils$1.clone(xml));
			var box=view.getChildAt(0);
			view.x=(this._width-view.width)*0.5;
			view.y=(this._height-view.height)*0.5;
			this.panel.addChild(view);
		}

		__getset(1,Preview,'instance',function(){
			return Preview._instance ? Preview._instance :Preview._instance=new Preview();
		},laya.editor.ui.other.PreviewUI._$SET_instance);

		Preview._instance=null
		return Preview;
	})(PreviewUI)


	/**重复创建组件
	*@author yung
	*/
	//class laya.editor.view.other.RepeatComp extends laya.editor.ui.other.RepeatCompUI
	var RepeatComp=(function(_super){
		function RepeatComp(){
			RepeatComp.__super.call(this);
			this.columnTxt.restrict=this.rowTxt.restrict="0-9";
			this.paddingYTxt.restrict=this.paddingXTxt.restrict="-.0-9";
		}

		__class(RepeatComp,'laya.editor.view.other.RepeatComp',_super);
		var __proto=RepeatComp.prototype;
		__proto.start=function(){
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				UIPanel.instance.repeatComp(LayaBuilder.mParseInt(this.rowTxt.text),LayaBuilder.mParseInt(this.columnTxt.text),LayaBuilder.mParseInt(this.paddingXTxt.text),LayaBuilder.mParseInt(this.paddingYTxt.text));
			}
			Notice$1.notify("Focus_design");
		}

		__getset(1,RepeatComp,'instance',function(){
			return RepeatComp._instance ? RepeatComp._instance :RepeatComp._instance=new RepeatComp();
		},laya.editor.ui.other.RepeatCompUI._$SET_instance);

		RepeatComp._instance=null
		return RepeatComp;
	})(RepeatCompUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-7-21 下午2:51:21
	*/
	//class laya.editor.view.other.SetIDE extends laya.editor.ui.other.SetIDEUI
	var SetIDE=(function(_super){
		function SetIDE(){
			SetIDE.__super.call(this);
		}

		__class(SetIDE,'laya.editor.view.other.SetIDE',_super);
		var __proto=SetIDE.prototype;
		__proto.initListener=function(){
			Notice$1.listen("OPEN_IDESETTING",this,this.start);
		}

		__proto.start=function(){
			this.showRule.selected=SystemSetting.ifShowRuleGrid;
			this.autoSwitch.selected=SystemSetting.toCodeModeWhenPublicEnd;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				SystemSetting.ifShowRuleGrid=this.showRule.selected;
				SystemSetting.toCodeModeWhenPublicEnd=this.autoSwitch.selected;
				Notice$1.notify("RULE_SHOW_CHANGE");
			}
		}

		__getset(1,SetIDE,'instance',function(){
			return SetIDE._instance ? SetIDE._instance :SetIDE._instance=new SetIDE();
		},laya.editor.ui.other.SetIDEUI._$SET_instance);

		SetIDE._instance=null
		return SetIDE;
	})(SetIDEUI)


	/**设置项目
	*@author yung
	*/
	//class laya.editor.view.other.SetProject extends laya.editor.ui.other.SetProjectUI
	var SetProject=(function(_super){
		function SetProject(){
			SetProject.__super.call(this);
			this.codeExportPathBtn.on("click",this,this.onCodeExportPathBtnClick);
			this.resExportPathBtn.on("click",this,this.onResExportPathBtnClick);
			this.resExportPathEBtn.on("click",this,this.onResExportPathEBtnClick);
			this.shareResPathBtn.on("click",this,this.onShareResPathBtnClick);
			this.langPathBtn.on("click",this,this.onLangPathBtnClick);
			this.codeType.on("change" ,this,this.onCodeTypeChange);
			this.uiType.labels=PageExportType.typeList.join(",");
		}

		__class(SetProject,'laya.editor.view.other.SetProject',_super);
		var __proto=SetProject.prototype;
		// uiType.labels="内嵌模式,加载模式";
		__proto.onCodeTypeChange=function(){
			this.updateCodeImportToUI();
		}

		__proto.updateCodeImportToUI=function(){
			switch(Math.ceil(this.codeType.selectedIndex)){
				case 0:
					this.codeImports.text=ProjectSetting.codeImports;
					break ;
				case 2:
				case 2:
					this.codeImports.text=ProjectSetting.codeImportsJS;
					break ;
				case 1:
					this.codeImports.text=ProjectSetting.codeImportsTS;
					break ;
				}
		}

		__proto.init=function(){
			ProjectSetting.adptPaths();
			this.resTypes.text=StringTool.trimSide(ProjectSetting.resTypes.toString());
			this.resExportPath.text=StringTool.trimSide(ProjectSetting.resExportPath);
			this.resExportPathE.text=StringTool.trimSide(ProjectSetting.asynResExportPath);
			this.codeExportPath.text=StringTool.trimSide(ProjectSetting.codeExportPath);
			this.uiType.selectedIndex=Math.ceil(ProjectSetting.uiType);
			this.codeType.selectedIndex=Math.ceil(ProjectSetting.codeType);
			this.picType.selectedIndex=Math.ceil(ProjectSetting.picType);
			this.uiExportPath.text=StringTool.trimSide(ProjectSetting.uiExportPath);
			this.boxTypes.text=StringTool.trimSide(ProjectSetting.boxTypes.toString());
			this.pageTypes.text=StringTool.trimSide(ProjectSetting.pageTypes.toString());
			this.defaultFont.text=StringTool.trimSide(ProjectSetting.defaultFont);
			this.textureWidth.text=StringTool.trimSide(ProjectSetting.textureWidth.toString());
			this.textureHeight.text=StringTool.trimSide(ProjectSetting.textureHeight.toString());
			this.picWidth.text=StringTool.trimSide(ProjectSetting.picWidth.toString());
			this.picHeight.text=StringTool.trimSide(ProjectSetting.picHeight.toString());
			this.power2.selected=StringTool.trimSide(ProjectSetting.power2)=="true";
			this.trimempty.selected=StringTool.trimSide(ProjectSetting.trimempty)=="true";
			this.updateCodeImportToUI();
			this.shareResPath.text=ProjectSetting.shareResPath;
			this.langPath.text=ProjectSetting.langPath;
		}

		__proto.start=function(){
			this.init();
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				ExportManager.configChanged=true;
				ProjectSetting.resTypes=this.resTypes.text.split(",");
				ProjectSetting.resExportPath=StringTool.trimSide(this.resExportPath.text);
				ProjectSetting.asynResExportPath=StringTool.trimSide(this.resExportPathE.text);
				ProjectSetting.codeExportPath=StringTool.trimSide(this.codeExportPath.text);
				ProjectSetting.uiType=this.uiType.selectedIndex;
				ProjectSetting.codeType=this.codeType.selectedIndex;
				ProjectSetting.picType=this.picType.selectedIndex;
				ProjectSetting.uiExportPath=this.uiExportPath.text;
				ProjectSetting.boxTypes=this.boxTypes.text.split(",");
				ProjectSetting.pageTypes=StringTool.trimSide(this.pageTypes.text).split(",");
				ProjectSetting.defaultFont=StringTool.trimSide(this.defaultFont.text);
				ProjectSetting.textureWidth=LayaBuilder.mParseInt(this.textureWidth.text);
				ProjectSetting.textureHeight=LayaBuilder.mParseInt(this.textureHeight.text);
				ProjectSetting.picWidth=LayaBuilder.mParseInt(this.picWidth.text);
				ProjectSetting.picHeight=LayaBuilder.mParseInt(this.picHeight.text);
				ProjectSetting.power2=this.power2.selected?"true":"false";
				ProjectSetting.trimempty=this.trimempty.selected?"true":"false";
				switch(Math.ceil(ProjectSetting.codeType)){
					case 0:
						ProjectSetting.codeImports=this.codeImports.text;
						break ;
					case 2:
					case 2:
						ProjectSetting.codeImportsJS=this.codeImports.text;
						break ;
					case 1:
						ProjectSetting.codeImportsTS=this.codeImports.text;
						break ;
					}
				ProjectSetting.shareResPath=this.shareResPath.text;
				ProjectSetting.langPath=this.langPath.text;
				ProjectSetting.adptPaths();
				ProjectManager.saveProject();
				RenderManager.I.setRenderPropByFont(ProjectSetting.defaultFont)
				LanguageManager.loadProjectLanguageFile();
			}
		}

		//UILibManager.reloadUILang();
		__proto.onResExportPathBtnClick=function(event){
			DialogTools.showOpenDir(Sys.lang("选择资源发布目录"),Utils.bind(this.onFileSelect1,this));
		}

		__proto.onFileSelect1=function(path){
			if (!path)return;
			this.resExportPath.text=FileManager.getWorkRelativePath(path[0]);
		}

		__proto.onResExportPathEBtnClick=function(event){
			DialogTools.showOpenDir(Sys.lang("选择页面发布目录"),Utils.bind(this.onFileSelect1E,this));
		}

		__proto.onFileSelect1E=function(path){
			if (!path)return;
			this.resExportPathE.text=FileManager.getWorkRelativePath(path[0]);
		}

		__proto.onCodeExportPathBtnClick=function(event){
			DialogTools.showOpenDir(Sys.lang("选择UI代码发布目录"),Utils.bind(this.onFileSelect2,this));
		}

		__proto.onFileSelect2=function(path){
			if (!path)return;
			this.codeExportPath.text=FileManager.getWorkRelativePath(path[0]);
		}

		__proto.onShareResPathBtnClick=function(event){
			var file=new File(FileManager.getWorkPath(ProjectSetting.shareResPath));
			DialogTools.showOpenDir(Sys.lang("选择多项目共用的资源目录"),Utils.bind(this.onFileSelect3,this));
		}

		__proto.onFileSelect3=function(path){
			if (!path)return;
			this.shareResPath.text=FileManager.getWorkRelativePath(path[0]);
		}

		__proto.onLangPathBtnClick=function(e){
			DialogTools.showOpenFile(Sys.lang("选择语言文件"),Utils.bind(this.onFileSelect4,this),DialogTools.getOpenProO(Sys.lang("打开语言包"),"*"),FileManager.getWorkPath(ProjectSetting.resExportPath));
		}

		__proto.onFileSelect4=function(path){
			if (!path)return;
			this.langPath.text=FileManager.getWorkRelativePath(path[0]);
		}

		__getset(1,SetProject,'instance',function(){
			return SetProject._instance ? SetProject._instance :SetProject._instance=new SetProject();
		},laya.editor.ui.other.SetProjectUI._$SET_instance);

		SetProject._instance=null
		return SetProject;
	})(SetProjectUI)


	/**添加目录
	*@author yung
	*/
	//class laya.editor.view.page.AddDirectory extends laya.editor.ui.page.AddDirectoryUI
	var AddDirectory=(function(_super){
		function AddDirectory(){AddDirectory.__super.call(this);;
		};

		__class(AddDirectory,'laya.editor.view.page.AddDirectory',_super);
		var __proto=AddDirectory.prototype;
		__proto.initListener=function(){
			Notice$1.listen("open_adddir",this,this.start);
		}

		__proto.start=function(){
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.nameTxt.text="";
			this.popup();
			this.nameTxt.focus=true;
		}

		__proto.close=function(type){
			if (type=="sure"){
				if (this.nameTxt.text){
					laya.ui.Dialog.prototype.close.call(this,type);
					Notice$1.notify("adddir",[this.nameTxt.text]);
					}else {
					Alert.show(Sys.lang("目录名称不能为空"));
				}
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,AddDirectory,'instance',function(){
			return AddDirectory._instance ? AddDirectory._instance :AddDirectory._instance=new AddDirectory();
		},laya.editor.ui.page.AddDirectoryUI._$SET_instance);

		AddDirectory._instance=null
		return AddDirectory;
	})(AddDirectoryUI)


	/**
	*...
	*@author yung
	*/
	//class laya.editor.view.page.AddDocument extends laya.editor.ui.page.AddDocumentUI
	var AddDocument=(function(_super){
		function AddDocument(){
			this.tipDic={};
			AddDocument.__super.call(this);
			this.tipDic[0]=Sys.lang("View为普通页面视图，使用之前需要预加载资源\nDialog为对话框，在View的基础上，增加弹出效果，拖动，关闭处理等逻辑");
			this.tipDic[1]=Sys.lang("重力模式为预设了重力参数的粒子效果\n半径模式为预设了半径参数的粒子效果\n粒子3D为3D的粒子效果");
			this.tipDic[2]=Sys.lang("GarphicAnimation为Graphics动画，比较高性能的动画系统，可以实现丰富动画效果\nEffectAnimation为特效模板动画，创建一个模板动画后，可以把模板动画拖动到UI的某个节点上，然后节点就获得这个动画效果");
			this.tipDic[3]=Sys.lang("扩展脚本为继承式扩展脚本描述，把此脚本拖动到UI的某个节点上，节点就会实例脚本类替换原来的类\n附加脚本为组件式扩展脚本描述，把此脚本拖动到UI的某个节点上，会把此节点作为target对象给脚本，由脚本进行控制\n区别：扩展脚本为继承脚本，比如继承Button类实现了MyButton类，扩展脚本为附加控制脚本类，此节点作为target对象给脚本，然后对target进行操作");
			this.tipImg.mouseEnabled=true;
			this.tab.selectHandler=Handler.create(this,this.selectedHandler,null,false);
		}

		__class(AddDocument,'laya.editor.view.page.AddDocument',_super);
		var __proto=AddDocument.prototype;
		__proto.selectedHandler=function(index){
			this.tipImg.toolTip=this.tipDic[index];
			this.views.setIndexHandler.runWith(index);
		}

		__proto.initListener=function(){
			Notice$1.listen("OPEN_ADDPage",this,this.start);
		}

		__proto.start=function(type){
			(type===void 0)&& (type=0);
			this.tab.selectedIndex=type;
			this.tipImg.toolTip=this.tipDic[type];
			for (var i=this.views.numChildren-1;i >-1;i--){
				var view=this.views.getChildAt(i);
				view.reset();
			}
			this.popup();
		}

		__proto.close=function(type){
			if (type=="sure"){
				var view=this.views.selection;
				if (view.check())laya.ui.Dialog.prototype.close.call(this,type);
				}else {
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,AddDocument,'instance',function(){
			return AddDocument._instance ? AddDocument._instance :AddDocument._instance=new AddDocument();
		},laya.editor.ui.page.AddDocumentUI._$SET_instance);

		AddDocument._instance=null
		return AddDocument;
	})(AddDocumentUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-2-23 上午11:34:50
	*/
	//class laya.editor.view.page.AddScene extends laya.editor.ui.page.AddSceneUI
	var AddScene=(function(_super){
		function AddScene(){
			AddScene.__super.call(this);
		}

		__class(AddScene,'laya.editor.view.page.AddScene',_super);
		var __proto=AddScene.prototype;
		__proto.initListener=function(){
			Notice$1.listen("OPEN_ADDSCENE",this,this.start);
		}

		__proto.start=function(){
			this.nameTxt.text="";
			this.popup();
			Laya.stage.focus=this.nameTxt.textField;
		}

		__proto.close=function(type){
			if (type=="sure"){
				Notice$1.notify("ADDSCENE",[this.nameTxt.text]);
			}
		}

		__getset(1,AddScene,'instance',function(){
			return AddScene._instance ? AddScene._instance :AddScene._instance=new AddScene();
		},laya.editor.ui.page.AddSceneUI._$SET_instance);

		AddScene._instance=null
		return AddScene;
	})(AddSceneUI)


	/**移动页面
	*@author yung
	*/
	//class laya.editor.view.page.MovePage extends laya.editor.ui.page.MovePageUI
	var MovePage=(function(_super){
		function MovePage(){
			this._oldFile=null;
			this._newFile=null;
			MovePage.__super.call(this);
		}

		__class(MovePage,'laya.editor.view.page.MovePage',_super);
		var __proto=MovePage.prototype;
		__proto.initListener=function(){
			Notice$1.listen("OPEN_MovePage",this,this.start);
		}

		__proto.start=function(oldFile,newFile){
			var oldPage=FileManager.getWorkRelativePath(oldFile.nativePath).replace("laya/pages/","").replace(".ui","");
			var newPage=FileManager.getWorkRelativePath(newFile.nativePath).replace("laya/pages/","").replace(".ui","");
			this.msgLbl.text=Sys.lang("确定移动页面{0}\n到{1}吗",oldPage,newPage);
			this.updateCheck.selected=true;
			this._oldFile=oldFile;
			this._newFile=newFile;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				Notice$1.notify("MovePage",[this._oldFile.nativePath,this._newFile.nativePath,this.updateCheck.selected]);
			}
		}

		__getset(1,MovePage,'instance',function(){
			return MovePage._instance ? MovePage._instance :MovePage._instance=new MovePage();
		},laya.editor.ui.page.MovePageUI._$SET_instance);

		MovePage._instance=null
		return MovePage;
	})(MovePageUI)


	/**需要保存
	*@author yung
	*/
	//class laya.editor.view.page.NeedSave extends laya.editor.ui.page.NeedSaveUI
	var NeedSave=(function(_super){
		function NeedSave(){
			this._ok=null;
			this._no=null;
			NeedSave.__super.call(this);
		}

		__class(NeedSave,'laya.editor.view.page.NeedSave',_super);
		var __proto=NeedSave.prototype;
		__proto.start=function(msg,ok,no){
			this.msgLbl.text=msg;
			this._ok=ok;
			this._no=no;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				if (this._ok !=null){
					this._ok.run();
				}
				}else if (type=="cancel"){
				if (this._no !=null){
					this._no.run();
				}
			}
		}

		__getset(1,NeedSave,'instance',function(){
			return NeedSave._instance ? NeedSave._instance :NeedSave._instance=new NeedSave();
		},laya.editor.ui.page.NeedSaveUI._$SET_instance);

		NeedSave._instance=null
		return NeedSave;
	})(NeedSaveUI)


	/**重命名页面
	*@author yung
	*/
	//class laya.editor.view.page.RenamePage extends laya.editor.ui.page.RenamePageUI
	var RenamePage=(function(_super){
		function RenamePage(){RenamePage.__super.call(this);;
		};

		__class(RenamePage,'laya.editor.view.page.RenamePage',_super);
		var __proto=RenamePage.prototype;
		__proto.initListener=function(){
			Notice$1.listen("OPEN_RENAME",this,this.start);
		}

		__proto.start=function(oldName){
			this.resLbl.text=oldName;
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.nameTxt.text="";
			this.updateCheck.selected=true;
			this.popup();
			Laya.stage.focus=this.nameTxt.textField;
		}

		__proto.close=function(type){
			if (type=="sure"){
				if(!StringTool.isOkFileName(this.nameTxt.text)){
					Alert.show(Sys.lang("文件名不合法"));
					return;
				}
				if(FileTools.isPathSame(this.nameTxt.text,this.resLbl.text)){
					Alert.show(Sys.lang("文件名不能相同！！"));
					return;
				}
				Notice$1.notify("RENAME_PAGE",[this.nameTxt.text,this.updateCheck.selected]);
				laya.ui.Dialog.prototype.close.call(this,type);
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,RenamePage,'instance',function(){
			return RenamePage._instance ? RenamePage._instance :RenamePage._instance=new RenamePage();
		},laya.editor.ui.page.RenamePageUI._$SET_instance);

		RenamePage._instance=null
		return RenamePage;
	})(RenamePageUI)


	/**设置页面默认属性
	*@author yung
	*/
	//class laya.editor.view.page.SetPageProp extends laya.editor.ui.page.SetPagePropUI
	var SetPageProp=(function(_super){
		function SetPageProp(){SetPageProp.__super.call(this);;
		};

		__class(SetPageProp,'laya.editor.view.page.SetPageProp',_super);
		var __proto=SetPageProp.prototype;
		__proto.initListener=function(){
			Notice$1.listen("OPEN_SEtPageProp",this,this.start);
		}

		__proto.start=function(path){
			path=FileManager.adptToCommonUrl(path);
			this.nameLbl.text=path;
			var props;
			props=PageStyleManager.getPageProps(path);
			props=ResStyleManager.getPropArrByPropStr(props).join("\n");
			this.propsTxt.text=props;
			this.packType.labels=Sys.lang("默认")+","+PageExportType.typeList.join(",");
			this.packType.selectedLabel=PageStyleManager.getPageExportType(path);
			this.popup();
			Laya.stage.focus=this.propsTxt.textField;
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				PageStyleManager.updatePageStyle(this.nameLbl.text,this.propsTxt.text,this.packType.selectedLabel);
				UIPanel.instance.refreshCurrView();
			}
		}

		__getset(1,SetPageProp,'instance',function(){
			return SetPageProp._instance ? SetPageProp._instance :SetPageProp._instance=new SetPageProp();
		},laya.editor.ui.page.SetPagePropUI._$SET_instance);

		SetPageProp._instance=null
		return SetPageProp;
	})(SetPagePropUI)


	/**添加页面
	*@author yung
	*/
	//class laya.editor.view.page.SetPage extends laya.editor.ui.page.SetPageUI
	var SetPage=(function(_super){
		function SetPage(){
			this._viewer=null;
			SetPage.__super.call(this);
			this.selectBtn.on("click",this,this.onSelectBtnClick);
		}

		__class(SetPage,'laya.editor.view.page.SetPage',_super);
		var __proto=SetPage.prototype;
		__proto.onSelectBtnClick=function(e){
			DialogTools.showOpenFile(Sys.lang("请选择视图参考图片"),Utils.bind(this.onSelected,this),DialogTools.imgFilterO);
		}

		__proto.onSelected=function(files){
			if(!files||!files[0])return;
			files[0]=FileManager.adptToCommonUrl(files[0]);
			this.imgTxt.text=files[0];
			Laya.loader.load(FileTools.getAbsPath(files[0]),Handler.create(this,this.picLoaded));
		}

		__proto.picLoaded=function(pic){
			this.widthTxt.text=pic.width+"";
			this.heightTxt.text=pic.height+"";
		}

		__proto.start=function(){
			if ((UIPanel.instance.currViewer instanceof laya.editor.view.UIViewer )){
				this._viewer=UIPanel.instance.currViewer;
				if(this._viewer.design.isAnimationMode){
					Alert.show(Sys.lang("动画编辑模式不可设置页面，请切换到非动画编辑模式切换"));
					return;
				};
				var xml=this._viewer.design.xml;
				var pageType;
				pageType=xml.type=StringTool.trimSide(xml.type);
				var labels;
				labels=ProjectSetting.getPageTypeLabel();
				if(labels.indexOf(pageType)<0){
					labels+=","+pageType;
				}
				this.typeDrop.labels=labels;
				if (this.typeDrop.selectedIndex==-1){
					this.typeDrop.selectedIndex=0;
				}
				this.typeDrop.selectedLabel=xml.type;
				this.nameTxt.text=FileManager.getFileName(this._viewer.pagePath);
				this.nameTxt.alpha=0.5;
				this.imgTxt.text=xml.props.sceneBg?xml.props.sceneBg:"";
				this.bgColorPicker.selectedColor=xml.props.sceneColor;
				var width=LayaBuilder.mParseInt(xml.props.width);
				if (width > 0){
					this.widthTxt.text=width+"";
					this.widthCheck.selected=false;
					}else {
					this.widthTxt.text=xml.props.sceneWidth?xml.props.sceneWidth:"";
					this.widthCheck.selected=true;
				};
				var height=LayaBuilder.mParseInt(xml.props.height);
				if (height > 0){
					this.heightTxt.text=height+"";
					this.heightCheck.selected=false;
					}else {
					this.heightTxt.text=xml.props.sceneHeight?xml.props.sceneHeight:"";
					this.heightCheck.selected=true;
				}
				this.popup();
			}
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				if (!Boolean(this.typeDrop.selectedLabel)){
					return Alert.show(Sys.lang("请选择页面类型"));
				};
				var xml=this._viewer.design.xml;
				var width=LayaBuilder.mParseInt(this.widthTxt.text);
				var height=LayaBuilder.mParseInt(this.heightTxt.text);
				var imgPath=FileManager.adptToCommonUrl(this.imgTxt.text);
				var bgColor=this.bgColorPicker.selectedColor;
				xml.type=this.typeDrop.selectedLabel;
				delete xml.props.width;
				delete xml.props.sceneWidth;
				if(this.widthTxt.text==""){
					}else{
					if (this.widthCheck.selected){
						xml.props.sceneWidth=width;
						}else {
						xml.props.width=width;
					}
				}
				delete xml.props.height;
				delete xml.props.sceneHeight;
				if(this.heightTxt.text==""){
					}else{
					if (this.heightCheck.selected){
						xml.props.sceneHeight=height;
						}else {
						xml.props.height=height;
					}
				}
				xml.props.sceneColor=bgColor;
				if (Boolean(imgPath)&&FileTools.exist(imgPath)){
					imgPath=PageManager.copyPageBg(this._viewer.pagePath,imgPath);
					xml.props.sceneBg=FileManager.adptToCommonUrl(imgPath);
					}else {
					delete xml.props.sceneBg;
				}
				this._viewer.design.change()
				this._viewer.design.refreshBg();
				Notice$1.notify("Focus_design");
			}
		}

		__getset(1,SetPage,'instance',function(){
			return SetPage._instance ? SetPage._instance :SetPage._instance=new SetPage();
		},laya.editor.ui.page.SetPageUI._$SET_instance);

		SetPage._instance=null
		return SetPage;
	})(SetPageUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-31 下午5:01:20
	*/
	//class laya.editor.view.page.MoveMultiPage extends laya.editor.ui.res.MoveResUI
	var MoveMultiPage=(function(_super){
		function MoveMultiPage(){
			this._files=null;
			this._tarDir=null;
			MoveMultiPage.__super.call(this);
		}

		__class(MoveMultiPage,'laya.editor.view.page.MoveMultiPage',_super);
		var __proto=MoveMultiPage.prototype;
		__proto.start=function(files,tarDir){
			this._files=files;
			this._tarDir=tarDir;
			var oldPage;
			if(this._files.length==1){
				oldPage=FileManager.getWorkRelativePath(this._files[0]).replace("laya/pages/","");
				}else{
				oldPage=Sys.lang("选中文件");
			};
			var newPage=FileManager.getWorkRelativePath(tarDir).replace("laya/pages/","");
			this.msgLbl.text=Sys.lang("确定移动{0}\n到{1}目录吗?",oldPage,newPage);
			this.updateCheck.selected=true;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				PagePanel.instance.moveFileList(this._files,this._tarDir,this.updateCheck.selected);
			}
		}

		__getset(1,MoveMultiPage,'instance',function(){
			return MoveMultiPage._instance ? MoveMultiPage._instance :MoveMultiPage._instance=new MoveMultiPage();
		},laya.editor.ui.res.MoveResUI._$SET_instance);

		MoveMultiPage._instance=null
		return MoveMultiPage;
	})(MoveResUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-31 下午5:01:20
	*/
	//class laya.editor.view.res.MoveMultiRes extends laya.editor.ui.res.MoveResUI
	var MoveMultiRes=(function(_super){
		function MoveMultiRes(){
			this._files=null;
			this._tarDir=null;
			MoveMultiRes.__super.call(this);
		}

		__class(MoveMultiRes,'laya.editor.view.res.MoveMultiRes',_super);
		var __proto=MoveMultiRes.prototype;
		__proto.start=function(files,tarDir){
			this._files=files;
			this._tarDir=tarDir;
			var oldPage;
			if(this._files.length==1){
				oldPage=FileManager.getWorkRelativePath(this._files[0]).replace("laya/assets/","");
				}else{
				oldPage=Sys.lang("选中文件");
			};
			var newPage=FileManager.getWorkRelativePath(tarDir).replace("laya/assets/","");
			this.msgLbl.text=Sys.lang("确定移动资源{0}\n到{1}目录吗?",oldPage,newPage);
			this.updateCheck.selected=true;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				ResPanel.instance.moveFileList(this._files,this._tarDir,this.updateCheck.selected);
			}
		}

		__getset(1,MoveMultiRes,'instance',function(){
			return MoveMultiRes._instance ? MoveMultiRes._instance :MoveMultiRes._instance=new MoveMultiRes();
		},laya.editor.ui.res.MoveResUI._$SET_instance);

		MoveMultiRes._instance=null
		return MoveMultiRes;
	})(MoveResUI)


	/**移动资源
	*@author yung
	*/
	//class laya.editor.view.res.MoveRes extends laya.editor.ui.res.MoveResUI
	var MoveRes=(function(_super){
		function MoveRes(){
			this._oldFile=null;
			this._newFile=null;
			MoveRes.__super.call(this);
		}

		__class(MoveRes,'laya.editor.view.res.MoveRes',_super);
		var __proto=MoveRes.prototype;
		__proto.start=function(oldFile,newFile){
			var oldPage=FileManager.getWorkRelativePath(oldFile.nativePath).replace("laya/assets/","");
			var newPage=FileManager.getWorkRelativePath(newFile.nativePath).replace("laya/assets/","");
			this.msgLbl.text=Sys.lang("确定移动资源{0}\n到{1}吗",oldPage,newPage);
			this.updateCheck.selected=true;
			this._oldFile=oldFile;
			this._newFile=newFile;
			this.popup();
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				ResPanel.instance.move(this._oldFile,this._newFile,this.updateCheck.selected);
			}
		}

		__getset(1,MoveRes,'instance',function(){
			return MoveRes._instance ? MoveRes._instance :MoveRes._instance=new MoveRes();
		},laya.editor.ui.res.MoveResUI._$SET_instance);

		MoveRes._instance=null
		return MoveRes;
	})(MoveResUI)


	/**重命名资源
	*@author yung
	*/
	//class laya.editor.view.res.RenameRes extends laya.editor.ui.res.RenameResUI
	var RenameRes=(function(_super){
		function RenameRes(){RenameRes.__super.call(this);;
		};

		__class(RenameRes,'laya.editor.view.res.RenameRes',_super);
		var __proto=RenameRes.prototype;
		__proto.start=function(oldName){
			this.resLbl.text=oldName;
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.nameTxt.text="";
			this.updateCheck.selected=true;
			this.updateCheck.visible=false;
			this.popup();
			Laya.stage.focus=this.nameTxt.textField;
		}

		__proto.close=function(type){
			if (type=="sure"){
				if(StringTool.isOkFileName(this.nameTxt.text)){
					if(FileTools.isPathSame(this.nameTxt.text,this.resLbl.text)){
						Alert.show(Sys.lang("文件名不能相同！！"));
						return;
					}
					ResPanel.instance.rename(this.nameTxt.text,this.updateCheck.selected);
					laya.ui.Dialog.prototype.close.call(this,type);
					}else{
					Alert.show(Sys.lang("文件名不合法"));
				}
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,RenameRes,'instance',function(){
			return RenameRes._instance ? RenameRes._instance :RenameRes._instance=new RenameRes();
		},laya.editor.ui.res.RenameResUI._$SET_instance);

		RenameRes._instance=null
		return RenameRes;
	})(RenameResUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-10-18 下午3:42:40
	*/
	//class laya.editor.view.res.SetDirProp extends laya.editor.ui.res.SetDirPropUI
	var SetDirProp=(function(_super){
		function SetDirProp(){
			this.path=null;
			SetDirProp.__super.call(this);
		}

		__class(SetDirProp,'laya.editor.view.res.SetDirProp',_super);
		var __proto=SetDirProp.prototype;
		__proto.start=function(path){
			this.path=path;
			this.nameLbl.text=path;
			this.packType.selectedIndex=ResStyleManager.getResPackType(path);
			this.popup();
			this.mouseThrough=true;
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				ExportManager.configChanged=true;
				ResStyleManager.updateResStyle(this.nameLbl.text,"",0,80,"",this.packType.selectedIndex,0);
				ResPanel.instance.refreshProp();
				Notice$1.notify("FRESH_CurView");
			}
		}

		__getset(1,SetDirProp,'instance',function(){
			return SetDirProp._instance ? SetDirProp._instance :SetDirProp._instance=new SetDirProp();
		},laya.editor.ui.res.SetDirPropUI._$SET_instance);

		SetDirProp._instance=null
		return SetDirProp;
	})(SetDirPropUI)


	/**资源属性设置
	*@author yung
	*/
	//class laya.editor.view.res.SetResProp extends laya.editor.ui.res.SetResPropUI
	var SetResProp=(function(_super){
		function SetResProp(){
			this.path=null;
			SetResProp.__super.call(this);
			this.sizeGridHandler=new Handler(this,this.sizeGridBack);
			this.setSizeGridBtn.on("click",this,this.onSetSizeGrid);
		}

		__class(SetResProp,'laya.editor.view.res.SetResProp',_super);
		var __proto=SetResProp.prototype;
		__proto.onSetSizeGrid=function(){
			SetSizeGrid.instance.start(this.path,this.typeDrop.selectedLabel,this.getSizeGridStr(),this.sizeGridHandler);
		}

		__proto.sizeGridBack=function(sizeGridStr){
			var propO;
			propO=ResStyleManager.getResPropsObjByPropStr(this.propsTxt.text,"\n");
			if(sizeGridStr==propO["sizeGrid"]||(sizeGridStr=="0,0,0,0"&&!propO["sizeGrid"]))return;
			propO["sizeGrid"]=sizeGridStr;
			this.propsTxt.text=ResStyleManager.getResPropStrByObj(propO,"\n");
		}

		__proto.start=function(path){
			this.path=path;
			this.nameLbl.text=path;
			this.typeDrop.labels=UIConfigManager.getCompNames().join(",");
			this.typeDrop.selectedLabel=ResStyleManager.getResCompType(path);
			var props;
			props=ResStyleManager.getPropArr(path).join("\n");
			this.packType.selectedIndex=ResStyleManager.getResPackType(path);
			this.picType.selectedIndex=ResStyleManager.getResPicType(path);
			this.propsTxt.text=props;
			this.popup();
			this.mouseThrough=true;
			Laya.stage.focus=this.propsTxt.textField;
		}

		__proto.getSizeGridStr=function(){
			var propO;
			propO=ResStyleManager.getResPropsObjByPropStr(this.propsTxt.text,"\n");
			if(propO["sizeGrid"]){
				return propO["sizeGrid"];
				}else{
				return "0,0,0,0";
			}
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				ExportManager.configChanged=true;
				var props=this.propsTxt.text.replace(/\r/g,"\n");
				ResStyleManager.updateResStyle(this.nameLbl.text,this.typeDrop.selectedLabel,0,80,props,this.packType.selectedIndex,this.picType.selectedIndex);
				ResPanel.instance.refreshProp();
				Notice$1.notify("FRESH_CurView");
			}
		}

		__getset(1,SetResProp,'instance',function(){
			return SetResProp._instance ? SetResProp._instance :SetResProp._instance=new SetResProp();
		},laya.editor.ui.res.SetResPropUI._$SET_instance);

		SetResProp._instance=null
		return SetResProp;
	})(SetResPropUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-5-31 下午3:16:40
	*/
	//class laya.editor.view.res.SetSizeGrid extends laya.editor.ui.res.SetSizeGridUI
	var SetSizeGrid=(function(_super){
		function SetSizeGrid(){
			this.txtList=null;
			this.tSizeGridStr=null;
			this.completeHandler=null;
			this.mPath=null;
			this.type=null;
			this.sData=null;
			this.hasFill=false;
			this.demo=null;
			this.sizeGridPanel=null;
			this.dataKeyList=["stateNum","clipX","clipY"];
			SetSizeGrid.__super.call(this);
			this.txtList=[this.upTxt,this.rightTxt,this.downTxt,this.leftTxt];
			this.sizeGridPanel=new SizeGridPanel();
			this.sizeGridPanel.left=5;
			this.sizeGridPanel.right=5;
			this.sizeGridPanel.top=5;
			this.sizeGridPanel.bottom=5;
			this.sizeGridPanel.on("change",this,this.changeFromSizeGridPanel);
			this.opRec.addChild(this.sizeGridPanel);
			var i=0,len=0;
			len=this.txtList.length;
			for(i=0;i<len;i++){
				this.addTxtChangeH(this.txtList[i],this.sizeGridTxtChange);
			}
		}

		__class(SetSizeGrid,'laya.editor.view.res.SetSizeGrid',_super);
		var __proto=SetSizeGrid.prototype;
		__proto.changeFromSizeGridPanel=function(sizeGridStr){
			this.updateSizeGridInfo(sizeGridStr);
		}

		__proto.addTxtChangeH=function(tar,fun){
			tar.editable=true;
			tar.disabled=false;
			tar.restrict="0-9.";
			tar.on("enter",this,fun);
			tar.on("blur",this,fun);
		}

		__proto.sizeGridTxtChange=function(){
			var arr;
			arr=[];
			var i=0,len=0;
			len=this.txtList.length;
			for(i=0;i<len;i++){
				if(this.txtList[i].text=="")this.txtList[i].text="0";
				arr.push(this.txtList[i].text);
			}
			if(this.hasFill)arr.push(1);
			this.updateSizeGridInfo(arr.join(","));
		}

		__proto.start=function(path,type,sizeGridStr,completeHandler,data){
			this.nameLbl.text=path;
			this.completeHandler=completeHandler;
			this.sData=data;
			if(!this.sData)this.sData={};
			var defaultO=ResStyleManager.getResPropsObj(path);
			var key;
			for(key in defaultO){
				if(!this.sData.hasOwnProperty(key)){
					this.sData[key]=defaultO[key];
				}
			}
			this.typeDrop.labels=UIConfigManager.getCompNames().join(",");
			this.typeDrop.selectedLabel=type;
			this.typeTxt.text=type;
			this.mPath=path;
			this.type=type;
			if(!sizeGridStr||sizeGridStr==""){
				sizeGridStr="0,0,0,0";
			}
			this.tSizeGridStr=sizeGridStr;
			this.reset();
			this.setUpView(path,type);
			this.updateSizeGridInfo(this.tSizeGridStr);
			this.popup();
		}

		__proto.fresh=function(){
			if(this.mPath){
				this.setUpView(this.mPath,this.type);
				this.updateSizeGridInfo(this.sizeGridPanel.tSizeGridStr);
			}
		}

		__proto.updateSizeGridInfo=function(sizeGridStr){
			if(!sizeGridStr){
				sizeGridStr="0,0,0,0";
			}
			this.tSizeGridStr=sizeGridStr;
			var nums;
			nums=sizeGridStr.split(",");
			var i=0,len=0;
			len=this.txtList.length;
			for(i=0;i<len;i++){
				this.txtList[i].text=nums[i];
			}
			this.hasFill=nums[4]?true:false;
			if(this.demo){
				this.demo["sizeGrid"]=sizeGridStr;
			}
			this.sizeGridPanel.setSizeGridStr(sizeGridStr);
		}

		__proto.reset=function(){
			if(this.demo)this.demo.removeSelf();
		}

		__proto.setUpView=function(path,type){
			var classObj=Utils$1.getClass(UIConfigManager.getCompProp(type,"className"));
			this.demo=new classObj();
			this.demoRec.addChild(this.demo);
			this.demo.left=20;
			this.demo.right=20;
			this.demo.top=20;
			this.demo.bottom=20;
			this.demo[UIConfigManager.getCompSkinLabel(type)]=path;
			this.sizeGridPanel.setUpView(path,type);
			this.insertData(this.demo);
			this.insertData(this.sizeGridPanel.tComp);
		}

		__proto.insertData=function(tar){
			if(!tar)return;
			var tdata=this.sData;
			if(!tdata)return;
			var i=0,len=0;
			var key;
			len=this.dataKeyList.length;
			for(i=0;i<len;i++){
				key=this.dataKeyList[i];
				if(tdata.hasOwnProperty(key)){
					tar[key]=tdata[key];
				}
			}
		}

		__proto.close=function(type){
			laya.ui.Dialog.prototype.close.call(this,type);
			if (type=="sure"){
				if(this.completeHandler){
					this.completeHandler.runWith(this.tSizeGridStr);
				}
			}
		}

		__getset(1,SetSizeGrid,'instance',function(){
			return SetSizeGrid._instance ? SetSizeGrid._instance :SetSizeGrid._instance=new SetSizeGrid();
		},laya.editor.ui.res.SetSizeGridUI._$SET_instance);

		SetSizeGrid._instance=null
		return SetSizeGrid;
	})(SetSizeGridUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.template.AddTemplate extends laya.editor.ui.template.AddTemplateUI
	var AddTemplate=(function(_super){
		function AddTemplate(){
			this._srcPath=null;
			AddTemplate.__super.call(this);
		}

		__class(AddTemplate,'laya.editor.view.template.AddTemplate',_super);
		var __proto=AddTemplate.prototype;
		__proto.initListener=function(){
			Notice$1.listen("open_AddParticle",this,this.start);
		}

		__proto.start=function(srcPath,templateName){
			(templateName===void 0)&& (templateName="template");
			if (this.typeDrop.selectedIndex==-1){
				this.typeDrop.selectedIndex=0;
			}
			this._srcPath=srcPath;
			this.nameTxt.restrict=StyleConsts$1.fileNameRestrict;
			this.nameTxt.text=templateName;
			this.popup();
			Laya.stage.focus=this.nameTxt.textField;
		}

		__proto.close=function(type){
			if (type=="sure"){
				if (!Boolean(this.typeDrop.selectedLabel)){
					return Alert.show(Sys.lang("请选择模板目录"));
				}
				if (!StringTool.isOkFileName(this.nameTxt.text)){
					return Alert.show(Sys.lang("模板名不合法"));
				}
				laya.ui.Dialog.prototype.close.call(this,type);
				TemplateManager.convertUIFileByPaths(this._srcPath,this.nameTxt.text,this.typeDrop.selectedLabel);
				}else{
				laya.ui.Dialog.prototype.close.call(this,type);
			}
		}

		__getset(1,AddTemplate,'instance',function(){
			return AddTemplate._instance ? AddTemplate._instance :AddTemplate._instance=new AddTemplate();
		},laya.editor.ui.template.AddTemplateUI._$SET_instance);

		AddTemplate._instance=null
		return AddTemplate;
	})(AddTemplateUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-11 上午10:33:13
	*/
	//class laya.ide.plugin.PluginDialog extends laya.editor.ui.other.PluginDialogUI
	var PluginDialog=(function(_super){
		function PluginDialog(){
			this.border=15;
			this.div=null;
			PluginDialog.__super.call(this);
			this.mouseEnabled=true;
		}

		__class(PluginDialog,'laya.ide.plugin.PluginDialog',_super);
		var __proto=PluginDialog.prototype;
		__proto.setTitle=function(str){
			this.title.text=str+"";
		}

		__proto.setContent=function(content){
			this.width=content.width+this.border*2;
			content.left=content.right=this.border;
			this.height=content.height+this.border*2+50;
			content.y=50;
			this.addChild(content);
			this._dragArea.setTo(0,0,this.width-40,50);
		}

		__proto.setHtmlContent=function(content){
			this.setContent(content);
			this.div=content.div;
		}

		return PluginDialog;
	})(PluginDialogUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-8-15 上午11:09:53
	*/
	//class laya.editor.view.BasicPanel extends laya.editor.ui.BasicPanelUI
	var BasicPanel=(function(_super){
		function BasicPanel(){
			this._resPath=null;
			this._refreshComplete=null;
			this._mouseIndex=0;
			this.isRefreshing=false;
			this._menu=null;
			this._mutiMenu=null;
			BasicPanel.__super.call(this);
			this.title=Sys.lang("组件");
			this.initPanel();
			this.resTree.spaceLeft=15;
			this.cacheAsBitmap=IDEConsts.cachePanels;
			this.init(FileManager.getAppPath("laya/basics/"));
			this.resTree.mList.mutiSelectEnable=false;
		}

		__class(BasicPanel,'laya.editor.view.BasicPanel',_super);
		var __proto=BasicPanel.prototype;
		// debugger;
		__proto.initListener=function(){
			Notice$1.listen("Open_BasicsPanel",this,LayoutRecManager.showPanelToStage,[laya.editor.view.BasicPanel.instance]);
		}

		/**刷新资源树*/
		__proto.init=function(resPath,complete){
			var force=false;
			force=this._resPath==resPath;
			this._resPath=resPath;
			this.refresh(complete,force);
		}

		__proto.onTreeMouse=function(e,index){
			var cell=this.resTree.list.getCell(index);
			var label=cell.getChildByName("label");
			if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if (e.type=="mouseout"){
				var item=cell.dataSource;
				if (!item)return;
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		__proto.selecteByFile=function(file){
			var arr;
			arr=this.resTree.source;
			this.parseOpen(arr,file.split("/"));
			this.resTree.fresh();
		}

		__proto.parseOpen=function(tree,arr){
			if(arr.length<1)return;
			var tStr=arr.shift();
			var i=0,len=0;
			len=tree.length;
			var tItem;
			for(i=0;i<len;i++){
				tItem=tree[i];
				if(tItem.label==tStr){
					if(arr.length>0){
						tItem.isOpen=true;
						this.resTree.fresh();
						this.parseOpen(tItem.childs,arr);
						}else{
						this.resTree.selectedItem=tItem;
					}
					return;
				}
			}
		}

		/**刷新*/
		__proto.refresh=function(refreshComplete,force){
			(force===void 0)&& (force=false);
			this.createComplete();
		}

		__proto.createComplete=function(){
			this.isRefreshing=false;
			if(!FileTools.exist(this._resPath))return;
			var arr;
			arr=FileTools.getFileTreeArr(this._resPath);
			var i=0,len=0;
			for(i=arr.length-1;i>=0;i--){
				if(FilterFuns.isSpecialRes(arr[i].path)){
					arr.splice(i,1);
				}
			}
			this.resTree.array=arr;
			if (this._refreshComplete !=null){
				this._refreshComplete.run();
				}else {
				MessageManager.instance.show(Sys.lang("资源刷新完毕"));
			}
		}

		__proto.initPanel=function(){
			this.resTree.array=[];
			this.resTree.on("rightclick",this,this.onResTreeRightMouseDown);
			this.resTree.mouseHandler=new Handler(this,this.onResTreeMouse);
			var menu=ContextMenu$1.createMenu("打开所在目录");
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
			this._mutiMenu=ContextMenu$1.createMenu("删除");
			this._mutiMenu.on("select",this,this.onEmunSelect);
			this.opBox.on("click",this,this.onOpBoxClick);
			this.resTree.renderHandler=new Handler(this,this.resTreeRender);
			this.resTree.on("keydown",this,this.onTreeKeyDown);
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
		}

		__proto.onOpBoxClick=function(e){
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "openDirBtn":
						this.openCurrDirectory();
						break ;
					case "refreshBtn":
						this.refresh();
						break ;
					}
			}
		}

		/**打开当前资源所在的文件夹*/
		__proto.openCurrDirectory=function(){
			FileTools.openItem(this.currDirectory);
		}

		__proto.openCurrPath=function(){
			var directory=this._resPath;
			if (this.resTree.selectedItem !=null){
				var path=this.resTree.selectedItem.path;
				FileTools.showItemInFolder(path);
				return;
			}
			FileTools.openItem(directory);
		}

		__proto.onEmunSelect=function(name){
			switch (name){
				case "打开所在目录":
					this.openCurrPath();
					break ;
				}
		}

		/**是否已经存在同路径文件*/
		__proto.hasFile=function(path){
			var arr=this.resTree.source;
			var item;
			for(var $each_item in arr){
				item=arr[$each_item];
				if (item.path==path){
					return true;
				}
			}
			return false;
		}

		__proto.onResTreeMouse=function(e,index){
			if (e.type=="mousedown"){
				Laya.stage.focus=this.resTree;
				this._mouseIndex=index;
				var clip=new Clip(SkinDefines.ResDragIcon,1,3);
				clip.index=2;
				if(this.resTree.mList.selectItems&&this.resTree.mList.selectItems.length>1){
					return;
				}
				if (this.resTree.array[index].isDirectory){
					}else {
					var asset=this.resTree.array[index].path;
					var compType=ResStyleManager.getResCompType(FileManager.getResRelativePath(asset));
					if(compType=="Script"){
						}else{
						asset="";
					}
					LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:"res",compType:compType,asset:asset},DragManager.dragOffset);
				}
			};
			var cell=this.resTree.list.getCell(index);
			var label=cell.getChildByName("label");
			if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if (e.type=="mouseout"){
				var item=cell.dataSource;
				if (!item)return;
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		__proto.onResTreeRightMouseDown=function(e){
			if(this.resTree.mList.selectItems&&this.resTree.mList.selectItems.length>1){
				return;
			};
			var comp=e.target.parent.parent;
			if (comp && comp.dataSource){
				this.resTree.selectedItem=comp.dataSource;
			}
			this._menu.show();
		}

		__proto.onResTreeDoubleClick=function(e){}
		/**页面快捷键*/
		__proto.onTreeKeyDown=function(e){}
		/**属性更改后，属性列表*/
		__proto.refreshProp=function(){
			this.resTree.array=this.resTree.array;
		}

		__proto.resTreeRender=function(cell,index){
			var item=cell.dataSource;
			if (item){
				var icon=cell.getChildByName("icon");
				var isDirectory=item.child || item.isDirectory;
				var label=cell.getChildByName("label");
				icon.width=StyleConsts$1.DisplayIconWidth;
				icon.height=StyleConsts$1.DisplayIconHeight;
				if (isDirectory){
					if(item.isOpen){
						icon.skin="view/folder_open.png";
						}else{
						icon.skin="view/folder_close.png";
					}
					label.color=StyleConsts$1.FolderTxtColor;
					}else {
					label.text=item.label;
					var compStr;
					compStr=FileManager.adptToCommonUrl(FileManager.getResRelativePath(item.path));
					label.color=StyleConsts$1.ItemTxtColor;
					var fName;
					fName=FileTools.getFileName(item.path);
					var compType=ResStyleManager.getResCompType(FileManager.getResRelativePath(item.path),false);
					if(compType=="Script"){
						label.text=item.label;
						}else{
						label.text=compType;
					}
					icon.skin=UIConfigManager.getCompTreeIcon(compType);
				}
			}
		}

		__getset(0,__proto,'visible',function(){
			return _super.prototype._$get_visible.call(this);
			},function(value){
			_super.prototype._$set_visible.call(this,value);
		});

		/**获取当前目录*/
		__getset(0,__proto,'currDirectory',function(){
			var directory=this._resPath;
			if (this.resTree.selectedItem !=null){
				var path=this.resTree.selectedItem.path;
				return FileTools.getFileDir(path);
			}
			return directory;
		});

		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			_super.prototype._$set_dataSource.call(this,value);
		});

		__getset(1,BasicPanel,'instance',function(){
			return BasicPanel._instance ? BasicPanel._instance :BasicPanel._instance=new BasicPanel();
		},laya.editor.ui.BasicPanelUI._$SET_instance);

		BasicPanel.EnableBasicPanel=true;
		BasicPanel._instance=null
		return BasicPanel;
	})(BasicPanelUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.DisplayTreePanel extends laya.editor.ui.DisplayTreePanelUI
	var DisplayTreePanel=(function(_super){
		function DisplayTreePanel(){
			this._mouseIndex=0;
			this._treeData=null;
			this._menu=null;
			this._mutiMenu=null;
			this._prefabMenu=null;
			this._aniNodeMenu=null;
			this._aniNodeMenuEdit=null;
			this.lockTips=["全部解锁","全部锁定"];
			this.hideTips=["全部隐藏","全部显示"];
			this.filterFun=null;
			DisplayTreePanel.__super.call(this);
			this.initPanel();
			this.cacheAsBitmap=IDEConsts.cachePanels;
			this.displayTree.mList.onlySameParentSelect=true;
			DisplayTreePanel.DragAddTypes["res"]=true;
			DisplayTreePanel.DragAddTypes["page"]=true;
			DisplayTreePanel.DragAddTypes["Props"]=true;
		}

		__class(DisplayTreePanel,'laya.editor.view.DisplayTreePanel',_super);
		var __proto=DisplayTreePanel.prototype;
		__proto.initListener=function(){
			Notice$1.listen("SHOW_DISPLAY_TREE",this,this.init);
		}

		__proto.init=function(data){
			if (!data){
				this.displayTree.array=[];
				this._treeData=null;
				return;
			}
			if (! (data instanceof laya.editor.core.design.TreeData )){
				return;
			}
			this._treeData=data;
			this.refresh();
		}

		__proto.initPanel=function(){
			this.displayTree.array=[];
			this.displayTree.on("doubleclick",this,this.onTreeDoubleClick);
			this.displayTree.on("rightclick",this,this.onTreeRightMouseDown);
			this.displayTree.mouseHandler=new Handler(this,this.onTreeMouse);
			this.displayTree.renderHandler=new Handler(this,this.treeRender);
			this.displayTree.mList.changeCellStateH=new Handler(this,this.changeCellHandler);
			var menu=ContextMenu$1.createMenuByArray2(["复制","粘贴","删除","","转换为容器","打散容器","","全部收起","全部展开","","Sprite节点","2D",ObjectTools.setValueArr([],TypeManager.Res2D),"Graphics",ObjectTools.setValueArr([],TypeManager.GraphicRes),"UI组件",ObjectTools.setValueArr([],TypeManager.UIRes)]);
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
			this._mutiMenu=ContextMenu$1.createMenuByArray2(["复制","删除","","转换为容器"]);
			this._mutiMenu.on("select",this,this.onEmunSelect);
			this._aniNodeMenu=ContextMenu$1.createMenuByArray2(["创建关键帧","","删除"]);
			this._aniNodeMenu.on("select",this,this.onEmunSelect);
			this._aniNodeMenuEdit=ContextMenu$1.createMenuByArray2(["复制","删除"]);
			this._aniNodeMenuEdit.on("select",this,this.onEmunSelect);
			this._prefabMenu=ContextMenu$1.createMenuByArray2(["复制","粘贴","删除","","切断预设","定位预设","","转换为容器","","Sprite节点","2D",ObjectTools.setValueArr([],TypeManager.Res2D),"Graphics",ObjectTools.setValueArr([],TypeManager.GraphicRes),"UI组件",ObjectTools.setValueArr([],TypeManager.UIRes)]);
			this._prefabMenu.on("select",this,this.onEmunSelect);
			this.on("click",this,this.onClick);
			this.fliterTxt.on("input",this,this.onFliterTxtChange);
			this.fliterTxt.color=StyleConsts$1.TextInputColor;
			this.opBox.name="opBox";
			this.opBox.on("click",this,this.onOpBoxClick);
			this.on("dragDrop",this,this.onTreeDragDrop);
			this.displayTree.on("keydown",this,this.onTreeKeyDown);
			this.clearSearchBtn.on("mousedown",this,this.onClearSearch);
		}

		__proto.onClearSearch=function(){
			if(this.fliterTxt.text!=""){
				this.fliterTxt.text="";
				this.onFliterTxtChange(null);
			}
		}

		/**页面快捷键*/
		__proto.onTreeKeyDown=function(e){
			if (!this._treeData)return;
			if(KeyManager.isABC(e.keyCode)){
				if(!e.ctrlKey){
					ListEx.dealAbcKey(e.keyCode,this.displayTree.list);
					this.noticeSelected();
				}
			}
			switch (e.keyCode){
				case 46:
					Notice$1.notify("DELETE_SELECTED");
					break ;
				case 37:
					this.displayTree.setItemState(this.displayTree.list.selectedIndex,false);
					break ;
				case 39:
					this.displayTree.setItemState(this.displayTree.list.selectedIndex,true);
					break ;
				case 38:
					if (KeyManager.I.isCommandKeyDown){
						IDEEvent.emitKeyEvent(40,true);
						}else if (this.displayTree.list.selectedIndex > 0){
						this.displayTree.list.selectedIndex--;
						this.noticeSelected();
					}
					break ;
				case 40:
					if (KeyManager.I.isCommandKeyDown){
						IDEEvent.emitKeyEvent(38,true);
						}else if (this.displayTree.list.selectedIndex < this.displayTree.list.length-1){
						this.displayTree.list.selectedIndex++;
						this.noticeSelected();
					}
					break ;
				}
		}

		__proto.noticeSelected=function(){
			if (this.displayTree.selectedItem){
				this.noticeDisplaySelect(this.displayTree.selectedItem.compId);
			}
		}

		__proto.onOpBoxClick=function(e){
			if (!this._treeData)return;
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "refreshBtn":
						this.refresh();
						MessageManager.instance.show(Sys.lang("层级列表刷新完毕"));
						break ;
					case "ifShowAll":
						this.switchHideAll(e.target);
						break ;
					case "ifLockAll":
						this.switchLockAll(e.target);
						break ;
					}
			}
		}

		__proto.switchLockAll=function(icon){
			var items;
			items=this.displayTree.source;
			icon.toolTip=this.lockTips[icon.index];
			icon.index=1-icon.index;
			this.setItemsValue(items,Signs.LockSign,icon.index==1);
		}

		__proto.switchHideAll=function(icon){
			var items;
			items=this.displayTree.source;
			icon.index=1-icon.index;
			icon.toolTip=this.hideTips[icon.index];
			this.setItemsValue(items,Signs.HideSign,icon.index==1);
		}

		__proto.onFliterTxtChange=function(e){
			this.displayTree.filter(this.fliterTxt.text);
		}

		/**双击*/
		__proto.onTreeDoubleClick=function(e){
			if (this.displayTree.selectedItem){
				Notice$1.notify("Display_Enter",[this.displayTree.selectedItem.compId]);
			}
		}

		__proto.onClick=function(e){
			var target=e.target;
			if (this.displayTree.list.content==target){
				this.displayTree.mList.clearSelect(true);
				Notice$1.notify("ClearDesignSelect",[true]);
			}
		}

		/**处理右键选择*/
		__proto.onTreeRightMouseDown=function(e){
			var comp=e.target;
			while (comp && !comp.dataSource){
				comp=comp.parent;
			}
			if (comp && comp.dataSource){
				}else{
				this.displayTree.mList.clearSelect(true);
			}
			if(this.displayTree.mList.selectItems&&this.displayTree.mList.selectItems.length>1){
				if(IDEVars.isAnimationEditMode)return;
				if(IDEVars.isGraphicAnimationMode){
					this._aniNodeMenuEdit.show();
					return;
				}
				this._mutiMenu.show();
				return;
			}
			if(this.displayTree.array&&this.displayTree.array.length>0){
				if (comp && comp.dataSource){
					this.displayTree.selectedItem=comp.dataSource;
					this.noticeSelected();
					Laya.timer.once(50,this,this.doPopItemMenuWork);
					}else{
					this.doPopItemMenuWork();
				}
			}
		}

		__proto.doPopItemMenuWork=function(){
			if(this.displayTree.selectedItem){
				if(IDEVars.isAnimationEditMode){
					this._aniNodeMenu.show();
					return;
				}
				if(this.displayTree.selectedItem.type==TypeManager.GraphicPic){
					this._aniNodeMenuEdit.show();
					return;
				}
				if(!FilterFuns.isEditorEnterAbleType(this.displayTree.selectedItem.type)){
					this._mutiMenu.show();
					return;
				}
				if(PreFabManager.I.isNodeHasPreFab(this.displayTree.selectedItem)){
					this._prefabMenu.show();
					return;
				}
			}
			if(IDEVars.isAnimationEditMode)return;
			this._menu.show();
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(name){
			if(!this._treeData)return;
			var target;
			if (this.displayTree.selectedItem){
				target=this.displayTree.selectedItem;
				}else {
				target=this._treeData.root;
			}
			if(TypeManager.isResTypeName(name)){
				Notice$1.notify("AddNode",[name,0,0,target.compId]);
				return;
			}
			switch (name){
				case "存储为预设":
					break ;
				case "创建关键帧":
					if(this.displayTree.selectedItem)
						Notice$1.notify("RECORD_KEYFRAME",[target.compId]);
					break ;
				case "全部收起":
					this.closeAllNode();
					break ;
				case "全部展开":
					this.openAllNode();
					break ;
				case "转换为容器":
					ShortcutManager.exeKey(66,true,false);
					break ;
				case "打散容器":
					ShortcutManager.exeKey(85,true,false);
					break ;
				case "删除":
					Notice$1.notify("DELETE_SELECTED");
					break ;
				case "切断预设":
					Notice$1.notify("CutOff_Prefab",[target.compId]);
					break ;
				case "定位预设":
					if(target&&target.props&&target.props.preset){
						var pPath=target.props.preset;
						pPath=StringTool.getReplace(pPath,"laya/assets/","");
						Notice$1.notify("SelecteResFile",[pPath]);
					}
					break ;
				case "粘贴":
					ShortcutManager.exeKey(86,true,false);
					break ;
				case "复制":
					ShortcutManager.exeKey(67,true,false);
					break ;
				case "Sprite节点":
					Notice$1.notify("AddNode",["Sprite",0,0,target.compId]);
					break ;
				}
		}

		/**打开当前页面所在的文件夹*/
		__proto.openCurrDirectory=function(){}
		//FileTools.openItem(currDirectory);
		__proto.changeCellHandler=function(cell,visable,index){
			var item=cell.dataSource;
			if (!item)return;
			var ifShow=cell.getChildByName("ifShow");
			var ifLock=cell.getChildByName("ifLock");
			var label=cell.getChildByName("label");
			var tDis=item;
			if (visable){
				ifShow.visible=ifLock.visible=true;
				label.color=StyleConsts$1.ItemSelectColor;
				this.updateLabelColor(label,tDis,StyleConsts$1.ItemSelectColor);
				}else {
				ifShow.visible=this.isHideChanged(tDis);
				ifLock.visible=this.isLockChanged(tDis);
				this.updateLabelColor(label,tDis);
			}
		}

		/**处理页面拖动*/
		__proto.onTreeMouse=function(e,index){
			this.onTreeMouseWork(e,index);
			return;
			if(Input.isInputting){
				this.callLater(this.onTreeMouseWork,[e,index]);
				}else{
				this.onTreeMouseWork(e,index);
			}
		}

		// callLater(onTreeMouseWork,[e,index]);
		__proto.onTreeMouseWork=function(e,index){
			var cell=this.displayTree.list.getCell(index);
			var item=cell.dataSource;
			if (!item)return;
			var ifShow=cell.getChildByName("ifShow");
			var ifLock=cell.getChildByName("ifLock");
			var label=cell.getChildByName("label");
			var tDis=item;
			if (e.type=="mousedown"){
				Laya.stage.focus=this.displayTree;
				this._mouseIndex=index;
				ifShow.visible=this.isHideChanged(tDis);
				ifLock.visible=this.isLockChanged(tDis);
				var clip=new Clip(SkinDefines.DisDragIcon,1,3);
				clip.index=2;
				var type="displayDrag";
				LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:type,target:cell,data:cell.dataSource},DragManager.dragOffset);
				ifShow.visible=ifLock.visible=true;
				label.color=StyleConsts$1.ItemSelectColor;
				this.updateLabelColor(label,tDis,StyleConsts$1.ItemSelectColor);
				if (this.displayTree.mList.selectItems.length > 1){
					Notice$1.notify("Display_multiSelected",[ObjectTools.getObjValues(this.displayTree.mList.selectItems,"compId")]);
					}else {
					if (this.displayTree.selectedItem){
						this.noticeDisplaySelect(this.displayTree.selectedItem.compId);
					}
				}
				}else if (e.type=="click"){
				if (this.displayTree.mList.selectItems.length > 1){
					Notice$1.notify("Display_multiSelected",[ObjectTools.getObjValues(this.displayTree.mList.selectItems,"compId")]);
					}else {
					if (this.displayTree.selectedItem){
						this.noticeDisplaySelect(this.displayTree.selectedItem.compId);
					}
				}
				}else if (e.type=="mouseover"){
				ifShow.visible=ifLock.visible=true;
				label.color=StyleConsts$1.ItemSelectColor;
				this.updateLabelColor(label,tDis,StyleConsts$1.ItemSelectColor);
				}else if (index==this.displayTree.selectedIndex){
				}else if (e.type=="mouseout"){
				ifShow.visible=this.isHideChanged(tDis);
				ifLock.visible=this.isLockChanged(tDis);
				this.updateLabelColor(label,tDis);
			}
		}

		// label.color=tDis.hasChild ? StyleConsts.FolderTxtColor :StyleConsts.ItemTxtColor;
		__proto.updateLabelColor=function(label,tDis,oColor){
			if(oColor){
				label.color=oColor;
				}else{
				label.color=tDis.hasChild ? StyleConsts$1.FolderTxtColor :StyleConsts$1.ItemTxtColor;
			}
			if(PreFabManager.I.isNodeHasPreFab(tDis)){
				label.color="#ffff00";
			}
		}

		__proto.noticeDisplaySelect=function(compId){
			Notice$1.notify("Display_selected",[compId,true,true]);
		}

		/**刷新*/
		__proto.refresh=function(){
			this.filterFun=FilterFuns.isEditorComp;
			if (UIPanel.instance.currViewer && UIPanel.instance.currViewer.design && UIPanel.instance.currViewer.design.isAnimationMode){
				this.displayTree.arrFilterFun=FilterFuns.getOnlyAnimationAbleNodes;
				}else {
				this.displayTree.arrFilterFun=null;
			}
			if(!this._treeData)return;
			this.displayTree.setTreeData(this._treeData);
		}

		__proto.selectByDis=function(sp){
			if (!sp)return;
			if (!this._treeData)return;
			var data;
			data=this._treeData.getNodeByID(sp["comXml"].compId);
			if (this.displayTree.selectedItem && data.compId==this.displayTree.selectedItem.compId)return;
			this.openParent(data);
			this.displayTree.refreshList();
			this.displayTree.mList.selectedIndex=this.getIndexByDis(data);
		}

		__proto.closeAllNode=function(){
			this.changeAllNodeOpenState(false);
		}

		__proto.openAllNode=function(){
			this.changeAllNodeOpenState(true);
		}

		__proto.changeAllNodeOpenState=function(isOpen){
			var nodeList;
			nodeList=this.displayTree.source;
			if(!nodeList)return;
			var i=0,len=0;
			len=nodeList.length;
			var tNode;
			for(i=0;i<len;i++){
				tNode=nodeList[i];
				if(tNode.isDirectory){
					tNode.isOpen=isOpen;
				}
			}
			this.displayTree.refreshList();
		}

		__proto.selectBySelectList=function(selectList){
			if (!this._treeData)return;
			if (!selectList || selectList.length < 1){
				this.displayTree.mList.clearSelect(true);
				return;
			};
			var i=0,len=0;
			len=selectList.length;
			var ids;
			ids=[];
			var data;
			var sp;
			for (i=0;i < len;i++){
				sp=selectList[i];
				data=this._treeData.getNodeByID(sp["comXml"].compId);
				if (!data)continue ;
				this.openParent(data);
				ids.push(this.getIndexByDis(data));
				this.displayTree.refreshList();
			}
			this.displayTree.mList.setSelectList(ids);
		}

		// displayTree.refreshList();
		__proto.getTreeIndexByDis=function(dis){
			var dataList;
			dataList=this.displayTree.source;
			var i=0,len=0;
			len=dataList.length;
			for (i=0;i < len;i++){
				if (dataList[i].compId==dis.compId){
					return i;
				}
			}
			return-1;
		}

		__proto.openParent=function(dis){
			if (!dis)return;
			var index=0;
			var parent=this._treeData.getNodeParent(dis);
			if (!parent)return;
			index=this.getTreeIndexByDis(parent);
			if (this.displayTree.source[index]){
				this.displayTree.source[index].isOpen=true;
				}else {
				return;
			}
			this.openParent(parent);
		}

		__proto.onTreeDragDrop=function(e){
			var tDragType;
			tDragType=DragManager.getDragType();
			var isDragAdd=false;
			if(DisplayTreePanel.DragAddTypes[tDragType]){
				isDragAdd=true;
				}else{
				if (!(DragManager.getDragType()=="displayDrag"))return;
			};
			var old;
			old=e.data.target;
			if(!isDragAdd){
				if (!old)return;
			};
			var target;
			var hitList;
			hitList=e.hitList;
			if (hitList.indexOf(old)>=0){
				if(!isDragAdd)
					return;
			};
			var i=0,len=0;
			len=hitList.length;
			var tIndex=0;
			for (i=0;i < len;i++){
				tIndex=this.displayTree.mList.getIndexByCell(hitList[i]);
				if (tIndex >=0){
					if (this.displayTree.mList.isIDSelected(tIndex)){
						if(!isDragAdd){
							return;
							}else{
							target=hitList[i];
						}
						}else {
						target=hitList[i];
						break ;
					}
				}
			};
			var relativePos;
			if (!target){
				target=this.displayTree.mList.getCellUnderMouse();
				if(target&&target.dataSource){
					relativePos="up"
					target=target.dataSource;
					}else{
					relativePos="center";
					target=this.displayTree.mList.getItem(0);
				}
				}else {
				relativePos=RelativePos.getDisMouseRelativePos(target,0.2);
				target=target.dataSource;
			}
			if(!target)return;
			if(!this.isContainer(target)){
				MessageManager.instance.show(Sys.lang("{0}不可创建子对象",target["type"]));
				return;
			}
			if(isDragAdd){
				if(tDragType=="Props"){
					AppendPropGroupTool.addAppendPropsToData(FileManager.getWorkRelativePath(e.data.asset),target);
					Notice$1.notify("Prop_Changed");
					PropPanel.instance.refresh();
					return;
				}
				if(relativePos=="out")return;
				var tAddParent;
				tAddParent=this._treeData.getNodeParent(target);
				tIndex=-1;
				if(tAddParent&&(relativePos=="up"||relativePos=="down")){
					tIndex=this._treeData.getChildIndex(target,tAddParent);
					if(tIndex>=0){
						if(relativePos=="up"){
							}else{
							tIndex++;
						}
						if(tIndex<0)tIndex=0;
						Notice$1.notify("Add_node_byDragDrop",[e,0,0,tAddParent["compId"],tIndex]);
					}
					return;
					}else{
					if(FilterFuns.isEditorEnterAbleType(target["type"])){
						Notice$1.notify("Add_node_byDragDrop",[e,0,0,target["compId"]]);
						}else{
						MessageManager.instance.show(Sys.lang("不可创建子对象",target["type"]));
					}
					return;
				}
				return;
			};
			var tarList;
			tarList=this.displayTree.mList.selectItems;
			var disList;
			disList=[];
			len=tarList.length;
			var hasNoGraphicNode=false;
			hasNoGraphicNode=false;
			for (i=0;i < len;i++){
				if (this._treeData.isInTree(tarList[i],target))return;
				disList.push(tarList[i]);
				if(!TypeManager.isGraphicCmdType(tarList[i].type))hasNoGraphicNode=true;
			}
			if(target["type"]=="Graphic"&&hasNoGraphicNode){
				MessageManager.instance.show(Sys.lang("不可创建非Graphic节点",target["type"]));
				return;
			}
			if(IDEVars.isAnimationEditMode){
				MessageManager.instance.show(Sys.lang("请退出编辑模式再调整层级"));
				return;
			}
			disList=disList.reverse();
			switch (relativePos){
				case "up":
					this._treeData.insertToTarParent(target,disList,false);
					break ;
				case "down":
					this._treeData.insertToTarParent(target,disList,true);
					break ;
				case "center":
				case "left":
				case "right":
					if (this.isContainer(target)){
						this._treeData.insertToParent(target,disList);
						}else {
						this._treeData.insertToTarParent(target,disList,true);
					}
					break ;
				};
			var dataList;
			dataList=this.displayTree.mList.array;
			var selectIds=[];
			len=dataList.length;
			for (i=0;i < len;i++){
				if (disList.indexOf(dataList[i])>=0){
					selectIds.push(i);
				}
			}
			this.displayTree.mList.setSelectList(selectIds);
			Notice$1.notify("Display_tree_change",null);
		}

		//Laya.timer.once(100,displayTree.mList,displayTree.mList.setSelectList,[selectIds]);
		__proto.treeRender=function(cell,index){
			var item=cell.dataSource;
			var tDis;
			tDis=item;
			if (item){
				var icon=cell.getChildByName("icon");
				var ifShow=cell.getChildByName("ifShow");
				var ifLock=cell.getChildByName("ifLock");
				var label=cell.getChildByName("label");
				icon.width=StyleConsts$1.DisplayIconWidth;
				icon.height=StyleConsts$1.DisplayIconHeight;
				this.updateLabelColor(label,tDis);
				ifShow.index=tDis[Signs.HideSign] ? 1 :0;
				ifLock.index=tDis[Signs.LockSign] ? 0 :1;
				ifShow.visible=this.isHideChanged(tDis)|| this.displayTree.selectedIndex==index;
				ifLock.visible=this.isLockChanged(tDis)|| this.displayTree.selectedIndex==index;
				cell.toolTip="ID:"+item.compId;
				if (!ifShow.hasListener("mousedown")){
					ifShow.on("mousedown",this,this.itemAction,null);
					cell.on("mousemove",this,this._$8_onMouseOver);
				}
				if (!ifLock.hasListener("mousedown")){
					ifLock.on("mousedown",this,this.itemAction,null);
				}
				icon.skin=UIConfigManager.getCompTreeIcon(item.type);
				cell.graphics.clear();
				var tColor;
				tColor=NodeAtlasManager.getNodeAtlasColor(tDis);
				if(tColor){
					cell.graphics.drawCircle(-5,12,3,tColor);
				}
			}
		}

		__proto.isUserChanged=function(dis){
			if (!dis[Signs.HideSign] && !dis[Signs.LockSign])return false;
			return true;
		}

		__proto.isHideChanged=function(dis){
			if (!dis[Signs.HideSign])return false;
			return true;
		}

		__proto.isLockChanged=function(dis){
			if (!dis[Signs.LockSign])return false;
			return true;
		}

		__proto._$8_onMouseOver=function(e){
			if (!DragManager.isDraging)return;
			var tDragType;
			tDragType=DragManager.getDragType();
			var isDragAdd=false;
			if(DisplayTreePanel.DragAddTypes[tDragType]){
				isDragAdd=true;
				}else{
				if (!(DragManager.getDragType()=="displayDrag"))return;
			};
			var target;
			target=e.target;
			var tIndex=0;
			tIndex=this.displayTree.mList.getIndexByCell(target);
			if (this.displayTree.mList.isIDSelected(tIndex)){
				FocusManager.clearFocus();
				return;
			}
			if (!target.dataSource)return;
			var type=RelativePos.getDisMouseRelativePos(target,0.2);
			var tparent;
			switch (type){
				case "up":
				case "down":
					FocusManager.showBorder(target,type,true,null,1);
					if (!target.dataSource)break ;
					tparent=this.getCellByDis(this._treeData.getNodeParent(target.dataSource));
					if (tparent)
						FocusManager.showFocus(tparent,1,false);
					break ;
				case "center":
				case "left":
				case "right":
					if (this.isContainer(target.dataSource)){
						FocusManager.showFocus(target,1);
						}else {
						FocusManager.showBorder(target,"down",true,null,1);
						if (!target.dataSource)break ;
						tparent=this.getCellByDis(this._treeData.getNodeParent(target.dataSource));
						if (tparent)
							FocusManager.showFocus(tparent,1,false);
					}
					break ;
				}
		}

		__proto.isContainer=function(data){
			var type;
			type=data.type;
			return FilterFuns.isEditorEnterAbleType(type);
			return ProjectSetting.isContainer(type);
		}

		__proto.getCellByDis=function(dis){
			if (!dis)return null;
			return this.displayTree.mList.getCell(this.getIndexByDis(dis));
		}

		__proto.getIndexByDis=function(dis){
			var dataList;
			dataList=this.displayTree.mList.array;
			var i=0,len=0;
			len=dataList.length;
			for (i=0;i < len;i++){
				if (dataList[i].compId==dis.compId){
					return i;
				}
			}
			return-1;
		}

		__proto.itemAction=function(e){
			var tClip;
			tClip=e.target;
			var tItem;
			tItem=(tClip.parent).dataSource;
			var tDis;
			tDis=tItem;
			var selectItems;
			selectItems=this.displayTree.mList.selectItems;
			if (selectItems.indexOf(tItem)>=0){
				e.stopPropagation();
				}else {
				this.displayTree.mList.selectedIndex=this.displayTree.mList.array.indexOf(tItem);
				selectItems=[tItem];
			}
			if (tClip.name=="ifShow"){
				this.setItemsValue(selectItems,Signs.HideSign,!tDis[Signs.HideSign]);
				}else if (tClip.name=="ifLock"){
				this.setItemsValue(selectItems,Signs.LockSign,!tDis[Signs.LockSign]);
			}
		}

		//tClip.index=1-tClip.index;
		__proto.setItemsValue=function(items,key,value){
			var i=0,len=0;
			len=items.length;
			var tItem;
			var tDis;
			for (i=0;i < len;i++){
				tItem=items[i];
				tDis=tItem;
				Notice$1.notify("display_value_changes",[tDis.compId,key,value]);
			}
			this.displayTree.mList.reRender();
		}

		/**获取当前目录*/
		__getset(0,__proto,'currDirectory',function(){
			return null;
		});

		__getset(1,DisplayTreePanel,'instance',function(){
			return DisplayTreePanel._instance ? DisplayTreePanel._instance :DisplayTreePanel._instance=new DisplayTreePanel();
		},laya.editor.ui.DisplayTreePanelUI._$SET_instance);

		DisplayTreePanel._instance=null
		DisplayTreePanel.DragAddTypes={};
		DisplayTreePanel.DisplayTreeItemEdgePercent=0.2;
		DisplayTreePanel.AnyItemContains=true;
		return DisplayTreePanel;
	})(DisplayTreePanelUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2016-6-12 上午11:57:15
	*/
	//class laya.editor.view.FramePropPanel extends laya.editor.ui.FramePropUI
	var FramePropPanel=(function(_super){
		function FramePropPanel(){
			this.preName=null;
			this.isSetting=false;
			this.fData=null;
			this.msRec=new Rectangle();
			FramePropPanel.__super.call(this);
			var changeTxtList;
			changeTxtList=[this.nameTxt,this.valueTxt,this.targetIDTxt,this.labelTxt];
			var i=0,len=0;
			len=changeTxtList.length;
			for(i=0;i<len;i++){
				DisTools.addTextChangeHandler(changeTxtList[i],this,this.txtChange,[changeTxtList[i]]);
			};
			var key;
			var easeCt;
			easeCt=Ease;
			var keys;
			keys=[];
			for(key in easeCt){
				if((typeof (easeCt[key])=='function')){
					FramePropPanel._tweenFunsDic[key]=true;
					keys.push(key);
				}
			}
			keys.sort();
			FramePropPanel._tweenListStr=keys.join(",");
			this.tweenSelect.labels=FramePropPanel._tweenListStr;
			this.tweenSelect.on("change",this,this.tweenMethodChange,null);
			this.targetIDTxt.restrict="0-9";
			this.nameTxt.restrict="0-9A-Za-z_";
			this.hasTween.on("change",this,this.hasTweenChange,null);
			this.setAnimationName("");
			this.clearData();
		}

		__class(FramePropPanel,'laya.editor.view.FramePropPanel',_super);
		var __proto=FramePropPanel.prototype;
		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.msRec.setTo(0,0,this.width,this.height);
			this.scrollRect=this.msRec;
		}

		__proto.initListener=function(){}
		__proto.setAnimationName=function(txt){
			if(txt==""){
				this.nameTxt.mouseEnabled=false;
				}else{
				this.nameTxt.mouseEnabled=true;
			}
			this.preName=this.nameTxt.text=txt;
		}

		__proto.hasTweenChange=function(){
			if(this.isSetting)return;
			if(!this.fData)return;
			this.fData.tween=this.hasTween.selected;
			this.freshTimeLinePanel();
			this.updatePanelState();
		}

		__proto.tweenMethodChange=function(){
			if(this.isSetting)return;
			if(!this.fData)return;
			this.fData.tweenMethod=this.tweenSelect.selectedLabel;
			this.freshTimeLinePanel();
		}

		__proto.freshTimeLinePanel=function(){
			TimeLinePanel.instance.reFresh();
		}

		__proto.txtChange=function(input){
			if(!this.fData&&input!=this.nameTxt)return;
			switch(input){
				case this.nameTxt:
					if(input.text==""){
						input.text=this.preName+"";
						}else{
						this.preName=input.text=TimeLinePanel.instance.changeAniName(StringTool.trimSide(input.text));
					}
					break ;
				case this.targetIDTxt:
					if(this.fData&&this.fData.target!=this.targetIDTxt.text){
						var newId=0;
						newId=parseInt(this.targetIDTxt.text);
						if(newId>0){
							TimeLinePanel.instance.changeNodeID(this.fData.target,newId);
							}else{
							this.targetIDTxt.text=this.fData.target+"";
						}
						this.fData.target=newId;
					}
					break ;
				case this.labelTxt:
					if(this.fData&&this.fData.label!=this.labelTxt.text){
						if(this.labelTxt.text==""){
							delete this.fData.label;
							}else{
							this.fData.label=this.labelTxt.text;
						}
						TimeLinePanel.instance.frameLabelChanged();
					}
					break ;
				}
		}

		__proto.setFrameData=function(frameData){
			this.isSetting=true;
			this.hasTween.visible=true;
			this.fData=frameData.props;
			this.keyTxt.text=this.fData.key+"";
			this.valueTxt.text=this.getAdptValue(this.fData.value);
			this.valueTxt.mouseEnabled=this.valueTxt.editable=false;
			this.hasTween.selected=this.fData.tween;
			if(!this.fData.tweenMethod||this.fData.tweenMethod==""){
				this.fData.tweenMethod="linearNone";
			}
			this.tweenSelect.selectedLabel=this.fData.tweenMethod;
			this.valueTxt.visible=this.keyTxt.visible=true;
			this.targetTxt.visible=this.targetIDTxt.visible=true;
			this.targetIDTxt.text=this.fData.target+"";
			this.updatePanelState();
			this.targetIDTxt.mouseEnabled=this.targetIDTxt.editable=false;
			this.labelTipTxt.visible=this.labelTxt.visible=true;
			this.labelTxt.text=this.fData.label?this.fData.label:"";
			this.isSetting=false;
		}

		__proto.setNoKeyFrameData=function(data){
			this.isSetting=true;
			this.fData=data;
			this.targetIDTxt.editable=false;
			this.keyTxt.text=this.fData.key+"";
			this.valueTxt.text=this.getAdptValue(this.fData.value);
			this.valueTxt.mouseEnabled=this.valueTxt.editable=false;
			this.valueTxt.visible=this.keyTxt.visible=true;
			this.tweenSelect.visible=this.tweenTip.visible=this.hasTween.visible=false;
			this.targetTxt.visible=this.targetIDTxt.visible=true;
			this.targetIDTxt.text=this.fData.target+"";
			this.targetIDTxt.mouseEnabled=this.targetIDTxt.editable=false;
			this.labelTipTxt.visible=this.labelTxt.visible=false;
			this.isSetting=false;
		}

		__proto.getAdptValue=function(value){
			if(value===undefined)return "";
			return value+"";
		}

		__proto.setNodeData=function(data){
			this.clearData();
			this.isSetting=true;
			this.fData=data;
			this.targetTxt.visible=this.targetIDTxt.visible=true;
			this.targetIDTxt.text=this.fData.target+"";
			this.targetIDTxt.mouseEnabled=this.targetIDTxt.editable=true;
			this.isSetting=false;
		}

		__proto.clearData=function(){
			this.fData=null;
			this.targetIDTxt.mouseEnabled=this.targetIDTxt.editable=false;
			this.targetTxt.visible=this.targetIDTxt.visible=false;
			this.valueTxt.visible=this.keyTxt.visible=this.tweenSelect.visible=this.tweenTip.visible=this.hasTween.visible=false;
			this.labelTipTxt.visible=this.labelTxt.visible=false;
		}

		__proto.updatePanelState=function(){
			if(!this.hasTween.selected){
				this.tweenSelect.visible=this.tweenTip.visible=false;
				}else{
				this.tweenSelect.visible=this.tweenTip.visible=true;
			}
		}

		__getset(1,FramePropPanel,'instance',function(){
			return FramePropPanel._instance ? FramePropPanel._instance :FramePropPanel._instance=new FramePropPanel();
		},laya.editor.ui.FramePropUI._$SET_instance);

		FramePropPanel._tweenFunsDic={};
		FramePropPanel._tweenListStr=null
		FramePropPanel._instance=null
		return FramePropPanel;
	})(FramePropUI)


	/**页面列表
	*@author yung
	*/
	//class laya.editor.view.PagePanel extends laya.editor.ui.PagePanelUI
	var PagePanel=(function(_super){
		function PagePanel(){
			this._pagePath=null;
			this._mouseIndex=0;
			this._menu=null;
			this._mutiMenu=null;
			this._copyFiles=null;
			PagePanel.__super.call(this);
			this.initPanel();
			this.pageTree.spaceLeft=15;
			this.pageTree.mList.onlySameParentSelect=true;
			this.cacheAsBitmap=IDEConsts.cachePanels;;
		}

		__class(PagePanel,'laya.editor.view.PagePanel',_super);
		var __proto=PagePanel.prototype;
		__proto.initListener=function(){
			Notice$1.listen("ADDPage",this,this.addPage);
			Notice$1.listen("ADDSCENE",this,this.addLayaScene);
			Notice$1.listen("AddParticle",this,this.addParticle);
			Notice$1.listen("addScript",this,this.addScript);
			Notice$1.listen("ADDTimeLineAnimation",this,this.addTimeLineAnimation);
			Notice$1.listen("FRESH_Page",this,this.refresh);
			Notice$1.listen("adddir",this,this.addDirectory);
			Notice$1.listen("MovePage",this,this.move);
			Notice$1.listen("RENAME_PAGE",this,this.rename);
		}

		__proto.init=function(pagePath){
			this._pagePath=pagePath;
			this.refresh();
		}

		__proto.initPanel=function(){
			this.pageTree.array=[];
			this.pageTree.on("doubleclick",this,this.onPageTreeDoubleClick);
			this.pageTree.on("keydown",this,this.onPageTreeKeyDown);
			this.pageTree.on("rightclick",this,this.onTreeRightMouseDown);
			this.pageTree.mouseHandler=new Handler(this,this.onPageTreeMouse);
			this.pageTree.renderHandler=new Handler(this,this.treeRender);
			var menu=ContextMenu$1.createMenu("打开","重命名","转为模板","Clone","设置默认属性","删除","","新建",["页面/场景","粒子","动画","脚本"],"新建目录","打开所在目录");
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
			this._mutiMenu=ContextMenu$1.createMenu("删除");
			this._mutiMenu.on("select",this,this.onEmunSelect);
			this.on("click",this,this.onClick);
			this.fliterTxt.on("input",this,this.onFliterTxtChange);
			this.fliterTxt.color=StyleConsts$1.TextInputColor;
			this.opBox.name="opBox";
			this.opBox.on("click",this,this.onOpBoxClick);
			this.on("dragDrop",this,this.onPageTreeDragDrop);
			this.clearSearchBtn.on("mousedown",this,this.onClearSearch);
		}

		__proto.onClearSearch=function(){
			if(this.fliterTxt.text!=""){
				this.fliterTxt.text="";
				this.onFliterTxtChange(null);
			}
		}

		__proto.onOpBoxClick=function(e){
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "setPropBtn":
						this.setPageDefaultProp();
						break ;
					case "openDirBtn":
						this.openCurrDirectory();
						break ;
					case "refreshBtn":
						this.refresh();
						break ;
					}
			}
		}

		__proto.onFliterTxtChange=function(e){
			this.pageTree.filter(this.fliterTxt.text);
		}

		/**页面快捷键*/
		__proto.onPageTreeKeyDown=function(e){
			if(KeyManager.isABC(e.keyCode)&&!KeyManager.I.isCommandKeyDown){
				ListEx.dealAbcKey(e.keyCode,this.pageTree.list);
			}
			switch(e.keyCode){
				case 46:
				case 8:
					this.deletePage();
					break ;
				case 113:
					this.checkRename();
					break ;
				case 37:
					this.pageTree.setItemState(this.pageTree.list.selectedIndex,false);
					break ;
				case 39:
					this.pageTree.setItemState(this.pageTree.list.selectedIndex,true);
					break ;
				case 38:
					if(this.pageTree.list.selectedIndex>0)
						this.pageTree.list.selectedIndex--;
					break ;
				case 40:
					if(this.pageTree.list.selectedIndex<this.pageTree.list.length-1)
						this.pageTree.list.selectedIndex++;
					break ;
				case 67:
					if(KeyManager.I.isCommandKeyDown){
						this.CopySelect();
					}
					break ;
				case 86:
					if(KeyManager.I.isCommandKeyDown){
						this.PasteFiles();
					}
					break ;
				}
		}

		__proto.CopySelect=function(){
			if(this.pageTree.mList.selectItems&&this.pageTree.mList.selectItems.length>0){
				this._copyFiles=Utils.copyArray([],this.pageTree.mList.selectItems);
			}
		}

		__proto.PasteFiles=function(){
			if(!this._copyFiles||this._copyFiles.length<1)return;
			var files=[];
			var i=0,len=0;
			len=this._copyFiles.length;
			var tarForder;
			tarForder=this.currDirectory;
			var tFile;
			for(i=0;i<len;i++){
				tFile=this._copyFiles[i].path;
				if(tarForder.indexOf(tFile)>=0){
					Alert.show(Sys.lang("不能复制到自己或子目录中"));
					return;
				}
				files.push(tFile);
			}
			len=files.length;
			for(i=0;i<len;i++){
				this.copyFileToDir(files[i],tarForder);
			}
			this.refresh();
		}

		/**删除页面*/
		__proto.deletePage=function(){
			if(this.pageTree.mList.selectItems&&this.pageTree.mList.selectItems.length>1){
				Confirm.show(Sys.lang("确定要删除所选的文件吗？(删除后可以在回收站里找回)"),Sys.lang("确定删除页面吗"),Utils.bind(this.delSelectItems,this));
				return;
			}
			if (this.pageTree.selectedItem !=null){
				var filePath=FileManager.getWorkRelativePath(this.pageTree.selectedPath).replace("laya/pages/","").replace(".ui","");
				var type=this.pageTree.selectedItem.isDirectory ? Sys.lang("目录"):Sys.lang("页面");
				Confirm.show(Sys.lang("确定要删除{0}({1})吗？(删除后可以在回收站里找回)",type,filePath),Sys.lang("确定删除页面吗"),Utils.bind(this.delBack,this));
			}
		}

		__proto.delSelectItems=function(sure){
			if (sure){
				var selectList;
				selectList=this.pageTree.mList.plainSelectItems;
				var i=0,len=0;
				len=selectList.length;
				for(i=0;i<len;i++){
					FileManager.removeFile(selectList[i].path);
				}
				this.pageTree.mList.clearSelect();
				this.refresh();
			}
			Laya.stage.focus=this.pageTree;
		}

		/**处理页面删除*/
		__proto.delBack=function(sure){
			if (sure){
				var path=this.pageTree.selectedPath;
				FileManager.removeFile(path);
				var codePath=CodeManager.getCodePath(path);
				FileManager.removeFile(codePath);
				this.refresh();
				Notice$1.notify("closePage",[path]);
			}
			Laya.stage.focus=this.pageTree;
		}

		/**双击打开页面*/
		__proto.onPageTreeDoubleClick=function(e){
			if (e.target.parent==this.pageTree.list.content && this.pageTree.selectedItem){
				var path;
				path=this.pageTree.selectedItem.path;
				if (FileTools.exist(path)){
					if(FileTools.isDirectory(path)){
						this.pageTree.selectedItem.isOpen=!this.pageTree.selectedItem.isOpen;
						this.pageTree.fresh();
						}else{
						Notice$1.notify("openPAGE",[path]);
					}
				}
			}
		}

		__proto.onClick=function(e){
			var target=e.target;
			if (!DisControlTool.isChildE(this,target)||target==this.pageTree.mList.content){
				this.pageTree.selectedIndex=-1;
				this.pageTree.mList.clearSelect(true);
			}
		}

		/**处理右键选择*/
		__proto.onTreeRightMouseDown=function(e){
			if(this.pageTree.mList.selectItems&&this.pageTree.mList.selectItems.length>1){
				this._mutiMenu.show();
				return;
			};
			var comp=e.target;
			while (comp && !comp.dataSource){
				comp=comp.parent;
			}
			if (comp && comp.dataSource){
				this.pageTree.selectedItem=comp.dataSource;
				}else{
				this.pageTree.selectedItem=null;
			}
			this._menu.show(Laya.stage.mouseX,Laya.stage.mouseY);
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(name){
			switch (name){
				case "打开":
					if (this.pageTree.selectedItem){
						if(this.pageTree.selectedItem.isDirectory==false){
							Notice$1.notify("openPAGE",[this.pageTree.selectedPath]);
							}else{
							this.openCurrDirectory();
						}
					}
					break ;
				case "重命名":
					this.checkRename();
					break ;
				case "转为模板":
					this.changeUIToTemplate();
					break ;
				case "Clone":
					this.cloneFile();
					break ;
				case "删除":
					this.deletePage();
					break ;
				case "设置默认属性":
					this.setPageDefaultProp();
					break ;
				case "页面/场景":
					Notice$1.notify("OPEN_ADDPage",0);
					break ;
				case "粒子":
					Notice$1.notify("OPEN_ADDPage",1);
					break ;
				case "动画":
					Notice$1.notify("OPEN_ADDPage",2);
					break ;
				case "脚本":
					Notice$1.notify("OPEN_ADDPage",3);
					break ;
				case "新建目录":
					Notice$1.notify("open_adddir");
					break ;
				case "打开所在目录":
					this.openCurrPath();
					break ;
				}
		}

		/**打开当前页面所在的文件夹*/
		__proto.openCurrDirectory=function(){
			FileTools.openItem(this.currDirectory);
		}

		__proto.getSelectFiles=function(){
			var i=0,len=0;
			var selectList;
			selectList=this.pageTree.mList.selectItems;
			len=selectList.length;
			var fileList;
			fileList=[];
			var tFile;
			for(i=0;i<len;i++){
				tFile=selectList[i].path;
				fileList.push(tFile);
			}
			return fileList;
		}

		/**处理页面拖动*/
		__proto.onPageTreeMouse=function(e,index){
			var cell=this.pageTree.list.getCell(index);
			if(!cell)return;
			var label=cell.getChildByName("label");
			if (e.type=="mousedown"){
				Laya.stage.focus=this.pageTree;
				this._mouseIndex=index;
				var clip=new Clip(SkinDefines.PageDragIcon,1,3);
				clip.index=2;
				if(this.pageTree.mList.selectItems&&this.pageTree.mList.selectItems.length>1){
					LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:"multiPageFile",fileList:this.getSelectFiles()},DragManager.dragOffset);
					return;
				};
				var type=this.pageTree.array[index].isDirectory ? "pageDir" :"page";
				var path;
				path=this.pageTree.array[index].path;
				var compType;
				var asset;
				asset=path;
				var sType;
				if(type=="page"){
					var pageType;
					pageType=TypeManager.getFileType(path);
					switch(pageType){
						case "prop":
							type="Props";
							break ;
						case "graphic_animation":
							type="res";
							compType="Animation";
							sType="page";
							asset=FileManager.getResPath(FileManager.getRelativePath(SystemSetting.pagesPath,path));
							break ;
						case "MoveEffect":
							type="res";
							compType="EffectAnimation";
							sType="page";
							asset=FileManager.getResPath(FileManager.getRelativePath(SystemSetting.pagesPath,path));
							break ;
						}
				}
				LayaBuilder.drag.doDrag(e.currentTarget ,clip,{type:type,sType:sType,path:path,asset:asset,compType:compType},DragManager.dragOffset);
			}else
			if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if (e.type=="mouseout"){
				var item=cell.dataSource;
				if (!item)return;
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		/**刷新*/
		__proto.refresh=function(alertMsg){
			(alertMsg===void 0)&& (alertMsg=true);
			var arr;
			arr=FileTools.getFileTreeArr(this._pagePath);
			var i=0,len=0;
			for(i=arr.length-1;i>=0;i--){
				if(FilterFuns.isSpecialRes(arr[i].path)){
					arr.splice(i,1);
				}
			}
			this.pageTree.array=arr;
			if(alertMsg){
				MessageManager.instance.show(Sys.lang("页面刷新完毕"));
			}
		}

		/**是否已经存在同路径文件*/
		__proto.hasFile=function(path){
			var arr=this.pageTree.source;
			var item;
			for(var $each_item in arr){
				item=arr[$each_item];
				if (item.path==path){
					return true;
				}
			}
			return false;
		}

		__proto.openCurrPath=function(){
			var directory=this._pagePath;
			if (this.pageTree.selectedItem !=null){
				var path=this.pageTree.selectedItem.path;
				FileTools.showItemInFolder(path);
				return;
			}
			FileTools.openItem(directory);
		}

		/**增加目录*/
		__proto.addDirectory=function(name){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建目录名称不能为空"));
			};
			var path=FileManager.getPath(this.currDirectory,name);
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经此名字的目录了，请换个名字试试"),Sys.lang("命名重复"));
			}
			FileManager.createDirectory(path);
			this.refresh();
		}

		__proto.addScene=function(name){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建场景名称不能为空"));
			};
			var path=FileManager.getPath(this.currDirectory,name+"."+TypeManager.getExtension("scene"));
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的场景了，请换个名字试试"),Sys.lang("命名重复"));
			};
			var data;
			data={};
			data.type="scene";
			FileManager.createJSONFile(path,data);
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		/**
		*添加时间轴动画
		*@param type
		*@param name
		*@param imgPath
		*@param width
		*@param height
		*@param bgColor
		*@param isSceneWidth
		*@param isSceneHeight
		*
		*/
		__proto.addTimeLineAnimation=function(type,name,imgPath,width,height,bgColor,isSceneWidth,isSceneHeight){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建页面名称不能为空"));
			};
			var path=FileManager.getPath(this.currDirectory,name+".ani");
			var rootType="View";
			if(type=="GraphicAnimation"){
				rootType="View";
				path=FileManager.getPath(this.currDirectory,name+"."+TypeManager.getExtension("graphic_animation"));
			}
			if(type=="EffectAnimation"){
				rootType="View";
				path=FileManager.getPath(this.currDirectory,name+"."+TypeManager.getExtension("MoveEffect"));
			}
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			};
			var xml;
			xml={
				type:rootType,
				child:[],
				props:{}
			};
			if (isSceneWidth){
				xml.props.sceneWidth=width;
			}
			else{
				xml.props.width=width;
			}
			if (isSceneHeight){
				xml.props.sceneHeight=height;
			}
			else{
				xml.props.height=height;
			}
			xml.props.sceneColor=bgColor;
			if (Boolean(imgPath)){
				xml.props.sceneBg=PageManager.copyPageBg(path,imgPath);
			}
			this.save(path,xml);
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		__proto.addParticle=function(type,name){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建页面名称不能为空"));
			};
			var oPath;
			var isGravity=false;
			isGravity=type.indexOf(PageExportType.ParticleGravity)>=0;
			var is3D=false;
			is3D=type.indexOf(PageExportType.Particle3D)>=0;
			if (isGravity){
				oPath=FileManager.getAppPath("laya/tpls/particle.json");
			}
			else{
				oPath=FileManager.getAppPath("laya/tpls/particle1.json");
			}
			if(is3D){
				oPath=FileManager.getAppPath("laya/tpls/particle3d.json");
			};
			var path;
			var extension;
			extension=is3D?TypeManager.getExtension("particle3D"):TypeManager.getExtension("particle");
			if(type=="PolyEmitter"){
				oPath=FileManager.getAppPath("laya/tpls/particlepoly.json");
				extension=TypeManager.getExtension("particlepoly");
			}
			path=FileManager.getPath(this.currDirectory,name+"."+extension);
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			}
			FileManager.copyFile(oPath,path);
			var texturePath=SystemSetting.assetsPath+"/"+"texture.png";
			if (!FileTools.exist(texturePath)){
				FileManager.copyFile(FileManager.getAppPath("laya/tpls/texture.png"),texturePath);
				Notice$1.notify("FRESH_RES");
			}
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		__proto.addLayaScene=function(type,name,imgPath,width,height,bgColor,isSceneWidth,isSceneHeight){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建页面名称不能为空"));
			};
			var path=FileManager.getPath(this.currDirectory,name+"."+TypeManager.getExtension("scene"));
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			};
			var xml;
			xml={
				type:type,
				child:[],
				props:{}
			};
			if (isSceneWidth){
				xml.props.sceneWidth=width;
			}
			else{
				xml.props.width=width;
			}
			if (isSceneHeight){
				xml.props.sceneHeight=height;
			}
			else{
				xml.props.height=height;
			}
			xml.props.sceneColor=bgColor;
			if (Boolean(imgPath)){
				xml.props.sceneBg=FileManager.adptToCommonUrl(PageManager.copyPageBg(path,imgPath));
			}
			this.save(path,xml);
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		/**增加页面*/
		__proto.addScript=function(type,name,className){
			var suffix=type==0?".prop":".script";
			var path=FileManager.getPath(this.currDirectory,name+suffix);
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			};
			var str='<'+name+' className="'+className+'">'
			+'\n	<!--<prop name="xxx" tips="数字类型" type="number"/>'
			+'\n	<prop name="xxx" tips="整数类型" type="int"/>'
			+'\n	<prop name="xxx" tips="字符串类型" type="string"/>'
			+'\n	<prop name="xxx" tips="布尔类型" type="bool"/>'
			+'\n	<prop name="xxx" tips="颜色类型" type="color"/>'
			+'\n	<prop name="xxx" tips="下拉框类型" type="option" option="left,center,right"/>-->'
			+'\n</'+name+'>';
			FileManager.createTxtFile(path,str);
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		/**增加页面*/
		__proto.addPage=function(type,name,imgPath,width,height,bgColor,isSceneWidth,isSceneHeight){
			if (!Boolean(name)){
				return Alert.show(Sys.lang("新建页面名称不能为空"));
			};
			var path=FileManager.getPath(this.currDirectory,name+".ui");
			if (this.hasFile(path)){
				return Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			};
			var xml;
			xml={
				type:type,
				child:[],
				props:{}
			};
			if (isSceneWidth){
				xml.props.sceneWidth=width;
			}
			else{
				xml.props.width=width;
			}
			if (isSceneHeight){
				xml.props.sceneHeight=height;
			}
			else{
				xml.props.height=height;
			}
			xml.props.sceneColor=bgColor;
			if (Boolean(imgPath)){
				xml.props.sceneBg=PageManager.copyPageBg(path,imgPath);
			}
			this.save(path,xml);
			this.refresh();
			Notice$1.notify("openPAGE",[path]);
		}

		/**保存页面*/
		__proto.save=function(path,xml){
			FileManager.createTxtFile(path,JsonTool.getJsonString(xml,false));
		}

		/**清理xml无用标记*/
		__proto.cleanPageXml=function(xml){
			delete xml.compId;
			delete xml.selectedBox;
			var list=xml.child;
			for (var j=0,n=list.length;j < n;j++){
				this.cleanPageXml(list[j]);
			}
			return Object;
		}

		__proto.checkRename=function(){
			if (this.pageTree.selectedItem !=null){
				var fileName=this.pageTree.selectedItem.label;
				Notice$1.notify("OPEN_RENAME",[fileName]);
			}
		}

		__proto.changeUIToTemplate=function(){
			if (this.pageTree.selectedItem !=null){
				var fileName=this.pageTree.selectedPath;
				if(TypeManager.getFileType(fileName)=="page"){
					TemplateManager.changeToTemplate(fileName);
					}else{
					Alert.show(Sys.lang("UI文件才能转换成模板"));
				}
			}
		}

		// MessageManager.instance.show("UI文件才能转换成模板");
		__proto.cloneFile=function(){
			if (this.pageTree.selectedItem !=null){
				var filePath=this.pageTree.selectedPath;
				var newPath;
				if(FileTools.isDirectory(filePath)){
					newPath=this.getNewFileName(filePath+"{I}");
					}else{
					var extension;
					extension=FileTools.getExtensionName(filePath);
					newPath=this.getNewFileName(filePath.replace("."+extension,"{I}."+extension));
				}
				FileManager.copyFile(filePath,newPath);
				this.refresh();
			}
		}

		__proto.copyFileToDir=function(filePath,dir){
			var newPath;
			var fileName;
			fileName=FileTools.getFileName(filePath);
			if(FileTools.isDirectory(filePath)){
				newPath=this.getNewFileName(dir+"/"+fileName+"{I}");
				}else{
				var extension;
				extension=FileTools.getExtensionName(filePath);
				newPath=this.getNewFileName(dir+"/"+fileName+"{I}."+extension);
			}
			FileManager.copyFile(filePath,newPath);
		}

		__proto.getNewFileName=function(template){
			var i=1;
			var rst;
			rst=template.replace("{I}",i);
			while(FileTools.exist(rst)){
				i++;
				rst=template.replace("{I}",i);
			}
			return rst;
		}

		__proto.copyFile=function(oldFile,tarFile){
			FileManager.copyFile(oldFile,tarFile);
			this.refresh();
		}

		__proto.rename=function(newName,isUpdate){
			if (!Boolean(newName)){
				return Alert.show(Sys.lang("新名称不能为空"));
			};
			var oldPath=this.pageTree.selectedPath;
			var newPath;
			if(FileTools.isDirectory(oldPath)){
				newPath=(oldPath+"##").replace(this.pageTree.selectedItem.label+"##",newName);
				}else{
				newPath=(oldPath+"##").replace(FileTools.getFileNameWithExtension(oldPath)+"##",newName+"."+FileTools.getExtensionName(oldPath))
			}
			if (this.hasFile(newPath)){
				Alert.show(Sys.lang("已经有同名字的页面了，请换个名字试试"),Sys.lang("命名重复"));
			}
			if(!FileTools.isDirectory(newPath)){
				Notice$1.notify("closePage",[oldPath]);
			}
			FileTools.rename(oldPath,newPath);
			if (FileTools.isDirectory(newPath)){
				this.renameByDir(oldPath,newPath,isUpdate);
				}else {
				this.renamePage(oldPath,newPath,isUpdate);
			}
			this.refresh();
		}

		/**重命名目录*/
		__proto.renameByDir=function(oldDir,newDir,isUpdate){
			var arr=FileTools.getDirFiles(newDir);
			for (var i=0,n=arr.length;i < n;i++){
				var newChild=new File(FileManager.getPath(newDir,arr[i]));
				var oldChild=new File(FileManager.getPath(oldDir,arr[i]));
				if (newChild.isDirectory){
					this.renameByDir(oldChild.nativePath,newChild.nativePath,isUpdate);
					}else {
					this.renamePage(oldChild.nativePath,newChild.nativePath,isUpdate);
				}
			}
		}

		/**重命名页面*/
		__proto.renamePage=function(oldPath,newPath,isUpdate){
			Notice$1.notify("closePage",[oldPath]);
			if (isUpdate){
				var oldKey="\"source\":\""+FileManager.adptToCommonUrl(FileManager.getRelativePath(this._pagePath,oldPath))+"\"";
				var newKey="\"source\":\""+FileManager.adptToCommonUrl(FileManager.getRelativePath(this._pagePath,newPath))+"\"";
				PageManager.replace(new RegExp(oldKey,"g"),newKey);
				oldKey=FileManager.adptToCommonUrl(FileManager.getWorkRelativePath(oldPath));
				newKey=FileManager.adptToCommonUrl(FileManager.getWorkRelativePath(newPath));
				PageManager.replace(new RegExp(oldKey,"g"),newKey);
			}
		}

		__proto.addPreSetUI=function(data,dir){
			console.log("addPreset:",data,dir);
			PreFabManager.I.convertDataToPreFabUI(data,dir);
			this.refresh(false);
		}

		__proto.addPreSet=function(data,dir){
			console.log("addPreset:",data,dir);
			PreFabManager.I.convertDataToPreFab(data,dir);
			this.refresh(false);
		}

		__proto.onPageTreeDragDrop=function(e){
			if (!e.data)return;
			if (!(e.data.sType=="page" ||e.data.type=="page" || e.data.type=="pageDir"|| e.data.type=="Props"|| e.data.type=="displayDrag"||e.data.type=="multiPageFile"))return;
			var targetFile;
			var hitList;
			hitList=DisControlTool.getObjectsUnderGlobalPoint(this.pageTree);
			var i=0,len=0;
			len=hitList.length;
			for (i=0;i < len;i++){
				if (hitList[i].dataSource && hitList[i].dataSource.path){
					targetFile=new File(hitList[i].dataSource.path);
					break ;
				}
			};
			var targetDir;
			if (!targetFile){
				targetFile=targetDir=new File(this._pagePath);
				}else{
				targetDir=targetFile.isDirectory ? targetFile :targetFile.parent;
			}
			if(e.data.type=="displayDrag"){
				this.addPreSetUI(e.data.data,targetDir.nativePath);
				return;
			};
			var oldFile=new File(this.pageTree.array[this._mouseIndex].path);
			var oldDir=oldFile.parent;
			var selectList;
			selectList=this.pageTree.mList.selectItems;
			len=selectList.length;
			var fileList;
			fileList=[];
			var tFile;
			for(i=0;i<len;i++){
				tFile=selectList[i].path;
				fileList.push(tFile);
				if(targetDir.nativePath.indexOf(tFile)>=0){
					MessageManager.instance.show(Sys.lang("不能把文件拖动到子文件夹中"));
					return;
				}
			}
			if(!fileList||fileList.length<1)return;
			this.pageTree.mList.clearSelect();
			MoveMultiPage.instance.start(fileList,targetDir.nativePath);
			return;
			if (oldFile.nativePath !=targetDir.nativePath && oldDir.nativePath !=targetDir.nativePath){
				var newFile=new File(FileManager.getPath(targetDir.nativePath,oldFile.name));
				Notice$1.notify("OPEN_MovePage",[oldFile,newFile]);
			}
		}

		__proto.moveFileList=function(fileList,tarDir,isUpdate){
			(isUpdate===void 0)&& (isUpdate=true);
			var i=0,len=0;
			len=fileList.length;
			for(i=0;i<len;i++){
				this.moveByFilePath(fileList[i],tarDir,isUpdate);
			}
		}

		__proto.moveByFilePath=function(oldPath,tarDir,isUpdate){
			(isUpdate===void 0)&& (isUpdate=true);
			var oldFile=new File(oldPath);
			var newFile=new File(FileManager.getPath(tarDir,oldFile.name));
			this.move(oldFile.nativePath,newFile.nativePath,isUpdate);
		}

		/**移动页面*/
		__proto.move=function(oldFile,newFile,isUpdate){
			Notice$1.notify("closePage",[oldFile]);
			FileTools.rename(oldFile,newFile);
			if (FileTools.isDirectory(newFile)){
				this.renameByDir(oldFile,newFile,isUpdate);
				}else {
				this.renamePage(oldFile,newFile,isUpdate);
			}
			this.refresh();
		}

		/**设置页面的默认属性*/
		__proto.setPageDefaultProp=function(){
			if (this.pageTree.selectedItem !=null){
				var path=this.pageTree.selectedItem.path;
				if (!FileTools.isDirectory(path)){
					var filePath=FileManager.getRelativePath(this._pagePath,path);
					Notice$1.notify("OPEN_SEtPageProp",[filePath]);
				}
			}
		}

		__proto.treeRender=function(cell,index){
			var item=cell.dataSource;
			if (item){
				var icon=cell.getChildByName("icon");
				var isDirectory=item.child || item.isDirectory;
				var label=cell.getChildByName("label");
				icon.width=StyleConsts$1.DisplayIconWidth;
				icon.height=StyleConsts$1.DisplayIconHeight;
				if (isDirectory){
					if(item.isOpen){
						icon.skin="view/folder_open.png";
						}else{
						icon.skin="view/folder_close.png";
					}
					label.color=StyleConsts$1.FolderTxtColor;
					}else {
					label.text=item.label;
					label.color=StyleConsts$1.ItemTxtColor;
					var type;
					type=TypeManager.getFileType(item.path);
					switch(type){
						case "page":
							icon.skin="view/ui.png";
							break ;
						case "particle":
						case "particle3D":
							icon.skin="view/particle.png";
							break ;
						case "page":
							icon.skin="view/ui.png";
							break ;
						case "page":
							icon.skin="view/ui.png";
							break ;
						default :
							icon.skin="view/ui.png";
						}
				}
			}
		}

		/**获取当前目录*/
		__getset(0,__proto,'currDirectory',function(){
			var directory=this._pagePath;
			if (this.pageTree.selectedItem !=null){
				var path=this.pageTree.selectedItem.path;
				return FileTools.getFileDir(path);
			}
			return directory;
		});

		__getset(1,PagePanel,'instance',function(){
			return PagePanel._instance ? PagePanel._instance :PagePanel._instance=new PagePanel();
		},laya.editor.ui.PagePanelUI._$SET_instance);

		PagePanel._instance=null
		return PagePanel;
	})(PagePanelUI)


	/**属性面板
	*@author yung
	*/
	//class laya.editor.view.PropPanel extends laya.editor.ui.PropPanelUI
	var PropPanel=(function(_super){
		function PropPanel(){
			this._panel=null;
			this._panelMap={};
			this.tInputList=null;
			this.objType=null;
			this.propO=null;
			this.targetID=0;
			this.preType=null;
			this._preParam=[];
			PropPanel.__super.call(this);
			this.clear();
			this.on("mouseover",this,this.onRollOver);
			this.on("mouseout",this,this.onRollOut);
			PropPanel._instance=this;
			this.on("dragDrop",this,this.onPropDragDrop);
		}

		__class(PropPanel,'laya.editor.view.PropPanel',_super);
		var __proto=PropPanel.prototype;
		__proto.initListener=function(){
			Notice$1.listen("PropPanel_setByObj",this,this.initByObj);
			Notice$1.listen("SELECTE_INPUT",this,this.selecteInput);
		}

		__proto.selecteInput=function(input){
			var pos;
			pos=new Point(0,0);
			pos=input.localToGlobal(pos);
			pos=this._panel.content.globalToLocal(pos);
			if(pos.y<this._panel.vScrollBar.value){
				this._panel.vScrollBar.value=pos.y;
				}else{
				if(pos.y+input.height>this._panel.height+this._panel.vScrollBar.value){
					this._panel.vScrollBar.value=pos.y+input.height-this._panel.height+10;
				}
			}
			Laya.timer.once(100,this,this.enableRendering);
		}

		// trace("pos after:",pos.x,pos.y,_panel.vScrollBar.value,_panel.height);
		__proto.enableRendering=function(){
			Laya.stage.renderingEnabled=true;
		}

		__proto.valueChange=function(key,value,isChanging,type,refreshComp){
			(isChanging===void 0)&& (isChanging=false);
			(refreshComp===void 0)&& (refreshComp=true);
			var valueType;
			valueType=type||UIConfigManager.getCompPropValueType(this.objType,key);
			if(value!=""){
				switch(valueType){
					case "int":
						value=LayaBuilder.mParseInt(value);
					case "Number":
					case "sNumber":
					case "number":
						value=parseFloat(value);
						break ;
					case "pNumber":
						value=Math.abs(parseFloat(value));
						break ;
					case "bool":
						value=value=="true"?true:false;
						break ;
					}
				if(ObjectTools.isNaNS(value)){
					value=0;
				}
				}else{
				if(IDEVars.isAnimationEditMode){
					switch(valueType){
						case "int":
							value=0;
						case "Number":
						case "sNumber":
						case "number":
							value=0;
							break ;
						case "pNumber":
							value=0;
							break ;
						case "bool":
							value=value=="true"?true:false;
							break ;
						}
				}
			}
			if (!isChanging){
				Notice$1.notify("Prop_change",[key,value,this.targetID,true,refreshComp]);
				}else{
				Notice$1.notify("Prop_changeing",[key,value,this.targetID]);
			}
		}

		__proto.onPropDragDrop=function(e){
			if(!PropPanel.canDragDrop)return;
			if (!e.data)return;
			if (!(e.data.type=="Props"))return;
			if(!this.propO)return;
			AppendPropGroupTool.addAppendPropsToData(FileManager.getWorkRelativePath(e.data.asset),this.propO);
			Notice$1.notify("Prop_Changed");
			this.refresh();
		}

		__proto.onRollOut=function(e){}
		//tabChildren=false;
		__proto.onRollOver=function(e){}
		/**清理*/
		__proto.clear=function(){
			this.propO=null;
			this.typeIcon.visible=false;
			this.typeLbl.text="";
			this.targetID=-1;
			if (this._panel){
				this._panel.removeSelf();
			}
		}

		__proto.removeAppendPropGroups=function(_panel){
			var i=0,len=0;
			var childs;
			childs=_panel.content._childs;
			len=childs.length;
			var tChild;
			for(i=len-1;i>=0;i--){
				tChild=childs[i];
				if((tChild instanceof laya.editor.view.prop.PropGroup )){
					if(tChild.name=="appendProps"){
						tChild.reset();
						tChild.removeSelf();
						Pool.recover("AppendPropGroups",tChild);
					}
				}
			}
		}

		__proto.addAppendPropGroups=function(panel,groups){
			if(!groups)return;
			var inputList;
			inputList=this._panel["inputs"];
			for (var k=0,t=groups.length;k < t;k++){
				var data;
				data=groups[k];
				var arr=data.props;
				if(arr&&!((arr instanceof Array)))arr=[arr];
				if(!arr)arr=[];
				if (1||arr&&arr.length > 0){
					var propGroup;
					propGroup=Pool.getItemByClass("AppendPropGroups",PropGroup);
					propGroup.createBy(data.name,arr,inputList,data.data);
					propGroup.left=propGroup.right=0;
					propGroup.name="appendProps";
					panel.addChild(propGroup);
				}
			}
		}

		__proto.initByObj=function(data,name,id,node){
			if(this.preType!=name||!data){
				this.clear();
			};
			var isSameO;
			isSameO=(this.propO==node);
			this.propO=node;
			this.preType=name;
			this.targetID=id;
			if (data){
				this.objType=name;
				var type=name;
				this.typeLbl.text=type;
				this.typeLbl.color=StyleConsts$1.PropPanelTitleColor;
				this.typeIcon.skin=UIConfigManager.getCompTreeIcon(type);
				this.typeIcon.width=StyleConsts$1.DisplayIconWidth;
				this.typeIcon.height=StyleConsts$1.DisplayIconHeight;
				this.typeIcon.visible=true;
				this._panel=this.createPanel(type,data,node);
				this.removeAppendPropGroups(this._panel);
				this.addAppendPropGroups(this._panel,AppendPropGroupTool.getAppendPropByAppendProps(AppendPropGroupTool.getNodePropKeyValue(node,"appendProps")));
				this.tInputList=this._panel["inputs"];
				this.addChild(this._panel);
				this.refreshGroupsPosition();
				var dataO;
				dataO=data;
				var skinLabel=UIConfigManager.getCompSkinLabel(this.objType);
				var skin;
				skin=dataO[skinLabel];
				if (skin){
					var defaultProps=ResStyleManager.getResPropsObj(skin);
				}
				for (var i=0,n=this._panel.numChildren;i < n;i++){
					var propGroup=this._panel.getChildAt(i);
					propGroup.setValueD(dataO,null,this.objType,node);
				}
			}
		}

		__proto.refresh=function(){
			if(this._preParam.length==2){
				this.init(this._preParam[0],this._preParam[1]);
			}
		}

		__proto.init=function(data,id){
			(id===void 0)&& (id=-1);
			if(data){
				var type;
				type=data.type;
				if(data.type=="UIView"&&data.source){
					try {
						var uiType;
						uiType=TypeManager.getPageFileType(data.source);
						if(uiType){
							type=uiType;
						}
					}catch (e){}
				}
				if(data.type=="Script"&&data.source){
					type=AppendPropGroupTool.getScriptName(data.source);
					if(!type)type="Script";
				}
				Notice$1.notify("PropPanel_setByObj",[data.props,type,id,data]);
				this._preParam.length=2;
				this._preParam[0]=data;
				this._preParam[1]=id;
				}else{
				this.clear();
			}
			return;
		}

		__proto.clearPanelCache=function(type){
			delete this._panelMap[type];
		}

		// };
		__proto.createPanel=function(type,data,node){
			var panel=this._panelMap[type];
			if (panel==null){
				var inputList=[];
				panel=new Panel();
				panel["inputs"]=inputList;
				panel.mouseEnabled=true;
				panel.content.mouseEnabled=true;
				panel.vScrollBarSkin="comp/vscroll.png";
				panel.left=panel.right=panel.bottom=2;
				panel.top=40;
				var props=UIConfigManager.getCompConfig(type);
				if(!props&&ProjectSetting.isPageType(type)){
					props=UIConfigManager.getCompConfig("View");
				}
				if (props){
					var labels=props.p.groups;
					var groupLabels=labels ? labels.split(","):[];
					groupLabels=Sys.langArr(groupLabels);
					groupLabels.push(Sys.lang("其他"));
					var groups=[];
					for (var j=0,m=groupLabels.length;j < m;j++){
						groups.push([]);
					};
					var otherGroupIndex=groups.length-1;
					var list=props.c.prop;
					for (var i=0,n=list.length;i < n;i++){
						var prop=list[i];
						var group=Sys.lang(prop.p.group);
						if (!Boolean(group)){
							var index=otherGroupIndex;
							}else {
							index=groupLabels.indexOf(group);
							if (index==-1){
								index=otherGroupIndex;
							}
						}
						groups[index].push(prop);
					}
					index=groupLabels.indexOf(Sys.lang("公用"));
					if (index==-1){
						index=otherGroupIndex;
					}
					if(IDEVars.isGraphicAnimationMode||(node&&TypeManager.NoRenderTypeNodes[node.type])||TypeManager.NoRenderTypeNodes[type]){
						}else if(node&&TypeManager.isGraphicCmdType(node.type)){
						groups[index].push(PropPanel.graphicTypeProp);
						}else{
						groups[index].push(PropPanel.renderTypeProp);
					};
					var otherGroup=groups[otherGroupIndex];
					otherGroup.sort(this.sortByNameHH);
					for (var k=0,t=groups.length;k < t;k++){
						var arr=groups[k];
						if (arr.length > 0){
							var propGroup=new PropGroup(groupLabels[k],arr,inputList);
							propGroup.left=propGroup.right=0;
							panel.addChild(propGroup);
						}
					}
				}
				this._panelMap[type]=panel;
			}
			return panel;
		}

		__proto.sortByNameHH=function(obj0,obj1){
			return obj0.p.name < obj1.p.name?-1:1;
		}

		/**刷新属性面板位置*/
		__proto.refreshGroupsPosition=function(){
			var y=0;
			for (var i=0,n=this._panel.numChildren;i < n;i++){
				var propGroup=this._panel.getChildAt(i);
				if (propGroup){
					propGroup.y=y;
					y=y+propGroup.height+5;
				}
			}
			this._panel.refresh();
		}

		__getset(1,PropPanel,'instance',function(){
			return PropPanel._instance ? PropPanel._instance :PropPanel._instance=new PropPanel();
		},laya.editor.ui.PropPanelUI._$SET_instance);

		PropPanel.initStaticDatas=function(){
			PropPanel.renderTypeProp["p"]["tips"]=Sys.lang("节点功能类型");
			PropPanel.graphicTypeProp["p"]["tips"]=Sys.lang("节点功能类型");
		}

		PropPanel._instance=null
		PropPanel.canDragDrop=true;
		PropPanel.AppendPropsPanel="appendProps";
		__static(PropPanel,
		['renderTypeProp',function(){return this.renderTypeProp={
				p:{
					name:"renderType",
					tips:"节点功能类型",
					type:"option",
					"default":"",
					"group":"公用",
					option:"mask,hit,unHit,render,instance"
				}
				};},'graphicTypeProp',function(){return this.graphicTypeProp={
				p:{
					name:"renderType",
					tips:"节点功能类型",
					type:"option",
					"default":"",
					"group":"公用",
					option:"hit,unHit"
				}
		};}

		]);
		return PropPanel;
	})(PropPanelUI)


	/**资源面板
	*@author yung
	*/
	//class laya.editor.view.ResPanel extends laya.editor.ui.ResPanelUI
	var ResPanel=(function(_super){
		function ResPanel(){
			this._resPath=null;
			this._refreshComplete=null;
			this._mouseIndex=0;
			this.isRefreshing=false;
			this._menu=null;
			this._mutiMenu=null;
			this._menuDir=null;
			ResPanel.__super.call(this);
			this.initPanel();
			this.resTree.spaceLeft=15;
			this.resTree.mList.onlySameParentSelect=true;
			this.cacheAsBitmap=IDEConsts.cachePanels;;
		}

		__class(ResPanel,'laya.editor.view.ResPanel',_super);
		var __proto=ResPanel.prototype;
		// debugger;
		__proto.initListener=function(){
			Notice$1.listen("FRESH_RES",this,this.refresh);
			Notice$1.listen("SelecteResFile",this,this.selecteByFile);
		}

		/**刷新资源树*/
		__proto.init=function(resPath,complete){
			var force=false;
			force=this._resPath==resPath;
			this._resPath=resPath;
			this.refresh(complete,force);
		}

		__proto.onTreeMouse=function(e,index){
			var cell=this.resTree.list.getCell(index);
			if(!cell)return;
			var label=cell.getChildByName("label");
			if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if (e.type=="mouseout"){
				var item=cell.dataSource;
				if (!item)return;
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		__proto.selecteByFile=function(file){
			var arr;
			arr=this.resTree.source;
			this.parseOpen(arr,file.split("/"));
			this.resTree.fresh();
			Notice$1.notify("SHOW_LayoutTab_By_Name",[Sys.lang("资源")]);
		}

		__proto.parseOpen=function(tree,arr){
			if(arr.length<1)return;
			var tStr=arr.shift();
			var i=0,len=0;
			len=tree.length;
			var tItem;
			for(i=0;i<len;i++){
				tItem=tree[i];
				if(tItem.label==tStr){
					if(arr.length>0){
						tItem.isOpen=true;
						this.resTree.fresh();
						this.parseOpen(tItem.childs,arr);
						}else{
						this.resTree.selectedItem=tItem;
					}
					return;
				}
			}
		}

		/**刷新*/
		__proto.refresh=function(refreshComplete,force){
			(force===void 0)&& (force=false);
			PreFabManager.I.cleanPrefabCache();
			if(this.isRefreshing&&!force)return;
			this._refreshComplete=refreshComplete;
			this.isRefreshing=true;
			ResFileManager.resLoadCompleteHandler=new Handler(this,this.createComplete);
			ResFileManager.setPath(this._resPath);
		}

		//createComplete(null);
		__proto.createComplete=function(){
			this.isRefreshing=false;
			var arr;
			arr=FileTools.getFileTreeArr(SystemSetting.assetsPath);
			var i=0,len=0;
			for(i=arr.length-1;i>=0;i--){
				if(FilterFuns.isSpecialRes(arr[i].path)){
					arr.splice(i,1);
				}
			}
			this.resTree.array=arr;
			Notice$1.notify("FRESH_CurView");
			Notice$1.notify("Fresh_picChanged");
			this.onResTreeChange(null);
			SetSizeGrid.instance.fresh();
			if (this._refreshComplete !=null){
				this._refreshComplete.run();
				}else {
				MessageManager.instance.show(Sys.lang("资源刷新完毕"));
			}
		}

		__proto.initPanel=function(){
			this.resTree.array=[];
			this.resTree.on("doubleclick",this,this.onResTreeDoubleClick);
			this.resTree.on("rightclick",this,this.onResTreeRightMouseDown);
			this.resTree.mouseHandler=new Handler(this,this.onResTreeMouse);
			var menu=ContextMenu$1.createMenu("设置默认属性","打开所在目录","查找引用","替换选中对象","","重命名","删除");
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
			this._menuDir=ContextMenu$1.createMenu("设置默认属性","打开所在目录","","重命名","删除");
			this._menuDir.on("select",this,this.onEmunSelect);
			this._mutiMenu=ContextMenu$1.createMenu("删除");
			this._mutiMenu.on("select",this,this.onEmunSelect);
			this.fliterTxt.on("input",this,this.onFliterTxtChange);
			this.fliterTxt.color=StyleConsts$1.TextInputColor;
			this.opBox.on("click",this,this.onOpBoxClick);
			this.resTree.on("change",this,this.onResTreeChange);
			this.resTree.renderHandler=new Handler(this,this.resTreeRender);
			this.resTree.on("keydown",this,this.onResTreeKeyDown);
			this.on("dragDrop",this,this.onResTreeDragDrop);
			this.resTree.on("keydown",this,this.onTreeKeyDown);
			this.on("click",this,this.onClick);
			this.clearSearchBtn.on("mousedown",this,this.onClearSearch);
		}

		__proto.onClearSearch=function(){
			if(this.fliterTxt.text!=""){
				this.fliterTxt.text="";
				this.onFliterTxtChange(null);
			}
		}

		__proto.onClick=function(e){
			var target=e.target;
			if (!DisControlTool.isChildE(this,target)||target==this.resTree.mList.content){
				this.resTree.mList.clearSelect(true);
			}
		}

		__proto.addPreSet=function(data,dir){
			console.log("addPreset:",data,dir);
			PreFabManager.I.convertDataToPreFab(data,dir);
			this.refresh();
		}

		__proto.systemDrag=function(data,dir){
			var files;
			files=data.files;
			var i=0,len=files.length;
			for(i=0;i<len;i++){
				var tFile;
				tFile=files[i].path;
				var fileName;
				fileName=files[i].name;
				FileTools.copyE(tFile,FileManager.getPath(dir,fileName));
			}
			this.refresh();
		}

		__proto.onResTreeDragDrop=function(e){
			if (!e.data)return;
			if (!(e.data.type=="res" || e.data.type=="resDir"||e.data.type=="multiResFile"||e.data.type=="displayDrag"||e.data.type=="SystemDrag"))return;
			var targetFile;
			var hitList;
			hitList=e.hitList;
			var i=0,len=0;
			len=hitList.length;
			for (i=0;i < len;i++){
				if (hitList[i].dataSource && hitList[i].dataSource.path){
					targetFile=new File(hitList[i].dataSource.path);
					break ;
				}
			};
			var targetDir;
			if (!targetFile){
				targetFile=targetDir=new File(this._resPath);
				}else{
				targetDir=targetFile.isDirectory ? targetFile :targetFile.parent;
			}
			if(e.data.type=="displayDrag"){
				this.addPreSet(e.data.data,targetDir.nativePath);
				return;
			}
			if(e.data.type=="SystemDrag"){
				this.systemDrag(e.data,targetDir.nativePath);
				return;
			};
			var oldFile=new File(this.resTree.array[this._mouseIndex].path);
			var oldDir=oldFile.parent;
			var selectList;
			selectList=this.resTree.mList.selectItems;
			len=selectList.length;
			var fileList;
			fileList=[];
			var tFile;
			var tarForder;
			tarForder=FileManager.adptToCommonUrl(targetDir.nativePath);
			for(i=0;i<len;i++){
				tFile=selectList[i].path;
				fileList.push(tFile);
				if(FileTools.getFolder(tFile)==tarForder){
					return;
				}
				if(targetDir.nativePath.indexOf(tFile)>=0){
					MessageManager.instance.show(Sys.lang("不能把文件拖动到子文件夹中"));
					return;
				}
			}
			if(!fileList||fileList.length<1)return;
			if(fileList.length==1){
			}
			this.resTree.mList.clearSelect();
			MoveMultiRes.instance.start(fileList,targetDir.nativePath);
			return;
			if (oldFile.nativePath !=targetDir.nativePath && oldDir.nativePath !=targetDir.nativePath){
				var newFile=new File(FileManager.getPath(targetDir.nativePath,oldFile.name));
				if (!this.hasFile(newFile.nativePath)){
					MoveRes.instance.start(oldFile,newFile);
					}else {
					Alert.show(Sys.lang("目标文件夹内已经有同名文件，不能进行移动操作"));
				}
			}
		}

		/**移动资源*/
		__proto.move=function(oldFile,newFile,isUpdate){
			oldFile.moveTo(newFile.nativePath);
			if (newFile.isDirectory){
				this.renameByDir(oldFile,newFile,isUpdate);
				}else {
				this.renameRes(oldFile,newFile,isUpdate);
			}
			this.refresh();
		}

		__proto.moveByFilePath=function(oldPath,tarDir,isUpdate){
			(isUpdate===void 0)&& (isUpdate=true);
			var oldFile=new File(oldPath);
			var newFile=new File(FileManager.getPath(tarDir,oldFile.name));
			this.move(oldFile,newFile,isUpdate);
		}

		__proto.moveFileList=function(fileList,tarDir,isUpdate){
			(isUpdate===void 0)&& (isUpdate=true);
			var i=0,len=0;
			len=fileList.length;
			for(i=0;i<len;i++){
				this.moveByFilePath(fileList[i],tarDir,isUpdate);
			}
		}

		/**快捷键*/
		__proto.onResTreeKeyDown=function(e){
			if (e.keyCode==46||e.keyCode==8){
				this.deleteRes();
			}
			if (e.keyCode==113){
				this.checkRename();
			}
		}

		/**删除资源*/
		__proto.deleteRes=function(){
			if(this.resTree.mList.selectItems&&this.resTree.mList.selectItems.length>1){
				Confirm.show(Sys.lang("确定要删除所选的文件吗？(删除后可以在回收站里找回)"),Sys.lang("确定删除资源吗"),Utils.bind(this.delSelectItems,this));
				return;
			}
			if (Boolean(this.resTree.selectedPath)){
				var filePath=FileManager.getRelativePath(this._resPath,this.resTree.selectedPath);
				var type=this.resTree.selectedItem.isDirectory ? Sys.lang("目录"):Sys.lang("资源");
				Confirm.show(Sys.lang("确定要删除{0}({1})吗？(删除后可以在回收站里找回)",type,filePath),Sys.lang("确定删除资源吗"),Utils.bind(this.delBack,this));
				}else {
				Alert.show(Sys.lang("当前资源为SWF资源，不能直接删除"));
			}
		}

		/**处理资源删除*/
		__proto.delBack=function(sure){
			if (sure){
				ResManager.removeRes(this.resTree.selectedPath);
				this.refresh();
			}
			Laya.stage.focus=this.resTree;
		}

		__proto.delSelectItems=function(sure){
			if (sure){
				var selectList;
				selectList=this.resTree.mList.plainSelectItems;
				var i=0,len=0;
				len=selectList.length;
				for(i=0;i<len;i++){
					ResManager.removeRes(selectList[i].path);
				}
				this.resTree.mList.clearSelect();
				this.refresh();
			}
			Laya.stage.focus=this.resTree;
		}

		__proto.onResTreeChange=function(e){
			this.cleanViewer();
			if (this.resTree.selectedItem && !this.resTree.selectedItem.isDirectory){
				var asset=this.resTree.selectedItem.path;
				if(!ResFileManager.isResFile(asset))return;
				var img=new Image();
				img.once("loaded",this,this.setResSize,[img]);
				img.skin=FileTools.getAbsPath(asset)+"?v="+Math.random();
				this.resViewer.addChild(img);
				img.visible=false;
			}
		}

		/**设置资源大小*/
		__proto.setResSize=function(target){
			var scale=Math.min(this.resViewer.width / target.width,this.resViewer.height / target.height,1);
			target.scaleX=target.scaleY=scale;
			target.x=(this.resViewer.width-scale*target.width)/ 2;
			target.y=(this.resViewer.height-scale*target.height)/ 2;
			this.sizeTxt.text=target.width+" x "+target.height;
			target.visible=true;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			if(this.resViewer&&this.resViewer.numChildren>0){
				this.setResSize(this.resViewer.getChildAt(0));
			}
		}

		/**清理resViewer*/
		__proto.cleanViewer=function(){
			this.sizeTxt.text="";
			for (var i=this.resViewer.numChildren-1;i >-1;i--){
				this.resViewer.removeChildAt(i).offAll("resize");
			}
		}

		__proto.onOpBoxClick=function(e){
			var btn=e.target;
			if (btn){
				switch (btn.name){
					case "setPropBtn":
						this.checkSetResProp();
						break ;
					case "openDirBtn":
						this.openCurrDirectory();
						break ;
					case "refreshBtn":
						this.refresh();
						break ;
					}
			}
		}

		__proto.checkSetResProp=function(){
			if (this.resTree.selectedItem && !this.resTree.selectedItem.isDirectory){
				if(this.resTree.selectedItem.type=="Prefab"){
					Notice$1.notify("openPAGE",[this.resTree.selectedItem.path]);
				}else
				SetResProp.instance.start(FileManager.getResRelativePath(this.resTree.selectedItem.path));
				}else{
				if(this.resTree.selectedItem && this.resTree.selectedItem.isDirectory){
					SetDirProp.instance.start(FileManager.getResRelativePath(this.resTree.selectedItem.path));
				}
			}
		}

		/**打开当前资源所在的文件夹*/
		__proto.openCurrDirectory=function(){
			FileTools.openItem(this.currDirectory);
		}

		__proto.openCurrPath=function(){
			var directory=this._resPath;
			if (this.resTree.selectedItem !=null){
				var path=this.resTree.selectedItem.path;
				FileTools.showItemInFolder(path);
				return;
			}
			FileTools.openItem(directory);
		}

		__proto.onFliterTxtChange=function(e){
			this.resTree.filter(this.fliterTxt.text);
		}

		__proto.onEmunSelect=function(name){
			switch (name){
				case "设置默认属性":
					this.checkSetResProp();
					break ;
				case "打开所在目录":
					this.openCurrPath();
					break ;
				case "重命名":
					this.checkRename();
					break ;
				case "删除":
					this.deleteRes();
					break ;
				case "查找引用":
					this.findResRefer();
					break ;
				case "替换选中对象":
					this.replaceSelctedComps();
					break ;
				case "重新打包":
					this.rePackDir();
					break ;
				}
		}

		__proto.rePackDir=function(){
			if(this.resTree.selectedPath&&FileTools.isDirectory(this.resTree.selectedPath)){
			}
		}

		__proto.replaceSelctedComps=function(){
			if (Boolean(this.resTree.selectedPath)){
				Notice$1.notify("REPLACE_SELECTEDCOMPS",[this.resTree.selectedPath]);
			}
		}

		__proto.findResRefer=function(){
			if (Boolean(this.resTree.selectedPath)){
				var tarResPath;
				tarResPath=FileManager.getRelativePath(SystemSetting.assetsPath,this.resTree.selectedPath);
				tarResPath=FileManager.adptToCommonUrl(tarResPath);
				Notice$1.notify("findResRefer",[tarResPath]);
			}
		}

		__proto.checkRename=function(){
			if (Boolean(this.resTree.selectedPath)){
				var fileName=this.resTree.selectedItem.label;
				fileName=FileTools.getFileName(fileName);
				RenameRes.instance.start(fileName);
				}else {
				Alert.show(Sys.lang("当前资源为SWF资源，不能直接重命名"));
			}
		}

		__proto.rename=function(newName,isUpdate){
			if (!Boolean(newName)){
				return Alert.show(Sys.lang("新名称不能为空"));
			};
			var oldFile=new File(this.resTree.selectedPath);
			if (!oldFile.isDirectory){
				newName+="."+oldFile.extension;
			};
			var oldName=this.resTree.selectedItem.label;
			if (oldFile.name !=newName){
				var oldPath=oldFile.nativePath;
				var newPath=(oldPath+"##").replace(oldFile.name+"##",newName);
				if (this.hasFile(newPath)){
					Alert.show(Sys.lang("已经有同名字的资源了，请换个名字试试"),Sys.lang("命名重复"));
					}else {
					FileManager.rename(oldPath,newPath);
					var newFile=new File(newPath);
					if (newFile.isDirectory){
						this.renameByDir(oldFile,newFile,isUpdate);
						}else {
						this.renameRes(oldFile,newFile,isUpdate);
					}
					this.refresh();
				}
			}
		}

		/**重命名目录*/
		__proto.renameByDir=function(oldDir,newDir,isUpdate){
			var arr=FileTools.getDirFiles(newDir.nativePath);
			for (var i=0,n=arr.length;i < n;i++){
				var newChild=new File(FileManager.getPath(newDir.nativePath,arr[i]));
				var oldChild=new File(FileManager.getPath(oldDir.nativePath,arr[i]));
				if (newChild.isDirectory){
					this.renameByDir(oldChild,newChild,isUpdate);
					}else {
					this.renameRes(oldChild,newChild,isUpdate);
				}
			}
		}

		/**重命名资源*/
		__proto.renameRes=function(oldFile,newFile,isUpdate){
			ResManager.removeRes(oldFile.nativePath);
			var oldAsset=ResManager.getResLinkName(oldFile.nativePath);
			var newAsset=ResManager.getResLinkName(newFile.nativePath);
			oldAsset=FileManager.adptToCommonUrl(oldAsset);
			newAsset=FileManager.adptToCommonUrl(newAsset);
			ResStyleManager.renameRes(oldAsset,newAsset);
			this.replacePage(oldAsset,newAsset);
		}

		__proto.replacePage=function(oldAsset,newAsset){
			var oldKey=""+oldAsset+"";
			var newKey=""+newAsset+"";
			PageManager.replace(new RegExp(oldKey,"g"),newKey);
		}

		/**是否已经存在同路径文件*/
		__proto.hasFile=function(path){
			var arr=this.resTree.source;
			var item;
			for(var $each_item in arr){
				item=arr[$each_item];
				if (item.path==path){
					return true;
				}
			}
			return false;
		}

		__proto.getSelectFiles=function(){
			var i=0,len=0;
			var selectList;
			selectList=this.resTree.mList.selectItems;
			len=selectList.length;
			var fileList;
			fileList=[];
			var tFile;
			for(i=0;i<len;i++){
				tFile=selectList[i].path;
				fileList.push(tFile);
			}
			return fileList;
		}

		__proto.onResTreeMouse=function(e,index){
			if (e.type=="mousedown"){
				Laya.stage.focus=this.resTree;
				this._mouseIndex=index;
				var clip=new Clip(SkinDefines.ResDragIcon,1,3);
				clip.index=2;
				if(this.resTree.mList.selectItems&&this.resTree.mList.selectItems.length>1){
					LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:"multiResFile",fileList:this.getSelectFiles()},DragManager.dragOffset);
					return;
				};
				var asset=this.resTree.array[index].path;
				if (this.resTree.array[index].isDirectory){
					LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:"resDir",asset:asset},DragManager.dragOffset);
					}else {
					var compType=ResStyleManager.getResCompType(FileManager.getResRelativePath(asset));
					var dragType;
					dragType="res";
					if(compType=="Props"){
						dragType="Props";
					}
					LayaBuilder.drag.doDrag(e.currentTarget,clip,{type:dragType,compType:compType,asset:asset},DragManager.dragOffset);
				}
			};
			var cell=this.resTree.list.getCell(index);
			var label=cell.getChildByName("label");
			if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if (e.type=="mouseout"){
				var item=cell.dataSource;
				if (!item)return;
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		__proto.onResTreeRightMouseDown=function(e){
			if(this.resTree.mList.selectItems&&this.resTree.mList.selectItems.length>1){
				this._mutiMenu.show();
				return;
			};
			var comp=e.target;
			if (comp && comp.dataSource){
				this.resTree.selectedItem=comp.dataSource;
			}
			if(this.resTree.selectedPath&&FileTools.isDirectory(this.resTree.selectedPath)){
				this._menuDir.show();
				return;
			}
			this._menu.show();
		}

		__proto.onResTreeDoubleClick=function(e){
			if (e.target.parent==this.resTree.list.content){
				this.checkSetResProp();
			}
		}

		/**页面快捷键*/
		__proto.onTreeKeyDown=function(e){
			if(KeyManager.isABC(e.keyCode)){
				ListEx.dealAbcKey(e.keyCode,this.resTree.list);
			}
			switch(e.keyCode){
				case 46:
				case 8:
					break ;
				case 113:
					this.checkRename();
					break ;
				case 37:
					this.resTree.setItemState(this.resTree.list.selectedIndex,false);
					break ;
				case 39:
					this.resTree.setItemState(this.resTree.list.selectedIndex,true);
					break ;
				case 38:
					if (this.resTree.list.selectedIndex > 0){
						this.resTree.list.selectedIndex--;
					}
					break ;
				case 40:
					if (this.resTree.list.selectedIndex < this.resTree.list.length-1){
						this.resTree.list.selectedIndex++;
					}
					break ;
				}
		}

		/**属性更改后，属性列表*/
		__proto.refreshProp=function(){
			this.resTree.array=this.resTree.source;
		}

		__proto.resTreeRender=function(cell,index){
			var item=cell.dataSource;
			var compStr;
			if (item){
				var icon=cell.getChildByName("icon");
				var isDirectory=item.child || item.isDirectory;
				var label=cell.getChildByName("label");
				icon.width=StyleConsts$1.DisplayIconWidth;
				icon.height=StyleConsts$1.DisplayIconHeight;
				if (isDirectory){
					if(item.isOpen){
						icon.skin="view/folder_open.png";
						}else{
						icon.skin="view/folder_close.png";
					}
					label.color=StyleConsts$1.FolderTxtColor;
					compStr=FileManager.adptToCommonUrl(FileManager.getResRelativePath(item.path));
					if(!ResStyleManager.getFinalPackResult(compStr,true)){
						label.text=item.label+"("+Sys.lang("不打包")+")";
					}
					}else {
					label.text=item.label;
					compStr=FileManager.adptToCommonUrl(FileManager.getResRelativePath(item.path));
					if(!ResStyleManager.getFinalPackResult(compStr,ResPanel.isPackRes(compStr))){
						label.text=item.label+"("+Sys.lang("不打包")+")";
					}
					label.color=StyleConsts$1.ItemTxtColor;
					var fName;
					fName=FileTools.getFileName(item.path);
					var compType=ResStyleManager.getResCompType(FileManager.getResRelativePath(item.path),false);
					item.type=compType;
					icon.skin=UIConfigManager.getCompTreeIcon(compType);
				}
			}
		}

		__getset(0,__proto,'visible',function(){
			return _super.prototype._$get_visible.call(this);
			},function(value){
			_super.prototype._$set_visible.call(this,value);
		});

		/**获取当前目录*/
		__getset(0,__proto,'currDirectory',function(){
			var directory=this._resPath;
			if (this.resTree.selectedItem !=null){
				var path=this.resTree.selectedItem.path;
				return FileTools.getFileDir(path);
			}
			return directory;
		});

		__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){
			_super.prototype._$set_dataSource.call(this,value);
		});

		__getset(1,ResPanel,'instance',function(){
			return ResPanel._instance ? ResPanel._instance :ResPanel._instance=new ResPanel();
		},laya.editor.ui.ResPanelUI._$SET_instance);

		ResPanel.isPackRes=function(resStr){
			if(resStr.indexOf("~")>=0)return false;
			var tex;
			tex=BinaryPicTools.getResInfo(ResFileManager.formatURL(resStr));
			if(tex){
				if(tex.width>ProjectSetting.picWidth)return false;
				if(tex.height>ProjectSetting.picHeight)return false;
			}
			return true;
		}

		ResPanel._instance=null
		return ResPanel;
	})(ResPanelUI)


	/**
	*...
	*@author ww
	*/
	//class laya.editor.view.template.CompPanel extends laya.editor.ui.template.CompPanelUI
	var CompPanel=(function(_super){
		function CompPanel(){
			this._menu=null;
			this._tSelectData=null;
			this._data=null;
			this.lastItem=null;
			CompPanel.__super.call(this);
			this.groupBox.removeChildren();
			this.size(200,600);
			this.inits();
			this.initPanel();
			this.freshData();
			this.groupBox.on("mousedown",this,this.mouseDown);
			this.groupBox.on("rightmousedown",this,this.rightMouseDown);
		}

		__class(CompPanel,'laya.editor.view.template.CompPanel',_super);
		var __proto=CompPanel.prototype;
		__proto.initPanel=function(){
			var menu=ContextMenu$1.createMenu("打开所在目录");
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(name){
			switch (name){
				case "打开所在目录":
					this.openCurrPath();
					break ;
				}
		}

		__proto.openCurrPath=function(){
			var path;
			if(this._tSelectData){
				FileTools.showItemInFolder(this._tSelectData.path);
				}else{
				path=TemplateManager.getRootPath();
				FileTools.openItem(path);
			}
		}

		/**打开当前页面所在的文件夹*/
		__proto.openCurrDirectory=function(){
			if(!FileTools.exist(this.currDirectory)){
				this.freshData();
			}else
			FileTools.openItem(this.currDirectory);
		}

		__proto.rightMouseDown=function(e){
			this._tSelectData=null
			if (!((e.target instanceof laya.ui.Image )))return;
			var compData;
			compData=e.target["uData"];
			if (compData){
				this._tSelectData=compData;
				if(!FileTools.exist(this._tSelectData.path)){
					Alert.show(Sys.lang("选中的模板已被删除"));
					this.freshData();
					return;
				}
			}
			this._menu.show();
		}

		__proto.mouseDown=function(e){
			if((e.target instanceof laya.editor.view.template.TemplateItem )){
				e.target=(e.target).tImg;
			}
			if (!((e.target instanceof laya.ui.Image )))return;
			var compData;
			compData=e.target["uData"];
			if (compData){
				this.dragComp(compData,e.target);
			}
		}

		__proto.dragComp=function(compData,target){
			var img=new Image();
			img.skin=compData.image;
			LayaBuilder.drag.doDrag(target,img,{type:"template",data:compData },DragManager.dragOffset);
		}

		__proto.freshData=function(){
			var data;
			data=TemplateManager.getTemplatePanelData();
			this.initByGroupDatas(data.groups);
		}

		__proto.inits=function(){
			Notice$1.listen("Fresh_CompPanel",this,this.freshData);
		}

		__proto.getCompListData=function(data){
			this.setData(data);
		}

		__proto.setData=function(data){
			this._data=data;
			var _groupList;
			_groupList=[];
			var _compList;
			_compList=data.data;
			var i=0,len=0;
			len=_compList.length;
			var tItem;
			var groupDic;
			groupDic={};
			var tGroup;
			var tGroupName;
			for (i=0;i < len;i++){
				tItem=_compList[i];
				tGroupName=tItem.group;
				if (!groupDic[tGroupName]){
					tGroup={};
					tGroup.name=tGroupName;
					tGroup.items=[];
					_groupList.push(tGroup);
					groupDic[tGroupName]=tGroup;
				}
				tGroup=groupDic[tGroupName];
				tGroup.items.push(tItem);
			}
			this.initByGroupDatas(_groupList);
		}

		__proto.initByGroupDatas=function(groupList){
			var tUI;
			tUI=this.createGroupList(groupList);
			tUI.left=tUI.right=1;
			tUI.top=0;
			tUI.bottom=0;
			this.groupBox.removeChildren();
			this.groupBox.addChild(tUI);
			ObjectTools.enableDisplayTree(tUI);
			this.adptSize();
			Laya.timer.once(100,tUI,tUI.freshUI);
		}

		__proto.createGroupList=function(groupDatas){
			var groups;
			groups=[];
			var i=0,len=0;
			var tGroup;
			len=groupDatas.length;
			for (i=0;i < len;i++){
				tGroup=this.createAGroup(groupDatas[i]);
				groups.push(tGroup);
			};
			var groupList;
			groupList=new GroupList();
			groupList.setGroups(groups);
			ObjectTools.enableDisplayTree(groupList);
			return groupList;
		}

		__proto.createAGroup=function(groupData){
			var group;
			group=new ItemGroup();
			group.setData(groupData.name,this.createGroupContent(groupData.items));
			ObjectTools.enableDisplayTree(this.lastItem);
			return group;
		}

		__proto.createGroupContent=function(items){
			var rst;
			rst=new BoxFitToWidth();
			rst.right=0;
			rst.left=0;
			rst.dX=5;
			rst.dY=5;
			var i=0,len=0;
			var tItem;
			len=items.length;
			var picWidth=0;
			var picHeight=0;
			picWidth=80;
			picHeight=80;
			var xCount=0;
			xCount=3;
			var tData;
			rst.y=3;
			var tImg;
			var tLabel;
			var disItems;
			disItems=[];
			for (i=0;i < len;i++){
				tData=items[i];
				tItem=new TemplateItem();
				tItem.initData(tData,picWidth,picHeight,CompPanel.getTip);
				tItem.x=i%3*(picWidth+3);
				tItem.y=Math.floor(i/xCount)*(picHeight+3);
				disItems.push(tItem);
			}
			this.lastItem=rst;
			rst.setItems(disItems);
			return rst;
		}

		__proto.adptSize=function(){
			if(this.groupBox.parent){
				this.height=this.groupBox.y+this.groupBox.height;
				}else{
				this.height=this.groupBox.y;
			}
		}

		__proto.onGroubBarClick=function(e){
			if (this.groupBox.parent){
				this.groupBox.removeSelf();
			}
			else{
				this.addChild(this.groupBox);
			}
			this.adptSize();
			this.event("UIChange");
		}

		/**获取当前目录*/
		__getset(0,__proto,'currDirectory',function(){
			var path;
			if(this._tSelectData){
				path=FileTools.getFileDir(this._tSelectData.path);
				}else{
				path=TemplateManager.getRootPath();
			}
			return path;
		});

		__getset(1,CompPanel,'instance',function(){
			return CompPanel._instance ? CompPanel._instance :CompPanel._instance=new CompPanel();
		},laya.editor.ui.template.CompPanelUI._$SET_instance);

		CompPanel.getTip=function(data){
			CompPanel.tipImg.skin=data.image;
			LayaBuilder.tip.showDisTip(CompPanel.tipImg);
		}

		CompPanel._instance=null
		__static(CompPanel,
		['tipImg',function(){return this.tipImg=new Image();}
		]);
		return CompPanel;
	})(CompPanelUI)


	/**
	*时间轴面板
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-4 上午10:57:19
	*/
	//class laya.editor.view.TimeLinePanel extends laya.editor.ui.TimeLinePanelUI
	var TimeLinePanel=(function(_super){
		function TimeLinePanel(){
			this.dragBar=null;
			this.nodeTree=null;
			this.minBarX=170;
			this.propMenu=null;
			this.aniData=null;
			this.tAniData=null;
			this.aniChanged=true;
			this.frameRate=30;
			this._maxFrame=0;
			this._treeData=null;
			this.timeRec=null;
			this.msRec=new Rectangle();
			this._sureFun=Utils.bind(this.removeAniSure,this);
			TimeLinePanel.__super.call(this);
			this.size(300,300);
			this.freeSize=true;
			this.nodeTree=new TimeLineTree();
			this.nodeTree.top=this.timeLine.y+TimeGrid.titleHeight-1;
			this.nodeTree.bottom=29;
			this.nodeTree.left=2;
			this.nodeTree.itemRender=TreeNodeRender;
			this.nodeTree.mList.replaceScrollBar(this.mVScroll);
			this.nodeTree.on("rightclick",this,this.onTreeRightMouseDown);
			this.nodeTree.renderHandler=new Handler(this,this.timeLineTreeRender);
			this.nodeTree.mouseHandler=new Handler(this,this.onTimeLineTreeMouse);
			this.nodeTree.array=[];
			this.addChild(this.nodeTree);
			this.aniSelect.visibleNum=10;
			this.mHScroll.target=this.timeLine;
			this.mHScroll.on("change",this,this.hScrollChange);
			this.mVScroll.on("change",this,this.vScrollChange);
			this.dragBar=new DragBar();
			this.dragBar.width=2;
			this.dragBar.top=this.timeLine.y;
			this.dragBar.bottom=this.mHScroll.height+2;
			this.addChild(this.dragBar);
			this.dragBar.x=this.minBarX;
			this.dragBar.on("mousedown",this,this.dragBarMouseDown);
			this.dragBar.on("dragend",this,this.dragBarDragEnd);
			this.dragBar.on("dragmove",this,this.dragBarDragEnd);
			this.nodeTree.mList.on("ListChange",this,this.listChange);
			this.timeLine.on("TIMELINE_CLICKFRAME",this,this.clickFrame);
			this.editMode.on("change",this,this.modeChange);
			this.addListens();
			this.modeChange();
			DisControlTool.setTop(this.opMask);
			this.addBtn.on("click",this,this.addAni);
			this.cloneBtn.on("click",this,this.cloneBtnDown);
			this.removeBtn.on("click",this,this.removeAni);
			this.aniSelect.on("change",this,this.aniSelecteChange);
			this.frameRateTxt.mouseEnabled=true;
			DisTools.addTextChangeHandler(this.frameRateTxt,this,this.frameRateTxtChange);
			this.frameTxt.mouseEnabled=true;
			DisTools.addTextChangeHandler(this.frameTxt,this,this.frameTxtChange);
			this.propMenu=ContextMenu$1.createMenuByArray2(["删除"]);
			this.propMenu.on("select",this,this.onEmunSelect);
			this.action.on("change",this,this.playActionChange);
			this.on("keydown",this,this.onKeyDown);
			this.on("mousedown",this,this.onMouseDown);
			this.timelineSizeControl.on("change",this,this.timeLineWidthChange);
			this.timelineSizeControl.value=TimeGrid.frameWidth;
			this.circlePlay.mouseThrough=true;
			this.clearDatas();
		}

		__class(TimeLinePanel,'laya.editor.view.TimeLinePanel',_super);
		var __proto=TimeLinePanel.prototype;
		__proto.cloneBtnDown=function(){
			this.aniData.cloneAni();
			this.dataChanged();
			this.aniChanged=true;
			this.reFresh();
		}

		__proto.setFrame=function(frame){
			if(frame>=0){
				if(this.timeLine){
					if(frame!=this.timeLine.selectFrame)
						this.timeLine.selectFrame=frame;
				}
			}
		}

		__proto.frameTxtChange=function(){
			var tFrame=0;
			tFrame=Utils.parseInt(this.frameTxt.text);
			if(tFrame>=0){
				}else{
				this.frameTxt.text=0+"";
				tFrame=0;
			}
			if(!this.aniData)return;
			if(!this.tAniData)return;
			if(tFrame!=this.timeLine.selectFrame)
				this.timeLine.selectFrame=tFrame;
		}

		__proto.timeLineWidthChange=function(e){
			this.timeLine.changeFrameWidth(this.timelineSizeControl.value);
		}

		__proto.onMouseDown=function(e){
			Laya.stage.focus=this;
		}

		__proto.switchPlayAction=function(){
			if(this.playControlBar.isPlaying){
				this.stopAni();
				}else{
				this.beginPlay();
			}
		}

		__proto.onKeyDown=function(e){
			if(!this.aniData)return;
			if(!this.tAniData)return;
			switch(e.keyCode){
				case 13:
					if(Utils.parseInt(this.frameTxt.text)!=this.timeLine.selectFrame){
						}else{
						this.switchPlayAction();
					}
					break ;
				case 39:
					this.playControl("PLAYCONTROL_Next");
					break ;
				case 37:
					this.playControl("PLAYCONTROL_Pre");
					break ;
				}
			this.timeLine.onKeyDown(e);
		}

		/**处理菜单选择*/
		__proto.onEmunSelect=function(name){
			var target;
			if (this.nodeTree.selectedItem){
				target=this.nodeTree.selectedItem;
				}else{
				return;
			};
			var aniItem;
			aniItem=target.path;
			switch (name){
				case "删除":
					if(target.isDirectory){
						this.aniData.removeNode(target.target);
						}else{
						this.aniData.removeNodeProp(target.target,target.key);
					}
					this.dataChanged();
					this.aniChanged=true;
					this.reFresh();
					break ;
				case "Clone动画":
					this.aniData.cloneAni();
					this.dataChanged();
					this.aniChanged=true;
					this.reFresh();
					break ;
				}
		}

		__proto.playActionChange=function(){
			if(!this.tAniData)return;
			if(this.tAniData.action==this.action.selectedIndex)return;
			this.tAniData.action=this.action.selectedIndex;
			this.updatePlayAction();
			this.dataChanged();
		}

		__proto.frameRateTxtChange=function(){
			var rate=0;
			rate=parseInt(this.frameRateTxt.text);
			if(ObjectTools.isNumber(rate)&&rate>0){
				if(this.tAniData){
					this.tAniData.frameRate=rate;
					this.updateRateInfo();
				}
			}
			this.dataChanged();
			if(this.playControlBar.isPlaying){
				this.beginPlay();
			}
		}

		__proto.modeChange=function(){
			if(this.aniData){
				if(this.aniData.design.isGraphicAnimation){
				}
			}
			this.opMask.visible=!this.editMode.selected;
			if(this.aniData){
				this.aniData.design.isAnimationMode=this.editMode.selected;
			}
			if(this.editMode.selected){
			}
		}

		// LayoutRecManager.showPanelByClassName("FramePropPanel");
		__proto.addListens=function(){
			Notice$1.listen("PlayControl_ToBeginPos",this,this.playControl);
			Notice$1.listen("PLAYCONTROL_Pre",this,this.playControl);
			Notice$1.listen("PLAYCONTROL_Play",this,this.playControl);
			Notice$1.listen("PLAYCONTROL_Stop",this,this.playControl);
			Notice$1.listen("PLAYCONTROL_Next",this,this.playControl);
			Notice$1.listen("PLAYCONTROL_TOEndPOS",this,this.playControl);
			Notice$1.listen("Fresh_animationData",this,this.freshAnimationData);
			Notice$1.listen("Add_animationNode",this,this.addAnimationNode);
			Notice$1.listen("AnimationMode_Change",this,this.onAnimationModeChange);
			Notice$1.listen("PLAYCONTROL_SwitchPlay",this,this.switchPlayAction);
			Notice$1.listen("SELECTED_NODES",this,this.onSelectedNodes);
		}

		__proto.removeListens=function(){}
		__proto.onSelectedNodes=function(nodes){
			if(!this.aniData)return;
			if(!nodes||!nodes[0])return;
			var tSelect;
			tSelect=nodes[0];
			if(!tSelect.comXml)return;
			this.trySelectNode(tSelect.comXml.compId);
		}

		__proto.onAnimationModeChange=function(){
			this.editMode.selected=this.aniData.design.isAnimationMode;
			IDEVars.isAnimationEditMode=this.editMode.selected;
			if(!this.editMode.selected){
				FramePropPanel.instance.clearData();
			}
			this.updateAniSelect();
		}

		__proto.addAnimationNode=function(nodeId){
			if(!this.aniData)return;
			this.aniData.addNode(nodeId);
			this.freshAnimationData(this.aniData);
			this.dataChanged();
		}

		__proto.changeAniName=function(aniName){
			if(!this.tAniData)return aniName;
			if(this.tAniData.name==aniName)return aniName;
			if(!this.aniData)return aniName;
			if(this.aniData.isNewNameOk(aniName)){
				}else{
				MessageManager.instance.show(Sys.lang("动画名不能相同"));
				return this.tAniData.name;
			}
			this.tAniData.name=aniName;
			this.aniData.selectAniByAniName(aniName);
			this.freshAnimationData(this.aniData);
			this.dataChanged();
			return aniName;
		}

		__proto.changeNodeID=function(preID,newID){
			this.aniData.changeNodeId(preID,newID);
			this.freshAnimationData(this.aniData);
			this.dataChanged();
		}

		__proto.frameLabelChanged=function(){
			this.freshAnimationData(this.aniData);
			this.dataChanged();
		}

		__proto.dataChanged=function(){
			if(this.aniData&&this.aniData.design){
				this.aniData.design.hasChange=true;
				this.aniData.design.cacheAni();
			}
		}

		__proto.reFresh=function(){
			laya.editor.view.TimeLinePanel.instance.dataChanged();
			this.freshAnimationData(this.aniData);
		}

		__proto.addAni=function(){
			if(!this.aniData)return;
			this.aniData.addAni();
			this.freshAnimationData(this.aniData);
			this.dataChanged();
		}

		__proto.removeAni=function(){
			if(!this.aniData)return;
			Confirm.show(Sys.lang("是否确认删除[{0}]动画？",this.aniData.selectLabel),Sys.lang("是否删除动画"),this._sureFun);
		}

		__proto.removeAniSure=function(ok){
			if(!ok)return;
			if(!this.aniData)return;
			this.aniData.removeAniByAniName(this.aniData.selectLabel);
			if(this.aniData.animations.length<1)this.aniData.addAni();
			this.aniData.selectAniByIndex(0);
			this.freshAnimationData(this.aniData);
			this.dataChanged();
		}

		__proto.freshAnimationData=function(animationData){
			if(!animationData){
				return;
			}
			this.mouseEnabled=true;
			this.aniData=animationData;
			var preSelect;
			preSelect=this.aniData.selectLabel;
			this.aniSelect.labels=this.aniData.getAnimationSelects();
			this.aniSelect.selectedLabel=preSelect;
			this.onAnimationModeChange();
		}

		__proto.freshData=function(){
			this.updateAniSelect();
		}

		__proto.aniSelecteChange=function(){
			this.aniChanged=true;
			this.updateAniSelect();
		}

		__proto.updateAniSelect=function(){
			if(!this.aniData)return;
			this.aniData.selectAniByAniName(this.aniSelect.selectedLabel);
			this.tAniData=this.aniData.tSelectAni;
			this.updateRateInfo();
			this.updatePlayAction();
			FramePropPanel.instance.setAnimationName(this.tAniData.name);
			if(this.aniData.design.isAnimationMode){
				this.enableEdit();
			}
		}

		__proto.updateRateInfo=function(){
			this.frameRateTxt.text=this.tAniData.frameRate+"";
			this.frameRate=this.tAniData.frameRate;
		}

		__proto.updatePlayAction=function(){
			if(!this.tAniData.action){
				this.tAniData.action=0;
			}
			this.action.selectedIndex=this.tAniData.action;
		}

		__proto.enableEdit=function(){
			var dataArr=this.aniData.getAniDataList();
			if(this.aniChanged){
				this.aniData.targetAnimation.displayToInitState();
				this.timeLine.selectFrame=this.timeLine.selectFrame;
				this.timeLine.frameCount=this.getMaxFrame()+80;
				this.mHScroll.setScroll(0,this.timeLine.startXRange,this.timeLine.lineScrollX);
				this.mHScroll.thumbPercent=(this.timeLine.frameCount-this.timeLine.startXRange)/this.timeLine.frameCount;
			}
			this.nodeTree.array=dataArr;
			this.aniChanged=false;
		}

		__proto.updateTimeLineFrame=function(frameCount){
			this.timeLine.frameCount=frameCount;
			this.mHScroll.setScroll(0,this.timeLine.startXRange,this.timeLine.lineScrollX);
			this.mHScroll.thumbPercent=(this.timeLine.frameCount-this.timeLine.startXRange)/this.timeLine.frameCount;
			this.timeLine.renderData();
		}

		__proto.playControl=function(action){
			if(!this.aniData)return;
			if(!this.tAniData)return;
			switch(action){
				case "PlayControl_ToBeginPos":
					this.timeLine.selectFrame=0;
					break ;
				case "PLAYCONTROL_Pre":
					if(this.timeLine.selectFrame>0){
						this.timeLine.selectFrame--;
						}else{
						this.timeLine.selectFrame=this.getMaxFrame();
					}
					break ;
				case "PLAYCONTROL_Play":
					this.beginPlay();
					break ;
				case "PLAYCONTROL_Stop":
					this.stopAni();
					break ;
				case "PLAYCONTROL_Next":
					if(this.timeLine.selectFrame<this.getMaxFrame()){
						this.timeLine.selectFrame++;
						}else{
						this.timeLine.selectFrame=0;
					}
					break ;
				case "PLAYCONTROL_TOEndPOS":
					this.timeLine.selectFrame=this.getMaxFrame();
					break ;
				}
		}

		__proto.getMaxFrame=function(){
			this._maxFrame=this.aniData.targetAnimation.count;
			return this._maxFrame;
		}

		__proto.beginPlay=function(){
			this.playControlBar.setIfPlay(true);
			if(this.timeLine.selectFrame>=this.getMaxFrame()){
				this.timeLine.selectFrame=0;
			}
			if(this.frameRate<1)this.frameRate=30;
			Laya.timer.loop(1000/this.frameRate,this,this.playAni,null,true);
		}

		__proto.playAni=function(){
			if(this.timeLine.selectFrame<this._maxFrame){
				this.timeLine.selectFrame++;
				}else{
				if(this.circlePlay.selected){
					this.timeLine.selectFrame=0;
					}else{
					this.stopAni();
				}
			}
		}

		__proto.stopAni=function(){
			this.playControlBar.setIfPlay(false);
			Laya.timer.clear(this,this.playAni);
		}

		__proto.selectItem=function(compId){}
		//nodeTree.selectByCompId(compId);
		__proto.clearDatas=function(){
			this.stopAni();
			this.aniData=null;
			this.editMode.selected=false;
			this.aniSelect.labels=",1";
			this.aniSelect.selectedIndex=0;
			this.nodeTree.array=[];
			this.timeLine.setData([]);
			this.mouseEnabled=false;
		}

		__proto.setData=function(data){
			return;
			if(!data){
				this.nodeTree.array=[];
				this.timeLine.setData([]);
				return;
			}
			this._treeData=data;
			this.nodeTree.setTreeData(this._treeData);
		}

		__proto.clickFrame=function(layer,frame){
			if(layer>=0){
				this.nodeTree.selectedIndex=layer;
				}else{
				return;
			}
			if(frame>this.timeLine.frameCount-40){
				this.updateTimeLineFrame(frame+40);
			};
			var selectItem;
			selectItem=this.nodeTree.mList.array[layer];
			if(!selectItem)return;
			this.updateSelect(selectItem.target);
		}

		//Notice.notify(IDEEvent.TIMELINE_FRAME_SELECTED,[frame]);
		__proto.updateSelect=function(target){
			TimeLinePanel.fromMe=true;
			if(this.selectItem){
				Notice$1.notify("Display_selected",[target]);
			}
			Laya.timer.frameOnce(2,this,this.clearFromMe);
		}

		__proto.clearFromMe=function(){
			TimeLinePanel.fromMe=false;
		}

		__proto.trySelectNode=function(nodeId){
			if(TimeLinePanel.fromMe)return;
			if(!this.nodeTree)return;
			if(this.nodeTree.selectedIndex>=0){
				if(this.nodeTree.selectedItem&&this.nodeTree.selectedItem.target==nodeId){
					return;
				}
			};
			var items;
			items=this.nodeTree.mList.array;
			if(!items)return;
			var i=0,len=0;
			len=items.length;
			var tItem;
			for(i=0;i<len;i++){
				tItem=items[i];
				if(tItem&&tItem.target==nodeId){
					this.nodeTree.mList.selectedIndex=i;
					return;
				}
			}
		}

		// debugger;
		__proto.listChange=function(dataList){
			if(this.aniData){
				this.timeLine.keyIndexDic=this.aniData.keyIndexDic;
				}else{
				this.timeLine.keyIndexDic=null;
			}
			this.timeLine.setData(dataList);
		}

		__proto.dragBarMouseDown=function(e){
			var option;
			option={};
			option.area=new Rectangle(this.minBarX,this.dragBar.y,this.width-100,0);
			this.dragBar.startDrag(option.area);
		}

		__proto.dragBarDragEnd=function(e){
			this.adptTimeLineSize();
		}

		__proto.hScrollChange=function(e){
			this.timeLine.setHScrollValue(this.mHScroll.value);
		}

		__proto.vScrollChange=function(e){
			this.timeLine.setVScrollValue(this.mVScroll.value);
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			this.msRec.setTo(0,0,this.width,this.height);
			this.scrollRect=this.msRec;
			this.adptTimeLineSize();
		}

		__proto.adptTimeLineSize=function(){
			this.dragBar.x=Math.floor(this.dragBar.x);
			this.timeLine.x=this.dragBar.x+1;
			this.timeLine.size(this.width-this.timeLine.x-8,this.height-30-this.timeLine.y);
			this.nodeTree.width=this.dragBar.x-this.nodeTree.x;
			this.timeLine.adptToSize();
			this.mHScroll.setScroll(0,this.timeLine.startXRange,this.timeLine.lineScrollX);
			this.mHScroll.thumbPercent=(this.timeLine.frameCount-this.timeLine.startXRange)/this.timeLine.frameCount;
		}

		// mVScroll.thumbPercent=(timeLine.layerCount-timeLine.startYRange)/timeLine.layerCount;
		__proto.timeLineTreeRender=function(cell,index){
			var item=cell.dataSource;
			if (item){
				var nodeRender;
				nodeRender=cell;
				var icon=nodeRender.icon;
				var isDirectory=item.child || item.isDirectory;
				icon.width=StyleConsts$1.DisplayIconWidth;
				icon.height=StyleConsts$1.DisplayIconHeight;
				if (item.hasChild){
					icon.skin=UIConfigManager.getCompTreeIcon(item.type);
					}else {
					icon.skin="comp/prop.png";
				};
				var label=nodeRender.label;
				if(isDirectory&&item.loseTarget){
					label.color="#ff0000";
					label.text=item.label+Sys.lang("(!对象丢失!)");
					cell.toolTip=Sys.lang("点击对象帧，可在帧属性面板修改目标对象");
					}else{
					label.color=StyleConsts$1.ItemTxtColor;
					label.text=item.label;
					cell.toolTip=null;
				}
			}
		}

		__proto.onTimeLineTreeMouse=function(e,index){
			var cell=this.nodeTree.list.getCell(index);
			var item=cell.dataSource;
			if (!item)return;
			var label=cell.getChildByName("label");
			if (e.type=="mousedown"){
				var selectItem;
				selectItem=this.nodeTree.mList.array[index];
				if(selectItem){
					this.timeLine.clickLayer=index;
					this.timeLine.updateFocusFrame();
					this.updateSelect(selectItem.target);
				}
				}if (e.type=="mouseover"){
				label.color=StyleConsts$1.ItemSelectColor;
			}else
			if(index==this.nodeTree.selectedIndex){
			}else
			if (e.type=="mouseout"){
				label.color=item.hasChild?StyleConsts$1.FolderTxtColor:StyleConsts$1.ItemTxtColor;
			}
		}

		/**处理右键选择*/
		__proto.onTreeRightMouseDown=function(e){
			var selectItem;
			selectItem=this.nodeTree.selectedItem;
			if(selectItem){
				this.propMenu.show();
			}
		}

		__proto.noticeSelecte=function(){}
		__getset(1,TimeLinePanel,'instance',function(){
			return TimeLinePanel._instance ? TimeLinePanel._instance :TimeLinePanel._instance=new TimeLinePanel();
		},laya.editor.ui.TimeLinePanelUI._$SET_instance);

		TimeLinePanel._instance=null
		TimeLinePanel.fromMe=false;
		return TimeLinePanel;
	})(TimeLinePanelUI)


	/**UI管理器
	*@author yung
	*/
	//class laya.editor.view.UIPanel extends laya.editor.ui.UIPanelUI
	var UIPanel=(function(_super){
		function UIPanel(){
			this._currViewer=null;
			this._copyTemp=null;
			this.tabEx=null;
			this._menu=null;
			UIPanel.__super.call(this);
			this._container=new Box();
			this._mScrollRec=new Rectangle();
			this.init();
			this.canClose=false;
			this.canMix=false;
			this.tabEx=this.tab;
			this._container.width=100;
			this._container.height=100;
			this._container.top=25;
			this._container.bottom=0;
			this._container.left=0;
			this._container.right=0;
			this._container.mouseEnabled=true;
			this.addChild(this._container);
			this.on("mousewheel",this,this.mouseWheel);
		}

		__class(UIPanel,'laya.editor.view.UIPanel',_super);
		var __proto=UIPanel.prototype;
		__proto.mouseWheel=function(e){
			laya.editor.view.UIPanel.instance.setScale(e.delta/100);
		}

		// }
		__proto.initListener=function(){
			Notice$1.listen("closePage",this,this.closePage);
			Notice$1.listen("openPAGE",this,this.openPage);
			Notice$1.listen("Focus_design",this,this.focusDesign);
			Notice$1.listen("FRESH_CurView",this,this.refreshCurrView);
			Notice$1.listen("DELETE_SELECTED",this,this.deleteSelecteForce);
		}

		__proto.init=function(){
			this.tab.on("change",this,this.onTabChange);
			this.tab.on("doubleclick",this,this.onTabDoubleClick);
			this.on("mouseover",this,this.onRollOver);
			this.initTabMenu();
		}

		__proto.hasPageOpen=function(){
			return this.tabEx.items.length>0;
		}

		__proto.changeSize=function(){
			laya.ui.Component.prototype.changeSize.call(this);
			ViewRenderManager.adpt();
			CodeViewManager.adpt();
			this.tabEx.maxLen=this.width;
			this.tabEx.updateUI();
			this._mScrollRec.setTo(0,0,this._container.width,this._container.height);
			this._container.scrollRect=this._mScrollRec;
		}

		__proto.onRollOver=function(e){
			if(!((this._currViewer instanceof laya.editor.view.UIViewer ))){
				return;
			}
			if (this._currViewer !=null && this.stage.focus !=this._currViewer.design && this._currViewer.viewStack.selectedIndex==0){}
				}
		/**双击关闭页面*/
		__proto.onTabDoubleClick=function(e){
			if (this._currViewer){
				this.tryToClose(this._currViewer);
			}
		}

		/**如果内容没有保存，提示保存*/
		__proto.tryToClose=function(uiViewer){
			if (uiViewer.hasChange){
				var filePath=FileManager.getRelativePath(SystemSetting.pagesPath,uiViewer.pagePath).replace(".xml","");
				NeedSave.instance.start(Sys.lang("是否保存 [{0}] 的更改？",filePath),new Handler(this,this.saveBack,[uiViewer]),new Handler(this,this.closeBack,[uiViewer]));
				}else {
				this.closeBack(uiViewer);
			}
		}

		/**保存后关闭*/
		__proto.saveBack=function(uiViewer){
			uiViewer.save();
			this.closePage(uiViewer.pagePath);
		}

		/**处理页面关闭*/
		__proto.closeBack=function(uiViewer){
			if(uiViewer==this._currViewer){
				this.clearPanelsData();
			}
			this.closePage(uiViewer.pagePath);
		}

		__proto.clearPanelsData=function(){
			PropPanel.instance.initByObj(null,null,-1);
			DisplayTreePanel.instance.init(null);
			TimeLinePanel.instance.clearDatas();
			FramePropPanel.instance.clearData();
			FramePropPanel.instance.setAnimationName("");
		}

		/**切换标签时刷新页面*/
		__proto.onTabChange=function(e){
			if (this._currViewer){
				this._currViewer.removeSelf();
				this._currViewer=null;
				QuickTool.instance.setShowBtns(["Common"]);
			}
			this.clearPanelsData();
			if (this.tab.selectedIndex !=-1){
				this._currViewer=(this.tab.selection).uiViewer;
				if(this._currViewer){
					if(this._currViewer.pagePath!="欢迎页"){
						LayoutRecManager.layoutByPagePath(this._currViewer.pagePath);
						}else{
						LayoutRecManager.layoutToPageType("page");
					}
				}
				if((this._currViewer instanceof laya.editor.view.ani.AnimationViewer )){
				}
				if(!((this._currViewer instanceof laya.editor.view.UIViewer ))){
					(this._currViewer).setUp(this._container);
					(this._currViewer).show();
					}else{
					this._container.addChild(this._currViewer);
					this._currViewer.onActive();
					QuickTool.instance.setShowBtns(["Common","Zoom","Align"]);
				}
				this.refreshCurrView();
			}
			this.stage.event("pageChanged");
		}

		/**初始化右键菜单*/
		__proto.initTabMenu=function(){
			var menu=ContextMenu$1.createMenu("关闭","关闭其他","关闭全部");
			menu.on("select",this,this.onEmunSelect);
			this._menu=menu;
			this.tab.on("rightmousedown",this,this.onTabRightMouseDown);
		}

		__proto.onTabRightMouseDown=function(e){
			for (var i=0,n=this.tab.numChildren;i < n;i++){
				var viewTab=this.tab.getChildAt(i);
				if (viewTab && e.target.parent==viewTab){
					if(this.tab.selectedIndex!=i)
						this.tab.selectedIndex=i;
					this._menu.show();
					break ;
				}
			}
		}

		//}
		__proto.onEmunSelect=function(name){
			switch (name){
				case "关闭":
					this.closePage(this._currViewer.pagePath);
					break ;
				case "关闭其他":
					this.closeAll(null,null,this.tab.selectedIndex);
					break ;
				case "关闭全部":
					this.closeAll();
					break ;
				}
		}

		/**关闭页面*/
		__proto.closePage=function(pagePath){
			StateManager.removeState(pagePath);
			StateManager.setChangeState(pagePath,false);
			var index=this.getTabIndex(pagePath);
			if (index !=-1){
				if(this.tab.items[index]){
					var viewTab=this.tab.items [index];
					if(viewTab&&viewTab.uiViewer&&viewTab.uiViewer.clears!=null){
						viewTab.uiViewer.clears();
					}
				}
				this.tab.delItem(this.tab.items[index]);
				this.onTabChange(null);
				if (this.tab.items.length==0){
					PropPanel.instance.clear();
				}
			}
		}

		/**获得页面索引*/
		__proto.getTabIndex=function(pagePath){
			for (var i=0,n=this.tab.items.length;i < n;i++){
				var viewTab=this.tab.items [i];
				if (pagePath==viewTab.uiViewer.pagePath){
					return i;
				}
			}
			return-1;
		}

		/**显示页面*/
		__proto.openPage=function(pagePath,title){
			var index=this.getTabIndex(pagePath);
			var viewTab;
			var viewer;
			if (index==-1){
				if((pagePath instanceof laya.display.Node )){
					viewer=new UIPageScene();
					viewer.pagePath=title;
					viewer["data"]=pagePath;
					viewTab=new ViewTab(viewer,ClassTool.getClassName(pagePath));
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.isXmlViewFile(pagePath)){
					viewer=new XmlEditorScene();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
				}
				else if(TypeManager.getFileType(pagePath)=="particle"||TypeManager.getFileType(pagePath)=="particle3D"||TypeManager.getFileType(pagePath)=="particlepoly"){
					viewer=new ParticleScene();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(pagePath.indexOf("http://")>=0){
					viewer=new WebPageScene();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="animation"){
					viewer=new AnimationViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="scene"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="page"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="Prefab"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="prefab_ui"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="graphic_animation"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else if(TypeManager.getFileType(pagePath)=="MoveEffect"){
					viewer=new UIViewer();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
					}else{
					viewer=new CodeScene();
					viewer.pagePath=pagePath;
					viewTab=new ViewTab(viewer);
					index=this.tab.addItem(viewTab);
				}
			}
			this.tab.selectedIndex=index;
		}

		/**保存当前页面*/
		__proto.save=function(){
			if (this._currViewer !=null){
				this._currViewer.save();
			}
		}

		/**增加容器*/
		__proto.boxComp=function(type){
			if (this._currViewer !=null){
				this._currViewer.dealAction("boxComp",[type]);
			}
		}

		/**去除容器*/
		__proto.unBoxComp=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("unBoxComp");
			}
		}

		/**对齐组件*/
		__proto.alignComp=function(type){
			if (this._currViewer !=null){
				this._currViewer.dealAction("alignComp",[type]);
			}
		}

		/**放置组件*/
		__proto.placeComp=function(type){
			if (this._currViewer !=null){
				this._currViewer.dealAction("placeComp",[type]);
			}
		}

		/**平均组件间隔*/
		__proto.spaceComp=function(type){
			if (this._currViewer !=null){
				this._currViewer.dealAction("spaceComp",[type]);
			}
		}

		/**缩放页面*/
		__proto.setScale=function(change){
			if (this._currViewer !=null){
				if (this._currViewer.scaleView+change > 0){
					this._currViewer.scaleView+=change;
				}
			}
		}

		/**恢复页面缩放Ctrl+|*/
		__proto.resizeScale=function(){
			if (this._currViewer !=null){
				this._currViewer.scaleView=1;
			}
		}

		/**复制组件*/
		__proto.copy=function(){
			if (this._currViewer !=null){
				if(!this.isFocusOK())return;
				this._copyTemp=this._currViewer.design.selectedXmls;
			}
		}

		__proto.isFocusOK=function(){
			if((Laya.stage.focus instanceof laya.editor.core.Design ))return true;
			if(DisControlTool.isInTree(DisplayTreePanel.instance,Laya.stage.focus)){
				return true;
			}
			return false;
		}

		/**剪切*/
		__proto.cut=function(){
			if (this._currViewer !=null){
				if(!this.isFocusOK())return;
				var selectedXmls=this._currViewer.design.selectedXmls;
				if (selectedXmls.length > 0){
					this._copyTemp=selectedXmls;
					this._currViewer.dealAction("delSelectedComps");
				}
			}
		}

		/**粘贴组件*/
		__proto.pasteComp=function(samePoint){
			if(!this.isFocusOK())return;
			if (this._currViewer !=null && this._copyTemp !=null){
				this._currViewer.dealAction("pasteComp",[this._copyTemp,samePoint]);
			}
		}

		//}
		__proto.getCopyTemp=function(){
			return this._copyTemp;
		}

		/**重复组件*/
		__proto.repeatComp=function(row,column,paddingX,paddingY){
			if (this._currViewer !=null){
				this._currViewer.dealAction("repeatComp",[row,column,paddingX,paddingY]);
			}
		}

		/**刷新当前视图*/
		__proto.refreshCurrView=function(){
			if (this._currViewer !=null){
				this.stage.focus=this._currViewer.design;
				this._currViewer.dealAction("refresh");
			}
		}

		/**刷新当前图层视图*/
		__proto.refreshLayerView=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("refreshCompsByLayer");
			}
		}

		/**刷新当前图层视图*/
		__proto.clearSelectByLayer=function(layer){
			if (this._currViewer !=null){
				this._currViewer.dealAction("clearSelectByLayer",[layer]);
			}
		}

		/**刷新当前图层视图*/
		__proto.refreshAtLayerChanged=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("refreshAtLayerChanged");
			}
		}

		/**根据层选择组件*/
		__proto.selectByLayer=function(layer){
			if (this._currViewer !=null){
				this._currViewer.dealAction("selectByLayer",[layer]);
			}
		}

		/**恢复*/
		__proto.goBack=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("goBack");
			}
		}

		/**重置*/
		__proto.goForward=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("goForward");
			}
		}

		/**预览*/
		__proto.preview=function(){
			if (this._currViewer !=null){
				Preview.instance.start(this._currViewer.design.xml);
			}
		}

		/**显示隐藏参考视图*/
		__proto.toggleBg=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("toggleBg");
			}
		}

		__proto.switchRuleGrid=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("switchRuleGrid");
			}
		}

		/**保存所有*/
		__proto.saveAll=function(){
			var viewTab;
			for(var $each_viewTab in this.tab.items){
				viewTab=this.tab.items[$each_viewTab];
				viewTab.uiViewer.save();
			}
		}

		__proto.hasNotSavedFile=function(){
			for (var j=0;j < this.tab.items.length;j++){
				var viewTab=this.tab.items [j];
				if (viewTab.uiViewer.hasChange){
					return true;
				}
			}
			return false;
		}

		/**关闭所有*/
		__proto.closeAll=function(complete,args,exceptIndex){
			var _$this=this;
			(exceptIndex===void 0)&& (exceptIndex=-1);
			for (var j=0;j < this.tab.items.length;j++){
				if (j !=exceptIndex){
					var viewTab=this.tab.items [j];
					if (viewTab.uiViewer.hasChange){
						SaveUnSavedDialog.I.layaPageSaveAndCallBack(saveAllBack,closeAllBack);
						return;
					}
				}
			}
			closeAllBack();
			function saveAllBack (){
				_$this.saveAll();
				closeAllBack();
			}
			function closeAllBack (){
				for (var i=_$this.tab.items.length-1;i >-1;i--){
					if (i !=exceptIndex){
						var view=(_$this.tab.items[i]).uiViewer;
						_$this.closePage(view.pagePath);
					}
				}
				if (complete !=null){
					complete.apply(null,args);
				}
			}
		}

		/**关闭当前页面*/
		__proto.closeCurrPage=function(){
			this.onTabDoubleClick(null);
		}

		/**删除选择*/
		__proto.deleteSelect=function(){
			if (this._currViewer !=null){
				if(!((Laya.stage.focus instanceof laya.editor.core.Design )))return;
				this._currViewer.dealAction("delSelectedComps");
			}
		}

		__proto.deleteSelecteForce=function(){
			if (this._currViewer !=null){
				this._currViewer.dealAction("delSelectedComps");
			}
		}

		/**全选*/
		__proto.selectAll=function(){
			if (this._currViewer !=null){
				if(!((Laya.stage.focus instanceof laya.editor.core.Design )))return;
				this._currViewer.dealAction("selectAll");
			}
		}

		/**更改同层先后顺序*/
		__proto.sortComp=function(up){
			(up===void 0)&& (up=true);
			if (this._currViewer !=null){
				this._currViewer.dealAction("sortComp",[up]);
			}
		}

		/**改变层*/
		__proto.moveLayer=function(up){
			(up===void 0)&& (up=true);
			if (this._currViewer !=null){
				this._currViewer.dealAction("moveLayer",[up]);
			}
		}

		/**获得ui视图*/
		__proto.getUIViewer=function(pagePath){
			var viewTab;
			for(var $each_viewTab in this.tab.items){
				viewTab=this.tab.items[$each_viewTab];
				if (viewTab.uiViewer.pagePath==pagePath){
					return viewTab.uiViewer;
				}
			}
			return null;
		}

		/**设置焦点*/
		__proto.focusDesign=function(){
			if (this._currViewer !=null){
				this.stage.focus=this._currViewer.design
			}
		}

		__getset(0,__proto,'currViewer',function(){
			return this._currViewer;
		});

		/**是否有变化*/
		__getset(0,__proto,'hasChange',function(){
			var viewTab;
			for(var $each_viewTab in this.tab.items){
				viewTab=this.tab.items[$each_viewTab];
				if (viewTab.uiViewer.design.hasChange){
					return true;
				}
			}
			return false;
		});

		/**打开的页面*/
		__getset(0,__proto,'openPages',function(){
			var arr=[];
			var viewTab;
			for(var $each_viewTab in this.tab.items){
				viewTab=this.tab.items[$each_viewTab];
				arr.push(viewTab.uiViewer.pagePath);
			}
			return arr;
		});

		__getset(1,UIPanel,'instance',function(){
			return UIPanel._instance ? UIPanel._instance :UIPanel._instance=new UIPanel();
		},laya.editor.ui.UIPanelUI._$SET_instance);

		UIPanel._instance=null
		UIPanel.borderWidth=1;
		UIPanel.topLen=25;
		return UIPanel;
	})(UIPanelUI)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-15 上午9:53:50
	*/
	//class laya.editor.view.ani.AnimationViewer extends laya.editor.view.UIViewer
	var AnimationViewer=(function(_super){
		function AnimationViewer(){
			AnimationViewer.__super.call(this);
		}

		__class(AnimationViewer,'laya.editor.view.ani.AnimationViewer',_super);
		return AnimationViewer;
	})(UIViewer)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2015-12-15 上午9:55:29
	*/
	//class laya.editor.view.ani.AnimationDesign extends laya.editor.core.Design
	var AnimationDesign=(function(_super){
		function AnimationDesign(){
			this._frame=0;
			AnimationDesign.__super.call(this);
		}

		__class(AnimationDesign,'laya.editor.view.ani.AnimationDesign',_super);
		var __proto=AnimationDesign.prototype;
		__proto.addListens=function(){
			_super.prototype.addListens.call(this);
			Notice$1.listen("TimeLineFrameSelected",this,this.frameSelected,null,true);
			Notice$1.listen("TimeLine_changed",this,this.timeLineChanged,null,true);
			Notice$1.listen("RECORD_KEYFRAME",this,this.makeKeyframeByNodeId);
		}

		__proto.removeListens=function(){
			_super.prototype.removeListens.call(this);
			Notice$1.cancel("TimeLineFrameSelected",this,this.frameSelected);
			Notice$1.cancel("TimeLine_changed",this,this.timeLineChanged);
			Notice$1.cancel("RECORD_KEYFRAME",this,this.makeKeyframeByNodeId);
		}

		__proto.makeKeyframeByNodeId=function(nodeID){
			if(!this.isAnimationMode)return;
			if(!this.animation)return;
			var node;
			node=this.getCompOById(nodeID);
			if(!node)return;
			this.animation.addNodeFrame(node,"x",this.frame,true);
			this.hasChange=true;
			TimeLinePanel.instance.dataChanged();
			Laya.timer.once(200,this,this.updateTimeLinePanel,null,true);
		}

		__proto.frameSelected=function(selectFrame){
			this.frame=selectFrame;
		}

		__proto.timeLineChanged=function(){
			this.changeXml(this._xml,false);
		}

		__proto.setAnimationData=function(){
			TimeLinePanel.instance.setFrame(this._frame);
			_super.prototype.setAnimationData.call(this);
		}

		/**
		*显示UI到当前帧
		*
		*/
		__proto.showToFrame=function(){
			this.animation.targetAnimation.displayToFrame(this.frame);
		}

		/**
		*更新节点树
		*@param comp
		*
		*/
		__proto.updateUIs=function(comp){
			this.freshComp(comp);
			var i=0,len=0;
			var childs;
			childs=DisControlTool.getAllChild(comp);
			len=childs.length;
			for(i=0;i<len;i++){
				this.updateUIs(childs[i]);
			}
		}

		/**
		*刷新节点
		*@param comp
		*
		*/
		__proto.freshComp=function(comp){
			var data;
			if(!comp["comXml"])return;
			data=comp["comXml"].props;
			var key;
			for(key in data){
				comp[key]=data[key];
			}
		}

		__proto.cacheXML=function(newXml){
			_super.prototype.cacheXML.call(this,newXml);
		}

		__proto.addCompHandler=function(node,parentId){
			if(this.isGraphicAnimation){
				var comp;
				comp=this.getCompById(node.compId);
				var saveData;
				saveData=ObjectTools.copyObj(node);
				if(comp){
					var preSkin;
					var props;
					props=comp.comXml.props;
					comp.comXml.props={};
					this.animation.targetAnimation.recordNodeInfo(node.compId,this.getCompById(node.compId),true);
					comp.comXml.props=props;
					var key;
					for(key in props){
						comp[key]=props[key];
					}
					}else{
					if(comp){
						this.animation.targetAnimation.recordNodeInfo(node.compId,this.getCompById(node.compId),true);
					}
				}
				if(this.isAnimationMode&&this.uiXmlRestored){
					var boxXml;
					boxXml=this.findXmlById(this.uiXmlRestored,parentId);
					if(boxXml){
						if(!boxXml.child)boxXml.child=[];
						saveData.props={};
						boxXml.child.push(ObjectTools.copyObj(saveData));
					}
				}
				this.nodeChanged(node,["skin","x","y"]);
			}
		}

		__proto.nodeChanged=function(node,props){
			if(!node)return;
			_super.prototype.nodeChanged.call(this,node);
			if(!this.isAnimationMode)return;
			var i=0,len=0;
			if(!props)return;
			len=props.length;
			var isGAniFirst=false;
			isGAniFirst=this.isGraphicAnimation&&this.frame==0;
			for(i=0;i<len;i++){
				if(this.isGraphicAnimation&&!TypeManager.isGraphicAniNodeType(node.type)){
					continue ;
				}
				this.animation.addNodeFrame(node,props[i],this.frame);
				if(isGAniFirst){
					if(0){
						var tarO;
						tarO=this.findXmlById(this.uiXmlRestored,node.compId);
						if(tarO){
							tarO.props=ObjectTools.copyObj(node.props);
						}
					}
				}
			}
			this.hasChange=true;
			TimeLinePanel.instance.dataChanged();
			Laya.timer.once(200,this,this.updateTimeLinePanel,null,true);
			if(this.frame==0&&!isGAniFirst){
				Laya.timer.once(200,this,this.alertLater,null,true);
			}
		}

		__proto.alertLater=function(){}
		// MessageManager.instance.show("动画起始帧不可编辑");
		__proto.updateTimeLinePanel=function(){
			TimeLinePanel.instance.aniChanged=true;
			TimeLinePanel.instance.freshData();
		}

		__getset(0,__proto,'frame',function(){
			return this._frame;
			},function(value){
			this._frame=value;
			this.showToFrame();
			var preSelect;
			preSelect=this.selectedComp;
			if(preSelect){
				this.clearSelect();
				preSelect=this._compMap[preSelect["comXml"].compId];
				if(preSelect){
					this.selectComp(preSelect);
				}
			}
		});

		return AnimationDesign;
	})(Design)


	/**
	*
	*@author ww
	*@version 1.0
	*
	*@created 2017-3-10 下午6:14:34
	*/
	//class laya.editor.view.ani.AnimationDesignBothCache extends laya.editor.view.ani.AnimationDesign
	var AnimationDesignBothCache=(function(_super){
		function AnimationDesignBothCache(){
			AnimationDesignBothCache.__super.call(this);
		}

		__class(AnimationDesignBothCache,'laya.editor.view.ani.AnimationDesignBothCache',_super);
		var __proto=AnimationDesignBothCache.prototype;
		__proto.cacheXML=function(newXml){
			this.cacheAni();
		}

		__proto.cacheAni=function(){
			var cacheO;
			cacheO={};
			cacheO.animation=this.animation?this.animation.animations:[];
			cacheO.tree=this.uiXmlRestored?this.uiXmlRestored:this._xml;
			StateManager.updateState(this.aniSign,cacheO);
		}

		__proto.goBack=function(){
			var cacheO;
			cacheO=StateManager.getState(this.aniSign).back();
			this.recoverFromCachO(cacheO);
		}

		__proto.recoverFromCachO=function(cacheO){
			if(!cacheO)return;
			this.animation.animations=cacheO.animation?cacheO.animation:[];
			var newXml;
			newXml=cacheO.tree;
			if(newXml){
				if(this.uiXmlRestored){
					this.uiXmlRestored=newXml;
				}
				this.xml=newXml;
			}
			if(this.isAnimationMode){
				this.setAnimationData();
			}
			this.hasChange=true;
		}

		__proto.goForward=function(){
			var cacheO;
			cacheO=StateManager.getState(this.aniSign).forward();
			this.recoverFromCachO(cacheO);
		}

		__getset(0,__proto,'isAnimationMode',_super.prototype._$get_isAnimationMode,function(v){
			if(!v==this._isAnimationMode){
				if(v){
					this.goBackToStage();
					this.uiXmlRestored=ObjectTools.copyObj(this._xml);
					this._isAnimationMode=v;
					DisplayTreePanel.instance.refresh();
					this.animation.isFirstSetUp=true;
					}else{
					this._isAnimationMode=v;
					PropPanel.instance.initByObj(null,null,-1);
					if(this.animation){
						this.animation.targetAnimation.displayToInitState();
					};
					var preChange=this.hasChange;
					var preXml;
					preXml=this.uiXmlRestored;
					this.uiXmlRestored=null;
					this.xml=preXml;
					this.hasChange=preChange;
				}
			}
			Notice$1.notify("AnimationMode_Change");
		});

		return AnimationDesignBothCache;
	})(AnimationDesign)


	Laya.__init([EventDispatcher,Render,Browser,PageExportType,GraphicAnimation,Timer,LoaderManager,LocalStorage,TimeLine,View,ViewHook]);
	new LayaAirJsonMergeTool();

})(window,document,Laya);


/*
1 file:///E:/wangwei/codes/laya/libs/LayaAir/core/src/laya/display/Stage.as (240):warning:_adjustTransform This variable is not defined.
*/