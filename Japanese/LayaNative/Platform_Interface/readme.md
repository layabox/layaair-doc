#åå°„æ©Ÿæ§‹ã§Native APPãƒãƒ£ãƒãƒ«ã‚’ãƒ‰ãƒƒã‚­ãƒ³ã‚°ã™ã‚‹

LayaNativeã¯åå°„æ©Ÿæ§‹ã«ã‚ˆã£ã¦é–‹ç™ºè€…ã«ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®å†…å®¹ã¯ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã®å•†åº—è¡—ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€åå°„ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’åˆ©ç”¨ã—ã¦ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã®ä»•äº‹ã‚’å®Œæˆã™ã‚‹æ–¹æ³•ã‚’è©³ã—ãç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚

###1.ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒˆã®ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚»ãƒ³ã‚¿ãƒ¼

LayaNativeã¯ã™ã§ã«åå°„æ©Ÿæ§‹ã«ã‚ˆã£ã¦JavaScriptã¨åŸç”Ÿé–‹ç™ºè¨€èªï¼ˆAndroidã§Javaã€iOSã§Objective-Cï¼‰ã¨ã®ç›¸äº’å‘¼å‡ºã—ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚é–‹ç™ºè€…ã¯æ®‹ã‚Šã®åŸç”Ÿé–‹ç™ºè¨€èªï¼ˆAndroidã§Javaã€iOSã§Objective-Cï¼‰éƒ¨åˆ†ã®é–‹ç™ºä½œæ¥­ã‚’å®Œæˆã™ã‚‹ã ã‘ã§ã™ã€‚

####1.1 iOSã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã®ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«ã®å®Ÿç¾ï¼š

#####Part.1-ã‚¯ãƒ©ã‚¹ååå°„ï¼š

LayaNativeã§æ§‹ç¯‰ã•ã‚ŒãŸiOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€PlatformInterfaceãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã«è‡ªå‹•ä½œæˆã•ã‚ŒãŸMarket AppStoreé¡ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã¯LayaplatformInterfaceé¡ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã—ã¦ã€resource/config.iniã«plotem Class Name=MarketApStoreã‚’è¨­ç½®ã—ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«ã€ç§é”ã¯lognãƒ¡ã‚½ãƒƒãƒ‰ã‚’å…ƒã«ã—ã¾ã™ã€‚ginãƒ¡ã‚½ãƒƒãƒ‰ã®äºŒæ¬¡é–‹ç™º

#####Part 2-JavaScriptå‘¼ã³å‡ºã—OC:

ã‚„ã¯ã‚Šä¸Šè¿°ã®loginæ–¹æ³•ã‚’ä¾‹ã«ã¨ã£ã¦ã€JavaScriptã§ã¯ã€conchMarketé¡ã§å‘¼ã³å‡ºã•ã‚Œã‚‹loginæ–¹æ³•ã¯ã€å®Ÿéš›ã«LayaplatformInterfaceã§LPãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€JavaScriptã§OCã‚’å‘¼ã³å‡ºã™ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚

#####Part 3-OCå‘¼ã³å‡ºã—JavaScript:

ä¸Šè¨˜ã®loginæ–¹æ³•ã‚’ä¾‹ã«ã¨ã£ã¦ã€JavaScriptã§ã¯ã€conchMarketé¡ã§å‘¼ã³å‡ºã•ã‚ŒãŸloginæ–¹æ³•ã§å®Ÿè¡Œå¾Œã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•ã¯LayaplatformCallbackã§å®£è¨€ã—ã€LayaplatformInterfaceã®LP uLoginã§LayaplatformCallbackã®å‘¼ã³å‡ºã—æ–¹æ³•ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

#####Part 4-ã‚³ãƒ¼ãƒ‰ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ:


```javascript

// JavaScriptä¸­è°ƒç”¨æ–¹å¼: conchMarket.login([å‚æ•°], [å›è°ƒå‡½æ•°]) ;
var sData={type:"test"};
window.conchMarket.login(JSON.stringify(sData),function(data){
console.log(data);
// TODO æ•°æ®å¤„ç†.
});
```



```javascript

// MarketAppStore.mmæ–‡ä»¶ä¸­æ ¹æ®è‡ªå·±éœ€æ±‚æ·»åŠ ç›¸å…³ä»£ç åˆ°LP_Loginæ–¹æ³•ä¸­, JavaScriptä¸­è°ƒç”¨conchMarket.loginå°±ä¼šæ‰§è¡ŒLP_Loginæ–¹æ³•.
-(void)LP_Login:(NSString*)jsonParam{
// TODO è°ƒç”¨ç¬¬ä¸‰æ–¹å¹³å°çš„ç™»é™†çš„ç™»é™†æ¥å£
// OCå±‚è°ƒç”¨ç™»å½•ç»“æŸå›è°ƒ.
[[LayaPlatformCallback GetInstance] LP_LoginCallback:pJsonString];
}
```


####1.2 Androidã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã®ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«ã®å®Ÿç¾ï¼š

#####Part.1-ã‚¯ãƒ©ã‚¹ååå°„ï¼š

LayaNativeã«ã‚ˆã£ã¦æ§‹ç¯‰ã•ã‚ŒãŸAndroidãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§ã€layaair.game.Marketãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è‡ªå‹•çš„ã«ä½œæˆã•ã‚ŒãŸMarket Testé¡ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ç¨®é¡ã¯Layaplatform Interfaceé¡ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œã¦ã„ã¾ã™ã€‚ç§é”ã¯loginæ–¹æ³•ã‚’ä¾‹ã«ã¨ã£ã¦ã€MarketTest.javaã§LP Loginæ–¹æ³•ã‚’æ›¸ãæ›ãˆã‚‹ã ã‘ã§ã€loginæ–¹æ³•ã‚’å®Œæˆã—ã¾ã—ãŸã€‚

#####Part 2-JavaScriptå‘¼ã³å‡ºã—Java:

ã‚„ã¯ã‚Šä¸Šè¿°ã®loginæ–¹æ³•ã‚’ä¾‹ã«ã¨ã£ã¦ã€JavaScriptã§ã¯ã€conchMarketé¡ã§å‘¼ã³å‡ºã•ã‚Œã‚‹loginæ–¹æ³•ã¯ã€å®Ÿéš›ã«LayaplatformInterfaceã§LPãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯Java Scriptã§Javaã‚’å‘¼ã³å‡ºã™ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚ã™ãªã‚ã¡ã€conchMarket.login=LayaplatformInterfaceã®LPãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

#####Part 3-Javaå‘¼ã³å‡ºã—Java Script:

ä¸Šè¨˜ã®loginæ–¹æ³•ã‚’ä¾‹ã«ã¨ã£ã¦ã€JavaScriptã§ã¯ã€conchMarketé¡ã§å‘¼ã³å‡ºã•ã‚ŒãŸloginãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ãŸå¾Œã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•ã¯LayaplatformCallbackã§å®£è¨€ã—ã€LayaplatformInterfaceã®LPuLoginã§LayaplatformCallbackã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚=>LayaplatformCallbackã®LPã‚®ãƒ£ãƒ«Callbackã€‚

#####Part 4-ã‚³ãƒ¼ãƒ‰ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ:


```javascript

// JavaScriptä¸­è°ƒç”¨æ–¹å¼: conchMarket.login([å‚æ•°], [å›è°ƒå‡½æ•°]) ;
var sData={type:"test"};
window.conchMarket.login(JSON.stringify(sData),function(data){
console.log(data);
// æ•°æ®å¤„ç†.
});
```



```javascript

// MarketTest.javaæ–‡ä»¶ä¸­æ ¹æ®è‡ªå·±éœ€æ±‚æ·»åŠ ç›¸å…³ä»£ç åˆ°LP_Loginæ–¹æ³•ä¸­, JavaScriptä¸­è°ƒç”¨conchMarket.loginå°±ä¼šæ‰§è¡ŒLP_Loginæ–¹æ³•.
public void LP_Login(final String jsonParam)
{
// è°ƒç”¨ç¬¬ä¸‰æ–¹å¹³å°çš„ç™»é™†çš„ç™»é™†æ¥å£
// Javaå±‚è°ƒç”¨ç™»å½•ç»“æŸå›è°ƒ.
LayaPlatformCallback.GetInstance().LP_LoginCallback(objCallBack.toString());
}
```


###2.ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒãƒ«ã®APIçµ±åˆ

LayaNativeãŒæä¾›ã™ã‚‹åå°„æ©Ÿæ§‹ã«ã‚ˆã£ã¦ã€é–‹ç™ºè€…ã¯ç•°ãªã‚‹ãƒãƒ£ãƒãƒ«ã®ã„ãã¤ã‹ã®ã‚ˆãä½¿ã‚ã‚Œã‚‹APIï¼ˆä¾‹ãˆã°ã€ãƒ­ã‚°ã‚¤ãƒ³ã€å…±æœ‰ã€ãƒãƒ£ãƒ¼ã‚¸ãªã©ï¼‰ã‚’JavaScriptå±¤ã§çµ±ä¸€ã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œã£ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã®åŸç”Ÿé–‹ç™ºè¨€èªã‚’ä½¿ã£ã¦ã€LayaNativeã¯conchMarketå…¨å±€é¡ã‚’é€šã˜ã¦ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒãƒ£ãƒãƒ«ã«é–¢é€£ã™ã‚‹APIã‚’çµ±åˆã—ã¦ã€é–‹ç™ºè€…ã«ä¾¿åˆ©ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ï¼ˆæ³¨ï¼šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¯¾å¿œã®ã‚ªãƒªã‚¸ãƒŠãƒ«é–‹ç™ºè¨€èªï¼ˆAndroidã§Javaï¼ŒiOSã§Objective-Cï¼‰ã®éƒ¨åˆ†ã®ã‚³ãƒ¼ãƒ‰ä½œæ¥­ã¯ã€äºŒæ¬¡é–‹ç™ºä¸­ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ï¼‰

|APIã®åå‰ğ“œAPIã¯ã€124; APIã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—124;ã‚’èª¬æ˜ã—ã¾ã™ã€‚
|------------------------|--------------------------|
|init|åˆæœŸåŒ–Market|`conchMarket.init(JSON.stringify(sData),function(data));`ğ“œ
124 logn 124ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚`conchMarket.login(JSON.stringify(sData),function(data));`ğ“œ
124 logoutğ“œç™»ğ“œ`conchMarket.logout(JSON.stringify(sData),function(data));`ğ“œ
|switch Userğ“œåˆ‡ã‚Šæ›¿ãˆãƒ¦ãƒ¼ã‚¶`conchMarket.switchUser(JSON.stringify(sData),function(data));`ğ“œ
|enterPlatformãŒç¬¬ä¸‰è€…ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å…¥ã‚‹ã€‚`conchMarket.enterPlatform(JSON.stringify(sData),function(data));`ğ“œ
124 enterBBS 124ãŒãƒ•ã‚©ãƒ¼ãƒ©ãƒ ã«å…¥ã‚‹ã€‚`conchMarket.enterBBS(JSON.stringify(sData),function(data));`ğ“œ
|enterFeedback 124;ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯`conchMarket.enterFeedback(JSON.stringify(sData),function(data));`ğ“œ
|enterAcceountMgrã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã«å…¥ã‚‹`conchMarket.enterAccountMgr(JSON.stringify(sData),function(data));`ğ“œ
|authorizeæˆæ¨©ğ“œ`conchMarket.authorize(JSON.stringify(sData),function(data));`ğ“œ
|refsh Token|ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥token 124;`conchMarket.refreshToken(JSON.stringify(sData),function(data));`ğ“œ
|rechargeï¼ˆ1.0.4 czã«å¤‰æ›´ï¼‰|ãƒãƒ£ãƒ¼ã‚¸`conchMarket.recharge(JSON.stringify(sData),function(data));`ğ“œ
124 buyProps 124ãŒé“å…·ã‚’è²·ã†ã€‚`conchMarket.buyProps(JSON.stringify(sData),function(data));`ğ“œ
|setRechargInfoï¼ˆ1.0.4 setCZinfoã«å¤‰æ›´ï¼‰|è¨­å®šãƒãƒ£ãƒ¼ã‚¸æƒ…å ±|`conchMarket.setRechargeInfo(JSON.stringify(sData),function(data));`ğ“œ
|enterShare AndFeed|ã‚·ã‚§ã‚¢`conchMarket.enterShareAndFeed(JSON.stringify(sData),function(data));`ğ“œ
|enterInvite124;æ‹›å¾…`conchMarket.enterInvite(JSON.stringify(sData),function(data));`ğ“œ
å‹é”ãƒªã‚¹ãƒˆã‚’ç²å¾—ã—ã¾ã—ãŸã€‚`conchMarket.getGameFriends(JSON.stringify(sData),function(data));`ğ“œ
ğ“œsendToDesktop 124;ãŒãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚`conchMarket.sendToDesktop(JSON.stringify(sData),function(data));`ğ“œ
124 sendMessage ToPlatform|ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚`conchMarket.sendMessageToPlatform(JSON.stringify(sData),function(data));`ğ“œ
|canSendToDesktop|ã¯pusiconã‹ã©ã†ã‹`conchMarket.canSendToDesktop(JSON.stringify(sData),function(data));`ğ“œ
|opentopicCircule 124;ãŒè©±é¡Œã®è¼ªã‚’åºƒã’ã‚‹`conchMarket.openTopicCircle(JSON.stringify(sData),function(data));`ğ“œ

**ä»˜éŒ²:**

[å¯¹æ¥æ¸ é“demo for Eclipse(Android) ç¤ºä¾‹ä¸‹è½½](http://ldc.layabox.com/download/tools/SampleForEclipse.zip)

[å¯¹æ¥æ¸ é“demo for AndroidStudio(Android) ç¤ºä¾‹ä¸‹è½½](http://ldc.layabox.com/download/tools/SampleForAndroidStudio.zip)