#性能統計パネルの紹介

LayaAirエンジンの設計当初は、性能を第一に、エンジン内で多くの性能を最適化しました。エンジンを合理的に運用して、ゲームなどのエンジン製品を原生APPの体験に達することができます。開発者がエンジンの優位性を発揮できないと、ゲームの最終的な性能体験ができなくなります。そのため、ゲームを作るには、ゲームやエンジンの最適化技術を身につける必要があります。



>エンジンの性能を知るには、まず性能統計パネルを見て、性能統計パネルについて詳しく紹介します。



##1、性能統計パネルの呼び出し

LayaAirエンジン内蔵の性能統計パネルは、現在の性能をリアルタイムで検出することができます。統計パネルの呼び出しは、開発言語によって異なります。

TS言語は直接コードに入力されます。`Laya.Stat.show(0,0);`性能統計パネルを呼び出すことができます。

例のDemo.js作成コードは以下の通りです。


```typescript

//初始化舞台
Laya.init(1136, 640);
//调用性能统计面板方法，(0,0)为面板位置坐标
Laya.Stat.show(0,0);
```


**Tips**：大文字と小文字に注意します。



##2、FPS関連の紹介

###2.1 FPS概要

FPSは、毎秒フレーム数（Fraames Per Second）の略語である。ゲームのフレームレートは60 FPSと仮定して、ゲームが実行される時の各フレームの実行時間は1／60秒であることを示しています。フレームレートの値が高いほど、視覚的に滑らかな感じがします。

![图1](img/1.png)<br/>(図1)

現在のPCや携帯電話などのデバイスのフルフレームは60フレームです。図1に示すように、画面の流暢さに対する要求が高くないゲームもあります。エンジンのフレームレート制限方法を採用することもできます。`Stage.FRAME_SLOW`FPSフレームレートを最高30フレームに制限する。

実際の動作環境はブラウザにあるので、性能はJavaScript解释器の効率にも依存しています。したがって、同じゲームのFPS値は異なるブラウザで異なる場合があります。この部分は開発者が決めることができるのではなく、開発者ができるのはエンジンと最適化プロジェクトをできるだけ使い、ローエンドの設備や低性能ブラウザでFPSフレームレートを向上させることです。

####2.2異なるモードのFPS

LayaAirエンジンはCanvasとWebGLの2つのレンダリングモードをサポートします。したがって、FPSフレームレートを見るときは、どのモードであるかに注意してください。`FPS(Canvas)`Canvasモードのフレームレートを説明します。図1に示すように。`FPS(WebGL)`説明はWebGLモードのフレームレートであり、図2に示すように。

![图片2.png](img/2.png)<br />	（图2）



####2.3 FPSの数値説明

図1と図2において、FPSの最初の黄色値`60`現在の**FPSフレームレート**高いほどいいです。

二番目の黄色`16`を選択します**レンダリング毎に消費される時間**単位はミリ秒で、この値は小さいほどいいです。

この二つの値がフルフレームで維持されないと、図3に示すように、製品の動作中に変化が生じます。

![动图3](img/3.gif)<br/>(図3)





##3、Spriteの紹介

Spriteは、すべてのレンダリングノード（容器を含む）の数を統計します。この数字の大きさはエンジンノードの巡回、データ組織とレンダリングの回数に影響します。数字は低いほどいいです。このため、プロジェクトの設計の時、できるだけレンダリングノードを減らすことを提案します。





##4、DrawCall紹介


 **DrawCallの回数は性能を決める重要な指標です。**は、統計パネルの3行目にあります。図4に示します。DrawCallはCanvasとWebGLによって異なる意味を表していますが、どれも少なければ少ないほどいいです。**開発者はできるだけ100以下に制限することを提案します。**。

![图4](img/4.png) <br /> (图4)







####4.1 Canvas下のDrawCall

Canvasモードでは、DrawCallは、各フレームの描画回数を表し、画像、文字、ベクトル図を含む。

####4.2 WebGL下のDrawCall

WebGLモードでDrawCallはレンダリング提出ロットを示し、データを準備してGPUにレンダリングを通知する過程を1回のDrawCallといい、1回のDrawCallでGPUに通知するレンダリングに時間がかかるほか、材質の切り替えやsharerの操作も非常に時間がかかる。



##5、CurMemの紹介

WebGLモードでは、CurMemはメモリと現存の占有を表し、値が低いほど良い。

Canvasモードでは現存の概念がなく、CurMemはメモリの占有状況だけを表し、値が低いほど良い。



##6、Shader紹介

ShaderはWebGLモード特有の性能指標であり、フレームごとのShaderの提出回数を表し、値が低いほど良い。



##7、Canvasの紹介

Canvasここには3つの数値があります。図5に示すように、ここではCacheAsを設定してからしか値がありません。デフォルトでは`0/0/0`。左から右までの値の意味はそれぞれ次の通りです。`每帧重绘的画布数量`を選択します。`缓存类型为“normal”类型的画布数量`を選択します。`缓存类型为“bitmap”类型的画布数量`。


![图5](img/5.png)<br/>(図5)


**Tips**：CacheAsの更なる最適化についての紹介は、文書「CacheAs静的キャッシュ最適化」を参照することができます。










 