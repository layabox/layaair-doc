#LayaAirエンジンはSpine骨格アニメーションを放送します。

>本編ではLayaAirIDE 2.0バージョンのスクリーンショットを用いて説明します。もし違いがあれば、最新の安定バージョンのLayaAirIDEをダウンロードしてください。最新バージョンを基準にしてください。

Spine骨格アニメーションは、ゲームでよく使われる骨格アニメーションの一つであり、LayaAirIDEが持参した変換ツールで、Spine骨格アニメーションフォーマットをLayaAirエンジンがサポートする骨格アニメーションフォーマットに変換することができます。



###1、オリジナルSpine骨格動画のエクスポート時の注意事項

オリジナルSpine骨格アニメーションはエクスポート時に、いくつかの注意事項があります。でないと、変換が完了しません。

####1.1 JSON形式への変換のみ対応

Spine骨格アニメーションはJSONとバイナリのデータ導出方式をサポートしていますが、LayaAirIDEのSpine変換ツールはJSON形式の変換のみをサポートしています。エクスポートする時はJSON形式を選択してエクスポートしてください。

####1.2エクスポートする時は画集を作成しなければなりません。

LayaAirIDEのSpine変換ツールは、図セットモードのSpine骨格アニメーション変換のみをサポートしています。そのため、Spine骨格アニメーション編集ツールを使ってエクスポートする場合は、チェックを付けなければなりません。`创建图集`を選択します。

![图1](img/1.png) 


（図1）Spine骨格アニメーション編集ツールの導出画面

####1.3図面パッケージの設定項目では、回転オプションを選択できません。

Spine骨格アニメーション編集ツールの作成図集の右側にクリックしてください。`设置`ボタンを押してセットアウト設定画面に入ります。エリア設定の確認をしたいです。`旋转`オプションはチェックされていません。チェック`旋转`オプションを選択すると、LayaAirIDEからSpineツールに変換できません。

![图2](img/2.png) 


（図2）Spine骨格動画の出力図セットのパッケージ設定画面

####1.4エクスポートするSpineバージョンに注意してください。

LayaAirIDEはすべてのスピンオフがサポートされているわけではない。サポートされているバージョン番号はSpine変換ツールパネルに表示されます。この文書の場合、Spineは3.4.0.2バージョンから3.6.16バージョンまでサポートされています。その後のLayaAirIDEは不定期にSpineのバージョンサポートの更新を行い、開発者は変換ツールパネル上のバージョン番号のサポート状態の変化に注目することができます。

####1.5エクスポート全体のディレクトリを変換

生成したファイルをエクスポート`atlas,json,png`フォーマットのファイルは、図3に示します。変換ツールを使って変換する場合は、直接ファイルをドラッグして変換しないで、親レベルのディレクトリ全体(*図3のspineディレクトリ*)を変換パネルにドラッグします。

![图3](img/3.png) 


（図3）



###2、SpineアニメーションをLayaAirエンジン識別のフォーマットに変換する

####2.1変換ツールパネルを開く

LayaAirIDEの`设计模式`で、メニューバーの`工具`-->`Spine动画转换`を選択します。図4に示すように、開くことができます。`Spine格式转换`ツール。

![图4](img/4.png) 


（図4）


開いている`Spine格式转换`ツールパネルにおいて、上部Spineの後ろの括弧内は変換をサポートするspineバージョン番号であり、図5に示すように、Spine 3.4.0.2と3.6.16バージョンと2つのバージョンの間のSpine骨格アニメーションをLayaAirエンジンサポートのフォーマットに変換します。

![图5](img/5.png) 


（図5）




####2.2生成.sk拡張の骨格アニメーションファイル

開く`Spine格式转换`ツールパネルの後、spineから導出したリソースディレクトリを変換パネルにドラッグするか、ブラウズボタンをクリックしてspineから導出したリソースディレクトリを選択します。をクリックします`确定`を選択します。元のリソースディレクトリの下で新しい骨格アニメーションファイルを作成できます。

![图6](img/6.png) 


（図6）



###3、Spineアニメーションのロード表示

####3.1変換されたspineアニメーションリソースをプロジェクトに対応するディレクトリにコピーします。

変換によって生成されたskフォーマットファイルの他に、図7に示すように、png拡張子の図式リソースもプロジェクトのディレクトリにコピーする必要があります。(*他のエクスポートファイルは構いません。変換ツールのみに使用します。＊）

![图7](img/7.png) 


（図7）

####3.2 spineアニメーション再生例

以下の例を使用します。`laya.ani.bone.Skeleton`クラス、具体的なAPIの説明はリンクを直接開いて見ることができます。[https://layaair.ldc.layabox.com/api/?category=Bone&class=laya.ani.bone.Skeleton](https://layaair.ldc.layabox.com/api/?category=Bone&class=laya.ani.bone.Skeleton)

SpineDemo.tsを作成し、コードは下記の通り作成します。


```typescript

//初始化舞台
Laya.init(1334,750,Laya.WebGL);
//创建一个Skeleton对象
var skeleton:Laya.Skeleton = new Laya.Skeleton();
//添加到舞台
Laya.stage.addChild(skeleton);
skeleton.pos(600,700);
//通过加载直接创建动画
skeleton.load("res/spine/spineboy/spineboy.sk");
```

運転効果は図8に示すようになります。

![动图8](img/8.gif) 


(図8)

