#Unityからモデルアニメーションを編集してエクスポートします。

######  *version :2.1.1beta   Update:2019-7-27 插件版本：2.1.0*

ゲームキャラクターの骨格隠し動画は3 Dゲームで多く使われており、キャラクターの動画モデルをunityに導入して編集し、LayaAirにエクスポートして使用することができます。

>ここで使われている骨格アニメーションの例として猿が挙げられます。

####モデルをインポート

ユニティリソースマネージャでは、FBXフォーマットのリソース、スタンプリソースを右クリックして導入し、モデルをシーンにドラッグして、材質のスタンプを調整して保存します。この例では保存シーンの名前は「mokey」です。

！[](img/1.png)<br/>(図1)

####アニメーションコントローラを作成

unityリソースマネージャでは、右クリックでメニューを作成し、アニメーションコントローラを作成し、アニメーションの名前に基づいて、本例では「LayaMonkey Controller」と名づけます。

！[](img/2 png)<br/>(図2)

####アニメーションコントローラを編集

アニメーションコントローラをダブルクリックして開くと、ビューエリアにアニメーションコントローラの編集画面が表示されます。ドットオンで導入されたモデルの右側の「小さな三角」が表示されます。「再生フラグ」ファイルはモデルのアニメーションファイルで、デフォルトは「Take 001」と呼ばれ、アニメーションコントローラ編集画面（図3）にドラッグして保存されます。

！[](img/3%png)<br/>

（図3）

####アニメーションコントローラをバインド

シーン中のキャラクターモデルを選択して、キャラクターアニメーションコントローラを選択したモデルのアニメーションコンポーネントに付与します（図4）。アニメーションコンポーネントがない場合、キャラクターに一つのバインディングが必要です。そうでないと、導出されたアニメーションは再生できません。

！[](img/4 png)<br/>(図4)

以上の手順を経て、キャラクターアニメーションのunityでの編集が完了しました。unityでボタンを押すと、動画が再生されます。動画再生に問題がなければ、以前の「unityプラグインツール」の教程方法でLayaAirに必要なリソースを導き出すことができます。

**Tips：他のアニメーションもunityでの処理方式が一致しており、シーンモデルにアニメーションコンポーネントを追加する――アニメーションコントローラを作成する――アニメーションをアニメーションコントローラに加える――アニメーションコントローラにモデルを追加するアニメーションコンポーネントにアニメーションを追加するステップが必要です。**

###アニメーションのエクスポートには注意が必要です。

#####アニメーションファイル関連

複数のアニメーションファイルは名前が重複していません。

#####剛体アニメーション関連

剛体アニメーションを使用する場合は、アニメイトコントローラにAvatarを追加しないでください。

#####骨格の関連動画

1.骨格ノードに関するオブジェクトの骨格に同名のノードがあってはならない。

2.アニメーションタイプはGeneracタイプのみに対応します。

3.Optimize Game Objectにチェックしないでください。

！[](img/6.png)<br/>(図6)

#####アニメーションコントローラタイプ

アニメコントローラはサポートされていません。

！[](img/7 png)<br/>